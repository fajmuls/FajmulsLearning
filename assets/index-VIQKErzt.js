(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function BE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var U0={exports:{}},Wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function r2(){if(Uv)return Wc;Uv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return Wc.Fragment=e,Wc.jsx=t,Wc.jsxs=t,Wc}var Ov;function o2(){return Ov||(Ov=1,U0.exports=r2()),U0.exports}var o=o2(),O0={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function l2(){if(Vv)return ot;Vv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function E(F){return F===null||typeof F!="object"?null:(F=T&&F[T]||F["@@iterator"],typeof F=="function"?F:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function U(F,Q,fe){this.props=F,this.context=Q,this.refs=C,this.updater=fe||R}U.prototype.isReactComponent={},U.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},U.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function M(){}M.prototype=U.prototype;function G(F,Q,fe){this.props=F,this.context=Q,this.refs=C,this.updater=fe||R}var q=G.prototype=new M;q.constructor=G,k(q,U.prototype),q.isPureReactComponent=!0;var X=Array.isArray;function J(){}var D={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(F,Q,fe){var ie=fe.ref;return{$$typeof:n,type:F,key:Q,ref:ie!==void 0?ie:null,props:fe}}function P(F,Q){return I(F.type,Q,F.props)}function L(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function z(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(fe){return Q[fe]})}var V=/\/+/g;function Ee(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):Q.toString(36)}function De(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(J,J):(F.status="pending",F.then(function(Q){F.status==="pending"&&(F.status="fulfilled",F.value=Q)},function(Q){F.status==="pending"&&(F.status="rejected",F.reason=Q)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Y(F,Q,fe,ie,re){var ue=typeof F;(ue==="undefined"||ue==="boolean")&&(F=null);var Ae=!1;if(F===null)Ae=!0;else switch(ue){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(F.$$typeof){case n:case e:Ae=!0;break;case b:return Ae=F._init,Y(Ae(F._payload),Q,fe,ie,re)}}if(Ae)return re=re(F),Ae=ie===""?"."+Ee(F,0):ie,X(re)?(fe="",Ae!=null&&(fe=Ae.replace(V,"$&/")+"/"),Y(re,Q,fe,"",function(At){return At})):re!=null&&(L(re)&&(re=P(re,fe+(re.key==null||F&&F.key===re.key?"":(""+re.key).replace(V,"$&/")+"/")+Ae)),Q.push(re)),1;Ae=0;var Fe=ie===""?".":ie+":";if(X(F))for(var We=0;We<F.length;We++)ie=F[We],ue=Fe+Ee(ie,We),Ae+=Y(ie,Q,fe,ue,re);else if(We=E(F),typeof We=="function")for(F=We.call(F),We=0;!(ie=F.next()).done;)ie=ie.value,ue=Fe+Ee(ie,We++),Ae+=Y(ie,Q,fe,ue,re);else if(ue==="object"){if(typeof F.then=="function")return Y(De(F),Q,fe,ie,re);throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function le(F,Q,fe){if(F==null)return F;var ie=[],re=0;return Y(F,ie,"","",function(ue){return Q.call(fe,ue,re++)}),ie}function _e(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(fe){(F._status===0||F._status===-1)&&(F._status=1,F._result=fe)},function(fe){(F._status===0||F._status===-1)&&(F._status=2,F._result=fe)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var Oe=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},te={map:le,forEach:function(F,Q,fe){le(F,function(){Q.apply(this,arguments)},fe)},count:function(F){var Q=0;return le(F,function(){Q++}),Q},toArray:function(F){return le(F,function(Q){return Q})||[]},only:function(F){if(!L(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return ot.Activity=_,ot.Children=te,ot.Component=U,ot.Fragment=t,ot.Profiler=a,ot.PureComponent=G,ot.StrictMode=s,ot.Suspense=p,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ot.__COMPILER_RUNTIME={__proto__:null,c:function(F){return D.H.useMemoCache(F)}},ot.cache=function(F){return function(){return F.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(F,Q,fe){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ie=k({},F.props),re=F.key;if(Q!=null)for(ue in Q.key!==void 0&&(re=""+Q.key),Q)!A.call(Q,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&Q.ref===void 0||(ie[ue]=Q[ue]);var ue=arguments.length-2;if(ue===1)ie.children=fe;else if(1<ue){for(var Ae=Array(ue),Fe=0;Fe<ue;Fe++)Ae[Fe]=arguments[Fe+2];ie.children=Ae}return I(F.type,re,ie)},ot.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},ot.createElement=function(F,Q,fe){var ie,re={},ue=null;if(Q!=null)for(ie in Q.key!==void 0&&(ue=""+Q.key),Q)A.call(Q,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(re[ie]=Q[ie]);var Ae=arguments.length-2;if(Ae===1)re.children=fe;else if(1<Ae){for(var Fe=Array(Ae),We=0;We<Ae;We++)Fe[We]=arguments[We+2];re.children=Fe}if(F&&F.defaultProps)for(ie in Ae=F.defaultProps,Ae)re[ie]===void 0&&(re[ie]=Ae[ie]);return I(F,ue,re)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(F){return{$$typeof:h,render:F}},ot.isValidElement=L,ot.lazy=function(F){return{$$typeof:b,_payload:{_status:-1,_result:F},_init:_e}},ot.memo=function(F,Q){return{$$typeof:f,type:F,compare:Q===void 0?null:Q}},ot.startTransition=function(F){var Q=D.T,fe={};D.T=fe;try{var ie=F(),re=D.S;re!==null&&re(fe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(J,Oe)}catch(ue){Oe(ue)}finally{Q!==null&&fe.types!==null&&(Q.types=fe.types),D.T=Q}},ot.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ot.use=function(F){return D.H.use(F)},ot.useActionState=function(F,Q,fe){return D.H.useActionState(F,Q,fe)},ot.useCallback=function(F,Q){return D.H.useCallback(F,Q)},ot.useContext=function(F){return D.H.useContext(F)},ot.useDebugValue=function(){},ot.useDeferredValue=function(F,Q){return D.H.useDeferredValue(F,Q)},ot.useEffect=function(F,Q){return D.H.useEffect(F,Q)},ot.useEffectEvent=function(F){return D.H.useEffectEvent(F)},ot.useId=function(){return D.H.useId()},ot.useImperativeHandle=function(F,Q,fe){return D.H.useImperativeHandle(F,Q,fe)},ot.useInsertionEffect=function(F,Q){return D.H.useInsertionEffect(F,Q)},ot.useLayoutEffect=function(F,Q){return D.H.useLayoutEffect(F,Q)},ot.useMemo=function(F,Q){return D.H.useMemo(F,Q)},ot.useOptimistic=function(F,Q){return D.H.useOptimistic(F,Q)},ot.useReducer=function(F,Q,fe){return D.H.useReducer(F,Q,fe)},ot.useRef=function(F){return D.H.useRef(F)},ot.useState=function(F){return D.H.useState(F)},ot.useSyncExternalStore=function(F,Q,fe){return D.H.useSyncExternalStore(F,Q,fe)},ot.useTransition=function(){return D.H.useTransition()},ot.version="19.2.3",ot}var Bv;function eg(){return Bv||(Bv=1,O0.exports=l2()),O0.exports}var B=eg();const GE=BE(B);var V0={exports:{}},Xc={},B0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function c2(){return Gv||(Gv=1,(function(n){function e(Y,le){var _e=Y.length;Y.push(le);e:for(;0<_e;){var Oe=_e-1>>>1,te=Y[Oe];if(0<a(te,le))Y[Oe]=le,Y[_e]=te,_e=Oe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var le=Y[0],_e=Y.pop();if(_e!==le){Y[0]=_e;e:for(var Oe=0,te=Y.length,F=te>>>1;Oe<F;){var Q=2*(Oe+1)-1,fe=Y[Q],ie=Q+1,re=Y[ie];if(0>a(fe,_e))ie<te&&0>a(re,fe)?(Y[Oe]=re,Y[ie]=_e,Oe=ie):(Y[Oe]=fe,Y[Q]=_e,Oe=Q);else if(ie<te&&0>a(re,_e))Y[Oe]=re,Y[ie]=_e,Oe=ie;else break e}}return le}function a(Y,le){var _e=Y.sortIndex-le.sortIndex;return _e!==0?_e:Y.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],f=[],b=1,_=null,T=3,E=!1,R=!1,k=!1,C=!1,U=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function q(Y){for(var le=t(f);le!==null;){if(le.callback===null)s(f);else if(le.startTime<=Y)s(f),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(f)}}function X(Y){if(k=!1,q(Y),!R)if(t(p)!==null)R=!0,J||(J=!0,z());else{var le=t(f);le!==null&&De(X,le.startTime-Y)}}var J=!1,D=-1,A=5,I=-1;function P(){return C?!0:!(n.unstable_now()-I<A)}function L(){if(C=!1,J){var Y=n.unstable_now();I=Y;var le=!0;try{e:{R=!1,k&&(k=!1,M(D),D=-1),E=!0;var _e=T;try{t:{for(q(Y),_=t(p);_!==null&&!(_.expirationTime>Y&&P());){var Oe=_.callback;if(typeof Oe=="function"){_.callback=null,T=_.priorityLevel;var te=Oe(_.expirationTime<=Y);if(Y=n.unstable_now(),typeof te=="function"){_.callback=te,q(Y),le=!0;break t}_===t(p)&&s(p),q(Y)}else s(p);_=t(p)}if(_!==null)le=!0;else{var F=t(f);F!==null&&De(X,F.startTime-Y),le=!1}}break e}finally{_=null,T=_e,E=!1}le=void 0}}finally{le?z():J=!1}}}var z;if(typeof G=="function")z=function(){G(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Ee=V.port2;V.port1.onmessage=L,z=function(){Ee.postMessage(null)}}else z=function(){U(L,0)};function De(Y,le){D=U(function(){Y(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var _e=T;T=le;try{return Y()}finally{T=_e}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _e=T;T=Y;try{return le()}finally{T=_e}},n.unstable_scheduleCallback=function(Y,le,_e){var Oe=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Oe+_e:Oe):_e=Oe,Y){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=_e+te,Y={id:b++,callback:le,priorityLevel:Y,startTime:_e,expirationTime:te,sortIndex:-1},_e>Oe?(Y.sortIndex=_e,e(f,Y),t(p)===null&&Y===t(f)&&(k?(M(D),D=-1):k=!0,De(X,_e-Oe))):(Y.sortIndex=te,e(p,Y),R||E||(R=!0,J||(J=!0,z()))),Y},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Y){var le=T;return function(){var _e=T;T=le;try{return Y.apply(this,arguments)}finally{T=_e}}}})(G0)),G0}var zv;function u2(){return zv||(zv=1,B0.exports=c2()),B0.exports}var z0={exports:{}},Xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function d2(){if(Fv)return Xn;Fv=1;var n=eg();function e(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,f,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:f,implementation:b}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Xn.createPortal=function(p,f){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(p,f,null,b)},Xn.flushSync=function(p){var f=u.T,b=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=f,s.p=b,s.d.f()}},Xn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(p,f))},Xn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Xn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var b=f.as,_=h(b,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;b==="style"?s.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:E}):b==="script"&&s.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Xn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var b=h(f.as,f.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(p)},Xn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var b=f.as,_=h(b,f.crossOrigin);s.d.L(p,b,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Xn.preloadModule=function(p,f){if(typeof p=="string")if(f){var b=h(f.as,f.crossOrigin);s.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(p)},Xn.requestFormReset=function(p){s.d.r(p)},Xn.unstable_batchedUpdates=function(p,f){return p(f)},Xn.useFormState=function(p,f,b){return u.H.useFormState(p,f,b)},Xn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Xn.version="19.2.3",Xn}var Hv;function h2(){if(Hv)return z0.exports;Hv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),z0.exports=d2(),z0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function f2(){if(qv)return Xc;qv=1;var n=u2(),e=eg(),t=h2();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var c=i,d=r;;){var y=c.return;if(y===null)break;var v=y.alternate;if(v===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===c)return p(y),i;if(v===d)return p(y),r;v=v.sibling}throw Error(s(188))}if(c.return!==d.return)c=y,d=v;else{for(var w=!1,j=y.child;j;){if(j===c){w=!0,c=y,d=v;break}if(j===d){w=!0,d=y,c=v;break}j=j.sibling}if(!w){for(j=v.child;j;){if(j===c){w=!0,c=v,d=y;break}if(j===d){w=!0,d=v,c=y;break}j=j.sibling}if(!w)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:r}function b(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=b(i),r!==null)return r;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),G=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function Ee(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case U:return"Profiler";case C:return"StrictMode";case X:return"Suspense";case J:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case R:return"Portal";case G:return i.displayName||"Context";case M:return(i._context.displayName||"Context")+".Consumer";case q:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Ee(i.type)||"Memo";case A:r=i._payload,i=i._init;try{return Ee(i(r))}catch{}}return null}var De=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Oe=[],te=-1;function F(i){return{current:i}}function Q(i){0>te||(i.current=Oe[te],Oe[te]=null,te--)}function fe(i,r){te++,Oe[te]=i.current,i.current=r}var ie=F(null),re=F(null),ue=F(null),Ae=F(null);function Fe(i,r){switch(fe(ue,r),fe(re,i),fe(ie,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?rv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=rv(r),i=ov(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(ie),fe(ie,i)}function We(){Q(ie),Q(re),Q(ue)}function At(i){i.memoizedState!==null&&fe(Ae,i);var r=ie.current,c=ov(r,i.type);r!==c&&(fe(re,i),fe(ie,c))}function jt(i){re.current===i&&(Q(ie),Q(re)),Ae.current===i&&(Q(Ae),$c._currentValue=_e)}var tt,mt;function de(i){if(tt===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);tt=r&&r[1]||"",mt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+i+mt}var Be=!1;function Xe(i,r){if(!i||Be)return"";Be=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ce){var ae=ce}Reflect.construct(i,[],xe)}else{try{xe.call()}catch(ce){ae=ce}i.call(xe.prototype)}}else{try{throw Error()}catch(ce){ae=ce}(xe=i())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ce){if(ce&&ae&&typeof ce.stack=="string")return[ce.stack,ae.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),w=v[0],j=v[1];if(w&&j){var H=w.split(`
`),se=j.split(`
`);for(y=d=0;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;for(;y<se.length&&!se[y].includes("DetermineComponentFrameRoot");)y++;if(d===H.length||y===se.length)for(d=H.length-1,y=se.length-1;1<=d&&0<=y&&H[d]!==se[y];)y--;for(;1<=d&&0<=y;d--,y--)if(H[d]!==se[y]){if(d!==1||y!==1)do if(d--,y--,0>y||H[d]!==se[y]){var he=`
`+H[d].replace(" at new "," at ");return i.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",i.displayName)),he}while(1<=d&&0<=y);break}}}finally{Be=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?de(c):""}function Qe(i,r){switch(i.tag){case 26:case 27:case 5:return de(i.type);case 16:return de("Lazy");case 13:return i.child!==r&&r!==null?de("Suspense Fallback"):de("Suspense");case 19:return de("SuspenseList");case 0:case 15:return Xe(i.type,!1);case 11:return Xe(i.type.render,!1);case 1:return Xe(i.type,!0);case 31:return de("Activity");default:return""}}function Vt(i){try{var r="",c=null;do r+=Qe(i,c),c=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ht=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,Lt=n.unstable_cancelCallback,ci=n.unstable_shouldYield,Pn=n.unstable_requestPaint,ve=n.unstable_now,Se=n.unstable_getCurrentPriorityLevel,Me=n.unstable_ImmediatePriority,Ye=n.unstable_UserBlockingPriority,kt=n.unstable_NormalPriority,Bt=n.unstable_LowPriority,Vn=n.unstable_IdlePriority,Gs=n.log,ui=n.unstable_setDisableYieldValue,Bn=null,en=null;function Cn(i){if(typeof Gs=="function"&&ui(i),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(Bn,i)}catch{}}var Gt=Math.clz32?Math.clz32:fs,Kt=Math.log,hs=Math.LN2;function fs(i){return i>>>=0,i===0?32:31-(Kt(i)/hs|0)|0}var tn=256,Gn=262144,on=4194304;function zs(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ms(i,r,c){var d=i.pendingLanes;if(d===0)return 0;var y=0,v=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var j=d&134217727;return j!==0?(d=j&~v,d!==0?y=zs(d):(w&=j,w!==0?y=zs(w):c||(c=j&~i,c!==0&&(y=zs(c))))):(j=d&~v,j!==0?y=zs(j):w!==0?y=zs(w):c||(c=d&~i,c!==0&&(y=zs(c)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,c=r&-r,v>=c||v===32&&(c&4194048)!==0)?r:y}function ps(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function it(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(){var i=on;return on<<=1,(on&62914560)===0&&(on=4194304),i}function zn(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function Ii(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function oc(i,r,c,d,y,v){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var j=i.entanglements,H=i.expirationTimes,se=i.hiddenUpdates;for(c=w&~c;0<c;){var he=31-Gt(c),xe=1<<he;j[he]=0,H[he]=-1;var ae=se[he];if(ae!==null)for(se[he]=null,he=0;he<ae.length;he++){var ce=ae[he];ce!==null&&(ce.lane&=-536870913)}c&=~xe}d!==0&&na(i,d,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(w&~r))}function na(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-Gt(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function Or(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var d=31-Gt(c),y=1<<d;y&r|i[d]&r&&(i[d]|=r),c&=~y}}function Va(i,r){var c=r&-r;return c=(c&42)!==0?1:sa(c),(c&(i.suspendedLanes|r))!==0?0:c}function sa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Oo(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:Iv(i.type))}function Ns(i,r){var c=le.p;try{return le.p=i,r()}finally{le.p=c}}var As=Math.random().toString(36).slice(2),ln="__reactFiber$"+As,vn="__reactProps$"+As,ks="__reactContainer$"+As,Ba="__reactEvents$"+As,lc="__reactListeners$"+As,Vo="__reactHandles$"+As,Bo="__reactResources$"+As,Cs="__reactMarker$"+As;function Is(i){delete i[ln],delete i[vn],delete i[Ba],delete i[lc],delete i[Vo]}function Rs(i){var r=i[ln];if(r)return r;for(var c=i.parentNode;c;){if(r=c[ks]||c[ln]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=mv(i);i!==null;){if(c=i[ln])return c;i=mv(i)}return r}i=c,c=i.parentNode}return null}function is(i){if(i=i[ln]||i[ks]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function as(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Fs(i){var r=i[Bo];return r||(r=i[Bo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function cn(i){i[Cs]=!0}var Vr=new Set,Br={};function Hs(i,r){qs(i,r),qs(i+"Capture",r)}function qs(i,r){for(Br[i]=r,i=0;i<r.length;i++)Vr.add(r[i])}var Gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zr={},Fr={};function Hr(i){return ht.call(Fr,i)?!0:ht.call(zr,i)?!1:Gr.test(i)?Fr[i]=!0:(zr[i]=!0,!1)}function $(i,r,c){if(Hr(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function ye(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function ge(i,r,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+d)}}function Pe(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ne(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function je(i,r,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,v=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(w){c=""+w,v.call(this,w)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ke(i){if(!i._valueTracker){var r=Ne(i)?"checked":"value";i._valueTracker=je(i,r,""+i[r])}}function Ue(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return i&&(d=Ne(i)?i.checked?"true":"false":i.value),i=d,i!==c?(r.setValue(i),!0):!1}function $e(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var nt=/[\n"\\]/g;function Ge(i){return i.replace(nt,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ft(i,r,c,d,y,v,w,j){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),r!=null?w==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Pe(r)):i.value!==""+Pe(r)&&(i.value=""+Pe(r)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),r!=null?$t(i,w,Pe(r)):c!=null?$t(i,w,Pe(c)):d!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.name=""+Pe(j):i.removeAttribute("name")}function Et(i,r,c,d,y,v,w,j){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){ke(i);return}c=c!=null?""+Pe(c):"",r=r!=null?""+Pe(r):c,j||r===i.value||(i.value=r),i.defaultValue=r}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=j?i.checked:!!d,i.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),ke(i)}function $t(i,r,c){r==="number"&&$e(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Qt(i,r,c,d){if(i=i.options,r){r={};for(var y=0;y<c.length;y++)r["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=r.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Pe(c),r=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function mn(i,r,c){if(r!=null&&(r=""+Pe(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+Pe(c):""}function In(i,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(s(92));if(De(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=Pe(r),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),ke(i)}function _n(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var Ga=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ri(i,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,c):typeof c!="number"||c===0||Ga.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function fi(i,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in r)d=r[y],r.hasOwnProperty(y)&&c[y]!==d&&Ri(i,y,d)}else for(var v in r)r.hasOwnProperty(v)&&Ri(i,v,r[v])}function Ks(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(i){return Mi.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function mi(){}var cc=null;function $s(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var za=null,Di=null;function Kr(i){var r=is(i);if(r&&(i=r.stateNode)){var c=i[vn]||null;e:switch(i=r.stateNode,r.type){case"input":if(ft(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ge(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==i&&d.form===i.form){var y=d[vn]||null;if(!y)throw Error(s(90));ft(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===i.form&&Ue(d)}break e;case"textarea":mn(i,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Qt(i,!!c.multiple,r,!1)}}}var zo=!1;function Fa(i,r,c){if(zo)return i(r,c);zo=!0;try{var d=i(r);return d}finally{if(zo=!1,(za!==null||Di!==null)&&(Cd(),za&&(r=za,i=Di,Di=za=null,Kr(r),i)))for(r=0;r<i.length;r++)Kr(i[r])}}function pi(i,r){var c=i.stateNode;if(c===null)return null;var d=c[vn]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(Ys)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){$r=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{$r=!1}var Pi=null,uc=null,Yr=null;function dc(){if(Yr)return Yr;var i,r=uc,c=r.length,d,y="value"in Pi?Pi.value:Pi.textContent,v=y.length;for(i=0;i<c&&r[i]===y[i];i++);var w=c-i;for(d=1;d<=w&&r[c-d]===y[v-d];d++);return Yr=y.slice(i,1<d?1-d:void 0)}function Jr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ia(){return!0}function gi(){return!1}function Fn(i){function r(c,d,y,v,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var j in i)i.hasOwnProperty(j)&&(c=i[j],this[j]=c?c(v):v[j]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ia:gi,this.isPropagationStopped=gi,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),r}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=Fn(aa),Ha=_({},aa,{view:0,detail:0}),hc=Fn(Ha),qa,Fo,Li,Ho=_({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Li&&(Li&&i.type==="mousemove"?(qa=i.screenX-Li.screenX,Fo=i.screenY-Li.screenY):Fo=qa=0,Li=i),qa)},movementY:function(i){return"movementY"in i?i.movementY:Fo}}),fc=Fn(Ho),Qr=_({},Ho,{dataTransfer:0}),Uu=Fn(Qr),Ou=_({},Ha,{relatedTarget:0}),Wr=Fn(Ou),mc=_({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=Fn(mc),qo=_({},aa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Bu=Fn(qo),Gu=_({},aa,{data:0}),Ui=Fn(Gu),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Hu[i])?!!r[i]:!1}function Ka(){return qu}var rs=_({},Ha,{key:function(i){if(i.key){var r=zu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Jr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Fu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(i){return i.type==="keypress"?Jr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Jr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ku=Fn(rs),$u=_({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ra=Fn($u),x=_({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),S=Fn(x),N=_({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),O=Fn(N),ee=_({},Ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),oe=Fn(ee),we=_({},aa,{newState:0,oldState:0}),ct=Fn(we),pn=[9,13,27,32],Mt=Ys&&"CompositionEvent"in window,nn=null;Ys&&"documentMode"in document&&(nn=document.documentMode);var Js=Ys&&"TextEvent"in window&&!nn,Oi=Ys&&(!Mt||nn&&8<nn&&11>=nn),xi=" ",yi=!1;function Xr(i,r){switch(i){case"keyup":return pn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ko(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $o=!1;function IA(i,r){switch(i){case"compositionend":return Ko(r);case"keypress":return r.which!==32?null:(yi=!0,xi);case"textInput":return i=r.data,i===xi&&yi?null:i;default:return null}}function RA(i,r){if($o)return i==="compositionend"||!Mt&&Xr(i,r)?(i=dc(),Yr=uc=Pi=null,$o=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Oi&&r.locale!=="ko"?null:r.data;default:return null}}var MA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xx(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!MA[i.type]:r==="textarea"}function yx(i,r,c,d){za?Di?Di.push(d):Di=[d]:za=d,r=Ld(r,"onChange"),0<r.length&&(c=new ji("onChange","change",null,c,d),i.push({event:c,listeners:r}))}var pc=null,gc=null;function DA(i){ev(i,0)}function Yu(i){var r=as(i);if(Ue(r))return i}function bx(i,r){if(i==="change")return r}var vx=!1;if(Ys){var Hf;if(Ys){var qf="oninput"in document;if(!qf){var _x=document.createElement("div");_x.setAttribute("oninput","return;"),qf=typeof _x.oninput=="function"}Hf=qf}else Hf=!1;vx=Hf&&(!document.documentMode||9<document.documentMode)}function Tx(){pc&&(pc.detachEvent("onpropertychange",Sx),gc=pc=null)}function Sx(i){if(i.propertyName==="value"&&Yu(gc)){var r=[];yx(r,gc,i,$s(i)),Fa(DA,r)}}function PA(i,r,c){i==="focusin"?(Tx(),pc=r,gc=c,pc.attachEvent("onpropertychange",Sx)):i==="focusout"&&Tx()}function jA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yu(gc)}function LA(i,r){if(i==="click")return Yu(r)}function UA(i,r){if(i==="input"||i==="change")return Yu(r)}function OA(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Ms=typeof Object.is=="function"?Object.is:OA;function xc(i,r){if(Ms(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!ht.call(r,y)||!Ms(i[y],r[y]))return!1}return!0}function Ex(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wx(i,r){var c=Ex(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=r&&d>=r)return{node:c,offset:r-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ex(c)}}function Nx(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Nx(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ax(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=$e(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=$e(i.document)}return r}function Kf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var VA=Ys&&"documentMode"in document&&11>=document.documentMode,Yo=null,$f=null,yc=null,Yf=!1;function kx(i,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yf||Yo==null||Yo!==$e(d)||(d=Yo,"selectionStart"in d&&Kf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),yc&&xc(yc,d)||(yc=d,d=Ld($f,"onSelect"),0<d.length&&(r=new ji("onSelect","select",null,r,c),i.push({event:r,listeners:d}),r.target=Yo)))}function Zr(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Jo={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},Jf={},Cx={};Ys&&(Cx=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function eo(i){if(Jf[i])return Jf[i];if(!Jo[i])return i;var r=Jo[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in Cx)return Jf[i]=r[c];return i}var Ix=eo("animationend"),Rx=eo("animationiteration"),Mx=eo("animationstart"),BA=eo("transitionrun"),GA=eo("transitionstart"),zA=eo("transitioncancel"),Dx=eo("transitionend"),Px=new Map,Qf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qf.push("scrollEnd");function bi(i,r){Px.set(i,r),Hs(r,[i])}var Ju=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Qs=[],Qo=0,Wf=0;function Qu(){for(var i=Qo,r=Wf=Qo=0;r<i;){var c=Qs[r];Qs[r++]=null;var d=Qs[r];Qs[r++]=null;var y=Qs[r];Qs[r++]=null;var v=Qs[r];if(Qs[r++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}v!==0&&jx(c,y,v)}}function Wu(i,r,c,d){Qs[Qo++]=i,Qs[Qo++]=r,Qs[Qo++]=c,Qs[Qo++]=d,Wf|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Xf(i,r,c,d){return Wu(i,r,c,d),Xu(i)}function to(i,r){return Wu(i,null,null,r),Xu(i)}function jx(i,r,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var y=!1,v=i.return;v!==null;)v.childLanes|=c,d=v.alternate,d!==null&&(d.childLanes|=c),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&r!==null&&(y=31-Gt(c),i=v.hiddenUpdates,d=i[y],d===null?i[y]=[r]:d.push(r),r.lane=c|536870912),v):null}function Xu(i){if(50<Bc)throw Bc=0,o0=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Wo={};function FA(i,r,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(i,r,c,d){return new FA(i,r,c,d)}function Zf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function oa(i,r){var c=i.alternate;return c===null?(c=Ds(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Lx(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Zu(i,r,c,d,y,v){var w=0;if(d=i,typeof i=="function")Zf(i)&&(w=1);else if(typeof i=="string")w=Yk(i,c,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=Ds(31,c,r,y),i.elementType=I,i.lanes=v,i;case k:return no(c.children,y,v,r);case C:w=8,y|=24;break;case U:return i=Ds(12,c,r,y|2),i.elementType=U,i.lanes=v,i;case X:return i=Ds(13,c,r,y),i.elementType=X,i.lanes=v,i;case J:return i=Ds(19,c,r,y),i.elementType=J,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:w=10;break e;case M:w=9;break e;case q:w=11;break e;case D:w=14;break e;case A:w=16,d=null;break e}w=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return r=Ds(w,c,r,y),r.elementType=i,r.type=d,r.lanes=v,r}function no(i,r,c,d){return i=Ds(7,i,d,r),i.lanes=c,i}function em(i,r,c){return i=Ds(6,i,null,r),i.lanes=c,i}function Ux(i){var r=Ds(18,null,null,0);return r.stateNode=i,r}function tm(i,r,c){return r=Ds(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Ox=new WeakMap;function Ws(i,r){if(typeof i=="object"&&i!==null){var c=Ox.get(i);return c!==void 0?c:(r={value:i,source:r,stack:Vt(r)},Ox.set(i,r),r)}return{value:i,source:r,stack:Vt(r)}}var Xo=[],Zo=0,ed=null,bc=0,Xs=[],Zs=0,$a=null,Vi=1,Bi="";function la(i,r){Xo[Zo++]=bc,Xo[Zo++]=ed,ed=i,bc=r}function Vx(i,r,c){Xs[Zs++]=Vi,Xs[Zs++]=Bi,Xs[Zs++]=$a,$a=i;var d=Vi;i=Bi;var y=32-Gt(d)-1;d&=~(1<<y),c+=1;var v=32-Gt(r)+y;if(30<v){var w=y-y%5;v=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Vi=1<<32-Gt(r)+y|c<<y|d,Bi=v+i}else Vi=1<<v|c<<y|d,Bi=i}function nm(i){i.return!==null&&(la(i,1),Vx(i,1,0))}function sm(i){for(;i===ed;)ed=Xo[--Zo],Xo[Zo]=null,bc=Xo[--Zo],Xo[Zo]=null;for(;i===$a;)$a=Xs[--Zs],Xs[Zs]=null,Bi=Xs[--Zs],Xs[Zs]=null,Vi=Xs[--Zs],Xs[Zs]=null}function Bx(i,r){Xs[Zs++]=Vi,Xs[Zs++]=Bi,Xs[Zs++]=$a,Vi=r.id,Bi=r.overflow,$a=i}var Hn=null,Wt=null,St=!1,Ya=null,ei=!1,im=Error(s(519));function Ja(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vc(Ws(r,i)),im}function Gx(i){var r=i.stateNode,c=i.type,d=i.memoizedProps;switch(r[ln]=i,r[vn]=d,c){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(c=0;c<zc.length;c++)xt(zc[c],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":xt("invalid",r),Et(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":xt("invalid",r);break;case"textarea":xt("invalid",r),In(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||iv(r.textContent,c)?(d.popover!=null&&(xt("beforetoggle",r),xt("toggle",r)),d.onScroll!=null&&xt("scroll",r),d.onScrollEnd!=null&&xt("scrollend",r),d.onClick!=null&&(r.onclick=mi),r=!0):r=!1,r||Ja(i,!0)}function zx(i){for(Hn=i.return;Hn;)switch(Hn.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Hn=Hn.return}}function el(i){if(i!==Hn)return!1;if(!St)return zx(i),St=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||T0(i.type,i.memoizedProps)),c=!c),c&&Wt&&Ja(i),zx(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Wt=fv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Wt=fv(i)}else r===27?(r=Wt,cr(i.type)?(i=A0,A0=null,Wt=i):Wt=r):Wt=Hn?ni(i.stateNode.nextSibling):null;return!0}function so(){Wt=Hn=null,St=!1}function am(){var i=Ya;return i!==null&&(bs===null?bs=i:bs.push.apply(bs,i),Ya=null),i}function vc(i){Ya===null?Ya=[i]:Ya.push(i)}var rm=F(null),io=null,ca=null;function Qa(i,r,c){fe(rm,r._currentValue),r._currentValue=c}function ua(i){i._currentValue=rm.current,Q(rm)}function om(i,r,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===c)break;i=i.return}}function lm(i,r,c,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var w=y.child;v=v.firstContext;e:for(;v!==null;){var j=v;v=y;for(var H=0;H<r.length;H++)if(j.context===r[H]){v.lanes|=c,j=v.alternate,j!==null&&(j.lanes|=c),om(v.return,c,i),d||(w=null);break e}v=j.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(s(341));w.lanes|=c,v=w.alternate,v!==null&&(v.lanes|=c),om(w,c,i),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===i){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function tl(i,r,c,d){i=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var j=y.type;Ms(y.pendingProps.value,w.value)||(i!==null?i.push(j):i=[j])}}else if(y===Ae.current){if(w=y.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push($c):i=[$c])}y=y.return}i!==null&&lm(r,i,c,d),r.flags|=262144}function td(i){for(i=i.firstContext;i!==null;){if(!Ms(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ao(i){io=i,ca=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function qn(i){return Fx(io,i)}function nd(i,r){return io===null&&ao(i),Fx(i,r)}function Fx(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},ca===null){if(i===null)throw Error(s(308));ca=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ca=ca.next=r;return c}var HA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},qA=n.unstable_scheduleCallback,KA=n.unstable_NormalPriority,Tn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cm(){return{controller:new HA,data:new Map,refCount:0}}function _c(i){i.refCount--,i.refCount===0&&qA(KA,function(){i.controller.abort()})}var Tc=null,um=0,nl=0,sl=null;function $A(i,r){if(Tc===null){var c=Tc=[];um=0,nl=f0(),sl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return um++,r.then(Hx,Hx),r}function Hx(){if(--um===0&&Tc!==null){sl!==null&&(sl.status="fulfilled");var i=Tc;Tc=null,nl=0,sl=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function YA(i,r){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var y=0;y<c.length;y++)(0,c[y])(r)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var qx=Y.S;Y.S=function(i,r){kb=ve(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&$A(i,r),qx!==null&&qx(i,r)};var ro=F(null);function dm(){var i=ro.current;return i!==null?i:Yt.pooledCache}function sd(i,r){r===null?fe(ro,ro.current):fe(ro,r.pool)}function Kx(){var i=dm();return i===null?null:{parent:Tn._currentValue,pool:i}}var il=Error(s(460)),hm=Error(s(474)),id=Error(s(542)),ad={then:function(){}};function $x(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Yx(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(mi,mi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Qx(i),i;default:if(typeof r.status=="string")r.then(mi,mi);else{if(i=Yt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=d}},function(d){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Qx(i),i}throw lo=r,il}}function oo(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(lo=c,il):c}}var lo=null;function Jx(){if(lo===null)throw Error(s(459));var i=lo;return lo=null,i}function Qx(i){if(i===il||i===id)throw Error(s(483))}var al=null,Sc=0;function rd(i){var r=Sc;return Sc+=1,al===null&&(al=[]),Yx(al,i,r)}function Ec(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function od(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Wx(i){function r(W,K){if(i){var ne=W.deletions;ne===null?(W.deletions=[K],W.flags|=16):ne.push(K)}}function c(W,K){if(!i)return null;for(;K!==null;)r(W,K),K=K.sibling;return null}function d(W){for(var K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function y(W,K){return W=oa(W,K),W.index=0,W.sibling=null,W}function v(W,K,ne){return W.index=ne,i?(ne=W.alternate,ne!==null?(ne=ne.index,ne<K?(W.flags|=67108866,K):ne):(W.flags|=67108866,K)):(W.flags|=1048576,K)}function w(W){return i&&W.alternate===null&&(W.flags|=67108866),W}function j(W,K,ne,me){return K===null||K.tag!==6?(K=em(ne,W.mode,me),K.return=W,K):(K=y(K,ne),K.return=W,K)}function H(W,K,ne,me){var He=ne.type;return He===k?he(W,K,ne.props.children,me,ne.key):K!==null&&(K.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===A&&oo(He)===K.type)?(K=y(K,ne.props),Ec(K,ne),K.return=W,K):(K=Zu(ne.type,ne.key,ne.props,null,W.mode,me),Ec(K,ne),K.return=W,K)}function se(W,K,ne,me){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=tm(ne,W.mode,me),K.return=W,K):(K=y(K,ne.children||[]),K.return=W,K)}function he(W,K,ne,me,He){return K===null||K.tag!==7?(K=no(ne,W.mode,me,He),K.return=W,K):(K=y(K,ne),K.return=W,K)}function xe(W,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=em(""+K,W.mode,ne),K.return=W,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return ne=Zu(K.type,K.key,K.props,null,W.mode,ne),Ec(ne,K),ne.return=W,ne;case R:return K=tm(K,W.mode,ne),K.return=W,K;case A:return K=oo(K),xe(W,K,ne)}if(De(K)||z(K))return K=no(K,W.mode,ne,null),K.return=W,K;if(typeof K.then=="function")return xe(W,rd(K),ne);if(K.$$typeof===G)return xe(W,nd(W,K),ne);od(W,K)}return null}function ae(W,K,ne,me){var He=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return He!==null?null:j(W,K,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case E:return ne.key===He?H(W,K,ne,me):null;case R:return ne.key===He?se(W,K,ne,me):null;case A:return ne=oo(ne),ae(W,K,ne,me)}if(De(ne)||z(ne))return He!==null?null:he(W,K,ne,me,null);if(typeof ne.then=="function")return ae(W,K,rd(ne),me);if(ne.$$typeof===G)return ae(W,K,nd(W,ne),me);od(W,ne)}return null}function ce(W,K,ne,me,He){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return W=W.get(ne)||null,j(K,W,""+me,He);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case E:return W=W.get(me.key===null?ne:me.key)||null,H(K,W,me,He);case R:return W=W.get(me.key===null?ne:me.key)||null,se(K,W,me,He);case A:return me=oo(me),ce(W,K,ne,me,He)}if(De(me)||z(me))return W=W.get(ne)||null,he(K,W,me,He,null);if(typeof me.then=="function")return ce(W,K,ne,rd(me),He);if(me.$$typeof===G)return ce(W,K,ne,nd(K,me),He);od(K,me)}return null}function Ve(W,K,ne,me){for(var He=null,Ct=null,ze=K,dt=K=0,bt=null;ze!==null&&dt<ne.length;dt++){ze.index>dt?(bt=ze,ze=null):bt=ze.sibling;var It=ae(W,ze,ne[dt],me);if(It===null){ze===null&&(ze=bt);break}i&&ze&&It.alternate===null&&r(W,ze),K=v(It,K,dt),Ct===null?He=It:Ct.sibling=It,Ct=It,ze=bt}if(dt===ne.length)return c(W,ze),St&&la(W,dt),He;if(ze===null){for(;dt<ne.length;dt++)ze=xe(W,ne[dt],me),ze!==null&&(K=v(ze,K,dt),Ct===null?He=ze:Ct.sibling=ze,Ct=ze);return St&&la(W,dt),He}for(ze=d(ze);dt<ne.length;dt++)bt=ce(ze,W,dt,ne[dt],me),bt!==null&&(i&&bt.alternate!==null&&ze.delete(bt.key===null?dt:bt.key),K=v(bt,K,dt),Ct===null?He=bt:Ct.sibling=bt,Ct=bt);return i&&ze.forEach(function(mr){return r(W,mr)}),St&&la(W,dt),He}function Je(W,K,ne,me){if(ne==null)throw Error(s(151));for(var He=null,Ct=null,ze=K,dt=K=0,bt=null,It=ne.next();ze!==null&&!It.done;dt++,It=ne.next()){ze.index>dt?(bt=ze,ze=null):bt=ze.sibling;var mr=ae(W,ze,It.value,me);if(mr===null){ze===null&&(ze=bt);break}i&&ze&&mr.alternate===null&&r(W,ze),K=v(mr,K,dt),Ct===null?He=mr:Ct.sibling=mr,Ct=mr,ze=bt}if(It.done)return c(W,ze),St&&la(W,dt),He;if(ze===null){for(;!It.done;dt++,It=ne.next())It=xe(W,It.value,me),It!==null&&(K=v(It,K,dt),Ct===null?He=It:Ct.sibling=It,Ct=It);return St&&la(W,dt),He}for(ze=d(ze);!It.done;dt++,It=ne.next())It=ce(ze,W,dt,It.value,me),It!==null&&(i&&It.alternate!==null&&ze.delete(It.key===null?dt:It.key),K=v(It,K,dt),Ct===null?He=It:Ct.sibling=It,Ct=It);return i&&ze.forEach(function(a2){return r(W,a2)}),St&&la(W,dt),He}function qt(W,K,ne,me){if(typeof ne=="object"&&ne!==null&&ne.type===k&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case E:e:{for(var He=ne.key;K!==null;){if(K.key===He){if(He=ne.type,He===k){if(K.tag===7){c(W,K.sibling),me=y(K,ne.props.children),me.return=W,W=me;break e}}else if(K.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===A&&oo(He)===K.type){c(W,K.sibling),me=y(K,ne.props),Ec(me,ne),me.return=W,W=me;break e}c(W,K);break}else r(W,K);K=K.sibling}ne.type===k?(me=no(ne.props.children,W.mode,me,ne.key),me.return=W,W=me):(me=Zu(ne.type,ne.key,ne.props,null,W.mode,me),Ec(me,ne),me.return=W,W=me)}return w(W);case R:e:{for(He=ne.key;K!==null;){if(K.key===He)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){c(W,K.sibling),me=y(K,ne.children||[]),me.return=W,W=me;break e}else{c(W,K);break}else r(W,K);K=K.sibling}me=tm(ne,W.mode,me),me.return=W,W=me}return w(W);case A:return ne=oo(ne),qt(W,K,ne,me)}if(De(ne))return Ve(W,K,ne,me);if(z(ne)){if(He=z(ne),typeof He!="function")throw Error(s(150));return ne=He.call(ne),Je(W,K,ne,me)}if(typeof ne.then=="function")return qt(W,K,rd(ne),me);if(ne.$$typeof===G)return qt(W,K,nd(W,ne),me);od(W,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(c(W,K.sibling),me=y(K,ne),me.return=W,W=me):(c(W,K),me=em(ne,W.mode,me),me.return=W,W=me),w(W)):c(W,K)}return function(W,K,ne,me){try{Sc=0;var He=qt(W,K,ne,me);return al=null,He}catch(ze){if(ze===il||ze===id)throw ze;var Ct=Ds(29,ze,null,W.mode);return Ct.lanes=me,Ct.return=W,Ct}finally{}}}var co=Wx(!0),Xx=Wx(!1),Wa=!1;function fm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Za(i,r,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Dt&2)!==0){var y=d.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),d.pending=r,r=Xu(i),jx(i,null,c),r}return Wu(i,d,r,c),Xu(i)}function wc(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,Or(i,c)}}function pm(i,r){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?y=v=w:v=v.next=w,c=c.next}while(c!==null);v===null?y=v=r:v=v.next=r}else y=v=r;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var gm=!1;function Nc(){if(gm){var i=sl;if(i!==null)throw i}}function Ac(i,r,c,d){gm=!1;var y=i.updateQueue;Wa=!1;var v=y.firstBaseUpdate,w=y.lastBaseUpdate,j=y.shared.pending;if(j!==null){y.shared.pending=null;var H=j,se=H.next;H.next=null,w===null?v=se:w.next=se,w=H;var he=i.alternate;he!==null&&(he=he.updateQueue,j=he.lastBaseUpdate,j!==w&&(j===null?he.firstBaseUpdate=se:j.next=se,he.lastBaseUpdate=H))}if(v!==null){var xe=y.baseState;w=0,he=se=H=null,j=v;do{var ae=j.lane&-536870913,ce=ae!==j.lane;if(ce?(yt&ae)===ae:(d&ae)===ae){ae!==0&&ae===nl&&(gm=!0),he!==null&&(he=he.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ve=i,Je=j;ae=r;var qt=c;switch(Je.tag){case 1:if(Ve=Je.payload,typeof Ve=="function"){xe=Ve.call(qt,xe,ae);break e}xe=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Je.payload,ae=typeof Ve=="function"?Ve.call(qt,xe,ae):Ve,ae==null)break e;xe=_({},xe,ae);break e;case 2:Wa=!0}}ae=j.callback,ae!==null&&(i.flags|=64,ce&&(i.flags|=8192),ce=y.callbacks,ce===null?y.callbacks=[ae]:ce.push(ae))}else ce={lane:ae,tag:j.tag,payload:j.payload,callback:j.callback,next:null},he===null?(se=he=ce,H=xe):he=he.next=ce,w|=ae;if(j=j.next,j===null){if(j=y.shared.pending,j===null)break;ce=j,j=ce.next,ce.next=null,y.lastBaseUpdate=ce,y.shared.pending=null}}while(!0);he===null&&(H=xe),y.baseState=H,y.firstBaseUpdate=se,y.lastBaseUpdate=he,v===null&&(y.shared.lanes=0),ir|=w,i.lanes=w,i.memoizedState=xe}}function Zx(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function ey(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Zx(c[i],r)}var rl=F(null),ld=F(0);function ty(i,r){i=ba,fe(ld,i),fe(rl,r),ba=i|r.baseLanes}function xm(){fe(ld,ba),fe(rl,rl.current)}function ym(){ba=ld.current,Q(rl),Q(ld)}var Ps=F(null),ti=null;function er(i){var r=i.alternate;fe(gn,gn.current&1),fe(Ps,i),ti===null&&(r===null||rl.current!==null||r.memoizedState!==null)&&(ti=i)}function bm(i){fe(gn,gn.current),fe(Ps,i),ti===null&&(ti=i)}function ny(i){i.tag===22?(fe(gn,gn.current),fe(Ps,i),ti===null&&(ti=i)):tr()}function tr(){fe(gn,gn.current),fe(Ps,Ps.current)}function js(i){Q(Ps),ti===i&&(ti=null),Q(gn)}var gn=F(0);function cd(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||w0(c)||N0(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var da=0,ut=null,Ft=null,Sn=null,ud=!1,ol=!1,uo=!1,dd=0,kc=0,ll=null,JA=0;function un(){throw Error(s(321))}function vm(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!Ms(i[c],r[c]))return!1;return!0}function _m(i,r,c,d,y,v){return da=v,ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=i===null||i.memoizedState===null?Vy:Lm,uo=!1,v=c(d,y),uo=!1,ol&&(v=iy(r,c,d,y)),sy(i),v}function sy(i){Y.H=Rc;var r=Ft!==null&&Ft.next!==null;if(da=0,Sn=Ft=ut=null,ud=!1,kc=0,ll=null,r)throw Error(s(300));i===null||En||(i=i.dependencies,i!==null&&td(i)&&(En=!0))}function iy(i,r,c,d){ut=i;var y=0;do{if(ol&&(ll=null),kc=0,ol=!1,25<=y)throw Error(s(301));if(y+=1,Sn=Ft=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=By,v=r(c,d)}while(ol);return v}function QA(){var i=Y.H,r=i.useState()[0];return r=typeof r.then=="function"?Cc(r):r,i=i.useState()[0],(Ft!==null?Ft.memoizedState:null)!==i&&(ut.flags|=1024),r}function Tm(){var i=dd!==0;return dd=0,i}function Sm(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function Em(i){if(ud){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ud=!1}da=0,Sn=Ft=ut=null,ol=!1,kc=dd=0,ll=null}function os(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?ut.memoizedState=Sn=i:Sn=Sn.next=i,Sn}function xn(){if(Ft===null){var i=ut.alternate;i=i!==null?i.memoizedState:null}else i=Ft.next;var r=Sn===null?ut.memoizedState:Sn.next;if(r!==null)Sn=r,Ft=i;else{if(i===null)throw ut.alternate===null?Error(s(467)):Error(s(310));Ft=i,i={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Sn===null?ut.memoizedState=Sn=i:Sn=Sn.next=i}return Sn}function hd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cc(i){var r=kc;return kc+=1,ll===null&&(ll=[]),i=Yx(ll,i,r),r=ut,(Sn===null?r.memoizedState:Sn.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?Vy:Lm),i}function fd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Cc(i);if(i.$$typeof===G)return qn(i)}throw Error(s(438,String(i)))}function wm(i){var r=null,c=ut.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=ut.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=hd(),ut.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),d=0;d<i;d++)c[d]=P;return r.index++,c}function ha(i,r){return typeof r=="function"?r(i):r}function md(i){var r=xn();return Nm(r,Ft,i)}function Nm(i,r,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var y=i.baseQueue,v=d.pending;if(v!==null){if(y!==null){var w=y.next;y.next=v.next,v.next=w}r.baseQueue=y=v,d.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{r=y.next;var j=w=null,H=null,se=r,he=!1;do{var xe=se.lane&-536870913;if(xe!==se.lane?(yt&xe)===xe:(da&xe)===xe){var ae=se.revertLane;if(ae===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),xe===nl&&(he=!0);else if((da&ae)===ae){se=se.next,ae===nl&&(he=!0);continue}else xe={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},H===null?(j=H=xe,w=v):H=H.next=xe,ut.lanes|=ae,ir|=ae;xe=se.action,uo&&c(v,xe),v=se.hasEagerState?se.eagerState:c(v,xe)}else ae={lane:xe,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},H===null?(j=H=ae,w=v):H=H.next=ae,ut.lanes|=xe,ir|=xe;se=se.next}while(se!==null&&se!==r);if(H===null?w=v:H.next=j,!Ms(v,i.memoizedState)&&(En=!0,he&&(c=sl,c!==null)))throw c;i.memoizedState=v,i.baseState=w,i.baseQueue=H,d.lastRenderedState=v}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Am(i){var r=xn(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,y=c.pending,v=r.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do v=i(v,w.action),w=w.next;while(w!==y);Ms(v,r.memoizedState)||(En=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),c.lastRenderedState=v}return[v,d]}function ay(i,r,c){var d=ut,y=xn(),v=St;if(v){if(c===void 0)throw Error(s(407));c=c()}else c=r();var w=!Ms((Ft||y).memoizedState,c);if(w&&(y.memoizedState=c,En=!0),y=y.queue,Im(ly.bind(null,d,y,i),[i]),y.getSnapshot!==r||w||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,cl(9,{destroy:void 0},oy.bind(null,d,y,c,r),null),Yt===null)throw Error(s(349));v||(da&127)!==0||ry(d,r,c)}return c}function ry(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=ut.updateQueue,r===null?(r=hd(),ut.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function oy(i,r,c,d){r.value=c,r.getSnapshot=d,cy(r)&&uy(i)}function ly(i,r,c){return c(function(){cy(r)&&uy(i)})}function cy(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!Ms(i,c)}catch{return!0}}function uy(i){var r=to(i,2);r!==null&&vs(r,i,2)}function km(i){var r=os();if(typeof i=="function"){var c=i;if(i=c(),uo){Cn(!0);try{c()}finally{Cn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:i},r}function dy(i,r,c,d){return i.baseState=c,Nm(i,Ft,typeof d=="function"?d:ha)}function WA(i,r,c,d,y){if(xd(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){v.listeners.push(w)}};Y.T!==null?c(!0):v.isTransition=!1,d(v),c=r.pending,c===null?(v.next=r.pending=v,hy(r,v)):(v.next=c.next,r.pending=c.next=v)}}function hy(i,r){var c=r.action,d=r.payload,y=i.state;if(r.isTransition){var v=Y.T,w={};Y.T=w;try{var j=c(y,d),H=Y.S;H!==null&&H(w,j),fy(i,r,j)}catch(se){Cm(i,r,se)}finally{v!==null&&w.types!==null&&(v.types=w.types),Y.T=v}}else try{v=c(y,d),fy(i,r,v)}catch(se){Cm(i,r,se)}}function fy(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){my(i,r,d)},function(d){return Cm(i,r,d)}):my(i,r,c)}function my(i,r,c){r.status="fulfilled",r.value=c,py(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,hy(i,c)))}function Cm(i,r,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,py(r),r=r.next;while(r!==d)}i.action=null}function py(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function gy(i,r){return r}function xy(i,r){if(St){var c=Yt.formState;if(c!==null){e:{var d=ut;if(St){if(Wt){t:{for(var y=Wt,v=ei;y.nodeType!==8;){if(!v){y=null;break t}if(y=ni(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Wt=ni(y.nextSibling),d=y.data==="F!";break e}}Ja(d)}d=!1}d&&(r=c[0])}}return c=os(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gy,lastRenderedState:r},c.queue=d,c=Ly.bind(null,ut,d),d.dispatch=c,d=km(!1),v=jm.bind(null,ut,!1,d.queue),d=os(),y={state:r,dispatch:null,action:i,pending:null},d.queue=y,c=WA.bind(null,ut,y,v,c),y.dispatch=c,d.memoizedState=i,[r,c,!1]}function yy(i){var r=xn();return by(r,Ft,i)}function by(i,r,c){if(r=Nm(i,r,gy)[0],i=md(ha)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Cc(r)}catch(w){throw w===il?id:w}else d=r;r=xn();var y=r.queue,v=y.dispatch;return c!==r.memoizedState&&(ut.flags|=2048,cl(9,{destroy:void 0},XA.bind(null,y,c),null)),[d,v,i]}function XA(i,r){i.action=r}function vy(i){var r=xn(),c=Ft;if(c!==null)return by(r,c,i);xn(),r=r.memoizedState,c=xn();var d=c.queue.dispatch;return c.memoizedState=i,[r,d,!1]}function cl(i,r,c,d){return i={tag:i,create:c,deps:d,inst:r,next:null},r=ut.updateQueue,r===null&&(r=hd(),ut.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,r.lastEffect=i),i}function _y(){return xn().memoizedState}function pd(i,r,c,d){var y=os();ut.flags|=i,y.memoizedState=cl(1|r,{destroy:void 0},c,d===void 0?null:d)}function gd(i,r,c,d){var y=xn();d=d===void 0?null:d;var v=y.memoizedState.inst;Ft!==null&&d!==null&&vm(d,Ft.memoizedState.deps)?y.memoizedState=cl(r,v,c,d):(ut.flags|=i,y.memoizedState=cl(1|r,v,c,d))}function Ty(i,r){pd(8390656,8,i,r)}function Im(i,r){gd(2048,8,i,r)}function ZA(i){ut.flags|=4;var r=ut.updateQueue;if(r===null)r=hd(),ut.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function Sy(i){var r=xn().memoizedState;return ZA({ref:r,nextImpl:i}),function(){if((Dt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ey(i,r){return gd(4,2,i,r)}function wy(i,r){return gd(4,4,i,r)}function Ny(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Ay(i,r,c){c=c!=null?c.concat([i]):null,gd(4,4,Ny.bind(null,r,i),c)}function Rm(){}function ky(i,r){var c=xn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&vm(r,d[1])?d[0]:(c.memoizedState=[i,r],i)}function Cy(i,r){var c=xn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&vm(r,d[1]))return d[0];if(d=i(),uo){Cn(!0);try{i()}finally{Cn(!1)}}return c.memoizedState=[d,r],d}function Mm(i,r,c){return c===void 0||(da&1073741824)!==0&&(yt&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=Ib(),ut.lanes|=i,ir|=i,c)}function Iy(i,r,c,d){return Ms(c,r)?c:rl.current!==null?(i=Mm(i,c,d),Ms(i,r)||(En=!0),i):(da&42)===0||(da&1073741824)!==0&&(yt&261930)===0?(En=!0,i.memoizedState=c):(i=Ib(),ut.lanes|=i,ir|=i,r)}function Ry(i,r,c,d,y){var v=le.p;le.p=v!==0&&8>v?v:8;var w=Y.T,j={};Y.T=j,jm(i,!1,r,c);try{var H=y(),se=Y.S;if(se!==null&&se(j,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var he=YA(H,d);Ic(i,r,he,Os(i))}else Ic(i,r,d,Os(i))}catch(xe){Ic(i,r,{then:function(){},status:"rejected",reason:xe},Os())}finally{le.p=v,w!==null&&j.types!==null&&(w.types=j.types),Y.T=w}}function ek(){}function Dm(i,r,c,d){if(i.tag!==5)throw Error(s(476));var y=My(i).queue;Ry(i,y,r,_e,c===null?ek:function(){return Dy(i),c(d)})}function My(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:_e},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Dy(i){var r=My(i);r.next===null&&(r=i.alternate.memoizedState),Ic(i,r.next.queue,{},Os())}function Pm(){return qn($c)}function Py(){return xn().memoizedState}function jy(){return xn().memoizedState}function tk(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Os();i=Xa(c);var d=Za(r,i,c);d!==null&&(vs(d,r,c),wc(d,r,c)),r={cache:cm()},i.payload=r;return}r=r.return}}function nk(i,r,c){var d=Os();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},xd(i)?Uy(r,c):(c=Xf(i,r,c,d),c!==null&&(vs(c,i,d),Oy(c,r,d)))}function Ly(i,r,c){var d=Os();Ic(i,r,c,d)}function Ic(i,r,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(xd(i))Uy(r,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var w=r.lastRenderedState,j=v(w,c);if(y.hasEagerState=!0,y.eagerState=j,Ms(j,w))return Wu(i,r,y,0),Yt===null&&Qu(),!1}catch{}finally{}if(c=Xf(i,r,y,d),c!==null)return vs(c,i,d),Oy(c,r,d),!0}return!1}function jm(i,r,c,d){if(d={lane:2,revertLane:f0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},xd(i)){if(r)throw Error(s(479))}else r=Xf(i,c,d,2),r!==null&&vs(r,i,2)}function xd(i){var r=i.alternate;return i===ut||r!==null&&r===ut}function Uy(i,r){ol=ud=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function Oy(i,r,c){if((c&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,Or(i,c)}}var Rc={readContext:qn,use:fd,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};Rc.useEffectEvent=un;var Vy={readContext:qn,use:fd,useCallback:function(i,r){return os().memoizedState=[i,r===void 0?null:r],i},useContext:qn,useEffect:Ty,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,pd(4194308,4,Ny.bind(null,r,i),c)},useLayoutEffect:function(i,r){return pd(4194308,4,i,r)},useInsertionEffect:function(i,r){pd(4,2,i,r)},useMemo:function(i,r){var c=os();r=r===void 0?null:r;var d=i();if(uo){Cn(!0);try{i()}finally{Cn(!1)}}return c.memoizedState=[d,r],d},useReducer:function(i,r,c){var d=os();if(c!==void 0){var y=c(r);if(uo){Cn(!0);try{c(r)}finally{Cn(!1)}}}else y=r;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=nk.bind(null,ut,i),[d.memoizedState,i]},useRef:function(i){var r=os();return i={current:i},r.memoizedState=i},useState:function(i){i=km(i);var r=i.queue,c=Ly.bind(null,ut,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:Rm,useDeferredValue:function(i,r){var c=os();return Mm(c,i,r)},useTransition:function(){var i=km(!1);return i=Ry.bind(null,ut,i.queue,!0,!1),os().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var d=ut,y=os();if(St){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),Yt===null)throw Error(s(349));(yt&127)!==0||ry(d,r,c)}y.memoizedState=c;var v={value:c,getSnapshot:r};return y.queue=v,Ty(ly.bind(null,d,v,i),[i]),d.flags|=2048,cl(9,{destroy:void 0},oy.bind(null,d,v,c,r),null),c},useId:function(){var i=os(),r=Yt.identifierPrefix;if(St){var c=Bi,d=Vi;c=(d&~(1<<32-Gt(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=dd++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=JA++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Pm,useFormState:xy,useActionState:xy,useOptimistic:function(i){var r=os();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=jm.bind(null,ut,!0,c),c.dispatch=r,[i,r]},useMemoCache:wm,useCacheRefresh:function(){return os().memoizedState=tk.bind(null,ut)},useEffectEvent:function(i){var r=os(),c={impl:i};return r.memoizedState=c,function(){if((Dt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},Lm={readContext:qn,use:fd,useCallback:ky,useContext:qn,useEffect:Im,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Cy,useReducer:md,useRef:_y,useState:function(){return md(ha)},useDebugValue:Rm,useDeferredValue:function(i,r){var c=xn();return Iy(c,Ft.memoizedState,i,r)},useTransition:function(){var i=md(ha)[0],r=xn().memoizedState;return[typeof i=="boolean"?i:Cc(i),r]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:Pm,useFormState:yy,useActionState:yy,useOptimistic:function(i,r){var c=xn();return dy(c,Ft,i,r)},useMemoCache:wm,useCacheRefresh:jy};Lm.useEffectEvent=Sy;var By={readContext:qn,use:fd,useCallback:ky,useContext:qn,useEffect:Im,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Cy,useReducer:Am,useRef:_y,useState:function(){return Am(ha)},useDebugValue:Rm,useDeferredValue:function(i,r){var c=xn();return Ft===null?Mm(c,i,r):Iy(c,Ft.memoizedState,i,r)},useTransition:function(){var i=Am(ha)[0],r=xn().memoizedState;return[typeof i=="boolean"?i:Cc(i),r]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:Pm,useFormState:vy,useActionState:vy,useOptimistic:function(i,r){var c=xn();return Ft!==null?dy(c,Ft,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:wm,useCacheRefresh:jy};By.useEffectEvent=Sy;function Um(i,r,c,d){r=i.memoizedState,c=c(d,r),c=c==null?r:_({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Om={enqueueSetState:function(i,r,c){i=i._reactInternals;var d=Os(),y=Xa(d);y.payload=r,c!=null&&(y.callback=c),r=Za(i,y,d),r!==null&&(vs(r,i,d),wc(r,i,d))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var d=Os(),y=Xa(d);y.tag=1,y.payload=r,c!=null&&(y.callback=c),r=Za(i,y,d),r!==null&&(vs(r,i,d),wc(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Os(),d=Xa(c);d.tag=2,r!=null&&(d.callback=r),r=Za(i,d,c),r!==null&&(vs(r,i,c),wc(r,i,c))}};function Gy(i,r,c,d,y,v,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,w):r.prototype&&r.prototype.isPureReactComponent?!xc(c,d)||!xc(y,v):!0}function zy(i,r,c,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==i&&Om.enqueueReplaceState(r,r.state,null)}function ho(i,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(i=i.defaultProps){c===r&&(c=_({},c));for(var y in i)c[y]===void 0&&(c[y]=i[y])}return c}function Fy(i){Ju(i)}function Hy(i){console.error(i)}function qy(i){Ju(i)}function yd(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Ky(i,r,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Vm(i,r,c){return c=Xa(c),c.tag=3,c.payload={element:null},c.callback=function(){yd(i,r)},c}function $y(i){return i=Xa(i),i.tag=3,i}function Yy(i,r,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var v=d.value;i.payload=function(){return y(v)},i.callback=function(){Ky(r,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){Ky(r,c,d),typeof y!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var j=d.stack;this.componentDidCatch(d.value,{componentStack:j!==null?j:""})})}function sk(i,r,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&tl(r,c,y,!0),c=Ps.current,c!==null){switch(c.tag){case 31:case 13:return ti===null?Id():c.alternate===null&&dn===0&&(dn=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===ad?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),u0(i,d,y)),!1;case 22:return c.flags|=65536,d===ad?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),u0(i,d,y)),!1}throw Error(s(435,c.tag))}return u0(i,d,y),Id(),!1}if(St)return r=Ps.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,d!==im&&(i=Error(s(422),{cause:d}),vc(Ws(i,c)))):(d!==im&&(r=Error(s(423),{cause:d}),vc(Ws(r,c))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=Ws(d,c),y=Vm(i.stateNode,d,y),pm(i,y),dn!==4&&(dn=2)),!1;var v=Error(s(520),{cause:d});if(v=Ws(v,c),Vc===null?Vc=[v]:Vc.push(v),dn!==4&&(dn=2),r===null)return!0;d=Ws(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=y&-y,c.lanes|=i,i=Vm(c.stateNode,d,i),pm(c,i),!1;case 1:if(r=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ar===null||!ar.has(v))))return c.flags|=65536,y&=-y,c.lanes|=y,y=$y(y),Yy(y,i,c,d),pm(c,y),!1}c=c.return}while(c!==null);return!1}var Bm=Error(s(461)),En=!1;function Kn(i,r,c,d){r.child=i===null?Xx(r,null,c,d):co(r,i.child,c,d)}function Jy(i,r,c,d,y){c=c.render;var v=r.ref;if("ref"in d){var w={};for(var j in d)j!=="ref"&&(w[j]=d[j])}else w=d;return ao(r),d=_m(i,r,c,w,v,y),j=Tm(),i!==null&&!En?(Sm(i,r,y),fa(i,r,y)):(St&&j&&nm(r),r.flags|=1,Kn(i,r,d,y),r.child)}function Qy(i,r,c,d,y){if(i===null){var v=c.type;return typeof v=="function"&&!Zf(v)&&v.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=v,Wy(i,r,v,d,y)):(i=Zu(c.type,null,d,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!Ym(i,y)){var w=v.memoizedProps;if(c=c.compare,c=c!==null?c:xc,c(w,d)&&i.ref===r.ref)return fa(i,r,y)}return r.flags|=1,i=oa(v,d),i.ref=r.ref,i.return=r,r.child=i}function Wy(i,r,c,d,y){if(i!==null){var v=i.memoizedProps;if(xc(v,d)&&i.ref===r.ref)if(En=!1,r.pendingProps=d=v,Ym(i,y))(i.flags&131072)!==0&&(En=!0);else return r.lanes=i.lanes,fa(i,r,y)}return Gm(i,r,c,d,y)}function Xy(i,r,c,d){var y=d.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|c:c,i!==null){for(d=r.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~v}else d=0,r.child=null;return Zy(i,r,v,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&sd(r,v!==null?v.cachePool:null),v!==null?ty(r,v):xm(),ny(r);else return d=r.lanes=536870912,Zy(i,r,v!==null?v.baseLanes|c:c,c,d)}else v!==null?(sd(r,v.cachePool),ty(r,v),tr(),r.memoizedState=null):(i!==null&&sd(r,null),xm(),tr());return Kn(i,r,y,c),r.child}function Mc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Zy(i,r,c,d,y){var v=dm();return v=v===null?null:{parent:Tn._currentValue,pool:v},r.memoizedState={baseLanes:c,cachePool:v},i!==null&&sd(r,null),xm(),ny(r),i!==null&&tl(i,r,d,!0),r.childLanes=y,null}function bd(i,r){return r=_d({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function eb(i,r,c){return co(r,i.child,null,c),i=bd(r,r.pendingProps),i.flags|=2,js(r),r.memoizedState=null,i}function ik(i,r,c){var d=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(St){if(d.mode==="hidden")return i=bd(r,d),r.lanes=536870912,Mc(null,i);if(bm(r),(i=Wt)?(i=hv(i,ei),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:$a!==null?{id:Vi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},c=Ux(i),c.return=r,r.child=c,Hn=r,Wt=null)):i=null,i===null)throw Ja(r);return r.lanes=536870912,null}return bd(r,d)}var v=i.memoizedState;if(v!==null){var w=v.dehydrated;if(bm(r),y)if(r.flags&256)r.flags&=-257,r=eb(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(En||tl(i,r,c,!1),y=(c&i.childLanes)!==0,En||y){if(d=Yt,d!==null&&(w=Va(d,c),w!==0&&w!==v.retryLane))throw v.retryLane=w,to(i,w),vs(d,i,w),Bm;Id(),r=eb(i,r,c)}else i=v.treeContext,Wt=ni(w.nextSibling),Hn=r,St=!0,Ya=null,ei=!1,i!==null&&Bx(r,i),r=bd(r,d),r.flags|=4096;return r}return i=oa(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function vd(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function Gm(i,r,c,d,y){return ao(r),c=_m(i,r,c,d,void 0,y),d=Tm(),i!==null&&!En?(Sm(i,r,y),fa(i,r,y)):(St&&d&&nm(r),r.flags|=1,Kn(i,r,c,y),r.child)}function tb(i,r,c,d,y,v){return ao(r),r.updateQueue=null,c=iy(r,d,c,y),sy(i),d=Tm(),i!==null&&!En?(Sm(i,r,v),fa(i,r,v)):(St&&d&&nm(r),r.flags|=1,Kn(i,r,c,v),r.child)}function nb(i,r,c,d,y){if(ao(r),r.stateNode===null){var v=Wo,w=c.contextType;typeof w=="object"&&w!==null&&(v=qn(w)),v=new c(d,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Om,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=d,v.state=r.memoizedState,v.refs={},fm(r),w=c.contextType,v.context=typeof w=="object"&&w!==null?qn(w):Wo,v.state=r.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Um(r,c,w,d),v.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(w=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),w!==v.state&&Om.enqueueReplaceState(v,v.state,null),Ac(r,d,v,y),Nc(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){v=r.stateNode;var j=r.memoizedProps,H=ho(c,j);v.props=H;var se=v.context,he=c.contextType;w=Wo,typeof he=="object"&&he!==null&&(w=qn(he));var xe=c.getDerivedStateFromProps;he=typeof xe=="function"||typeof v.getSnapshotBeforeUpdate=="function",j=r.pendingProps!==j,he||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(j||se!==w)&&zy(r,v,d,w),Wa=!1;var ae=r.memoizedState;v.state=ae,Ac(r,d,v,y),Nc(),se=r.memoizedState,j||ae!==se||Wa?(typeof xe=="function"&&(Um(r,c,xe,d),se=r.memoizedState),(H=Wa||Gy(r,c,H,d,ae,se,w))?(he||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=se),v.props=d,v.state=se,v.context=w,d=H):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{v=r.stateNode,mm(i,r),w=r.memoizedProps,he=ho(c,w),v.props=he,xe=r.pendingProps,ae=v.context,se=c.contextType,H=Wo,typeof se=="object"&&se!==null&&(H=qn(se)),j=c.getDerivedStateFromProps,(se=typeof j=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==xe||ae!==H)&&zy(r,v,d,H),Wa=!1,ae=r.memoizedState,v.state=ae,Ac(r,d,v,y),Nc();var ce=r.memoizedState;w!==xe||ae!==ce||Wa||i!==null&&i.dependencies!==null&&td(i.dependencies)?(typeof j=="function"&&(Um(r,c,j,d),ce=r.memoizedState),(he=Wa||Gy(r,c,he,d,ae,ce,H)||i!==null&&i.dependencies!==null&&td(i.dependencies))?(se||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ce,H),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ce,H)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ce),v.props=d,v.state=ce,v.context=H,d=he):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=1024),d=!1)}return v=d,vd(i,r),d=(r.flags&128)!==0,v||d?(v=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&d?(r.child=co(r,i.child,null,y),r.child=co(r,null,c,y)):Kn(i,r,c,y),r.memoizedState=v.state,i=r.child):i=fa(i,r,y),i}function sb(i,r,c,d){return so(),r.flags|=256,Kn(i,r,c,d),r.child}var zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fm(i){return{baseLanes:i,cachePool:Kx()}}function Hm(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=Us),i}function ib(i,r,c){var d=r.pendingProps,y=!1,v=(r.flags&128)!==0,w;if((w=v)||(w=i!==null&&i.memoizedState===null?!1:(gn.current&2)!==0),w&&(y=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,i===null){if(St){if(y?er(r):tr(),(i=Wt)?(i=hv(i,ei),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:$a!==null?{id:Vi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},c=Ux(i),c.return=r,r.child=c,Hn=r,Wt=null)):i=null,i===null)throw Ja(r);return N0(i)?r.lanes=32:r.lanes=536870912,null}var j=d.children;return d=d.fallback,y?(tr(),y=r.mode,j=_d({mode:"hidden",children:j},y),d=no(d,y,c,null),j.return=r,d.return=r,j.sibling=d,r.child=j,d=r.child,d.memoizedState=Fm(c),d.childLanes=Hm(i,w,c),r.memoizedState=zm,Mc(null,d)):(er(r),qm(r,j))}var H=i.memoizedState;if(H!==null&&(j=H.dehydrated,j!==null)){if(v)r.flags&256?(er(r),r.flags&=-257,r=Km(i,r,c)):r.memoizedState!==null?(tr(),r.child=i.child,r.flags|=128,r=null):(tr(),j=d.fallback,y=r.mode,d=_d({mode:"visible",children:d.children},y),j=no(j,y,c,null),j.flags|=2,d.return=r,j.return=r,d.sibling=j,r.child=d,co(r,i.child,null,c),d=r.child,d.memoizedState=Fm(c),d.childLanes=Hm(i,w,c),r.memoizedState=zm,r=Mc(null,d));else if(er(r),N0(j)){if(w=j.nextSibling&&j.nextSibling.dataset,w)var se=w.dgst;w=se,d=Error(s(419)),d.stack="",d.digest=w,vc({value:d,source:null,stack:null}),r=Km(i,r,c)}else if(En||tl(i,r,c,!1),w=(c&i.childLanes)!==0,En||w){if(w=Yt,w!==null&&(d=Va(w,c),d!==0&&d!==H.retryLane))throw H.retryLane=d,to(i,d),vs(w,i,d),Bm;w0(j)||Id(),r=Km(i,r,c)}else w0(j)?(r.flags|=192,r.child=i.child,r=null):(i=H.treeContext,Wt=ni(j.nextSibling),Hn=r,St=!0,Ya=null,ei=!1,i!==null&&Bx(r,i),r=qm(r,d.children),r.flags|=4096);return r}return y?(tr(),j=d.fallback,y=r.mode,H=i.child,se=H.sibling,d=oa(H,{mode:"hidden",children:d.children}),d.subtreeFlags=H.subtreeFlags&65011712,se!==null?j=oa(se,j):(j=no(j,y,c,null),j.flags|=2),j.return=r,d.return=r,d.sibling=j,r.child=d,Mc(null,d),d=r.child,j=i.child.memoizedState,j===null?j=Fm(c):(y=j.cachePool,y!==null?(H=Tn._currentValue,y=y.parent!==H?{parent:H,pool:H}:y):y=Kx(),j={baseLanes:j.baseLanes|c,cachePool:y}),d.memoizedState=j,d.childLanes=Hm(i,w,c),r.memoizedState=zm,Mc(i.child,d)):(er(r),c=i.child,i=c.sibling,c=oa(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,i!==null&&(w=r.deletions,w===null?(r.deletions=[i],r.flags|=16):w.push(i)),r.child=c,r.memoizedState=null,c)}function qm(i,r){return r=_d({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function _d(i,r){return i=Ds(22,i,null,r),i.lanes=0,i}function Km(i,r,c){return co(r,i.child,null,c),i=qm(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function ab(i,r,c){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),om(i.return,r,c)}function $m(i,r,c,d,y,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:v}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=y,w.treeForkCount=v)}function rb(i,r,c){var d=r.pendingProps,y=d.revealOrder,v=d.tail;d=d.children;var w=gn.current,j=(w&2)!==0;if(j?(w=w&1|2,r.flags|=128):w&=1,fe(gn,w),Kn(i,r,d,c),d=St?bc:0,!j&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ab(i,c,r);else if(i.tag===19)ab(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(c=r.child,y=null;c!==null;)i=c.alternate,i!==null&&cd(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=r.child,r.child=null):(y=c.sibling,c.sibling=null),$m(r,!1,y,c,v,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&cd(i)===null){r.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}$m(r,!0,c,null,v,d);break;case"together":$m(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function fa(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),ir|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(tl(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,c=oa(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=oa(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function Ym(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&td(i)))}function ak(i,r,c){switch(r.tag){case 3:Fe(r,r.stateNode.containerInfo),Qa(r,Tn,i.memoizedState.cache),so();break;case 27:case 5:At(r);break;case 4:Fe(r,r.stateNode.containerInfo);break;case 10:Qa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,bm(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(er(r),r.flags|=128,null):(c&r.child.childLanes)!==0?ib(i,r,c):(er(r),i=fa(i,r,c),i!==null?i.sibling:null);er(r);break;case 19:var y=(i.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(tl(i,r,c,!1),d=(c&r.childLanes)!==0),y){if(d)return rb(i,r,c);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(gn,gn.current),d)break;return null;case 22:return r.lanes=0,Xy(i,r,c,r.pendingProps);case 24:Qa(r,Tn,i.memoizedState.cache)}return fa(i,r,c)}function ob(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)En=!0;else{if(!Ym(i,c)&&(r.flags&128)===0)return En=!1,ak(i,r,c);En=(i.flags&131072)!==0}else En=!1,St&&(r.flags&1048576)!==0&&Vx(r,bc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=oo(r.elementType),r.type=i,typeof i=="function")Zf(i)?(d=ho(i,d),r.tag=1,r=nb(null,r,i,d,c)):(r.tag=0,r=Gm(null,r,i,d,c));else{if(i!=null){var y=i.$$typeof;if(y===q){r.tag=11,r=Jy(null,r,i,d,c);break e}else if(y===D){r.tag=14,r=Qy(null,r,i,d,c);break e}}throw r=Ee(i)||i,Error(s(306,r,""))}}return r;case 0:return Gm(i,r,r.type,r.pendingProps,c);case 1:return d=r.type,y=ho(d,r.pendingProps),nb(i,r,d,y,c);case 3:e:{if(Fe(r,r.stateNode.containerInfo),i===null)throw Error(s(387));d=r.pendingProps;var v=r.memoizedState;y=v.element,mm(i,r),Ac(r,d,null,c);var w=r.memoizedState;if(d=w.cache,Qa(r,Tn,d),d!==v.cache&&lm(r,[Tn],c,!0),Nc(),d=w.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=sb(i,r,d,c);break e}else if(d!==y){y=Ws(Error(s(424)),r),vc(y),r=sb(i,r,d,c);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Wt=ni(i.firstChild),Hn=r,St=!0,Ya=null,ei=!0,c=Xx(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(so(),d===y){r=fa(i,r,c);break e}Kn(i,r,d,c)}r=r.child}return r;case 26:return vd(i,r),i===null?(c=yv(r.type,null,r.pendingProps,null))?r.memoizedState=c:St||(c=r.type,i=r.pendingProps,d=Ud(ue.current).createElement(c),d[ln]=r,d[vn]=i,$n(d,c,i),cn(d),r.stateNode=d):r.memoizedState=yv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return At(r),i===null&&St&&(d=r.stateNode=pv(r.type,r.pendingProps,ue.current),Hn=r,ei=!0,y=Wt,cr(r.type)?(A0=y,Wt=ni(d.firstChild)):Wt=y),Kn(i,r,r.pendingProps.children,c),vd(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&St&&((y=d=Wt)&&(d=jk(d,r.type,r.pendingProps,ei),d!==null?(r.stateNode=d,Hn=r,Wt=ni(d.firstChild),ei=!1,y=!0):y=!1),y||Ja(r)),At(r),y=r.type,v=r.pendingProps,w=i!==null?i.memoizedProps:null,d=v.children,T0(y,v)?d=null:w!==null&&T0(y,w)&&(r.flags|=32),r.memoizedState!==null&&(y=_m(i,r,QA,null,null,c),$c._currentValue=y),vd(i,r),Kn(i,r,d,c),r.child;case 6:return i===null&&St&&((i=c=Wt)&&(c=Lk(c,r.pendingProps,ei),c!==null?(r.stateNode=c,Hn=r,Wt=null,i=!0):i=!1),i||Ja(r)),null;case 13:return ib(i,r,c);case 4:return Fe(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=co(r,null,d,c):Kn(i,r,d,c),r.child;case 11:return Jy(i,r,r.type,r.pendingProps,c);case 7:return Kn(i,r,r.pendingProps,c),r.child;case 8:return Kn(i,r,r.pendingProps.children,c),r.child;case 12:return Kn(i,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,Qa(r,r.type,d.value),Kn(i,r,d.children,c),r.child;case 9:return y=r.type._context,d=r.pendingProps.children,ao(r),y=qn(y),d=d(y),r.flags|=1,Kn(i,r,d,c),r.child;case 14:return Qy(i,r,r.type,r.pendingProps,c);case 15:return Wy(i,r,r.type,r.pendingProps,c);case 19:return rb(i,r,c);case 31:return ik(i,r,c);case 22:return Xy(i,r,c,r.pendingProps);case 24:return ao(r),d=qn(Tn),i===null?(y=dm(),y===null&&(y=Yt,v=cm(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=c),y=v),r.memoizedState={parent:d,cache:y},fm(r),Qa(r,Tn,y)):((i.lanes&c)!==0&&(mm(i,r),Ac(r,null,null,c),Nc()),y=i.memoizedState,v=r.memoizedState,y.parent!==d?(y={parent:d,cache:d},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Qa(r,Tn,d)):(d=v.cache,Qa(r,Tn,d),d!==y.cache&&lm(r,[Tn],c,!0))),Kn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ma(i){i.flags|=4}function Jm(i,r,c,d,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Pb())i.flags|=8192;else throw lo=ad,hm}else i.flags&=-16777217}function lb(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Sv(r))if(Pb())i.flags|=8192;else throw lo=ad,hm}function Td(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?di():536870912,i.lanes|=r,fl|=r)}function Dc(i,r){if(!St)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Xt(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(r)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=c,r}function rk(i,r,c){var d=r.pendingProps;switch(sm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(r),null;case 1:return Xt(r),null;case 3:return c=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),ua(Tn),We(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(el(r)?ma(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,am())),Xt(r),null;case 26:var y=r.type,v=r.memoizedState;return i===null?(ma(r),v!==null?(Xt(r),lb(r,v)):(Xt(r),Jm(r,y,null,d,c))):v?v!==i.memoizedState?(ma(r),Xt(r),lb(r,v)):(Xt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&ma(r),Xt(r),Jm(r,y,i,d,c)),null;case 27:if(jt(r),c=ue.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&ma(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Xt(r),null}i=ie.current,el(r)?Gx(r):(i=pv(y,d,c),r.stateNode=i,ma(r))}return Xt(r),null;case 5:if(jt(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&ma(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Xt(r),null}if(v=ie.current,el(r))Gx(r);else{var w=Ud(ue.current);switch(v){case 1:v=w.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=w.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=w.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?w.createElement(y,{is:d.is}):w.createElement(y)}}v[ln]=r,v[vn]=d;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)v.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=v;e:switch($n(v,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ma(r)}}return Xt(r),Jm(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&ma(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(i=ue.current,el(r)){if(i=r.stateNode,c=r.memoizedProps,d=null,y=Hn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[ln]=r,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||iv(i.nodeValue,c)),i||Ja(r,!0)}else i=Ud(i).createTextNode(d),i[ln]=r,r.stateNode=i}return Xt(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(d=el(r),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[ln]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Xt(r),i=!1}else c=am(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(js(r),r):(js(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Xt(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=el(r),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[ln]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Xt(r),y=!1}else y=am(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(js(r),r):(js(r),null)}return js(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=r.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==y&&(d.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),Td(r,r.updateQueue),Xt(r),null);case 4:return We(),i===null&&x0(r.stateNode.containerInfo),Xt(r),null;case 10:return ua(r.type),Xt(r),null;case 19:if(Q(gn),d=r.memoizedState,d===null)return Xt(r),null;if(y=(r.flags&128)!==0,v=d.rendering,v===null)if(y)Dc(d,!1);else{if(dn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=cd(i),v!==null){for(r.flags|=128,Dc(d,!1),i=v.updateQueue,r.updateQueue=i,Td(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)Lx(c,i),c=c.sibling;return fe(gn,gn.current&1|2),St&&la(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&ve()>Ad&&(r.flags|=128,y=!0,Dc(d,!1),r.lanes=4194304)}else{if(!y)if(i=cd(v),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,Td(r,i),Dc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!St)return Xt(r),null}else 2*ve()-d.renderingStartTime>Ad&&c!==536870912&&(r.flags|=128,y=!0,Dc(d,!1),r.lanes=4194304);d.isBackwards?(v.sibling=r.child,r.child=v):(i=d.last,i!==null?i.sibling=v:r.child=v,d.last=v)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=ve(),i.sibling=null,c=gn.current,fe(gn,y?c&1|2:c&1),St&&la(r,d.treeForkCount),i):(Xt(r),null);case 22:case 23:return js(r),ym(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(Xt(r),r.subtreeFlags&6&&(r.flags|=8192)):Xt(r),c=r.updateQueue,c!==null&&Td(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),i!==null&&Q(ro),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ua(Tn),Xt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function ok(i,r){switch(sm(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ua(Tn),We(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return jt(r),null;case 31:if(r.memoizedState!==null){if(js(r),r.alternate===null)throw Error(s(340));so()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(js(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));so()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Q(gn),null;case 4:return We(),null;case 10:return ua(r.type),null;case 22:case 23:return js(r),ym(),i!==null&&Q(ro),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ua(Tn),null;case 25:return null;default:return null}}function cb(i,r){switch(sm(r),r.tag){case 3:ua(Tn),We();break;case 26:case 27:case 5:jt(r);break;case 4:We();break;case 31:r.memoizedState!==null&&js(r);break;case 13:js(r);break;case 19:Q(gn);break;case 10:ua(r.type);break;case 22:case 23:js(r),ym(),i!==null&&Q(ro);break;case 24:ua(Tn)}}function Pc(i,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&i)===i){d=void 0;var v=c.create,w=c.inst;d=v(),w.destroy=d}c=c.next}while(c!==y)}}catch(j){Ot(r,r.return,j)}}function nr(i,r,c){try{var d=r.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var v=y.next;d=v;do{if((d.tag&i)===i){var w=d.inst,j=w.destroy;if(j!==void 0){w.destroy=void 0,y=r;var H=c,se=j;try{se()}catch(he){Ot(y,H,he)}}}d=d.next}while(d!==v)}}catch(he){Ot(r,r.return,he)}}function ub(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{ey(r,c)}catch(d){Ot(i,i.return,d)}}}function db(i,r,c){c.props=ho(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){Ot(i,r,d)}}function jc(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(y){Ot(i,r,y)}}function Gi(i,r){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){Ot(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Ot(i,r,y)}else c.current=null}function hb(i){var r=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){Ot(i,i.return,y)}}function Qm(i,r,c){try{var d=i.stateNode;Ck(d,i.type,c,r),d[vn]=r}catch(y){Ot(i,i.return,y)}}function fb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&cr(i.type)||i.tag===4}function Wm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||fb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&cr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Xm(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=mi));else if(d!==4&&(d===27&&cr(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(Xm(i,r,c),i=i.sibling;i!==null;)Xm(i,r,c),i=i.sibling}function Sd(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(d!==4&&(d===27&&cr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Sd(i,r,c),i=i.sibling;i!==null;)Sd(i,r,c),i=i.sibling}function mb(i){var r=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);$n(r,d,c),r[ln]=i,r[vn]=c}catch(v){Ot(i,i.return,v)}}var pa=!1,wn=!1,Zm=!1,pb=typeof WeakSet=="function"?WeakSet:Set,jn=null;function lk(i,r){if(i=i.containerInfo,v0=Hd,i=Ax(i),Kf(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var w=0,j=-1,H=-1,se=0,he=0,xe=i,ae=null;t:for(;;){for(var ce;xe!==c||y!==0&&xe.nodeType!==3||(j=w+y),xe!==v||d!==0&&xe.nodeType!==3||(H=w+d),xe.nodeType===3&&(w+=xe.nodeValue.length),(ce=xe.firstChild)!==null;)ae=xe,xe=ce;for(;;){if(xe===i)break t;if(ae===c&&++se===y&&(j=w),ae===v&&++he===d&&(H=w),(ce=xe.nextSibling)!==null)break;xe=ae,ae=xe.parentNode}xe=ce}c=j===-1||H===-1?null:{start:j,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(_0={focusedElem:i,selectionRange:c},Hd=!1,jn=r;jn!==null;)if(r=jn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,jn=i;else for(;jn!==null;){switch(r=jn,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)y=i[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,c=r,y=v.memoizedProps,v=v.memoizedState,d=c.stateNode;try{var Ve=ho(c.type,y);i=d.getSnapshotBeforeUpdate(Ve,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Je){Ot(c,c.return,Je)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)E0(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":E0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,jn=i;break}jn=r.return}}function gb(i,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:xa(i,c),d&4&&Pc(5,c);break;case 1:if(xa(i,c),d&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(w){Ot(c,c.return,w)}else{var y=ho(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Ot(c,c.return,w)}}d&64&&ub(c),d&512&&jc(c,c.return);break;case 3:if(xa(i,c),d&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{ey(i,r)}catch(w){Ot(c,c.return,w)}}break;case 27:r===null&&d&4&&mb(c);case 26:case 5:xa(i,c),r===null&&d&4&&hb(c),d&512&&jc(c,c.return);break;case 12:xa(i,c);break;case 31:xa(i,c),d&4&&bb(i,c);break;case 13:xa(i,c),d&4&&vb(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=xk.bind(null,c),Uk(i,c))));break;case 22:if(d=c.memoizedState!==null||pa,!d){r=r!==null&&r.memoizedState!==null||wn,y=pa;var v=wn;pa=d,(wn=r)&&!v?ya(i,c,(c.subtreeFlags&8772)!==0):xa(i,c),pa=y,wn=v}break;case 30:break;default:xa(i,c)}}function xb(i){var r=i.alternate;r!==null&&(i.alternate=null,xb(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Is(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var sn=null,gs=!1;function ga(i,r,c){for(c=c.child;c!==null;)yb(i,r,c),c=c.sibling}function yb(i,r,c){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Bn,c)}catch{}switch(c.tag){case 26:wn||Gi(c,r),ga(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:wn||Gi(c,r);var d=sn,y=gs;cr(c.type)&&(sn=c.stateNode,gs=!1),ga(i,r,c),Hc(c.stateNode),sn=d,gs=y;break;case 5:wn||Gi(c,r);case 6:if(d=sn,y=gs,sn=null,ga(i,r,c),sn=d,gs=y,sn!==null)if(gs)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(c.stateNode)}catch(v){Ot(c,r,v)}else try{sn.removeChild(c.stateNode)}catch(v){Ot(c,r,v)}break;case 18:sn!==null&&(gs?(i=sn,uv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),_l(i)):uv(sn,c.stateNode));break;case 4:d=sn,y=gs,sn=c.stateNode.containerInfo,gs=!0,ga(i,r,c),sn=d,gs=y;break;case 0:case 11:case 14:case 15:nr(2,c,r),wn||nr(4,c,r),ga(i,r,c);break;case 1:wn||(Gi(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&db(c,r,d)),ga(i,r,c);break;case 21:ga(i,r,c);break;case 22:wn=(d=wn)||c.memoizedState!==null,ga(i,r,c),wn=d;break;default:ga(i,r,c)}}function bb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{_l(i)}catch(c){Ot(r,r.return,c)}}}function vb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{_l(i)}catch(c){Ot(r,r.return,c)}}function ck(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new pb),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new pb),r;default:throw Error(s(435,i.tag))}}function Ed(i,r){var c=ck(i);r.forEach(function(d){if(!c.has(d)){c.add(d);var y=yk.bind(null,i,d);d.then(y,y)}})}function xs(i,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],v=i,w=r,j=w;e:for(;j!==null;){switch(j.tag){case 27:if(cr(j.type)){sn=j.stateNode,gs=!1;break e}break;case 5:sn=j.stateNode,gs=!1;break e;case 3:case 4:sn=j.stateNode.containerInfo,gs=!0;break e}j=j.return}if(sn===null)throw Error(s(160));yb(v,w,y),sn=null,gs=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)_b(r,i),r=r.sibling}var vi=null;function _b(i,r){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:xs(r,i),ys(i),d&4&&(nr(3,i,i.return),Pc(3,i),nr(5,i,i.return));break;case 1:xs(r,i),ys(i),d&512&&(wn||c===null||Gi(c,c.return)),d&64&&pa&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=vi;if(xs(r,i),ys(i),d&512&&(wn||c===null||Gi(c,c.return)),d&4){var v=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Cs]||v[ln]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(d),y.head.insertBefore(v,y.querySelector("head > title"))),$n(v,d,c),v[ln]=i,cn(v),d=v;break e;case"link":var w=_v("link","href",y).get(d+(c.href||""));if(w){for(var j=0;j<w.length;j++)if(v=w[j],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(j,1);break t}}v=y.createElement(d),$n(v,d,c),y.head.appendChild(v);break;case"meta":if(w=_v("meta","content",y).get(d+(c.content||""))){for(j=0;j<w.length;j++)if(v=w[j],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(j,1);break t}}v=y.createElement(d),$n(v,d,c),y.head.appendChild(v);break;default:throw Error(s(468,d))}v[ln]=i,cn(v),d=v}i.stateNode=d}else Tv(y,i.type,i.stateNode);else i.stateNode=vv(y,d,i.memoizedProps);else v!==d?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,d===null?Tv(y,i.type,i.stateNode):vv(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Qm(i,i.memoizedProps,c.memoizedProps)}break;case 27:xs(r,i),ys(i),d&512&&(wn||c===null||Gi(c,c.return)),c!==null&&d&4&&Qm(i,i.memoizedProps,c.memoizedProps);break;case 5:if(xs(r,i),ys(i),d&512&&(wn||c===null||Gi(c,c.return)),i.flags&32){y=i.stateNode;try{_n(y,"")}catch(Ve){Ot(i,i.return,Ve)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,Qm(i,y,c!==null?c.memoizedProps:y)),d&1024&&(Zm=!0);break;case 6:if(xs(r,i),ys(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Ve){Ot(i,i.return,Ve)}}break;case 3:if(Bd=null,y=vi,vi=Od(r.containerInfo),xs(r,i),vi=y,ys(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{_l(r.containerInfo)}catch(Ve){Ot(i,i.return,Ve)}Zm&&(Zm=!1,Tb(i));break;case 4:d=vi,vi=Od(i.stateNode.containerInfo),xs(r,i),ys(i),vi=d;break;case 12:xs(r,i),ys(i);break;case 31:xs(r,i),ys(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Ed(i,d)));break;case 13:xs(r,i),ys(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Nd=ve()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Ed(i,d)));break;case 22:y=i.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,se=pa,he=wn;if(pa=se||y,wn=he||H,xs(r,i),wn=he,pa=se,ys(i),d&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(c===null||H||pa||wn||fo(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){H=c=r;try{if(v=H.stateNode,y)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{j=H.stateNode;var xe=H.memoizedProps.style,ae=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;j.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ve){Ot(H,H.return,Ve)}}}else if(r.tag===6){if(c===null){H=r;try{H.stateNode.nodeValue=y?"":H.memoizedProps}catch(Ve){Ot(H,H.return,Ve)}}}else if(r.tag===18){if(c===null){H=r;try{var ce=H.stateNode;y?dv(ce,!0):dv(H.stateNode,!1)}catch(Ve){Ot(H,H.return,Ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Ed(i,c))));break;case 19:xs(r,i),ys(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Ed(i,d)));break;case 30:break;case 21:break;default:xs(r,i),ys(i)}}function ys(i){var r=i.flags;if(r&2){try{for(var c,d=i.return;d!==null;){if(fb(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var y=c.stateNode,v=Wm(i);Sd(i,v,y);break;case 5:var w=c.stateNode;c.flags&32&&(_n(w,""),c.flags&=-33);var j=Wm(i);Sd(i,j,w);break;case 3:case 4:var H=c.stateNode.containerInfo,se=Wm(i);Xm(i,se,H);break;default:throw Error(s(161))}}catch(he){Ot(i,i.return,he)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Tb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Tb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function xa(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)gb(i,r.alternate,r),r=r.sibling}function fo(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:nr(4,r,r.return),fo(r);break;case 1:Gi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&db(r,r.return,c),fo(r);break;case 27:Hc(r.stateNode);case 26:case 5:Gi(r,r.return),fo(r);break;case 22:r.memoizedState===null&&fo(r);break;case 30:fo(r);break;default:fo(r)}i=i.sibling}}function ya(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,y=i,v=r,w=v.flags;switch(v.tag){case 0:case 11:case 15:ya(y,v,c),Pc(4,v);break;case 1:if(ya(y,v,c),d=v,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(se){Ot(d,d.return,se)}if(d=v,y=d.updateQueue,y!==null){var j=d.stateNode;try{var H=y.shared.hiddenCallbacks;if(H!==null)for(y.shared.hiddenCallbacks=null,y=0;y<H.length;y++)Zx(H[y],j)}catch(se){Ot(d,d.return,se)}}c&&w&64&&ub(v),jc(v,v.return);break;case 27:mb(v);case 26:case 5:ya(y,v,c),c&&d===null&&w&4&&hb(v),jc(v,v.return);break;case 12:ya(y,v,c);break;case 31:ya(y,v,c),c&&w&4&&bb(y,v);break;case 13:ya(y,v,c),c&&w&4&&vb(y,v);break;case 22:v.memoizedState===null&&ya(y,v,c),jc(v,v.return);break;case 30:break;default:ya(y,v,c)}r=r.sibling}}function e0(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&_c(c))}function t0(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_c(i))}function _i(i,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Sb(i,r,c,d),r=r.sibling}function Sb(i,r,c,d){var y=r.flags;switch(r.tag){case 0:case 11:case 15:_i(i,r,c,d),y&2048&&Pc(9,r);break;case 1:_i(i,r,c,d);break;case 3:_i(i,r,c,d),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_c(i)));break;case 12:if(y&2048){_i(i,r,c,d),i=r.stateNode;try{var v=r.memoizedProps,w=v.id,j=v.onPostCommit;typeof j=="function"&&j(w,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){Ot(r,r.return,H)}}else _i(i,r,c,d);break;case 31:_i(i,r,c,d);break;case 13:_i(i,r,c,d);break;case 23:break;case 22:v=r.stateNode,w=r.alternate,r.memoizedState!==null?v._visibility&2?_i(i,r,c,d):Lc(i,r):v._visibility&2?_i(i,r,c,d):(v._visibility|=2,ul(i,r,c,d,(r.subtreeFlags&10256)!==0||!1)),y&2048&&e0(w,r);break;case 24:_i(i,r,c,d),y&2048&&t0(r.alternate,r);break;default:_i(i,r,c,d)}}function ul(i,r,c,d,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,w=r,j=c,H=d,se=w.flags;switch(w.tag){case 0:case 11:case 15:ul(v,w,j,H,y),Pc(8,w);break;case 23:break;case 22:var he=w.stateNode;w.memoizedState!==null?he._visibility&2?ul(v,w,j,H,y):Lc(v,w):(he._visibility|=2,ul(v,w,j,H,y)),y&&se&2048&&e0(w.alternate,w);break;case 24:ul(v,w,j,H,y),y&&se&2048&&t0(w.alternate,w);break;default:ul(v,w,j,H,y)}r=r.sibling}}function Lc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,d=r,y=d.flags;switch(d.tag){case 22:Lc(c,d),y&2048&&e0(d.alternate,d);break;case 24:Lc(c,d),y&2048&&t0(d.alternate,d);break;default:Lc(c,d)}r=r.sibling}}var Uc=8192;function dl(i,r,c){if(i.subtreeFlags&Uc)for(i=i.child;i!==null;)Eb(i,r,c),i=i.sibling}function Eb(i,r,c){switch(i.tag){case 26:dl(i,r,c),i.flags&Uc&&i.memoizedState!==null&&Jk(c,vi,i.memoizedState,i.memoizedProps);break;case 5:dl(i,r,c);break;case 3:case 4:var d=vi;vi=Od(i.stateNode.containerInfo),dl(i,r,c),vi=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Uc,Uc=16777216,dl(i,r,c),Uc=d):dl(i,r,c));break;default:dl(i,r,c)}}function wb(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Oc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];jn=d,Ab(d,i)}wb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Nb(i),i=i.sibling}function Nb(i){switch(i.tag){case 0:case 11:case 15:Oc(i),i.flags&2048&&nr(9,i,i.return);break;case 3:Oc(i);break;case 12:Oc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,wd(i)):Oc(i);break;default:Oc(i)}}function wd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];jn=d,Ab(d,i)}wb(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:nr(8,r,r.return),wd(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,wd(r));break;default:wd(r)}i=i.sibling}}function Ab(i,r){for(;jn!==null;){var c=jn;switch(c.tag){case 0:case 11:case 15:nr(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:_c(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,jn=d;else e:for(c=i;jn!==null;){d=jn;var y=d.sibling,v=d.return;if(xb(d),d===c){jn=null;break e}if(y!==null){y.return=v,jn=y;break e}jn=v}}}var uk={getCacheForType:function(i){var r=qn(Tn),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return qn(Tn).controller.signal}},dk=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Yt=null,gt=null,yt=0,Ut=0,Ls=null,sr=!1,hl=!1,n0=!1,ba=0,dn=0,ir=0,mo=0,s0=0,Us=0,fl=0,Vc=null,bs=null,i0=!1,Nd=0,kb=0,Ad=1/0,kd=null,ar=null,Rn=0,rr=null,ml=null,va=0,a0=0,r0=null,Cb=null,Bc=0,o0=null;function Os(){return(Dt&2)!==0&&yt!==0?yt&-yt:Y.T!==null?f0():Oo()}function Ib(){if(Us===0)if((yt&536870912)===0||St){var i=Gn;Gn<<=1,(Gn&3932160)===0&&(Gn=262144),Us=i}else Us=536870912;return i=Ps.current,i!==null&&(i.flags|=32),Us}function vs(i,r,c){(i===Yt&&(Ut===2||Ut===9)||i.cancelPendingCommit!==null)&&(pl(i,0),or(i,yt,Us,!1)),Ii(i,c),((Dt&2)===0||i!==Yt)&&(i===Yt&&((Dt&2)===0&&(mo|=c),dn===4&&or(i,yt,Us,!1)),zi(i))}function Rb(i,r,c){if((Dt&6)!==0)throw Error(s(327));var d=!c&&(r&127)===0&&(r&i.expiredLanes)===0||ps(i,r),y=d?mk(i,r):c0(i,r,!0),v=d;do{if(y===0){hl&&!d&&or(i,r,0,!1);break}else{if(c=i.current.alternate,v&&!hk(c)){y=c0(i,r,!1),v=!1;continue}if(y===2){if(v=r,i.errorRecoveryDisabledLanes&v)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var j=i;y=Vc;var H=j.current.memoizedState.isDehydrated;if(H&&(pl(j,w).flags|=256),w=c0(j,w,!1),w!==2){if(n0&&!H){j.errorRecoveryDisabledLanes|=v,mo|=v,y=4;break e}v=bs,bs=y,v!==null&&(bs===null?bs=v:bs.push.apply(bs,v))}y=w}if(v=!1,y!==2)continue}}if(y===1){pl(i,0),or(i,r,0,!0);break}e:{switch(d=i,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:or(d,r,Us,!sr);break e;case 2:bs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Nd+300-ve(),10<y)){if(or(d,r,Us,!sr),ms(d,0,!0)!==0)break e;va=r,d.timeoutHandle=lv(Mb.bind(null,d,c,bs,kd,i0,r,Us,mo,fl,sr,v,"Throttled",-0,0),y);break e}Mb(d,c,bs,kd,i0,r,Us,mo,fl,sr,v,null,-0,0)}}break}while(!0);zi(i)}function Mb(i,r,c,d,y,v,w,j,H,se,he,xe,ae,ce){if(i.timeoutHandle=-1,xe=r.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mi},Eb(r,v,xe);var Ve=(v&62914560)===v?Nd-ve():(v&4194048)===v?kb-ve():0;if(Ve=Qk(xe,Ve),Ve!==null){va=v,i.cancelPendingCommit=Ve(Bb.bind(null,i,r,v,c,d,y,w,j,H,he,xe,null,ae,ce)),or(i,v,w,!se);return}}Bb(i,r,v,c,d,y,w,j,H)}function hk(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],v=y.getSnapshot;y=y.value;try{if(!Ms(v(),y))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function or(i,r,c,d){r&=~s0,r&=~mo,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var y=r;0<y;){var v=31-Gt(y),w=1<<v;d[v]=-1,y&=~w}c!==0&&na(i,c,r)}function Cd(){return(Dt&6)===0?(Gc(0),!1):!0}function l0(){if(gt!==null){if(Ut===0)var i=gt.return;else i=gt,ca=io=null,Em(i),al=null,Sc=0,i=gt;for(;i!==null;)cb(i.alternate,i),i=i.return;gt=null}}function pl(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Mk(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),va=0,l0(),Yt=i,gt=c=oa(i.current,null),yt=r,Ut=0,Ls=null,sr=!1,hl=ps(i,r),n0=!1,fl=Us=s0=mo=ir=dn=0,bs=Vc=null,i0=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var y=31-Gt(d),v=1<<y;r|=i[y],d&=~v}return ba=r,Qu(),c}function Db(i,r){ut=null,Y.H=Rc,r===il||r===id?(r=Jx(),Ut=3):r===hm?(r=Jx(),Ut=4):Ut=r===Bm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ls=r,gt===null&&(dn=1,yd(i,Ws(r,i.current)))}function Pb(){var i=Ps.current;return i===null?!0:(yt&4194048)===yt?ti===null:(yt&62914560)===yt||(yt&536870912)!==0?i===ti:!1}function jb(){var i=Y.H;return Y.H=Rc,i===null?Rc:i}function Lb(){var i=Y.A;return Y.A=uk,i}function Id(){dn=4,sr||(yt&4194048)!==yt&&Ps.current!==null||(hl=!0),(ir&134217727)===0&&(mo&134217727)===0||Yt===null||or(Yt,yt,Us,!1)}function c0(i,r,c){var d=Dt;Dt|=2;var y=jb(),v=Lb();(Yt!==i||yt!==r)&&(kd=null,pl(i,r)),r=!1;var w=dn;e:do try{if(Ut!==0&&gt!==null){var j=gt,H=Ls;switch(Ut){case 8:l0(),w=6;break e;case 3:case 2:case 9:case 6:Ps.current===null&&(r=!0);var se=Ut;if(Ut=0,Ls=null,gl(i,j,H,se),c&&hl){w=0;break e}break;default:se=Ut,Ut=0,Ls=null,gl(i,j,H,se)}}fk(),w=dn;break}catch(he){Db(i,he)}while(!0);return r&&i.shellSuspendCounter++,ca=io=null,Dt=d,Y.H=y,Y.A=v,gt===null&&(Yt=null,yt=0,Qu()),w}function fk(){for(;gt!==null;)Ub(gt)}function mk(i,r){var c=Dt;Dt|=2;var d=jb(),y=Lb();Yt!==i||yt!==r?(kd=null,Ad=ve()+500,pl(i,r)):hl=ps(i,r);e:do try{if(Ut!==0&&gt!==null){r=gt;var v=Ls;t:switch(Ut){case 1:Ut=0,Ls=null,gl(i,r,v,1);break;case 2:case 9:if($x(v)){Ut=0,Ls=null,Ob(r);break}r=function(){Ut!==2&&Ut!==9||Yt!==i||(Ut=7),zi(i)},v.then(r,r);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:$x(v)?(Ut=0,Ls=null,Ob(r)):(Ut=0,Ls=null,gl(i,r,v,7));break;case 5:var w=null;switch(gt.tag){case 26:w=gt.memoizedState;case 5:case 27:var j=gt;if(w?Sv(w):j.stateNode.complete){Ut=0,Ls=null;var H=j.sibling;if(H!==null)gt=H;else{var se=j.return;se!==null?(gt=se,Rd(se)):gt=null}break t}}Ut=0,Ls=null,gl(i,r,v,5);break;case 6:Ut=0,Ls=null,gl(i,r,v,6);break;case 8:l0(),dn=6;break e;default:throw Error(s(462))}}pk();break}catch(he){Db(i,he)}while(!0);return ca=io=null,Y.H=d,Y.A=y,Dt=c,gt!==null?0:(Yt=null,yt=0,Qu(),dn)}function pk(){for(;gt!==null&&!ci();)Ub(gt)}function Ub(i){var r=ob(i.alternate,i,ba);i.memoizedProps=i.pendingProps,r===null?Rd(i):gt=r}function Ob(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=tb(c,r,r.pendingProps,r.type,void 0,yt);break;case 11:r=tb(c,r,r.pendingProps,r.type.render,r.ref,yt);break;case 5:Em(r);default:cb(c,r),r=gt=Lx(r,ba),r=ob(c,r,ba)}i.memoizedProps=i.pendingProps,r===null?Rd(i):gt=r}function gl(i,r,c,d){ca=io=null,Em(r),al=null,Sc=0;var y=r.return;try{if(sk(i,y,r,c,yt)){dn=1,yd(i,Ws(c,i.current)),gt=null;return}}catch(v){if(y!==null)throw gt=y,v;dn=1,yd(i,Ws(c,i.current)),gt=null;return}r.flags&32768?(St||d===1?i=!0:hl||(yt&536870912)!==0?i=!1:(sr=i=!0,(d===2||d===9||d===3||d===6)&&(d=Ps.current,d!==null&&d.tag===13&&(d.flags|=16384))),Vb(r,i)):Rd(r)}function Rd(i){var r=i;do{if((r.flags&32768)!==0){Vb(r,sr);return}i=r.return;var c=rk(r.alternate,r,ba);if(c!==null){gt=c;return}if(r=r.sibling,r!==null){gt=r;return}gt=r=i}while(r!==null);dn===0&&(dn=5)}function Vb(i,r){do{var c=ok(i.alternate,i);if(c!==null){c.flags&=32767,gt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){gt=i;return}gt=i=c}while(i!==null);dn=6,gt=null}function Bb(i,r,c,d,y,v,w,j,H){i.cancelPendingCommit=null;do Md();while(Rn!==0);if((Dt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=Wf,oc(i,c,v,w,j,H),i===Yt&&(gt=Yt=null,yt=0),ml=r,rr=i,va=c,a0=v,r0=y,Cb=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bk(kt,function(){return qb(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,y=le.p,le.p=2,w=Dt,Dt|=4;try{lk(i,r,c)}finally{Dt=w,le.p=y,Y.T=d}}Rn=1,Gb(),zb(),Fb()}}function Gb(){if(Rn===1){Rn=0;var i=rr,r=ml,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null;var d=le.p;le.p=2;var y=Dt;Dt|=4;try{_b(r,i);var v=_0,w=Ax(i.containerInfo),j=v.focusedElem,H=v.selectionRange;if(w!==j&&j&&j.ownerDocument&&Nx(j.ownerDocument.documentElement,j)){if(H!==null&&Kf(j)){var se=H.start,he=H.end;if(he===void 0&&(he=se),"selectionStart"in j)j.selectionStart=se,j.selectionEnd=Math.min(he,j.value.length);else{var xe=j.ownerDocument||document,ae=xe&&xe.defaultView||window;if(ae.getSelection){var ce=ae.getSelection(),Ve=j.textContent.length,Je=Math.min(H.start,Ve),qt=H.end===void 0?Je:Math.min(H.end,Ve);!ce.extend&&Je>qt&&(w=qt,qt=Je,Je=w);var W=wx(j,Je),K=wx(j,qt);if(W&&K&&(ce.rangeCount!==1||ce.anchorNode!==W.node||ce.anchorOffset!==W.offset||ce.focusNode!==K.node||ce.focusOffset!==K.offset)){var ne=xe.createRange();ne.setStart(W.node,W.offset),ce.removeAllRanges(),Je>qt?(ce.addRange(ne),ce.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),ce.addRange(ne))}}}}for(xe=[],ce=j;ce=ce.parentNode;)ce.nodeType===1&&xe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<xe.length;j++){var me=xe[j];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Hd=!!v0,_0=v0=null}finally{Dt=y,le.p=d,Y.T=c}}i.current=r,Rn=2}}function zb(){if(Rn===2){Rn=0;var i=rr,r=ml,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=Y.T,Y.T=null;var d=le.p;le.p=2;var y=Dt;Dt|=4;try{gb(i,r.alternate,r)}finally{Dt=y,le.p=d,Y.T=c}}Rn=3}}function Fb(){if(Rn===4||Rn===3){Rn=0,Pn();var i=rr,r=ml,c=va,d=Cb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Rn=5:(Rn=0,ml=rr=null,Hb(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ar=null),hi(c),r=r.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Bn,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=Y.T,y=le.p,le.p=2,Y.T=null;try{for(var v=i.onRecoverableError,w=0;w<d.length;w++){var j=d[w];v(j.value,{componentStack:j.stack})}}finally{Y.T=r,le.p=y}}(va&3)!==0&&Md(),zi(i),y=i.pendingLanes,(c&261930)!==0&&(y&42)!==0?i===o0?Bc++:(Bc=0,o0=i):Bc=0,Gc(0)}}function Hb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,_c(r)))}function Md(){return Gb(),zb(),Fb(),qb()}function qb(){if(Rn!==5)return!1;var i=rr,r=a0;a0=0;var c=hi(va),d=Y.T,y=le.p;try{le.p=32>c?32:c,Y.T=null,c=r0,r0=null;var v=rr,w=va;if(Rn=0,ml=rr=null,va=0,(Dt&6)!==0)throw Error(s(331));var j=Dt;if(Dt|=4,Nb(v.current),Sb(v,v.current,w,c),Dt=j,Gc(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Bn,v)}catch{}return!0}finally{le.p=y,Y.T=d,Hb(i,r)}}function Kb(i,r,c){r=Ws(c,r),r=Vm(i.stateNode,r,2),i=Za(i,r,2),i!==null&&(Ii(i,2),zi(i))}function Ot(i,r,c){if(i.tag===3)Kb(i,i,c);else for(;r!==null;){if(r.tag===3){Kb(r,i,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ar===null||!ar.has(d))){i=Ws(c,i),c=$y(2),d=Za(r,c,2),d!==null&&(Yy(c,d,r,i),Ii(d,2),zi(d));break}}r=r.return}}function u0(i,r,c){var d=i.pingCache;if(d===null){d=i.pingCache=new dk;var y=new Set;d.set(r,y)}else y=d.get(r),y===void 0&&(y=new Set,d.set(r,y));y.has(c)||(n0=!0,y.add(c),i=gk.bind(null,i,r,c),r.then(i,i))}function gk(i,r,c){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Yt===i&&(yt&c)===c&&(dn===4||dn===3&&(yt&62914560)===yt&&300>ve()-Nd?(Dt&2)===0&&pl(i,0):s0|=c,fl===yt&&(fl=0)),zi(i)}function $b(i,r){r===0&&(r=di()),i=to(i,r),i!==null&&(Ii(i,r),zi(i))}function xk(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),$b(i,c)}function yk(i,r){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),$b(i,c)}function bk(i,r){return Ze(i,r)}var Dd=null,xl=null,d0=!1,Pd=!1,h0=!1,lr=0;function zi(i){i!==xl&&i.next===null&&(xl===null?Dd=xl=i:xl=xl.next=i),Pd=!0,d0||(d0=!0,_k())}function Gc(i,r){if(!h0&&Pd){h0=!0;do for(var c=!1,d=Dd;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var v=0;else{var w=d.suspendedLanes,j=d.pingedLanes;v=(1<<31-Gt(42|i)+1)-1,v&=y&~(w&~j),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,Wb(d,v))}else v=yt,v=ms(d,d===Yt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||ps(d,v)||(c=!0,Wb(d,v));d=d.next}while(c);h0=!1}}function vk(){Yb()}function Yb(){Pd=d0=!1;var i=0;lr!==0&&Rk()&&(i=lr);for(var r=ve(),c=null,d=Dd;d!==null;){var y=d.next,v=Jb(d,r);v===0?(d.next=null,c===null?Dd=y:c.next=y,y===null&&(xl=c)):(c=d,(i!==0||(v&3)!==0)&&(Pd=!0)),d=y}Rn!==0&&Rn!==5||Gc(i),lr!==0&&(lr=0)}function Jb(i,r){for(var c=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var w=31-Gt(v),j=1<<w,H=y[w];H===-1?((j&c)===0||(j&d)!==0)&&(y[w]=it(j,r)):H<=r&&(i.expiredLanes|=j),v&=~j}if(r=Yt,c=yt,c=ms(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===r&&(Ut===2||Ut===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Lt(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||ps(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(d!==null&&Lt(d),hi(c)){case 2:case 8:c=Ye;break;case 32:c=kt;break;case 268435456:c=Vn;break;default:c=kt}return d=Qb.bind(null,i),c=Ze(c,d),i.callbackPriority=r,i.callbackNode=c,r}return d!==null&&d!==null&&Lt(d),i.callbackPriority=2,i.callbackNode=null,2}function Qb(i,r){if(Rn!==0&&Rn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Md()&&i.callbackNode!==c)return null;var d=yt;return d=ms(i,i===Yt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Rb(i,d,r),Jb(i,ve()),i.callbackNode!=null&&i.callbackNode===c?Qb.bind(null,i):null)}function Wb(i,r){if(Md())return null;Rb(i,r,!0)}function _k(){Dk(function(){(Dt&6)!==0?Ze(Me,vk):Yb()})}function f0(){if(lr===0){var i=nl;i===0&&(i=tn,tn<<=1,(tn&261888)===0&&(tn=256)),lr=i}return lr}function Xb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Go(""+i)}function Zb(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function Tk(i,r,c,d,y){if(r==="submit"&&c&&c.stateNode===y){var v=Xb((y[vn]||null).action),w=d.submitter;w&&(r=(r=w[vn]||null)?Xb(r.formAction):w.getAttribute("formAction"),r!==null&&(v=r,w=null));var j=new ji("action","action",null,d,y);i.push({event:j,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(lr!==0){var H=w?Zb(y,w):new FormData(y);Dm(c,{pending:!0,data:H,method:y.method,action:v},null,H)}}else typeof v=="function"&&(j.preventDefault(),H=w?Zb(y,w):new FormData(y),Dm(c,{pending:!0,data:H,method:y.method,action:v},v,H))},currentTarget:y}]})}}for(var m0=0;m0<Qf.length;m0++){var p0=Qf[m0],Sk=p0.toLowerCase(),Ek=p0[0].toUpperCase()+p0.slice(1);bi(Sk,"on"+Ek)}bi(Ix,"onAnimationEnd"),bi(Rx,"onAnimationIteration"),bi(Mx,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(BA,"onTransitionRun"),bi(GA,"onTransitionStart"),bi(zA,"onTransitionCancel"),bi(Dx,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zc));function ev(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],y=d.event;d=d.listeners;e:{var v=void 0;if(r)for(var w=d.length-1;0<=w;w--){var j=d[w],H=j.instance,se=j.currentTarget;if(j=j.listener,H!==v&&y.isPropagationStopped())break e;v=j,y.currentTarget=se;try{v(y)}catch(he){Ju(he)}y.currentTarget=null,v=H}else for(w=0;w<d.length;w++){if(j=d[w],H=j.instance,se=j.currentTarget,j=j.listener,H!==v&&y.isPropagationStopped())break e;v=j,y.currentTarget=se;try{v(y)}catch(he){Ju(he)}y.currentTarget=null,v=H}}}}function xt(i,r){var c=r[Ba];c===void 0&&(c=r[Ba]=new Set);var d=i+"__bubble";c.has(d)||(tv(r,i,2,!1),c.add(d))}function g0(i,r,c){var d=0;r&&(d|=4),tv(c,i,d,r)}var jd="_reactListening"+Math.random().toString(36).slice(2);function x0(i){if(!i[jd]){i[jd]=!0,Vr.forEach(function(c){c!=="selectionchange"&&(wk.has(c)||g0(c,!1,i),g0(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[jd]||(r[jd]=!0,g0("selectionchange",!1,r))}}function tv(i,r,c,d){switch(Iv(r)){case 2:var y=Zk;break;case 8:y=e2;break;default:y=M0}c=y.bind(null,r,c,i),y=void 0,!$r||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(r,c,{capture:!0,passive:y}):i.addEventListener(r,c,!0):y!==void 0?i.addEventListener(r,c,{passive:y}):i.addEventListener(r,c,!1)}function y0(i,r,c,d,y){var v=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var j=d.stateNode.containerInfo;if(j===y)break;if(w===4)for(w=d.return;w!==null;){var H=w.tag;if((H===3||H===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;j!==null;){if(w=Rs(j),w===null)return;if(H=w.tag,H===5||H===6||H===26||H===27){d=v=w;continue e}j=j.parentNode}}d=d.return}Fa(function(){var se=v,he=$s(c),xe=[];e:{var ae=Px.get(i);if(ae!==void 0){var ce=ji,Ve=i;switch(i){case"keypress":if(Jr(c)===0)break e;case"keydown":case"keyup":ce=Ku;break;case"focusin":Ve="focus",ce=Wr;break;case"focusout":Ve="blur",ce=Wr;break;case"beforeblur":case"afterblur":ce=Wr;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=S;break;case Ix:case Rx:case Mx:ce=Vu;break;case Dx:ce=O;break;case"scroll":case"scrollend":ce=hc;break;case"wheel":ce=oe;break;case"copy":case"cut":case"paste":ce=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=ra;break;case"toggle":case"beforetoggle":ce=ct}var Je=(r&4)!==0,qt=!Je&&(i==="scroll"||i==="scrollend"),W=Je?ae!==null?ae+"Capture":null:ae;Je=[];for(var K=se,ne;K!==null;){var me=K;if(ne=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ne===null||W===null||(me=pi(K,W),me!=null&&Je.push(Fc(K,me,ne))),qt)break;K=K.return}0<Je.length&&(ae=new ce(ae,Ve,null,c,he),xe.push({event:ae,listeners:Je}))}}if((r&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",ae&&c!==cc&&(Ve=c.relatedTarget||c.fromElement)&&(Rs(Ve)||Ve[ks]))break e;if((ce||ae)&&(ae=he.window===he?he:(ae=he.ownerDocument)?ae.defaultView||ae.parentWindow:window,ce?(Ve=c.relatedTarget||c.toElement,ce=se,Ve=Ve?Rs(Ve):null,Ve!==null&&(qt=l(Ve),Je=Ve.tag,Ve!==qt||Je!==5&&Je!==27&&Je!==6)&&(Ve=null)):(ce=null,Ve=se),ce!==Ve)){if(Je=fc,me="onMouseLeave",W="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&(Je=ra,me="onPointerLeave",W="onPointerEnter",K="pointer"),qt=ce==null?ae:as(ce),ne=Ve==null?ae:as(Ve),ae=new Je(me,K+"leave",ce,c,he),ae.target=qt,ae.relatedTarget=ne,me=null,Rs(he)===se&&(Je=new Je(W,K+"enter",Ve,c,he),Je.target=ne,Je.relatedTarget=qt,me=Je),qt=me,ce&&Ve)t:{for(Je=Nk,W=ce,K=Ve,ne=0,me=W;me;me=Je(me))ne++;me=0;for(var He=K;He;He=Je(He))me++;for(;0<ne-me;)W=Je(W),ne--;for(;0<me-ne;)K=Je(K),me--;for(;ne--;){if(W===K||K!==null&&W===K.alternate){Je=W;break t}W=Je(W),K=Je(K)}Je=null}else Je=null;ce!==null&&nv(xe,ae,ce,Je,!1),Ve!==null&&qt!==null&&nv(xe,qt,Ve,Je,!0)}}e:{if(ae=se?as(se):window,ce=ae.nodeName&&ae.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ae.type==="file")var Ct=bx;else if(xx(ae))if(vx)Ct=UA;else{Ct=jA;var ze=PA}else ce=ae.nodeName,!ce||ce.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&Ks(se.elementType)&&(Ct=bx):Ct=LA;if(Ct&&(Ct=Ct(i,se))){yx(xe,Ct,c,he);break e}ze&&ze(i,ae,se),i==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&$t(ae,"number",ae.value)}switch(ze=se?as(se):window,i){case"focusin":(xx(ze)||ze.contentEditable==="true")&&(Yo=ze,$f=se,yc=null);break;case"focusout":yc=$f=Yo=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,kx(xe,c,he);break;case"selectionchange":if(VA)break;case"keydown":case"keyup":kx(xe,c,he)}var dt;if(Mt)e:{switch(i){case"compositionstart":var bt="onCompositionStart";break e;case"compositionend":bt="onCompositionEnd";break e;case"compositionupdate":bt="onCompositionUpdate";break e}bt=void 0}else $o?Xr(i,c)&&(bt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(bt="onCompositionStart");bt&&(Oi&&c.locale!=="ko"&&($o||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&$o&&(dt=dc()):(Pi=he,uc="value"in Pi?Pi.value:Pi.textContent,$o=!0)),ze=Ld(se,bt),0<ze.length&&(bt=new Ui(bt,i,null,c,he),xe.push({event:bt,listeners:ze}),dt?bt.data=dt:(dt=Ko(c),dt!==null&&(bt.data=dt)))),(dt=Js?IA(i,c):RA(i,c))&&(bt=Ld(se,"onBeforeInput"),0<bt.length&&(ze=new Ui("onBeforeInput","beforeinput",null,c,he),xe.push({event:ze,listeners:bt}),ze.data=dt)),Tk(xe,i,se,c,he)}ev(xe,r)})}function Fc(i,r,c){return{instance:i,listener:r,currentTarget:c}}function Ld(i,r){for(var c=r+"Capture",d=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=pi(i,c),y!=null&&d.unshift(Fc(i,y,v)),y=pi(i,r),y!=null&&d.push(Fc(i,y,v))),i.tag===3)return d;i=i.return}return[]}function Nk(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function nv(i,r,c,d,y){for(var v=r._reactName,w=[];c!==null&&c!==d;){var j=c,H=j.alternate,se=j.stateNode;if(j=j.tag,H!==null&&H===d)break;j!==5&&j!==26&&j!==27||se===null||(H=se,y?(se=pi(c,v),se!=null&&w.unshift(Fc(c,se,H))):y||(se=pi(c,v),se!=null&&w.push(Fc(c,se,H)))),c=c.return}w.length!==0&&i.push({event:r,listeners:w})}var Ak=/\r\n?/g,kk=/\u0000|\uFFFD/g;function sv(i){return(typeof i=="string"?i:""+i).replace(Ak,`
`).replace(kk,"")}function iv(i,r){return r=sv(r),sv(i)===r}function Ht(i,r,c,d,y,v){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||_n(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&_n(i,""+d);break;case"className":ye(i,"class",d);break;case"tabIndex":ye(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ye(i,c,d);break;case"style":fi(i,d,v);break;case"data":if(r!=="object"){ye(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Go(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(r!=="input"&&Ht(i,r,"name",y.name,y,null),Ht(i,r,"formEncType",y.formEncType,y,null),Ht(i,r,"formMethod",y.formMethod,y,null),Ht(i,r,"formTarget",y.formTarget,y,null)):(Ht(i,r,"encType",y.encType,y,null),Ht(i,r,"method",y.method,y,null),Ht(i,r,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Go(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=mi);break;case"onScroll":d!=null&&xt("scroll",i);break;case"onScrollEnd":d!=null&&xt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=Go(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":xt("beforetoggle",i),xt("toggle",i),$(i,"popover",d);break;case"xlinkActuate":ge(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ge(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ge(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ge(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ge(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ge(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ge(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ge(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ge(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":$(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=qr.get(c)||c,$(i,c,d))}}function b0(i,r,c,d,y,v){switch(c){case"style":fi(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?_n(i,d):(typeof d=="number"||typeof d=="bigint")&&_n(i,""+d);break;case"onScroll":d!=null&&xt("scroll",i);break;case"onScrollEnd":d!=null&&xt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Br.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),r=c.slice(2,y?c.length-7:void 0),v=i[vn]||null,v=v!=null?v[c]:null,typeof v=="function"&&i.removeEventListener(r,v,y),typeof d=="function")){typeof v!="function"&&v!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,d,y);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):$(i,c,d)}}}function $n(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",i),xt("load",i);var d=!1,y=!1,v;for(v in c)if(c.hasOwnProperty(v)){var w=c[v];if(w!=null)switch(v){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ht(i,r,v,w,c,null)}}y&&Ht(i,r,"srcSet",c.srcSet,c,null),d&&Ht(i,r,"src",c.src,c,null);return;case"input":xt("invalid",i);var j=v=w=y=null,H=null,se=null;for(d in c)if(c.hasOwnProperty(d)){var he=c[d];if(he!=null)switch(d){case"name":y=he;break;case"type":w=he;break;case"checked":H=he;break;case"defaultChecked":se=he;break;case"value":v=he;break;case"defaultValue":j=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,r));break;default:Ht(i,r,d,he,c,null)}}Et(i,v,j,H,se,w,y,!1);return;case"select":xt("invalid",i),d=w=v=null;for(y in c)if(c.hasOwnProperty(y)&&(j=c[y],j!=null))switch(y){case"value":v=j;break;case"defaultValue":w=j;break;case"multiple":d=j;default:Ht(i,r,y,j,c,null)}r=v,c=w,i.multiple=!!d,r!=null?Qt(i,!!d,r,!1):c!=null&&Qt(i,!!d,c,!0);return;case"textarea":xt("invalid",i),v=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(j=c[w],j!=null))switch(w){case"value":d=j;break;case"defaultValue":y=j;break;case"children":v=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:Ht(i,r,w,j,c,null)}In(i,d,y,v);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(d=c[H],d!=null))switch(H){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ht(i,r,H,d,c,null)}return;case"dialog":xt("beforetoggle",i),xt("toggle",i),xt("cancel",i),xt("close",i);break;case"iframe":case"object":xt("load",i);break;case"video":case"audio":for(d=0;d<zc.length;d++)xt(zc[d],i);break;case"image":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"embed":case"source":case"link":xt("error",i),xt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in c)if(c.hasOwnProperty(se)&&(d=c[se],d!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ht(i,r,se,d,c,null)}return;default:if(Ks(r)){for(he in c)c.hasOwnProperty(he)&&(d=c[he],d!==void 0&&b0(i,r,he,d,c,void 0));return}}for(j in c)c.hasOwnProperty(j)&&(d=c[j],d!=null&&Ht(i,r,j,d,c,null))}function Ck(i,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,w=null,j=null,H=null,se=null,he=null;for(ce in c){var xe=c[ce];if(c.hasOwnProperty(ce)&&xe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":H=xe;default:d.hasOwnProperty(ce)||Ht(i,r,ce,null,d,xe)}}for(var ae in d){var ce=d[ae];if(xe=c[ae],d.hasOwnProperty(ae)&&(ce!=null||xe!=null))switch(ae){case"type":v=ce;break;case"name":y=ce;break;case"checked":se=ce;break;case"defaultChecked":he=ce;break;case"value":w=ce;break;case"defaultValue":j=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,r));break;default:ce!==xe&&Ht(i,r,ae,ce,d,xe)}}ft(i,w,j,H,se,he,v,y);return;case"select":ce=w=j=ae=null;for(v in c)if(H=c[v],c.hasOwnProperty(v)&&H!=null)switch(v){case"value":break;case"multiple":ce=H;default:d.hasOwnProperty(v)||Ht(i,r,v,null,d,H)}for(y in d)if(v=d[y],H=c[y],d.hasOwnProperty(y)&&(v!=null||H!=null))switch(y){case"value":ae=v;break;case"defaultValue":j=v;break;case"multiple":w=v;default:v!==H&&Ht(i,r,y,v,d,H)}r=j,c=w,d=ce,ae!=null?Qt(i,!!c,ae,!1):!!d!=!!c&&(r!=null?Qt(i,!!c,r,!0):Qt(i,!!c,c?[]:"",!1));return;case"textarea":ce=ae=null;for(j in c)if(y=c[j],c.hasOwnProperty(j)&&y!=null&&!d.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Ht(i,r,j,null,d,y)}for(w in d)if(y=d[w],v=c[w],d.hasOwnProperty(w)&&(y!=null||v!=null))switch(w){case"value":ae=y;break;case"defaultValue":ce=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&Ht(i,r,w,y,d,v)}mn(i,ae,ce);return;case"option":for(var Ve in c)if(ae=c[Ve],c.hasOwnProperty(Ve)&&ae!=null&&!d.hasOwnProperty(Ve))switch(Ve){case"selected":i.selected=!1;break;default:Ht(i,r,Ve,null,d,ae)}for(H in d)if(ae=d[H],ce=c[H],d.hasOwnProperty(H)&&ae!==ce&&(ae!=null||ce!=null))switch(H){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Ht(i,r,H,ae,d,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in c)ae=c[Je],c.hasOwnProperty(Je)&&ae!=null&&!d.hasOwnProperty(Je)&&Ht(i,r,Je,null,d,ae);for(se in d)if(ae=d[se],ce=c[se],d.hasOwnProperty(se)&&ae!==ce&&(ae!=null||ce!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:Ht(i,r,se,ae,d,ce)}return;default:if(Ks(r)){for(var qt in c)ae=c[qt],c.hasOwnProperty(qt)&&ae!==void 0&&!d.hasOwnProperty(qt)&&b0(i,r,qt,void 0,d,ae);for(he in d)ae=d[he],ce=c[he],!d.hasOwnProperty(he)||ae===ce||ae===void 0&&ce===void 0||b0(i,r,he,ae,d,ce);return}}for(var W in c)ae=c[W],c.hasOwnProperty(W)&&ae!=null&&!d.hasOwnProperty(W)&&Ht(i,r,W,null,d,ae);for(xe in d)ae=d[xe],ce=c[xe],!d.hasOwnProperty(xe)||ae===ce||ae==null&&ce==null||Ht(i,r,xe,ae,d,ce)}function av(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ik(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],v=y.transferSize,w=y.initiatorType,j=y.duration;if(v&&j&&av(w)){for(w=0,j=y.responseEnd,d+=1;d<c.length;d++){var H=c[d],se=H.startTime;if(se>j)break;var he=H.transferSize,xe=H.initiatorType;he&&av(xe)&&(H=H.responseEnd,w+=he*(H<j?1:(j-se)/(H-se)))}if(--d,r+=8*(v+w)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var v0=null,_0=null;function Ud(i){return i.nodeType===9?i:i.ownerDocument}function rv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ov(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function T0(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var S0=null;function Rk(){var i=window.event;return i&&i.type==="popstate"?i===S0?!1:(S0=i,!0):(S0=null,!1)}var lv=typeof setTimeout=="function"?setTimeout:void 0,Mk=typeof clearTimeout=="function"?clearTimeout:void 0,cv=typeof Promise=="function"?Promise:void 0,Dk=typeof queueMicrotask=="function"?queueMicrotask:typeof cv<"u"?function(i){return cv.resolve(null).then(i).catch(Pk)}:lv;function Pk(i){setTimeout(function(){throw i})}function cr(i){return i==="head"}function uv(i,r){var c=r,d=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(y),_l(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Hc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Hc(c);for(var v=c.firstChild;v;){var w=v.nextSibling,j=v.nodeName;v[Cs]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=w}}else c==="body"&&Hc(i.ownerDocument.body);c=y}while(c);_l(r)}function dv(i,r){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function E0(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":E0(c),Is(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function jk(i,r,c,d){for(;i.nodeType===1;){var y=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Cs])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=ni(i.nextSibling),i===null)break}return null}function Lk(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=ni(i.nextSibling),i===null))return null;return i}function hv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ni(i.nextSibling),i===null))return null;return i}function w0(i){return i.data==="$?"||i.data==="$~"}function N0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Uk(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function ni(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var A0=null;function fv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return ni(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function mv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function pv(i,r,c){switch(r=Ud(c),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Hc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Is(i)}var si=new Map,gv=new Set;function Od(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var _a=le.d;le.d={f:Ok,r:Vk,D:Bk,C:Gk,L:zk,m:Fk,X:qk,S:Hk,M:Kk};function Ok(){var i=_a.f(),r=Cd();return i||r}function Vk(i){var r=is(i);r!==null&&r.tag===5&&r.type==="form"?Dy(r):_a.r(i)}var yl=typeof document>"u"?null:document;function xv(i,r,c){var d=yl;if(d&&typeof r=="string"&&r){var y=Ge(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),gv.has(y)||(gv.add(y),i={rel:i,crossOrigin:c,href:r},d.querySelector(y)===null&&(r=d.createElement("link"),$n(r,"link",i),cn(r),d.head.appendChild(r)))}}function Bk(i){_a.D(i),xv("dns-prefetch",i,null)}function Gk(i,r){_a.C(i,r),xv("preconnect",i,r)}function zk(i,r,c){_a.L(i,r,c);var d=yl;if(d&&i&&r){var y='link[rel="preload"][as="'+Ge(r)+'"]';r==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Ge(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Ge(c.imageSizes)+'"]')):y+='[href="'+Ge(i)+'"]';var v=y;switch(r){case"style":v=bl(i);break;case"script":v=vl(i)}si.has(v)||(i=_({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),si.set(v,i),d.querySelector(y)!==null||r==="style"&&d.querySelector(qc(v))||r==="script"&&d.querySelector(Kc(v))||(r=d.createElement("link"),$n(r,"link",i),cn(r),d.head.appendChild(r)))}}function Fk(i,r){_a.m(i,r);var c=yl;if(c&&i){var d=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ge(d)+'"][href="'+Ge(i)+'"]',v=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=vl(i)}if(!si.has(v)&&(i=_({rel:"modulepreload",href:i},r),si.set(v,i),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Kc(v)))return}d=c.createElement("link"),$n(d,"link",i),cn(d),c.head.appendChild(d)}}}function Hk(i,r,c){_a.S(i,r,c);var d=yl;if(d&&i){var y=Fs(d).hoistableStyles,v=bl(i);r=r||"default";var w=y.get(v);if(!w){var j={loading:0,preload:null};if(w=d.querySelector(qc(v)))j.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":r},c),(c=si.get(v))&&k0(i,c);var H=w=d.createElement("link");cn(H),$n(H,"link",i),H._p=new Promise(function(se,he){H.onload=se,H.onerror=he}),H.addEventListener("load",function(){j.loading|=1}),H.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Vd(w,r,d)}w={type:"stylesheet",instance:w,count:1,state:j},y.set(v,w)}}}function qk(i,r){_a.X(i,r);var c=yl;if(c&&i){var d=Fs(c).hoistableScripts,y=vl(i),v=d.get(y);v||(v=c.querySelector(Kc(y)),v||(i=_({src:i,async:!0},r),(r=si.get(y))&&C0(i,r),v=c.createElement("script"),cn(v),$n(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function Kk(i,r){_a.M(i,r);var c=yl;if(c&&i){var d=Fs(c).hoistableScripts,y=vl(i),v=d.get(y);v||(v=c.querySelector(Kc(y)),v||(i=_({src:i,async:!0,type:"module"},r),(r=si.get(y))&&C0(i,r),v=c.createElement("script"),cn(v),$n(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function yv(i,r,c,d){var y=(y=ue.current)?Od(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=bl(c.href),c=Fs(y).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=bl(c.href);var v=Fs(y).hoistableStyles,w=v.get(i);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,w),(v=y.querySelector(qc(i)))&&!v._p&&(w.instance=v,w.state.loading=5),si.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},si.set(i,c),v||$k(y,i,c,w.state))),r&&d===null)throw Error(s(528,""));return w}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=vl(c),c=Fs(y).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function bl(i){return'href="'+Ge(i)+'"'}function qc(i){return'link[rel="stylesheet"]['+i+"]"}function bv(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function $k(i,r,c,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),$n(r,"link",c),cn(r),i.head.appendChild(r))}function vl(i){return'[src="'+Ge(i)+'"]'}function Kc(i){return"script[async]"+i}function vv(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+Ge(c.href)+'"]');if(d)return r.instance=d,cn(d),d;var y=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),cn(d),$n(d,"style",y),Vd(d,c.precedence,i),r.instance=d;case"stylesheet":y=bl(c.href);var v=i.querySelector(qc(y));if(v)return r.state.loading|=4,r.instance=v,cn(v),v;d=bv(c),(y=si.get(y))&&k0(d,y),v=(i.ownerDocument||i).createElement("link"),cn(v);var w=v;return w._p=new Promise(function(j,H){w.onload=j,w.onerror=H}),$n(v,"link",d),r.state.loading|=4,Vd(v,c.precedence,i),r.instance=v;case"script":return v=vl(c.src),(y=i.querySelector(Kc(v)))?(r.instance=y,cn(y),y):(d=c,(y=si.get(v))&&(d=_({},c),C0(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),cn(y),$n(y,"link",d),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Vd(d,c.precedence,i));return r.instance}function Vd(i,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,v=y,w=0;w<d.length;w++){var j=d[w];if(j.dataset.precedence===r)v=j;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function k0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function C0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Bd=null;function _v(i,r,c){if(Bd===null){var d=new Map,y=Bd=new Map;y.set(c,d)}else y=Bd,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),y=0;y<c.length;y++){var v=c[y];if(!(v[Cs]||v[ln]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var w=v.getAttribute(r)||"";w=i+w;var j=d.get(w);j?j.push(v):d.set(w,[v])}}return d}function Tv(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function Yk(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Sv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Jk(i,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=bl(d.href),v=r.querySelector(qc(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Gd.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=v,cn(v);return}v=r.ownerDocument||r,d=bv(d),(y=si.get(y))&&k0(d,y),v=v.createElement("link"),cn(v);var w=v;w._p=new Promise(function(j,H){w.onload=j,w.onerror=H}),$n(v,"link",d),c.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Gd.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var I0=0;function Qk(i,r){return i.stylesheets&&i.count===0&&Fd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Fd(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&I0===0&&(I0=62500*Ik());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Fd(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>I0?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function Gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var zd=null;function Fd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,zd=new Map,r.forEach(Wk,i),zd=null,Gd.call(i))}function Wk(i,r){if(!(r.state.loading&4)){var c=zd.get(i);if(c)var d=c.get(null);else{c=new Map,zd.set(i,c);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var w=y[v];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=r.instance,w=y.getAttribute("data-precedence"),v=c.get(w)||d,v===d&&c.set(null,y),c.set(w,y),this.count++,d=Gd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var $c={$$typeof:G,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function Xk(i,r,c,d,y,v,w,j,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zn(0),this.hiddenUpdates=zn(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Ev(i,r,c,d,y,v,w,j,H,se,he,xe){return i=new Xk(i,r,c,w,H,se,he,xe,j),r=1,v===!0&&(r|=24),v=Ds(3,null,null,r),i.current=v,v.stateNode=i,r=cm(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:d,isDehydrated:c,cache:r},fm(v),i}function wv(i){return i?(i=Wo,i):Wo}function Nv(i,r,c,d,y,v){y=wv(y),d.context===null?d.context=y:d.pendingContext=y,d=Xa(r),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=Za(i,d,r),c!==null&&(vs(c,i,r),wc(c,i,r))}function Av(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function R0(i,r){Av(i,r),(i=i.alternate)&&Av(i,r)}function kv(i){if(i.tag===13||i.tag===31){var r=to(i,67108864);r!==null&&vs(r,i,67108864),R0(i,67108864)}}function Cv(i){if(i.tag===13||i.tag===31){var r=Os();r=sa(r);var c=to(i,r);c!==null&&vs(c,i,r),R0(i,r)}}var Hd=!0;function Zk(i,r,c,d){var y=Y.T;Y.T=null;var v=le.p;try{le.p=2,M0(i,r,c,d)}finally{le.p=v,Y.T=y}}function e2(i,r,c,d){var y=Y.T;Y.T=null;var v=le.p;try{le.p=8,M0(i,r,c,d)}finally{le.p=v,Y.T=y}}function M0(i,r,c,d){if(Hd){var y=D0(d);if(y===null)y0(i,r,d,qd,c),Rv(i,d);else if(n2(y,i,r,c,d))d.stopPropagation();else if(Rv(i,d),r&4&&-1<t2.indexOf(i)){for(;y!==null;){var v=is(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var w=zs(v.pendingLanes);if(w!==0){var j=v;for(j.pendingLanes|=2,j.entangledLanes|=2;w;){var H=1<<31-Gt(w);j.entanglements[1]|=H,w&=~H}zi(v),(Dt&6)===0&&(Ad=ve()+500,Gc(0))}}break;case 31:case 13:j=to(v,2),j!==null&&vs(j,v,2),Cd(),R0(v,2)}if(v=D0(d),v===null&&y0(i,r,d,qd,c),v===y)break;y=v}y!==null&&d.stopPropagation()}else y0(i,r,d,null,c)}}function D0(i){return i=$s(i),P0(i)}var qd=null;function P0(i){if(qd=null,i=Rs(i),i!==null){var r=l(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=u(r),i!==null)return i;i=null}else if(c===31){if(i=h(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return qd=i,null}function Iv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Me:return 2;case Ye:return 8;case kt:case Bt:return 32;case Vn:return 268435456;default:return 32}default:return 32}}var j0=!1,ur=null,dr=null,hr=null,Yc=new Map,Jc=new Map,fr=[],t2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(i,r){switch(i){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Yc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jc.delete(r.pointerId)}}function Qc(i,r,c,d,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[y]},r!==null&&(r=is(r),r!==null&&kv(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function n2(i,r,c,d,y){switch(r){case"focusin":return ur=Qc(ur,i,r,c,d,y),!0;case"dragenter":return dr=Qc(dr,i,r,c,d,y),!0;case"mouseover":return hr=Qc(hr,i,r,c,d,y),!0;case"pointerover":var v=y.pointerId;return Yc.set(v,Qc(Yc.get(v)||null,i,r,c,d,y)),!0;case"gotpointercapture":return v=y.pointerId,Jc.set(v,Qc(Jc.get(v)||null,i,r,c,d,y)),!0}return!1}function Mv(i){var r=Rs(i.target);if(r!==null){var c=l(r);if(c!==null){if(r=c.tag,r===13){if(r=u(c),r!==null){i.blockedOn=r,Ns(i.priority,function(){Cv(c)});return}}else if(r===31){if(r=h(c),r!==null){i.blockedOn=r,Ns(i.priority,function(){Cv(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Kd(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=D0(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);cc=d,c.target.dispatchEvent(d),cc=null}else return r=is(c),r!==null&&kv(r),i.blockedOn=c,!1;r.shift()}return!0}function Dv(i,r,c){Kd(i)&&c.delete(r)}function s2(){j0=!1,ur!==null&&Kd(ur)&&(ur=null),dr!==null&&Kd(dr)&&(dr=null),hr!==null&&Kd(hr)&&(hr=null),Yc.forEach(Dv),Jc.forEach(Dv)}function $d(i,r){i.blockedOn===r&&(i.blockedOn=null,j0||(j0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,s2)))}var Yd=null;function Pv(i){Yd!==i&&(Yd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yd===i&&(Yd=null);for(var r=0;r<i.length;r+=3){var c=i[r],d=i[r+1],y=i[r+2];if(typeof d!="function"){if(P0(d||c)===null)continue;break}var v=is(c);v!==null&&(i.splice(r,3),r-=3,Dm(v,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function _l(i){function r(H){return $d(H,i)}ur!==null&&$d(ur,i),dr!==null&&$d(dr,i),hr!==null&&$d(hr,i),Yc.forEach(r),Jc.forEach(r);for(var c=0;c<fr.length;c++){var d=fr[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<fr.length&&(c=fr[0],c.blockedOn===null);)Mv(c),c.blockedOn===null&&fr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],v=c[d+1],w=y[vn]||null;if(typeof v=="function")w||Pv(c);else if(w){var j=null;if(v&&v.hasAttribute("formAction")){if(y=v,w=v[vn]||null)j=w.formAction;else if(P0(y)!==null)continue}else j=w.action;typeof j=="function"?c[d+1]=j:(c.splice(d,3),d-=3),Pv(c)}}}function jv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(w){return y=w})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function L0(i){this._internalRoot=i}Jd.prototype.render=L0.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,d=Os();Nv(c,d,i,r,null,null)},Jd.prototype.unmount=L0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Nv(i.current,2,null,i,null,null),Cd(),r[ks]=null}};function Jd(i){this._internalRoot=i}Jd.prototype.unstable_scheduleHydration=function(i){if(i){var r=Oo();i={blockedOn:null,target:i,priority:r};for(var c=0;c<fr.length&&r!==0&&r<fr[c].priority;c++);fr.splice(c,0,i),c===0&&Mv(i)}};var Lv=e.version;if(Lv!=="19.2.3")throw Error(s(527,Lv,"19.2.3"));le.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?b(i):null,i=i===null?null:i.stateNode,i};var i2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{Bn=Qd.inject(i2),en=Qd}catch{}}return Xc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var c=!1,d="",y=Fy,v=Hy,w=qy;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Ev(i,1,!1,null,null,c,d,null,y,v,w,jv),i[ks]=r.current,x0(i),new L0(r)},Xc.hydrateRoot=function(i,r,c){if(!a(i))throw Error(s(299));var d=!1,y="",v=Fy,w=Hy,j=qy,H=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(j=c.onRecoverableError),c.formState!==void 0&&(H=c.formState)),r=Ev(i,1,!0,r,c??null,d,y,H,v,w,j,jv),r.context=wv(null),c=r.current,d=Os(),d=sa(d),y=Xa(d),y.callback=null,Za(c,y,d),c=d,r.current.lanes=c,Ii(r,c),zi(r),i[ks]=r.current,x0(i),new Jd(r)},Xc.version="19.2.3",Xc}var Kv;function m2(){if(Kv)return V0.exports;Kv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),V0.exports=f2(),V0.exports}var p2=m2();const g2=BE(p2);var Ke=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(Ke||{});const Eh="https://files.catbox.moe/02xqjo.png",$v={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pucker.mp3",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3",levelUp:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pucker.mp3"},Yv=[{level:1,title:"Pemula"},{level:5,title:"Pelajar Tekun"},{level:10,title:"Pejuang UTBK"},{level:20,title:"Ahli Strategi"},{level:30,title:"Master SKD"},{level:50,title:"Grandmaster"},{level:75,title:"Warlord"},{level:100,title:"Legenda Abadi"}],Xi=(n,e,t,s="ASC",a="")=>{const l=["Bronze","Silver","Gold","Platinum","Diamond","Master","Grandmaster","Legend","Godlike","Impossible"];return t.map((u,h)=>h>=l.length?null:{id:`bench_${n.toLowerCase()}_${h+1}`,title:`${n}: ${l[h]}`,description:s==="DESC"?`Capai skor < ${u} ${a}`:`Capai skor > ${u} ${a}`,icon:e,xpReward:(h+1)*100,condition:p=>{var f,b,_,T,E;return((f=p[0])==null?void 0:f.category)==="BENCHMARK"&&((_=(b=p[0])==null?void 0:b.details)==null?void 0:_.game)===n&&(s==="DESC"?((T=p[0])==null?void 0:T.score)<=u:((E=p[0])==null?void 0:E.score)>=u)}}).filter(u=>u!==null)},x2=(n,e,t="Star")=>({id:`level_${n}`,title:`Level ${n}`,description:`Mencapai Level ${n}`,icon:t,xpReward:e,condition:(s,a)=>a.level>=n}),y2=(n,e)=>({id:`streak_${n}`,title:`Konsisten ${n} Hari`,description:`Login ${n} hari berturut-turut.`,icon:"Flame",xpReward:e,condition:(t,s)=>s.streak>=n}),b2=(n,e)=>({id:`total_tests_${n}`,title:`Veteran ${n}`,description:`Menyelesaikan total ${n} tes.`,icon:"Layers",xpReward:e,condition:t=>t.length>=n}),Zi=(n,e,t,s,a="Award",l)=>({id:`${n}_${t}`,title:`${l?l.toUpperCase():e} ${t}+`,description:`Mencapai skor ${l?l.toUpperCase():"Total"} > ${t} di ${e}.`,icon:a,xpReward:s,condition:u=>{var h,p,f,b;return((h=u[0])==null?void 0:h.category)===e&&(l?((f=(p=u[0])==null?void 0:p.details)==null?void 0:f[l])>=t:((b=u[0])==null?void 0:b.score)>=t)}}),v2=Xi("REACTION","Zap",[400,350,300,275,250,225,200,180,160,150],"DESC","ms"),_2=Xi("AIM","Target",[600,550,500,450,400,350,300,250,220,200],"DESC","ms"),T2=Xi("SEQUENCE","Grid",[5,8,10,12,15,18,20,25,30,40],"ASC"),S2=Xi("CHIMP","Brain",[7,9,11,13,15,18,21,25,30,40],"ASC"),E2=Xi("VISUAL","Eye",[5,7,9,11,13,15,17,20,25,30],"ASC"),w2=Xi("NUMBER","Hash",[5,7,9,11,13,15,18,22,30,50],"ASC"),N2=Xi("VERBAL","Book",[10,20,30,40,50,70,100,150,200,300],"ASC"),A2=Xi("TYPING","FileText",[30,40,50,60,70,80,90,100,120,140],"ASC","WPM"),k2=Xi("BRIDGE","Map",[5,8,12,15,20,25,30,40,50,60],"ASC"),C2=Xi("MATCH","Copy",[3,5,8,10,15,20,25,30,40,50],"ASC"),I2=[300,350,375,400,425,450,475,500,525].map(n=>Zi("skd_tot","SKD",n,n,"Briefcase")),R2=Zi("skd_max","SKD",550,5e3,"Crown"),M2=[100,110,120,130,140,150].map(n=>Zi("skd_twk","SKD",n,n,"Book","twk")),D2=[100,120,130,140,150,160,175].map(n=>Zi("skd_tiu","SKD",n,n,"Brain","tiu")),P2=[180,190,200,210,220,225].map(n=>Zi("skd_tkp","SKD",n,n,"Users","tkp")),j2=[500,600,650,700,750,800,850,900].map(n=>Zi("utbk_avg","UTBK",n,n,"GraduationCap","average")),L2=Zi("utbk_max","UTBK",1e3,5e3,"Crown","average"),U2=["pu","ppu","pbm","pk","lbi","lbe","pm"],O2=U2.flatMap(n=>[700,800,900,1e3].map(e=>Zi(`utbk_${n}`,"UTBK",e,Math.round(e/2),"FileText",n))),V2=[150,200,220,240,260].map(n=>Zi("tpa_tot","TPA",n,n,"Zap")),B2=Zi("tpa_max","TPA",280,2500,"Crown"),G2=Array.from({length:20},(n,e)=>(e+1)*5),z2=G2.map(n=>x2(n,n*50)),F2=[3,7,14,21,30,60,90,100,150,200,365],H2=F2.map(n=>y2(n,n*20)),q2=[1,5,10,25,50,75,100,150,200,300,400,500,1e3],K2=q2.map(n=>b2(n,n*10)),$2=[{id:"pauli_speed_30",title:"Pauli Speed 30",description:"Kecepatan > 30/menit.",icon:"Activity",xpReward:100,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=30}},{id:"pauli_speed_40",title:"Pauli Speed 40",description:"Kecepatan > 40/menit.",icon:"Activity",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=40}},{id:"pauli_speed_50",title:"Pauli Speed 50",description:"Kecepatan > 50/menit.",icon:"Activity",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=50}},{id:"pauli_speed_60",title:"Human Calculator",description:"Pauli Speed > 60/menit.",icon:"Activity",xpReward:1e3,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=60}},{id:"pauli_perfect",title:"Teliti Banget",description:"Akurasi 100% di Tes Koran.",icon:"CheckCircle",xpReward:500,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_acc_100",title:"Mata Elang",description:"Akurasi 100% Kecermatan.",icon:"Eye",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_speed_40",title:"Cepat & Tepat",description:"Speed > 40 & Akurasi > 95%.",icon:"Zap",xpReward:300,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.averageSpeed)>=40&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.accuracy)>=95}},{id:"kecer_god",title:"Mata Dewa",description:"Kecermatan Akurasi 100% & Speed > 50.",icon:"Eye",xpReward:1e3,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.averageSpeed)>=50}},{id:"night_owl",title:"Night Owl",description:"Belajar di atas jam 10 malam.",icon:"Moon",xpReward:50,condition:n=>n.length>0&&(new Date(n[0].date).getHours()>=22||new Date(n[0].date).getHours()<4)},{id:"early_bird",title:"Early Bird",description:"Belajar sebelum jam 6 pagi.",icon:"Sun",xpReward:50,condition:n=>n.length>0&&new Date(n[0].date).getHours()>=4&&new Date(n[0].date).getHours()<6},{id:"weekend_warrior",title:"Weekend Warrior",description:"Belajar di hari Sabtu/Minggu.",icon:"Coffee",xpReward:100,condition:n=>{const e=new Date,t=e.getDay();return(t===0||t===6)&&n.length>0&&new Date(n[0].date).getDate()===e.getDate()}},{id:"lunch_break",title:"Lunch Break",description:"Belajar jam 12:00-13:00.",icon:"Sun",xpReward:100,condition:n=>new Date().getHours()===12&&n.length>0},{id:"first_step",title:"Langkah Pertama",description:"Menyelesaikan tes pertama Anda.",icon:"Footprints",xpReward:50,condition:n=>n.length>=1},{id:"skd_pass",title:"Lulus SKD",description:"Lulus Passing Grade SKD.",icon:"Briefcase",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="SKD"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.passed)}}],op=[...v2,..._2,...T2,...S2,...E2,...w2,...N2,...A2,...k2,...C2,...I2,R2,...M2,...D2,...P2,...j2,L2,...O2,...V2,B2,...z2,...H2,...K2,...$2],Jv=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],zE=[{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"Seleksi Lanjutan",desc:"TPA, TBI, & Psikotes Kedinasan"},{id:"PSIKOTEST",name:"Tes Koran & IQ",desc:"IQ, Koran/Pauli, & Kognitif"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Visual"},{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],Y2=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],J2=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],Q2=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],W2=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],X2=["TIU - Verbal & Numerik","TIU - Logika (Silogisme/Analitis)","Tes Logika Gambar (Abstrak)","Tes Kepribadian (EPPS/Sikap Kerja)"],Z2=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],eC=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],Qv=[],Wv=[],Xv=[],Zv=[],e_=[],t_=[],n_=[],s_=[],Fi=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var tC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nC,sC;function iC(){return{geminiUrl:nC,vertexUrl:sC}}function aC(n,e,t,s){var a,l;if(!(n!=null&&n.baseUrl)){const u=iC();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pa{}function Re(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let f=0;f<p.length;f++){const b=p[f];g(b,e.slice(l+1),t[f])}else for(const f of p)g(f,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];g(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function m(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>m(h,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function rC(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),u=new Set;let h=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){h=p;break}if(h!==-1&&l.length>h)for(let p=h;p<l.length;p++){const f=l[p];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}lp(n,a,l,0,u)}}function lp(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const p of h[u])lp(p,e,t,s+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(f=>!f.startsWith("_")&&!a.has(f)),p={};for(const f of h)p[f]=u[f];for(const[f,b]of Object.entries(p)){const _=[];for(const T of t.slice(s))T==="*"?_.push(f):_.push(T);g(u,_,b)}for(const f of h)delete u[f]}}else{const u=n;l in u&&lp(u[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oC(n){const e={},t=m(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=m(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function lC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],uC(u)),e}function cC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],dC(u)),e}function uC(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>hC(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function dC(n){const e={},t=m(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>fC(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function hC(n){const e={},t=m(n,["video"]);return t!=null&&g(e,["video"],bC(t)),e}function fC(n){const e={},t=m(n,["_self"]);return t!=null&&g(e,["video"],vC(t)),e}function mC(n){const e={},t=m(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function pC(n){const e={},t=m(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function gC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],xC(u)),e}function xC(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function FE(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],yC(u)),e}function yC(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function bC(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],tg(s));const a=m(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function vC(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],tg(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var i_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(i_||(i_={}));var a_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(a_||(a_={}));var r_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(r_||(r_={}));var Ce;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ce||(Ce={}));var o_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(o_||(o_={}));var l_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(l_||(l_={}));var c_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(c_||(c_={}));var u_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(u_||(u_={}));var d_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(d_||(d_={}));var h_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(h_||(h_={}));var f_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(f_||(f_={}));var m_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(m_||(m_={}));var p_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(p_||(p_={}));var g_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(g_||(g_={}));var x_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(x_||(x_={}));var y_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(y_||(y_={}));var b_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(b_||(b_={}));var v_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(v_||(v_={}));var __;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(__||(__={}));var T_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(T_||(T_={}));var S_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(S_||(S_={}));var wh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(wh||(wh={}));var E_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(E_||(E_={}));var w_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(w_||(w_={}));var N_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(N_||(N_={}));var cp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cp||(cp={}));var A_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(A_||(A_={}));var k_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(k_||(k_={}));var C_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(C_||(C_={}));var I_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(I_||(I_={}));var R_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(R_||(R_={}));var M_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(M_||(M_={}));var D_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(D_||(D_={}));var P_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(P_||(P_={}));var j_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(j_||(j_={}));var L_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(L_||(L_={}));var U_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(U_||(U_={}));var O_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(O_||(O_={}));var V_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(V_||(V_={}));var B_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(B_||(B_={}));var G_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(G_||(G_={}));var z_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(z_||(z_={}));var F_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(F_||(F_={}));var H_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(H_||(H_={}));var q_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(q_||(q_={}));var K_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(K_||(K_={}));var $_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})($_||($_={}));var Y_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Y_||(Y_={}));var J_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(J_||(J_={}));var Q_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Q_||(Q_={}));var W_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(W_||(W_={}));var X_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(X_||(X_={}));var Z_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Z_||(Z_={}));var eT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(eT||(eT={}));var kl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(kl||(kl={}));class up{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zc{get text(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",b=!1;const _=[];for(const T of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[E,R]of Object.entries(T))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(R!==null||R!==void 0)&&_.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;b=!0,f+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),b?f:void 0}get data(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const b=[];for(const _ of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[T,E]of Object.entries(_))T!=="inlineData"&&(E!==null||E!==void 0)&&b.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(f+=atob(_.inlineData.data))}return b.length>0&&console.warn(`there are non-data parts ${b} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(b=>b.functionCall).map(b=>b.functionCall).filter(b=>b!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,s,a,l,u,h,p,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const b=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((b==null?void 0:b.length)!==0)return(f=b==null?void 0:b[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,s,a,l,u,h,p,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const b=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((b==null?void 0:b.length)!==0)return(f=b==null?void 0:b[0])===null||f===void 0?void 0:f.output}}class tT{}class nT{}class _C{}class TC{}class SC{}class EC{}class sT{}class iT{}class aT{}class wC{}class Nh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Nh;let a;const l=e;return t?a=cC(l):a=lC(l),Object.assign(s,a),s}}class rT{}class oT{}class lT{}class cT{}class NC{}class AC{}class kC{}class ng{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ng,l=gC(e);return Object.assign(s,l),s}}class CC{}class IC{}class RC{}class uT{}class MC{get text(){var e,t,s;let a="",l=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,f]of Object.entries(h))p!=="text"&&p!=="thought"&&f!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class DC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new sg,l=FE(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HE(n,e){const t=Rt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function qE(n){return Array.isArray(n)?n.map(e=>Ah(e)):[Ah(n)]}function Ah(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function KE(n){const e=Ah(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $E(n){const e=Ah(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function YE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>dT(e)):[dT(n)]}function dp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function hT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function fT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ns(n){if(n==null)throw new Error("ContentUnion is required");return dp(n)?n:{role:"user",parts:YE(n)}}function ig(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=ns(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=ns(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ns(t)):[ns(e)]}function ai(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(hT(n)||fT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ns(n)]}const e=[],t=[],s=dp(n[0]);for(const a of n){const l=dp(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(hT(a)||fT(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:YE(t)}),e}function PC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Ce).includes(t[0].toUpperCase())?t[0].toUpperCase():Ce.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Ce).includes(s.toUpperCase())?s.toUpperCase():Ce.TYPE_UNSPECIFIED})}}function Il(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&PC(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ce).includes(h.toUpperCase())?h.toUpperCase():Ce.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Il(h);else if(s.includes(u)){const p=[];for(const f of h){if(f.type=="null"){e.nullable=!0;continue}p.push(Il(f))}e[u]=p}else if(a.includes(u)){const p={};for(const[f,b]of Object.entries(h))p[f]=Il(b);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function ag(n){return Il(n)}function rg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function og(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Yl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Il(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Il(e.response));return n}function Jl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function jC(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function ja(n,e){if(typeof e!="string")throw new Error("name must be a string");return jC(n,e,"cachedContents")}function JE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function jr(n){return tg(n)}function LC(n){return n!=null&&typeof n=="object"&&"name"in n}function UC(n){return n!=null&&typeof n=="object"&&"video"in n}function OC(n){return n!=null&&typeof n=="object"&&"uri"in n}function QE(n){var e;let t;if(LC(n)&&(t=n.name),!(OC(n)&&(t=n.uri,t===void 0))&&!(UC(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function WE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function XE(n){for(const e of["models","tunedModels","publisherModels"])if(VC(n,e))return n[e];return[]}function VC(n,e){return n!==null&&typeof n=="object"&&e in n}function BC(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function GC(n,e={}){const t=[],s=new Set;for(const a of n){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=BC(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function ZE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function zC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function e1(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ql(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function t1(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FC(n){const e={},t=m(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=m(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>SI(u))),g(e,["inlinedResponses"],l)}const a=m(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function HC(n){const e={},t=m(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=m(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=m(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function qC(n){const e={},t=m(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=m(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=m(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function hh(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["metadata","state"]);a!=null&&g(e,["state"],t1(a));const l=m(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=m(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=m(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const p=m(n,["metadata","model"]);p!=null&&g(e,["model"],p);const f=m(n,["metadata","output"]);return f!=null&&g(e,["dest"],FC(e1(f))),e}function hp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["state"]);a!=null&&g(e,["state"],t1(a));const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=m(n,["startTime"]);h!=null&&g(e,["startTime"],h);const p=m(n,["endTime"]);p!=null&&g(e,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(e,["updateTime"],f);const b=m(n,["model"]);b!=null&&g(e,["model"],b);const _=m(n,["inputConfig"]);_!=null&&g(e,["src"],KC(_));const T=m(n,["outputConfig"]);T!=null&&g(e,["dest"],HC(e1(T)));const E=m(n,["completionStats"]);return E!=null&&g(e,["completionStats"],E),e}function KC(n){const e={},t=m(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=m(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=m(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function $C(n,e){const t={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=m(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=m(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>TI(n,u))),g(t,["requests","requests"],l)}return t}function YC(n){const e={},t=m(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=m(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=m(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function JC(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function QC(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ql(n,s)),t}function WC(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ql(n,s)),t}function XC(n){const e={},t=m(n,["content"]);t!=null&&g(e,["content"],t);const s=m(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],ZC(s));const a=m(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=m(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=m(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=m(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=m(n,["index"]);p!=null&&g(e,["index"],p);const f=m(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const b=m(n,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=m(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function ZC(n){const e={},t=m(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function n1(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>II(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function eI(n,e){const t={},s=m(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),m(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function tI(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],qC(zC(a))),t}function mT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["src"]);a!=null&&g(t,["batch","inputConfig"],$C(n,ZE(n,a)));const l=m(e,["config"]);return l!=null&&eI(l,t),t}function nI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],Rt(n,s));const a=m(e,["src"]);a!=null&&g(t,["inputConfig"],YC(ZE(n,a)));const l=m(e,["config"]);return l!=null&&tI(l,t),t}function sI(n,e){const t={},s=m(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function iI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["src"]);a!=null&&g(t,["batch","inputConfig"],dI(n,a));const l=m(e,["config"]);return l!=null&&sI(l,t),t}function aI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ql(n,s)),t}function rI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ql(n,s)),t}function oI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);return l!=null&&g(e,["error"],l),e}function lI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);return l!=null&&g(e,["error"],l),e}function cI(n,e){const t={},s=m(e,["contents"]);if(s!=null){let l=ig(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const a=m(e,["config"]);return a!=null&&(g(t,["_self"],uI(a,t)),rC(t,{"requests[].*":"requests[].request.*"})),t}function uI(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=m(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function dI(n,e){const t={},s=m(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=m(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],cI(n,a)),t}function hI(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function fI(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mI(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pI(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],n1(ns(a)));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const b=m(e,["stopSequences"]);b!=null&&g(s,["stopSequences"],b);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const R=m(e,["frequencyPenalty"]);R!=null&&g(s,["frequencyPenalty"],R);const k=m(e,["seed"]);k!=null&&g(s,["seed"],k);const C=m(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const U=m(e,["responseSchema"]);U!=null&&g(s,["responseSchema"],ag(U));const M=m(e,["responseJsonSchema"]);if(M!=null&&g(s,["responseJsonSchema"],M),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=m(e,["safetySettings"]);if(t!==void 0&&G!=null){let V=G;Array.isArray(V)&&(V=V.map(Ee=>RI(Ee))),g(t,["safetySettings"],V)}const q=m(e,["tools"]);if(t!==void 0&&q!=null){let V=Jl(q);Array.isArray(V)&&(V=V.map(Ee=>DI(Yl(Ee)))),g(t,["tools"],V)}const X=m(e,["toolConfig"]);if(t!==void 0&&X!=null&&g(t,["toolConfig"],MI(X)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=m(e,["cachedContent"]);t!==void 0&&J!=null&&g(t,["cachedContent"],ja(n,J));const D=m(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const A=m(e,["mediaResolution"]);A!=null&&g(s,["mediaResolution"],A);const I=m(e,["speechConfig"]);if(I!=null&&g(s,["speechConfig"],rg(I)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=m(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const L=m(e,["imageConfig"]);L!=null&&g(s,["imageConfig"],_I(L));const z=m(e,["enableEnhancedCivicAnswers"]);return z!=null&&g(s,["enableEnhancedCivicAnswers"],z),s}function gI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>XC(f))),g(e,["candidates"],p)}const a=m(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=m(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=m(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=m(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function xI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ql(n,s)),t}function yI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ql(n,s)),t}function bI(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function vI(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function _I(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function TI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["request","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let h=ai(a);Array.isArray(h)&&(h=h.map(p=>n1(p))),g(t,["request","contents"],h)}const l=m(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=m(e,["config"]);return u!=null&&g(t,["request","generationConfig"],pI(n,u,m(t,["request"],{}))),t}function SI(n){const e={},t=m(n,["response"]);t!=null&&g(e,["response"],gI(t));const s=m(n,["error"]);return s!=null&&g(e,["error"],s),e}function EI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),m(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function wI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=m(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function NI(n){const e={},t=m(n,["config"]);return t!=null&&EI(t,e),e}function AI(n){const e={},t=m(n,["config"]);return t!=null&&wI(t,e),e}function kI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>hh(u))),g(e,["batchJobs"],l)}return e}function CI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>hp(u))),g(e,["batchJobs"],l)}return e}function II(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],hI(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],fI(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],JC(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function RI(n){const e={},t=m(n,["category"]);if(t!=null&&g(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function MI(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],mI(s)),e}function DI(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],bI(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],vI(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Na;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Na||(Na={}));class Mo{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PI extends Pa{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(Na.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=mT(this.apiClient,e),s=t._url,a=Re("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,p=h.requests,f=[];for(const b of p){const _=Object.assign({},b);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=T,_.request=E}f.push(_)}return h.requests=f,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=nI(this.apiClient,e);return h=Re("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>hp(b))}else{const f=mT(this.apiClient,e);return h=Re("{model}:batchGenerateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>hh(b))}}async createEmbeddingsInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=iI(this.apiClient,e);return l=Re("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>hh(p))}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=yI(this.apiClient,e);return h=Re("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>hp(b))}else{const f=xI(this.apiClient,e);return h=Re("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>hh(b))}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=WC(this.apiClient,e);u=Re("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=QC(this.apiClient,e);u=Re("batches/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=AI(e);return h=Re("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=CI(b),T=new uT;return Object.assign(T,_),T})}else{const f=NI(e);return h=Re("batches",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=kI(b),T=new uT;return Object.assign(T,_),T})}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=rI(this.apiClient,e);return h=Re("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>lI(b))}else{const f=aI(this.apiClient,e);return h=Re("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>oI(b))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jI(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function pT(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>iR(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function LI(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=m(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=m(n,["contents"]);if(e!==void 0&&u!=null){let b=ai(u);Array.isArray(b)&&(b=b.map(_=>pT(_))),g(e,["contents"],b)}const h=m(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],pT(ns(h)));const p=m(n,["tools"]);if(e!==void 0&&p!=null){let b=p;Array.isArray(b)&&(b=b.map(_=>rR(_))),g(e,["tools"],b)}const f=m(n,["toolConfig"]);if(e!==void 0&&f!=null&&g(e,["toolConfig"],aR(f)),m(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function UI(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=m(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=m(n,["contents"]);if(e!==void 0&&u!=null){let _=ai(u);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const h=m(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],ns(h));const p=m(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>oR(T))),g(e,["tools"],_)}const f=m(n,["toolConfig"]);e!==void 0&&f!=null&&g(e,["toolConfig"],f);const b=m(n,["kmsKeyName"]);return e!==void 0&&b!=null&&g(e,["encryption_spec","kmsKeyName"],b),t}function OI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],HE(n,s));const a=m(e,["config"]);return a!=null&&LI(a,t),t}function VI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],HE(n,s));const a=m(e,["config"]);return a!=null&&UI(a,t),t}function BI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function GI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function zI(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function FI(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function HI(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function qI(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KI(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $I(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function YI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function JI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],ja(n,s)),t}function QI(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function WI(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function XI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function ZI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function eR(n){const e={},t=m(n,["config"]);return t!=null&&XI(t,e),e}function tR(n){const e={},t=m(n,["config"]);return t!=null&&ZI(t,e),e}function nR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function sR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function iR(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],HI(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],qI(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],jI(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function aR(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],KI(s)),e}function rR(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],QI(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],WI(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function oR(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>$I(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const b=m(n,["urlContext"]);return b!=null&&g(e,["urlContext"],b),e}function lR(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function cR(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function uR(n,e){const t={},s=m(e,["name"]);s!=null&&g(t,["_url","name"],ja(n,s));const a=m(e,["config"]);return a!=null&&lR(a,t),t}function dR(n,e){const t={},s=m(e,["name"]);s!=null&&g(t,["_url","name"],ja(n,s));const a=m(e,["config"]);return a!=null&&cR(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hR extends Pa{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(Na.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=VI(this.apiClient,e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const f=OI(this.apiClient,e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=JI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const f=YI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=GI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=FI(b),T=new lT;return Object.assign(T,_),T})}else{const f=BI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=zI(b),T=new lT;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=dR(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const f=uR(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=tR(e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=sR(b),T=new cT;return Object.assign(T,_),T})}else{const f=eR(e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=nR(b),T=new cT;return Object.assign(T,_),T})}}}function kh(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function gT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function wi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(E){return function(R){return Promise.resolve(R).then(E,_)}}function h(E,R){s[E]&&(a[E]=function(k){return new Promise(function(C,U){l.push([E,k,C,U])>1||p(E,k)})},R&&(a[E]=R(a[E])))}function p(E,R){try{f(s[E](R))}catch(k){T(l[0][3],k)}}function f(E){E.value instanceof at?Promise.resolve(E.value.v).then(b,_):T(l[0][2],E)}function b(E){p("next",E)}function _(E){p("throw",E)}function T(E,R){E(R),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Ni(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gT=="function"?gT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(h,p){u=n[l](u),a(h,p,u.done,u.value)})}}function a(l,u,h,p){Promise.resolve(p).then(function(f){l({value:f,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:s1(t)}function s1(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function mR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function xT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let l=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),l&&!s1(n[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class pR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new gR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class gR{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),mR(l)}async sendMessage(e){var t;await this.sendPromise;const s=ns(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const p=await a,f=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,b=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];b!=null&&(T=(h=b.slice(_))!==null&&h!==void 0?h:[]);const E=f?[f]:[];this.recordHistory(s,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=ns(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?xT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return wi(this,arguments,function*(){var a,l,u,h,p,f;const b=[];try{for(var _=!0,T=Ni(e),E;E=yield at(T.next()),a=E.done,!a;_=!0){h=E.value,_=!1;const R=h;if(fR(R)){const k=(f=(p=R.candidates)===null||p===void 0?void 0:p[0])===null||f===void 0?void 0:f.content;k!==void 0&&b.push(k)}yield yield at(R)}}catch(R){l={error:R}}finally{try{!_&&!a&&(u=T.return)&&(yield at(u.call(T)))}finally{if(l)throw l.error}}this.recordHistory(t,b)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...xT(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class af extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,af.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xR(n){const e={},t=m(n,["file"]);return t!=null&&g(e,["file"],t),e}function yR(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function bR(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","file"],QE(t)),e}function vR(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function _R(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","file"],QE(t)),e}function TR(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function SR(n){const e={},t=m(n,["config"]);return t!=null&&TR(t,e),e}function ER(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wR extends Pa{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(Na.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SR(e);return l=Re("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=ER(p),b=new CC;return Object.assign(b,f),b})}}async createInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xR(e);return l=Re("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=yR(p),b=new IC;return Object.assign(b,f),b})}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_R(e);return l=Re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bR(e);return l=Re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=vR(p),b=new RC;return Object.assign(b,f),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fh(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function NR(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>zR(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function AR(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function kR(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CR(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function IR(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=m(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=m(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=m(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=m(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=m(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=m(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const f=m(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const b=m(n,["mediaResolution"]);b!=null&&g(e,["mediaResolution"],b);const _=m(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=m(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=m(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const R=m(n,["responseModalities"]);R!=null&&g(e,["responseModalities"],R);const k=m(n,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const C=m(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const U=m(n,["seed"]);U!=null&&g(e,["seed"],U);const M=m(n,["speechConfig"]);M!=null&&g(e,["speechConfig"],M);const G=m(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const q=m(n,["temperature"]);q!=null&&g(e,["temperature"],q);const X=m(n,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const J=m(n,["topK"]);J!=null&&g(e,["topK"],J);const D=m(n,["topP"]);if(D!=null&&g(e,["topP"],D),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function RR(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function MR(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function DR(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const b=m(n,["seed"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","seed"],b);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],og(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const R=m(n,["systemInstruction"]);e!==void 0&&R!=null&&g(e,["setup","systemInstruction"],NR(ns(R)));const k=m(n,["tools"]);if(e!==void 0&&k!=null){let J=Jl(k);Array.isArray(J)&&(J=J.map(D=>HR(Yl(D)))),g(e,["setup","tools"],J)}const C=m(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],FR(C));const U=m(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","inputAudioTranscription"],U);const M=m(n,["outputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","outputAudioTranscription"],M);const G=m(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const q=m(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=m(n,["proactivity"]);if(e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function PR(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],IR(s));const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const b=m(n,["seed"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","seed"],b);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],og(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const R=m(n,["systemInstruction"]);e!==void 0&&R!=null&&g(e,["setup","systemInstruction"],ns(R));const k=m(n,["tools"]);if(e!==void 0&&k!=null){let D=Jl(k);Array.isArray(D)&&(D=D.map(A=>qR(Yl(A)))),g(e,["setup","tools"],D)}const C=m(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],C);const U=m(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","inputAudioTranscription"],U);const M=m(n,["outputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","outputAudioTranscription"],M);const G=m(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const q=m(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=m(n,["proactivity"]);e!==void 0&&X!=null&&g(e,["setup","proactivity"],X);const J=m(n,["explicitVadSignal"]);return e!==void 0&&J!=null&&g(e,["setup","explicitVadSignal"],J),t}function jR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],Rt(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],DR(a,t)),t}function LR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],Rt(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],PR(a,t)),t}function UR(n){const e={},t=m(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function OR(n){const e={},t=m(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function VR(n){const e={},t=m(n,["media"]);if(t!=null){let f=qE(t);Array.isArray(f)&&(f=f.map(b=>fh(b))),g(e,["mediaChunks"],f)}const s=m(n,["audio"]);s!=null&&g(e,["audio"],fh($E(s)));const a=m(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=m(n,["video"]);l!=null&&g(e,["video"],fh(KE(l)));const u=m(n,["text"]);u!=null&&g(e,["text"],u);const h=m(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=m(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function BR(n){const e={},t=m(n,["media"]);if(t!=null){let f=qE(t);Array.isArray(f)&&(f=f.map(b=>b)),g(e,["mediaChunks"],f)}const s=m(n,["audio"]);s!=null&&g(e,["audio"],$E(s));const a=m(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=m(n,["video"]);l!=null&&g(e,["video"],KE(l));const u=m(n,["text"]);u!=null&&g(e,["text"],u);const h=m(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=m(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function GR(n){const e={},t=m(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=m(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=m(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=m(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=m(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],KR(u));const h=m(n,["goAway"]);h!=null&&g(e,["goAway"],h);const p=m(n,["sessionResumptionUpdate"]);p!=null&&g(e,["sessionResumptionUpdate"],p);const f=m(n,["voiceActivityDetectionSignal"]);return f!=null&&g(e,["voiceActivityDetectionSignal"],f),e}function zR(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],AR(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],kR(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],fh(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function FR(n){const e={},t=m(n,["handle"]);if(t!=null&&g(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function HR(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],RR(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],MR(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function qR(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>CR(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const b=m(n,["urlContext"]);return b!=null&&g(e,["urlContext"],b),e}function KR(n){const e={},t=m(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=m(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=m(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=m(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=m(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=m(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const p=m(n,["promptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(R=>R)),g(e,["promptTokensDetails"],E)}const f=m(n,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(R=>R)),g(e,["cacheTokensDetails"],E)}const b=m(n,["candidatesTokensDetails"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(R=>R)),g(e,["responseTokensDetails"],E)}const _=m(n,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(R=>R)),g(e,["toolUsePromptTokensDetails"],E)}const T=m(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $R(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function YR(n){const e={},t=m(n,["content"]);t!=null&&g(e,["content"],t);const s=m(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],JR(s));const a=m(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=m(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=m(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=m(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=m(n,["index"]);p!=null&&g(e,["index"],p);const f=m(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const b=m(n,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=m(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function JR(n){const e={},t=m(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function QR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let l=ai(a);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function WR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function XR(n){const e={},t=m(n,["values"]);t!=null&&g(e,["values"],t);const s=m(n,["statistics"]);return s!=null&&g(e,["statistics"],ZR(s)),e}function ZR(n){const e={},t=m(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=m(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function rf(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>l4(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function eM(n){const e={},t=m(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=m(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function tM(n){const e={};if(m(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function nM(n,e){const t={},s=m(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],ns(s));const a=m(n,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>o1(h))),g(e,["tools"],u)}const l=m(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],$M(l)),t}function sM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>rf(h))),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&tM(l),t}function iM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&nM(l,t),t}function aM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=m(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function rM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function oM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function lM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function cM(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function uM(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function dM(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=m(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=m(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const f=m(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const _=m(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=m(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=m(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const R=m(n,["outputMimeType"]);e!==void 0&&R!=null&&g(e,["parameters","outputOptions","mimeType"],R);const k=m(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const C=m(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const U=m(n,["labels"]);e!==void 0&&U!=null&&g(e,["labels"],U);const M=m(n,["editMode"]);e!==void 0&&M!=null&&g(e,["parameters","editMode"],M);const G=m(n,["baseSteps"]);return e!==void 0&&G!=null&&g(e,["parameters","editConfig","baseSteps"],G),t}function hM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>m4(p))),g(t,["instances[0]","referenceImages"],h)}const u=m(e,["config"]);return u!=null&&dM(u,t),t}function fM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>of(l))),g(e,["generatedImages"],a)}return e}function mM(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=m(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function pM(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=m(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=m(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=m(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function gM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let h=ig(n,a);Array.isArray(h)&&(h=h.map(p=>p)),g(t,["requests[]","content"],h)}const l=m(e,["config"]);l!=null&&mM(l,t);const u=m(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],Rt(n,u)),t}function xM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let u=ig(n,a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const l=m(e,["config"]);return l!=null&&pM(l,t),t}function yM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=m(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function bM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>XR(u))),g(e,["embeddings"],l)}const a=m(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function vM(n){const e={},t=m(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=m(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function _M(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function TM(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SM(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function EM(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function wM(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],rf(ns(a)));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const b=m(e,["stopSequences"]);b!=null&&g(s,["stopSequences"],b);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const R=m(e,["frequencyPenalty"]);R!=null&&g(s,["frequencyPenalty"],R);const k=m(e,["seed"]);k!=null&&g(s,["seed"],k);const C=m(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const U=m(e,["responseSchema"]);U!=null&&g(s,["responseSchema"],ag(U));const M=m(e,["responseJsonSchema"]);if(M!=null&&g(s,["responseJsonSchema"],M),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=m(e,["safetySettings"]);if(t!==void 0&&G!=null){let V=G;Array.isArray(V)&&(V=V.map(Ee=>p4(Ee))),g(t,["safetySettings"],V)}const q=m(e,["tools"]);if(t!==void 0&&q!=null){let V=Jl(q);Array.isArray(V)&&(V=V.map(Ee=>T4(Yl(Ee)))),g(t,["tools"],V)}const X=m(e,["toolConfig"]);if(t!==void 0&&X!=null&&g(t,["toolConfig"],_4(X)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=m(e,["cachedContent"]);t!==void 0&&J!=null&&g(t,["cachedContent"],ja(n,J));const D=m(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const A=m(e,["mediaResolution"]);A!=null&&g(s,["mediaResolution"],A);const I=m(e,["speechConfig"]);if(I!=null&&g(s,["speechConfig"],rg(I)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=m(e,["thinkingConfig"]);P!=null&&g(s,["thinkingConfig"],P);const L=m(e,["imageConfig"]);L!=null&&g(s,["imageConfig"],XM(L));const z=m(e,["enableEnhancedCivicAnswers"]);return z!=null&&g(s,["enableEnhancedCivicAnswers"],z),s}function NM(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],ns(a));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const b=m(e,["stopSequences"]);b!=null&&g(s,["stopSequences"],b);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const R=m(e,["frequencyPenalty"]);R!=null&&g(s,["frequencyPenalty"],R);const k=m(e,["seed"]);k!=null&&g(s,["seed"],k);const C=m(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const U=m(e,["responseSchema"]);U!=null&&g(s,["responseSchema"],ag(U));const M=m(e,["responseJsonSchema"]);M!=null&&g(s,["responseJsonSchema"],M);const G=m(e,["routingConfig"]);G!=null&&g(s,["routingConfig"],G);const q=m(e,["modelSelectionConfig"]);q!=null&&g(s,["modelConfig"],q);const X=m(e,["safetySettings"]);if(t!==void 0&&X!=null){let Y=X;Array.isArray(Y)&&(Y=Y.map(le=>le)),g(t,["safetySettings"],Y)}const J=m(e,["tools"]);if(t!==void 0&&J!=null){let Y=Jl(J);Array.isArray(Y)&&(Y=Y.map(le=>o1(Yl(le)))),g(t,["tools"],Y)}const D=m(e,["toolConfig"]);t!==void 0&&D!=null&&g(t,["toolConfig"],D);const A=m(e,["labels"]);t!==void 0&&A!=null&&g(t,["labels"],A);const I=m(e,["cachedContent"]);t!==void 0&&I!=null&&g(t,["cachedContent"],ja(n,I));const P=m(e,["responseModalities"]);P!=null&&g(s,["responseModalities"],P);const L=m(e,["mediaResolution"]);L!=null&&g(s,["mediaResolution"],L);const z=m(e,["speechConfig"]);z!=null&&g(s,["speechConfig"],rg(z));const V=m(e,["audioTimestamp"]);V!=null&&g(s,["audioTimestamp"],V);const Ee=m(e,["thinkingConfig"]);Ee!=null&&g(s,["thinkingConfig"],Ee);const De=m(e,["imageConfig"]);if(De!=null&&g(s,["imageConfig"],ZM(De)),m(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function yT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>rf(h))),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&g(t,["generationConfig"],wM(n,l,t)),t}function bT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["contents"]);if(a!=null){let u=ai(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&g(t,["generationConfig"],NM(n,l,t)),t}function vT(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>YR(f))),g(e,["candidates"],p)}const a=m(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=m(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=m(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=m(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function _T(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(b=>b)),g(e,["candidates"],f)}const a=m(n,["createTime"]);a!=null&&g(e,["createTime"],a);const l=m(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=m(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=m(n,["responseId"]);h!=null&&g(e,["responseId"],h);const p=m(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function AM(n,e){const t={};if(m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=m(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=m(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=m(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=m(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const p=m(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const f=m(n,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);const b=m(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const _=m(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=m(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),m(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=m(n,["imageSize"]);if(e!==void 0&&E!=null&&g(e,["parameters","sampleImageSize"],E),m(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function kM(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=m(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=m(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const f=m(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const _=m(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=m(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=m(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const R=m(n,["outputMimeType"]);e!==void 0&&R!=null&&g(e,["parameters","outputOptions","mimeType"],R);const k=m(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const C=m(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const U=m(n,["labels"]);e!==void 0&&U!=null&&g(e,["labels"],U);const M=m(n,["imageSize"]);e!==void 0&&M!=null&&g(e,["parameters","sampleImageSize"],M);const G=m(n,["enhancePrompt"]);return e!==void 0&&G!=null&&g(e,["parameters","enhancePrompt"],G),t}function CM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["config"]);return l!=null&&AM(l,t),t}function IM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["config"]);return l!=null&&kM(l,t),t}function RM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>FM(u))),g(e,["generatedImages"],l)}const a=m(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],a1(a)),e}function MM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>of(u))),g(e,["generatedImages"],l)}const a=m(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],r1(a)),e}function DM(n,e){const t={},s=m(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=m(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=m(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=m(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),m(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=m(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const f=m(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&g(e,["parameters","enhancePrompt"],f),m(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=m(n,["lastFrame"]);e!==void 0&&b!=null&&g(e,["instances[0]","lastFrame"],lf(b));const _=m(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>j4(E))),g(e,["instances[0]","referenceImages"],T)}if(m(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function PM(n,e){const t={},s=m(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=m(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=m(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=m(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=m(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const f=m(n,["resolution"]);e!==void 0&&f!=null&&g(e,["parameters","resolution"],f);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const _=m(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=m(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const E=m(n,["enhancePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","enhancePrompt"],E);const R=m(n,["generateAudio"]);e!==void 0&&R!=null&&g(e,["parameters","generateAudio"],R);const k=m(n,["lastFrame"]);e!==void 0&&k!=null&&g(e,["instances[0]","lastFrame"],Ci(k));const C=m(n,["referenceImages"]);if(e!==void 0&&C!=null){let G=C;Array.isArray(G)&&(G=G.map(q=>L4(q))),g(e,["instances[0]","referenceImages"],G)}const U=m(n,["mask"]);e!==void 0&&U!=null&&g(e,["instances[0]","mask"],P4(U));const M=m(n,["compressionQuality"]);return e!==void 0&&M!=null&&g(e,["parameters","compressionQuality"],M),t}function jM(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],VM(u)),e}function LM(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],BM(u)),e}function UM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["image"]);l!=null&&g(t,["instances[0]","image"],lf(l));const u=m(e,["video"]);u!=null&&g(t,["instances[0]","video"],l1(u));const h=m(e,["source"]);h!=null&&GM(h,t);const p=m(e,["config"]);return p!=null&&DM(p,t),t}function OM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["image"]);l!=null&&g(t,["instances[0]","image"],Ci(l));const u=m(e,["video"]);u!=null&&g(t,["instances[0]","video"],c1(u));const h=m(e,["source"]);h!=null&&zM(h,t);const p=m(e,["config"]);return p!=null&&PM(p,t),t}function VM(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>qM(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function BM(n){const e={},t=m(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>KM(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function GM(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],lf(a));const l=m(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],l1(l)),t}function zM(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Ci(a));const l=m(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],c1(l)),t}function FM(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["image"],e4(t));const s=m(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=m(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],a1(a)),e}function of(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["image"],i1(t));const s=m(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=m(n,["_self"]);a!=null&&g(e,["safetyAttributes"],r1(a));const l=m(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function HM(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["mask"],i1(t));const s=m(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function qM(n){const e={},t=m(n,["video"]);return t!=null&&g(e,["video"],M4(t)),e}function KM(n){const e={},t=m(n,["_self"]);return t!=null&&g(e,["video"],D4(t)),e}function $M(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=m(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=m(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=m(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=m(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=m(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=m(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const f=m(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const b=m(n,["mediaResolution"]);b!=null&&g(e,["mediaResolution"],b);const _=m(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=m(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=m(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const R=m(n,["responseModalities"]);R!=null&&g(e,["responseModalities"],R);const k=m(n,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const C=m(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const U=m(n,["seed"]);U!=null&&g(e,["seed"],U);const M=m(n,["speechConfig"]);M!=null&&g(e,["speechConfig"],M);const G=m(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const q=m(n,["temperature"]);q!=null&&g(e,["temperature"],q);const X=m(n,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const J=m(n,["topK"]);J!=null&&g(e,["topK"],J);const D=m(n,["topP"]);if(D!=null&&g(e,["topP"],D),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function JM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],Rt(n,s)),t}function QM(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function WM(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function XM(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ZM(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=m(n,["personGeneration"]);a!=null&&g(e,["personGeneration"],a);const l=m(n,["outputMimeType"]);l!=null&&g(e,["imageOutputOptions","mimeType"],l);const u=m(n,["outputCompressionQuality"]);return u!=null&&g(e,["imageOutputOptions","compressionQuality"],u),e}function e4(n){const e={},t=m(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],jr(t));const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function i1(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function lf(n){const e={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=m(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],jr(t));const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ci(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function t4(n,e,t){const s={},a=m(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=m(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],WE(n,h)),s}function n4(n,e,t){const s={},a=m(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=m(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],WE(n,h)),s}function s4(n,e){const t={},s=m(e,["config"]);return s!=null&&t4(n,s,t),t}function i4(n,e){const t={},s=m(e,["config"]);return s!=null&&n4(n,s,t),t}function a4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["_self"]);if(a!=null){let l=XE(a);Array.isArray(l)&&(l=l.map(u=>fp(u))),g(e,["models"],l)}return e}function r4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["_self"]);if(a!=null){let l=XE(a);Array.isArray(l)&&(l=l.map(u=>mp(u))),g(e,["models"],l)}return e}function o4(n){const e={},t=m(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=m(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=m(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function fp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);a!=null&&g(e,["description"],a);const l=m(n,["version"]);l!=null&&g(e,["version"],l);const u=m(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],S4(u));const h=m(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const p=m(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const f=m(n,["supportedGenerationMethods"]);f!=null&&g(e,["supportedActions"],f);const b=m(n,["temperature"]);b!=null&&g(e,["temperature"],b);const _=m(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=m(n,["topP"]);T!=null&&g(e,["topP"],T);const E=m(n,["topK"]);E!=null&&g(e,["topK"],E);const R=m(n,["thinking"]);return R!=null&&g(e,["thinking"],R),e}function mp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);a!=null&&g(e,["description"],a);const l=m(n,["versionId"]);l!=null&&g(e,["version"],l);const u=m(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>vM(T))),g(e,["endpoints"],_)}const h=m(n,["labels"]);h!=null&&g(e,["labels"],h);const p=m(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],E4(p));const f=m(n,["defaultCheckpointId"]);f!=null&&g(e,["defaultCheckpointId"],f);const b=m(n,["checkpoints"]);if(b!=null){let _=b;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function l4(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],_M(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],TM(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],$R(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function c4(n){const e={},t=m(n,["productImage"]);return t!=null&&g(e,["image"],Ci(t)),e}function u4(n,e){const t={},s=m(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=m(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=m(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=m(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const p=m(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const f=m(n,["addWatermark"]);e!==void 0&&f!=null&&g(e,["parameters","addWatermark"],f);const b=m(n,["outputMimeType"]);e!==void 0&&b!=null&&g(e,["parameters","outputOptions","mimeType"],b);const _=m(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=m(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const E=m(n,["labels"]);return e!==void 0&&E!=null&&g(e,["labels"],E),t}function d4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["source"]);a!=null&&f4(a,t);const l=m(e,["config"]);return l!=null&&u4(l,t),t}function h4(n){const e={},t=m(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>of(a))),g(e,["generatedImages"],s)}return e}function f4(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Ci(a));const l=m(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>c4(h))),g(e,["instances[0]","productImages"],u)}return t}function m4(n){const e={},t=m(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Ci(t));const s=m(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=m(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=m(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],o4(l));const u=m(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],eM(u));const h=m(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const p=m(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function a1(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=m(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=m(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function r1(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=m(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=m(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function p4(n){const e={},t=m(n,["category"]);if(t!=null&&g(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function g4(n){const e={},t=m(n,["image"]);return t!=null&&g(e,["image"],Ci(t)),e}function x4(n,e){const t={},s=m(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=m(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=m(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=m(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=m(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const p=m(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function y4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["source"]);a!=null&&v4(a,t);const l=m(e,["config"]);return l!=null&&x4(l,t),t}function b4(n){const e={},t=m(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>HM(a))),g(e,["generatedMasks"],s)}return e}function v4(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Ci(a));const l=m(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],g4(l)),t}function _4(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],SM(s)),e}function T4(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],QM(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],WM(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function o1(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>EM(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const b=m(n,["urlContext"]);return b!=null&&g(e,["urlContext"],b),e}function S4(n){const e={},t=m(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=m(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=m(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function E4(n){const e={},t=m(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=m(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=m(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function w4(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function N4(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function A4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","name"],Rt(n,s));const a=m(e,["config"]);return a!=null&&w4(a,t),t}function k4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["config"]);return a!=null&&N4(a,t),t}function C4(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=m(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=m(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=m(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const p=m(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const f=m(n,["enhanceInputImage"]);e!==void 0&&f!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],f);const b=m(n,["imagePreservationFactor"]);e!==void 0&&b!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const _=m(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=m(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const E=m(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function I4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],Rt(n,s));const a=m(e,["image"]);a!=null&&g(t,["instances[0]","image"],Ci(a));const l=m(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=m(e,["config"]);return u!=null&&C4(u,t),t}function R4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>of(l))),g(e,["generatedImages"],a)}return e}function M4(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],jr(s));const a=m(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function D4(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function P4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["_self"],Ci(t));const s=m(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function j4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["image"],lf(t));const s=m(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function L4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["image"],Ci(t));const s=m(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function l1(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function c1(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U4(n,e){const t={},s=m(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function O4(n){const e={},t=m(n,["config"]);return t!=null&&U4(t,e),e}function V4(n,e){const t={},s=m(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function B4(n){const e={},t=m(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=m(n,["config"]);return s!=null&&V4(s,e),e}function G4(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function z4(n,e){const t={},s=m(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=m(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function F4(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],q4(u)),e}function H4(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=m(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=m(n,["config"]);return a!=null&&z4(a,e),e}function q4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function K4(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function $4(n){const e={},t=m(n,["config"]);return t!=null&&K4(t,e),e}function Y4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function u1(n,e){const t={},s=m(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=m(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=m(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>p)),g(e,["customMetadata"],h)}const u=m(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function J4(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=m(n,["config"]);return s!=null&&u1(s,e),e}function Q4(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W4="Content-Type",X4="X-Server-Timeout",Z4="User-Agent",pp="x-goog-api-client",e5="1.35.0",t5=`google-genai-sdk/${e5}`,n5="v1beta1",s5="v1beta";class i5{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:n5,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:s5,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&a5(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await TT(a),new up(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await TT(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return wi(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";const h="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:b}=yield at(a.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(b,{stream:!0});try{const R=JSON.parse(_);if("error"in R){const k=JSON.parse(JSON.stringify(R.error)),C=k.status,U=k.code,M=`got status: ${C}. ${JSON.stringify(R)}`;if(U>=400&&U<600)throw new af({message:M,status:U})}}catch(R){if(R.name==="ApiError")throw R}u+=_;let T=-1,E=0;for(;;){T=-1,E=0;for(const C of p){const U=u.indexOf(C);U!==-1&&(T===-1||U<T)&&(T=U,E=C.length)}if(T===-1)break;const R=u.substring(0,T);u=u.substring(T+E);const k=R.trim();if(k.startsWith(h)){const C=k.substring(h.length).trim();try{const U=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new up(U))}catch(U){throw new Error(`exception parsing stream chunk ${C}. ${U}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=t5+" "+this.clientOptions.userAgentExtra;return e[Z4]=t,e[pp]=t,e[W4]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(X4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const p={file:a},f=this.getFileName(e),b=Re("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(b,a.sizeBytes,a.mimeType,f,p,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,b=this.getFileName(t),_={};s!=null&&u1(s,_);const T=await this.fetchUploadUrl(f,h,p,b,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,u){var h;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const f=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const b=(h=f==null?void 0:f.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(b===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return b}}async function TT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new af({message:a,status:t}):new Error(a)}}function a5(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const f=u[p],b=h[p];f&&typeof f=="object"&&!Array.isArray(f)&&b&&typeof b=="object"&&!Array.isArray(b)?h[p]=s(b,f):(b&&f&&typeof b!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof b}, New type: ${typeof f}. Overwriting.`),h[p]=f)}return h}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r5="mcp_used/unknown";let o5=!1;function d1(n){for(const e of n)if(l5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return o5}function h1(n){var e;const t=(e=n[pp])!==null&&e!==void 0?e:"";n[pp]=(t+` ${r5}`).trimStart()}function l5(n){return n!==null&&typeof n=="object"&&n instanceof lg}function c5(n){return wi(this,arguments,function*(t,s=100){let a,l=0;for(;l<s;){const u=yield at(t.listTools({cursor:a}));for(const h of u.tools)yield yield at(h),l++;if(!u.nextCursor)break;a=u.nextCursor}})}class lg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new lg(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const b of this.mcpClients)try{for(var h=!0,p=(t=void 0,Ni(c5(b))),f;f=await p.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const _=a;u.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=b}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),GC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function u5(n,e,t){const s=new DC;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class d5{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=m5(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let f=()=>{};const b=new Promise(G=>{f=G}),_=e.callbacks,T=function(){f({})},E=this.apiClient,R={onopen:T,onmessage:G=>{u5(E,_.onmessage,G)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(G){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(G){}},k=this.webSocketFactory.create(p,f5(u),R);k.connect(),await b;const M={setup:{model:Rt(this.apiClient,e.model)}};return k.send(JSON.stringify(M)),new h5(k,this.apiClient)}}class h5{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=OR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=UR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(kl.PLAY)}pause(){this.sendPlaybackControl(kl.PAUSE)}stop(){this.sendPlaybackControl(kl.STOP)}resetContext(){this.sendPlaybackControl(kl.RESET_CONTEXT)}close(){this.conn.close()}}function f5(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function m5(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function g5(n,e,t){const s=new MC;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(n.isVertexAI()){const u=GR(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class x5{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new d5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let b;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&d1(e.config.tools)&&h1(_);const T=_5(_);if(this.apiClient.isVertexAI())b=`${p}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,b);else{const I=this.apiClient.getApiKey();let P="BidiGenerateContent",L="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",L="access_token"),b=`${p}/ws/google.ai.generativelanguage.${f}.GenerativeService.${P}?${L}=${I}`}let E=()=>{};const R=new Promise(I=>{E=I}),k=e.callbacks,C=function(){var I;(I=k==null?void 0:k.onopen)===null||I===void 0||I.call(k),E({})},U=this.apiClient,M={onopen:C,onmessage:I=>{g5(U,k.onmessage,I)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(I){},onclose:(s=k==null?void 0:k.onclose)!==null&&s!==void 0?s:function(I){}},G=this.webSocketFactory.create(b,v5(T),M);G.connect(),await R;let q=Rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const I=this.apiClient.getProject(),P=this.apiClient.getLocation();q=`projects/${I}/locations/${P}/`+q}let X={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[wh.AUDIO]}:e.config.responseModalities=[wh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],D=[];for(const I of J)if(this.isCallableTool(I)){const P=I;D.push(await P.tool())}else D.push(I);D.length>0&&(e.config.tools=D);const A={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=LR(this.apiClient,A):X=jR(this.apiClient,A),delete X.config,G.send(JSON.stringify(X)),new b5(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const y5={turnComplete:!0};class b5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ai(t.turns),e.isVertexAI()||(s=s.map(a=>rf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(p5)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},y5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:BR(e)}:t={realtimeInput:VR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function v5(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function _5(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ST=10;function ET(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Rl(u)){a=!0;break}if(!a)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Rl(n){return"callTool"in n&&typeof n.callTool=="function"}function T5(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>Rl(a)))!==null&&s!==void 0?s:!1}function wT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(Rl(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function NT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S5 extends Pa{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,u,h;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!T5(t)||ET(t.config))return await this.generateContentInternal(p);const f=wT(t);if(f.length>0){const k=f.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let b,_;const T=ai(p.contents),E=(l=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:ST;let R=0;for(;R<E&&(b=await this.generateContentInternal(p),!(!b.functionCalls||b.functionCalls.length===0));){const k=b.candidates[0].content,C=[];for(const U of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Rl(U)){const G=await U.callTool(b.functionCalls);C.push(...G)}R++,_={role:"user",parts:C},p.contents=ai(p.contents),p.contents.push(k),p.contents.push(_),NT(p.config)&&(T.push(k),T.push(_))}return NT(p.config)&&(b.automaticFunctionCallingHistory=T),b},this.generateContentStream=async t=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),ET(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=wT(t);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,b=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(f&&!b)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Mo(Na.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,u,h,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(h=t.source)===null||h===void 0?void 0:h.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>Rl(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&d1(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let f=Object.assign({},p);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),h1(f),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return h}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Rl(u)){const h=u,p=await h.tool();for(const f of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,h)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:ST;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return(function(f,b,_){return wi(this,arguments,function*(){for(var T,E,R,k,C,U;h<l;){u&&(h++,u=!1);const X=yield at(f.processParamsMaybeAddMcpUsage(_)),J=yield at(f.generateContentStreamInternal(X)),D=[],A=[];try{for(var M=!0,G=(E=void 0,Ni(J)),q;q=yield at(G.next()),T=q.done,!T;M=!0){k=q.value,M=!1;const I=k;if(yield yield at(I),I.candidates&&(!((C=I.candidates[0])===null||C===void 0)&&C.content)){A.push(I.candidates[0].content);for(const P of(U=I.candidates[0].content.parts)!==null&&U!==void 0?U:[])if(h<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(b.has(P.functionCall.name)){const L=yield at(b.get(P.functionCall.name).callTool([P.functionCall]));D.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(I){E={error:I}}finally{try{!M&&!T&&(R=G.return)&&(yield at(R.call(G)))}finally{if(E)throw E.error}}if(D.length>0){u=!0;const I=new Zc;I.candidates=[{content:{role:"user",parts:D}}],yield yield at(I);const P=[];P.push(...A),P.push({role:"user",parts:D});const L=ai(_.contents).concat(P);_.contents=L}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=bT(this.apiClient,e);return h=Re("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=_T(b),T=new Zc;return Object.assign(T,_),T})}else{const f=yT(this.apiClient,e);return h=Re("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=vT(b),T=new Zc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=bT(this.apiClient,e);return h=Re("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return wi(this,arguments,function*(){var T,E,R,k;try{for(var C=!0,U=Ni(_),M;M=yield at(U.next()),T=M.done,!T;C=!0){k=M.value,C=!1;const G=k,q=_T(yield at(G.json()));q.sdkHttpResponse={headers:G.headers};const X=new Zc;Object.assign(X,q),yield yield at(X)}}catch(G){E={error:G}}finally{try{!C&&!T&&(R=U.return)&&(yield at(R.call(U)))}finally{if(E)throw E.error}}})})}else{const f=yT(this.apiClient,e);return h=Re("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return wi(this,arguments,function*(){var T,E,R,k;try{for(var C=!0,U=Ni(_),M;M=yield at(U.next()),T=M.done,!T;C=!0){k=M.value,C=!1;const G=k,q=vT(yield at(G.json()));q.sdkHttpResponse={headers:G.headers};const X=new Zc;Object.assign(X,q),yield yield at(X)}}catch(G){E={error:G}}finally{try{!C&&!T&&(R=U.return)&&(yield at(R.call(U)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=xM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=bM(b),T=new tT;return Object.assign(T,_),T})}else{const f=gM(this.apiClient,e);return h=Re("{model}:batchEmbedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=yM(b),T=new tT;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=IM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=MM(b),T=new nT;return Object.assign(T,_),T})}else{const f=CM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=RM(b),T=new nT;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=hM(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=fM(p),b=new _C;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=I4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=R4(p),b=new TC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=d4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=h4(p),b=new SC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=y4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=b4(p),b=new EC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=JM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>mp(b))}else{const f=YM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>fp(b))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=i4(this.apiClient,e);return h=Re("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=r4(b),T=new sT;return Object.assign(T,_),T})}else{const f=s4(this.apiClient,e);return h=Re("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=a4(b),T=new sT;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=k4(this.apiClient,e);return h=Re("{model}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>mp(b))}else{const f=A4(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>fp(b))}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=lM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=uM(b),T=new iT;return Object.assign(T,_),T})}else{const f=oM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=cM(b),T=new iT;return Object.assign(T,_),T})}}async countTokens(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=iM(this.apiClient,e);return h=Re("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=rM(b),T=new aT;return Object.assign(T,_),T})}else{const f=sM(this.apiClient,e);return h=Re("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=aM(b),T=new aT;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=QR(this.apiClient,e);return l=Re("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=WR(p),b=new wC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=OM(this.apiClient,e);return h=Re("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>{const _=LM(b),T=new Nh;return Object.assign(T,_),T})}else{const f=UM(this.apiClient,e);return h=Re("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>{const _=jM(b),T=new Nh;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E5 extends Pa{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=pC(e);return h=Re("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u}else{const f=mC(e);return h=Re("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=oC(e);return l=Re("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w5(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function N5(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>j5(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function A5(n,e,t){const s={},a=m(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const l=m(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=m(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=m(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],P5(n,h));const p=m(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function k5(n,e){const t={},s=m(e,["config"]);return s!=null&&g(t,["config"],A5(n,s,t)),t}function C5(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function I5(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function R5(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function M5(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function D5(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const b=m(n,["seed"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","seed"],b);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],og(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const R=m(n,["systemInstruction"]);e!==void 0&&R!=null&&g(e,["setup","systemInstruction"],N5(ns(R)));const k=m(n,["tools"]);if(e!==void 0&&k!=null){let J=Jl(k);Array.isArray(J)&&(J=J.map(D=>U5(Yl(D)))),g(e,["setup","tools"],J)}const C=m(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],L5(C));const U=m(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","inputAudioTranscription"],U);const M=m(n,["outputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","outputAudioTranscription"],M);const G=m(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const q=m(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=m(n,["proactivity"]);if(e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function P5(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],Rt(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],D5(a,t)),t}function j5(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],C5(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],I5(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],w5(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function L5(n){const e={},t=m(n,["handle"]);if(t!=null&&g(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function U5(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],R5(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],M5(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O5(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function V5(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const l=O5(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(f=>u.includes(f)?`generationConfig.${f}`:f));const p=[];l&&p.push(l),h.length>0&&p.push(...h),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class B5 extends Pa{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=k5(this.apiClient,e);l=Re("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=V5(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G5(n,e){const t={},s=m(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function z5(n){const e={},t=m(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=m(n,["config"]);return s!=null&&G5(s,e),e}function F5(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function H5(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function q5(n){const e={},t=m(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=m(n,["config"]);return s!=null&&H5(s,e),e}function K5(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $5 extends Pa{constructor(e){super(),this.apiClient=e,this.list=async t=>new Mo(Na.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=F5(e);return l=Re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=z5(e);a=Re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=q5(e);return l=Re("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=K5(p),b=new NC;return Object.assign(b,f),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y5 extends Pa{constructor(e,t=new $5(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Mo(Na.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=O4(e);return l=Re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=G4(e);return l=Re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=B4(e);a=Re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$4(e);return l=Re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=Y4(p),b=new AC;return Object.assign(b,f),b})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=J4(e);return l=Re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=Q4(p),b=new kC;return Object.assign(b,f),b})}}async importFile(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=H4(e);return l=Re("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=F4(p),b=new ng;return Object.assign(b,f),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let f1=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return f1=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const J5=()=>f1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const xp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class li extends Error{}class us extends li{constructor(e,t,s,a){super(`${us.makeMessage(e,t,s)}`),this.status=e,this.headers=a,this.error=t}static makeMessage(e,t,s){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,s,a){if(!e||!a)return new cf({message:s,cause:xp(t)});const l=t;return e===400?new p1(e,l,s,a):e===401?new g1(e,l,s,a):e===403?new x1(e,l,s,a):e===404?new y1(e,l,s,a):e===409?new b1(e,l,s,a):e===422?new v1(e,l,s,a):e===429?new _1(e,l,s,a):e>=500?new T1(e,l,s,a):new us(e,l,s,a)}}class yp extends us{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class cf extends us{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class m1 extends cf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class p1 extends us{}class g1 extends us{}class x1 extends us{}class y1 extends us{}class b1 extends us{}class v1 extends us{}class _1 extends us{}class T1 extends us{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q5=/^[a-z][a-z0-9+.-]*:/i,W5=n=>Q5.test(n);let bp=n=>(bp=Array.isArray,bp(n));const X5=bp;let Z5=X5;const AT=Z5;function eD(n){if(!n)return!0;for(const e in n)return!1;return!0}function tD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const nD=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new li(`${n} must be an integer`);if(e<0)throw new li(`${n} must be a positive integer`);return e},sD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iD=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const rD=()=>{var n,e,t,s,a;const l=aD();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":CT(Deno.build.os),"X-Stainless-Arch":kT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":CT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":kT((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const u=oD();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const kT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",CT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Wd;const lD=()=>Wd??(Wd=rD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function S1(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function uD(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return S1({start(){},async pull(t){const{done:s,value:a}=await e.next();s?t.close():t.enqueue(a)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function E1(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function dD(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w1=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function F0(n,e,t){return w1(),new File(n,e??"unknown_file",t)}function fD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const mD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N1=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",pD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&N1(n),gD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function xD(n,e,t){if(w1(),n=await n,pD(n))return n instanceof File?n:F0([await n.arrayBuffer()],n.name);if(gD(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),F0(await vp(a),e,t)}const s=await vp(n);if(e||(e=fD(n)),!(t!=null&&t.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(t=Object.assign(Object.assign({},t),{type:a}))}return F0(s,e,t)}async function vp(n){var e,t,s,a,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(N1(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(mD(n))try{for(var h=!0,p=Ni(n),f;f=await p.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const b=a;u.push(...await vp(b))}}catch(b){t={error:b}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}else{const b=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${b?`; constructor: ${b}`:""}${yD(n)}`)}return u}function yD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A1{constructor(e){this._client=e}}A1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k1(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const IT=Object.freeze(Object.create(null)),bD=(n=k1)=>(function(t,...s){if(t.length===1)return t[0];let a=!1;const l=[],u=t.reduce((b,_,T)=>{var E,R,k;/[?#]/.test(_)&&(a=!0);const C=s[T];let U=(a?encodeURIComponent:n)(""+C);return T!==s.length&&(C==null||typeof C=="object"&&C.toString===((k=Object.getPrototypeOf((R=Object.getPrototypeOf((E=C.hasOwnProperty)!==null&&E!==void 0?E:IT))!==null&&R!==void 0?R:IT))===null||k===void 0?void 0:k.toString))&&(U=C+"",l.push({start:b.length+_.length,length:U.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),b+_+(T===s.length?"":U)},""),h=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=p.exec(h))!==null;)l.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(l.sort((b,_)=>b.start-_.start),l.length>0){let b=0;const _=l.reduce((T,E)=>{const R=" ".repeat(E.start-b),k="^".repeat(E.length);return b=E.start+E.length,T+R+k},"");throw new li(`Path parameters result in path with invalid segments:
${l.map(T=>T.error).join(`
`)}
${u}
${_}`)}return u}),Xd=bD(k1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C1 extends A1{create(e,t){var s;const{api_version:a=this._client.apiVersion}=e,l=kh(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new li("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new li("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Xd`/${a}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.delete(Xd`/${a}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.post(Xd`/${a}/interactions/${e}/cancel`,s)}get(e,t={},s){var a;const l=t??{},{api_version:u=this._client.apiVersion}=l,h=kh(l,["api_version"]);return this._client.get(Xd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=t==null?void 0:t.stream)!==null&&a!==void 0?a:!1}))}}C1._key=Object.freeze(["interactions"]);class I1 extends C1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vD(n){let e=0;for(const a of n)e+=a.length;const t=new Uint8Array(e);let s=0;for(const a of n)t.set(a,s),s+=a.length;return t}let Zd;function cg(n){let e;return(Zd??(e=new globalThis.TextEncoder,Zd=e.encode.bind(e)))(n)}let eh;function RT(n){let e;return(eh??(e=new globalThis.TextDecoder,eh=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?cg(e):e;this.buffer=vD([this.buffer,t]);const s=[];let a;for(;(a=_D(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(RT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,u=RT(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}uf.NEWLINE_CHARS=new Set([`
`,"\r"]);uf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _D(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function TD(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ch={off:0,error:200,warn:300,info:400,debug:500},MT=(n,e,t)=>{if(n){if(tD(Ch,n))return n;ls(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ch))}`)}};function tu(){}function th(n,e,t){return!e||Ch[n]>Ch[t]?tu:e[n].bind(e)}const SD={error:tu,warn:tu,info:tu,debug:tu};let DT=new WeakMap;function ls(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return SD;const a=DT.get(t);if(a&&a[0]===s)return a[1];const l={error:th("error",t,s),warn:th("warn",t,s),info:th("info",t,s),debug:th("debug",t,s)};return DT.set(t,[s,l]),l}const po=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cl{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let a=!1;const l=s?ls(s):console;function u(){return wi(this,arguments,function*(){var p,f,b,_;if(a)throw new li("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,R=Ni(ED(e,t)),k;k=yield at(R.next()),p=k.done,!p;E=!0){_=k.value,E=!1;const C=_;if(!T)if(C.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield at(JSON.parse(C.data))}catch(U){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),U}}}catch(C){f={error:C}}finally{try{!E&&!p&&(b=R.return)&&(yield at(b.call(R)))}finally{if(f)throw f.error}}T=!0}catch(C){if(gp(C))return yield at(void 0);throw C}finally{T||t.abort()}})}return new Cl(u,t,s)}static fromReadableStream(e,t,s){let a=!1;function l(){return wi(this,arguments,function*(){var p,f,b,_;const T=new uf,E=E1(e);try{for(var R=!0,k=Ni(E),C;C=yield at(k.next()),p=C.done,!p;R=!0){_=C.value,R=!1;const U=_;for(const M of T.decode(U))yield yield at(M)}}catch(U){f={error:U}}finally{try{!R&&!p&&(b=k.return)&&(yield at(b.call(k)))}finally{if(f)throw f.error}}for(const U of T.flush())yield yield at(U)})}function u(){return wi(this,arguments,function*(){var p,f,b,_;if(a)throw new li("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,R=Ni(l()),k;k=yield at(R.next()),p=k.done,!p;E=!0){_=k.value,E=!1;const C=_;T||C&&(yield yield at(JSON.parse(C)))}}catch(C){f={error:C}}finally{try{!E&&!p&&(b=R.return)&&(yield at(b.call(R)))}finally{if(f)throw f.error}}T=!0}catch(C){if(gp(C))return yield at(void 0);throw C}finally{T||t.abort()}})}return new Cl(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),t.push(u)}return l.shift()}});return[new Cl(()=>a(e),this.controller,this.client),new Cl(()=>a(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return S1({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await t.next();if(l)return s.close();const u=cg(JSON.stringify(a)+`
`);s.enqueue(u)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function ED(n,e){return wi(this,arguments,function*(){var s,a,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new li("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new li("Attempted to iterate over a response with no body");const h=new ND,p=new uf,f=E1(n.body);try{for(var b=!0,_=Ni(wD(f)),T;T=yield at(_.next()),s=T.done,!s;b=!0){u=T.value,b=!1;const E=u;for(const R of p.decode(E)){const k=h.decode(R);k&&(yield yield at(k))}}}catch(E){a={error:E}}finally{try{!b&&!s&&(l=_.return)&&(yield at(l.call(_)))}finally{if(a)throw a.error}}for(const E of p.flush()){const R=h.decode(E);R&&(yield yield at(R))}})}function wD(n){return wi(this,arguments,function*(){var t,s,a,l;let u=new Uint8Array;try{for(var h=!0,p=Ni(n),f;f=yield at(p.next()),t=f.done,!t;h=!0){l=f.value,h=!1;const b=l;if(b==null)continue;const _=b instanceof ArrayBuffer?new Uint8Array(b):typeof b=="string"?cg(b):b;let T=new Uint8Array(u.length+_.length);T.set(u),T.set(_,u.length),u=T;let E;for(;(E=TD(u))!==-1;)yield yield at(u.slice(0,E)),u=u.slice(E)}}catch(b){s={error:b}}finally{try{!h&&!t&&(a=p.return)&&(yield at(a.call(p)))}finally{if(s)throw s.error}}u.length>0&&(yield yield at(u))})}class ND{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,a]=AD(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function AD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kD(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,u=await(async()=>{var h;if(e.options.stream)return ls(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Cl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),f=(h=p==null?void 0:p.split(";")[0])===null||h===void 0?void 0:h.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await t.json():await t.text()})();return ls(n).debug(`[${s}] response parsed`,po({retryOfRequestLogID:a,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ug extends Promise{constructor(e,t,s=kD){super(a=>{a(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new ug(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R1=Symbol("brand.privateNullableHeaders");function*CD(n){if(!n)return;if(R1 in n){const{values:s,nulls:a}=n;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():AT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=AT(s[1])?s[1]:[s[1]];let u=!1;for(const h of l)h!==void 0&&(e&&!u&&(u=!0,yield[a,null]),yield[a,h])}}const eu=n=>{const e=new Headers,t=new Set;for(const s of n){const a=new Set;for(const[l,u]of CD(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),u===null?(e.delete(l),t.add(h)):(e.append(l,u),t.delete(h))}}return{[R1]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H0=n=>{var e,t,s,a,l,u;if(typeof globalThis.process<"u")return(s=(t=(e=tC)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var M1;class df{constructor(e){var t,s,a,l,u,h,p,{baseURL:f=H0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:b=(t=H0("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=kh(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:b,apiVersion:_},T),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(s=E.timeout)!==null&&s!==void 0?s:df.DEFAULT_TIMEOUT,this.logger=(a=E.logger)!==null&&a!==void 0?a:console;const R="warn";this.logLevel=R,this.logLevel=(u=(l=MT(E.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:MT(H0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:R,this.fetchOptions=E.fetchOptions,this.maxRetries=(h=E.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(p=E.fetch)!==null&&p!==void 0?p:cD(),this.encoder=hD,this._options=E,this.apiKey=b,this.apiVersion=_,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=eu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return eu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return eu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new li(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sl}`}defaultIdempotencyKey(){return`stainless-node-retry-${J5()}`}makeStatusError(e,t,s,a){return us.generate(e,t,s,a)}buildURL(e,t,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=W5(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return eD(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:t},a)))}request(e,t=null){return new ug(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var a,l,u;const h=await e,p=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;t==null&&(t=p),await this.prepareOptions(h);const{req:f,url:b,timeout:_}=await this.buildRequest(h,{retryCount:p-t});await this.prepareRequest(f,{url:b,options:h});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=s===void 0?"":`, retryOf: ${s}`,R=Date.now();if(ls(this).debug(`[${T}] sending request`,po({retryOfRequestLogID:s,method:h.method,url:b,options:h,headers:f.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new yp;const k=new AbortController,C=await this.fetchWithTimeout(b,f,_,k).catch(xp),U=Date.now();if(C instanceof globalThis.Error){const G=`retrying, ${t} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new yp;const q=gp(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(t)return ls(this).info(`[${T}] connection ${q?"timed out":"failed"} - ${G}`),ls(this).debug(`[${T}] connection ${q?"timed out":"failed"} (${G})`,po({retryOfRequestLogID:s,url:b,durationMs:U-R,message:C.message})),this.retryRequest(h,t,s??T);throw ls(this).info(`[${T}] connection ${q?"timed out":"failed"} - error; no more retries left`),ls(this).debug(`[${T}] connection ${q?"timed out":"failed"} (error; no more retries left)`,po({retryOfRequestLogID:s,url:b,durationMs:U-R,message:C.message})),q?new m1:new cf({cause:C})}const M=`[${T}${E}] ${f.method} ${b} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${U-R}ms`;if(!C.ok){const G=await this.shouldRetry(C);if(t&&G){const I=`retrying, ${t} attempts remaining`;return await dD(C.body),ls(this).info(`${M} - ${I}`),ls(this).debug(`[${T}] response error (${I})`,po({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:U-R})),this.retryRequest(h,t,s??T,C.headers)}const q=G?"error; no more retries left":"error; not retryable";ls(this).info(`${M} - ${q}`);const X=await C.text().catch(I=>xp(I).message),J=sD(X),D=J?void 0:X;throw ls(this).debug(`[${T}] response error (${q})`,po({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:D,durationMs:Date.now()-R})),this.makeStatusError(C.status,J,D,C.headers)}return ls(this).info(M),ls(this).debug(`[${T}] response start`,po({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:U-R})),{response:C,options:h,controller:k,requestLogID:T,retryOfRequestLogID:s,startTime:R}}async fetchWithTimeout(e,t,s,a){const l=t||{},{signal:u,method:h}=l,p=kh(l,["signal","method"]);u&&u.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),b=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},b?{duplex:"half"}:{}),{method:"GET"}),p);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(f)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,a){var l;let u;const h=a==null?void 0:a.get("retry-after-ms");if(h){const f=parseFloat(h);Number.isNaN(f)||(u=f)}const p=a==null?void 0:a.get("retry-after");if(p&&!u){const f=parseFloat(p);Number.isNaN(f)?u=Date.parse(p)-Date.now():u=f*1e3}if(!(u&&0<=u&&u<60*1e3)){const f=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,f)}return await iD(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,a,l;const u=Object.assign({},e),{method:h,path:p,query:f,defaultBaseURL:b}=u,_=this.buildURL(p,f,b);"timeout"in u&&nD("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:E}=this.buildBody({options:u}),R=await this.buildHeaders({options:e,method:h,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:R},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=eu([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),lD()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=eu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:uD(e)}:this.encoder({body:e,headers:s})}}df.DEFAULT_TIMEOUT=6e4;class On extends df{constructor(){super(...arguments),this.interactions=new I1(this)}}M1=On;On.GeminiNextGenAPIClient=M1;On.GeminiNextGenAPIClientError=li;On.APIError=us;On.APIConnectionError=cf;On.APIConnectionTimeoutError=m1;On.APIUserAbortError=yp;On.NotFoundError=y1;On.ConflictError=b1;On.RateLimitError=_1;On.BadRequestError=p1;On.AuthenticationError=g1;On.InternalServerError=T1;On.PermissionDeniedError=x1;On.UnprocessableEntityError=v1;On.toFile=xD;On.Interactions=I1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ID(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function RD(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function MD(n,e){const t={},s=m(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function DD(n,e){const t={},s=m(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function PD(n,e,t){const s={};if(m(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=m(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),m(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=m(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=m(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),m(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=m(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const p=m(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function jD(n,e,t){const s={};let a=m(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const E=m(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec"],PT(E))}else if(a==="PREFERENCE_TUNING"){const E=m(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec"],PT(E))}const l=m(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=m(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=m(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=m(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(h==="PREFERENCE_TUNING"){const E=m(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let p=m(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=m(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="PREFERENCE_TUNING"){const E=m(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let f=m(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=m(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(f==="PREFERENCE_TUNING"){const E=m(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let b=m(t,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const E=m(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(b==="PREFERENCE_TUNING"){const E=m(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(m(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=m(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=m(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function LD(n,e){const t={},s=m(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=m(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=m(n,["trainingDataset"]);l!=null&&$D(l);const u=m(n,["config"]);return u!=null&&PD(u,t),t}function UD(n,e){const t={},s=m(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=m(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=m(n,["trainingDataset"]);l!=null&&YD(l,t,e);const u=m(n,["config"]);return u!=null&&jD(u,t,e),t}function OD(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function VD(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function BD(n,e,t){const s={},a=m(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=m(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=m(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function GD(n,e,t){const s={},a=m(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=m(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=m(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function zD(n,e){const t={},s=m(n,["config"]);return s!=null&&BD(s,t),t}function FD(n,e){const t={},s=m(n,["config"]);return s!=null&&GD(s,t),t}function HD(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=m(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>D1(h))),g(t,["tuningJobs"],u)}return t}function qD(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=m(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>_p(h))),g(t,["tuningJobs"],u)}return t}function KD(n,e){const t={},s=m(n,["name"]);s!=null&&g(t,["model"],s);const a=m(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function $D(n,e){const t={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=m(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(t,["examples","examples"],a)}return t}function YD(n,e,t){const s={};let a=m(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=m(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=m(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=m(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=m(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=m(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(m(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function D1(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["state"]);l!=null&&g(t,["state"],JE(l));const u=m(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=m(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const p=m(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const b=m(n,["description"]);b!=null&&g(t,["description"],b);const _=m(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=m(n,["_self"]);return T!=null&&g(t,["tunedModel"],KD(T)),t}function _p(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["state"]);l!=null&&g(t,["state"],JE(l));const u=m(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=m(n,["startTime"]);h!=null&&g(t,["startTime"],h);const p=m(n,["endTime"]);p!=null&&g(t,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const b=m(n,["error"]);b!=null&&g(t,["error"],b);const _=m(n,["description"]);_!=null&&g(t,["description"],_);const T=m(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const E=m(n,["tunedModel"]);E!=null&&g(t,["tunedModel"],E);const R=m(n,["preTunedModel"]);R!=null&&g(t,["preTunedModel"],R);const k=m(n,["supervisedTuningSpec"]);k!=null&&g(t,["supervisedTuningSpec"],k);const C=m(n,["preferenceOptimizationSpec"]);C!=null&&g(t,["preferenceOptimizationSpec"],C);const U=m(n,["tuningDataStats"]);U!=null&&g(t,["tuningDataStats"],U);const M=m(n,["encryptionSpec"]);M!=null&&g(t,["encryptionSpec"],M);const G=m(n,["partnerModelTuningSpec"]);G!=null&&g(t,["partnerModelTuningSpec"],G);const q=m(n,["customBaseModel"]);q!=null&&g(t,["customBaseModel"],q);const X=m(n,["experiment"]);X!=null&&g(t,["experiment"],X);const J=m(n,["labels"]);J!=null&&g(t,["labels"],J);const D=m(n,["outputUri"]);D!=null&&g(t,["outputUri"],D);const A=m(n,["pipelineJob"]);A!=null&&g(t,["pipelineJob"],A);const I=m(n,["serviceAccount"]);I!=null&&g(t,["serviceAccount"],I);const P=m(n,["tunedModelDisplayName"]);P!=null&&g(t,["tunedModelDisplayName"],P);const L=m(n,["veoTuningSpec"]);return L!=null&&g(t,["veoTuningSpec"],L),t}function JD(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=m(n,["done"]);u!=null&&g(t,["done"],u);const h=m(n,["error"]);return h!=null&&g(t,["error"],h),t}function PT(n,e){const t={},s=m(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=m(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QD extends Pa{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(Na.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:cp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=VD(e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>_p(b))}else{const f=OD(e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>D1(b))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=FD(e);return h=Re("tuningJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=qD(b),T=new rT;return Object.assign(T,_),T})}else{const f=zD(e);return h=Re("tunedModels",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=HD(b),T=new rT;return Object.assign(T,_),T})}}async cancel(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=RD(e);return h=Re("{name}:cancel",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=DD(b),T=new oT;return Object.assign(T,_),T})}else{const f=ID(e);return h=Re("{name}:cancel",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=MD(b),T=new oT;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=UD(e,e);return l=Re("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>_p(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=LD(e);return l=Re("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>JD(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const XD=1024*1024*8,ZD=3,eP=1e3,tP=2,Ih="x-goog-upload-status";async function nP(n,e,t){var s;const a=await P1(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Ih])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function sP(n,e,t){var s;const a=await P1(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Ih])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=FE(l),h=new sg;return Object.assign(h,u),h}async function P1(n,e,t){var s,a;let l=0,u=0,h=new up(new Response),p="upload";for(l=n.size;u<l;){const f=Math.min(XD,l-u),b=n.slice(u,u+f);u+f>=l&&(p+=", finalize");let _=0,T=eP;for(;_<ZD&&(h=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(f)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Ih]));)_++,await aP(T),T=T*tP;if(u+=f,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Ih])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function iP(n){return{size:n.size,type:n.type}}function aP(n){return new Promise(e=>setTimeout(e,n))}class rP{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nP(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sP(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oP{create(e,t,s){return new lP(e,t,s)}}class lP{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jT="x-goog-api-key";class cP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(jT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(jT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uP="gl-node/";class dP{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new On({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=aC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new cP(this.apiKey);this.apiClient=new i5({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:uP+"web",uploader:new rP,downloader:new WD}),this.models=new S5(this.apiClient),this.live=new x5(this.apiClient,a,new oP),this.batches=new PI(this.apiClient),this.chats=new pR(this.models,this.apiClient),this.caches=new hR(this.apiClient),this.files=new wR(this.apiClient),this.operations=new E5(this.apiClient),this.authTokens=new B5(this.apiClient),this.tunings=new QD(this.apiClient),this.fileSearchStores=new Y5(this.apiClient)}}const hP=new dP({apiKey:"AIzaSyBm_oApA7D89kWU7QLCTfoeHn9WaZgHJpI"});function LT(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const j1={type:Ce.OBJECT,properties:{id:{type:Ce.STRING},type:{type:Ce.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:Ce.STRING},options:{type:Ce.ARRAY,items:{type:Ce.STRING}},correctAnswer:{type:Ce.STRING},tkpPoints:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{option:{type:Ce.STRING},points:{type:Ce.INTEGER}}}},explanation:{type:Ce.STRING},shortcut:{type:Ce.STRING},metadata:{type:Ce.OBJECT,properties:{difficulty:{type:Ce.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:Ce.INTEGER},topic:{type:Ce.STRING},subtest:{type:Ce.STRING},trapPattern:{type:Ce.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},fP={type:Ce.OBJECT,properties:{questions:{type:Ce.ARRAY,items:j1}},required:["questions"]};async function ea(n,e,t){const s="gemini-3-flash-preview",a={temperature:.9,topP:.95,topK:40};e&&(a.responseMimeType="application/json",a.responseSchema=e);const l=[];t&&l.push({inlineData:{mimeType:"application/pdf",data:t}}),l.push({text:n});try{const h=(await hP.models.generateContent({model:s,contents:{role:"user",parts:l},config:a})).text;if(!h)throw new Error("Empty response from AI");if(e)try{let p=h.trim();return p.startsWith("```json")?p=p.replace(/^```json\n?/,"").replace(/\n?```$/,""):p.startsWith("```")&&(p=p.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(p)}catch(p){console.error("JSON Parse Error",p);const f=h.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return f?JSON.parse(f[0]):h}return h}catch(u){throw console.error("Gemini API Error:",u),u}}function mP(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0&&(n.options.includes("Sangat Setuju")||n.options.includes("Sangat Tidak Setuju"))||(n.options=LT(n.options))),n}const hn=async(n,e,t,s=5,a=[],l,u,h)=>{let p="",f;const b=`
  IMPORTANT VISUAL RULES:
  - ONLY use Unicode Emojis/Shapes if the question is SPATIAL, FIGURAL, or LOGIC PATTERN (TPA/Psikotes).
  - For 3D Spatial / Block Counting, use: , , , .
  - For 2D Patterns/Series, use: , , , , , , , , , , , , .
  - DO NOT use emojis for standard text questions (History, Law, TKP, etc). Keep them professional.
  `,_=`
  CRITICAL MATH & FORMATTING RULES:
  - Exponents: MUST USE UNICODE SUPERSCRIPTS (            ). DO NOT use caret (^).
  - Fractions: STRICTLY use UNICODE FRACTION CHARACTERS (, , , , , , , , , , , , , , ).
  - If a specific glyph doesn't exist, use the Fraction Slash () (e.g. 710, 35). Avoid standard slash (/).
  `,T="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let E=fP;const R=e==="TPA"&&typeof t=="string"&&(t.includes("Psikotes")||t.includes("Kepribadian")||t.includes("Logika Gambar"));if(e==="GENERAL"&&u){const U=t,M=U.type==="topic"?`Topic: ${U.content}`:"Material Content";U.type==="pdf"&&(f=U.content);const G=U.difficultyPreference||"MEDIUM",q=`DIFFICULTY LEVEL: ${G}. ${G==="HARD"?"Use complex analysis/HOTS.":G==="EASY"?"Use straightforward recall.":""}`;u==="ACTIVE_RECALL"?p=`Create ${s} Active Recall questions (Short Answer format) based on this: ${M}. 
          ${T} ${q} ${_}
          Questions must be specific and require recall of key facts/concepts.`:u==="PBL"?p=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${T} ${q} ${_}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${M}.`:p=`Create ${s} practice questions based on: ${M}. ${T} ${q} ${_}`,U.type==="text"&&(p+=`

CONTENT: ${U.content}`)}else if(R){const U=t;p=`GENERATE QUESTIONS FOR PSIKOTEST KEDINASAN (PKN STAN) V3.
      Subtest Context: ${U}.
      Count: ${s}.
      ${b}
      ${_}
      
      RULES:
      `,U.includes("Kepribadian")?p+=`
          TYPE: PERSONALITY TEST.
          Format: Statement with Likert Scale options (Sangat Setuju - Sangat Tidak Setuju).
          SCORING (tkpPoints): Assign points 1-5 based on positive ASN traits.
          `:U.includes("Gambar")?p+=`
          TYPE: TES LOGIKA GAMBAR (Abstract Reasoning/Spatial) V3.
          Requirement: MUST USE THE 3D/2D UNICODE SYMBOLS listed above. 
          Create visual analogies or 3D block counting problems.
          Example: "Jika [  ] diputar 45 derajat menjadi [  ], maka [  ] diputar..."
          `:p+=`
          TYPE: TIU (Tes Intelegensi Umum).
          Focus: Verbal (Sinonim/Analogi), Numerik, Logika.
          Use Unicode math symbols for Numerik questions.
          `,p+=`
Language: Bahasa Indonesia.`}else{let U="";const M=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&h==="TKP";if(M?U=`CONTEXT: SKD TKP (Tes Karakteristik Pribadi).
           
           CRITICAL TKP RULES:
           1. DIFFICULTY: Options must be VERY SIMILAR in length, tone, and logic. Avoid obvious outliers.
           2. NO LENGTH BIAS: Do not make the correct answer significantly longer than others.
           3. AMBIGUITY: The difference between 5 points and 4 points should be subtle (e.g., direct action vs. procedural action).
           4. VISUALS: DO NOT use emojis or icons in TKP questions. Use professional text only.
           `:U=`DIFFICULTY DISTRIBUTION:
           - 70% of questions MUST be HOTS (Higher Order Thinking Skills).
           - 30% of questions MUST be Difficult to Very Difficult.
           - ABSOLUTELY NO Easy or simple recall questions.`,e==="INTERVIEW")p=`Roleplay Task: Act as a professional HR Interviewer. Context: ${t}. Generate ${s} interview questions.`,E={type:Ce.OBJECT,properties:{questions:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{id:{type:Ce.STRING},type:{type:Ce.STRING,enum:["long_text"]},content:{type:Ce.STRING},explanation:{type:Ce.STRING},metadata:{type:Ce.OBJECT,properties:{topic:{type:Ce.STRING}}}},required:["content","type"]}}}};else{const G=`Generate ${s} distinct questions. ${U}. Provide DETAILED explanation. ${b} ${_}`;M?p=`SKD TKP MODE. ${G} SCORING: 1-5 points via 'tkpPoints'. Ensure high ambiguity between top choices.`:p=`TRY OUT / PRACTICE V3. Category: ${e}. Context: ${JSON.stringify(t)}. ${G}. If TPA or Spatial, utilize 3D symbols (, , , ) or geometric shapes heavily. Ensure all fractions use Unicode characters (e.g. , ).`}}return((await ea(p,E,f)).questions||[]).filter(U=>!!U).map(U=>{const M=mP(U);return e==="INTERVIEW"&&(M.type="long_text",M.options=[]),M})},pP=async(n,e,t)=>{const s={type:Ce.OBJECT,properties:{score:{type:Ce.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:Ce.BOOLEAN,description:"True if score > 70"},feedback:{type:Ce.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},a=`Evaluate answer. Q: ${n}. Key: ${e}. User: ${t}. Score (0-100), correct?, feedback.`;return ea(a,s)},gP=async n=>{const e=`User weak in: ${n.join(", ")}. Provide concise study plan (3 paragraphs).`;return ea(e)},xP=async(n,e)=>{const t={type:Ce.OBJECT,properties:{score:{type:Ce.INTEGER},feedback:{type:Ce.STRING},improvedAnswer:{type:Ce.STRING},keyPointsCovered:{type:Ce.ARRAY,items:{type:Ce.STRING}},toneAnalysis:{type:Ce.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate interview answer. Q: ${n}. A: ${e}. Act as HR.`;return ea(s,t)},yP=async(n,e)=>{const t={type:Ce.OBJECT,properties:{understandingScore:{type:Ce.INTEGER},simplificationQuality:{type:Ce.STRING},missingConcepts:{type:Ce.ARRAY,items:{type:Ce.STRING}},correction:{type:Ce.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate Feynman Technique for "${n}". Explanation: ${e}`;return ea(s,t)},bP=async n=>n.type==="pdf"&&n.content?await ea("Extract/summarize main text from PDF. Ignore footers.",void 0,n.content):n.content,vP=async(n,e)=>{const t=`Context: University Thesis. Topic: ${n}. Task: ${e}.`;return ea(t)},_P=async n=>{const e={type:Ce.OBJECT,properties:{flashcards:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{id:{type:Ce.STRING},title:{type:Ce.STRING},front:{type:Ce.STRING},back:{type:Ce.STRING}},required:["front","back","title"]}}}},t=`Create 10 flashcards based on: ${n.extractedText||n.content}.`;return(await ea(t,e)).flashcards},TP=async n=>{const e={type:Ce.OBJECT,properties:{label:{type:Ce.STRING},children:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{label:{type:Ce.STRING},children:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{label:{type:Ce.STRING}}}}}}}}},t=`Create hierarchical mind map (JSON) for: ${n.title||n.content.substring(0,50)}.`;return ea(t,e)},SP=async(n,e,t)=>{const s={type:Ce.OBJECT,properties:{topic:{type:Ce.STRING},summary:{type:Ce.STRING},keyPoints:{type:Ce.ARRAY,items:{type:Ce.STRING}},question:j1},required:["topic","summary","keyPoints","question"]},a=`Create Drill Card (Mini Lesson + 1 Question) for ${n} - ${e}. ${t?"("+t+")":""}. Use Unicode superscripts for any math. FRACTIONS: use Unicode characters (, , ) or Fraction Slash ().`;return ea(a,s)},UT=async n=>{const e=hn(Ke.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK)",30,[],n,void 0,"HOTS"),t=hn(Ke.SIMULATION,"SKD","Tes Intelegensia Umum (TIU)",35,[],n,void 0,"HOTS"),s=hn(Ke.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP)",45,[],n,void 0,"TKP"),[a,l,u]=await Promise.all([e,t,s]);return a.forEach(h=>h.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),l.forEach(h=>h.metadata.subtest="Tes Intelegensia Umum (TIU)"),u.forEach(h=>h.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...a,...l,...u]},OT=async()=>{const n=hn(Ke.SIMULATION,"UTBK","Penalaran Umum",30,[],void 0,void 0,"HOTS"),e=hn(Ke.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=hn(Ke.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=hn(Ke.SIMULATION,"UTBK","Pengetahuan Kuantitatif",20,[],void 0,void 0,"HOTS"),a=hn(Ke.SIMULATION,"UTBK","Literasi Bahasa Indonesia",25,[],void 0,void 0,"HOTS"),l=hn(Ke.SIMULATION,"UTBK","Literasi Bahasa Inggris",25,[],void 0,void 0,"HOTS"),u=hn(Ke.SIMULATION,"UTBK","Penalaran Matematika",20,[],void 0,void 0,"HOTS"),[h,p,f,b,_,T,E]=await Promise.all([n,e,t,s,a,l,u]);return h.forEach(R=>R.metadata.subtest="Penalaran Umum"),p.forEach(R=>R.metadata.subtest="Pengetahuan dan Pemahaman Umum"),f.forEach(R=>R.metadata.subtest="Pemahaman Bacaan dan Menulis"),b.forEach(R=>R.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(R=>R.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(R=>R.metadata.subtest="Literasi Bahasa Inggris"),E.forEach(R=>R.metadata.subtest="Penalaran Matematika"),[...h,...p,...f,...b,..._,...T,...E]},VT=async()=>{const n=hn(Ke.SIMULATION,"TPA","TPA - Verbal (HOTS)",15,[],void 0,void 0,"HOTS"),e=hn(Ke.SIMULATION,"TPA","TPA - Kuantitatif (HOTS)",15,[],void 0,void 0,"HOTS"),t=hn(Ke.SIMULATION,"TPA","TPA - Penalaran (HOTS)",15,[],void 0,void 0,"HOTS"),s=hn(Ke.SIMULATION,"TPA","TBI - Bahasa Inggris (TOEFL Style)",20,[],void 0,void 0,"HOTS"),[a,l,u,h]=await Promise.all([n,e,t,s]);return a.forEach(p=>p.metadata.subtest="TPA - Kemampuan Verbal"),l.forEach(p=>p.metadata.subtest="TPA - Kemampuan Kuantitatif"),u.forEach(p=>p.metadata.subtest="TPA - Kemampuan Penalaran"),h.forEach(p=>p.metadata.subtest="TBI - Bahasa Inggris"),[...a,...l,...u,...h]},BT=async()=>{const n=hn(Ke.SIMULATION,"TPA","PSIKOTEST KEDINASAN (TIU V3)",30,[],void 0,void 0,"HOTS"),e=hn(Ke.SIMULATION,"TPA","PSIKOTEST KEDINASAN (LOGIKA GAMBAR V3). Use 3D UNICODE SHAPES (, , ) or geometric (, ) for spatial/pattern series.",15,[],void 0,void 0,"HOTS"),t=hn(Ke.SIMULATION,"TPA","PSIKOTEST KEDINASAN (KEPRIBADIAN)",20,[],void 0,void 0,"TKP"),[s,a,l]=await Promise.all([n,e,t]);return s.forEach(u=>u.metadata.subtest="TIU - Verbal & Numerik"),a.forEach(u=>u.metadata.subtest="Tes Logika Gambar (Abstrak)"),l.forEach(u=>u.metadata.subtest="Tes Kepribadian"),[...s,...a,...l]},GT=async()=>hn(Ke.SIMULATION,"PSIKOTEST","SIMULATION (IQ & LOGIC V3). Focus on spatial logic with 3D Unicode symbols (, ) where applicable.",40,[],void 0,void 0,"HOTS"),EP=()=>{};var zT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},wP=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},U1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,f=p?n[a+2]:0,b=l>>2,_=(l&3)<<4|h>>4;let T=(h&15)<<2|f>>6,E=f&63;p||(E=64,u||(T=64)),s.push(t[b],t[_],t[T],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(L1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const f=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||f==null||_==null)throw new NP;const T=l<<2|h>>4;if(s.push(T),f!==64){const E=h<<4&240|f>>2;if(s.push(E),_!==64){const R=f<<6&192|_;s.push(R)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class NP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AP=function(n){const e=L1(n);return U1.encodeByteArray(e,!0)},Rh=function(n){return AP(n).replace(/\./g,"")},O1=function(n){try{return U1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=()=>kP().__FIREBASE_DEFAULTS__,IP=()=>{if(typeof process>"u"||typeof zT>"u")return;const n=zT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&O1(n[1]);return e&&JSON.parse(e)},hf=()=>{try{return EP()||CP()||IP()||RP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},V1=n=>{var e,t;return(t=(e=hf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},MP=n=>{const e=V1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},B1=()=>{var n;return(n=hf())==null?void 0:n.config},G1=n=>{var e;return(e=hf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Rh(JSON.stringify(t)),Rh(JSON.stringify(u)),""].join(".")}const ru={};function jP(){const n={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?n.emulator.push(e):n.prod.push(e);return n}function LP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let FT=!1;function F1(n,e){if(typeof window>"u"||typeof document>"u"||!Wl(window.location.host)||ru[n]===e||ru[n]||FT)return;ru[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=jP().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,E){T.setAttribute("width","24"),T.setAttribute("id",E),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{FT=!0,u()},T}function b(T,E){T.setAttribute("id",E),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=LP(s),E=t("text"),R=document.getElementById(E)||document.createElement("span"),k=t("learnmore"),C=document.getElementById(k)||document.createElement("a"),U=t("preprendIcon"),M=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;h(G),b(C,k);const q=f();p(M,U),G.append(M,R,C,q),document.body.appendChild(G)}l?(R.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ss())}function OP(){var e;const n=(e=hf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zP(){const n=ss();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function FP(){return!OP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HP(){try{return typeof indexedDB=="object"}catch{return!1}}function qP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="FirebaseError";class La extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=KP,Object.setPrototypeOf(this,La.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eu.prototype.create)}}class Eu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?$P(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new La(a,h,s)}}function $P(n,e){return n.replace(YP,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const YP=/\{\$([^}]+)}/g;function JP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Eo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(HT(l)&&HT(u)){if(!Eo(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function HT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function QP(n,e){const t=new WP(n,e);return t.subscribe.bind(t)}class WP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");XP(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=q0),a.error===void 0&&(a.error=q0),a.complete===void 0&&(a.complete=q0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function q0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(n){return n&&n._delegate?n._delegate:n}class wo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new DP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t6(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:e6(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e6(n){return n===go?void 0:n}function t6(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(vt||(vt={}));const s6={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},i6=vt.INFO,a6={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},r6=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=a6[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dg{constructor(e){this.name=e,this._logLevel=i6,this._logHandler=r6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}}const o6=(n,e)=>e.some(t=>n instanceof t);let qT,KT;function l6(){return qT||(qT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c6(){return KT||(KT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H1=new WeakMap,Tp=new WeakMap,q1=new WeakMap,K0=new WeakMap,hg=new WeakMap;function u6(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Tr(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&H1.set(t,n)}).catch(()=>{}),hg.set(e,n),e}function d6(n){if(Tp.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Tp.set(n,e)}let Sp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Tp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||q1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function h6(n){Sp=n(Sp)}function f6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call($0(this),e,...t);return q1.set(s,e.sort?e.sort():[e]),Tr(s)}:c6().includes(n)?function(...e){return n.apply($0(this),e),Tr(H1.get(this))}:function(...e){return Tr(n.apply($0(this),e))}}function m6(n){return typeof n=="function"?f6(n):(n instanceof IDBTransaction&&d6(n),o6(n,l6())?new Proxy(n,Sp):n)}function Tr(n){if(n instanceof IDBRequest)return u6(n);if(K0.has(n))return K0.get(n);const e=m6(n);return e!==n&&(K0.set(n,e),hg.set(e,n)),e}const $0=n=>hg.get(n);function p6(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=Tr(u);return s&&u.addEventListener("upgradeneeded",p=>{s(Tr(u.result),p.oldVersion,p.newVersion,Tr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const g6=["get","getKey","getAll","getAllKeys","count"],x6=["put","add","delete","clear"],Y0=new Map;function $T(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Y0.get(e))return Y0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=x6.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||g6.includes(t)))return;const l=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let f=p.store;return s&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),a&&p.done]))[0]};return Y0.set(e,l),l}h6(n=>({...n,get:(e,t,s)=>$T(e,t)||n.get(e,t,s),has:(e,t)=>!!$T(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(b6(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function b6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ep="@firebase/app",YT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new dg("@firebase/app"),v6="@firebase/app-compat",_6="@firebase/analytics-compat",T6="@firebase/analytics",S6="@firebase/app-check-compat",E6="@firebase/app-check",w6="@firebase/auth",N6="@firebase/auth-compat",A6="@firebase/database",k6="@firebase/data-connect",C6="@firebase/database-compat",I6="@firebase/functions",R6="@firebase/functions-compat",M6="@firebase/installations",D6="@firebase/installations-compat",P6="@firebase/messaging",j6="@firebase/messaging-compat",L6="@firebase/performance",U6="@firebase/performance-compat",O6="@firebase/remote-config",V6="@firebase/remote-config-compat",B6="@firebase/storage",G6="@firebase/storage-compat",z6="@firebase/firestore",F6="@firebase/ai",H6="@firebase/firestore-compat",q6="firebase",K6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]",$6={[Ep]:"fire-core",[v6]:"fire-core-compat",[T6]:"fire-analytics",[_6]:"fire-analytics-compat",[E6]:"fire-app-check",[S6]:"fire-app-check-compat",[w6]:"fire-auth",[N6]:"fire-auth-compat",[A6]:"fire-rtdb",[k6]:"fire-data-connect",[C6]:"fire-rtdb-compat",[I6]:"fire-fn",[R6]:"fire-fn-compat",[M6]:"fire-iid",[D6]:"fire-iid-compat",[P6]:"fire-fcm",[j6]:"fire-fcm-compat",[L6]:"fire-perf",[U6]:"fire-perf-compat",[O6]:"fire-rc",[V6]:"fire-rc-compat",[B6]:"fire-gcs",[G6]:"fire-gcs-compat",[z6]:"fire-fst",[H6]:"fire-fst-compat",[F6]:"fire-vertex","fire-js":"fire-js",[q6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map,Y6=new Map,Np=new Map;function JT(n,e){try{n.container.addComponent(e)}catch(t){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ll(n){const e=n.name;if(Np.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;Np.set(e,n);for(const t of Mh.values())JT(t,n);for(const t of Y6.values())JT(t,n);return!0}function fg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Si(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Eu("app","Firebase",J6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=K6;function K1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:wp,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Sr.create("bad-app-name",{appName:String(a)});if(t||(t=B1()),!t)throw Sr.create("no-options");const l=Mh.get(a);if(l){if(Eo(t,l.options)&&Eo(s,l.config))return l;throw Sr.create("duplicate-app",{appName:a})}const u=new n6(a);for(const p of Np.values())u.addComponent(p);const h=new Q6(t,s,u);return Mh.set(a,h),h}function $1(n=wp){const e=Mh.get(n);if(!e&&n===wp&&B1())return K1();if(!e)throw Sr.create("no-app",{appName:n});return e}function Er(n,e,t){let s=$6[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(u.join(" "));return}Ll(new wo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="firebase-heartbeat-database",X6=1,fu="firebase-heartbeat-store";let J0=null;function Y1(){return J0||(J0=p6(W6,X6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sr.create("idb-open",{originalErrorMessage:n.message})})),J0}async function Z6(n){try{const t=(await Y1()).transaction(fu),s=await t.objectStore(fu).get(J1(n));return await t.done,s}catch(e){if(e instanceof La)Aa.warn(e.message);else{const t=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Aa.warn(t.message)}}}async function QT(n,e){try{const s=(await Y1()).transaction(fu,"readwrite");await s.objectStore(fu).put(e,J1(n)),await s.done}catch(t){if(t instanceof La)Aa.warn(t.message);else{const s=Sr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Aa.warn(s.message)}}}function J1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=1024,tj=30;class nj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ij(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=WT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>tj){const u=aj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Aa.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=WT(),{heartbeatsToSend:s,unsentEntries:a}=sj(this._heartbeatsCache.heartbeats),l=Rh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Aa.warn(t),""}}}function WT(){return new Date().toISOString().substring(0,10)}function sj(n,e=ej){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),XT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),XT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class ij{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HP()?qP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Z6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return QT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return QT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function XT(n){return Rh(JSON.stringify({version:2,heartbeats:n})).length}function aj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(n){Ll(new wo("platform-logger",e=>new y6(e),"PRIVATE")),Ll(new wo("heartbeat",e=>new nj(e),"PRIVATE")),Er(Ep,YT,n),Er(Ep,YT,"esm2020"),Er("fire-js","")}rj("");var oj="firebase",lj="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(oj,lj,"app");var ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,Q1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function I(){}I.prototype=A.prototype,D.F=A.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(P,L,z){for(var V=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)V[Ee-2]=arguments[Ee];return A.prototype[L].apply(P,V)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,A,I){I||(I=0);const P=Array(16);if(typeof A=="string")for(var L=0;L<16;++L)P[L]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(L=0;L<16;++L)P[L]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=D.g[0],I=D.g[1],L=D.g[2];let z=D.g[3],V;V=A+(z^I&(L^z))+P[0]+3614090360&4294967295,A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+P[1]+3905402710&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+P[2]+606105819&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+P[3]+3250441966&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(z^I&(L^z))+P[4]+4118548399&4294967295,A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+P[5]+1200080426&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+P[6]+2821735955&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+P[7]+4249261313&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(z^I&(L^z))+P[8]+1770035416&4294967295,A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+P[9]+2336552879&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+P[10]+4294925233&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+P[11]+2304563134&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(z^I&(L^z))+P[12]+1804603682&4294967295,A=I+(V<<7&4294967295|V>>>25),V=z+(L^A&(I^L))+P[13]+4254626195&4294967295,z=A+(V<<12&4294967295|V>>>20),V=L+(I^z&(A^I))+P[14]+2792965006&4294967295,L=z+(V<<17&4294967295|V>>>15),V=I+(A^L&(z^A))+P[15]+1236535329&4294967295,I=L+(V<<22&4294967295|V>>>10),V=A+(L^z&(I^L))+P[1]+4129170786&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+P[6]+3225465664&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+P[11]+643717713&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+P[0]+3921069994&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(L^z&(I^L))+P[5]+3593408605&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+P[10]+38016083&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+P[15]+3634488961&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+P[4]+3889429448&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(L^z&(I^L))+P[9]+568446438&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+P[14]+3275163606&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+P[3]+4107603335&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+P[8]+1163531501&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(L^z&(I^L))+P[13]+2850285829&4294967295,A=I+(V<<5&4294967295|V>>>27),V=z+(I^L&(A^I))+P[2]+4243563512&4294967295,z=A+(V<<9&4294967295|V>>>23),V=L+(A^I&(z^A))+P[7]+1735328473&4294967295,L=z+(V<<14&4294967295|V>>>18),V=I+(z^A&(L^z))+P[12]+2368359562&4294967295,I=L+(V<<20&4294967295|V>>>12),V=A+(I^L^z)+P[5]+4294588738&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+P[8]+2272392833&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+P[11]+1839030562&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+P[14]+4259657740&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(I^L^z)+P[1]+2763975236&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+P[4]+1272893353&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+P[7]+4139469664&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+P[10]+3200236656&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(I^L^z)+P[13]+681279174&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+P[0]+3936430074&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+P[3]+3572445317&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+P[6]+76029189&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(I^L^z)+P[9]+3654602809&4294967295,A=I+(V<<4&4294967295|V>>>28),V=z+(A^I^L)+P[12]+3873151461&4294967295,z=A+(V<<11&4294967295|V>>>21),V=L+(z^A^I)+P[15]+530742520&4294967295,L=z+(V<<16&4294967295|V>>>16),V=I+(L^z^A)+P[2]+3299628645&4294967295,I=L+(V<<23&4294967295|V>>>9),V=A+(L^(I|~z))+P[0]+4096336452&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+P[7]+1126891415&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+P[14]+2878612391&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+P[5]+4237533241&4294967295,I=L+(V<<21&4294967295|V>>>11),V=A+(L^(I|~z))+P[12]+1700485571&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+P[3]+2399980690&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+P[10]+4293915773&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+P[1]+2240044497&4294967295,I=L+(V<<21&4294967295|V>>>11),V=A+(L^(I|~z))+P[8]+1873313359&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+P[15]+4264355552&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+P[6]+2734768916&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+P[13]+1309151649&4294967295,I=L+(V<<21&4294967295|V>>>11),V=A+(L^(I|~z))+P[4]+4149444226&4294967295,A=I+(V<<6&4294967295|V>>>26),V=z+(I^(A|~L))+P[11]+3174756917&4294967295,z=A+(V<<10&4294967295|V>>>22),V=L+(A^(z|~I))+P[2]+718787259&4294967295,L=z+(V<<15&4294967295|V>>>17),V=I+(z^(L|~A))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+z&4294967295}s.prototype.v=function(D,A){A===void 0&&(A=D.length);const I=A-this.blockSize,P=this.C;let L=this.h,z=0;for(;z<A;){if(L==0)for(;z<=I;)a(this,D,z),z+=this.blockSize;if(typeof D=="string"){for(;z<A;)if(P[L++]=D.charCodeAt(z++),L==this.blockSize){a(this,P),L=0;break}}else for(;z<A;)if(P[L++]=D[z++],L==this.blockSize){a(this,P),L=0;break}}this.h=L,this.o+=A},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;A=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=A&255,A/=256;for(this.v(D),D=Array(16),A=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)D[A++]=this.g[I]>>>P&255;return D};function l(D,A){var I=h;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=A(D)}function u(D,A){this.h=A;const I=[];let P=!0;for(let L=D.length-1;L>=0;L--){const z=D[L]|0;P&&z==A||(I[L]=z,P=!1)}this.g=I}var h={};function p(D){return-128<=D&&D<128?l(D,function(A){return new u([A|0],A<0?-1:0)}):new u([D|0],D<0?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return _;if(D<0)return C(f(-D));const A=[];let I=1;for(let P=0;D>=I;P++)A[P]=D/I|0,I*=4294967296;return new u(A,0)}function b(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return C(b(D.substring(1),A));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=f(Math.pow(A,8));let P=_;for(let z=0;z<D.length;z+=8){var L=Math.min(8,D.length-z);const V=parseInt(D.substring(z,z+L),A);L<8?(L=f(Math.pow(A,L)),P=P.j(L).add(f(V))):(P=P.j(I),P=P.add(f(V)))}return P}var _=p(0),T=p(1),E=p(16777216);n=u.prototype,n.m=function(){if(k(this))return-C(this).m();let D=0,A=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);D+=(P>=0?P:4294967296+P)*A,A*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(R(this))return"0";if(k(this))return"-"+C(this).toString(D);const A=f(Math.pow(D,6));var I=this;let P="";for(;;){const L=q(I,A).g;I=U(I,L.j(A));let z=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=L,R(I))return z+P;for(;z.length<6;)z="0"+z;P=z+P}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function R(D){if(D.h!=0)return!1;for(let A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function k(D){return D.h==-1}n.l=function(D){return D=U(this,D),k(D)?-1:R(D)?0:1};function C(D){const A=D.g.length,I=[];for(let P=0;P<A;P++)I[P]=~D.g[P];return new u(I,~D.h).add(T)}n.abs=function(){return k(this)?C(this):this},n.add=function(D){const A=Math.max(this.g.length,D.g.length),I=[];let P=0;for(let L=0;L<=A;L++){let z=P+(this.i(L)&65535)+(D.i(L)&65535),V=(z>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);P=V>>>16,z&=65535,V&=65535,I[L]=V<<16|z}return new u(I,I[I.length-1]&-2147483648?-1:0)};function U(D,A){return D.add(C(A))}n.j=function(D){if(R(this)||R(D))return _;if(k(this))return k(D)?C(this).j(C(D)):C(C(this).j(D));if(k(D))return C(this.j(C(D)));if(this.l(E)<0&&D.l(E)<0)return f(this.m()*D.m());const A=this.g.length+D.g.length,I=[];for(var P=0;P<2*A;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let L=0;L<D.g.length;L++){const z=this.i(P)>>>16,V=this.i(P)&65535,Ee=D.i(L)>>>16,De=D.i(L)&65535;I[2*P+2*L]+=V*De,M(I,2*P+2*L),I[2*P+2*L+1]+=z*De,M(I,2*P+2*L+1),I[2*P+2*L+1]+=V*Ee,M(I,2*P+2*L+1),I[2*P+2*L+2]+=z*Ee,M(I,2*P+2*L+2)}for(D=0;D<A;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=A;D<2*A;D++)I[D]=0;return new u(I,0)};function M(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function G(D,A){this.g=D,this.h=A}function q(D,A){if(R(A))throw Error("division by zero");if(R(D))return new G(_,_);if(k(D))return A=q(C(D),A),new G(C(A.g),C(A.h));if(k(A))return A=q(D,C(A)),new G(C(A.g),A.h);if(D.g.length>30){if(k(D)||k(A))throw Error("slowDivide_ only works with positive integers.");for(var I=T,P=A;P.l(D)<=0;)I=X(I),P=X(P);var L=J(I,1),z=J(P,1);for(P=J(P,2),I=J(I,2);!R(P);){var V=z.add(P);V.l(D)<=0&&(L=L.add(I),z=V),P=J(P,1),I=J(I,1)}return A=U(D,L.j(A)),new G(L,A)}for(L=_;D.l(A)>=0;){for(I=Math.max(1,Math.floor(D.m()/A.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),z=f(I),V=z.j(A);k(V)||V.l(D)>0;)I-=P,z=f(I),V=z.j(A);R(z)&&(z=T),L=L.add(z),D=U(D,V)}return new G(L,D)}n.B=function(D){return q(this,D).h},n.and=function(D){const A=Math.max(this.g.length,D.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)&D.i(P);return new u(I,this.h&D.h)},n.or=function(D){const A=Math.max(this.g.length,D.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)|D.i(P);return new u(I,this.h|D.h)},n.xor=function(D){const A=Math.max(this.g.length,D.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)^D.i(P);return new u(I,this.h^D.h)};function X(D){const A=D.g.length+1,I=[];for(let P=0;P<A;P++)I[P]=D.i(P)<<1|D.i(P-1)>>>31;return new u(I,D.h)}function J(D,A){const I=A>>5;A%=32;const P=D.g.length-I,L=[];for(let z=0;z<P;z++)L[z]=A>0?D.i(z+I)>>>A|D.i(z+I+1)<<32-A:D.i(z+I);return new u(L,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Q1=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=b,wr=u}).apply(typeof ZT<"u"?ZT:typeof self<"u"?self:typeof window<"u"?window:{});var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W1,nu,X1,mh,Ap,Z1,ew,tw;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof nh=="object"&&nh];for(var S=0;S<x.length;++S){var N=x[S];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function a(x,S){if(S)e:{var N=s;x=x.split(".");for(var O=0;O<x.length-1;O++){var ee=x[O];if(!(ee in N))break e;N=N[ee]}x=x[x.length-1],O=N[x],S=S(O),S!=O&&S!=null&&e(N,x,{configurable:!0,writable:!0,value:S})}}a("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(x){return x||function(S){var N=[],O;for(O in S)Object.prototype.hasOwnProperty.call(S,O)&&N.push([O,S[O]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(x){var S=typeof x;return S=="object"&&x!=null||S=="function"}function p(x,S,N){return x.call.apply(x.bind,arguments)}function f(x,S,N){return f=p,f.apply(null,arguments)}function b(x,S){var N=Array.prototype.slice.call(arguments,1);return function(){var O=N.slice();return O.push.apply(O,arguments),x.apply(this,O)}}function _(x,S){function N(){}N.prototype=S.prototype,x.Z=S.prototype,x.prototype=new N,x.prototype.constructor=x,x.Ob=function(O,ee,oe){for(var we=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)we[ct-2]=arguments[ct];return S.prototype[ee].apply(O,we)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function E(x){const S=x.length;if(S>0){const N=Array(S);for(let O=0;O<S;O++)N[O]=x[O];return N}return[]}function R(x,S){for(let O=1;O<arguments.length;O++){const ee=arguments[O];var N=typeof ee;if(N=N!="object"?N:ee?Array.isArray(ee)?"array":N:"null",N=="array"||N=="object"&&typeof ee.length=="number"){N=x.length||0;const oe=ee.length||0;x.length=N+oe;for(let we=0;we<oe;we++)x[N+we]=ee[we]}else x.push(ee)}}class k{constructor(S,N){this.i=S,this.j=N,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function C(x){u.setTimeout(()=>{throw x},0)}function U(){var x=D;let S=null;return x.g&&(S=x.g,x.g=x.g.next,x.g||(x.h=null),S.next=null),S}class M{constructor(){this.h=this.g=null}add(S,N){const O=G.get();O.set(S,N),this.h?this.h.next=O:this.g=O,this.h=O}}var G=new k(()=>new q,x=>x.reset());class q{constructor(){this.next=this.g=this.h=null}set(S,N){this.h=S,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let X,J=!1,D=new M,A=()=>{const x=Promise.resolve(void 0);X=()=>{x.then(I)}};function I(){for(var x;x=U();){try{x.h.call(x.g)}catch(N){C(N)}var S=G;S.j(x),S.h<100&&(S.h++,x.next=S.g,S.g=x)}J=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(x,S){this.type=x,this.g=this.target=S,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,S=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const N=()=>{};u.addEventListener("test",N,S),u.removeEventListener("test",N,S)}catch{}return x})();function V(x){return/^[\s\xa0]*$/.test(x)}function Ee(x,S){L.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,S)}_(Ee,L),Ee.prototype.init=function(x,S){const N=this.type=x.type,O=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=S,S=x.relatedTarget,S||(N=="mouseover"?S=x.fromElement:N=="mouseout"&&(S=x.toElement)),this.relatedTarget=S,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),Y=0;function le(x,S,N,O,ee){this.listener=x,this.proxy=null,this.src=S,this.type=N,this.capture=!!O,this.ha=ee,this.key=++Y,this.da=this.fa=!1}function _e(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Oe(x,S,N){for(const O in x)S.call(N,x[O],O,x)}function te(x,S){for(const N in x)S.call(void 0,x[N],N,x)}function F(x){const S={};for(const N in x)S[N]=x[N];return S}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(x,S){let N,O;for(let ee=1;ee<arguments.length;ee++){O=arguments[ee];for(N in O)x[N]=O[N];for(let oe=0;oe<Q.length;oe++)N=Q[oe],Object.prototype.hasOwnProperty.call(O,N)&&(x[N]=O[N])}}function ie(x){this.src=x,this.g={},this.h=0}ie.prototype.add=function(x,S,N,O,ee){const oe=x.toString();x=this.g[oe],x||(x=this.g[oe]=[],this.h++);const we=ue(x,S,O,ee);return we>-1?(S=x[we],N||(S.fa=!1)):(S=new le(S,this.src,oe,!!O,ee),S.fa=N,x.push(S)),S};function re(x,S){const N=S.type;if(N in x.g){var O=x.g[N],ee=Array.prototype.indexOf.call(O,S,void 0),oe;(oe=ee>=0)&&Array.prototype.splice.call(O,ee,1),oe&&(_e(S),x.g[N].length==0&&(delete x.g[N],x.h--))}}function ue(x,S,N,O){for(let ee=0;ee<x.length;++ee){const oe=x[ee];if(!oe.da&&oe.listener==S&&oe.capture==!!N&&oe.ha==O)return ee}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Fe={};function We(x,S,N,O,ee){if(Array.isArray(S)){for(let oe=0;oe<S.length;oe++)We(x,S[oe],N,O,ee);return null}return N=Vt(N),x&&x[De]?x.J(S,N,h(O)?!!O.capture:!1,ee):At(x,S,N,!1,O,ee)}function At(x,S,N,O,ee,oe){if(!S)throw Error("Invalid event type");const we=h(ee)?!!ee.capture:!!ee;let ct=Xe(x);if(ct||(x[Ae]=ct=new ie(x)),N=ct.add(S,N,O,we,oe),N.proxy)return N;if(O=jt(),N.proxy=O,O.src=x,O.listener=N,x.addEventListener)z||(ee=we),ee===void 0&&(ee=!1),x.addEventListener(S.toString(),O,ee);else if(x.attachEvent)x.attachEvent(de(S.toString()),O);else if(x.addListener&&x.removeListener)x.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return N}function jt(){function x(N){return S.call(x.src,x.listener,N)}const S=Be;return x}function tt(x,S,N,O,ee){if(Array.isArray(S))for(var oe=0;oe<S.length;oe++)tt(x,S[oe],N,O,ee);else O=h(O)?!!O.capture:!!O,N=Vt(N),x&&x[De]?(x=x.i,oe=String(S).toString(),oe in x.g&&(S=x.g[oe],N=ue(S,N,O,ee),N>-1&&(_e(S[N]),Array.prototype.splice.call(S,N,1),S.length==0&&(delete x.g[oe],x.h--)))):x&&(x=Xe(x))&&(S=x.g[S.toString()],x=-1,S&&(x=ue(S,N,O,ee)),(N=x>-1?S[x]:null)&&mt(N))}function mt(x){if(typeof x!="number"&&x&&!x.da){var S=x.src;if(S&&S[De])re(S.i,x);else{var N=x.type,O=x.proxy;S.removeEventListener?S.removeEventListener(N,O,x.capture):S.detachEvent?S.detachEvent(de(N),O):S.addListener&&S.removeListener&&S.removeListener(O),(N=Xe(S))?(re(N,x),N.h==0&&(N.src=null,S[Ae]=null)):_e(x)}}}function de(x){return x in Fe?Fe[x]:Fe[x]="on"+x}function Be(x,S){if(x.da)x=!0;else{S=new Ee(S,this);const N=x.listener,O=x.ha||x.src;x.fa&&mt(x),x=N.call(O,S)}return x}function Xe(x){return x=x[Ae],x instanceof ie?x:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vt(x){return typeof x=="function"?x:(x[Qe]||(x[Qe]=function(S){return x.handleEvent(S)}),x[Qe])}function ht(){P.call(this),this.i=new ie(this),this.M=this,this.G=null}_(ht,P),ht.prototype[De]=!0,ht.prototype.removeEventListener=function(x,S,N,O){tt(this,x,S,N,O)};function Ze(x,S){var N,O=x.G;if(O)for(N=[];O;O=O.G)N.push(O);if(x=x.M,O=S.type||S,typeof S=="string")S=new L(S,x);else if(S instanceof L)S.target=S.target||x;else{var ee=S;S=new L(O,x),fe(S,ee)}ee=!0;let oe,we;if(N)for(we=N.length-1;we>=0;we--)oe=S.g=N[we],ee=Lt(oe,O,!0,S)&&ee;if(oe=S.g=x,ee=Lt(oe,O,!0,S)&&ee,ee=Lt(oe,O,!1,S)&&ee,N)for(we=0;we<N.length;we++)oe=S.g=N[we],ee=Lt(oe,O,!1,S)&&ee}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var x=this.i;for(const S in x.g){const N=x.g[S];for(let O=0;O<N.length;O++)_e(N[O]);delete x.g[S],x.h--}}this.G=null},ht.prototype.J=function(x,S,N,O){return this.i.add(String(x),S,!1,N,O)},ht.prototype.K=function(x,S,N,O){return this.i.add(String(x),S,!0,N,O)};function Lt(x,S,N,O){if(S=x.i.g[String(S)],!S)return!0;S=S.concat();let ee=!0;for(let oe=0;oe<S.length;++oe){const we=S[oe];if(we&&!we.da&&we.capture==N){const ct=we.listener,pn=we.ha||we.src;we.fa&&re(x.i,we),ee=ct.call(pn,O)!==!1&&ee}}return ee&&!O.defaultPrevented}function ci(x,S){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(x,S||0)}function Pn(x){x.g=ci(()=>{x.g=null,x.i&&(x.i=!1,Pn(x))},x.l);const S=x.h;x.h=null,x.m.apply(null,S)}class ve extends P{constructor(S,N){super(),this.m=S,this.l=N,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Pn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(x){P.call(this),this.h=x,this.g={}}_(Se,P);var Me=[];function Ye(x){Oe(x.g,function(S,N){this.g.hasOwnProperty(N)&&mt(S)},x),x.g={}}Se.prototype.N=function(){Se.Z.N.call(this),Ye(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=u.JSON.stringify,Bt=u.JSON.parse,Vn=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function Gs(){}function ui(){}var Bn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function en(){L.call(this,"d")}_(en,L);function Cn(){L.call(this,"c")}_(Cn,L);var Gt={},Kt=null;function hs(){return Kt=Kt||new ht}Gt.Ia="serverreachability";function fs(x){L.call(this,Gt.Ia,x)}_(fs,L);function tn(x){const S=hs();Ze(S,new fs(S))}Gt.STAT_EVENT="statevent";function Gn(x,S){L.call(this,Gt.STAT_EVENT,x),this.stat=S}_(Gn,L);function on(x){const S=hs();Ze(S,new Gn(S,x))}Gt.Ja="timingevent";function zs(x,S){L.call(this,Gt.Ja,x),this.size=S}_(zs,L);function ms(x,S){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},S)}function ps(){this.g=!0}ps.prototype.ua=function(){this.g=!1};function it(x,S,N,O,ee,oe){x.info(function(){if(x.g)if(oe){var we="",ct=oe.split("&");for(let Mt=0;Mt<ct.length;Mt++){var pn=ct[Mt].split("=");if(pn.length>1){const nn=pn[0];pn=pn[1];const Js=nn.split("_");we=Js.length>=2&&Js[1]=="type"?we+(nn+"="+pn+"&"):we+(nn+"=redacted&")}}}else we=null;else we=oe;return"XMLHTTP REQ ("+O+") [attempt "+ee+"]: "+S+`
`+N+`
`+we})}function di(x,S,N,O,ee,oe,we){x.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+ee+"]: "+S+`
`+N+`
`+oe+" "+we})}function zn(x,S,N,O){x.info(function(){return"XMLHTTP TEXT ("+S+"): "+oc(x,N)+(O?" "+O:"")})}function Ii(x,S){x.info(function(){return"TIMEOUT: "+S})}ps.prototype.info=function(){};function oc(x,S){if(!x.g)return S;if(!S)return null;try{const oe=JSON.parse(S);if(oe){for(x=0;x<oe.length;x++)if(Array.isArray(oe[x])){var N=oe[x];if(!(N.length<2)){var O=N[1];if(Array.isArray(O)&&!(O.length<1)){var ee=O[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let we=1;we<O.length;we++)O[we]=""}}}}return kt(oe)}catch{return S}}var na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Or={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Va;function sa(){}_(sa,Gs),sa.prototype.g=function(){return new XMLHttpRequest},Va=new sa;function hi(x){return encodeURIComponent(String(x))}function Oo(x){var S=1;x=x.split(":");const N=[];for(;S>0&&x.length;)N.push(x.shift()),S--;return x.length&&N.push(x.join(":")),N}function Ns(x,S,N,O){this.j=x,this.i=S,this.l=N,this.S=O||1,this.V=new Se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new As}function As(){this.i=null,this.g="",this.h=!1}var ln={},vn={};function ks(x,S,N){x.M=1,x.A=Ue(ge(S)),x.u=N,x.R=!0,Ba(x,null)}function Ba(x,S){x.F=Date.now(),Cs(x),x.B=ge(x.A);var N=x.B,O=x.S;Array.isArray(O)||(O=[String(O)]),Ks(N.i,"t",O),x.C=0,N=x.j.L,x.h=new As,x.g=Hu(x.j,N?S:null,!x.u),x.P>0&&(x.O=new ve(f(x.Y,x,x.g),x.P)),S=x.V,N=x.g,O=x.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(Me[0]=ee.toString()),ee=Me);for(let oe=0;oe<ee.length;oe++){const we=We(N,ee[oe],O||S.handleEvent,!1,S.h||S);if(!we)break;S.g[we.key]=we}S=x.J?F(x.J):{},x.u?(x.v||(x.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,S)):(x.v="GET",x.g.ea(x.B,x.v,null,S)),tn(),it(x.i,x.v,x.B,x.l,x.S,x.u)}Ns.prototype.ba=function(x){x=x.target;const S=this.O;S&&gi(x)==3?S.j():this.Y(x)},Ns.prototype.Y=function(x){try{if(x==this.g)e:{const ct=gi(this.g),pn=this.g.ya(),Mt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||Fn(this.g)))){this.K||ct!=4||pn==7||(pn==8||Mt<=0?tn(3):tn(2)),Rs(this);var S=this.g.ca();this.X=S;var N=lc(this);if(this.o=S==200,di(this.i,this.v,this.B,this.l,this.S,ct,S),this.o){if(this.U&&!this.L){t:{if(this.g){var O,ee=this.g;if((O=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(O)){var oe=O;break t}}oe=null}if(x=oe)zn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,x);else{this.o=!1,this.m=3,on(12),as(this),is(this);break e}}if(this.R){x=!0;let nn;for(;!this.K&&this.C<N.length;)if(nn=Bo(this,N),nn==vn){ct==4&&(this.m=4,on(14),x=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==ln){this.m=4,on(15),zn(this.i,this.l,N,"[Invalid Chunk]"),x=!1;break}else zn(this.i,this.l,nn,null),Fs(this,nn);if(Vo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||N.length!=0||this.h.h||(this.m=1,on(16),x=!1),this.o=this.o&&x,!x)zn(this.i,this.l,N,"[Invalid Chunked Response]"),as(this),is(this);else if(N.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),mc(we),we.P=!0,on(11))}}else zn(this.i,this.l,N,null),Fs(this,N);ct==4&&as(this),this.o&&!this.K&&(ct==4?Bu(this.j,this):(this.o=!1,Cs(this)))}else aa(this.g),S==400&&N.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),as(this),is(this)}}}catch{}finally{}};function lc(x){if(!Vo(x))return x.g.la();const S=Fn(x.g);if(S==="")return"";let N="";const O=S.length,ee=gi(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return as(x),is(x),"";x.h.i=new u.TextDecoder}for(let oe=0;oe<O;oe++)x.h.h=!0,N+=x.h.i.decode(S[oe],{stream:!(ee&&oe==O-1)});return S.length=0,x.h.g+=N,x.C=0,x.h.g}function Vo(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Bo(x,S){var N=x.C,O=S.indexOf(`
`,N);return O==-1?vn:(N=Number(S.substring(N,O)),isNaN(N)?ln:(O+=1,O+N>S.length?vn:(S=S.slice(O,O+N),x.C=O+N,S)))}Ns.prototype.cancel=function(){this.K=!0,as(this)};function Cs(x){x.T=Date.now()+x.H,Is(x,x.H)}function Is(x,S){if(x.D!=null)throw Error("WatchDog timer not null");x.D=ms(f(x.aa,x),S)}function Rs(x){x.D&&(u.clearTimeout(x.D),x.D=null)}Ns.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Ii(this.i,this.B),this.M!=2&&(tn(),on(17)),as(this),this.m=2,is(this)):Is(this,this.T-x)};function is(x){x.j.I==0||x.K||Bu(x.j,x)}function as(x){Rs(x);var S=x.O;S&&typeof S.dispose=="function"&&S.dispose(),x.O=null,Ye(x.V),x.g&&(S=x.g,x.g=null,S.abort(),S.dispose())}function Fs(x,S){try{var N=x.j;if(N.I!=0&&(N.g==x||qs(N.h,x))){if(!x.L&&qs(N.h,x)&&N.I==3){try{var O=N.Ba.g.parse(S)}catch{O=null}if(Array.isArray(O)&&O.length==3){var ee=O;if(ee[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<x.F)qo(N),qa(N);else break e;Wr(N),on(18)}}else N.xa=ee[1],0<N.xa-N.K&&ee[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=ms(f(N.Va,N),6e3));Hs(N.h)<=1&&N.ta&&(N.ta=void 0)}else Ui(N,11)}else if((x.L||N.g==x)&&qo(N),!V(S))for(ee=N.Ba.g.parse(S),S=0;S<ee.length;S++){let Mt=ee[S];const nn=Mt[0];if(!(nn<=N.K))if(N.K=nn,Mt=Mt[1],N.I==2)if(Mt[0]=="c"){N.M=Mt[1],N.ba=Mt[2];const Js=Mt[3];Js!=null&&(N.ka=Js,N.j.info("VER="+N.ka));const Oi=Mt[4];Oi!=null&&(N.za=Oi,N.j.info("SVER="+N.za));const xi=Mt[5];xi!=null&&typeof xi=="number"&&xi>0&&(O=1.5*xi,N.O=O,N.j.info("backChannelRequestTimeoutMs_="+O)),O=N;const yi=x.g;if(yi){const Xr=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var oe=O.h;oe.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Gr(oe,oe.h),oe.h=null))}if(O.G){const Ko=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(O.wa=Ko,ke(O.J,O.G,Ko))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-x.F,N.j.info("Handshake RTT: "+N.T+"ms")),O=N;var we=x;if(O.na=Fu(O,O.L?O.ba:null,O.W),we.L){zr(O.h,we);var ct=we,pn=O.O;pn&&(ct.H=pn),ct.D&&(Rs(ct),Cs(ct)),O.g=we}else Ou(O);N.i.length>0&&Li(N)}else Mt[0]!="stop"&&Mt[0]!="close"||Ui(N,7);else N.I==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?Ui(N,7):hc(N):Mt[0]!="noop"&&N.l&&N.l.qa(Mt),N.A=0)}}tn(4)}catch{}}var cn=class{constructor(x,S){this.g=x,this.map=S}};function Vr(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Br(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Hs(x){return x.h?1:x.g?x.g.size:0}function qs(x,S){return x.h?x.h==S:x.g?x.g.has(S):!1}function Gr(x,S){x.g?x.g.add(S):x.h=S}function zr(x,S){x.h&&x.h==S?x.h=null:x.g&&x.g.has(S)&&x.g.delete(S)}Vr.prototype.cancel=function(){if(this.i=Fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Fr(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let S=x.i;for(const N of x.g.values())S=S.concat(N.G);return S}return E(x.i)}var Hr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $(x,S){if(x){x=x.split("&");for(let N=0;N<x.length;N++){const O=x[N].indexOf("=");let ee,oe=null;O>=0?(ee=x[N].substring(0,O),oe=x[N].substring(O+1)):ee=x[N],S(ee,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function ye(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;x instanceof ye?(this.l=x.l,Pe(this,x.j),this.o=x.o,this.g=x.g,Ne(this,x.u),this.h=x.h,je(this,qr(x.i)),this.m=x.m):x&&(S=String(x).match(Hr))?(this.l=!1,Pe(this,S[1]||"",!0),this.o=$e(S[2]||""),this.g=$e(S[3]||"",!0),Ne(this,S[4]),this.h=$e(S[5]||"",!0),je(this,S[6]||"",!0),this.m=$e(S[7]||"")):(this.l=!1,this.i=new In(null,this.l))}ye.prototype.toString=function(){const x=[];var S=this.j;S&&x.push(nt(S,ft,!0),":");var N=this.g;return(N||S=="file")&&(x.push("//"),(S=this.o)&&x.push(nt(S,ft,!0),"@"),x.push(hi(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&x.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&x.push("/"),x.push(nt(N,N.charAt(0)=="/"?$t:Et,!0))),(N=this.i.toString())&&x.push("?",N),(N=this.m)&&x.push("#",nt(N,mn)),x.join("")},ye.prototype.resolve=function(x){const S=ge(this);let N=!!x.j;N?Pe(S,x.j):N=!!x.o,N?S.o=x.o:N=!!x.g,N?S.g=x.g:N=x.u!=null;var O=x.h;if(N)Ne(S,x.u);else if(N=!!x.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var ee=S.h.lastIndexOf("/");ee!=-1&&(O=S.h.slice(0,ee+1)+O)}if(ee=O,ee==".."||ee==".")O="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){O=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const oe=[];for(let we=0;we<ee.length;){const ct=ee[we++];ct=="."?O&&we==ee.length&&oe.push(""):ct==".."?((oe.length>1||oe.length==1&&oe[0]!="")&&oe.pop(),O&&we==ee.length&&oe.push("")):(oe.push(ct),O=!0)}O=oe.join("/")}else O=ee}return N?S.h=O:N=x.i.toString()!=="",N?je(S,qr(x.i)):N=!!x.m,N&&(S.m=x.m),S};function ge(x){return new ye(x)}function Pe(x,S,N){x.j=N?$e(S,!0):S,x.j&&(x.j=x.j.replace(/:$/,""))}function Ne(x,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);x.u=S}else x.u=null}function je(x,S,N){S instanceof In?(x.i=S,Go(x.i,x.l)):(N||(S=nt(S,Qt)),x.i=new In(S,x.l))}function ke(x,S,N){x.i.set(S,N)}function Ue(x){return ke(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function $e(x,S){return x?S?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function nt(x,S,N){return typeof x=="string"?(x=encodeURI(x).replace(S,Ge),N&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ge(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var ft=/[#\/\?@]/g,Et=/[#\?:]/g,$t=/[#\?]/g,Qt=/[#\?@]/g,mn=/#/g;function In(x,S){this.h=this.g=null,this.i=x||null,this.j=!!S}function _n(x){x.g||(x.g=new Map,x.h=0,x.i&&$(x.i,function(S,N){x.add(decodeURIComponent(S.replace(/\+/g," ")),N)}))}n=In.prototype,n.add=function(x,S){_n(this),this.i=null,x=Mi(this,x);let N=this.g.get(x);return N||this.g.set(x,N=[]),N.push(S),this.h+=1,this};function Ga(x,S){_n(x),S=Mi(x,S),x.g.has(S)&&(x.i=null,x.h-=x.g.get(S).length,x.g.delete(S))}function Ri(x,S){return _n(x),S=Mi(x,S),x.g.has(S)}n.forEach=function(x,S){_n(this),this.g.forEach(function(N,O){N.forEach(function(ee){x.call(S,ee,O,this)},this)},this)};function fi(x,S){_n(x);let N=[];if(typeof S=="string")Ri(x,S)&&(N=N.concat(x.g.get(Mi(x,S))));else for(x=Array.from(x.g.values()),S=0;S<x.length;S++)N=N.concat(x[S]);return N}n.set=function(x,S){return _n(this),this.i=null,x=Mi(this,x),Ri(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[S]),this.h+=1,this},n.get=function(x,S){return x?(x=fi(this,x),x.length>0?String(x[0]):S):S};function Ks(x,S,N){Ga(x,S),N.length>0&&(x.i=null,x.g.set(Mi(x,S),E(N)),x.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],S=Array.from(this.g.keys());for(let O=0;O<S.length;O++){var N=S[O];const ee=hi(N);N=fi(this,N);for(let oe=0;oe<N.length;oe++){let we=ee;N[oe]!==""&&(we+="="+hi(N[oe])),x.push(we)}}return this.i=x.join("&")};function qr(x){const S=new In;return S.i=x.i,x.g&&(S.g=new Map(x.g),S.h=x.h),S}function Mi(x,S){return S=String(S),x.j&&(S=S.toLowerCase()),S}function Go(x,S){S&&!x.j&&(_n(x),x.i=null,x.g.forEach(function(N,O){const ee=O.toLowerCase();O!=ee&&(Ga(this,O),Ks(this,ee,N))},x)),x.j=S}function mi(x,S){const N=new ps;if(u.Image){const O=new Image;O.onload=b($s,N,"TestLoadImage: loaded",!0,S,O),O.onerror=b($s,N,"TestLoadImage: error",!1,S,O),O.onabort=b($s,N,"TestLoadImage: abort",!1,S,O),O.ontimeout=b($s,N,"TestLoadImage: timeout",!1,S,O),u.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=x}else S(!1)}function cc(x,S){const N=new ps,O=new AbortController,ee=setTimeout(()=>{O.abort(),$s(N,"TestPingServer: timeout",!1,S)},1e4);fetch(x,{signal:O.signal}).then(oe=>{clearTimeout(ee),oe.ok?$s(N,"TestPingServer: ok",!0,S):$s(N,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ee),$s(N,"TestPingServer: error",!1,S)})}function $s(x,S,N,O,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),O(N)}catch{}}function za(){this.g=new Vn}function Di(x){this.i=x.Sb||null,this.h=x.ab||!1}_(Di,Gs),Di.prototype.g=function(){return new Kr(this.i,this.h)};function Kr(x,S){ht.call(this),this.H=x,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Kr,ht),n=Kr.prototype,n.open=function(x,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=S,this.readyState=1,pi(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(S.body=x),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zo(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function zo(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var S=x.value?x.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!x.done}))&&(this.response=this.responseText+=S)}x.done?Fa(this):pi(this),this.readyState==3&&zo(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Fa(this))},n.Na=function(x){this.g&&(this.response=x,Fa(this))},n.ga=function(){this.g&&Fa(this)};function Fa(x){x.readyState=4,x.l=null,x.j=null,x.B=null,pi(x)}n.setRequestHeader=function(x,S){this.A.append(x,S)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],S=this.h.entries();for(var N=S.next();!N.done;)N=N.value,x.push(N[0]+": "+N[1]),N=S.next();return x.join(`\r
`)};function pi(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Ys(x){let S="";return Oe(x,function(N,O){S+=O,S+=":",S+=N,S+=`\r
`}),S}function $r(x,S,N){e:{for(O in N){var O=!1;break e}O=!0}O||(N=Ys(N),typeof x=="string"?N!=null&&hi(N):ke(x,S,N))}function zt(x){ht.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(zt,ht);var Pi=/^https?$/i,uc=["POST","PUT"];n=zt.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,S,N,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);S=S?S.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Va.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(S,String(x),!0),this.B=!1}catch(oe){Yr(this,oe);return}if(x=N||"",N=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var ee in O)N.set(ee,O[ee]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const oe of O.keys())N.set(oe,O.get(oe));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(N.keys()).find(oe=>oe.toLowerCase()=="content-type"),ee=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(uc,S,void 0)>=0)||O||ee||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,we]of N)this.g.setRequestHeader(oe,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(oe){Yr(this,oe)}};function Yr(x,S){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=S,x.o=5,dc(x),ia(x)}function dc(x){x.A||(x.A=!0,Ze(x,"complete"),Ze(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Ze(this,"complete"),Ze(this,"abort"),ia(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ia(this,!0)),zt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Jr(this):this.Xa())},n.Xa=function(){Jr(this)};function Jr(x){if(x.h&&typeof l<"u"){if(x.v&&gi(x)==4)setTimeout(x.Ca.bind(x),0);else if(Ze(x,"readystatechange"),gi(x)==4){x.h=!1;try{const oe=x.ca();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var N;if(!(N=S)){var O;if(O=oe===0){let we=String(x.D).match(Hr)[1]||null;!we&&u.self&&u.self.location&&(we=u.self.location.protocol.slice(0,-1)),O=!Pi.test(we?we.toLowerCase():"")}N=O}if(N)Ze(x,"complete"),Ze(x,"success");else{x.o=6;try{var ee=gi(x)>2?x.g.statusText:""}catch{ee=""}x.l=ee+" ["+x.ca()+"]",dc(x)}}finally{ia(x)}}}}function ia(x,S){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const N=x.g;x.g=null,S||Ze(x,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(x){return x.g?x.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var S=this.g.responseText;return x&&S.indexOf(x)==0&&(S=S.substring(x.length)),Bt(S)}};function Fn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function aa(x){const S={};x=(x.g&&gi(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<x.length;O++){if(V(x[O]))continue;var N=Oo(x[O]);const ee=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const oe=S[ee]||[];S[ee]=oe,oe.push(N)}te(S,function(O){return O.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(x,S,N){return N&&N.internalChannelParams&&N.internalChannelParams[x]||S}function Ha(x){this.za=0,this.i=[],this.j=new ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ji("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ji("baseRetryDelayMs",5e3,x),this.Za=ji("retryDelaySeedMs",1e4,x),this.Ta=ji("forwardChannelMaxRetries",2,x),this.va=ji("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Vr(x&&x.concurrentRequestLimit),this.Ba=new za,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ha.prototype,n.ka=8,n.I=1,n.connect=function(x,S,N,O){on(0),this.W=x,this.H=S||{},N&&O!==void 0&&(this.H.OSID=N,this.H.OAID=O),this.F=this.X,this.J=Fu(this,null,this.W),Li(this)};function hc(x){if(Fo(x),x.I==3){var S=x.V++,N=ge(x.J);if(ke(N,"SID",x.M),ke(N,"RID",S),ke(N,"TYPE","terminate"),Qr(x,N),S=new Ns(x,x.j,S),S.M=2,S.A=Ue(ge(N)),N=!1,u.navigator&&u.navigator.sendBeacon)try{N=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!N&&u.Image&&(new Image().src=S.A,N=!0),N||(S.g=Hu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Cs(S)}zu(x)}function qa(x){x.g&&(mc(x),x.g.cancel(),x.g=null)}function Fo(x){qa(x),x.v&&(u.clearTimeout(x.v),x.v=null),qo(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function Li(x){if(!Br(x.h)&&!x.m){x.m=!0;var S=x.Ea;X||A(),J||(X(),J=!0),D.add(S,x),x.D=0}}function Ho(x,S){return Hs(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=S.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=ms(f(x.Ea,x,S),Gu(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const ee=new Ns(this,this.j,x);let oe=this.o;if(this.U&&(oe?(oe=F(oe),fe(oe,this.U)):oe=this.U),this.u!==null||this.R||(ee.J=oe,oe=null),this.S)e:{for(var S=0,N=0;N<this.i.length;N++){t:{var O=this.i[N];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(S+=O,S>4096){S=N;break e}if(S===4096||N===this.i.length-1){S=N+1;break e}}S=1e3}else S=1e3;S=Uu(this,ee,S),N=ge(this.J),ke(N,"RID",x),ke(N,"CVER",22),this.G&&ke(N,"X-HTTP-Session-Id",this.G),Qr(this,N),oe&&(this.R?S="headers="+hi(Ys(oe))+"&"+S:this.u&&$r(N,this.u,oe)),Gr(this.h,ee),this.Ra&&ke(N,"TYPE","init"),this.S?(ke(N,"$req",S),ke(N,"SID","null"),ee.U=!0,ks(ee,N,null)):ks(ee,N,S),this.I=2}}else this.I==3&&(x?fc(this,x):this.i.length==0||Br(this.h)||fc(this))};function fc(x,S){var N;S?N=S.l:N=x.V++;const O=ge(x.J);ke(O,"SID",x.M),ke(O,"RID",N),ke(O,"AID",x.K),Qr(x,O),x.u&&x.o&&$r(O,x.u,x.o),N=new Ns(x,x.j,N,x.D+1),x.u===null&&(N.J=x.o),S&&(x.i=S.G.concat(x.i)),S=Uu(x,N,1e3),N.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),Gr(x.h,N),ks(N,O,S)}function Qr(x,S){x.H&&Oe(x.H,function(N,O){ke(S,O,N)}),x.l&&Oe({},function(N,O){ke(S,O,N)})}function Uu(x,S,N){N=Math.min(x.i.length,N);const O=x.l?f(x.l.Ka,x.l,x):null;e:{var ee=x.i;let ct=-1;for(;;){const pn=["count="+N];ct==-1?N>0?(ct=ee[0].g,pn.push("ofs="+ct)):ct=0:pn.push("ofs="+ct);let Mt=!0;for(let nn=0;nn<N;nn++){var oe=ee[nn].g;const Js=ee[nn].map;if(oe-=ct,oe<0)ct=Math.max(0,ee[nn].g-100),Mt=!1;else try{oe="req"+oe+"_"||"";try{var we=Js instanceof Map?Js:Object.entries(Js);for(const[Oi,xi]of we){let yi=xi;h(xi)&&(yi=kt(xi)),pn.push(oe+Oi+"="+encodeURIComponent(yi))}}catch(Oi){throw pn.push(oe+"type="+encodeURIComponent("_badmap")),Oi}}catch{O&&O(Js)}}if(Mt){we=pn.join("&");break e}}we=void 0}return x=x.i.splice(0,N),S.G=x,we}function Ou(x){if(!x.g&&!x.v){x.Y=1;var S=x.Da;X||A(),J||(X(),J=!0),D.add(S,x),x.A=0}}function Wr(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=ms(f(x.Da,x),Gu(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,Vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=ms(f(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),qa(this),Vu(this))};function mc(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function Vu(x){x.g=new Ns(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var S=ge(x.na);ke(S,"RID","rpc"),ke(S,"SID",x.M),ke(S,"AID",x.K),ke(S,"CI",x.F?"0":"1"),!x.F&&x.ia&&ke(S,"TO",x.ia),ke(S,"TYPE","xmlhttp"),Qr(x,S),x.u&&x.o&&$r(S,x.u,x.o),x.O&&(x.g.H=x.O);var N=x.g;x=x.ba,N.M=1,N.A=Ue(ge(S)),N.u=null,N.R=!0,Ba(N,x)}n.Va=function(){this.C!=null&&(this.C=null,qa(this),Wr(this),on(19))};function qo(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function Bu(x,S){var N=null;if(x.g==S){qo(x),mc(x),x.g=null;var O=2}else if(qs(x.h,S))N=S.G,zr(x.h,S),O=1;else return;if(x.I!=0){if(S.o)if(O==1){N=S.u?S.u.length:0,S=Date.now()-S.F;var ee=x.D;O=hs(),Ze(O,new zs(O,N)),Li(x)}else Ou(x);else if(ee=S.m,ee==3||ee==0&&S.X>0||!(O==1&&Ho(x,S)||O==2&&Wr(x)))switch(N&&N.length>0&&(S=x.h,S.i=S.i.concat(N)),ee){case 1:Ui(x,5);break;case 4:Ui(x,10);break;case 3:Ui(x,6);break;default:Ui(x,2)}}}function Gu(x,S){let N=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(N*=2),N*S}function Ui(x,S){if(x.j.info("Error code "+S),S==2){var N=f(x.bb,x),O=x.Ua;const ee=!O;O=new ye(O||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Pe(O,"https"),Ue(O),ee?mi(O.toString(),N):cc(O.toString(),N)}else on(2);x.I=0,x.l&&x.l.pa(S),zu(x),Fo(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function zu(x){if(x.I=0,x.ja=[],x.l){const S=Fr(x.h);(S.length!=0||x.i.length!=0)&&(R(x.ja,S),R(x.ja,x.i),x.h.i.length=0,E(x.i),x.i.length=0),x.l.oa()}}function Fu(x,S,N){var O=N instanceof ye?ge(N):new ye(N);if(O.g!="")S&&(O.g=S+"."+O.g),Ne(O,O.u);else{var ee=u.location;O=ee.protocol,S=S?S+"."+ee.hostname:ee.hostname,ee=+ee.port;const oe=new ye(null);O&&Pe(oe,O),S&&(oe.g=S),ee&&Ne(oe,ee),N&&(oe.h=N),O=oe}return N=x.G,S=x.wa,N&&S&&ke(O,N,S),ke(O,"VER",x.ka),Qr(x,O),O}function Hu(x,S,N){if(S&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=x.Aa&&!x.ma?new zt(new Di({ab:N})):new zt(x.ma),S.Fa(x.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}n=qu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ka(){}Ka.prototype.g=function(x,S){return new rs(x,S)};function rs(x,S){ht.call(this),this.g=new Ha(S),this.l=x,this.h=S&&S.messageUrlParams||null,x=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(x?x["X-WebChannel-Content-Type"]=S.messageContentType:x={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(x?x["X-WebChannel-Client-Profile"]=S.sa:x={"X-WebChannel-Client-Profile":S.sa}),this.g.U=x,(x=S&&S.Qb)&&!V(x)&&(this.g.u=x),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!V(S)&&(this.g.G=S,x=this.h,x!==null&&S in x&&(x=this.h,S in x&&delete x[S])),this.j=new ra(this)}_(rs,ht),rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rs.prototype.close=function(){hc(this.g)},rs.prototype.o=function(x){var S=this.g;if(typeof x=="string"){var N={};N.__data__=x,x=N}else this.v&&(N={},N.__data__=kt(x),x=N);S.i.push(new cn(S.Ya++,x)),S.I==3&&Li(S)},rs.prototype.N=function(){this.g.l=null,delete this.j,hc(this.g),delete this.g,rs.Z.N.call(this)};function Ku(x){en.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var S=x.__sm__;if(S){e:{for(const N in S){x=N;break e}x=void 0}(this.i=x)&&(x=this.i,S=S!==null&&x in S?S[x]:void 0),this.data=S}else this.data=x}_(Ku,en);function $u(){Cn.call(this),this.status=1}_($u,Cn);function ra(x){this.g=x}_(ra,qu),ra.prototype.ra=function(){Ze(this.g,"a")},ra.prototype.qa=function(x){Ze(this.g,new Ku(x))},ra.prototype.pa=function(x){Ze(this.g,new $u)},ra.prototype.oa=function(){Ze(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,rs.prototype.send=rs.prototype.o,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,tw=function(){return new Ka},ew=function(){return hs()},Z1=Gt,Ap={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,mh=na,Or.COMPLETE="complete",X1=Or,ui.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",ht.prototype.listen=ht.prototype.J,nu=ui,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,W1=zt}).apply(typeof nh<"u"?nh:typeof self<"u"?self:typeof window<"u"?window:{});const eS="@firebase/firestore",tS="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let es=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};es.UNAUTHENTICATED=new es(null),es.GOOGLE_CREDENTIALS=new es("google-credentials-uid"),es.FIRST_PARTY=new es("first-party-uid"),es.MOCK_USER=new es("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new dg("@firebase/firestore");function El(){return No.logLevel}function Le(n,...e){if(No.logLevel<=vt.DEBUG){const t=e.map(mg);No.debug(`Firestore (${Zl}): ${n}`,...t)}}function ka(n,...e){if(No.logLevel<=vt.ERROR){const t=e.map(mg);No.error(`Firestore (${Zl}): ${n}`,...t)}}function Ul(n,...e){if(No.logLevel<=vt.WARN){const t=e.map(mg);No.warn(`Firestore (${Zl}): ${n}`,...t)}}function mg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,nw(n,s,t)}function nw(n,e,t){let s=`FIRESTORE (${Zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ka(s),new Error(s)}function Pt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||nw(e,a,s)}function lt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends La{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(es.UNAUTHENTICATED)))}shutdown(){}}class uj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dj{constructor(e){this.t=e,this.currentUser=es.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pt(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new wa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new wa,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new wa)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Pt(typeof s.accessToken=="string",31837,{l:s}),new sw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new es(e)}}class hj{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=es.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fj{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new hj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(es.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pt(this.o===void 0,3512);const s=l=>{l.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=pj(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function _t(n,e){return n<e?-1:n>e?1:0}function kp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return Q0(a)===Q0(l)?_t(a,l):Q0(a)?1:-1}return _t(n.length,e.length)}const gj=55296,xj=57343;function Q0(n){const e=n.charCodeAt(0);return e>=gj&&e<=xj}function Ol(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="__name__";class Hi{constructor(e,t,s){t===void 0?t=0:t>e.length&&et(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&et(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Hi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return _t(e.length,t.length)}static compareSegments(e,t){const s=Hi.isNumericId(e),a=Hi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Hi.extractNumericId(e).compare(Hi.extractNumericId(t)):kp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class Jt extends Hi{construct(e,t,s){return new Jt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Jt(t)}static emptyPath(){return new Jt([])}}const yj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends Hi{construct(e,t,s){return new Jn(e,t,s)}static isValidIdentifier(e){return yj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sS}static keyField(){return new Jn([sS])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Ie(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ie(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new Ie(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(t)}static emptyPath(){return new Jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Jt.fromString(e))}static fromName(e){return new qe(Jt.fromString(e).popFirst(5))}static empty(){return new qe(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Jt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n,e,t){if(!t)throw new Ie(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bj(n,e,t,s){if(e===!0&&s===!0)throw new Ie(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iS(n){if(!qe.isDocumentKey(n))throw new Ie(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aS(n){if(qe.isDocumentKey(n))throw new Ie(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ff(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":et(12329,{type:typeof n})}function Es(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(n);throw new Ie(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vj(n,e){if(e<=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Nu(n,e){if(!aw(n))throw new Ie(pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new Ie(pe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=-62135596800,oS=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*oS);return new Zt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rS)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oS}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,Zt._jsonSchema))return new Zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:kn("string",Zt._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Zt(0,0))}static max(){return new rt(new Zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;function _j(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=rt.fromTimestamp(s===1e9?new Zt(t+1,0):new Zt(t,s));return new kr(a,qe.empty(),e)}function Tj(n){return new kr(n.readTime,n.key,mu)}class kr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new kr(rt.min(),qe.empty(),mu)}static max(){return new kr(rt.max(),qe.empty(),mu)}}function Sj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(n.documentKey,e.documentKey),t!==0?t:_t(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==Ej)throw n;Le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):be.reject(t)}static resolve(e){return new be(((t,s)=>{t(e)}))}static reject(e){return new be(((t,s)=>{s(e)}))}static waitFor(e){return new be(((t,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(p=>s(p)))})),u=!0,l===a&&t()}))}static or(e){let t=be.resolve(!1);for(const s of e)t=t.next((a=>a?be.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new be(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const f=p;t(e[f]).next((b=>{u[f]=b,++h,h===l&&s(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new be(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function Nj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=-1;function pf(n){return n==null}function Dh(n){return n===0&&1/n==-1/0}function Aj(n){return typeof n=="number"&&Number.isInteger(n)&&!Dh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="";function kj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lS(e)),e=Cj(n.get(t),e);return lS(e)}function Cj(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case rw:t+="";break;default:t+=l}}return t}function lS(n){return n+rw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ow(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t){this.comparator=e,this.root=t||Yn.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yn.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Yn.RED,this.left=a??Yn.EMPTY,this.right=l??Yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Yn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Yn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}Yn.EMPTY=null,Yn.RED=!0,Yn.BLACK=!1;Yn.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Yn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uS(this.data.getIterator())}getIteratorFrom(e){return new uS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Mn(this.comparator);return t.data=e,t}}class uS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new Vs([])}unionWith(e){let t=new Mn(Jn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new lw("Invalid base64 string: "+l):l}})(e);return new Wn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const Ij=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(n){if(Pt(!!n,39018),typeof n=="string"){let e=0;const t=Ij.exec(n);if(Pt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yn(n.seconds),nanos:yn(n.nanos)}}function yn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ir(n){return typeof n=="string"?Wn.fromBase64String(n):Wn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="server_timestamp",uw="__type__",dw="__previous_value__",hw="__local_write_time__";function xg(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[uw])==null?void 0:s.stringValue)===cw}function gf(n){const e=n.mapValue.fields[dw];return xg(e)?gf(e):e}function pu(n){const e=Cr(n.mapValue.fields[hw].timestampValue);return new Zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,t,s,a,l,u,h,p,f,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=f,this.isUsingEmulator=b}}const Ph="(default)";class gu{constructor(e,t){this.projectId=e,this.database=t||Ph}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="__type__",Mj="__max__",ih={mapValue:{}},mw="__vector__",jh="value";function Rr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xg(n)?4:Pj(n)?9007199254740991:Dj(n)?10:11:et(28295,{value:n})}function Qi(n,e){if(n===e)return!0;const t=Rr(n);if(t!==Rr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pu(n).isEqual(pu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Cr(a.timestampValue),h=Cr(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Ir(a.bytesValue).isEqual(Ir(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return yn(a.geoPointValue.latitude)===yn(l.geoPointValue.latitude)&&yn(a.geoPointValue.longitude)===yn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return yn(a.integerValue)===yn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=yn(a.doubleValue),h=yn(l.doubleValue);return u===h?Dh(u)===Dh(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Ol(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(cS(u)!==cS(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!Qi(u[p],h[p])))return!1;return!0})(n,e);default:return et(52216,{left:n})}}function xu(n,e){return(n.values||[]).find((t=>Qi(t,e)))!==void 0}function Vl(n,e){if(n===e)return 0;const t=Rr(n),s=Rr(e);if(t!==s)return _t(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return _t(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=yn(l.integerValue||l.doubleValue),p=yn(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return dS(n.timestampValue,e.timestampValue);case 4:return dS(pu(n),pu(e));case 5:return kp(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=Ir(l),p=Ir(u);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),p=u.split("/");for(let f=0;f<h.length&&f<p.length;f++){const b=_t(h[f],p[f]);if(b!==0)return b}return _t(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=_t(yn(l.latitude),yn(u.latitude));return h!==0?h:_t(yn(l.longitude),yn(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hS(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,E,R,k;const h=l.fields||{},p=u.fields||{},f=(T=h[jh])==null?void 0:T.arrayValue,b=(E=p[jh])==null?void 0:E.arrayValue,_=_t(((R=f==null?void 0:f.values)==null?void 0:R.length)||0,((k=b==null?void 0:b.values)==null?void 0:k.length)||0);return _!==0?_:hS(f,b)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ih.mapValue&&u===ih.mapValue)return 0;if(l===ih.mapValue)return 1;if(u===ih.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),f=u.fields||{},b=Object.keys(f);p.sort(),b.sort();for(let _=0;_<p.length&&_<b.length;++_){const T=kp(p[_],b[_]);if(T!==0)return T;const E=Vl(h[p[_]],f[b[_]]);if(E!==0)return E}return _t(p.length,b.length)})(n.mapValue,e.mapValue);default:throw et(23264,{he:t})}}function dS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _t(n,e);const t=Cr(n),s=Cr(e),a=_t(t.seconds,s.seconds);return a!==0?a:_t(t.nanos,s.nanos)}function hS(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Vl(t[a],s[a]);if(l)return l}return _t(t.length,s.length)}function Bl(n){return Cp(n)}function Cp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Cr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ir(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return qe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Cp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Cp(t.fields[u])}`;return a+"}"})(n.mapValue):et(61005,{value:n})}function ph(n){switch(Rr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gf(n);return e?16+ph(e):16;case 5:return 2*n.stringValue.length;case 6:return Ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+ph(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Lr(s.fields,((l,u)=>{a+=l.length+ph(u)})),a})(n.mapValue);default:throw et(13486,{value:n})}}function fS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ip(n){return!!n&&"integerValue"in n}function yg(n){return!!n&&"arrayValue"in n}function mS(n){return!!n&&"nullValue"in n}function pS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gh(n){return!!n&&"mapValue"in n}function Dj(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[fw])==null?void 0:s.stringValue)===mw}function ou(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Lr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ou(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(n.arrayValue.values[t]);return e}return{...n}}function Pj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Mj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!gh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=Jn.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=ou(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());gh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];gh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Lr(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Ss(ou(this.value))}}function pw(n){const e=[];return Lr(n.fields,((t,s)=>{const a=new Jn([t]);if(gh(s)){const l=pw(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new ts(e,0,rt.min(),rt.min(),rt.min(),Ss.empty(),0)}static newFoundDocument(e,t,s,a){return new ts(e,1,t,rt.min(),s,a,0)}static newNoDocument(e,t){return new ts(e,2,t,rt.min(),rt.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new ts(e,3,t,rt.min(),rt.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.position=e,this.inclusive=t}}function gS(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=qe.comparator(qe.fromName(u.referenceValue),t.key):s=Vl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function xS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function jj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{}class An extends gw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Uj(e,t,s):t==="array-contains"?new Bj(e,s):t==="in"?new Gj(e,s):t==="not-in"?new zj(e,s):t==="array-contains-any"?new Fj(e,s):new An(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Oj(e,s):new Vj(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vl(t,this.value)):t!==null&&Rr(this.value)===Rr(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends gw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ki(e,t)}matches(e){return xw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xw(n){return n.op==="and"}function yw(n){return Lj(n)&&xw(n)}function Lj(n){for(const e of n.filters)if(e instanceof ki)return!1;return!0}function Rp(n){if(n instanceof An)return n.field.canonicalString()+n.op.toString()+Bl(n.value);if(yw(n))return n.filters.map((e=>Rp(e))).join(",");{const e=n.filters.map((t=>Rp(t))).join(",");return`${n.op}(${e})`}}function bw(n,e){return n instanceof An?(function(s,a){return a instanceof An&&s.op===a.op&&s.field.isEqual(a.field)&&Qi(s.value,a.value)})(n,e):n instanceof ki?(function(s,a){return a instanceof ki&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&bw(u,a.filters[h])),!0):!1})(n,e):void et(19439)}function vw(n){return n instanceof An?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bl(t.value)}`})(n):n instanceof ki?(function(t){return t.op.toString()+" {"+t.getFilters().map(vw).join(" ,")+"}"})(n):"Filter"}class Uj extends An{constructor(e,t,s){super(e,t,s),this.key=qe.fromName(s.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oj extends An{constructor(e,t){super(e,"in",t),this.keys=_w("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Vj extends An{constructor(e,t){super(e,"not-in",t),this.keys=_w("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _w(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>qe.fromName(s.referenceValue)))}class Bj extends An{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yg(t)&&xu(t.arrayValue,this.value)}}class Gj extends An{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class zj extends An{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class Fj extends An{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>xu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function yS(n,e=null,t=[],s=[],a=null,l=null,u=null){return new Hj(n,e,t,s,a,l,u)}function bg(n){const e=lt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Rp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Bl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Bl(s))).join(",")),e.Te=t}return e.Te}function vg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xS(n.startAt,e.startAt)&&xS(n.endAt,e.endAt)}function Mp(n){return qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qj(n,e,t,s,a,l,u,h){return new nc(n,e,t,s,a,l,u,h)}function xf(n){return new nc(n)}function bS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tw(n){return n.collectionGroup!==null}function lu(n){const e=lt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Mn(Jn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new yu(l,s))})),t.has(Jn.keyField().canonicalString())||e.Ie.push(new yu(Jn.keyField(),s))}return e.Ie}function qi(n){const e=lt(n);return e.Ee||(e.Ee=Kj(e,lu(n))),e.Ee}function Kj(n,e){if(n.limitType==="F")return yS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new yu(a.field,l)}));const t=n.endAt?new Lh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Lh(n.startAt.position,n.startAt.inclusive):null;return yS(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Dp(n,e){const t=n.filters.concat([e]);return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uh(n,e,t){return new nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yf(n,e){return vg(qi(n),qi(e))&&n.limitType===e.limitType}function Sw(n){return`${bg(qi(n))}|lt:${n.limitType}`}function wl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>vw(a))).join(", ")}]`),pf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Bl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Bl(a))).join(",")),`Target(${s})`})(qi(n))}; limitType=${n.limitType})`}function bf(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):qe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of lu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,p){const f=gS(u,h,p);return u.inclusive?f<=0:f<0})(s.startAt,lu(s),a)||s.endAt&&!(function(u,h,p){const f=gS(u,h,p);return u.inclusive?f>=0:f>0})(s.endAt,lu(s),a))})(n,e)}function $j(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ew(n){return(e,t)=>{let s=!1;for(const a of lu(n)){const l=Yj(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function Yj(n,e,t){const s=n.field.isKeyField()?qe.comparator(e.key,t.key):(function(l,u,h){const p=u.data.field(l),f=h.data.field(l);return p!==null&&f!==null?Vl(p,f):et(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return ow(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=new rn(qe.comparator);function Ca(){return Jj}const ww=new rn(qe.comparator);function su(...n){let e=ww;for(const t of n)e=e.insert(t.key,t);return e}function Nw(n){let e=ww;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function yo(){return cu()}function Aw(){return cu()}function cu(){return new Do((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Qj=new rn(qe.comparator),Wj=new Mn(qe.comparator);function Tt(...n){let e=Wj;for(const t of n)e=e.add(t);return e}const Xj=new Mn(_t);function Zj(){return Xj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function kw(n){return{integerValue:""+n}}function e3(n,e){return Aj(e)?kw(e):_g(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function t3(n,e,t){return n instanceof Oh?(function(a,l){const u={fields:{[uw]:{stringValue:cw},[hw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&xg(l)&&(l=gf(l)),l&&(u.fields[dw]=l),{mapValue:u}})(t,e):n instanceof bu?Iw(n,e):n instanceof vu?Rw(n,e):(function(a,l){const u=Cw(a,l),h=vS(u)+vS(a.Ae);return Ip(u)&&Ip(a.Ae)?kw(h):_g(a.serializer,h)})(n,e)}function n3(n,e,t){return n instanceof bu?Iw(n,e):n instanceof vu?Rw(n,e):t}function Cw(n,e){return n instanceof Vh?(function(s){return Ip(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Oh extends vf{}class bu extends vf{constructor(e){super(),this.elements=e}}function Iw(n,e){const t=Mw(e);for(const s of n.elements)t.some((a=>Qi(a,s)))||t.push(s);return{arrayValue:{values:t}}}class vu extends vf{constructor(e){super(),this.elements=e}}function Rw(n,e){let t=Mw(e);for(const s of n.elements)t=t.filter((a=>!Qi(a,s)));return{arrayValue:{values:t}}}class Vh extends vf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vS(n){return yn(n.integerValue||n.doubleValue)}function Mw(n){return yg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function s3(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof bu&&a instanceof bu||s instanceof vu&&a instanceof vu?Ol(s.elements,a.elements,Qi):s instanceof Vh&&a instanceof Vh?Qi(s.Ae,a.Ae):s instanceof Oh&&a instanceof Oh})(n.transform,e.transform)}class i3{constructor(e,t){this.version=e,this.transformResults=t}}class ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _f{}function Dw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tg(n.key,ri.none()):new Au(n.key,n.data,ri.none());{const t=n.data,s=Ss.empty();let a=new Mn(Jn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Ur(n.key,s,new Vs(a.toArray()),ri.none())}}function a3(n,e,t){n instanceof Au?(function(a,l,u){const h=a.value.clone(),p=TS(a.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ur?(function(a,l,u){if(!xh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=TS(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(Pw(a)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function uu(n,e,t,s){return n instanceof Au?(function(l,u,h,p){if(!xh(l.precondition,u))return h;const f=l.value.clone(),b=SS(l.fieldTransforms,p,u);return f.setAll(b),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(n,e,t,s):n instanceof Ur?(function(l,u,h,p){if(!xh(l.precondition,u))return h;const f=SS(l.fieldTransforms,p,u),b=u.data;return b.setAll(Pw(l)),b.setAll(f),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,u,h){return xh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function r3(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=Cw(s.transform,a||null);l!=null&&(t===null&&(t=Ss.empty()),t.set(s.field,l))}return t||null}function _S(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ol(s,a,((l,u)=>s3(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Au extends _f{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ur extends _f{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Pw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function TS(n,e,t){const s=new Map;Pt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,n3(u,h,t[a]))}return s}function SS(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,t3(l,u,e))}return s}class Tg extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o3 extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&a3(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=uu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=uu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Aw();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const p=Dw(u,h);p!==null&&s.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(rt.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tt())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,((t,s)=>_S(t,s)))&&Ol(this.baseMutations,e.baseMutations,((t,s)=>_S(t,s)))}}class Sg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return Qj})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new Sg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn,wt;function d3(n){switch(n){case pe.OK:return et(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return et(15467,{code:n})}}function jw(n){if(n===void 0)return ka("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Nn.OK:return pe.OK;case Nn.CANCELLED:return pe.CANCELLED;case Nn.UNKNOWN:return pe.UNKNOWN;case Nn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Nn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Nn.INTERNAL:return pe.INTERNAL;case Nn.UNAVAILABLE:return pe.UNAVAILABLE;case Nn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Nn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Nn.NOT_FOUND:return pe.NOT_FOUND;case Nn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Nn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Nn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Nn.ABORTED:return pe.ABORTED;case Nn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Nn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Nn.DATA_LOSS:return pe.DATA_LOSS;default:return et(39323,{code:n})}}(wt=Nn||(Nn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=new wr([4294967295,4294967295],0);function ES(n){const e=h3().encode(n),t=new Q1;return t.update(e),new Uint8Array(t.digest())}function wS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wr([t,s],0),new wr([a,l],0)]}class Eg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new iu(`Invalid padding: ${t}`);if(s<0)throw new iu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new iu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(wr.fromNumber(s)));return a.compare(f3)===1&&(a=new wr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ES(e),[s,a]=wS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Eg(l,a,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=ES(e),[s,a]=wS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Tf(rt.min(),a,new rn(_t),Ca(),Tt())}}class ku{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ku(s,t,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class Lw{constructor(e,t){this.targetId=e,this.Ce=t}}class Uw{constructor(e,t,s=Wn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class NS{constructor(){this.ve=0,this.Fe=AS(),this.Me=Wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Tt(),t=Tt(),s=Tt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:et(38017,{changeType:l})}})),new ku(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=AS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class m3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ca(),this.Je=ah(),this.He=ah(),this.Ye=new rn(_t)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:et(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Mp(l))if(s===0){const u=new qe(l.path);this.et(t,u,ts.newNoDocument(u,rt.min()))}else Pt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),p=h?this.ct(h,e,u):1;if(p!==0){this.it(t);const f=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=Ir(s).toUint8Array()}catch(p){if(p instanceof lw)return Ul("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Eg(u,a,l)}catch(p){return Ul(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&Mp(h.target)){const p=new qe(h.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,ts.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=Tt();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((p=>{const f=this.ot(p);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Tf(e,t,this.Ye,this.je,s);return this.je=Ca(),this.Je=ah(),this.He=ah(),this.Ye=new rn(_t),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new NS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Mn(_t),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Mn(_t),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ah(){return new rn(qe.comparator)}function AS(){return new rn(qe.comparator)}const p3={asc:"ASCENDING",desc:"DESCENDING"},g3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x3={and:"AND",or:"OR"};class y3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pp(n,e){return n.useProto3Json||pf(e)?e:{value:e}}function Bh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ow(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function b3(n,e){return Bh(n,e.toTimestamp())}function Ki(n){return Pt(!!n,49232),rt.fromTimestamp((function(t){const s=Cr(t);return new Zt(s.seconds,s.nanos)})(n))}function wg(n,e){return jp(n,e).canonicalString()}function jp(n,e){const t=(function(a){return new Jt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Vw(n){const e=Jt.fromString(n);return Pt(Hw(e),10190,{key:e.toString()}),e}function Lp(n,e){return wg(n.databaseId,e.path)}function W0(n,e){const t=Vw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Gw(t))}function Bw(n,e){return wg(n.databaseId,e)}function v3(n){const e=Vw(n);return e.length===4?Jt.emptyPath():Gw(e)}function Up(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gw(n){return Pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kS(n,e,t){return{name:Lp(n,e),fields:t.value.mapValue.fields}}function _3(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:et(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(f,b){return f.useProto3Json?(Pt(b===void 0||typeof b=="string",58123),Wn.fromBase64String(b||"")):(Pt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Wn.fromUint8Array(b||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(f){const b=f.code===void 0?pe.UNKNOWN:jw(f.code);return new Ie(b,f.message||"")})(u);t=new Uw(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=W0(n,s.document.name),l=Ki(s.document.updateTime),u=s.document.createTime?Ki(s.document.createTime):rt.min(),h=new Ss({mapValue:{fields:s.document.fields}}),p=ts.newFoundDocument(a,l,u,h),f=s.targetIds||[],b=s.removedTargetIds||[];t=new yh(f,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=W0(n,s.document),l=s.readTime?Ki(s.readTime):rt.min(),u=ts.newNoDocument(a,l),h=s.removedTargetIds||[];t=new yh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=W0(n,s.document),l=s.removedTargetIds||[];t=new yh([],l,a,null)}else{if(!("filter"in e))return et(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new u3(a,l),h=s.targetId;t=new Lw(h,u)}}return t}function T3(n,e){let t;if(e instanceof Au)t={update:kS(n,e.key,e.value)};else if(e instanceof Tg)t={delete:Lp(n,e.key)};else if(e instanceof Ur)t={update:kS(n,e.key,e.data),updateMask:R3(e.fieldMask)};else{if(!(e instanceof o3))return et(16599,{Vt:e.type});t={verify:Lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof Oh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof bu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof vu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Vh)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw et(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:b3(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:et(27497)})(n,e.precondition)),t}function S3(n,e){return n&&n.length>0?(Pt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Ki(a.updateTime):Ki(l);return u.isEqual(rt.min())&&(u=Ki(l)),new i3(u,a.transformResults||[])})(t,e)))):[]}function E3(n,e){return{documents:[Bw(n,e.path)]}}function w3(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Bw(n,a);const l=(function(f){if(f.length!==0)return Fw(ki.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(f){if(f.length!==0)return f.map((b=>(function(T){return{field:Nl(T.field),direction:k3(T.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Pp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:a}}function N3(n){let e=v3(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Pt(s===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(_){const T=zw(_);return T instanceof ki&&yw(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(R){return new yu(Al(R.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,pf(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(_){const T=!!_.before,E=_.values||[];return new Lh(E,T)})(t.startAt));let f=null;return t.endAt&&(f=(function(_){const T=!_.before,E=_.values||[];return new Lh(E,T)})(t.endAt)),qj(e,a,u,l,h,"F",p,f)}function A3(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Al(t.unaryFilter.field);return An.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Al(t.unaryFilter.field);return An.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Al(t.unaryFilter.field);return An.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Al(t.unaryFilter.field);return An.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}})(n):n.fieldFilter!==void 0?(function(t){return An.create(Al(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ki.create(t.compositeFilter.filters.map((s=>zw(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return et(1026)}})(t.compositeFilter.op))})(n):et(30097,{filter:n})}function k3(n){return p3[n]}function C3(n){return g3[n]}function I3(n){return x3[n]}function Nl(n){return{fieldPath:n.canonicalString()}}function Al(n){return Jn.fromServerFormat(n.fieldPath)}function Fw(n){return n instanceof An?(function(t){if(t.op==="=="){if(pS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NAN"}};if(mS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NAN"}};if(mS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(t.field),op:C3(t.op),value:t.value}}})(n):n instanceof ki?(function(t){const s=t.getFilters().map((a=>Fw(a)));return s.length===1?s[0]:{compositeFilter:{op:I3(t.op),filters:s}}})(n):et(54877,{filter:n})}function R3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Hw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t,s,a,l=rt.min(),u=rt.min(),h=Wn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.yt=e}}function D3(n){const e=N3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.Cn=new j3}addToCollectionParentIndex(e,t){return this.Cn.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(kr.min())}updateCollectionGroup(e,t,s){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class j3{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Mn(Jt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Mn(Jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qw=41943040;class _s{static withCacheSize(e){return new _s(e,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s.DEFAULT_COLLECTION_PERCENTILE=10,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_s.DEFAULT=new _s(qw,_s.DEFAULT_COLLECTION_PERCENTILE,_s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_s.DISABLED=new _s(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gl(0)}static cr(){return new Gl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="LruGarbageCollector",L3=1048576;function RS([n,e],[t,s]){const a=_t(n,t);return a===0?_t(e,s):a}class U3{constructor(e){this.Ir=e,this.buffer=new Mn(RS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();RS(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class O3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(IS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tc(t)?Le(IS,"Ignoring IndexedDB error during garbage collection: ",t):await ec(t)}await this.Vr(3e5)}))}}class V3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return be.resolve(mf.ce);const s=new U3(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(CS)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,h,p,f;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(f=Date.now(),El()<=vt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(f-p)+`ms
Total Duration: ${f-b}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function B3(n,e){return new V3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.changes=new Do((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ts.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?be.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&uu(s.mutation,a,Vs.empty(),Zt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Tt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Tt()){const a=yo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=su();return l.forEach(((h,p)=>{u=u.insert(h,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=yo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Tt())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,a){let l=Ca();const u=cu(),h=(function(){return cu()})();return t.forEach(((p,f)=>{const b=s.get(f.key);a.has(f.key)&&(b===void 0||b.mutation instanceof Ur)?l=l.insert(f.key,f):b!==void 0?(u.set(f.key,b.mutation.getFieldMask()),uu(b.mutation,f,b.mutation.getFieldMask(),Zt.now())):u.set(f.key,Vs.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((f,b)=>u.set(f,b))),t.forEach(((f,b)=>h.set(f,new z3(b,u.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=cu();let a=new rn(((u,h)=>u-h)),l=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((p=>{const f=t.get(p);if(f===null)return;let b=s.get(p)||Vs.empty();b=h.applyToLocalView(f,b),s.set(p,b);const _=(a.get(h.batchId)||Tt()).add(p);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),f=p.key,b=p.value,_=Aw();b.forEach((T=>{if(!l.has(T)){const E=Dw(t.get(T),s.get(T));E!==null&&_.set(T,E),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,_))}return be.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return qe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):be.resolve(yo());let h=mu,p=l;return u.next((f=>be.forEach(f,((b,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(b)?be.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{p=p.insert(b,T)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,p,f,Tt()))).next((b=>({batchId:h,changes:Nw(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next((s=>{let a=su();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=su();return this.indexManager.getCollectionParents(e,l).next((h=>be.forEach(h,(p=>{const f=(function(_,T){return new nc(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,s,a).next((b=>{b.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((p,f)=>{const b=f.getKey();u.get(b)===null&&(u=u.insert(b,ts.newInvalidDocument(b)))}));let h=su();return u.forEach(((p,f)=>{const b=l.get(p);b!==void 0&&uu(b.mutation,f,Vs.empty(),Zt.now()),bf(t,f)&&(h=h.insert(p,f))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return be.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Ki(a.createTime)}})(t)),be.resolve()}getNamedQuery(e,t){return be.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:D3(a.bundledQuery),readTime:Ki(a.readTime)}})(t)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.overlays=new rn(qe.comparator),this.qr=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const s=yo();return be.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),be.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),be.resolve()}getOverlaysForCollection(e,t,s){const a=yo(),l=t.length+1,u=new qe(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,f=p.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return be.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new rn(((f,b)=>f-b));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>s){let b=l.get(f.largestBatchId);b===null&&(b=yo(),l=l.insert(f.largestBatchId,b)),b.set(f.getKey(),f)}}const h=yo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((f,b)=>h.set(f,b))),!(h.size()>=a)););return be.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new c3(t,s));let l=this.qr.get(t);l===void 0&&(l=Tt(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.sessionToken=Wn.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.Qr=new Mn(Ln.$r),this.Ur=new Mn(Ln.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ln(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ln(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new qe(new Jt([])),s=new Ln(t,e),a=new Ln(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new qe(new Jt([])),s=new Ln(t,e),a=new Ln(t,e+1);let l=Tt();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Ln(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ln{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return qe.comparator(e.key,t.key)||_t(e.Yr,t.Yr)}static Kr(e,t){return _t(e.Yr,t.Yr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Mn(Ln.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new l3(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new Ln(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return be.resolve(u)}lookupMutationBatch(e,t){return be.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return be.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?gg:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ln(t,0),a=new Ln(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),be.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Mn(_t);return t.forEach((a=>{const l=new Ln(a,0),u=new Ln(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),be.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;qe.isDocumentKey(l)||(l=l.child(""));const u=new Ln(new qe(l),0);let h=new Mn(_t);return this.Zr.forEachWhile((p=>{const f=p.key.path;return!!s.isPrefixOf(f)&&(f.length===a&&(h=h.add(p.Yr)),!0)}),u),be.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Pt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return be.forEach(t.mutations,(a=>{const l=new Ln(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ln(t,0),a=this.Zr.firstAfterOrEqual(s);return be.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.ri=e,this.docs=(function(){return new rn(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return be.resolve(s?s.document.mutableCopy():ts.newInvalidDocument(t))}getEntries(e,t){let s=Ca();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():ts.newInvalidDocument(a))})),be.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Ca();const u=t.path,h=new qe(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:f,value:{document:b}}=p.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||Sj(Tj(b),s)<=0||(a.has(b.key)||bf(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return be.resolve(l)}getAllFromCollectionGroup(e,t,s,a){et(9500)}ii(e,t){return be.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new J3(this)}getSize(e){return be.resolve(this.size)}}class J3 extends G3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),be.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.persistence=e,this.si=new Do((t=>bg(t)),vg),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.oi=0,this._i=new Ng,this.targetCount=0,this.ai=Gl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),be.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Gl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Pr(t),be.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),be.waitFor(l).next((()=>a))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return be.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),be.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),be.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),be.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return be.resolve(s)}containsKey(e,t){return be.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,t){this.ui={},this.overlays={},this.ci=new mf(0),this.li=!1,this.li=!0,this.hi=new K3,this.referenceDelegate=e(this),this.Pi=new Q3(this),this.indexManager=new P3,this.remoteDocumentCache=(function(a){return new Y3(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new M3(t),this.Ii=new H3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new q3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new $3(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Le("MemoryPersistence","Starting transaction:",e);const a=new W3(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return be.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class W3 extends wj{constructor(e){super(),this.currentSequenceNumber=e}}class Ag{constructor(e){this.persistence=e,this.Ri=new Ng,this.Vi=null}static mi(e){return new Ag(e)}get fi(){if(this.Vi)return this.Vi;throw et(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),be.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),be.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(s=>{const a=qe.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,rt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return be.or([()=>be.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gh{constructor(e,t){this.persistence=e,this.pi=new Do((s=>kj(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=B3(this,t)}static mi(e,t){return new Gh(e,t)}Ei(){}di(e){return be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return be.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?be.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,l.removeEntry(u,rt.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),be.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),be.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),be.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ph(e.data.value)),t}br(e,t,s){return be.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return be.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Tt(),a=Tt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new kg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FP()?8:Nj(ss())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new X3;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(El()<=vt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",wl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(El()<=vt.DEBUG&&Le("QueryEngine","Query:",wl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(El()<=vt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",wl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(t))):be.resolve())}ys(e,t){if(bS(t))return be.resolve(null);let s=qi(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Uh(t,null,"F"),s=qi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Tt(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((p=>{const f=this.Ds(t,h);return this.Cs(t,f,u,p.readTime)?this.ys(e,Uh(t,null,"F")):this.vs(e,f,t,p)}))))})))))}ws(e,t,s,a){return bS(t)||a.isEqual(rt.min())?be.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?be.resolve(null):(El()<=vt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),wl(t)),this.vs(e,u,t,_j(a,mu)).next((h=>h)))}))}Ds(e,t){let s=new Mn(Ew(e));return t.forEach(((a,l)=>{bf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return El()<=vt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",wl(t)),this.ps.getDocumentsMatchingQuery(e,t,kr.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="LocalStore",eL=3e8;class tL{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new rn(_t),this.xs=new Do((l=>bg(l)),vg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function nL(n,e,t,s){return new tL(n,e,t,s)}async function $w(n,e){const t=lt(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let p=Tt();for(const f of a){u.push(f.batchId);for(const b of f.mutations)p=p.add(b.key)}for(const f of l){h.push(f.batchId);for(const b of f.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(s,p).next((f=>({Ls:f,removedBatchIds:u,addedBatchIds:h})))}))}))}function sL(n,e){const t=lt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,f,b){const _=f.batch,T=_.keys();let E=be.resolve();return T.forEach((R=>{E=E.next((()=>b.getEntry(p,R))).next((k=>{const C=f.docVersions.get(R);Pt(C!==null,48541),k.version.compareTo(C)<0&&(_.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),b.addEntry(k)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let p=Tt();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(p=p.add(h.batch.mutations[f].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function Yw(n){const e=lt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function iL(n,e){const t=lt(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((b,_)=>{const T=a.get(_);if(!T)return;h.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,_))));let E=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(Wn.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):b.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(b.resumeToken,s)),a=a.insert(_,E),(function(k,C,U){return k.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=eL?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(T,E,b)&&h.push(t.Pi.updateTargetData(l,E))}));let p=Ca(),f=Tt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),h.push(aL(l,u,e.documentUpdates).next((b=>{p=b.ks,f=b.qs}))),!s.isEqual(rt.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(b)}return be.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,f))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function aL(n,e,t){let s=Tt(),a=Tt();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=Ca();return t.forEach(((h,p)=>{const f=l.get(h);p.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(rt.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!f.isValidDocument()||p.version.compareTo(f.version)>0||p.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):Le(Cg,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function rL(n,e){const t=lt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=gg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function oL(n,e){const t=lt(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,be.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new _r(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Op(n,e,t){const s=lt(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!tc(u))throw u;Le(Cg,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function MS(n,e,t){const s=lt(n);let a=rt.min(),l=Tt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,f,b){const _=lt(p),T=_.xs.get(b);return T!==void 0?be.resolve(_.Ms.get(T)):_.Pi.getTargetData(f,b)})(s,u,qi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:rt.min(),t?l:Tt()))).next((h=>(lL(s,$j(e),h),{documents:h,Qs:l})))))}function lL(n,e,t){let s=n.Os.get(e)||rt.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class DS{constructor(){this.activeTargetIds=Zj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cL{constructor(){this.Mo=new DS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new DS,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="ConnectivityMonitor";class jS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(PS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(PS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Vp(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="RestConnection",dL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Ph?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Vp(),h=this.zo(e,t.toUriEncodedString());Le(X0,`Sending RPC '${e}' ${u}:`,h,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:f}=new URL(h),b=Wl(f);return this.Jo(e,h,p,s,b).then((_=>(Le(X0,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Ul(X0,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=dL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection";class mL extends hL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Vp();return new Promise(((h,p)=>{const f=new W1;f.setWithCredentials(!0),f.listenOnce(X1.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case mh.NO_ERROR:const _=f.getResponseJson();Le(Zn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case mh.TIMEOUT:Le(Zn,`RPC '${e}' ${u} timed out`),p(new Ie(pe.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const T=f.getStatus();if(Le(Zn,`RPC '${e}' ${u} failed with status:`,T,"response text:",f.getResponseText()),T>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const R=E==null?void 0:E.error;if(R&&R.status&&R.message){const k=(function(U){const M=U.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(M)>=0?M:pe.UNKNOWN})(R.status);p(new Ie(k,R.message))}else p(new Ie(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else p(new Ie(pe.UNAVAILABLE,"Connection failed."));break;default:et(9055,{l_:e,streamId:u,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Le(Zn,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);Le(Zn,`RPC '${e}' ${u} sending request:`,a),f.send(t,"POST",b,s,15)}))}T_(e,t,s){const a=Vp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tw(),h=ew(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(p.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const b=l.join("");Le(Zn,`Creating RPC '${e}' stream ${a}: ${b}`,p);const _=u.createWebChannel(b,p);this.I_(_);let T=!1,E=!1;const R=new fL({Yo:C=>{E?Le(Zn,`Not sending because RPC '${e}' stream ${a} is closed:`,C):(T||(Le(Zn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),T=!0),Le(Zn,`RPC '${e}' stream ${a} sending:`,C),_.send(C))},Zo:()=>_.close()}),k=(C,U,M)=>{C.listen(U,(G=>{try{M(G)}catch(q){setTimeout((()=>{throw q}),0)}}))};return k(_,nu.EventType.OPEN,(()=>{E||(Le(Zn,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),k(_,nu.EventType.CLOSE,(()=>{E||(E=!0,Le(Zn,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(_))})),k(_,nu.EventType.ERROR,(C=>{E||(E=!0,Ul(Zn,`RPC '${e}' stream ${a} transport errored. Name:`,C.name,"Message:",C.message),R.a_(new Ie(pe.UNAVAILABLE,"The operation could not be completed")))})),k(_,nu.EventType.MESSAGE,(C=>{var U;if(!E){const M=C.data[0];Pt(!!M,16349);const G=M,q=(G==null?void 0:G.error)||((U=G[0])==null?void 0:U.error);if(q){Le(Zn,`RPC '${e}' stream ${a} received error:`,q);const X=q.status;let J=(function(I){const P=Nn[I];if(P!==void 0)return jw(P)})(X),D=q.message;J===void 0&&(J=pe.INTERNAL,D="Unknown error status: "+X+" with message "+q.message),E=!0,R.a_(new Ie(J,D)),_.close()}else Le(Zn,`RPC '${e}' stream ${a} received:`,M),R.u_(M)}})),k(h,Z1.STAT_EVENT,(C=>{C.stat===Ap.PROXY?Le(Zn,`RPC '${e}' stream ${a} detected buffering proxy`):C.stat===Ap.NOPROXY&&Le(Zn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Z0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n){return new y3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="PersistentStream";class Qw{constructor(e,t,s,a,l,u,h,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(ka(t.toString()),ka("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Ie(pe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Le(LS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Le(LS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pL extends Qw{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_3(this.serializer,e),s=(function(l){if(!("targetChange"in l))return rt.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?rt.min():u.readTime?Ki(u.readTime):rt.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Up(this.serializer),t.addTarget=(function(l,u){let h;const p=u.target;if(h=Mp(p)?{documents:E3(l,p)}:{query:w3(l,p).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Ow(l,u.resumeToken);const f=Pp(l,u.expectedCount);f!==null&&(h.expectedCount=f)}else if(u.snapshotVersion.compareTo(rt.min())>0){h.readTime=Bh(l,u.snapshotVersion.toTimestamp());const f=Pp(l,u.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const s=A3(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Up(this.serializer),t.removeTarget=e,this.q_(t)}}class gL extends Qw{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=S3(e.writeResults,e.commitTime),s=Ki(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Up(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>T3(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{}class yL extends xL{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,jp(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ie(pe.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,jp(t,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(pe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ka(t),this.aa=!1):Le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class vL{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Po(this)&&(Le(Ao,"Restarting streams for network reachability change."),await(async function(p){const f=lt(p);f.Ea.add(4),await Cu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ef(f)})(this))}))})),this.Ra=new bL(s,a)}}async function Ef(n){if(Po(n))for(const e of n.da)await e(!0)}async function Cu(n){for(const e of n.da)await e(!1)}function Ww(n,e){const t=lt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dg(t)?Mg(t):sc(t).O_()&&Rg(t,e))}function Ig(n,e){const t=lt(n),s=sc(t);t.Ia.delete(e),s.O_()&&Xw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Po(t)&&t.Ra.set("Unknown"))}function Rg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sc(n).Y_(e)}function Xw(n,e){n.Va.Ue(e),sc(n).Z_(e)}function Mg(n){n.Va=new m3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),sc(n).start(),n.Ra.ua()}function Dg(n){return Po(n)&&!sc(n).x_()&&n.Ia.size>0}function Po(n){return lt(n).Ea.size===0}function Zw(n){n.Va=void 0}async function _L(n){n.Ra.set("Online")}async function TL(n){n.Ia.forEach(((e,t)=>{Rg(n,e)}))}async function SL(n,e){Zw(n),Dg(n)?(n.Ra.ha(e),Mg(n)):n.Ra.set("Unknown")}async function EL(n,e,t){if(n.Ra.set("Online"),e instanceof Uw&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){Le(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zh(n,s)}else if(e instanceof yh?n.Va.Ze(e):e instanceof Lw?n.Va.st(e):n.Va.tt(e),!t.isEqual(rt.min()))try{const s=await Yw(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((p,f)=>{if(p.resumeToken.approximateByteSize()>0){const b=l.Ia.get(f);b&&l.Ia.set(f,b.withResumeToken(p.resumeToken,u))}})),h.targetMismatches.forEach(((p,f)=>{const b=l.Ia.get(p);if(!b)return;l.Ia.set(p,b.withResumeToken(Wn.EMPTY_BYTE_STRING,b.snapshotVersion)),Xw(l,p);const _=new _r(b.target,p,f,b.sequenceNumber);Rg(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){Le(Ao,"Failed to raise snapshot:",s),await zh(n,s)}}async function zh(n,e,t){if(!tc(e))throw e;n.Ea.add(1),await Cu(n),n.Ra.set("Offline"),t||(t=()=>Yw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Le(Ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ef(n)}))}function eN(n,e){return e().catch((t=>zh(n,t,e)))}async function wf(n){const e=lt(n),t=Mr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gg;for(;wL(e);)try{const a=await rL(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,NL(e,a)}catch(a){await zh(e,a)}tN(e)&&nN(e)}function wL(n){return Po(n)&&n.Ta.length<10}function NL(n,e){n.Ta.push(e);const t=Mr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function tN(n){return Po(n)&&!Mr(n).x_()&&n.Ta.length>0}function nN(n){Mr(n).start()}async function AL(n){Mr(n).ra()}async function kL(n){const e=Mr(n);for(const t of n.Ta)e.ea(t.mutations)}async function CL(n,e,t){const s=n.Ta.shift(),a=Sg.from(s,e,t);await eN(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await wf(n)}async function IL(n,e){e&&Mr(n).X_&&await(async function(s,a){if((function(u){return d3(u)&&u!==pe.ABORTED})(a.code)){const l=s.Ta.shift();Mr(s).B_(),await eN(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await wf(s)}})(n,e),tN(n)&&nN(n)}async function US(n,e){const t=lt(n);t.asyncQueue.verifyOperationInProgress(),Le(Ao,"RemoteStore received new credentials");const s=Po(t);t.Ea.add(3),await Cu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ef(t)}async function RL(n,e){const t=lt(n);e?(t.Ea.delete(2),await Ef(t)):e||(t.Ea.add(2),await Cu(t),t.Ra.set("Unknown"))}function sc(n){return n.ma||(n.ma=(function(t,s,a){const l=lt(t);return l.sa(),new pL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:_L.bind(null,n),t_:TL.bind(null,n),r_:SL.bind(null,n),H_:EL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Dg(n)?Mg(n):n.Ra.set("Unknown")):(await n.ma.stop(),Zw(n))}))),n.ma}function Mr(n){return n.fa||(n.fa=(function(t,s,a){const l=lt(t);return l.sa(),new gL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:AL.bind(null,n),r_:IL.bind(null,n),ta:kL.bind(null,n),na:CL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await wf(n)):(await n.fa.stop(),n.Ta.length>0&&(Le(Ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new Pg(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jg(n,e){if(ka("AsyncQueue",`${e}: ${n}`),tc(n))return new Ie(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||qe.comparator(t.key,s.key):(t,s)=>qe.comparator(t.key,s.key),this.keyedMap=su(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ml;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.ga=new rn(qe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):et(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class zl{constructor(e,t,s,a,l,u,h,p,f){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=f}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new zl(e,t,Ml.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class DL{constructor(){this.queries=VS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=lt(t),l=a.queries;a.queries=VS(),l.forEach(((u,h)=>{for(const p of h.Sa)p.onError(s)}))})(this,new Ie(pe.ABORTED,"Firestore shutting down"))}}function VS(){return new Do((n=>Sw(n)),yf)}async function Lg(n,e){const t=lt(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new ML,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=jg(u,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Og(t)}async function Ug(n,e){const t=lt(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function PL(n,e){const t=lt(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&Og(t)}function jL(n,e,t){const s=lt(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function Og(n){n.Ca.forEach((e=>{e.next()}))}var Bp,BS;(BS=Bp||(Bp={})).Ma="default",BS.Cache="cache";class Vg{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new zl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.key=e}}class iN{constructor(e){this.key=e}}class LL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Tt(),this.mutatedKeys=Tt(),this.eu=Ew(e),this.tu=new Ml(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new OS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,_)=>{const T=a.get(b),E=bf(this.query,_)?_:null,R=!!T&&this.mutatedKeys.has(T.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;T&&E?T.data.isEqual(E.data)?R!==k&&(s.track({type:3,doc:E}),C=!0):this.su(T,E)||(s.track({type:2,doc:E}),C=!0,(p&&this.eu(E,p)>0||f&&this.eu(E,f)<0)&&(h=!0)):!T&&E?(s.track({type:0,doc:E}),C=!0):T&&!E&&(s.track({type:1,doc:T}),C=!0,(p||f)&&(h=!0)),C&&(E?(u=u.add(E),l=k?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,_)=>(function(E,R){const k=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Rt:C})}};return k(E)-k(R)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,f=p!==this.Za;return this.Za=p,u.length!==0||f?{snapshot:new zl(this.query,e.tu,l,u,e.mutatedKeys,p===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Tt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new iN(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new sN(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bg="SyncEngine";class UL{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class OL{constructor(e){this.key=e,this.hu=!1}}class VL{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Do((h=>Sw(h)),yf),this.Iu=new Map,this.Eu=new Set,this.du=new rn(qe.comparator),this.Au=new Map,this.Ru=new Ng,this.Vu={},this.mu=new Map,this.fu=Gl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BL(n,e,t=!0){const s=uN(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await aN(s,e,t,!0),a}async function GL(n,e){const t=uN(n);await aN(t,e,!0,!1)}async function aN(n,e,t,s){const a=await oL(n.localStore,qi(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await zL(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Ww(n.remoteStore,a),h}async function zL(n,e,t,s,a){n.pu=(_,T,E)=>(async function(k,C,U,M){let G=C.view.ru(U);G.Cs&&(G=await MS(k.localStore,C.query,!1).then((({documents:D})=>C.view.ru(D,G))));const q=M&&M.targetChanges.get(C.targetId),X=M&&M.targetMismatches.get(C.targetId)!=null,J=C.view.applyChanges(G,k.isPrimaryClient,q,X);return zS(k,C.targetId,J.au),J.snapshot})(n,_,T,E);const l=await MS(n.localStore,e,!0),u=new LL(e,l.Qs),h=u.ru(l.documents),p=ku.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),f=u.applyChanges(h,n.isPrimaryClient,p);zS(n,t,f.au);const b=new UL(e,t,u);return n.Tu.set(e,b),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function FL(n,e,t){const s=lt(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!yf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Op(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Ig(s.remoteStore,a.targetId),Gp(s,a.targetId)})).catch(ec)):(Gp(s,a.targetId),await Op(s.localStore,a.targetId,!0))}async function HL(n,e){const t=lt(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Ig(t.remoteStore,s.targetId))}async function qL(n,e,t){const s=XL(n);try{const a=await(function(u,h){const p=lt(u),f=Zt.now(),b=h.reduce(((E,R)=>E.add(R.key)),Tt());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let R=Ca(),k=Tt();return p.Ns.getEntries(E,b).next((C=>{R=C,R.forEach(((U,M)=>{M.isValidDocument()||(k=k.add(U))}))})).next((()=>p.localDocuments.getOverlayedDocuments(E,R))).next((C=>{_=C;const U=[];for(const M of h){const G=r3(M,_.get(M.key).overlayedDocument);G!=null&&U.push(new Ur(M.key,G,pw(G.value.mapValue),ri.exists(!0)))}return p.mutationQueue.addMutationBatch(E,f,U,h)})).next((C=>{T=C;const U=C.applyToLocalDocumentSet(_,k);return p.documentOverlayCache.saveOverlays(E,C.batchId,U)}))})).then((()=>({batchId:T.batchId,changes:Nw(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,p){let f=u.Vu[u.currentUser.toKey()];f||(f=new rn(_t)),f=f.insert(h,p),u.Vu[u.currentUser.toKey()]=f})(s,a.batchId,t),await Iu(s,a.changes),await wf(s.remoteStore)}catch(a){const l=jg(a,"Failed to persist write");t.reject(l)}}async function rN(n,e){const t=lt(n);try{const s=await iL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Pt(u.hu,14607):a.removedDocuments.size>0&&(Pt(u.hu,42227),u.hu=!1))})),await Iu(t,s,e)}catch(s){await ec(s)}}function GS(n,e,t){const s=lt(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const p=lt(u);p.onlineState=h;let f=!1;p.queries.forEach(((b,_)=>{for(const T of _.Sa)T.va(h)&&(f=!0)})),f&&Og(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function KL(n,e,t){const s=lt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new rn(qe.comparator);u=u.insert(l,ts.newNoDocument(l,rt.min()));const h=Tt().add(l),p=new Tf(rt.min(),new Map,new rn(_t),u,h);await rN(s,p),s.du=s.du.remove(l),s.Au.delete(e),Gg(s)}else await Op(s.localStore,e,!1).then((()=>Gp(s,e,t))).catch(ec)}async function $L(n,e){const t=lt(n),s=e.batch.batchId;try{const a=await sL(t.localStore,e);lN(t,s,null),oN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Iu(t,a)}catch(a){await ec(a)}}async function YL(n,e,t){const s=lt(n);try{const a=await(function(u,h){const p=lt(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let b;return p.mutationQueue.lookupMutationBatch(f,h).next((_=>(Pt(_!==null,37113),b=_.keys(),p.mutationQueue.removeMutationBatch(f,_)))).next((()=>p.mutationQueue.performConsistencyCheck(f))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(f,b,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,b))).next((()=>p.localDocuments.getDocuments(f,b)))}))})(s.localStore,e);lN(s,e,t),oN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Iu(s,a)}catch(a){await ec(a)}}function oN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function lN(n,e,t){const s=lt(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Gp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||cN(n,s)}))}function cN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ig(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Gg(n))}function zS(n,e,t){for(const s of t)s instanceof sN?(n.Ru.addReference(s.key,e),JL(n,s)):s instanceof iN?(Le(Bg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||cN(n,s.key)):et(19791,{wu:s})}function JL(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Le(Bg,"New document in limbo: "+t),n.Eu.add(s),Gg(n))}function Gg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new qe(Jt.fromString(e)),s=n.fu.next();n.Au.set(s,new OL(t)),n.du=n.du.insert(t,s),Ww(n.remoteStore,new _r(qi(xf(t.path)),s,"TargetPurposeLimboResolution",mf.ce))}}async function Iu(n,e,t){const s=lt(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,p)=>{u.push(s.pu(p,e,t).then((f=>{var b;if((f||t)&&s.isPrimaryClient){const _=f?!f.fromCache:(b=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(f){a.push(f);const _=kg.As(p.targetId,f);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(p,f){const b=lt(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>be.forEach(f,(T=>be.forEach(T.Es,(E=>b.persistence.referenceDelegate.addReference(_,T.targetId,E))).next((()=>be.forEach(T.ds,(E=>b.persistence.referenceDelegate.removeReference(_,T.targetId,E)))))))))}catch(_){if(!tc(_))throw _;Le(Cg,"Failed to update sequence numbers: "+_)}for(const _ of f){const T=_.targetId;if(!_.fromCache){const E=b.Ms.get(T),R=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(R);b.Ms=b.Ms.insert(T,k)}}})(s.localStore,l))}async function QL(n,e){const t=lt(n);if(!t.currentUser.isEqual(e)){Le(Bg,"User change. New user:",e.toKey());const s=await $w(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new Ie(pe.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Iu(t,s.Ls)}}function WL(n,e){const t=lt(n),s=t.Au.get(e);if(s&&s.hu)return Tt().add(s.key);{let a=Tt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function uN(n){const e=lt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KL.bind(null,e),e.Pu.H_=PL.bind(null,e.eventManager),e.Pu.yu=jL.bind(null,e.eventManager),e}function XL(n){const e=lt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$L.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YL.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nL(this.persistence,new Z3,e.initialUser,this.serializer)}Cu(e){return new Kw(Ag.mi,this.serializer)}Du(e){return new cL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class ZL extends Fh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pt(this.persistence.referenceDelegate instanceof Gh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new O3(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_s.withCacheSize(this.cacheSizeBytes):_s.DEFAULT;return new Kw((s=>Gh.mi(s,t)),this.serializer)}}class zp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>GS(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=QL.bind(null,this.syncEngine),await RL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DL})()}createDatastore(e){const t=Sf(e.databaseInfo.databaseId),s=(function(l){return new mL(l)})(e.databaseInfo);return(function(l,u,h,p){return new yL(l,u,h,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,h){return new vL(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>GS(this.syncEngine,t,0)),(function(){return jS.v()?new jS:new uL})())}createSyncEngine(e,t){return(function(a,l,u,h,p,f,b){const _=new VL(a,l,u,h,p,f);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=lt(a);Le(Ao,"RemoteStore shutting down."),l.Ea.add(5),await Cu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}zp.provider={build:()=>new zp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ka("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class eU{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=es.UNAUTHENTICATED,this.clientId=pg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{Le(Dr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Le(Dr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=jg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ep(n,e){n.asyncQueue.verifyOperationInProgress(),Le(Dr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await $w(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function FS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await tU(n);Le(Dr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>US(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>US(e.remoteStore,a))),n._onlineComponents=e}async function tU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le(Dr,"Using user provided OfflineComponentProvider");try{await ep(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===pe.FAILED_PRECONDITION||a.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ul("Error using user provided cache. Falling back to memory cache: "+t),await ep(n,new Fh)}}else Le(Dr,"Using default OfflineComponentProvider"),await ep(n,new ZL(void 0));return n._offlineComponents}async function dN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le(Dr,"Using user provided OnlineComponentProvider"),await FS(n,n._uninitializedComponentsProvider._online)):(Le(Dr,"Using default OnlineComponentProvider"),await FS(n,new zp))),n._onlineComponents}function nU(n){return dN(n).then((e=>e.syncEngine))}async function Hh(n){const e=await dN(n),t=e.eventManager;return t.onListen=BL.bind(null,e.syncEngine),t.onUnlisten=FL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HL.bind(null,e.syncEngine),t}function sU(n,e,t={}){const s=new wa;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,f){const b=new zg({next:T=>{b.Nu(),u.enqueueAndForget((()=>Ug(l,_)));const E=T.docs.has(h);!E&&T.fromCache?f.reject(new Ie(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&T.fromCache&&p&&p.source==="server"?f.reject(new Ie(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new Vg(xf(h.path),b,{includeMetadataChanges:!0,qa:!0});return Lg(l,_)})(await Hh(n),n.asyncQueue,e,t,s))),s.promise}function iU(n,e,t={}){const s=new wa;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,f){const b=new zg({next:T=>{b.Nu(),u.enqueueAndForget((()=>Ug(l,_))),T.fromCache&&p.source==="server"?f.reject(new Ie(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new Vg(h,b,{includeMetadataChanges:!0,qa:!0});return Lg(l,_)})(await Hh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="firestore.googleapis.com",qS=!0;class KS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fN,this.ssl=qS}else this.host=e.host,this.ssl=e.ssl??qS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L3)throw new Ie(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new cj;switch(s.type){case"firstParty":return new fj(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ie(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=HS.get(t);s&&(Le("ComponentProvider","Removing Datastore"),HS.delete(t),s.terminate())})(this),Promise.resolve()}}function aU(n,e,t,s={}){var f;n=Es(n,Nf);const a=Wl(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(z1(`https://${h}`),F1("Firestore",!0)),l.host!==fN&&l.host!==h&&Ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:s};if(!Eo(p,u)&&(n._setSettings(p),s.mockUserToken)){let b,_;if(typeof s.mockUserToken=="string")b=s.mockUserToken,_=es.MOCK_USER;else{b=PP(s.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ie(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new es(T)}n._authCredentials=new uj(new sw(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class fn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Nu(t,fn._jsonSchema))return new fn(e,s||null,new qe(Jt.fromString(t.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:kn("string",fn._jsonSchemaVersion),referencePath:kn("string")};class Nr extends Ua{constructor(e,t,s){super(e,t,xf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new qe(e))}withConverter(e){return new Nr(this.firestore,e,this._path)}}function ta(n,e,...t){if(n=Dn(n),iw("collection","path",e),n instanceof Nf){const s=Jt.fromString(e,...t);return aS(s),new Nr(n,null,s)}{if(!(n instanceof fn||n instanceof Nr))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Jt.fromString(e,...t));return aS(s),new Nr(n.firestore,null,s)}}function an(n,e,...t){if(n=Dn(n),arguments.length===1&&(e=pg.newId()),iw("doc","path",e),n instanceof Nf){const s=Jt.fromString(e,...t);return iS(s),new fn(n,null,new qe(s))}{if(!(n instanceof fn||n instanceof Nr))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Jt.fromString(e,...t));return iS(s),new fn(n.firestore,n instanceof Nr?n.converter:null,new qe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="AsyncQueue";class YS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jw(this,"async_queue_retry"),this._c=()=>{const s=Z0();s&&Le($S,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Z0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Z0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new wa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tc(e))throw e;Le($S,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ka("INTERNAL UNHANDLED ERROR: ",JS(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Pg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&et(47125,{Pc:JS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function JS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ia extends Nf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new YS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YS(e),this._firestoreClient=void 0,await e}}}function rU(n,e){const t=typeof n=="object"?n:$1(),s=typeof n=="string"?n:Ph,a=fg(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=MP("firestore");l&&aU(a,...l)}return a}function Af(n){if(n._terminated)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oU(n),n._firestoreClient}function oU(n){var s,a,l;const e=n._freezeSettings(),t=(function(h,p,f,b){return new Rj(h,p,f,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,hN(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new eU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ii(Wn.fromBase64String(e))}catch(t){throw new Ie(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ii(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,ii._jsonSchema))return ii.fromBase64String(e.bytes)}}ii._jsonSchemaVersion="firestore/bytes/1.0",ii._jsonSchema={type:kn("string",ii._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:kn("string",$i._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yi(e.vectorValues);throw new Ie(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:kn("string",Yi._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=/^__.*__$/;class cU{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}class mN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ur(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{Ac:n})}}class Hg{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pN(this.Ac)&&lU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uU{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Sf(e)}Cc(e,t,s,a=!1){return new Hg({Ac:e,methodName:t,Dc:s,path:Jn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cf(n){const e=n._freezeSettings(),t=Sf(n._databaseId);return new uU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gN(n,e,t,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);qg("Data must be an object, but it was:",u,s);const h=xN(s,u);let p,f;if(l.merge)p=new Vs(u.fieldMask),f=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const _ of l.mergeFields){const T=Fp(e,_,t);if(!u.contains(T))throw new Ie(pe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);bN(b,T)||b.push(T)}p=new Vs(b),f=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,f=u.fieldTransforms;return new cU(new Ss(h),p,f)}class If extends Fg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}function dU(n,e,t,s){const a=n.Cc(1,e,t);qg("Data must be an object, but it was:",a,s);const l=[],u=Ss.empty();Lr(s,((p,f)=>{const b=Kg(e,p,t);f=Dn(f);const _=a.yc(b);if(f instanceof If)l.push(b);else{const T=Ru(f,_);T!=null&&(l.push(b),u.set(b,T))}}));const h=new Vs(l);return new mN(u,h,a.fieldTransforms)}function hU(n,e,t,s,a,l){const u=n.Cc(1,e,t),h=[Fp(e,s,t)],p=[a];if(l.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)h.push(Fp(e,l[T])),p.push(l[T+1]);const f=[],b=Ss.empty();for(let T=h.length-1;T>=0;--T)if(!bN(f,h[T])){const E=h[T];let R=p[T];R=Dn(R);const k=u.yc(E);if(R instanceof If)f.push(E);else{const C=Ru(R,k);C!=null&&(f.push(E),b.set(E,C))}}const _=new Vs(f);return new mN(b,_,u.fieldTransforms)}function fU(n,e,t,s=!1){return Ru(t,n.Cc(s?4:3,e))}function Ru(n,e){if(yN(n=Dn(n)))return qg("Unsupported field value:",e,n),xN(n,e);if(n instanceof Fg)return(function(s,a){if(!pN(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let p=Ru(h,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=Dn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return e3(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Zt.fromDate(s);return{timestampValue:Bh(a.serializer,l)}}if(s instanceof Zt){const l=new Zt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(a.serializer,l)}}if(s instanceof $i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ii)return{bytesValue:Ow(a.serializer,s._byteString)};if(s instanceof fn){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Yi)return(function(u,h){return{mapValue:{fields:{[fw]:{stringValue:mw},[jh]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return _g(h.serializer,f)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${ff(s)}`)})(n,e)}function xN(n,e){const t={};return ow(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(n,((s,a)=>{const l=Ru(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function yN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Zt||n instanceof $i||n instanceof ii||n instanceof fn||n instanceof Fg||n instanceof Yi)}function qg(n,e,t){if(!yN(t)||!aw(t)){const s=ff(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Fp(n,e,t){if((e=Dn(e))instanceof kf)return e._internalPath;if(typeof e=="string")return Kg(n,e);throw qh("Field path arguments must be of type string or ",n,!1,void 0,t)}const mU=new RegExp("[~\\*/\\[\\]]");function Kg(n,e,t){if(e.search(mU)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kf(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qh(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${s}`),u&&(p+=` in document ${a}`),p+=")"),new Ie(pe.INVALID_ARGUMENT,h+n+p)}function bN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pU extends vN{data(){return super.data()}}function Rf(n,e){return typeof e=="string"?Kg(n,e):e instanceof kf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ie(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $g{}class Yg extends $g{}function ic(n,e,...t){let s=[];e instanceof $g&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((p=>p instanceof Jg)).length,h=l.filter((p=>p instanceof Mf)).length;if(u>1||u>0&&h>0)throw new Ie(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class Mf extends Yg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Mf(e,t,s)}_apply(e){const t=this._parse(e);return EN(e._query,t),new Ua(e.firestore,e.converter,Dp(e._query,t))}_parse(e){const t=Cf(e.firestore);return(function(l,u,h,p,f,b,_){let T;if(f.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){XS(_,b);const R=[];for(const k of _)R.push(WS(p,l,k));T={arrayValue:{values:R}}}else T=WS(p,l,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||XS(_,b),T=fU(h,u,_,b==="in"||b==="not-in");return An.create(f,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Fl(n,e,t){const s=e,a=Rf("where",n);return Mf._create(a,s,t)}class Jg extends $g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ki.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const p of h)EN(u,p),u=Dp(u,p)})(e._query,t),new Ua(e.firestore,e.converter,Dp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qg extends Yg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qg(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(l,u)})(e._query,this._field,this._direction);return new Ua(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new nc(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function TN(n,e="asc"){const t=e,s=Rf("orderBy",n);return Qg._create(s,t)}class Wg extends Yg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Wg(e,t,s)}_apply(e){return new Ua(e.firestore,e.converter,Uh(e._query,this._limit,this._limitType))}}function SN(n){return vj("limit",n),Wg._create("limit",n,"F")}function WS(n,e,t){if(typeof(t=Dn(t))=="string"){if(t==="")throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tw(e)&&t.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Jt.fromString(t));if(!qe.isDocumentKey(s))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return fS(n,new qe(s))}if(t instanceof fn)return fS(n,t._key);throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function XS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EN(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ie(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gU{convertValue(e,t="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Lr(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[jh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>yn(u.doubleValue)));return new Yi(t)}convertGeoPoint(e){return new $i(yn(e.latitude),yn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=gf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=Cr(e);return new Zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Jt.fromString(e);Pt(Hw(s),9688,{name:e});const a=new gu(s.get(1),s.get(3)),l=new qe(s.popFirst(5));return a.isEqual(t)||ka(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vo extends vN{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Rf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",vo._jsonSchema={type:kn("string",vo._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class bh extends vo{data(e={}){return super.data(e)}}class _o{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new au(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new bh(this._firestore,this._userDataWriter,s.key,s,new au(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const p=new bh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new au(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new bh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new au(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,b=-1;return h.type!==0&&(f=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),b=u.indexOf(h.doc.key)),{type:xU(h.type),doc:p,oldIndex:f,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(n){n=Es(n,fn);const e=Es(n.firestore,Ia);return sU(Af(e),n._key).then((t=>NN(e,n,t)))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:kn("string",_o._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class Xg extends gU{constructor(e){super(),this.firestore=e}convertBytes(e){return new ii(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function Oa(n){n=Es(n,Ua);const e=Es(n.firestore,Ia),t=Af(e),s=new Xg(e);return _N(n._query),iU(t,n._query).then((a=>new _o(e,s,n,a)))}function Ra(n,e,t){n=Es(n,fn);const s=Es(n.firestore,Ia),a=wN(n.converter,e,t);return Pf(s,[gN(Cf(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ri.none())])}function jo(n,e,t,...s){n=Es(n,fn);const a=Es(n.firestore,Ia),l=Cf(a);let u;return u=typeof(e=Dn(e))=="string"||e instanceof kf?hU(l,"updateDoc",n._key,e,t,s):dU(l,"updateDoc",n._key,e),Pf(a,[u.toMutation(n._key,ri.exists(!0))])}function ko(n){return Pf(Es(n.firestore,Ia),[new Tg(n._key,ri.none())])}function yU(n,e){const t=Es(n.firestore,Ia),s=an(n),a=wN(n.converter,e);return Pf(t,[gN(Cf(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,ri.exists(!1))]).then((()=>s))}function bU(n,...e){var p,f,b;n=Dn(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||QS(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(QS(e[s])){const _=e[s];e[s]=(p=_.next)==null?void 0:p.bind(_),e[s+1]=(f=_.error)==null?void 0:f.bind(_),e[s+2]=(b=_.complete)==null?void 0:b.bind(_)}let l,u,h;if(n instanceof fn)u=Es(n.firestore,Ia),h=xf(n._key.path),l={next:_=>{e[s]&&e[s](NN(u,n,_))},error:e[s+1],complete:e[s+2]};else{const _=Es(n,Ua);u=Es(_.firestore,Ia),h=_._query;const T=new Xg(u);l={next:E=>{e[s]&&e[s](new _o(u,T,_,E))},error:e[s+1],complete:e[s+2]},_N(n._query)}return(function(T,E,R,k){const C=new zg(k),U=new Vg(E,C,R);return T.asyncQueue.enqueueAndForget((async()=>Lg(await Hh(T),U))),()=>{C.Nu(),T.asyncQueue.enqueueAndForget((async()=>Ug(await Hh(T),U)))}})(Af(u),h,a,l)}function Pf(n,e){return(function(s,a){const l=new wa;return s.asyncQueue.enqueueAndForget((async()=>qL(await nU(s),a,l))),l.promise})(Af(n),e)}function NN(n,e,t){const s=t.docs.get(e._key),a=new Xg(n);return new vo(n,a,e._key,s,new au(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Zl=a})(Xl),Ll(new wo("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new Ia(new dj(s.getProvider("auth-internal")),new mj(u,s.getProvider("app-check-internal")),(function(f,b){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ie(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(f.options.projectId,b)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Er(eS,tS,e),Er(eS,tS,"esm2020")})();function AN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vU=AN,kN=new Eu("auth","Firebase",AN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new dg("@firebase/auth");function _U(n,...e){Kh.logLevel<=vt.WARN&&Kh.warn(`Auth (${Xl}): ${n}`,...e)}function vh(n,...e){Kh.logLevel<=vt.ERROR&&Kh.error(`Auth (${Xl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n,...e){throw ex(n,...e)}function Ai(n,...e){return ex(n,...e)}function Zg(n,e,t){const s={...vU(),[e]:t};return new Eu("auth","Firebase",s).create(e,{appName:n.name})}function To(n){return Zg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TU(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Wi(n,"argument-error"),Zg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ex(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return kN.create(n,...e)}function st(n,e,...t){if(!n)throw ex(e,...t)}function Sa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vh(e),new Error(e)}function Ma(n,e){n||Sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function SU(){return ZS()==="http:"||ZS()==="https:"}function ZS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SU()||BP()||"connection"in navigator)?navigator.onLine:!0}function wU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ma(t>e,"Short delay should be less than long delay!"),this.isMobile=UP()||GP()}get(){return EU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(n,e){Ma(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kU=new Mu(3e4,6e4);function nx(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ac(n,e,t,s,a={}){return IN(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=wu({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:p,...l};return VP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Wl(n.emulatorConfig.host)&&(f.credentials="include"),CN.fetch()(await RN(n,n.config.apiHost,t,h),f)})}async function IN(n,e,t){n._canInitEmulator=!1;const s={...NU,...e};try{const a=new IU(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw oh(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,f]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw oh(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw oh(n,"user-disabled",u);const b=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Zg(n,b,f);Wi(n,b)}}catch(a){if(a instanceof La)throw a;Wi(n,"network-request-failed",{message:String(a)})}}async function CU(n,e,t,s,a={}){const l=await ac(n,e,t,s,a);return"mfaPendingCredential"in l&&Wi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function RN(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?tx(n.config,a):`${n.config.apiScheme}://${a}`;return AU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class IU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ai(this.auth,"network-request-failed")),kU.get())})}}function oh(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Ai(n,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(n,e){return ac(n,"POST","/v1/accounts:delete",e)}async function $h(n,e){return ac(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MU(n,e=!1){const t=Dn(n),s=await t.getIdToken(e),a=sx(s);st(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:du(tp(a.auth_time)),issuedAtTime:du(tp(a.iat)),expirationTime:du(tp(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function tp(n){return Number(n)*1e3}function sx(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const a=O1(t);return a?JSON.parse(a):(vh("Failed to decode base64 JWT payload"),null)}catch(a){return vh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function eE(n){const e=sx(n);return st(e,"internal-error"),st(typeof e.exp<"u","internal-error"),st(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof La&&DU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function DU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(n){var _;const e=n.auth,t=await n.getIdToken(),s=await _u(n,$h(e,{idToken:t}));st(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?MN(a.providerUserInfo):[],u=LU(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),f=h?p:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new qp(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,b)}async function jU(n){const e=Dn(n);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LU(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function MN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(n,e){const t=await IN(n,{},async()=>{const s=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await RN(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:s};return n.emulatorConfig&&Wl(n.emulatorConfig.host)&&(p.credentials="include"),CN.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OU(n,e){return ac(n,"POST","/v2/accounts:revokeToken",nx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){st(e.idToken,"internal-error"),st(typeof e.idToken<"u","internal-error"),st(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){st(e.length!==0,"internal-error");const t=eE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(st(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await UU(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new Dl;return s&&(st(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(st(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(st(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n,e){st(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ei{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new PU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _u(this,this.stsTokenManager.getToken(this.auth,e));return st(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return MU(this,e)}reload(){return jU(this)}_assign(e){this!==e&&(st(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){st(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Yh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(To(this.auth));const e=await this.getIdToken();return await _u(this,RU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,f=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:E,providerData:R,stsTokenManager:k}=t;st(_&&k,e,"internal-error");const C=Dl.fromJSON(this.name,k);st(typeof _=="string",e,"internal-error"),pr(s,e.name),pr(a,e.name),st(typeof T=="boolean",e,"internal-error"),st(typeof E=="boolean",e,"internal-error"),pr(l,e.name),pr(u,e.name),pr(h,e.name),pr(p,e.name),pr(f,e.name),pr(b,e.name);const U=new Ei({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:E,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:C,createdAt:f,lastLoginAt:b});return R&&Array.isArray(R)&&(U.providerData=R.map(M=>({...M}))),p&&(U._redirectEventId=p),U}static async _fromIdTokenResponse(e,t,s=!1){const a=new Dl;a.updateFromServerResponse(t);const l=new Ei({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Yh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];st(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?MN(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new Dl;h.updateFromIdToken(s);const p=new Ei({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new qp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,f),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;function Ea(n){Ma(n instanceof Function,"Expected a class definition");let e=tE.get(n);return e?(Ma(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DN.type="NONE";const nE=DN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(n,e,t){return`firebase:${n}:${e}:${t}`}class Pl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=_h(this.userKey,a.apiKey,l),this.fullPersistenceKey=_h("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await $h(this.auth,{idToken:e}).catch(()=>{});return t?Ei._fromGetAccountInfoResponse(this.auth,t,e):null}return Ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Pl(Ea(nE),e,s);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||Ea(nE);const u=_h(s,e.config.apiKey,e.name);let h=null;for(const f of t)try{const b=await f._get(u);if(b){let _;if(typeof b=="string"){const T=await $h(e,{idToken:b}).catch(()=>{});if(!T)break;_=await Ei._fromGetAccountInfoResponse(e,T,b)}else _=Ei._fromJSON(e,b);f!==l&&(h=_),l=f;break}}catch{}const p=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Pl(l,e,s):(l=p[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(u)}catch{}})),new Pl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VN(e))return"Blackberry";if(BN(e))return"Webos";if(jN(e))return"Safari";if((e.includes("chrome/")||LN(e))&&!e.includes("edge/"))return"Chrome";if(ON(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function PN(n=ss()){return/firefox\//i.test(n)}function jN(n=ss()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LN(n=ss()){return/crios\//i.test(n)}function UN(n=ss()){return/iemobile/i.test(n)}function ON(n=ss()){return/android/i.test(n)}function VN(n=ss()){return/blackberry/i.test(n)}function BN(n=ss()){return/webos/i.test(n)}function ix(n=ss()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VU(n=ss()){var e;return ix(n)&&!!((e=window.navigator)!=null&&e.standalone)}function BU(){return zP()&&document.documentMode===10}function GN(n=ss()){return ix(n)||ON(n)||BN(n)||VN(n)||/windows phone/i.test(n)||UN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e=[]){let t;switch(n){case"Browser":t=sE(ss());break;case"Worker":t=`${sE(ss())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const p=e(l);u(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zU(n,e={}){return ac(n,"GET","/v2/passwordPolicy",nx(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=6;class HU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??FU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iE(this),this.idTokenSubscription=new iE(this),this.beforeStateQueue=new GU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ea(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $h(this,{idToken:e}),s=await Ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Si(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return st(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(To(this));const t=e?Dn(e):null;return t&&st(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&st(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zU(this),t=new HU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Eu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await OU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ea(e)||this._popupRedirectResolver;st(t,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[Ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(st(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return st(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&_U(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function jf(n){return Dn(n)}class iE{constructor(e){this.auth=e,this.observer=null,this.addObserver=QP(t=>this.observer=t)}get next(){return st(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ax={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KU(n){ax=n}function $U(n){return ax.loadJS(n)}function YU(){return ax.gapiScript}function JU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n,e){const t=fg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Eo(l,e??{}))return a;Wi(a,"already-initialized")}return t.initialize({options:e})}function WU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Ea);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function XU(n,e,t){const s=jf(n);st(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=FN(e),{host:u,port:h}=ZU(e),p=h===null?"":`:${h}`,f={url:`${l}//${u}${p}/`},b=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){st(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),st(Eo(f,s.config.emulator)&&Eo(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,Wl(u)?(z1(`${l}//${u}${p}`),F1("Auth",!0)):eO()}function FN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ZU(n){const e=FN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:aE(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:aE(u)}}}function aE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function eO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,t){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(n,e){return CU(n,"POST","/v1/accounts:signInWithIdp",nx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="http://localhost";class Co extends HN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new Co(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return jl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,jl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jl(e,t)}buildRequest(){const e={requestUri:tO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends rx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Du{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends Du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ta.credential(t,s)}catch{return null}}}Ta.GOOGLE_SIGN_IN_METHOD="google.com";Ta.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Du{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.GITHUB_SIGN_IN_METHOD="github.com";xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Du{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return yr.credential(t,s)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Ei._fromIdTokenResponse(e,s,a),u=rE(s);return new Hl({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=rE(s);return new Hl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function rE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends La{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Jh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Jh(e,t,s,a)}}function qN(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Jh._fromErrorAndOperation(n,l,e,s):l})}async function nO(n,e,t=!1){const s=await _u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hl._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(n,e,t=!1){const{auth:s}=n;if(Si(s.app))return Promise.reject(To(s));const a="reauthenticate";try{const l=await _u(n,qN(s,a,e,n),t);st(l.idToken,s,"internal-error");const u=sx(l.idToken);st(u,s,"internal-error");const{sub:h}=u;return st(n.uid===h,s,"user-mismatch"),Hl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Wi(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(n,e,t=!1){if(Si(n.app))return Promise.reject(To(n));const s="signIn",a=await qN(n,s,e),l=await Hl._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(n,e){return Dn(n).setPersistence(e)}function rO(n,e,t,s){return Dn(n).onIdTokenChanged(e,t,s)}function oO(n,e,t){return Dn(n).beforeAuthStateChanged(e,t)}function lO(n,e,t,s){return Dn(n).onAuthStateChanged(e,t,s)}function cO(n){return Dn(n).signOut()}const Qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=1e3,dO=10;class $N extends KN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);BU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,dO):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},uO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$N.type="LOCAL";const YN=$N;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN extends KN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}JN.type="SESSION";const ox=JN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Lf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async f=>f(t.origin,l)),p=await hO(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,p)=>{const f=lx("",20);a.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(b),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return window}function mO(n){Ji().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function pO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function xO(){return QN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="firebaseLocalStorageDb",yO=1,Wh="firebaseLocalStorage",XN="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uf(n,e){return n.transaction([Wh],e?"readwrite":"readonly").objectStore(Wh)}function bO(){const n=indexedDB.deleteDatabase(WN);return new Pu(n).toPromise()}function Kp(){const n=indexedDB.open(WN,yO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Wh,{keyPath:XN})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Wh)?e(s):(s.close(),await bO(),e(await Kp()))})})}async function oE(n,e,t){const s=Uf(n,!0).put({[XN]:e,value:t});return new Pu(s).toPromise()}async function vO(n,e){const t=Uf(n,!1).get(e),s=await new Pu(t).toPromise();return s===void 0?null:s.value}function lE(n,e){const t=Uf(n,!0).delete(e);return new Pu(t).toPromise()}const _O=800,TO=3;class ZN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>TO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(xO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await pO(),!this.activeServiceWorker)return;this.sender=new fO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await oE(e,Qh,"1"),await lE(e,Qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>oE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>vO(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Uf(a,!1).getAll();return new Pu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_O)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZN.type="LOCAL";const SO=ZN;new Mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(n,e){return e?Ea(e):(st(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx extends HN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EO(n){return iO(n.auth,new cx(n),n.bypassAuthState)}function wO(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),sO(t,new cx(n),n.bypassAuthState)}async function NO(n){const{auth:e,user:t}=n;return st(t,e,"internal-error"),nO(t,new cx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EO;case"linkViaPopup":case"linkViaRedirect":return NO;case"reauthViaPopup":case"reauthViaRedirect":return wO;default:Wi(this.auth,"internal-error")}}resolve(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new Mu(2e3,1e4);async function kO(n,e,t){if(Si(n.app))return Promise.reject(Ai(n,"operation-not-supported-in-this-environment"));const s=jf(n);TU(n,e,rx);const a=eA(s,t);return new bo(s,"signInViaPopup",e,a).executeNotNull()}class bo extends tA{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return st(e,this.auth,"internal-error"),e}async onExecution(){Ma(this.filter.length===1,"Popup operations only handle one event");const e=lx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AO.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="pendingRedirect",Th=new Map;class IO extends tA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const s=await RO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RO(n,e){const t=PO(e),s=DO(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function MO(n,e){Th.set(n._key(),e)}function DO(n){return Ea(n._redirectPersistence)}function PO(n){return _h(CO,n.config.apiKey,n.name)}async function jO(n,e,t=!1){if(Si(n.app))return Promise.reject(To(n));const s=jf(n),a=eA(s,e),u=await new IO(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=600*1e3;class UO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!nA(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ai(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LO&&this.cachedEventUids.clear(),this.cachedEventUids.has(cE(e))}saveEventToCache(e){this.cachedEventUids.add(cE(e)),this.lastProcessedEventTime=Date.now()}}function cE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(n,e={}){return ac(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GO=/^https?/;async function zO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await VO(n);for(const t of e)try{if(FO(t))return}catch{}Wi(n,"unauthorized-domain")}function FO(n){const e=Hp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!GO.test(t))return!1;if(BO.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new Mu(3e4,6e4);function uE(){const n=Ji().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qO(n){return new Promise((e,t)=>{var a,l,u;function s(){uE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uE(),t(Ai(n,"network-request-failed"))},timeout:HO.get()})}if((l=(a=Ji().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Ji().gapi)!=null&&u.load)s();else{const h=JU("iframefcb");return Ji()[h]=()=>{gapi.load?s():t(Ai(n,"network-request-failed"))},$U(`${YU()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Sh=null,e})}let Sh=null;function KO(n){return Sh=Sh||qO(n),Sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new Mu(5e3,15e3),YO="__/auth/iframe",JO="emulator/auth/iframe",QO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XO(n){const e=n.config;st(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?tx(e,JO):`https://${n.config.authDomain}/${YO}`,s={apiKey:e.apiKey,appName:n.name,v:Xl},a=WO.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${wu(s).slice(1)}`}async function ZO(n){const e=await KO(n),t=Ji().gapi;return st(t,n,"internal-error"),e.open({where:document.body,url:XO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QO,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Ai(n,"network-request-failed"),h=Ji().setTimeout(()=>{l(u)},$O.get());function p(){Ji().clearTimeout(h),a(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tV=500,nV=600,sV="_blank",iV="http://localhost";class dE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aV(n,e,t,s=tV,a=nV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p={...eV,width:s.toString(),height:a.toString(),top:l,left:u},f=ss().toLowerCase();t&&(h=LN(f)?sV:t),PN(f)&&(e=e||iV,p.scrollbars="yes");const b=Object.entries(p).reduce((T,[E,R])=>`${T}${E}=${R},`,"");if(VU(f)&&h!=="_self")return rV(e||"",h),new dE(null);const _=window.open(e||"",h,b);st(_,n,"popup-blocked");try{_.focus()}catch{}return new dE(_)}function rV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV="__/auth/handler",lV="emulator/auth/handler",cV=encodeURIComponent("fac");async function hE(n,e,t,s,a,l){st(n.config.authDomain,n,"auth-domain-config-required"),st(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Xl,eventId:a};if(e instanceof rx){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",JP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))u[b]=_}if(e instanceof Du){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(u.scopes=b.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const b of Object.keys(h))h[b]===void 0&&delete h[b];const p=await n._getAppCheckToken(),f=p?`#${cV}=${encodeURIComponent(p)}`:"";return`${uV(n)}?${wu(h).slice(1)}${f}`}function uV({config:n}){return n.emulator?tx(n,lV):`https://${n.authDomain}/${oV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="webStorageSupport";class dV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ox,this._completeRedirectFn=jO,this._overrideRedirectResult=MO}async _openPopup(e,t,s,a){var u;Ma((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await hE(e,t,s,Hp(),a);return aV(e,l,lx())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await hE(e,t,s,Hp(),a);return mO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ma(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ZO(e),s=new UO(e);return t.register("authEvent",a=>(st(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(np,{type:np},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[np];l!==void 0&&t(!!l),Wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GN()||jN()||ix()}}const hV=dV;var fE="@firebase/auth",mE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){st(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pV(n){Ll(new wo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;st(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zN(n)},f=new qU(s,a,l,p);return WU(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ll(new wo("auth-internal",e=>{const t=jf(e.getProvider("auth").getImmediate());return(s=>new fV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(fE,mE,mV(n)),Er(fE,mE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=300,xV=G1("authIdTokenMaxAge")||gV;let pE=null;const yV=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>xV)return;const a=t==null?void 0:t.token;pE!==a&&(pE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function bV(n=$1()){const e=fg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QU(n,{popupRedirectResolver:hV,persistence:[SO,YN,ox]}),s=G1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=yV(l.toString());oO(t,u,()=>u(t.currentUser)),rO(t,h=>u(h))}}const a=V1("auth");return a&&XU(t,`http://${a}`),t}function vV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}KU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Ai("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",vV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pV("Browser");const Xh={xp:0,level:1,streak:0,lastActiveDate:"",unlockedAchievements:[]},_V=(n,e,t,s)=>{let a=0;const l=e.filter(u=>u.isCorrect).length;return a+=l*10,e.length>0&&l===e.length&&(a+=50),t&&(a+=100,s==="SKD"&&n>=350&&(a+=100),s==="UTBK"&&n>=600&&(a+=100)),a},gE=n=>Math.floor(Math.sqrt(n/100))+1,Zh=n=>100*Math.pow(n,2),sA=n=>{const e=[...Yv].reverse().find(t=>n>=t.level);return e?e.title:Yv[0].title},TV=n=>{const e=new Date().toISOString().split("T")[0],t=n.lastActiveDate;if(t===e)return n;const s=new Date;s.setDate(s.getDate()-1);const a=s.toISOString().split("T")[0];let l=n.streak;return t===a?l+=1:l=1,{...n,streak:l,lastActiveDate:e}},SV=(n,e)=>{const t=new Set(n.unlockedAchievements),s=[];return op.forEach(a=>{t.has(a.id)||a.condition&&a.condition(e,n)&&s.push(a)}),s},EV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},iA=K1(EV),Nt=rU(iA),ef=bV(iA),wV=new Ta;console.log("Firebase Service Initialized for: fajmuls-learning");const aA="benchmark_scores",rA="global_leaderboard",ux="test_packages",bn="users",ju="battles",NV=n=>lO(ef,n),AV=async(n=!0)=>{try{return await aO(ef,n?YN:ox),(await kO(ef,wV)).user}catch(e){throw console.error("Error signing in with Google",e),e}},kV=async()=>{try{await cO(ef)}catch(n){console.error("Error signing out",n)}},CV=async n=>{const e=ic(ta(Nt,bn),Fl("username_lowercase","==",n.toLowerCase()));return(await Oa(e)).empty},$p=async n=>{const e=an(Nt,bn,n),t=await Df(e);if(t.exists()){const s=t.data();return s.gamification?s:{...s,gamification:Xh}}else return null},IV=async(n,e)=>{const t=an(Nt,bn,n);await Ra(t,{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0});const s=await Df(t);s.exists()&&!s.data().gamification&&await jo(t,{gamification:Xh})},xE=async(n,e)=>{try{await jo(an(Nt,bn,n),{gamification:e})}catch(t){console.error("Error updating gamification",t)}},RV=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await jo(an(Nt,bn,n),t)},Of=n=>{const e=new WeakSet;return JSON.parse(JSON.stringify(n,(t,s)=>{if(typeof s=="object"&&s!==null){if(e.has(s))return;e.add(s)}if(s!==void 0)return s}))},MV=async(n,e)=>{try{const t=e.timestamp?`sess-${e.timestamp}`:`sess-${Date.now()}`,s=Of(e);await Ra(an(Nt,bn,n,"sessions",t),{...s,id:t}),console.log(`Session ${t} saved to cloud`)}catch(t){throw console.error("Error saving session to cloud",t),t}},DV=async n=>{try{const e=ic(ta(Nt,bn,n,"sessions"),TN("timestamp","desc")),t=await Oa(e),s=[];return t.forEach(a=>{s.push({...a.data(),id:a.id})}),s}catch(e){return console.error("Error fetching all saved sessions",e),[]}},yE=async(n,e)=>{try{await ko(an(Nt,bn,n,"sessions",e)),console.log(`Cloud session ${e} deleted`)}catch(t){console.error("Error deleting session from cloud",t)}},PV=async n=>{console.log("clearSessionFromCloud called - Use deleteSavedSession for specific items")},bE=async(n,e)=>{try{const t=Of(e);await Ra(an(Nt,bn,n,"history",e.id),t),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},oA=async n=>{try{const e=ic(ta(Nt,bn,n,"history")),t=await Oa(e),s=[];return t.forEach(a=>{s.push(a.data())}),s.sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},jV=async(n,e)=>{try{await ko(an(Nt,bn,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},vE=async(n,e,t,s,a,l)=>{if(!a||a.startsWith("guest-"))return;const u=`${n}_${e}_${a}`,h=an(Nt,rA,u);try{const p=await Df(h);if(p.exists()){const f=p.data();t>f.score&&await jo(h,{score:t,packageName:l||f.packageName,timestamp:Date.now(),username:s})}else{const f={uid:a,username:s,category:n,subCategory:e,score:t,packageName:l,timestamp:Date.now()};await Ra(h,f)}}catch(p){console.error("Error saving to global leaderboard",p)}},Tl=async(n,e,t=50)=>{try{const s=ic(ta(Nt,rA),Fl("category","==",n),Fl("subCategory","==",e),TN("score","desc"),SN(t)),a=await Oa(s),l=[];return a.forEach(u=>l.push(u.data())),l}catch(s){return console.error(`Error fetching leaderboard for ${n}/${e}:`,s),[]}},LV=async(n,e,t,s)=>{try{await yU(ta(Nt,aA),{game:n,score:e,username:t,unit:s,timestamp:Date.now()})}catch(a){console.error("Error saving score to Firebase:",a)}},UV=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=ic(ta(Nt,aA),Fl("game","==",n)),a=await Oa(s),l=[];a.forEach(p=>{l.push({id:p.id,...p.data()})}),l.sort((p,f)=>t?p.score-f.score:f.score-p.score);const u=[],h=new Set;for(const p of l){const f=p.username.toLowerCase().trim();if(h.has(f)||(u.push(p),h.add(f)),u.length>=e)break}return u}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},lh=async n=>{try{const e=Of(n);await Ra(an(Nt,ux,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},OV=async()=>{try{const n=await Oa(ta(Nt,ux)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},VV=async n=>{try{await ko(an(Nt,ux,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}},BV=async n=>{if(!n||n.length<3)return[];try{const e=ic(ta(Nt,bn),Fl("username_lowercase",">=",n.toLowerCase()),Fl("username_lowercase","<=",n.toLowerCase()+""),SN(10));return(await Oa(e)).docs.map(s=>{var l;const a=s.data();return{uid:s.id,username:a.username,photoURL:a.photoURL,level:((l=a.gamification)==null?void 0:l.level)||1,lastActive:a.lastLogin}})}catch(e){return console.error("Error searching users",e),[]}},GV=async(n,e)=>{const t={id:`${n.uid}_${Date.now()}`,fromUid:n.uid,fromUsername:n.username,fromPhotoURL:n.photoURL,fromLevel:n.level,timestamp:Date.now()};await Ra(an(Nt,bn,e,"friend_requests",n.uid),t)},zV=async n=>(await Oa(ta(Nt,bn,n,"friend_requests"))).docs.map(t=>t.data()),FV=async(n,e,t)=>{const s={uid:t.fromUid,username:t.fromUsername,photoURL:t.fromPhotoURL,level:t.fromLevel,lastActive:new Date().toISOString()};await Ra(an(Nt,bn,n,"friends",t.fromUid),s),await Ra(an(Nt,bn,t.fromUid,"friends",n),e),await ko(an(Nt,bn,n,"friend_requests",t.fromUid))},HV=async(n,e)=>{await ko(an(Nt,bn,n,"friend_requests",e))},qV=async(n,e)=>{try{await ko(an(Nt,bn,n,"friends",e)),await ko(an(Nt,bn,e,"friends",n))}catch(t){throw console.error("Error removing friend",t),t}},KV=async n=>{var e;try{const t=await Oa(ta(Nt,bn,n,"friends")),s=[];for(const a of t.docs){const l=a.data(),u=await $p(l.uid);u?s.push({uid:l.uid,username:u.username,photoURL:u.photoURL,level:((e=u.gamification)==null?void 0:e.level)||1,lastActive:u.lastLogin}):s.push(l)}return s}catch(t){return console.error("Error getting friends",t),[]}},$V=async(n,e,t,s)=>{const a=Math.random().toString(36).substring(2,8).toUpperCase(),l={id:a,hostUid:n,hostName:e,guestUid:null,guestName:null,status:"WAITING",category:t,questions:Of(s),scores:{[n]:0},progress:{[n]:0},winner:null,createdAt:Date.now()};return await Ra(an(Nt,ju,a),l),a},YV=async(n,e,t)=>{const s=an(Nt,ju,n),a=await Df(s);if(!a.exists())throw new Error("Room not found");const l=a.data();if(l.status!=="WAITING")throw new Error("Game already started or finished");if(l.guestUid)throw new Error("Room is full");return await jo(s,{guestUid:e,guestName:t,status:"STARTING",[`scores.${e}`]:0,[`progress.${e}`]:0}),!0},JV=(n,e)=>bU(an(Nt,ju,n),t=>{t.exists()&&e(t.data())}),QV=async(n,e,t,s)=>{const a=an(Nt,ju,n);await jo(a,{[`scores.${e}`]:t,[`progress.${e}`]:s})},WV=async(n,e)=>{const t=an(Nt,ju,n);await jo(t,{status:"FINISHED",winner:e})};class XV{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio($v[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const a=this.audioCache[e];a.currentTime=0;const l=a.play();l!==void 0&&l.catch(()=>{});return}const t=$v[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const Z=new XV;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e8=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),_E=n=>{const e=e8(n);return e.charAt(0).toUpperCase()+e.slice(1)},lA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),t8=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=B.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},p)=>B.createElement("svg",{ref:p,...n8,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:lA("lucide",a),...!l&&!t8(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,b])=>B.createElement(f,b)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(n,e)=>{const t=B.forwardRef(({className:s,...a},l)=>B.createElement(s8,{ref:l,iconNode:e,className:lA(`lucide-${ZV(_E(n))}`,`lucide-${n}`,s),...a}));return t.displayName=_E(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qn=Te("activity",i8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],pt=Te("arrow-left",a8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],o8=Te("arrow-up",r8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cA=Te("award",l8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],u8=Te("bell-off",c8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Yp=Te("bell",d8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Jp=Te("book-open",h8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Vf=Te("book",f8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],p8=Te("box",m8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ts=Te("brain",g8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Bf=Te("briefcase",x8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],b8=Te("building-2",y8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],_8=Te("calculator",v8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],uA=Te("calendar",T8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],E8=Te("camera",S8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],So=Te("chart-no-axes-column",w8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],A8=Te("chevron-down",N8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],br=Te("chevron-right",k8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],I8=Te("circle-alert",C8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ds=Te("circle-check-big",R8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],D8=Te("circle-play",M8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Lo=Te("circle-x",P8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ar=Te("clock",j8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],TE=Te("cloud-upload",L8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Tu=Te("copy",U8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],V8=Te("crosshair",O8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],G8=Te("crown",B8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],dA=Te("download",z8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],H8=Te("eraser",F8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],K8=Te("external-link",q8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Io=Te("eye",$8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],J8=Te("file-search",Y8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],oi=Te("file-text",Q8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],X8=Te("flag",W8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],hA=Te("flame",Z8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],t9=Te("footprints",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],s9=Te("funnel",n9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],SE=Te("git-compare",i9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],r9=Te("git-merge",a9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],l9=Te("globe",o9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],rc=Te("graduation-cap",c9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Da=Te("grid-3x3",u9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],tf=Te("hash",d9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Gf=Te("heart",h9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Lu=Te("history",f9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],p9=Te("info",m9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],x9=Te("landmark",g9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],dx=Te("layers",y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],v9=Te("layout-grid",b9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],fA=Te("lightbulb",_9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],S9=Te("list-ordered",T9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Un=Te("loader-circle",E9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mA=Te("lock",w9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],A9=Te("log-out",N9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],nf=Te("map",k9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],EE=Te("medal",C9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],R9=Te("menu",I9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],D9=Te("message-circle",M9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],zf=Te("message-square",P9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],L9=Te("monitor",j9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],hx=Te("moon",U9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],pA=Te("mouse-pointer-2",O9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],wE=Te("music",V9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],gA=Te("package",B9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],ql=Te("palette",G9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],F9=Te("panels-top-left",z9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Su=Te("pause",H9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Qp=Te("pen-tool",q9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],$9=Te("pen",K9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Uo=Te("play",Y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Q9=Te("plus",J9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],NE=Te("refresh-cw",W9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Z9=Te("repeat",X9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],t7=Te("rocket",e7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Wp=Te("rotate-ccw",n7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fx=Te("save",s7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hu=Te("search",i7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xA=Te("settings",a7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],o7=Te("shapes",r7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],c7=Te("share-2",l7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],d7=Te("shield-check",u7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],AE=Te("shield",h7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],m7=Te("sparkles",f7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],g7=Te("star",p7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],yA=Te("sun",x7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],bA=Te("swords",y7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Pr=Te("target",b7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Xp=Te("timer",v7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ro=Te("trash-2",_7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],S7=Te("trending-up",T7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ff=Te("triangle-alert",E7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ws=Te("trophy",w7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Kl=Te("type",N7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],mx=Te("upload",A7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],C7=Te("user-plus",k7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vA=Te("user",I7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$l=Te("users",R7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],D7=Te("volume-2",M7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],j7=Te("volume-x",P7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],px=Te("x",L7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],_A=Te("youtube",U7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Bs=Te("zap",O7),V7=()=>{const[n,e]=B.useState(!1),[t,s]=B.useState(1500),[a,l]=B.useState(!1),[u,h]=B.useState("focus");B.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),B.useEffect(()=>{let E=null;return a&&t>0?E=setInterval(()=>{s(t-1)},1e3):t===0&&(l(!1),p()),()=>clearInterval(E)},[a,t]);const p=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(R=>console.log("Audio play failed",R)),"Notification"in window&&Notification.permission==="granted"&&new Notification(u==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:u==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},f=()=>l(!a),b=()=>{l(!1),s(u==="focus"?1500:300)},_=()=>{const E=u==="focus"?"break":"focus";h(E),s(E==="focus"?1500:300),l(!1)},T=E=>{const R=Math.floor(E/60),k=E%60;return`${R.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`};return n?o.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[o.jsxs("div",{className:`p-4 ${u==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xp,{size:20}),o.jsx("span",{className:"font-bold",children:u==="focus"?"Fokus":"Istirahat"})]}),o.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:o.jsx(px,{size:18})})]}),o.jsxs("div",{className:"p-6 flex flex-col items-center",children:[o.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsx("button",{onClick:f,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:a?o.jsx(Su,{size:24}):o.jsx(Uo,{size:24})}),o.jsx("button",{onClick:b,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:o.jsx(Wp,{size:24})})]}),o.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",u==="focus"?"Istirahat":"Fokus"]})]})]}):o.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[o.jsx(Xp,{size:24}),o.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},B7=({data:n,onNext:e})=>{const[t,s]=B.useState(!1);return o.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[o.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[o.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:o.jsxs("div",{className:"text-center",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-2 border-b border-slate-100 pb-2",children:n.title}),o.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),o.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),o.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),o.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:o.jsxs("div",{className:"text-center text-white",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-widest mb-2 border-b border-white/20 pb-2",children:n.title}),o.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),o.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&o.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[o.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),o.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),o.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},TA=({node:n,depth:e=0})=>o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),o.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>o.jsxs("div",{className:"flex flex-col items-center relative",children:[o.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),o.jsx(TA,{node:t,depth:e+1})]},s))]})]}),G7=({data:n})=>{const e=n.root||n;return o.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:o.jsx(TA,{node:e})})},xo=({className:n="",height:e="h-4",width:t="w-full"})=>o.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),z7=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx(xo,{height:"h-12",width:"w-12",className:"rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(xo,{height:"h-4",width:"w-1/3"}),o.jsx(xo,{height:"h-3",width:"w-1/2"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(xo,{height:"h-4"}),o.jsx(xo,{height:"h-4"}),o.jsx(xo,{height:"h-4",width:"w-2/3"})]})]}),F7=({onComplete:n})=>{const e=()=>{Z.play("click"),n()};return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[o.jsxs("div",{className:"relative mb-8 group",children:[o.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),o.jsx("img",{src:Eh,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",o.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),o.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),o.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[o.jsx(t7,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},H7=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:a})=>{var E,R;if(!n)return null;const l=k=>{Z.play("tap"),s({...t,[k]:!t[k]})},u=k=>{Z.play("click");let C=t.appPattern;k==="fajmuls"&&C==="none"&&(C="fajmuls"),s({...t,theme:k,darkMode:k==="dark",appPattern:C})},h=k=>{Z.play("tap"),s({...t,appBaseColor:k})},p=k=>{Z.play("click"),s({...t,appPattern:k})},f=k=>{Z.play("tap"),s({...t,fontSize:k})},b=k=>{s({...t,volume:parseFloat(k.target.value)})},_=[{id:"white",label:"Putih",color:"#ffffff"},{id:"gray",label:"Abu-abu",color:"#cbd5e1"},{id:"mint",label:"Mint",color:"#6ee7b7"},{id:"cream",label:"Cream",color:"#fcd34d"},{id:"blue",label:"Biru",color:"#93c5fd"},{id:"dark",label:"Dark",color:"#0f172a"}],T=[{id:"none",label:"Polos",css:""},{id:"grid",label:"Grid",css:"bg-pattern-grid"},{id:"dots",label:"Dots",css:"bg-pattern-dots"},{id:"waves",label:"Waves",css:"bg-pattern-waves"},{id:"aurora",label:"Aurora",css:"bg-pattern-aurora"},{id:"fajmuls",label:"Fajmuls",css:"bg-pattern-fajmuls"}];return o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide relative",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(xA,{size:24,className:"text-slate-400"})," Pengaturan"]}),o.jsx("button",{onClick:()=>{Z.play("back"),e()},children:o.jsx(Lo,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-lg overflow-hidden",children:a.photoURL?o.jsx("img",{src:a.photoURL,alt:"Prof",className:"w-full h-full object-cover"}):(R=(E=a.username)==null?void 0:E[0])==null?void 0:R.toUpperCase()}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:a.username}),o.jsx("div",{className:"text-xs text-slate-500",children:a.isGuest?"Mode Tamu":"Akun Terhubung"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Tampilan"}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 dark:text-slate-200 font-bold text-sm",children:[o.jsx(F9,{size:16})," Tema Aplikasi"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("button",{onClick:()=>u("light"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.theme==="light"?"bg-white border-indigo-500 text-indigo-600 shadow-md":"bg-slate-100 border-transparent text-slate-500 hover:bg-white"}`,children:[o.jsx(yA,{size:20,className:"mb-1"}),o.jsx("span",{className:"text-xs font-bold",children:"Light"})]}),o.jsxs("button",{onClick:()=>u("dark"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.theme==="dark"?"bg-slate-900 border-indigo-500 text-indigo-400 shadow-md":"bg-slate-100 dark:bg-slate-600 border-transparent text-slate-500 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-500"}`,children:[o.jsx(hx,{size:20,className:"mb-1"}),o.jsx("span",{className:"text-xs font-bold",children:"Dark"})]}),o.jsxs("button",{onClick:()=>u("fajmuls"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all relative overflow-hidden ${t.theme==="fajmuls"?"bg-gradient-to-br from-cyan-50 to-blue-50 border-indigo-500 text-indigo-600 shadow-md":"bg-slate-100 border-transparent text-slate-500 hover:bg-white"}`,children:[o.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm z-0"}),o.jsx(m7,{size:20,className:"mb-1 relative z-10"}),o.jsx("span",{className:"text-xs font-bold relative z-10",children:"Fajmuls"})]})]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 dark:text-slate-200 font-bold text-sm",children:[o.jsx(L9,{size:16})," Background"]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:"Warna Dasar (Solid)"}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[_.map(k=>o.jsx("button",{onClick:()=>h(k.color),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 shadow-sm ${t.appBaseColor===k.color?"border-indigo-600 scale-110 ring-2 ring-indigo-200":"border-slate-300 dark:border-slate-600"}`,style:{backgroundColor:k.color},title:k.label},k.id)),o.jsxs("div",{className:"relative w-8 h-8 rounded-full overflow-hidden border-2 border-slate-300 dark:border-slate-600 hover:scale-110 transition-transform shadow-sm group",children:[o.jsx("input",{type:"color",value:t.appBaseColor,onChange:k=>h(k.target.value),className:"absolute inset-0 w-[150%] h-[150%] -top-[25%] -left-[25%] cursor-pointer p-0 border-0"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx(ql,{size:14,className:"text-slate-500 bg-white/50 rounded-full p-0.5"})})]})]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block",children:"Pola / Pattern Overlay"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(k=>o.jsxs("button",{onClick:()=>p(k.id),className:`relative overflow-hidden rounded-lg border-2 transition-all h-12 flex items-center justify-center group ${t.appPattern===k.id?"border-indigo-600":"border-slate-200 dark:border-slate-600 hover:border-slate-400"}`,style:{backgroundColor:t.appBaseColor},children:[o.jsx("div",{className:`absolute inset-0 w-full h-full ${k.css} opacity-70 group-hover:opacity-100 transition-opacity`}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded bg-white/80 dark:bg-black/60 backdrop-blur-sm shadow-sm ${t.appPattern===k.id?"text-indigo-600":"text-slate-700 dark:text-slate-200"}`,children:k.label})})]},k.id))})]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 dark:text-slate-200 font-bold text-sm",children:[o.jsx(Kl,{size:16})," Ukuran Font Soal"]}),o.jsx("div",{className:"flex bg-slate-200 dark:bg-slate-600 rounded-lg p-1",children:[{id:"sm",label:"S"},{id:"md",label:"M"},{id:"lg",label:"L"},{id:"xl",label:"XL"}].map(k=>o.jsx("button",{onClick:()=>f(k.id),className:`flex-1 py-1.5 rounded-md text-xs font-bold transition-all ${t.fontSize===k.id?"bg-white text-indigo-600 shadow-sm":"text-slate-500 dark:text-slate-300 hover:text-slate-700 dark:hover:text-white"}`,children:k.label},k.id))})]})]}),o.jsxs("div",{className:"space-y-4 pt-2",children:[o.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Suara & Sistem"}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?o.jsx(D7,{size:18}):o.jsx(j7,{size:18})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Efek Suara"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.soundEnabled,onChange:()=>l("soundEnabled")})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:t.musicEnabled?o.jsx(wE,{size:18}):o.jsx(wE,{size:18,className:"opacity-50"})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Musik Latar"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.musicEnabled,onChange:()=>l("musicEnabled")})]}),o.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume"}),o.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:b,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?o.jsx(Yp,{size:18}):o.jsx(u8,{size:18})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Notifikasi Lucu"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.funnyNotifications,onChange:()=>l("funnyNotifications")})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:o.jsx(ds,{size:18})}),o.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Konfirmasi Aksi"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-600",checked:t.confirmActions,onChange:()=>l("confirmActions")})]})]})]})]})})},q7="Fajmuls22",K7=({category:n,skdStream:e,tpaStream:t,availablePackages:s,history:a,onSelectPackage:l,onGenerateNew:u,onImportPackage:h,onDeletePackage:p,onFixDuplicates:f,onFixGaps:b,onBack:_,showToast:T,confirmEnabled:E,onRefresh:R,isLoading:k})=>{B.useEffect(()=>{R()},[]);const[C,U]=B.useState(""),[M,G]=B.useState(!1),[q,X]=B.useState(null),[J,D]=B.useState(!1),A=B.useRef(null),I=(te,F)=>{const Q=a.filter(ie=>ie.packageId===te||ie.packageTitle&&ie.packageTitle.trim()===F.trim());if(Q.length===0)return{attempts:0,highScore:0,avgScore:0,lastAttemptDate:""};const fe=Q.map(ie=>ie.score);return{attempts:Q.length,highScore:Math.max(...fe),avgScore:Math.round(fe.reduce((ie,re)=>ie+re,0)/fe.length),lastAttemptDate:Q[0].date}},P=(te,F)=>{Z.play("click"),X({type:te,payload:F}),U(""),G(!0)},L=()=>{var te;if(!C){T("Masukkan token akses!","error");return}C===q7?(G(!1),Z.play("success"),(q==null?void 0:q.type)==="GENERATE"?z():(q==null?void 0:q.type)==="IMPORT"?(te=A.current)==null||te.click():(q==null?void 0:q.type)==="DELETE"?V(q.payload):(q==null?void 0:q.type)==="FIX_DUPLICATES"?f&&f():(q==null?void 0:q.type)==="FIX_GAPS"&&b&&b()):(Z.play("error"),T("Token salah! Akses ditolak.","error"))},z=async()=>{D(!0);try{await u("verified_client")}catch(te){console.error(te)}finally{D(!1)}},V=te=>{p(te)},Ee=(te,F)=>{te.stopPropagation();const Q=JSON.stringify(F,null,2),fe=new Blob([Q],{type:"application/json"}),ie=URL.createObjectURL(fe),re=document.createElement("a");re.href=ie,re.download=`${F.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(ie),T("Paket Soal berhasil didownload","success")},De=()=>{Z.play("click"),R()},Y=s.filter(te=>te.category!==n?!1:n==="SKD"&&e?te.skdStream===e:n==="TPA"?t==="PSIKOTEST_KEDINASAN"?te.tpaStream==="PSIKOTEST_KEDINASAN"||te.title&&te.title.toLowerCase().includes("psikotes"):te.tpaStream==="TPA_TBI"||!te.tpaStream&&!te.title.toLowerCase().includes("psikotes"):!0).sort((te,F)=>te.title.localeCompare(F.title,void 0,{numeric:!0,sensitivity:"base"})),le=B.useMemo(()=>{const te=new Map;Y.forEach(Q=>{te.set(Q.title,(te.get(Q.title)||0)+1)});let F=0;return te.forEach(Q=>{Q>1&&F++}),F},[Y]),_e=B.useMemo(()=>{if(Y.length<2)return 0;const te=[...Y].sort((Q,fe)=>new Date(Q.createdAt).getTime()-new Date(fe.createdAt).getTime());let F=!1;for(let Q=0;Q<te.length;Q++){const ie=te[Q].title.match(/(\d+)$/);if(ie&&parseInt(ie[1])!==Q+1){F=!0;break}}return F?1:0},[Y]);let Oe=`Pilih Paket Soal ${n}`;return n==="SKD"&&e&&(Oe=`Paket Soal SKD ${e==="CPNS"?"CPNS Umum":"Kedinasan"}`),n==="TPA"&&t==="PSIKOTEST_KEDINASAN"&&(Oe="Paket Psikotes Kedinasan (STAN)"),n==="TPA"&&t==="TPA_TBI"&&(Oe="Paket Soal TPA & TBI"),o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[M&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:o.jsx(d7,{size:32})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),o.jsx("input",{type:"password",placeholder:"Token Akses...",value:C,onChange:te=>U(te.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:te=>te.key==="Enter"&&L()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>G(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),o.jsx("button",{onClick:L,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),o.jsxs("div",{className:"max-w-4xl w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:_,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[o.jsx(pt,{size:20})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:Oe}),o.jsx("button",{onClick:De,disabled:k,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:o.jsx(NE,{size:20,className:k?"animate-spin":""})})]})]}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:Oe}),le>0&&f&&o.jsxs("div",{className:"mb-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 p-4 rounded-xl flex items-center justify-between animate-fade-in-down shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-800 rounded-lg text-amber-600 dark:text-amber-400",children:o.jsx(Ff,{size:24})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:"Terdeteksi Nama Paket Ganda"}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 hidden sm:block",children:["Ditemukan ",le," judul yang sama. Sistem dapat memperbaikinya secara otomatis."]})]})]}),o.jsxs("button",{onClick:()=>P("FIX_DUPLICATES"),className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-bold text-sm transition shadow-sm flex items-center gap-2 whitespace-nowrap",children:[o.jsx(Qp,{size:16}),"Perbaiki"]})]}),_e>0&&b&&o.jsxs("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-4 rounded-xl flex items-center justify-between animate-fade-in-down shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg text-blue-600 dark:text-blue-400",children:o.jsx(S9,{size:24})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:"Terdeteksi Lompatan Nomor"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 hidden sm:block",children:"Urutan paket soal tidak kontinu (ada nomor yang hilang)."})]})]}),o.jsxs("button",{onClick:()=>P("FIX_GAPS"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold text-sm transition shadow-sm flex items-center gap-2 whitespace-nowrap",children:[o.jsx(NE,{size:16}),"Urutkan Ulang"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(mA,{size:18,className:"text-slate-400"})," Admin Zone"]}),o.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[o.jsxs("button",{onClick:()=>P("GENERATE"),disabled:J,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[J?o.jsx(Un,{className:"animate-spin",size:18}):o.jsx(Q9,{size:18}),o.jsx("span",{children:"Buat Paket AI"})]}),o.jsxs("button",{onClick:()=>P("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[o.jsx(mx,{size:18}),o.jsx("span",{children:"Import"})]})]})]}),o.jsx("input",{type:"file",ref:A,className:"hidden",accept:".json",multiple:!0,onChange:te=>{te.target.files&&te.target.files.length>0&&h(te.target.files),A.current&&(A.current.value="")}})]}),k&&Y.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500",children:[o.jsx(Un,{className:"animate-spin mx-auto mb-2"}),o.jsx("p",{children:"Memuat paket soal terbaru..."})]}):Y.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsx(oi,{className:"mx-auto mb-4 opacity-20",size:48}),o.jsx("p",{children:"Belum ada paket soal untuk kategori ini."}),o.jsx("p",{className:"text-xs mt-2",children:'Gunakan tombol "Buat Paket AI" untuk generate soal baru.'})]}):o.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Y.map(te=>{const F=I(te.id,te.title);return o.jsxs("button",{onClick:()=>l(te),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[te.isAiGenerated&&o.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:te.title}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{onClick:Q=>Ee(Q,te),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:o.jsx(dA,{size:18})}),o.jsx("div",{onClick:Q=>{Q.stopPropagation(),P("DELETE",te.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:o.jsx(Ro,{size:18})})]})]}),o.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ar,{size:12})," ",te.durationMinutes," Menit"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(oi,{size:12})," ",te.questions.length," Soal"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(uA,{size:12})," ",new Date(te.createdAt).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]}),te.version==="v2"&&o.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"}),te.version==="v3"&&o.jsxs("span",{className:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-amber-200 dark:border-amber-800 flex items-center gap-1",children:[o.jsx(p8,{size:10})," v3 (3D)"]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),o.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[F.attempts,"x"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),o.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:F.highScore})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),o.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:F.avgScore})]})]})]},te.id)})})]})]})},$7=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},Y7=({answers:n,questions:e,onHome:t,onRetry:s,category:a,details:l})=>{const u=n.filter(k=>k.isCorrect).length;let h=(l==null?void 0:l.total)||(l==null?void 0:l.average)||(l==null?void 0:l.iqScore)||Math.round(u/e.length*100);if(a==="GENERAL"&&!l){const k=n.reduce((C,U)=>C+(U.scoreEarned||0),0);h=Math.round(k/(e.length||1))}const[p,f]=B.useState(""),[b,_]=B.useState(!1),T=n.filter(k=>!k.isCorrect),E=Array.from(new Set(T.map(k=>{var U,M;const C=e.find(G=>G.id===k.questionId);return((U=C==null?void 0:C.metadata)==null?void 0:U.subtest)||((M=C==null?void 0:C.metadata)==null?void 0:M.topic)||"General"}))),R=async()=>{_(!0);try{const k=await gP(E);f(k)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return o.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:o.jsxs("div",{className:"max-w-2xl w-full text-center",children:[o.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:h>=(a==="UTBK"?600:70)?o.jsx(cA,{size:48,className:"text-emerald-500"}):o.jsx(Qn,{size:48,className:"text-amber-500"})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),o.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:h})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:a==="GENERAL"?"Poin":"Akurasi"}),o.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:a==="GENERAL"?h:`${Math.round(u/e.length*100)}%`})]})]}),a==="UTBK"&&l&&o.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Umum:"})," ",o.jsx("b",{children:l.pu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PPU:"})," ",o.jsx("b",{children:l.ppu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PBM:"})," ",o.jsx("b",{children:l.pbm})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Kuantitatif:"})," ",o.jsx("b",{children:l.pk})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Indo:"})," ",o.jsx("b",{children:l.lbi})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Inggris:"})," ",o.jsx("b",{children:l.lbe})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Math:"})," ",o.jsx("b",{children:l.pm})]})]})]}),E.length>0&&o.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[o.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[o.jsx(Pr,{size:20})," Topik Perlu Perbaikan"]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:E.slice(0,5).map(k=>o.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:k},k))}),p?o.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[o.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),o.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:o.jsx($7,{text:p})})]}):o.jsxs("button",{onClick:R,disabled:b,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[b?o.jsx(Un,{className:"animate-spin",size:14}):o.jsx(fA,{size:14}),"Minta Saran Perbaikan AI"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[o.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map((k,C)=>{const U=n.find(q=>q.questionId===k.id),M=U==null?void 0:U.isCorrect,G=encodeURIComponent(`Pembahasan Soal ${a} ${k.metadata.subtest||k.metadata.topic}`);return o.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",C+1]}),M?o.jsx(ds,{size:16,className:"text-emerald-500"}):o.jsx(Lo,{size:16,className:"text-rose-500"})]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2 mb-2",children:k.content}),o.jsxs("div",{className:"flex justify-between items-center",children:[!M&&k.type==="multiple_choice"&&o.jsxs("p",{className:"text-xs text-rose-500",children:["Jawaban: ",(U==null?void 0:U.selectedAnswer)||"-"," (Kunci: ",k.correctAnswer,")"]}),o.jsxs("a",{href:`https://www.youtube.com/results?search_query=${G}`,target:"_blank",rel:"noreferrer",className:"ml-auto text-[10px] flex items-center gap-1 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 px-2 py-1 rounded-full font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition",children:[o.jsx(_A,{size:12})," Tonton Pembahasan"]})]})]},C)})})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),o.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},ch=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},sf=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,SA=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,sp=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,J7=n=>n.category==="BUTAWRNA",Q7=n=>{switch(n){case"UTBK":return{icon:rc,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Bf,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Ts,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Bs,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Io,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:zf,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:ql,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:Vf,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:oi,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},vr=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},kE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},EA=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,W7=(n,e)=>{var t;if(!e)return"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700";if(n.tkpPoints&&n.tkpPoints.length>0||(t=n.metadata)!=null&&t.subtest&&n.metadata.subtest.includes("TKP")){const s=e.scoreEarned;return s>=5?"bg-emerald-200 dark:bg-emerald-900/40 border-emerald-300 dark:border-emerald-700":s===4?"bg-lime-200 dark:bg-lime-900/40 border-lime-300 dark:border-lime-700":s===3?"bg-yellow-200 dark:bg-yellow-900/40 border-yellow-300 dark:border-yellow-700":s===2?"bg-orange-200 dark:bg-orange-900/40 border-orange-300 dark:border-orange-700":"bg-rose-200 dark:bg-rose-900/40 border-rose-300 dark:border-rose-700"}return e.isCorrect?"bg-emerald-100 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800":"bg-rose-100 dark:bg-rose-900/30 border-rose-200 dark:border-rose-800"},X7=({history:n,onBack:e,onReview:t,username:s,onExport:a,onImport:l,onDelete:u})=>{const[h,p]=B.useState("ALL"),[f,b]=B.useState(null),_=B.useRef(null),T=n.filter(M=>h==="ALL"||M.category===h),E=T.length,R=E>0?Math.round(T.reduce((M,G)=>M+G.score,0)/E):0,k=E>0?Math.max(...T.map(M=>M.score)):0,C=(M,G)=>{M.stopPropagation(),Z.play("click"),b(G)},U=()=>{f&&(u(f),b(null))};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[f&&o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:o.jsx(Ro,{size:24})}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),o.jsxs("div",{className:"flex gap-3 w-full",children:[o.jsx("button",{onClick:()=>b(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),o.jsx("button",{onClick:U,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(pt,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),o.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(vA,{size:12})," ",s]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[o.jsx(dA,{size:14})," Backup"]}),o.jsxs("button",{onClick:()=>{var M;return(M=_.current)==null?void 0:M.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[o.jsx(mx,{size:14})," Restore"]}),o.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:M=>{var G;(G=M.target.files)!=null&&G[0]&&l(M.target.files[0]),_.current&&(_.current.value="")}})]})]}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[o.jsx("button",{onClick:()=>p("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),zE.map(M=>o.jsx("button",{onClick:()=>p(M.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h===M.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:M.name},M.id))]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(s9,{size:14})," Total Tes"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:E})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(S7,{size:14})," Avg Skor"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:R})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(cA,{size:14})," Tertinggi"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:k})]})]}),o.jsx("div",{className:"space-y-4",children:T.length===0?o.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[o.jsx(Lu,{size:48,className:"mx-auto mb-4 opacity-20"}),o.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(M=>{const G=Q7(M.category),q=G.icon,X=M.questions?M.questions.length:0,J=M.answers?M.answers.length:0,D=M.answers?M.answers.filter(ue=>ue.isCorrect).length:0,A=J-D,I=M.answers?M.answers.reduce((ue,Ae)=>ue+(Ae.timeTakenSeconds||0),0):0,P=kE(I),L=sf(M),z=SA(M),V=sp(M),Ee=J7(M);let De=M.category;M.category==="TPA"?De="Seleksi Lanjutan I":M.category==="PSIKOTEST"&&sf(M)?De="Tes Koran / Pauli":M.category==="PSIKOTEST"&&sp(M)?De="Psikotes (IQ & Logika)":M.category==="KECERMATAN"?De="Tes Kecermatan":Ee&&(De="Tes Buta Warna & Visual"),M.packageTitle&&(De=M.packageTitle);let Y=M.score.toString(),le="SKOR",_e={text:"-",color:"text-slate-500"};if(z){const ue=M.details;Y=ue.accuracy+"%",le="AKURASI",_e=vr(ue.accuracy,"PERCENT")}else if(L){const ue=M.details;Y=ue.accuracy+"%",le="AKURASI",_e=vr(ue.accuracy,"PERCENT")}else if(V){const ue=M.details.iqScore||M.score;Y=ue.toString(),le="IQ SCORE",_e=vr(ue,"IQ")}else if(Ee){const ue=M.details;ue.type==="Ishihara Simulation"?(Y=ue.passed?"NORMAL":"DEFECT",le="STATUS",_e={text:ue.diagnosis,color:ue.passed?"text-emerald-500":"text-rose-500"}):(Y=M.score.toString(),le="SKOR",_e=vr(M.score,"PERCENT"))}else{const ue=M.maxScore>0?M.score/M.maxScore*100:0;_e=vr(ue,"PERCENT")}const Oe=_e.color;let te=D,F=A,Q=0,fe=0,ie={val:0,index:0},re=[];if(z){const ue=M.details;te=ue.totalCorrect,F=ue.totalWrong,Q=ue.averageSpeed,fe=ue.stability,re=ue.sectionData.map(Ae=>Ae.correct)}else if(L){const ue=M.details;te=ue.totalCorrect,F=ue.totalWrong,Q=ue.speedPerMinute,fe=ue.consistencyScore,re=ue.intervalData}if(re&&re.length>0){const ue=Math.max(...re),Ae=re.indexOf(ue);ie={val:ue,index:Ae+1}}return o.jsxs("div",{onClick:()=>t(M),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[o.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[M.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),M.details&&M.details.passed!==void 0&&o.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${M.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:M.details.passed?"LULUS":"TIDAK LULUS"})]}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${G.bg} ${G.color} border ${G.border}`,children:o.jsx(q,{size:24})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:De}),M.packageTitle&&M.packageTitle!==De&&o.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[o.jsx(gA,{size:10})," ",M.packageTitle]}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(uA,{size:12})," ",new Date(M.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),M.skdStream&&o.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:M.skdStream}),z&&M.details.mode&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:EA(M.details.mode)}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(Ar,{size:10})," ",P]})]}),Ee&&M.details.type&&o.jsx("span",{className:"bg-pink-100 dark:bg-pink-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-pink-700 dark:text-pink-400 uppercase",children:M.details.type.replace(" Simulation","").replace("Discrimination","")}),L&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(Ar,{size:10})," ",P]})]}),sp(M)&&o.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("div",{className:`text-xl sm:text-2xl font-black ${Oe}`,children:Y}),o.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:le})]})]}),o.jsxs("div",{className:"mt-3",children:[z||L?o.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),o.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:te+F})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),o.jsxs("span",{className:"font-bold",children:[o.jsx("span",{className:"text-emerald-500",children:te})," / ",o.jsx("span",{className:"text-rose-500",children:F})]})]}),o.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),o.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:Q})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),o.jsx("span",{className:"font-black text-amber-500",children:fe})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),o.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${ie.val} at Interval ${ie.index}`,children:[ie.val,o.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",ie.index]})]})]}),o.jsxs("div",{className:"flex flex-col text-center",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),o.jsx("span",{className:`font-black text-[10px] leading-tight ${_e.color}`,children:_e.text})]})]}):o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[J," ",o.jsxs("span",{className:"text-slate-400",children:["/ ",X]})]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),o.jsxs("span",{className:"font-bold text-emerald-600",children:[D," ",o.jsx("span",{className:"text-slate-400",children:"/"})," ",o.jsx("span",{className:"text-rose-500",children:A})]})]}),Ee&&M.details.breakdown&&o.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Analisis"}),o.jsx("span",{className:"font-bold text-[10px] text-slate-700 dark:text-slate-200 uppercase",children:M.details.diagnosis})]}),!Ee&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:kE(I)})]}),M.category==="SKD"&&M.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),o.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[o.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",M.details.twk]}),o.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",M.details.tiu]}),o.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",M.details.tkp]})]})]}),M.category==="UTBK"&&M.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:M.details.average})]})]}),(L||z)&&re.length>0&&o.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:re.map((ue,Ae)=>{const Fe=Math.max(...re,1),We=ue/Fe*100;return o.jsx("div",{className:`flex-1 rounded-t-sm ${Ae+1===ie.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${We}%`}},Ae)})})]})]})]}),o.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:ue=>C(ue,M.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:o.jsx(Ro,{size:14})}),o.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:o.jsx(br,{size:14})})]})]},M.id)})})]})]})},Z7=({item:n,onBack:e})=>{if(sf(n)||SA(n)){const t=sf(n),s=n.details;let a=[],l=0,u=0,h=0,p=0,f=0,b="",_={text:"-",color:"text-slate-500"};if(t){const R=s;a=R.intervalData||[],l=R.totalCorrect,u=R.totalWrong,h=R.speedPerMinute,p=R.accuracy,f=R.consistencyScore,b="PAULI / KORAN",_=vr(R.accuracy,"PERCENT")}else{const R=s;a=R.sectionData.map(k=>k.correct),l=R.totalCorrect,u=R.totalWrong,h=R.averageSpeed,p=R.accuracy,f=R.stability,b=EA(R.mode),_=vr(R.accuracy,"PERCENT")}let T=0,E=0;return a.length>0&&(T=Math.max(...a),E=a.indexOf(T)+1),o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(pt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:o.jsx(Qn,{size:32})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",b]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",o.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:l}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),o.jsx("div",{className:"text-3xl font-black text-rose-500",children:u}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:h}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),o.jsxs("div",{className:`text-3xl font-black ${vr(p,"PERCENT").color}`,children:[p,"%"]}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:f}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),o.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",E]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),o.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:a.map((R,k)=>{const C=Math.max(...a,10),U=R/C*100,M=R===T;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[o.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${M?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${U}%`}}),o.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:k+1}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",k+1,": ",R]})]},k)})}),o.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]})]})]})})}return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsxs("button",{onClick:e,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(pt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(oi,{size:24,className:"text-indigo-600"}),"Review: ",n.packageTitle||n.category]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-600",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Skor Total"}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:n.score})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-600",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Benar / Salah"}),o.jsxs("div",{className:"text-2xl font-black",children:[o.jsx("span",{className:"text-emerald-500",children:n.answers.filter(t=>t.isCorrect).length}),o.jsx("span",{className:"text-slate-400 mx-2",children:"/"}),o.jsx("span",{className:"text-rose-500",children:n.answers.filter(t=>!t.isCorrect).length})]})]})]}),o.jsx("div",{className:"space-y-4",children:n.questions.map((t,s)=>{var u,h,p,f;const a=n.answers.find(b=>b.questionId===t.id),l=W7(t,a);return o.jsxs("div",{className:`p-4 border rounded-xl transition-all ${l}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:["Soal ",s+1]}),a!=null&&a.isCorrect?o.jsx(ds,{size:16,className:"text-emerald-600 dark:text-emerald-400"}):o.jsx(Lo,{size:16,className:"text-rose-600 dark:text-rose-400"})]}),o.jsx("div",{className:"mb-3 text-slate-800 dark:text-slate-200",children:o.jsx(ch,{text:t.content})}),o.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[o.jsxs("div",{className:`flex gap-2 ${a!=null&&a.isCorrect?"text-emerald-700 dark:text-emerald-300":"text-rose-700 dark:text-rose-300"}`,children:[o.jsx("span",{className:"font-bold w-24 shrink-0",children:"Jawabanmu:"}),o.jsx("span",{className:"font-medium",children:t.options&&t.type==="multiple_choice"?o.jsx(ch,{text:(a==null?void 0:a.selectedAnswer)||"-"}):(a==null?void 0:a.selectedAnswer)||"-"})]}),!(a!=null&&a.isCorrect)&&o.jsxs("div",{className:"flex gap-2 text-slate-600 dark:text-slate-400",children:[o.jsx("span",{className:"font-bold w-24 shrink-0",children:"Kunci:"}),o.jsx("span",{className:"font-medium",children:t.options&&t.type==="multiple_choice"?o.jsx(ch,{text:t.correctAnswer}):t.correctAnswer})]}),(t.tkpPoints||(a==null?void 0:a.scoreEarned)!==void 0&&(((h=(u=t.metadata)==null?void 0:u.subtest)==null?void 0:h.includes("TKP"))||((f=(p=t.metadata)==null?void 0:p.topic)==null?void 0:f.includes("TKP"))))&&o.jsxs("div",{className:"flex gap-2 text-slate-600 dark:text-slate-400 mt-1",children:[o.jsx("span",{className:"font-bold w-24 shrink-0",children:"Poin:"}),o.jsx("span",{className:"font-bold bg-white/50 px-2 rounded",children:a==null?void 0:a.scoreEarned})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-black/10 dark:border-white/10",children:o.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300 bg-white/60 dark:bg-black/20 p-3 rounded-lg border border-black/5 dark:border-white/5",children:[o.jsxs("div",{className:"font-bold mb-1 flex items-center gap-1 opacity-75",children:[o.jsx(Qn,{size:12})," Penjelasan:"]}),o.jsx(ch,{text:t.explanation})]})})]},s)})})]})]})})},ip=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"leading-relaxed"})},eB=({timeLeft:n,onFinish:e})=>(B.useEffect(()=>{n<=0&&e()},[n,e]),o.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[o.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:o.jsx(Xp,{size:48,className:"text-white"})}),o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),o.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),o.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),o.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),tB=({isOpen:n,onCancel:e,onConfirm:t,stats:s})=>{if(!n)return null;const a=s.unanswered>0||s.doubtful>0;return o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${a?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`,children:a?o.jsx(Ff,{size:32}):o.jsx(ds,{size:32})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:a?"Yakin Selesai?":"Selesaikan Ujian?"}),a?o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left space-y-2 border border-slate-200 dark:border-slate-600",children:[o.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Periksa kembali jawaban Anda:"}),s.unanswered>0&&o.jsxs("div",{className:"flex items-center justify-between text-rose-600 dark:text-rose-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Lo,{size:14})," Belum Diisi"]}),o.jsxs("span",{className:"font-bold",children:[s.unanswered," Soal"]})]}),s.doubtful>0&&o.jsxs("div",{className:"flex items-center justify-between text-amber-600 dark:text-amber-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(X8,{size:14})," Ragu-ragu"]}),o.jsxs("span",{className:"font-bold",children:[s.doubtful," Soal"]})]})]}):o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Semua ",s.total," soal telah dijawab. Waktu akan dihentikan dan skor akan dihitung."]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition",children:"Ya, Selesai"}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Kembali Mengerjakan"})]})]})})},nB=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},sB=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:a,isUtbkSimulation:l,category:u,showToast:h,initialState:p,userId:f,skdStream:b,tpaStream:_,packageTitle:T,onSaveAndExit:E,initialFontSize:R="md"})=>{var Lt,ci,Pn;const[k,C]=B.useState(R),[U,M]=B.useState(!1),[G,q]=B.useState((p==null?void 0:p.utbkSubtestIndex)||0),[X,J]=B.useState(!1),[D,A]=B.useState(0),[I,P]=B.useState((p==null?void 0:p.currentIndex)||0),[L,z]=B.useState((p==null?void 0:p.answerMap)||{}),[V,Ee]=B.useState(!1),[De,Y]=B.useState(!1),[le,_e]=B.useState(!1),[Oe,te]=B.useState(!1),[F,Q]=B.useState({unanswered:0,doubtful:0,total:0}),fe=B.useRef(Date.now()),ie=()=>p!=null&&p.timeLeft?p.timeLeft:l&&Fi[0]?Fi[0].duration*60:a?6e3:n===Ke.SIMULATION?u==="PSIKOTEST"?2400:u==="TPA"?6e3:3600:0,[re,ue]=B.useState(ie);B.useEffect(()=>{if(!f)return;let ve=b;typeof b=="object"&&b!==null&&(ve=null);let Se=_;typeof _=="object"&&_!==null&&(Se=null);const Me={uid:f,mode:n,category:u,questions:e,answerMap:L,timeLeft:re,currentIndex:I,utbkSubtestIndex:G,drillContent:t,skdStream:ve,tpaStream:Se,packageTitle:T,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(Me,nB()))}catch(Ye){console.warn("Failed to save session state",Ye)}},[re,L,I,G,f,b,_]);const Ae=()=>{localStorage.removeItem("fajmuls_active_session")},Fe=B.useMemo(()=>{if(l){const ve=Fi[G].name;return e.filter(Se=>{var Me,Ye;return(Ye=(Me=Se.metadata)==null?void 0:Me.subtest)==null?void 0:Ye.includes(ve)})}return e},[e,l,G]);B.useEffect(()=>{let ve=null;return X&&D>0?ve=setInterval(()=>A(Se=>Se-1),1e3):X&&D===0?J(!1):re>0&&!V&&n===Ke.SIMULATION?ve=setInterval(()=>{ue(Se=>(Se<=11&&Se>1&&Z.play("tick"),Se-1))},1e3):re===0&&n===Ke.SIMULATION&&(l?We():tt()),()=>clearInterval(ve)},[re,V,X,D,n]);const We=()=>{if(l)if(G<Fi.length-1){Z.play("success");const ve=G+1;q(ve);const Se=Fi[ve].duration;ue(Se*60),P(0),A(30),J(!0)}else tt();else tt()},At=()=>{Z.play("click");const ve=l&&G<Fi.length-1?Fe:e;let Se=0,Me=0;ve.forEach(Ye=>{const kt=L[Ye.id];!kt||!kt.selectedAnswer?Se++:kt.isDoubtful&&Me++}),Q({unanswered:Se,doubtful:Me,total:ve.length}),te(!0)},jt=()=>{te(!1),l&&G<Fi.length-1?We():tt()},tt=async()=>{if(f&&!f.startsWith("guest-"))try{await PV(f)}catch{}Ae(),Z.play("finish"),s(Object.values(L))},mt=()=>{s(Object.values(L),void 0,!0)},de=async()=>{if(!f||f.startsWith("guest-")){h("Fitur simpan ke cloud hanya untuk pengguna login.","error");return}_e(!0);let ve=b;typeof b=="object"&&b!==null&&(ve=null);let Se=_;typeof _=="object"&&_!==null&&(Se=null);const Me={uid:f,mode:n,category:u,questions:e,answerMap:L,timeLeft:re,currentIndex:I,utbkSubtestIndex:G,drillContent:t,skdStream:ve,tpaStream:Se,packageTitle:T,timestamp:Date.now()};try{await MV(f,Me),Ae(),h("Progres tersimpan di cloud! Anda bisa melanjutkannya nanti.","success"),E?E():s(Object.values(L),void 0,!0)}catch(Ye){console.error(Ye),h("Gagal menyimpan ke cloud. Cek koneksi internet.","error")}finally{_e(!1)}},Be=async ve=>{var ui,Bn,en,Cn,Gt;const Se=Fe[I];if(!Se)return;Z.play("click");let Me=0,Ye=!1;if(u==="SKD")if(Se.tkpPoints&&Se.tkpPoints.length>0){const Kt=Se.tkpPoints.find(hs=>hs.option===ve);Me=Kt?Kt.points:0,Ye=Me===5}else Ye=ve===Se.correctAnswer,Me=Ye?5:0;else if(u==="UTBK"){Ye=ve===Se.correctAnswer;const Kt=((ui=Se.metadata)==null?void 0:ui.difficulty)||"Medium";Me=Ye?Kt==="HOTS"||Kt==="Hard"?3:Kt==="Medium"?2:1:0}else if(u==="TPA"){const Kt=((en=(Bn=Se.metadata)==null?void 0:Bn.subtest)==null?void 0:en.includes("TBI"))||((Gt=(Cn=Se.metadata)==null?void 0:Cn.subtest)==null?void 0:Gt.includes("Inggris"));if(_==="PSIKOTEST_KEDINASAN")if(Se.tkpPoints&&Se.tkpPoints.length>0){const hs=Se.tkpPoints.find(fs=>fs.option===ve);Me=hs?hs.points:0,Ye=Me===5}else Ye=ve===Se.correctAnswer,Me=Ye?5:0;else Ye=ve===Se.correctAnswer,Kt?Me=Ye?5:0:Me=Ye?4:-1}else Ye=ve===Se.correctAnswer,Me=Ye?10:0;let kt="";if(Se.type!=="multiple_choice"&&u==="GENERAL")try{const Kt=await pP(Se.content,Se.correctAnswer,ve);Me=Kt.score,Ye=Kt.isCorrect,kt=Kt.feedback}catch{console.error("Grading failed")}const Bt=L[Se.id],Vn=(Date.now()-fe.current)/1e3,Gs={questionId:Se.id,selectedAnswer:ve,isCorrect:Ye,scoreEarned:Me,timeTakenSeconds:((Bt==null?void 0:Bt.timeTakenSeconds)||0)+Vn,isOverthinking:!1,isGuessing:Vn<5,aiEvaluation:kt,isDoubtful:(Bt==null?void 0:Bt.isDoubtful)||!1};z(Kt=>({...Kt,[Se.id]:Gs})),fe.current=Date.now()},Xe=()=>{const ve=Fe[I];z(Se=>{const Me=Se[ve.id];return Me?{...Se,[ve.id]:{...Me,isDoubtful:!Me.isDoubtful}}:{...Se,[ve.id]:{questionId:ve.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},Qe=ve=>{const Se=Math.floor(ve/3600),Me=Math.floor(ve%3600/60),Ye=Math.floor(ve%60);return`${Se>0?Se+":":""}${Me.toString().padStart(2,"0")}:${Ye.toString().padStart(2,"0")}`},Vt=(ve,Se)=>ve.length===0?null:o.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:Se}),o.jsx("div",{className:"grid grid-cols-5 gap-2",children:ve.map((Me,Ye)=>{const kt=Fe.findIndex(Gs=>Gs.id===Me.id),Bt=L[Me.id];let Vn="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return Bt!=null&&Bt.selectedAnswer&&(Vn="bg-emerald-500 border-emerald-500 text-white"),Bt!=null&&Bt.isDoubtful&&(Vn="bg-amber-400 border-amber-400 text-white"),kt===I&&(Vn+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),o.jsx("button",{onClick:()=>{P(kt),Y(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${Vn}`,children:kt+1},Me.id)})})]});if(X)return o.jsx(eB,{timeLeft:D,onFinish:()=>{J(!1)}});if(Fe.length===0)return o.jsxs("div",{className:"p-10 text-center",children:[o.jsx(Un,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const ht=Fe[I],Ze=L[ht.id];return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[o.jsx(tB,{isOpen:Oe,onCancel:()=>te(!1),onConfirm:jt,stats:F}),V&&o.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[o.jsx(Su,{size:48,className:"mx-auto mb-4 text-indigo-600"}),o.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),o.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[o.jsxs("button",{onClick:()=>Ee(!1),className:"w-full px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[o.jsx(Uo,{size:20})," Lanjutkan"]}),!(f!=null&&f.startsWith("guest-"))&&o.jsxs("button",{onClick:de,disabled:le,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[le?o.jsx(Un,{className:"animate-spin"}):o.jsx(TE,{size:20}),"Simpan & Lanjut Nanti"]}),o.jsx("button",{onClick:mt,className:"w-full px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan Lokal)"})]})]})}),o.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[o.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",I+1]}),o.jsxs("div",{className:"flex items-center gap-2",children:[n===Ke.SIMULATION&&o.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:Qe(re)}),o.jsx("button",{onClick:()=>M(!U),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:o.jsx(Kl,{size:20})}),o.jsx("button",{onClick:()=>Y(!De),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:o.jsx(Da,{size:20})})]})]}),U&&o.jsx("div",{className:"absolute top-16 right-4 z-50 bg-white dark:bg-slate-800 p-3 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 flex gap-2 animate-fade-in-down",children:["sm","md","lg","xl"].map(ve=>o.jsx("button",{onClick:()=>{C(ve),M(!1)},className:`w-8 h-8 rounded-lg font-bold text-xs ${k===ve?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:ve.toUpperCase()},ve))}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:o.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6 relative",children:[o.jsx("div",{className:"absolute top-6 right-6 hidden md:flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:["sm","md","lg","xl"].map(ve=>o.jsx("button",{onClick:()=>C(ve),className:`px-2 py-1 rounded-md text-[10px] font-bold transition-all ${k===ve?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-white shadow-sm":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"}`,children:ve.toUpperCase()},ve))}),n===Ke.DRILL&&t&&o.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[o.jsx(Bs,{size:16})," ",t.topic]}),o.jsx("p",{children:t.summary})]}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:l?Fi[G].name:((Lt=ht.metadata)==null?void 0:Lt.subtest)||"General"}),((ci=ht.metadata)==null?void 0:ci.difficulty)==="HOTS"&&o.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[o.jsx(Bs,{size:12})," HOTS"]})]}),o.jsx("div",{className:`prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100 fs-${k}`,children:o.jsx(ip,{text:ht.content})}),ht.type==="multiple_choice"?o.jsx("div",{className:"space-y-3",children:(Pn=ht.options)==null?void 0:Pn.map((ve,Se)=>{var Vn;const Me=String.fromCharCode(65+Se),Ye=(Ze==null?void 0:Ze.selectedAnswer)===ve;let kt="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",Bt="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return Ye&&(kt="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",Bt="bg-indigo-600 text-white"),n!==Ke.SIMULATION&&Ze&&((ht.tkpPoints?((Vn=ht.tkpPoints.find(ui=>ui.option===ve))==null?void 0:Vn.points)===5:ve===ht.correctAnswer)?(kt="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",Bt="bg-emerald-500 text-white"):Ye&&(kt="border-rose-500 bg-rose-50 dark:bg-rose-900/20",Bt="bg-rose-500 text-white")),o.jsxs("button",{onClick:()=>Be(ve),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${kt}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${Bt}`,children:Me}),o.jsx("div",{className:`flex-1 pt-1 text-slate-700 dark:text-slate-200 fs-${k}`,children:o.jsx(ip,{text:ve})})]},Se)})}):o.jsxs("div",{children:[" ",o.jsx("textarea",{className:`w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white fs-${k}`,placeholder:"Ketik jawaban Anda...",rows:4,value:(Ze==null?void 0:Ze.selectedAnswer)||"",onChange:ve=>Be(ve.target.value)})," "]})]}),n!==Ke.SIMULATION&&Ze&&o.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[o.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[o.jsx(fA,{size:20})," Pembahasan"]}),o.jsx("div",{className:`text-slate-700 dark:text-slate-300 leading-relaxed fs-${k}`,children:o.jsx(ip,{text:ht.explanation})})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[o.jsxs("button",{onClick:()=>{P(ve=>Math.max(0,ve-1))},disabled:I===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[o.jsx(pt,{size:20})," ",o.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[p&&o.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[o.jsx(fx,{size:12})," Disimpan Otomatis"]}),o.jsxs("button",{onClick:Xe,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${Ze!=null&&Ze.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[o.jsx("input",{type:"checkbox",checked:(Ze==null?void 0:Ze.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),o.jsx("span",{children:"Ragu-ragu"})]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),I<Fe.length-1?P(ve=>ve+1):At()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[o.jsx("span",{className:"hidden sm:inline",children:I===Fe.length-1?l&&G<Fi.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),o.jsx(br,{size:20})]})]})})]}),o.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${De?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[o.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex flex-col gap-3 bg-slate-50 dark:bg-slate-800",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Navigasi Soal"}),o.jsx("button",{onClick:()=>Y(!1),className:"md:hidden text-slate-500",children:o.jsx(Lo,{size:24})})]}),!(f!=null&&f.startsWith("guest-"))&&o.jsxs("button",{onClick:de,disabled:le,className:"w-full flex items-center justify-center gap-2 py-2 bg-emerald-600 text-white rounded-lg font-bold text-xs hover:bg-emerald-700 disabled:opacity-50 transition",children:[le?o.jsx(Un,{size:14,className:"animate-spin"}):o.jsx(TE,{size:14}),"Kerjakan Lagi Nanti (Cloud)"]}),o.jsxs("button",{onClick:mt,className:"w-full flex items-center justify-center gap-2 py-2 border border-rose-200 dark:border-rose-900 text-rose-600 dark:text-rose-400 rounded-lg font-bold text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20 transition",children:[o.jsx(pt,{size:14})," Keluar (Simpan Lokal)"]})]}),n===Ke.SIMULATION&&re>0&&o.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),o.jsxs("button",{onClick:()=>Ee(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[o.jsx(Su,{size:12})," Jeda"]})]}),o.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:Qe(re)})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:a?o.jsxs(o.Fragment,{children:[Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):u==="TPA"&&n===Ke.SIMULATION?_==="PSIKOTEST_KEDINASAN"?o.jsxs(o.Fragment,{children:[Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("TIU")}),"TIU - Verbal & Numerik"),Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("Gambar")}),"Tes Logika Gambar"),Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("Kepribadian")}),"Tes Kepribadian")]}):o.jsxs(o.Fragment,{children:[Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("Verbal")}),"TPA - Verbal"),Vt(Fe.filter(ve=>{var Se,Me;return(Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("Kuantitatif")}),"TPA - Kuantitatif"),Vt(Fe.filter(ve=>{var Se,Me,Ye,kt;return((Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("Penalaran"))||((kt=(Ye=ve.metadata)==null?void 0:Ye.subtest)==null?void 0:kt.includes("Logika"))}),"TPA - Penalaran"),Vt(Fe.filter(ve=>{var Se,Me,Ye,kt;return((Me=(Se=ve.metadata)==null?void 0:Se.subtest)==null?void 0:Me.includes("TBI"))||((kt=(Ye=ve.metadata)==null?void 0:Ye.subtest)==null?void 0:kt.includes("Inggris"))}),"TBI - Bahasa Inggris")]}):Vt(Fe,l?Fi[G].name:u)}),o.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:o.jsx("button",{onClick:At,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),De&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>Y(!1)})]})},uh=10,ap=60,iB=500,CE=50,aB=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),rB=(n,e,t,s,a)=>{let l=0;return n>=400?l+=40:n>=300?l+=30:n>=200?l+=20:l+=10,t>=99?l+=20:t>=97?l+=15:t>=95?l+=10:l+=5,s<3?l+=20:s<6?l+=15:s<9?l+=10:l+=5,a==="NAIK"?l+=20:a==="STABIL"?l+=15:l+=5,l>=90?"Sangat Disarankan (Konsisten & Tinggi)":l>=75?"Disarankan (Baik)":l>=60?"Cukup (Perlu Latihan)":a==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},oB=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),a=t.reduce((h,p)=>h+p,0)/(t.length||1),u=(s.reduce((h,p)=>h+p,0)/(s.length||1)-a)/a*100;return u>5?"NAIK":u<-10?"TURUN":"STABIL"},lB=({onBack:n,onComplete:e})=>{const[t,s]=B.useState("SETUP"),[a,l]=B.useState([]),[u,h]=B.useState(0),[p,f]=B.useState(0),[b,_]=B.useState(0),[T,E]=B.useState(0),[R,k]=B.useState([]),[C,U]=B.useState(0),[M,G]=B.useState(!1),[q,X]=B.useState(uh*60),[J,D]=B.useState(ap),A=()=>{const te=aB(iB,CE);l(te),h(0),f(0),_(0),E(0),k([]),U(0),X(uh*60),D(ap),s("PLAYING"),Z.play("click")},I=B.useCallback(te=>{if(t!=="PLAYING")return;const F=a[u][p],Q=a[u][p+1];if(Q===void 0){h(ue=>ue+1),f(0);return}const ie=(F+Q)%10;te===ie?(_(ue=>ue+1),U(ue=>ue+1)):(E(ue=>ue+1),Z.play("error")),p<CE-2?f(ue=>ue+1):(h(ue=>ue+1),f(0))},[a,u,p,t]);B.useEffect(()=>{const te=F=>{t==="PLAYING"&&F.key>="0"&&F.key<="9"&&I(parseInt(F.key))};return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[t,I]),B.useEffect(()=>{if(t!=="PLAYING")return;const te=setInterval(()=>{X(F=>F<=1?(z(),0):F-1),D(F=>(F<=6&&F>1&&Z.play("tick"),F<=1?(Z.play("success"),L(),ap):F-1))},1e3);return()=>clearInterval(te)},[t,C]);const P=B.useRef(0);B.useEffect(()=>{P.current=C},[C]);const L=()=>{const te=P.current;k(F=>[...F,te]),U(0),G(!0),setTimeout(()=>G(!1),2e3)},z=(te=!1)=>{const F=P.current;F>0&&k(Q=>[...Q,F]),s("FINISHED"),te||Z.play("finish")},V=()=>{const te=b+T,F=(uh*60-q)/60,Q=F<.1?.1:F,fe=Q>0?Math.round(b/Q):0,ie=te>0?b/te*100:0;let re=0;if(R.length>0){const Fe=R.reduce((At,jt)=>At+jt,0)/R.length,We=R.reduce((At,jt)=>At+Math.pow(jt-Fe,2),0)/R.length;re=Math.sqrt(We)}const ue=oB(R),Ae=rB(b,fe,ie,re,ue);return{totalCorrect:b,totalWrong:T,totalAttempts:te,totalColumns:u,speedPerMinute:fe,consistencyScore:parseFloat(re.toFixed(2)),accuracy:Math.round(ie),intervalData:R,interpretation:{verdict:Ae,speedDesc:fe>50?"Sangat Cepat":fe>35?"Cepat":"Sedang",accDesc:ie>98?"Sangat Teliti":ie>92?"Teliti":"Kurang Teliti",stabDesc:ue==="TURUN"?"Menurun (Lelah)":re<4?"Stabil":"Fluktuatif",trend:ue}}},Ee=te=>{const F=Math.floor(te/60),Q=te%60;return`${F}:${Q.toString().padStart(2,"0")}`},De=()=>{const te=V(),F={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:te.totalCorrect,maxScore:0,details:te,questions:[],answers:[],isAborted:!0};e(F)};if(t==="SETUP")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[o.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[o.jsx(Qn,{size:64,className:"mx-auto mb-4 relative z-10"}),o.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),o.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(Ar,{size:18,className:"text-indigo-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Durasi:"})," ",uh," Menit"]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(Qn,{size:18,className:"text-emerald-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(So,{size:18,className:"text-amber-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),o.jsxs("button",{onClick:A,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[o.jsx(Uo,{size:24,fill:"currentColor"})," Mulai Tes"]}),o.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const te=V(),F={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:te.totalCorrect,maxScore:0,details:te,questions:[],answers:[]};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),o.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:te.interpretation.verdict})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(Qn,{size:14})," Prestasi (Total)"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:te.totalCorrect}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(Ar,{size:14})," Tempo"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:te.speedPerMinute}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(ds,{size:14})," Ketelitian"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:te.totalWrong}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",te.interpretation.accDesc,")"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(So,{size:14})," Stabilitas"]}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:te.consistencyScore}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",te.interpretation.trend,")"]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[o.jsx(So,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),o.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:te.intervalData.map((Q,fe)=>{const ie=Math.max(...te.intervalData,1),re=Q/ie*100;return o.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${re}%`},children:[o.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:fe+1}),o.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:Q})]},fe)})}),o.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),o.jsxs("button",{onClick:()=>e(F),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsx(fx,{size:20})," Simpan & Keluar"]})]})]})})}const Y=a[u]||[],le=Y[p],_e=Y[p+1],Oe=[1,2,3,4,5,6,7,8,9,0];return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),o.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:Ee(q)})]}),o.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),o.jsx("div",{className:"text-xl font-bold text-emerald-600",children:b})]})]}),o.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(Su,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),M&&o.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:o.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:p>0?Y[p-1]:"-"}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:le}),o.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:_e!==void 0?_e:"-"})]}),o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:Y[p+2]!==void 0?Y[p+2]:"-"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[o.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Oe.map(te=>o.jsx("button",{onClick:()=>I(te),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:te},te))}),o.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),o.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:De,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},rp=10,IE=60,RE=["A","B","C","D","E"],cs=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ME=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},DE=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...cs].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((a,l)=>l!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},PE=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>cs[Math.floor(Math.random()*cs.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const a=Math.floor(Math.random()*n);let l=cs[Math.floor(Math.random()*cs.length)];for(;l===e[a];)l=cs[Math.floor(Math.random()*cs.length)];s[a]=l}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=cs.find(u=>u!==s[0])||"X"));return{left:e,right:s,isSame:t}},jE=()=>{const e=[...cs].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},LE=()=>{const n=cs[Math.floor(Math.random()*cs.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=cs[Math.floor(Math.random()*cs.length)];for(;s===n;)s=cs[Math.floor(Math.random()*cs.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},cB=({initialMode:n,onBack:e,onComplete:t})=>{var fe;const[s,a]=B.useState(n||"ANGKA"),[l,u]=B.useState(1),[h,p]=B.useState(IE),[f,b]=B.useState(!1),[_,T]=B.useState("PLAYING"),[E,R]=B.useState(null),[k,C]=B.useState(null),[U,M]=B.useState(null),[G,q]=B.useState(null),[X,J]=B.useState([]),[D,A]=B.useState([]),[I,P]=B.useState(0),[L,z]=B.useState(0),[V,Ee]=B.useState(null),De=B.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(E){const ie=Math.floor(Math.random()*5),re=E.reference.filter((ue,Ae)=>Ae!==ie).sort(()=>.5-Math.random());R({...E,question:re,answer:ie})}else{const ie=DE(s);R(ie)}else if(s==="SAMA_BEDA")C(PE());else if(s==="MATCHING")if(!U)M(jE());else{const ie=Math.floor(Math.random()*5);M({...U,target:U.map[ie],answer:ie})}else s==="GROUPING"&&(q(LE()),J([]))},[s,E,U]),Y=B.useCallback(()=>{R(null),M(null),C(null),q(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?R(DE(s)):s==="SAMA_BEDA"?C(PE()):s==="MATCHING"?M(jE()):s==="GROUPING"&&(q(LE()),J([])),p(IE),P(0),z(0)},[s]);B.useEffect(()=>{_==="PLAYING"&&Y()},[l,s,_]);const le=ie=>{if(f)return;let re=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?re=ie===(E==null?void 0:E.answer):s==="SAMA_BEDA"?re=ie===(k==null?void 0:k.isSame):s==="MATCHING"&&(re=ie===(U==null?void 0:U.answer)),re?(P(ue=>ue+1),Ee("CORRECT")):(z(ue=>ue+1),Ee("WRONG"),Z.play("error")),setTimeout(()=>Ee(null),150),De()},_e=()=>{if(!G)return;let ie=0,re=0;X.forEach(Ae=>{G.grid[Ae]===G.target?ie++:re++});const ue=G.totalCorrect-ie;P(Ae=>Ae+ie),z(Ae=>Ae+re+ue),re===0&&ue===0?(Ee("CORRECT"),Z.play("success")):(Ee("WRONG"),Z.play("error")),setTimeout(()=>Ee(null),200),De()},Oe=ie=>{Z.play("click"),J(re=>re.includes(ie)?re.filter(ue=>ue!==ie):[...re,ie])};B.useEffect(()=>{if(f||_==="FINISHED")return;const ie=setInterval(()=>{p(re=>(re<=6&&re>1&&Z.play("tick"),re<=1?(te(),0):re-1))},1e3);return()=>clearInterval(ie)},[f,l,_,I,L]);const te=()=>{A(ie=>{if(ie.find(Ae=>Ae.section===l))return ie;const re={section:l,correct:I,wrong:L},ue=[...ie,re];return l>=rp?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{u(Ae=>Ae+1),Z.play("success")},0),ue})},F=()=>{const ie=D.length,re=D.reduce((Xe,Qe)=>Xe+Qe.correct,0),ue=D.reduce((Xe,Qe)=>Xe+Qe.wrong,0),Ae=ie>0?re/ie:0,Fe=re+ue,We=Fe>0?re/Fe*100:0,At=Ae,jt=D.reduce((Xe,Qe)=>Xe+Math.pow(Qe.correct-At,2),0)/(ie||1),tt=Math.sqrt(jt),mt=ME(We,Ae,tt),de={mode:s,totalCorrect:re,totalWrong:ue,averageSpeed:parseFloat(Ae.toFixed(1)),accuracy:parseFloat(We.toFixed(1)),sectionData:D,stability:parseFloat(tt.toFixed(2)),verdict:mt},Be={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(We),maxScore:100,details:de,questions:[],answers:[]};Z.play("finish"),t(Be)},Q=()=>{const ie={section:l,correct:I,wrong:L},re=[...D];re.find(Be=>Be.section===l)||re.push(ie);const ue=re.reduce((Be,Xe)=>Be+Xe.correct,0),Ae=re.reduce((Be,Xe)=>Be+Xe.wrong,0),Fe=ue/(re.length||1),We=ue+Ae,At=We>0?ue/We*100:0,mt={mode:s,totalCorrect:ue,totalWrong:Ae,averageSpeed:parseFloat(Fe.toFixed(1)),accuracy:parseFloat(At.toFixed(1)),sectionData:re,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},de={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(At),maxScore:100,details:mt,questions:[],answers:[],isAborted:!0};t(de)};if(_==="FINISHED"){const ie=D.reduce((tt,mt)=>tt+mt.correct,0),re=D.reduce((tt,mt)=>tt+mt.wrong,0),ue=ie/D.length,Ae=ie/(ie+re)*100,Fe=ue,We=D.reduce((tt,mt)=>tt+Math.pow(mt.correct-Fe,2),0)/D.length,At=Math.sqrt(We),jt=ME(Ae,ue,At);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:jt})}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ue.toFixed(1)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),o.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[Ae.toFixed(1),"%"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),o.jsx("div",{className:"text-2xl font-black text-amber-500",children:At.toFixed(2)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),o.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:rp}).map((tt,mt)=>{const de=D.find(Vt=>Vt.section===mt+1),Be=de?de.correct:0,Xe=Math.max(...D.map(Vt=>Vt.correct),10),Qe=Be/Xe*100;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[o.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${Qe}%`},children:o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",mt+1,": ",Be]})}),o.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:mt+1})]},mt)})})]}),o.jsxs("button",{onClick:F,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[o.jsx(fx,{size:20})," Simpan Hasil"]})]})})}return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),o.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[l,"/",rp]})]}),o.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),o.jsxs("span",{className:`text-lg font-mono font-black ${h<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[h,"s"]})]}),o.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),o.jsx("span",{className:"text-lg font-black text-emerald-600",children:I})]})]}),o.jsx("button",{onClick:()=>b(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(Su,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[V&&o.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${V==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:o.jsx("div",{className:`p-4 rounded-full ${V==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:V==="CORRECT"?o.jsx(ds,{size:64}):o.jsx(Wp,{size:64})})}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[o.jsx("div",{className:"grid grid-cols-5 gap-1",children:(fe=s==="MATCHING"?U==null?void 0:U.map:E==null?void 0:E.reference)==null?void 0:fe.map((ie,re)=>o.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:o.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:ie})},re))}),o.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:RE.map((ie,re)=>o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:ie},re))})]}),o.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?o.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:o.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:U==null?void 0:U.target})}):o.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:E==null?void 0:E.question.map((ie,re)=>o.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:ie},re))})]})]}),s==="SAMA_BEDA"&&k&&o.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:k.left.map((ie,re)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},re))})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:k.right.map((ie,re)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},re))})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[o.jsxs("button",{onClick:()=>le(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(ds,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),o.jsxs("button",{onClick:()=>le(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(Wp,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),o.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&G&&o.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[o.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",o.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:G.target})]}),o.jsx("button",{onClick:_e,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),o.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:G.grid.map((ie,re)=>{const ue=X.includes(re);return o.jsx("button",{onClick:()=>Oe(re),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${ue?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:ie},re)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:RE.map((ie,re)=>o.jsx("button",{onClick:()=>le(re),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:ie})},re))})})}),f&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),o.jsx("button",{onClick:()=>b(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:Q,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},uB={RED_GREEN:{fg:["#EA5455","#FF9F43","#E55039","#F8EFBA","#F97F51"],bg:["#2ECC71","#26C6DA","#1ABC9C","#55E6C1","#58B19F","#CAD3C8"]},BLUE_YELLOW:{fg:["#5F27CD","#341F97","#54A0FF","#2E86DE","#0ABDE3"],bg:["#FECA57","#FF9F43","#F8C291","#6AB04C","#BADC58"]},GRAYSCALE:{fg:["#2d3436","#636e72","#b2bec3"],bg:["#dfe6e9","#f5f6fa","#dcdde1"]},PROTANOPIA:{fg:["#833471","#6D214F","#B33771","#3B3B98"],bg:["#182C61","#2C3A47","#58B19F","#2C2C54"]},DEUTERANOPIA:{fg:["#D6A2E8","#82589F","#E056FD","#BE2EDD"],bg:["#95AFC0","#7ED6DF","#22A6B3","#30336B"]}},dB=()=>{const n=[];let e=1;n.push({id:e++,type:"NUMBER",palette:"RED_GREEN",target:12,difficulty:"EASY",description:"Control Plate"});for(let a=0;a<5;a++){const l=Math.floor(Math.random()*90)+10,u=Math.random();let h="RED_GREEN";u>.7?h="DEUTERANOPIA":u>.4&&(h="PROTANOPIA"),n.push({id:e++,type:"NUMBER",palette:h,target:l,difficulty:"MEDIUM",description:"Red-Green Defect Check"})}n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"MEDIUM",description:"Tritanopia Check"}),n.push({id:e++,type:"NUMBER",palette:"GRAYSCALE",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Contrast Sensitivity"}),n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Tritanopia Check"});const s=["curve_simple","snake","loop","spiral","zigzag","square","triangle","infinity"].sort(()=>.5-Math.random());for(let a=0;a<6;a++){const l=s[a%s.length],u=Math.random();let h="RED_GREEN";u>.8?h="GRAYSCALE":u>.6&&(h="BLUE_YELLOW"),n.push({id:e++,type:"PATH",palette:h,target:l,difficulty:a>3?"HARD":"MEDIUM",description:`Path Tracking (${h})`})}return n},hB=()=>o.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50 overflow-hidden",children:[[...Array(20)].map((n,e)=>o.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",backgroundColor:["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6"][Math.floor(Math.random()*5)],width:"10px",height:"10px",animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*3}s`}},e)),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"animate-bounce-slow text-6xl text-yellow-400 drop-shadow-lg",children:o.jsx(ws,{size:120,fill:"currentColor"})})})]}),fB=({config:n,onPathGenerated:e})=>{const t=B.useRef(null);return B.useEffect(()=>{const s=t.current;if(!s)return;const a=s.getContext("2d");if(!a)return;const l=document.createElement("canvas");l.width=s.width,l.height=s.height;const u=l.getContext("2d");if(!u)return;u.fillStyle="#000000",u.fillRect(0,0,s.width,s.height),u.fillStyle="#FFFFFF",u.strokeStyle="#FFFFFF";const h=[];if(n.type==="NUMBER"){u.font='bold 180px "Arial Rounded MT Bold", Arial, sans-serif',u.textAlign="center",u.textBaseline="middle";const k=(Math.random()-.5)*.2;u.save(),u.translate(s.width/2,s.height/2),u.rotate(k),u.fillText(n.target.toString(),0,15),u.restore()}else{u.lineWidth=55,u.lineCap="round",u.lineJoin="round",u.beginPath();const k=s.width,C=s.height,U=50;if(n.target==="curve_simple")u.moveTo(U,C/2),u.quadraticCurveTo(k/2,-50,k-U,C/2);else if(n.target==="snake")u.moveTo(U,C/2),u.bezierCurveTo(k/3,0,2*k/3,C,k-U,C/2);else if(n.target==="loop")u.arc(k/2,C/2,k/3,0,Math.PI*2);else if(n.target==="spiral"){const q=k/2,X=C/2;u.moveTo(q,X);for(let J=0;J<100;J++){const D=.3*J,A=2*J,I=q+A*Math.cos(D),P=X+A*Math.sin(D);if(I<U||I>k-U||P<U||P>C-U)break;u.lineTo(I,P)}}else n.target==="zigzag"?(u.moveTo(U,U),u.lineTo(k/2,C-U),u.lineTo(k-U,U)):n.target==="square"?u.rect(U,U,k-2*U,C-2*U):n.target==="triangle"?(u.moveTo(k/2,U),u.lineTo(k-U,C-U),u.lineTo(U,C-U),u.closePath()):n.target==="infinity"?(u.moveTo(U,C/2),u.bezierCurveTo(k/3,0,k/3,C,k/2,C/2),u.bezierCurveTo(2*k/3,0,2*k/3,C,k-U,C/2)):(u.moveTo(U,C-U),u.bezierCurveTo(k/2,0,k,C/2,k/2,C/2),u.bezierCurveTo(0,C/2,k/2,C,k-U,U));u.stroke();const M=u.getImageData(0,0,k,C),G=20;for(let q=0;q<C;q+=G)for(let X=0;X<k;X+=G)M.data[(q*k+X)*4]>200&&h.push({x:X,y:q});e(h)}const f=u.getImageData(0,0,s.width,s.height).data,b=uB[n.palette];a.clearRect(0,0,s.width,s.height);const _=s.width/2,T=s.height/2,E=s.width/2-2,R=3200;for(let k=0;k<R;k++){let C=Math.random()*s.width,U=Math.random()*s.height;if(Math.sqrt(Math.pow(C-_,2)+Math.pow(U-T,2))>E)continue;const G=(Math.floor(U)*s.width+Math.floor(C))*4,q=f[G]>128;let X=Math.random()*3+2;n.difficulty==="HARD"&&(X=Math.random()*2.5+1.5);let J=q?b.fg:b.bg;n.difficulty==="HARD"&&Math.random()<.08&&(J=q?b.bg:b.fg);const D=J[Math.floor(Math.random()*J.length)];a.beginPath(),a.arc(C,U,X,0,Math.PI*2),a.fillStyle=D,a.fill()}},[n]),o.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-100 dark:bg-slate-800"})},mB=({isActive:n,onStroke:e,clearTrigger:t})=>{const s=B.useRef(null),[a,l]=B.useState(!1);return B.useEffect(()=>{const u=s.current;if(u){const h=u.getContext("2d");h==null||h.clearRect(0,0,u.width,u.height)}},[t]),B.useEffect(()=>{const u=s.current;if(!u||!n)return;const h=u.getContext("2d");if(!h)return;const p=T=>{const E=u.getBoundingClientRect();let R,k;return"touches"in T?(R=T.touches[0].clientX,k=T.touches[0].clientY):(R=T.clientX,k=T.clientY),{x:(R-E.left)*(u.width/E.width),y:(k-E.top)*(u.height/E.height)}},f=T=>{T.preventDefault(),l(!0);const E=p(T);h.beginPath(),h.moveTo(E.x,E.y),h.lineWidth=15,h.lineCap="round",h.lineJoin="round",h.strokeStyle="rgba(0, 0, 255, 0.7)",e(E)},b=T=>{if(!a)return;T.preventDefault();const E=p(T);h.lineTo(E.x,E.y),h.stroke(),e(E)},_=()=>{l(!1),h.closePath()};return u.addEventListener("mousedown",f),u.addEventListener("touchstart",f,{passive:!1}),window.addEventListener("mousemove",b),window.addEventListener("touchmove",b,{passive:!1}),window.addEventListener("mouseup",_),window.addEventListener("touchend",_),()=>{u.removeEventListener("mousedown",f),u.removeEventListener("touchstart",f),window.removeEventListener("mousemove",b),window.removeEventListener("touchmove",b),window.removeEventListener("mouseup",_),window.removeEventListener("touchend",_)}},[n,a,e]),o.jsx("canvas",{ref:s,width:320,height:320,className:"absolute top-0 left-0 cursor-crosshair touch-none z-10"})},pB=({onFinish:n})=>{const[e,t]=B.useState([]),[s,a]=B.useState(null),[l,u]=B.useState(!1),[h,p]=B.useState(0);B.useEffect(()=>{const T=Array.from({length:15},(R,k)=>({id:k,color:`hsl(${k*21.333333333333332}, 65%, 55%)`,correctIndex:k})),E=T.slice(1,14).sort(()=>Math.random()-.5);t([T[0],...E,T[14]])},[]);const f=_=>{if(!l){if(_===0||_===e.length-1){Z.play("error");return}if(s===null)Z.play("tap"),a(_);else{const T=[...e];[T[s],T[_]]=[T[_],T[s]],t(T),a(null),Z.play("click")}}},b=()=>{let _=0;for(let E=0;E<e.length-1;E++){const R=Math.abs(e[E].correctIndex-e[E+1].correctIndex);R>1&&(_+=R-1)}const T=Math.max(0,100-_*3);p(T),u(!0),Z.play("finish")};return l?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl",children:[o.jsx(ql,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Tes Spektrum"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:h}),o.jsx("p",{className:"text-slate-500 mb-6",children:h>=90?"Penglihatan warna sangat akurat!":h>=70?"Diskriminasi warna baik.":"Terindikasi kesulitan membedakan nuansa warna."}),o.jsx("div",{className:"flex justify-center gap-1 mb-6 h-8 rounded-lg overflow-hidden border border-slate-200",children:e.map((_,T)=>o.jsx("div",{className:"flex-1",style:{backgroundColor:_.color}},T))}),o.jsx("button",{onClick:()=>n(h),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"text-center font-bold text-lg mb-4 text-slate-800 dark:text-white flex items-center justify-center gap-2",children:[o.jsx(ql,{size:20})," Urutkan Warna"]}),o.jsxs("p",{className:"text-center text-sm text-slate-500 mb-6",children:["Klik untuk menukar posisi kotak warna agar membentuk gradasi yang halus dari kiri ke kanan.",o.jsx("br",{}),o.jsx("span",{className:"text-xs text-rose-500 font-bold",children:"Kotak pertama dan terakhir terkunci."})]}),o.jsx("div",{className:"grid grid-cols-5 sm:flex sm:flex-nowrap gap-1 mb-8",children:e.map((_,T)=>{const E=T===0||T===e.length-1,R=s===T;return o.jsx("div",{onClick:()=>f(T),className:`
                                h-16 sm:h-24 sm:flex-1 rounded-lg cursor-pointer transition-all transform
                                ${R?"scale-110 ring-4 ring-indigo-500 z-10":"hover:scale-105"}
                                ${E?"opacity-100 ring-2 ring-slate-400 z-0 cursor-default":"opacity-100"}
                            `,style:{backgroundColor:_.color},children:E&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/50",children:o.jsx(Ff,{size:16})})},T)})}),o.jsxs("button",{onClick:b,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(ds,{size:20})," Selesai Mengurutkan"]})]})},gB=({onFinish:n})=>{const[e,t]=B.useState(1),[s,a]=B.useState(0),[l,u]=B.useState([]),[h,p]=B.useState({x:0,y:0}),[f,b]=B.useState(null),[_,T]=B.useState("CLOSEST"),[E,R]=B.useState(!1),k=B.useRef(null),C=10,U=[{base:"#f43f5e",light:"#fb7185",glow:"rgba(244, 63, 94, 0.6)"},{base:"#3b82f6",light:"#60a5fa",glow:"rgba(59, 130, 246, 0.6)"},{base:"#10b981",light:"#34d399",glow:"rgba(16, 185, 129, 0.6)"},{base:"#f59e0b",light:"#fbbf24",glow:"rgba(245, 158, 11, 0.6)"},{base:"#8b5cf6",light:"#a78bfa",glow:"rgba(139, 92, 246, 0.6)"}],M=()=>{b(null);const X=Math.random()>.5?"CLOSEST":"FURTHEST";T(X);const J=[],D=[-1,0,1].sort(()=>.5-Math.random());for(let A=0;A<3;A++){const I=D[A],P=-100-Math.floor(Math.random()*300),L=Math.floor(Math.random()*U.length);J.push({id:A,z:P,lane:I,color:JSON.stringify(U[L])})}u(J)};B.useEffect(()=>{M()},[]);const G=X=>{if(!k.current)return;const J=k.current.getBoundingClientRect();let D,A;"touches"in X?(D=X.touches[0].clientX,A=X.touches[0].clientY):(D=X.clientX,A=X.clientY);const I=(D-J.left)/J.width*2-1,P=(A-J.top)/J.height*2-1;p({x:I,y:P})},q=(X,J)=>{if(E||f!==null)return;b(X);const D=l.map(P=>P.z),A=_==="CLOSEST"?Math.max(...D):Math.min(...D);J===A?(Z.play("success"),a(P=>P+1)):Z.play("error"),setTimeout(()=>{e<C?(t(P=>P+1),M()):(R(!0),Z.play("finish"))},500)};return E?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl animate-fade-in",children:[o.jsx(dx,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Persepsi Kedalaman"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:s*10}),o.jsx("p",{className:"text-slate-500 mb-6",children:s>=8?"Persepsi kedalaman sangat baik!":"Perlu latihan estimasi jarak visual."}),o.jsx("button",{onClick:()=>n(s*10),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 p-6 rounded-3xl shadow-xl overflow-hidden relative select-none",children:[o.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-black/50 px-3 py-1 rounded text-white text-xs font-bold",children:["Round ",e,"/",C]}),o.jsx("h3",{className:"text-center font-bold text-lg mb-8 text-white flex items-center justify-center gap-2 z-10 relative",children:_==="CLOSEST"?"Pilih yang TERDEKAT (Paling Besar/Jelas)":"Pilih yang TERJAUH (Paling Kecil/Buram)"}),o.jsxs("div",{ref:k,className:"h-96 w-full relative flex justify-center items-center bg-gradient-to-b from-slate-800 to-slate-900 overflow-hidden rounded-xl border border-slate-700 cursor-crosshair touch-none perspective-container",onMouseMove:G,onTouchMove:G,children:[o.jsx("div",{className:"absolute bottom-0 w-[200%] h-[100%] left-[-50%] bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:40px_40px]",style:{transform:"perspective(600px) rotateX(60deg) translateY(100px) scale(2)",pointerEvents:"none"}}),l.map(X=>{const D=1e3/(1e3-X.z),A=Math.abs(X.z+100)/100,I=h.x*D*30,P=h.y*D*15,V=X.lane*100+I,Ee=P,De=1e3+Math.floor(X.z),Y=100,le=JSON.parse(X.color),_e=f===X.id;return o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(calc(-50% + ${V}px), calc(-50% + ${Ee}px))`,zIndex:_e?2e3:De,width:`${Y*D}px`,height:`${Y*D}px`,transition:_e?"transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)":"transform 0.1s linear"},children:[o.jsx("div",{className:"absolute bg-black/50 rounded-full blur-md",style:{bottom:"-20%",left:"10%",width:"80%",height:"20%",opacity:.6*D,transform:_e?"scale(1.5)":"scale(1)",transition:"all 0.3s"}}),o.jsxs("div",{onClick:Oe=>{Oe.stopPropagation(),q(X.id,X.z)},className:"w-full h-full rounded-full cursor-pointer touch-manipulation relative",style:{background:`radial-gradient(circle at 30% 30%, ${le.light}, ${le.base})`,boxShadow:_e?`0 0 50px 20px ${le.glow}, inset -10px -10px 20px rgba(0,0,0,0.5)`:"inset -10px -10px 20px rgba(0,0,0,0.5), 0 0 10px rgba(0,0,0,0.3)",filter:_e?"blur(0px)":`blur(${A}px)`,transform:_e?"scale(1.2)":"scale(1)",transition:"all 0.3s ease-out"},children:[o.jsx("div",{className:"absolute top-[15%] left-[15%] w-[25%] h-[25%] bg-white/60 rounded-full blur-[2px] pointer-events-none"}),_e&&o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white animate-ping opacity-75"})]})]},X.id)})]}),o.jsxs("div",{className:"text-center text-slate-400 text-xs mt-4 flex items-center justify-center gap-2",children:[o.jsx(pA,{size:12})," Gerakkan mouse/jari untuk melihat efek 3D (Paralaks)."]})]})},xB=({onBack:n,onComplete:e})=>{const[t,s]=B.useState("MENU"),[a,l]=B.useState([]),[u,h]=B.useState(0),[p,f]=B.useState([]),[b,_]=B.useState(""),[T,E]=B.useState(!1),[R,k]=B.useState([]),[C,U]=B.useState([]),[M,G]=B.useState(0),q=()=>{const P=dB();l(P),f([]),h(0),E(!1),s("ISHIHARA"),Z.play("click")},X=()=>{Z.play("click");const P=a[u];let L=!1;if(P.type==="NUMBER")L=b.trim(),_("");else{if(R.length===0||C.length===0)L=!1;else{let V=0;const Ee=30;R.forEach(Y=>{C.some(_e=>Math.sqrt(Math.pow(_e.x-Y.x,2)+Math.pow(_e.y-Y.y,2))<Ee)&&V++}),L=V/R.length>.55}U([]),k([]),G(V=>V+1)}const z=[...p,L];f(z),u<a.length-1?h(V=>V+1):(Z.play("finish"),E(!0),setTimeout(()=>{J(z)},3500))},J=P=>{let L=0,z={RED_GREEN:0,BLUE_YELLOW:0,TOTAL_RG:0,TOTAL_BY:0};const V=a.map((le,_e)=>{const Oe=P[_e];let te=!1;return le.type==="NUMBER"?te=Oe.toString()===le.target.toString():te=Oe===!0,te?L++:((le.palette==="RED_GREEN"||le.palette==="PROTANOPIA"||le.palette==="DEUTERANOPIA")&&z.RED_GREEN++,le.palette==="BLUE_YELLOW"&&z.BLUE_YELLOW++),(le.palette==="RED_GREEN"||le.palette==="PROTANOPIA"||le.palette==="DEUTERANOPIA")&&z.TOTAL_RG++,le.palette==="BLUE_YELLOW"&&z.TOTAL_BY++,{question:le,answer:Oe,isCorrect:te}}),Ee=L>=12;let De="Normal Color Vision";Ee||(z.RED_GREEN>2&&z.BLUE_YELLOW<=1?De="Possible Red-Green Deficiency (Protan/Deutan)":z.BLUE_YELLOW>1&&z.RED_GREEN<=2?De="Possible Blue-Yellow Deficiency (Tritan)":z.RED_GREEN>2&&z.BLUE_YELLOW>1?De="Complex/Severe Deficiency":De="Mild Deficiency / Inconsistent");const Y={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:Math.round(L/a.length*100),maxScore:100,details:{type:"Ishihara Simulation",passed:Ee,correctCount:L,diagnosis:De,breakdown:z},questions:a.map(le=>({id:`q-${le.id}`,type:"short_answer",content:`Plate ${le.id} (${le.palette})`,correctAnswer:le.target.toString(),explanation:le.description||"",metadata:{difficulty:"Medium",idealTimeSeconds:15,topic:"Color",subtest:le.palette}})),answers:V.map((le,_e)=>({questionId:`q-${le.question.id}`,selectedAnswer:le.answer.toString(),isCorrect:le.isCorrect,scoreEarned:le.isCorrect?1:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1}))};e(Y)},D=P=>{const L={id:`hue-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:P,maxScore:100,details:{type:"Hue Discrimination",passed:P>70,diagnosis:P>70?"Good Discrimination":"Weak Discrimination"},questions:[],answers:[]};e(L)},A=P=>{const L={id:`depth-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:P,maxScore:100,details:{type:"Depth Perception",passed:P>70,diagnosis:P>70?"Good Depth Perception":"Poor Depth Estimation"},questions:[],answers:[]};e(L)};if(t==="MENU")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 hover:text-indigo-600 mb-8 font-bold",children:[o.jsx(pt,{size:20,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx(Io,{size:64,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400"}),o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Visual"}),o.jsx("p",{className:"text-slate-500 mb-8",children:"Pilih metode pengujian:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:q,className:"w-full p-4 bg-indigo-50 dark:bg-indigo-900/20 border-2 border-indigo-100 dark:border-indigo-800 rounded-2xl hover:border-indigo-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-indigo-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(Qn,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Simulasi Ishihara"}),o.jsx("p",{className:"text-xs text-slate-500",children:"15 Plate Angka & Jalur (Buta Warna)"})]})]}),o.jsxs("button",{onClick:()=>s("HUE_SORT"),className:"w-full p-4 bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-100 dark:border-emerald-800 rounded-2xl hover:border-emerald-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-emerald-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(ql,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Tes Spektrum Warna"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Farnsworth-Munsell D-15 (Sorting)"})]})]}),o.jsxs("button",{onClick:()=>s("DEPTH"),className:"w-full p-4 bg-sky-50 dark:bg-sky-900/20 border-2 border-sky-100 dark:border-sky-800 rounded-2xl hover:border-sky-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-sky-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(dx,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Persepsi Kedalaman"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Estimasi Jarak Objek 3D"})]})]})]})]})]})});if(t==="HUE_SORT")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(pt,{size:20,className:"mr-2"})," Batal"]}),o.jsx(pB,{onFinish:D})]});if(t==="DEPTH")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(pt,{size:20,className:"mr-2"})," Batal"]}),o.jsx(gB,{onFinish:A})]});const I=a[u];return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors relative overflow-hidden",children:[T&&o.jsx(hB,{}),o.jsxs("div",{className:`w-full max-w-md transition-all duration-500 ${T?"scale-90 opacity-0":"scale-100 opacity-100"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[o.jsx(pt,{size:18,className:"mr-2"})," Keluar"]}),o.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[u+1," / ",a.length]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center select-none relative",children:[o.jsx("div",{className:"mb-6 flex justify-center py-2 relative",children:o.jsxs("div",{className:"relative inline-block",children:[o.jsx(fB,{config:I,onPathGenerated:P=>k(P)}),I.type==="PATH"&&o.jsx(mB,{isActive:!0,onStroke:P=>U(L=>[...L,P]),clearTrigger:M})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:I.type==="NUMBER"?"Angka berapa yang terlihat?":"Ikuti jalur dengan jari/kursor!"}),o.jsx("div",{className:"flex justify-center gap-2 mt-2",children:o.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-700 text-slate-500 px-2 py-1 rounded font-bold uppercase",children:I.palette.replace("_"," ")})})]}),I.type==="NUMBER"?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:b,onChange:P=>_(P.target.value),autoFocus:!0,onKeyDown:P=>P.key==="Enter"&&b&&X()}),o.jsx("button",{onClick:X,disabled:!b,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}):o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>G(P=>P+1),className:"px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-300 transition flex items-center justify-center gap-2",children:[o.jsx(H8,{size:18})," Hapus"]}),o.jsxs("button",{onClick:X,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(ds,{size:18})," Selesai Gambar"]})]}),I.type==="NUMBER"&&o.jsx("div",{className:"mt-4 flex justify-center",children:o.jsxs("button",{onClick:()=>_("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline flex items-center gap-1",children:[o.jsx(Io,{size:12})," Tidak terlihat apa-apa (Isi 0)"]})})]}),I.type==="PATH"&&o.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-slate-500 animate-pulse",children:[o.jsx(pA,{size:12})," Tarik garis di atas gambar."]})]})]})},gx=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},yB=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",Zp=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},wA=n=>{switch(n){case"REACTION":return o.jsx(Bs,{size:20});case"SEQUENCE":return o.jsx(Da,{size:20});case"AIM":return o.jsx(Pr,{size:20});case"CHIMP":return o.jsx(Ts,{size:20});case"VISUAL":return o.jsx(Da,{size:20});case"NUMBER":return o.jsx(tf,{size:20});case"VERBAL":return o.jsx(Kl,{size:20});case"TYPING":return o.jsx(oi,{size:20});case"BRIDGE":return o.jsx(nf,{size:20});case"MATCH":return o.jsx(Tu,{size:20});default:return o.jsx(Qn,{size:20})}},NA=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},bB=()=>o.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:o.jsx(Qn,{size:64})}),vB=({percentile:n,score:e,unit:t,game:s})=>{const u=n/100*300;return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[o.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[o.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),o.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),o.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),o.jsx("line",{x1:u,y1:"10",x2:u,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),o.jsx("circle",{cx:u,cy:"10",r:"4",fill:"#ef4444"})]}),o.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),o.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[o.jsx("span",{children:"Bottom 1%"}),o.jsx("span",{children:"Average"}),o.jsx("span",{children:"Top 1%"})]})]})},_B=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const a=gx(t,s),l=yB(a);let u="pts";return(t==="REACTION"||t==="AIM")&&(u="ms"),t==="TYPING"&&(u="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(u="lvl"),o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(So,{className:"text-indigo-500"})," Statistik Anda"]}),o.jsx("button",{onClick:()=>{Z.play("back"),e()},children:o.jsx(px,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),o.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",o.jsx("span",{className:"text-lg font-medium text-slate-400",children:u})]}),o.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",a,"% orang"]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[o.jsx(vB,{percentile:a,score:s,unit:u,game:t}),o.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:l})]})]}):o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},TB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState("WAITING"),[a,l]=B.useState(0),[u,h]=B.useState([]),[p,f]=B.useState(0),b=B.useRef(null);B.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);const _=()=>{s("READY");const C=Math.floor(Math.random()*3e3)+2e3;b.current=window.setTimeout(()=>{l(Date.now()),s("GO")},C)},T=()=>{if(t==="WAITING")_();else if(t==="READY")b.current&&clearTimeout(b.current),s("TOO_SOON");else if(t==="GO"){const C=Date.now()-a;f(C);const U=[...u,C];h(U),U.length>=5?(s("FINAL_SCORE"),Z.play("finish")):(s("RESULT"),Z.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},E=u.length>0?Math.round(u.reduce((C,U)=>C+U,0)/u.length):0;let R,k="bg-slate-900";return t==="WAITING"?(R=o.jsxs(o.Fragment,{children:[o.jsx(Bs,{size:80,className:"mx-auto mb-6 text-amber-400"}),o.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),o.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",u.length+1," dari 5"]}),o.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),k="bg-slate-800"):t==="READY"?(R=o.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),k="bg-rose-600"):t==="GO"?(R=o.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),k="bg-emerald-500"):t==="RESULT"?(R=o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[p," ms"]}),o.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),k="bg-indigo-600"):t==="FINAL_SCORE"?(R=o.jsxs(o.Fragment,{children:[o.jsx(Qn,{size:64,className:"mx-auto mb-4 text-emerald-400"}),o.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),o.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[E," ms"]}),o.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[o.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(E),children:"Simpan Skor"}),o.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{h([]),s("WAITING")},children:"Coba Lagi"})]})]}),k="bg-slate-800"):t==="TOO_SOON"&&(R=o.jsxs(o.Fragment,{children:[o.jsx(bB,{}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),o.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),k="bg-slate-800"),o.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${k}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[o.jsx("button",{onClick:C=>{C.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),R]})},SB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState([]),[a,l]=B.useState([]),[u,h]=B.useState(1),[p,f]=B.useState("START"),[b,_]=B.useState(null),T=async(R,k)=>{f("WATCHING"),l([]);const C=Math.floor(Math.random()*9),U=[...k,C];s(U),await new Promise(M=>setTimeout(M,800));for(let M=0;M<U.length;M++)_(U[M]),Z.play("click"),await new Promise(G=>setTimeout(G,600)),_(null),await new Promise(G=>setTimeout(G,200));f("PLAYING")},E=async R=>{if(p!=="PLAYING")return;_(R),Z.play("tap"),setTimeout(()=>_(null),200);const k=[...a,R];if(l(k),k[k.length-1]!==t[k.length-1]){f("GAMEOVER"),Z.play("error");return}k.length===t.length&&(f("WATCHING"),Z.play("success"),await new Promise(C=>setTimeout(C,800)),h(C=>C+1),T(u+1,t))};return p==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Da,{size:80,className:"mx-auto mb-6 text-indigo-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),o.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Da,{size:64,className:"mx-auto mb-6 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:u})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{h(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(1,u-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",u]}),o.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:p==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((R,k)=>o.jsx("div",{onClick:()=>E(k),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${b===k?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},k))})]})},EB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState("IDLE"),[a,l]=B.useState(30),[u,h]=B.useState({top:"50%",left:"50%"}),[p,f]=B.useState([]),b=B.useRef(null),[_,T]=B.useState(0),[E,R]=B.useState(0),[k,C]=B.useState(0),[U,M]=B.useState(null),G=()=>{if(!b.current)return;const I=b.current.getBoundingClientRect(),P=96,L=50,z=I.width-P-L,V=I.height-P-L,Ee=Math.max(L,Math.random()*z),De=Math.max(L,Math.random()*V);h({top:`${De}px`,left:`${Ee}px`})},q=()=>{s("PLAYING"),l(30),f([]),T(0),R(0),G()};B.useEffect(()=>{if(t==="PLAYING"&&E>0){const I=setInterval(()=>{T(Date.now()-E)},50);return M(I),()=>clearInterval(I)}},[t,E]);const X=I=>{if(I.stopPropagation(),t!=="PLAYING")return;const P=Date.now();if(E===0){R(P),C(P),l(z=>z-1),G(),Z.play("click");return}const L=P-k;f(z=>[...z,L]),C(P),Z.play("click"),a<=1?(clearInterval(U),s("FINISHED"),Z.play("finish")):(l(z=>z-1),G())},J=()=>{t==="PLAYING"&&E>0&&Z.play("error")},D=p.length>0?Math.round(p.reduce((I,P)=>I+P,0)/p.length):0,A=p.length>0?Math.round(p.reduce((I,P)=>I+P,0)/p.length):0;return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:J,children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),t==="IDLE"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:I=>I.stopPropagation(),children:[o.jsx(Pr,{size:80,className:"mx-auto mb-6 text-orange-500"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),o.jsx("button",{onClick:q,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),o.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:a})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),o.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),o.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[A," ms"]})]})]}),o.jsx("div",{ref:b,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:o.jsxs("div",{onMouseDown:X,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:u.top,left:u.left},children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),o.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),o.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:I=>I.stopPropagation(),children:[o.jsx(Pr,{size:64,className:"mx-auto mb-4 text-orange-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),o.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),o.jsxs("h1",{className:"text-7xl font-black mb-8",children:[D," ms"]}),o.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>n(D),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),o.jsx("button",{onClick:q,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},wB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(4),[a,l]=B.useState([]),[u,h]=B.useState("IDLE"),[p,f]=B.useState(1),[b,_]=B.useState(!1),T=R=>{const C=Array.from({length:40},(M,G)=>G).sort(()=>.5-Math.random()),U=Array.from({length:R},(M,G)=>({id:G+1,pos:C[G],visible:!0}));l(U),f(1),_(!1),h("PLAYING")},E=R=>{u==="PLAYING"&&(R===p?(Z.play("click"),R===1&&_(!0),l(k=>k.map(C=>C.id===R?{...C,visible:!1}:C)),R===a.length?(Z.play("success"),setTimeout(()=>{s(k=>k+1),T(t+1)},500)):f(k=>k+1)):(Z.play("error"),h("GAMEOVER")))};return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),u==="IDLE"&&o.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[o.jsx(Ts,{size:80,className:"mx-auto mb-6 text-teal-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),o.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),u==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),o.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((R,k)=>{const C=a.find(U=>U.pos===k);return!C||!C.visible?o.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},k):o.jsx("button",{onMouseDown:()=>E(C.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${b&&C.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:b&&C.id>1?"":C.id},k)})})]}),u==="GAMEOVER"&&o.jsxs("div",{className:"text-center text-white",children:[o.jsx(Ts,{size:64,className:"mx-auto mb-4 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},NB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(3),[u,h]=B.useState(3),[p,f]=B.useState([]),[b,_]=B.useState([]),[T,E]=B.useState([]),[R,k]=B.useState("START"),C=M=>{let G=3;M>2&&(G=4),M>5&&(G=5),M>10&&(G=6),M>20&&(G=7),h(G);const q=Math.min(Math.floor(G*G/2),M+2),X=[];for(;X.length<q;){const J=Math.floor(Math.random()*(G*G));X.includes(J)||X.push(J)}f(X),_([]),E([]),k("SHOWING"),setTimeout(()=>k("PLAYING"),1e3+M*100)},U=M=>{if(R==="PLAYING"&&!(b.includes(M)||T.includes(M)))if(p.includes(M)){Z.play("tap");const G=[...b,M];_(G),G.length===p.length&&(Z.play("success"),setTimeout(()=>{s(q=>q+1),C(t+1)},500))}else{Z.play("error");const G=a-1;l(G),E(q=>[...q,M]),G<=0&&setTimeout(()=>k("GAMEOVER"),500)}};return R==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Da,{size:80,className:"mx-auto mb-6 text-sky-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),o.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):R==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[o.jsx(Da,{size:64,className:"mx-auto mb-6 text-sky-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((M,G)=>o.jsx(Gf,{size:24,className:G<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},G))})]}),o.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:u*u}).map((M,G)=>{const q=p.includes(G),X=b.includes(G),J=T.includes(G);let D="bg-slate-700 hover:bg-slate-600";return R==="SHOWING"&&q&&(D="bg-white shadow-[0_0_15px_white] scale-95"),R==="PLAYING"&&X&&(D="bg-white"),R==="PLAYING"&&J&&(D="bg-slate-900 border-2 border-rose-900"),o.jsx("div",{onMouseDown:()=>U(G),className:`rounded-lg transition-all duration-200 cursor-pointer ${D}`},G)})})]})},AB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(""),[u,h]=B.useState(""),[p,f]=B.useState("START"),[b,_]=B.useState(0),[T,E]=B.useState(100),R=M=>{let G="";for(let q=0;q<M;q++)G+=Math.floor(Math.random()*10);return G},k=()=>{s(1),C(1)},C=M=>{const G=R(M);l(G),f("SHOWING"),E(100);const q=1e3+M*500;_(q),setTimeout(()=>{E(0)},50),setTimeout(()=>{f("INPUT")},q)},U=M=>{M==null||M.preventDefault(),u===a?(Z.play("success"),f("RESULT"),setTimeout(()=>{s(G=>G+1),h(""),C(t+1)},1e3)):(Z.play("error"),f("GAMEOVER"))};return p==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(tf,{size:80,className:"mx-auto mb-6 text-blue-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),o.jsx("button",{onClick:k,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(tf,{size:64,className:"mx-auto mb-6 text-blue-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),o.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[o.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),o.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:a}),o.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),o.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:u})]}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:k,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),p==="SHOWING"&&o.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[o.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:a}),o.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${b}ms`,opacity:T>0?1:.2}})})]}),p==="INPUT"&&o.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[o.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),o.jsxs("form",{onSubmit:U,children:[o.jsx("input",{type:"number",autoFocus:!0,value:u,onChange:M=>h(M.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),p==="RESULT"&&o.jsxs("div",{className:"text-center",children:[o.jsx(ds,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},kB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(0),[a,l]=B.useState(3),[u,h]=B.useState(""),[p,f]=B.useState(new Set),[b,_]=B.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],E=()=>{const C=p.size>0&&Math.random()<.4;let U="";if(C){const M=Array.from(p);U=M[Math.floor(Math.random()*M.length)]}else{let M=0;do U=T[Math.floor(Math.random()*T.length)],M++;while(p.has(U)&&M<100)}h(U)},R=C=>{const U=p.has(u);if(C==="SEEN"&&U||C==="NEW"&&!U)s(G=>G+1),C==="NEW"&&f(G=>new Set(G).add(u)),Z.play("click"),E();else{const G=a-1;l(G),Z.play("error"),C==="NEW"&&f(q=>new Set(q).add(u)),G<=0?_("GAMEOVER"):E()}},k=()=>{s(0),l(3),f(new Set),_("PLAYING"),E()};return b==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Kl,{size:80,className:"mx-auto mb-6 text-purple-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),o.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",o.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",o.jsx("strong",{children:"SUDAH"}),"."]}),o.jsx("button",{onClick:k,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):b==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Kl,{size:64,className:"mx-auto mb-6 text-purple-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:k,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[o.jsxs("div",{children:["Skor: ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((C,U)=>o.jsx(Gf,{size:24,className:U<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},U))})]}),o.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:u}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>R("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),o.jsx("button",{onClick:()=>R("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},CB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(""),[a,l]=B.useState(""),[u,h]=B.useState(null),[p,f]=B.useState(0),[b,_]=B.useState(0),[T,E]=B.useState("START");B.useEffect(()=>{const C=Jv,U=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(U)},[]),B.useEffect(()=>{let C;return T==="PLAYING"&&u&&(C=setInterval(()=>{const M=(Date.now()-u)/1e3;_(Math.floor(M));const G=a.length,q=M/60;q>0&&f(Math.round(G/5/q))},1e3)),()=>clearInterval(C)},[T,u,a]);const R=C=>{const U=C.target.value;if(T==="START"&&(h(Date.now()),E("PLAYING")),l(U),U===t){const M=(Date.now()-(u||Date.now()))/6e4,G=Math.round(t.length/5/M);f(G),E("FINISHED"),Z.play("finish")}else U.length%5===0&&Z.play("tap")},k=()=>{const C=Jv,U=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(U),l(""),h(null),f(0),_(0),E("START")};return T==="FINISHED"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(oi,{size:64,className:"mx-auto mb-6 text-slate-400"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),o.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[p," ",o.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:k,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(p),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[o.jsxs("div",{children:["WPM: ",o.jsx("span",{className:"font-bold text-emerald-400",children:p})]}),o.jsxs("div",{children:["Time: ",o.jsxs("span",{className:"font-bold text-emerald-400",children:[b,"s"]})]})]}),o.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[o.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((C,U)=>{let M="text-slate-500";return U<a.length&&(M=a[U]===C?"text-white":"text-rose-500 bg-rose-500/20"),o.jsx("span",{className:M,children:C},U)})}),o.jsx("textarea",{value:a,onChange:R,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},IB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(3),[u,h]=B.useState(5),[p,f]=B.useState(4),[b,_]=B.useState([]),[T,E]=B.useState("START"),[R,k]=B.useState(0),[C,U]=B.useState(100),[M,G]=B.useState(1500),q=D=>{const I=4+Math.floor(D/2);h(5),f(I);const P=[];let L=I-1,z=Math.floor(5/2);for(P.push({row:L,col:z});L>0;){L--;const V=[z];z>0&&V.push(z-1),z<4&&V.push(z+1),z=V[Math.floor(Math.random()*V.length)],P.push({row:L,col:z})}_(P)},X=D=>{q(D),E("SHOWING"),U(100);const A=1500;G(A),setTimeout(()=>U(0),50),setTimeout(()=>{E("PLAYING"),k(0)},A)},J=(D,A)=>{if(T!=="PLAYING")return;const I=b[R];if(D===I.row&&A===I.col){Z.play("click");const P=R+1;k(P),P===b.length&&(Z.play("success"),setTimeout(()=>{s(L=>L+1),X(t+1)},500))}else Z.play("error"),l(P=>P-1),a<=1?E("GAMEOVER"):(E("SHOWING"),U(100),setTimeout(()=>U(0),50),setTimeout(()=>{E("PLAYING"),k(0)},M))};return T==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(nf,{size:80,className:"mx-auto mb-6 text-emerald-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(3),X(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(nf,{size:64,className:"mx-auto mb-6 text-emerald-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(3),X(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{Z.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((D,A)=>o.jsx(Gf,{size:24,className:A<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},A))})]}),o.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${C}%`,transitionDuration:`${M}ms`}})}),o.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:o.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,gridTemplateRows:`repeat(${p}, 1fr)`},children:Array.from({length:p}).map((D,A)=>Array.from({length:u}).map((I,P)=>{const L=b.findIndex(De=>De.row===A&&De.col===P),z=L!==-1,V=z&&L<R;let Ee="bg-slate-700";return T==="SHOWING"&&z?Ee="bg-emerald-400":T==="PLAYING"&&(V?Ee="bg-emerald-600":z&&L===R&&(Ee="bg-slate-700 active:bg-emerald-400")),o.jsx("div",{onMouseDown:()=>J(A,P),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${Ee} hover:opacity-90`},`${A}-${P}`)}))})}),o.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[o.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),o.jsx(o8,{size:32})]})]})},RB=({onFinish:n,onExit:e})=>{const[t,s]=B.useState(1),[a,l]=B.useState(5),[u,h]=B.useState([]),[p,f]=B.useState([]),[b,_]=B.useState("START"),[T,E]=B.useState(!1),[R,k]=B.useState(3),C=["","","","","","","","","","","","","","","",""],U=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],M=X=>{const J=X+2,D=J*2,A=Math.ceil(Math.sqrt(D));k(A);const I=[...C].sort(()=>Math.random()-.5).slice(0,J);let P=[];for(let L=0;L<J;L++){const z=I[L],V=U[L%U.length];P.push({id:L*2,icon:z,flipped:!0,matched:!1,color:V}),P.push({id:L*2+1,icon:z,flipped:!0,matched:!1,color:V})}P=P.sort(()=>Math.random()-.5).map((L,z)=>({...L,id:z})),h(P),_("PREVIEW")},G=()=>{Z.play("click"),h(X=>X.map(J=>({...J,flipped:!1}))),_("PLAYING")},q=X=>{if(b!=="PLAYING"||T)return;const J=u.find(I=>I.id===X);if(!J||J.flipped||J.matched)return;Z.play("click");const D=u.map(I=>I.id===X?{...I,flipped:!0}:I);h(D);const A=[...p,X];if(f(A),A.length===2){E(!0);const I=D.find(L=>L.id===A[0]),P=D.find(L=>L.id===A[1]);I&&P&&I.icon===P.icon?(Z.play("success"),setTimeout(()=>{h(L=>L.map(z=>A.includes(z.id)?{...z,matched:!0}:z)),f([]),E(!1),D.filter(L=>!L.matched&&!A.includes(L.id)).length===0&&setTimeout(()=>{s(L=>L+1),M(t+1)},500)},500)):setTimeout(()=>{Z.play("error"),h(L=>L.map(z=>A.includes(z.id)?{...z,flipped:!1}:z)),f([]),E(!1),l(L=>{const z=L-1;return z<=0&&_("GAMEOVER"),z})},1e3)}};return b==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Tu,{size:80,className:"mx-auto mb-6 text-pink-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(5),M(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):b==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Tu,{size:64,className:"mx-auto mb-6 text-pink-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(5),M(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{Z.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(pt,{size:24})}),o.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((X,J)=>o.jsx(Gf,{size:24,className:J<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},J))}),b==="PREVIEW"&&o.jsx("button",{onClick:G,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),o.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${R}, minmax(0, 1fr))`},children:u.map(X=>o.jsx("div",{onClick:()=>q(X.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${X.flipped||X.matched?`${X.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:X.flipped||X.matched?X.icon:""},X.id))})]})},MB=({username:n,history:e})=>{const[t,s]=B.useState({}),[a,l]=B.useState(!0),[u,h]=B.useState(!0),p=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];B.useEffect(()=>{(async()=>{if(!u)return;l(!0);const _={};await Promise.all(p.map(async T=>{try{const E=await UV(T);_[T]=E}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),l(!1)})()},[u]);const f=b=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===b);return b==="REACTION"||b==="AIM"?_.sort((T,E)=>T.score-E.score):_.sort((T,E)=>E.score-T.score),_.slice(0,5).map(T=>{const E=T.details;return{name:n,score:T.score,unit:(E==null?void 0:E.unit)||""}})};return o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(ws,{className:"text-amber-500"})," Leaderboard"]}),o.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[o.jsxs("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[o.jsx(l9,{size:14,className:"inline mr-1"})," Global"]}),o.jsxs("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[o.jsx($l,{size:14,className:"inline mr-1"})," Personal"]})]})]}),a&&u?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[o.jsx(Un,{size:40,className:"animate-spin mb-4 text-indigo-500"}),o.jsx("p",{children:"Memuat Data Global Rank..."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(b=>{let _=[];u?_=t[b]||[]:_=f(b);const T=Zp(b);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[o.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:wA(b)}),o.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:NA(b)})]}),o.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((E,R)=>o.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${R===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`font-bold w-4 text-center ${R===0?"text-amber-500":R===1?"text-slate-400":R===2?"text-orange-700":"text-slate-500"}`,children:R+1}),o.jsxs("span",{className:`font-medium truncate max-w-[120px] ${E.username===n||E.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[E.name||E.username," ",E.username===n||E.name===n?"(You)":""]})]}),o.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[E.score,o.jsx("span",{className:"text-xs text-slate-400 ml-1",children:E.unit})]})]},R)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},b)})})]})},DB=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?o.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:o.jsx(Lu,{size:32,className:"text-slate-400"})}),o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Qn,{className:"text-indigo-500"})," Recent Activity"]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const a=s.game,l=t.score,u=s.unit||"",h=gx(a,l);return o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${Zp(a)}`,children:wA(a)}),o.jsx("span",{className:`font-bold text-base ${Zp(a).split(" ")[0]}`,children:NA(a)})]})}),o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),o.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),o.jsx("td",{className:"p-5 text-right",children:o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[l,u]}),o.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${h>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",h,"%"]})]})})]},t.id)})})]})})})]})},PB=({onBack:n,username:e,history:t,onComplete:s,isGuest:a,initialMode:l,initialTab:u})=>{const[h,p]=B.useState("MENU"),[f,b]=B.useState(u||"DASHBOARD");B.useEffect(()=>{l&&p(l)},[l]),B.useEffect(()=>{u&&b(u)},[u]);const[_,T]=B.useState(!1),[E,R]=B.useState("REACTION"),k=async(M,G)=>{let q="pts";(G==="REACTION"||G==="AIM")&&(q="ms"),(G==="SEQUENCE"||G==="NUMBER"||G==="CHIMP"||G==="VISUAL"||G==="BRIDGE"||G==="MATCH")&&(q="lvl"),G==="TYPING"&&(q="wpm"),a||LV(G,M,e,q).catch(J=>console.error("Cloud save failed",J));const X={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:M,maxScore:0,details:{game:G,unit:q},questions:[],answers:[]};s(X),p("MENU")},C=M=>{const G=t.filter(J=>J.category!=="BENCHMARK"||!J.details?!1:J.details.game===M).map(J=>{const D=J.details;return{id:J.id,game:D.game,score:J.score,unit:D.unit,date:J.date}});if(G.length===0)return{best:null,percentile:0};let q;M==="REACTION"||M==="AIM"?q=Math.min(...G.map(J=>J.score)):q=Math.max(...G.map(J=>J.score));const X=gx(M,q);return{best:q,percentile:X}};if(h!=="MENU")switch(h){case"REACTION":return o.jsx(TB,{onFinish:M=>k(M,"REACTION"),onExit:()=>p("MENU")});case"SEQUENCE":return o.jsx(SB,{onFinish:M=>k(M,"SEQUENCE"),onExit:()=>p("MENU")});case"AIM":return o.jsx(EB,{onFinish:M=>k(M,"AIM"),onExit:()=>p("MENU")});case"CHIMP":return o.jsx(wB,{onFinish:M=>k(M,"CHIMP"),onExit:()=>p("MENU")});case"VISUAL":return o.jsx(NB,{onFinish:M=>k(M,"VISUAL"),onExit:()=>p("MENU")});case"NUMBER":return o.jsx(AB,{onFinish:M=>k(M,"NUMBER"),onExit:()=>p("MENU")});case"VERBAL":return o.jsx(kB,{onFinish:M=>k(M,"VERBAL"),onExit:()=>p("MENU")});case"TYPING":return o.jsx(CB,{onFinish:M=>k(M,"TYPING"),onExit:()=>p("MENU")});case"BRIDGE":return o.jsx(IB,{onFinish:M=>k(M,"BRIDGE"),onExit:()=>p("MENU")});case"MATCH":return o.jsx(RB,{onFinish:M=>k(M,"MATCH"),onExit:()=>p("MENU")});default:return p("MENU"),null}const U=({game:M,title:G,desc:q,icon:X,colorClass:J,btnColorClass:D})=>{const{best:A,percentile:I}=C(M);let P="pts";return(M==="REACTION"||M==="AIM")&&(P="ms"),M==="TYPING"&&(P="wpm"),(M==="SEQUENCE"||M==="NUMBER"||M==="CHIMP"||M==="VISUAL"||M==="BRIDGE"||M==="MATCH")&&(P="lvl"),o.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[o.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${J}`}),o.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[o.jsx("div",{className:`p-4 rounded-2xl ${J} bg-opacity-10 text-opacity-100 shrink-0`,children:o.jsx("div",{className:`${J.replace("bg-","text-")}`,children:X})}),o.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:G}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:q}),o.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${J}`,style:{width:`${I}%`}})}),o.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[o.jsxs("span",{children:["Best: ",A!==null?`${A} ${P}`:"-"]}),o.jsx("span",{children:I>0?`Top ${I}%`:"-"})]})]}),o.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[o.jsxs("button",{onClick:L=>{L.stopPropagation(),Z.play("click"),p(M)},className:`flex-1 sm:flex-none px-6 py-2.5 ${D} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[o.jsx(Uo,{size:16,fill:"currentColor"})," MAIN"]}),o.jsxs("button",{onClick:L=>{L.stopPropagation(),Z.play("click"),R(M),T(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[o.jsx(So,{size:14})," Stats"]})]})]})]})};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:o.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[o.jsx(_B,{isOpen:_,onClose:()=>T(!1),game:E,bestScore:C(E).best}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:o.jsxs("button",{onClick:()=>{Z.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[o.jsx(pt,{size:20,className:"mr-2"})," Menu Utama"]})}),o.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[o.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[o.jsx(Qn,{className:"text-rose-500",size:40})," Human Benchmark"]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",o.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),a&&o.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),o.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[o.jsx("button",{onClick:()=>b("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${f==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),o.jsx("button",{onClick:()=>b("RANKING"),className:`pb-3 px-4 font-bold transition-all ${f==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),f==="DASHBOARD"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[o.jsx(U,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:o.jsx(Bs,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),o.jsx(U,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:o.jsx(Da,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),o.jsx(U,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:o.jsx(Pr,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),o.jsx(U,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:o.jsx(Ts,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),o.jsx(U,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:o.jsx(Da,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),o.jsx(U,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:o.jsx(tf,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),o.jsx(U,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:o.jsx(Kl,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),o.jsx(U,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:o.jsx(oi,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),o.jsx(U,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:o.jsx(nf,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),o.jsx(U,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:o.jsx(Tu,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),o.jsx(DB,{history:t})]}):o.jsx(MB,{username:e,history:t})]})})},dh=[{id:"utbk",label:"UTBK SNBT",type:"UTBK",sub:"General",mode:"SINGLE",color:"bg-rose-500",description:"Ranking berdasarkan skor IRT rata-rata."},{id:"skd_combined",label:"SKD CPNS & Kedinasan",type:"SKD",mode:"SPLIT_SKD",color:"bg-amber-500",description:"Ranking jalur CPNS Umum dan Sekolah Kedinasan."},{id:"tpa_combined",label:"Seleksi Lanjutan I",type:"TPA",mode:"SPLIT_TPA",color:"bg-blue-600",description:"Ranking TPA/TBI dan Psikotes Kedinasan."},{id:"psikotest",label:"Tes Koran & IQ",type:"PSIKOTEST",sub:"General",mode:"SINGLE",color:"bg-purple-500",description:"Ranking berdasarkan estimasi IQ & Tes Pauli."},{id:"kecermatan_combined",label:"Tes Kecermatan",type:"KECERMATAN",mode:"SPLIT_KECERMATAN",color:"bg-emerald-600",description:"Ranking ketelitian di berbagai mode tes."},{id:"benchmark",label:"Human Benchmark",type:"BENCHMARK",mode:"BENCHMARK",color:"bg-slate-800",description:"Ranking game kognitif khusus."}],jB=({rank:n})=>n===1?o.jsx(G8,{size:24,className:"text-amber-400 fill-amber-400"}):n===2?o.jsx(EE,{size:24,className:"text-slate-400 fill-slate-400"}):n===3?o.jsx(EE,{size:24,className:"text-orange-400 fill-orange-400"}):o.jsx("span",{className:"font-black text-slate-400 text-lg w-6 text-center",children:n}),Ti=({title:n,data:e,currentUserId:t,colorClass:s,compact:a})=>e.length===0?o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center h-full min-h-[200px]",children:[o.jsx("div",{className:`p-3 rounded-full ${s.replace("bg-","bg-opacity-10 text-")} mb-3`,children:o.jsx(ws,{size:24})}),o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:n}),o.jsx("p",{className:"text-xs text-slate-500",children:"Belum ada data ranking."})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[o.jsx("div",{className:`p-4 border-b border-slate-100 dark:border-slate-700 ${s} bg-opacity-10`,children:o.jsxs("h3",{className:`font-bold ${s.replace("bg-","text-")} flex items-center gap-2`,children:[o.jsx(ws,{size:18})," ",n]})}),o.jsx("div",{className:"flex-1 overflow-y-auto max-h-[500px] p-2 scrollbar-hide",children:o.jsx("div",{className:"space-y-2",children:e.map((l,u)=>{const h=u+1,p=t===l.uid;return o.jsxs("div",{className:`flex items-center p-3 rounded-xl border transition-all ${p?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 shadow-sm":"bg-white dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[o.jsx("div",{className:"w-8 shrink-0 flex justify-center mr-2",children:o.jsx(jB,{rank:h})}),o.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-500 dark:text-slate-400 mr-3 text-xs shrink-0",children:l.username[0].toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[o.jsxs("div",{className:`font-bold text-sm truncate ${p?"text-indigo-700 dark:text-indigo-300":"text-slate-800 dark:text-white"}`,children:[l.username," ",p&&"(You)"]}),!a&&l.packageName&&o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-0.5",children:[o.jsx(gA,{size:10})," ",l.packageName]})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`font-black ${a?"text-sm":"text-lg"} ${h<=3?"text-slate-800 dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:l.score})})]},u)})})})]}),LB=({onBack:n,userProfile:e,onOpenHumanBenchmark:t})=>{const[s,a]=B.useState("utbk"),[l,u]=B.useState([]),[h,p]=B.useState({}),[f,b]=B.useState(!1),[_,T]=B.useState(!1),E=dh.find(U=>U.id===s)||dh[0];B.useEffect(()=>{(async()=>{if(E.mode!=="BENCHMARK"){b(!0),u([]),p({});try{if(E.mode==="SINGLE"){const M=await Tl(E.type,E.sub||"General");u(M)}else if(E.mode==="SPLIT_SKD"){const[M,G]=await Promise.all([Tl("SKD","CPNS"),Tl("SKD","KEDINASAN")]);p({CPNS:M,KEDINASAN:G})}else if(E.mode==="SPLIT_TPA"){const[M,G]=await Promise.all([Tl("TPA","TPA_TBI"),Tl("TPA","PSIKOTEST_KEDINASAN")]);p({TPA_TBI:M,PSIKOTEST_KEDINASAN:G})}else if(E.mode==="SPLIT_KECERMATAN"){const M=["ANGKA","HURUF","SIMBOL_HILANG","SAMA_BEDA","MATCHING","GROUPING"],G=M.map(J=>Tl("KECERMATAN",J)),q=await Promise.all(G),X={};M.forEach((J,D)=>{X[J]=q[D]}),p(X)}}catch(M){console.error("Error fetching leaderboard",M)}finally{b(!1)}}})()},[s]);const R=U=>{Z.play("click"),a(U),T(!1)},C=(()=>{if(!(e!=null&&e.uid)||E.mode!=="SINGLE")return null;const U=l.findIndex(M=>M.uid===e.uid);return U!==-1?{rank:U+1,data:l[U]}:null})();return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row transition-colors h-screen overflow-hidden",children:[o.jsxs("div",{className:"hidden md:flex w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex-col shrink-0 z-20",children:[o.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition text-slate-500 dark:text-slate-400",children:o.jsx(pt,{size:20})}),o.jsxs("h2",{className:"font-black text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(ws,{className:"text-amber-500",size:20})," Global Rank"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:dh.map(U=>o.jsxs("button",{onClick:()=>R(U.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all text-left ${s===U.id?`${U.color} text-white shadow-md`:"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${s===U.id?"bg-white":U.color}`}),U.label]},U.id))})]}),o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 z-30 sticky top-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 font-bold text-sm",children:[o.jsx(pt,{size:18,className:"mr-1"})," Menu"]}),o.jsxs("div",{className:"text-sm font-black text-slate-800 dark:text-white flex items-center gap-1",children:[o.jsx(ws,{size:16,className:"text-amber-500"})," Global Leaderboard"]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>T(!_),className:"w-full flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700 rounded-xl font-bold text-slate-700 dark:text-white",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${E.color}`}),E.label]}),o.jsx(A8,{size:18,className:`transition-transform ${_?"rotate-180":""}`})]}),_&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-down max-h-[60vh] overflow-y-auto",children:dh.map(U=>o.jsxs("button",{onClick:()=>R(U.id),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-bold transition-all text-left border-b border-slate-50 dark:border-slate-700 last:border-0 ${s===U.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${U.color}`}),U.label]},U.id))})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col h-full relative overflow-hidden bg-slate-50 dark:bg-slate-900",onClick:()=>T(!1),children:[o.jsxs("div",{className:"p-6 pb-4 hidden md:block",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.label}),o.jsx("p",{className:"text-slate-500 text-sm",children:E.description})]}),f&&o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx(Un,{className:"animate-spin text-indigo-600 mb-4",size:40}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Memuat data ranking..."})]}),!f&&o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-24 scrollbar-hide",children:[E.mode==="BENCHMARK"&&o.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 max-w-md w-full",children:[o.jsx(Qn,{size:64,className:"mx-auto mb-6 text-indigo-500 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Human Benchmark"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Peringkat untuk game kognitif (Reaction Time, Memory, dll) tersedia di dashboard khusus."}),o.jsxs("button",{onClick:()=>{Z.play("click"),t()},className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(K8,{size:20})," Buka Dashboard"]})]})}),E.mode==="SINGLE"&&o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx(Ti,{title:`Ranking ${E.label}`,data:l,currentUserId:e==null?void 0:e.uid,colorClass:E.color})}),E.mode==="SPLIT_SKD"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(Ti,{title:"SKD CPNS Umum",data:h.CPNS||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-amber-500"}),o.jsx(Ti,{title:"SKD Kedinasan",data:h.KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-orange-500"})]}),E.mode==="SPLIT_TPA"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(Ti,{title:"TPA & TBI (Standar)",data:h.TPA_TBI||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-600"}),o.jsx(Ti,{title:"Psikotes Kedinasan",data:h.PSIKOTEST_KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-purple-600"})]}),E.mode==="SPLIT_KECERMATAN"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:[o.jsx(Ti,{title:"Angka Hilang",data:h.ANGKA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-emerald-500",compact:!0}),o.jsx(Ti,{title:"Huruf Hilang",data:h.HURUF||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-teal-500",compact:!0}),o.jsx(Ti,{title:"Simbol Hilang",data:h.SIMBOL_HILANG||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-cyan-500",compact:!0}),o.jsx(Ti,{title:"Sama Beda Simbol",data:h.SAMA_BEDA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-500",compact:!0}),o.jsx(Ti,{title:"Matching",data:h.MATCHING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-indigo-500",compact:!0}),o.jsx(Ti,{title:"Grouping",data:h.GROUPING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-violet-500",compact:!0})]})]}),C&&E.mode==="SINGLE"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 shadow-[0_-5px_20px_rgba(0,0,0,0.05)] z-30 animate-slide-up",children:o.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Rank"}),o.jsxs("div",{className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black px-3 py-1 rounded-lg",children:["#",C.rank]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Score"}),o.jsx("div",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:C.data.score})]})]})})]})]})},AA={Footprints:t9,Flame:hA,Zap:Bs,Crosshair:V8,Activity:Qn,Eye:Io,Moon:hx,Layers:dx,Trophy:ws},UB=({profile:n,onOpenAchievements:e})=>{const t=Zh(n.level),s=Zh(n.level-1),a=(n.xp-s)/(t-s)*100,l=sA(n.level);return o.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-slate-800 p-2 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm animate-fade-in-down w-full md:w-auto overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg border border-orange-100 dark:border-orange-800",children:[o.jsx(hA,{size:16,className:"fill-orange-500 animate-pulse"}),o.jsx("span",{className:"font-black text-sm",children:n.streak})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-[100px]",children:[o.jsxs("div",{className:"flex justify-between items-end mb-1",children:[o.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:["Lvl ",n.level,": ",l]}),o.jsxs("span",{className:"text-[9px] text-slate-400 font-mono",children:[n.xp," / ",t," XP"]})]}),o.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out",style:{width:`${Math.min(100,Math.max(0,a))}%`}})})]}),o.jsx("button",{onClick:e,className:"p-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 rounded-lg hover:bg-yellow-100 dark:hover:bg-yellow-900/40 transition border border-yellow-100 dark:border-yellow-800",children:o.jsx(ws,{size:18})})]})},OB=({isOpen:n,onClose:e,profile:t})=>n?o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(ws,{className:"text-yellow-500 fill-yellow-500"})," Pencapaian"]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Terkumpul: ",t.unlockedAchievements.length," / ",op.length]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:o.jsx(px,{size:24})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:op.map(s=>{const a=t.unlockedAchievements.includes(s.id),l=AA[s.icon]||ws;return o.jsxs("div",{className:`p-4 rounded-2xl border-2 flex items-center gap-4 transition-all ${a?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800":"bg-slate-50 dark:bg-slate-800 border-slate-100 dark:border-slate-700 opacity-60 grayscale"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${a?"bg-white dark:bg-slate-800 text-indigo-600 shadow-md":"bg-slate-200 dark:bg-slate-700 text-slate-400"}`,children:a?o.jsx(l,{size:24}):o.jsx(mA,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold ${a?"text-slate-900 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:s.title}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight mb-1",children:s.description}),o.jsxs("span",{className:"text-[10px] font-bold bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-600 dark:text-slate-300",children:["+",s.xpReward," XP"]})]})]},s.id)})})]})}):null,VB=({newLevel:n,onClose:e})=>o.jsx("div",{className:"fixed inset-0 z-[90] bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"text-center relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-[100px] rounded-full pointer-events-none"}),o.jsx(g7,{size:120,className:"text-yellow-400 fill-yellow-400 mx-auto mb-6 animate-bounce-slow drop-shadow-[0_0_30px_rgba(250,204,21,0.6)]"}),o.jsx("h2",{className:"text-5xl font-black text-white mb-2 tracking-tight animate-scale-up",children:"LEVEL UP!"}),o.jsxs("div",{className:"text-2xl font-bold text-indigo-300 mb-8",children:["Level ",n,": ",sA(n)]}),o.jsx("button",{onClick:e,className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 transition shadow-xl",children:"Lanjut Belajar"})]})}),BB=({achievement:n,onClose:e})=>{const t=AA[n.icon]||ws;return GE.useEffect(()=>{const s=setTimeout(e,4e3);return()=>clearTimeout(s)},[]),o.jsxs("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-[100] bg-slate-900 text-white p-4 rounded-2xl shadow-2xl border border-yellow-500/30 flex items-center gap-4 animate-slide-up w-max max-w-[90vw]",children:[o.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center shrink-0 text-slate-900 animate-pulse",children:o.jsx(t,{size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-bold text-yellow-400 uppercase tracking-wider mb-0.5",children:"Achievement Unlocked!"}),o.jsx("div",{className:"font-bold text-lg",children:n.title}),o.jsxs("div",{className:"text-xs text-slate-400",children:["+",n.xpReward," XP"]})]})]})},UE={kedokteran:750,informatika:720,"ilmu komputer":710,hukum:680,manajemen:690,psikologi:670,akuntansi:685,"teknik sipil":660,"teknik mesin":665,"teknik elektro":675,komunikasi:695,farmasi:650},GB=({history:n,category:e,onBack:t,onStartSmartReview:s})=>{const[a,l]=B.useState(""),[u,h]=B.useState(""),[p,f]=B.useState(0),[b,_]=B.useState(0),[T,E]=B.useState([]);B.useEffect(()=>{const C=n.filter(M=>M.category===e);if(C.length>0){const M=C.reduce((G,q)=>G+q.score,0);_(Math.round(M/C.length))}const U={};n.forEach(M=>{M.category===e&&M.answers.forEach(G=>{if(!G.isCorrect){const q=M.questions.find(X=>X.id===G.questionId);q&&(U[q.id]=q)}})}),E(Object.values(U))},[n,e]);const R=C=>{const U=C.target.value;h(U);const M=U.toLowerCase();let G=600;Object.keys(UE).forEach(X=>{M.includes(X)&&(G=UE[X])});const q=a.toLowerCase();(q.includes("ui")||q.includes("itb")||q.includes("ugm"))&&(G+=50),f(G)},k=p>0?Math.min(100,Math.round(b/p*100)):0;return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(pt,{size:20})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(rc,{className:"text-indigo-600 dark:text-indigo-400"}),"Analisis Akademik ",e]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Target skor & perbaikan kelemahan."})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Pr,{className:"text-rose-500"})," Target Score Calculator"]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Universitas Impian"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Universitas Indonesia",value:a,onChange:C=>l(C.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Jurusan / Prodi"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Pendidikan Dokter",value:u,onChange:R})]})]}),u&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-5 rounded-2xl animate-fade-in-up border border-indigo-100 dark:border-indigo-800",children:[o.jsxs("div",{className:"flex justify-between items-end mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-bold uppercase",children:"Estimasi Target"}),o.jsx("div",{className:"text-3xl font-black text-indigo-700 dark:text-indigo-300",children:p})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold uppercase",children:"Skor Saat Ini"}),o.jsx("div",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:b})]})]}),o.jsx("div",{className:"w-full h-3 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-2",children:o.jsx("div",{className:`h-full transition-all duration-1000 ${k>=100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${k}%`}})}),o.jsx("div",{className:"text-xs text-center font-medium text-slate-600 dark:text-slate-400",children:k>=100?"Hebat! Skor rata-ratamu sudah melampaui target.":`Kamu butuh +${p-b} poin lagi untuk aman.`})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Jp,{className:"text-emerald-500"})," Smart Review"]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center mb-6",children:[o.jsxs("div",{className:"w-24 h-24 bg-rose-50 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 relative",children:[o.jsx(I8,{size:48,className:"text-rose-500"}),o.jsx("div",{className:"absolute top-0 right-0 bg-rose-600 text-white text-xs font-bold px-2 py-1 rounded-full border-2 border-white dark:border-slate-800",children:T.length})]}),o.jsx("h4",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Bank Kesalahan"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 max-w-xs",children:["Sistem mengumpulkan ",T.length," soal yang pernah kamu jawab salah. Kerjakan ulang untuk memastikan pemahaman."]})]}),o.jsxs("button",{onClick:()=>s(T),disabled:T.length===0,className:"w-full py-4 bg-slate-900 dark:bg-indigo-600 text-white rounded-xl font-bold hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(Uo,{size:20,fill:"currentColor"}),"Kerjakan ",T.length," Soal Salah"]})]})]}),o.jsxs("div",{className:"mt-6 bg-gradient-to-r from-red-500 to-red-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-10 -mt-10 blur-2xl"}),o.jsxs("div",{className:"relative z-10 flex items-center gap-6",children:[o.jsx("div",{className:"p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:o.jsx(_A,{size:40})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold mb-1",children:"Video Pembahasan Terintegrasi"}),o.jsx("p",{className:"text-red-100 text-sm max-w-lg",children:"Bingung dengan penjelasan teks? Sekarang setiap soal dilengkapi tombol pencarian otomatis ke YouTube untuk menemukan video pembahasan konsep terkait dari tutor terbaik."}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ds,{size:12})," Auto-Search Topic"]}),o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ds,{size:12})," Curated Keywords"]})]})]})]})]})]})})},zB=({userProfile:n,history:e,onBack:t,onUpdateProfile:s})=>{var We,At,jt,tt,mt;const[a,l]=B.useState("PROFILE"),[u,h]=B.useState([]),[p,f]=B.useState([]),[b,_]=B.useState([]),[T,E]=B.useState(""),[R,k]=B.useState(!1),[C,U]=B.useState(null),[M,G]=B.useState(null),[q,X]=B.useState(!1),[J,D]=B.useState(n.username),[A,I]=B.useState(null),[P,L]=B.useState(!1),z=B.useRef(null);B.useEffect(()=>{(a==="FRIENDS"||a==="REQUESTS")&&V()},[a]);const V=async()=>{if(n.uid){k(!0);try{const de=await KV(n.uid);h(de);const Be=await zV(n.uid);f(Be)}catch(de){console.error(de)}finally{k(!1)}}},Ee=de=>{var Xe;const Be=(Xe=de.target.files)==null?void 0:Xe[0];if(Be){if(Be.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const Qe=new FileReader;Qe.onload=Vt=>{var Ze;const ht=new Image;ht.onload=()=>{const Lt=document.createElement("canvas"),ci=Lt.getContext("2d");if(!ci)return;const Pn=200;let ve=ht.width,Se=ht.height;ve>Se?ve>Pn&&(Se*=Pn/ve,ve=Pn):Se>Pn&&(ve*=Pn/Se,Se=Pn),Lt.width=ve,Lt.height=Se,ci.drawImage(ht,0,0,ve,Se),I(Lt.toDataURL("image/jpeg",.8))},ht.src=(Ze=Vt.target)==null?void 0:Ze.result},Qe.readAsDataURL(Be)}},De=async()=>{L(!0);try{const de={};J!==n.username&&(de.username=J),A&&(de.photoURL=A),Object.keys(de).length>0&&await s(de),X(!1),I(null)}catch{alert("Gagal menyimpan profil.")}finally{L(!1)}},Y=async()=>{if(!(T.length<3)){k(!0);try{const de=await BV(T),Be=new Set(u.map(Xe=>Xe.uid));_(de.filter(Xe=>Xe.uid!==n.uid&&!Be.has(Xe.uid)))}catch(de){console.error(de)}finally{k(!1)}}},le=async de=>{var Be;try{await GV({uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Be=n.gamification)==null?void 0:Be.level)||1},de.uid),alert("Permintaan pertemanan dikirim!"),_(Xe=>Xe.filter(Qe=>Qe.uid!==de.uid))}catch{alert("Gagal mengirim request.")}},_e=async de=>{var Be;try{await FV(n.uid,{uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Be=n.gamification)==null?void 0:Be.level)||1},de),V()}catch{alert("Error accepting")}},Oe=async de=>{try{await HV(n.uid,de.fromUid),f(Be=>Be.filter(Xe=>Xe.id!==de.id))}catch{alert("Error rejecting")}},te=async de=>{if(window.confirm("Hapus teman ini?"))try{await qV(n.uid,de),h(Be=>Be.filter(Xe=>Xe.uid!==de))}catch{alert("Gagal menghapus teman.")}},F=de=>de&&Date.now()-new Date(de).getTime()<900*1e3?"online":"offline",Q=async de=>{k(!0);try{const Be=await oA(de.uid),Xe={utbk:Math.max(0,...Be.filter(Qe=>Qe.category==="UTBK").map(Qe=>Qe.score)),skd:Math.max(0,...Be.filter(Qe=>Qe.category==="SKD").map(Qe=>Qe.score)),tpa:Math.max(0,...Be.filter(Qe=>Qe.category==="TPA").map(Qe=>Qe.score)),psikotest:Math.max(0,...Be.filter(Qe=>Qe.category==="PSIKOTEST").map(Qe=>Qe.score)),kecermatan:Math.max(0,...Be.filter(Qe=>Qe.category==="KECERMATAN").map(Qe=>Qe.score)),benchmark:Math.max(0,...Be.filter(Qe=>Qe.category==="BENCHMARK").map(Qe=>Qe.score))};G(Xe),U(de)}catch{alert("Gagal mengambil data teman.")}finally{k(!1)}},fe=de=>{const Be=e.filter(Xe=>Xe.category===de);return Be.length===0?0:Math.max(...Be.map(Xe=>Xe.score))},ie=((We=n.gamification)==null?void 0:We.xp)||0,re=((At=n.gamification)==null?void 0:At.level)||1,ue=Zh(re),Ae=Zh(re-1),Fe=Math.min(100,Math.max(0,(ie-Ae)/(ue-Ae)*100));return C&&M?o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col p-6 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center mb-8",children:[o.jsx("button",{onClick:()=>U(null),className:"p-2 bg-white/10 rounded-full text-white mr-4",children:o.jsx(pt,{})}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Duel Stats"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 text-center text-white",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-indigo-500 mb-2 overflow-hidden border-4 border-indigo-400 shadow-lg shadow-indigo-500/30",children:n.photoURL?o.jsx("img",{src:n.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-3xl font-bold",children:n.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full text-lg",children:n.username})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:o.jsx(SE,{size:24,className:"text-white"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-rose-500 mb-2 overflow-hidden border-4 border-rose-400 shadow-lg shadow-rose-500/30",children:C.photoURL?o.jsx("img",{src:C.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-3xl font-bold",children:C.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full text-lg",children:C.username})]})]}),o.jsx("div",{className:"space-y-4 max-w-2xl mx-auto w-full",children:[{label:"UTBK SNBT",key:"utbk",myScore:fe("UTBK"),friendScore:M.utbk},{label:"SKD CPNS",key:"skd",myScore:fe("SKD"),friendScore:M.skd},{label:"TPA & TBI",key:"tpa",myScore:fe("TPA"),friendScore:M.tpa},{label:"Psikotes",key:"psikotest",myScore:fe("PSIKOTEST"),friendScore:M.psikotest},{label:"Kecermatan",key:"kecermatan",myScore:fe("KECERMATAN"),friendScore:M.kecermatan},{label:"Benchmark",key:"benchmark",myScore:fe("BENCHMARK"),friendScore:M.benchmark}].map(de=>o.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700 backdrop-blur-sm",children:[o.jsx("div",{className:"text-center text-slate-400 text-xs font-bold uppercase mb-3 tracking-widest",children:de.label}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-black",children:[o.jsx("span",{className:de.myScore>de.friendScore?"text-indigo-400":"text-slate-500",children:de.myScore}),o.jsx("div",{className:"h-2 flex-1 mx-4 bg-slate-700 rounded-full overflow-hidden relative",children:o.jsx("div",{className:`h-full absolute left-0 top-0 bottom-0 transition-all duration-1000 ${de.myScore>de.friendScore?"bg-indigo-500":"bg-rose-500"}`,style:{width:`${de.myScore/(de.myScore+de.friendScore||1)*100}%`}})}),o.jsx("span",{className:de.friendScore>de.myScore?"text-rose-400":"text-slate-500",children:de.friendScore})]})]},de.key))})]}):o.jsxs("div",{className:"min-h-screen bg-[#f0f4f8] dark:bg-[#0f172a] relative overflow-hidden transition-colors font-sans",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-96 bg-gradient-to-br from-indigo-200 via-purple-200 to-pink-200 dark:from-indigo-900/40 dark:via-purple-900/40 dark:to-pink-900/40 blur-3xl opacity-50 pointer-events-none"}),o.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto p-4 md:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 font-bold bg-white/50 dark:bg-slate-800/50 backdrop-blur-md px-4 py-2 rounded-full shadow-sm border border-white/20",children:[o.jsx(pt,{size:18})," Back"]}),o.jsxs("div",{className:"flex items-center gap-1 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md p-1 rounded-full shadow-sm border border-white/20",children:[o.jsx("button",{onClick:()=>l("PROFILE"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="PROFILE"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Profile"}),o.jsx("button",{onClick:()=>l("FRIENDS"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="FRIENDS"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"My Friends"}),o.jsxs("button",{onClick:()=>l("REQUESTS"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="REQUESTS"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:["Requests ",p.length>0&&o.jsx("span",{className:"ml-1 text-rose-500",children:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"p-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-full shadow-sm text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition border border-white/20",children:o.jsx(Yp,{size:20})}),o.jsx("button",{className:"p-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-full shadow-sm text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition border border-white/20",children:o.jsx(R9,{size:20})})]})]}),a==="PROFILE"&&o.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[o.jsxs("div",{className:"relative w-full rounded-[2rem] overflow-hidden shadow-2xl border border-white/40 dark:border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-white/60 dark:bg-slate-800/60 backdrop-blur-xl"}),o.jsxs("div",{className:"relative p-8 md:p-10 flex flex-col md:flex-row items-center gap-8",children:[o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var de;return q&&((de=z.current)==null?void 0:de.click())},children:[o.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full p-1 bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 shadow-lg",children:o.jsxs("div",{className:"w-full h-full rounded-full overflow-hidden bg-white dark:bg-slate-900 relative",children:[A||n.photoURL?o.jsx("img",{src:A||n.photoURL,className:"w-full h-full object-cover",alt:"Avatar"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl font-bold text-slate-300",children:(jt=n.username)==null?void 0:jt[0]}),q&&o.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center text-white",children:o.jsx(E8,{})})]})}),o.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white px-4 py-1.5 rounded-full font-bold text-sm shadow-md border-2 border-white dark:border-slate-800",children:["Lvl ",re]}),o.jsx("input",{type:"file",ref:z,className:"hidden",accept:"image/*",onChange:Ee})]}),o.jsxs("div",{className:"flex-1 text-center md:text-left w-full",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-2",children:[q?o.jsx("input",{value:J,onChange:de=>D(de.target.value),className:"text-3xl font-black bg-white/50 dark:bg-slate-900/50 p-2 rounded-xl border border-slate-300 dark:border-slate-600 outline-none w-full md:w-auto",autoFocus:!0}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-black text-slate-800 dark:text-white tracking-tight",children:n.username}),o.jsx("button",{onClick:()=>X(!0),className:"p-1.5 text-slate-400 hover:text-indigo-600 transition",children:o.jsx($9,{size:16})})]}),q&&o.jsxs("div",{className:"flex gap-2 mt-4 md:mt-0",children:[o.jsxs("button",{onClick:De,disabled:P,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-indigo-700",children:[P&&o.jsx(Un,{className:"animate-spin",size:14})," Save"]}),o.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-bold text-sm hover:bg-slate-300",children:"Cancel"})]})]}),o.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-slate-500 dark:text-slate-300 font-medium mb-6",children:[o.jsx(AE,{size:16,className:"text-indigo-500"}),o.jsx("span",{children:n.isGuest?"Guest Account":"Verified Student"})]}),o.jsxs("div",{className:"w-full bg-white/50 dark:bg-slate-900/50 rounded-full h-6 p-1 backdrop-blur-sm border border-white/20 dark:border-white/5 relative",children:[o.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-500 relative overflow-hidden shadow-[0_0_15px_rgba(99,102,241,0.5)] transition-all duration-1000",style:{width:`${Fe}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"})}),o.jsxs("div",{className:"absolute top-0 right-0 -mt-8 text-xs font-bold text-indigo-600 dark:text-indigo-300 bg-white/80 dark:bg-slate-800/80 px-2 py-1 rounded-lg backdrop-blur-md shadow-sm",children:[ie," / ",ue," XP"]}),o.jsxs("div",{className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-[10px] font-black text-white mix-blend-overlay uppercase tracking-widest pointer-events-none",children:[Math.round(Fe),"% to Lvl ",re+1]})]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2 px-2",children:[o.jsx(So,{size:20,className:"text-indigo-500"})," Performance Stats"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"BEST UTBK",score:fe("UTBK"),icon:rc,color:"text-rose-500",bg:"bg-rose-500/10"},{label:"BEST SKD",score:fe("SKD"),icon:AE,color:"text-blue-500",bg:"bg-blue-500/10"},{label:"BEST TPA & TBI",score:fe("TPA"),icon:Bs,color:"text-purple-500",bg:"bg-purple-500/10"},{label:"BEST PSIKOTES",score:fe("PSIKOTEST"),icon:Ts,color:"text-pink-500",bg:"bg-pink-500/10"},{label:"BEST KECERMATAN",score:fe("KECERMATAN"),icon:Io,color:"text-emerald-500",bg:"bg-emerald-500/10"},{label:"BEST BENCHMARK",score:fe("BENCHMARK"),icon:Qn,color:"text-amber-500",bg:"bg-amber-500/10"},{label:"TOTAL BATTLES",score:((tt=n.gamification)==null?void 0:tt.battlesPlayed)||0,icon:$l,color:"text-sky-500",bg:"bg-sky-500/10"},{label:"BATTLE WIN RATE",score:`${(mt=n.gamification)!=null&&mt.battlesPlayed?Math.round((n.gamification.battlesWon||0)/n.gamification.battlesPlayed*100):0}%`,icon:ws,color:"text-yellow-500",bg:"bg-yellow-500/10"}].map((de,Be)=>{const Xe=de.icon;return o.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 backdrop-blur-md p-5 rounded-2xl border border-white/40 dark:border-white/5 shadow-sm hover:shadow-md transition-all hover:-translate-y-1",children:[o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsx("div",{className:`p-2 rounded-xl ${de.bg} ${de.color}`,children:o.jsx(Xe,{size:20})})}),o.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:de.label}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:de.score})]},Be)})})]})]}),a==="FRIENDS"&&o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 backdrop-blur-md p-6 rounded-3xl border border-white/40 dark:border-white/5 shadow-sm mb-8",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center gap-2",children:[o.jsx(hu,{size:16})," Find Friends"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Username...",value:T,onChange:de=>E(de.target.value),onKeyDown:de=>de.key==="Enter"&&Y(),className:"flex-1 p-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"}),o.jsx("button",{onClick:Y,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Search"})]}),b.length>0&&o.jsx("div",{className:"mt-4 space-y-2",children:b.map(de=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:de.username}),o.jsxs("button",{onClick:()=>le(de),className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-bold flex items-center gap-1 hover:bg-emerald-200 transition",children:[o.jsx(C7,{size:14})," Add"]})]},de.uid))})]}),o.jsx("div",{className:"space-y-3",children:u.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-400 bg-white/40 dark:bg-slate-800/40 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700",children:[o.jsx($l,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"You haven't added any friends yet."})]}):u.map(de=>{const Be=F(de.lastActive);return o.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-md p-4 rounded-2xl border border-white/40 dark:border-white/5 flex justify-between items-center shadow-sm hover:shadow-md transition",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center font-bold text-white overflow-hidden shadow-sm",children:de.photoURL?o.jsx("img",{src:de.photoURL,className:"w-full h-full object-cover"}):de.username[0]}),o.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-slate-800 ${Be==="online"?"bg-emerald-500":"bg-slate-400"}`})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:de.username}),o.jsxs("div",{className:"text-xs text-slate-500 font-medium flex items-center gap-2",children:[o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-600 dark:text-slate-300",children:["Lvl ",de.level]}),o.jsx("span",{className:Be==="online"?"text-emerald-500":"text-slate-400",children:Be==="online"?"Online":"Offline"})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Q(de),className:"p-2.5 text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 rounded-xl transition",title:"Compare Stats",children:o.jsx(SE,{size:18})}),o.jsxs("button",{disabled:Be!=="online",className:"px-4 py-2 bg-rose-50 text-rose-600 dark:bg-rose-900/20 dark:text-rose-400 rounded-xl font-bold text-xs flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-rose-100 transition",children:[o.jsx(Bs,{size:14})," Duel"]}),o.jsx("button",{onClick:()=>te(de.uid),className:"p-2.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition",children:o.jsx(Ro,{size:18})})]})]},de.uid)})})]}),a==="REQUESTS"&&o.jsx("div",{className:"space-y-3 animate-fade-in-up",children:p.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-400 bg-white/40 dark:bg-slate-800/40 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700",children:[o.jsx(Yp,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No new friend requests."})]}):p.map(de=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center font-bold text-indigo-600",children:de.fromPhotoURL?o.jsx("img",{src:de.fromPhotoURL,className:"w-full h-full rounded-full object-cover"}):de.fromUsername[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:de.fromUsername}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Level ",de.fromLevel]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>_e(de),className:"px-4 py-2 bg-emerald-500 text-white rounded-xl text-sm font-bold hover:bg-emerald-600 transition shadow-lg shadow-emerald-200 dark:shadow-none",children:"Accept"}),o.jsx("button",{onClick:()=>Oe(de),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-sm font-bold hover:bg-slate-200 transition",children:"Decline"})]})]},de.id))})]})]})},OE=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-white leading-relaxed"})},FB=({userProfile:n,onBack:e,category:t})=>{var I;const[s,a]=B.useState("LOBBY"),[l,u]=B.useState(""),[h,p]=B.useState(""),[f,b]=B.useState(null),[_,T]=B.useState(!1),[E,R]=B.useState(""),[k,C]=B.useState(0),[U,M]=B.useState(!1),G=B.useRef(null);B.useEffect(()=>()=>{G.current&&G.current()},[]);const q=async()=>{T(!0),M(!0);try{const P=await hn("DRILL",t,`1v1 Battle Mode - ${t}. Fast paced questions. Use 3D symbols if TPA/Spatial.`,10,[],t==="SKD"?"CPNS":void 0),L=await $V(n.uid,n.username,t,P);u(L),J(L)}catch{R("Gagal membuat room. Coba lagi.")}finally{T(!1),M(!1)}},X=async()=>{if(h){T(!0);try{await YV(h.toUpperCase(),n.uid,n.username),u(h.toUpperCase()),J(h.toUpperCase())}catch(P){R(P.message||"Gagal join room.")}finally{T(!1)}}},J=P=>{G.current&&G.current(),G.current=JV(P,L=>{b(L),L.status==="STARTING"&&s==="LOBBY"&&(a("GAME"),Z.play("success")),L.status==="FINISHED"&&(a("RESULT"),Z.play("finish"))})},D=async P=>{if(!f)return;const L=f.questions[k],z=P===L.correctAnswer,V=z?10:-2,Ee=f.scores[n.uid]||0,De=Math.max(0,Ee+V);z?Z.play("success"):Z.play("error"),await QV(f.id,n.uid,De,k+1),k<f.questions.length-1?C(Y=>Y+1):A(De)},A=async P=>{if(!f)return;const L=f.hostUid===n.uid?f.guestUid:f.hostUid;if(!L)return;const z=f.scores[L]||0;if((f.progress[L]||0)>=f.questions.length){const Ee=P>z?n.uid:z>P?L:"DRAW";await WV(f.id,Ee)}};if(s==="LOBBY")return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col p-6",children:[o.jsxs("button",{onClick:e,className:"self-start flex items-center text-slate-400 hover:text-white mb-8",children:[o.jsx(pt,{size:20,className:"mr-2"})," Quit Battle"]}),o.jsxs("div",{className:"max-w-md w-full mx-auto text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(79,70,229,0.5)] animate-pulse",children:o.jsx(bA,{size:40})}),o.jsx("h1",{className:"text-4xl font-black mb-2 uppercase italic tracking-wider",children:"Battle Arena"}),o.jsxs("p",{className:"text-slate-400 mb-8",children:[t," 1v1 Duel"]}),l?o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl border border-indigo-500/50 shadow-2xl",children:[o.jsx("h2",{className:"text-xl font-bold mb-6 text-slate-300",children:"Waiting for Opponent..."}),o.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl mb-6 border border-slate-700",children:[o.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-widest mb-2",children:"Room Code"}),o.jsxs("div",{className:"text-5xl font-mono font-black text-indigo-400 tracking-widest flex items-center justify-center gap-4",children:[l,o.jsx("button",{onClick:()=>navigator.clipboard.writeText(l),className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Tu,{size:20})})]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-4 animate-pulse",children:[o.jsx($l,{size:24,className:"text-emerald-400"}),o.jsx("span",{className:"text-lg font-bold",children:"1/2 Players"})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Create Room"}),o.jsxs("button",{onClick:q,disabled:_,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-bold transition flex items-center justify-center gap-2",children:[_?o.jsx(Un,{className:"animate-spin"}):o.jsx(Bs,{size:20}),"Host Match"]})]}),o.jsxs("div",{className:"relative flex py-2 items-center",children:[o.jsx("div",{className:"flex-grow border-t border-slate-700"}),o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-500 text-xs",children:"OR JOIN"}),o.jsx("div",{className:"flex-grow border-t border-slate-700"})]}),o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Join Room"}),o.jsx("input",{type:"text",placeholder:"Enter Room Code",value:h,onChange:P=>p(P.target.value.toUpperCase()),className:"w-full bg-slate-900 border border-slate-600 rounded-xl p-4 text-center font-mono text-xl tracking-widest mb-4 focus:border-indigo-500 outline-none"}),o.jsx("button",{onClick:X,disabled:!h||_,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-500 rounded-xl font-bold transition disabled:opacity-50",children:"Join Fight"})]}),E&&o.jsx("p",{className:"text-rose-500 font-bold animate-pulse",children:E})]})]})]});if(s==="GAME"&&f){const P=f.hostUid===n.uid,L=P?f.guestUid:f.hostUid,z=P?f.guestName:f.hostName,V=f.scores[n.uid]||0,Ee=L&&f.scores[L]||0,De=L&&f.progress[L]||0,Y=f.questions[k],le=k>=f.questions.length||f.progress[n.uid]>=f.questions.length;return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-800 p-4 shadow-md flex justify-between items-center z-10 border-b border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs text-indigo-400 font-bold",children:"YOU"}),o.jsx("span",{className:"text-2xl font-black",children:V})]}),o.jsx("div",{className:"flex flex-col items-center",children:o.jsx("div",{className:"text-xs font-bold bg-rose-600 px-3 py-1 rounded-full animate-pulse",children:"LIVE"})}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx("span",{className:"text-xs text-rose-400 font-bold truncate max-w-[100px]",children:z||"Opponent"}),o.jsx("span",{className:"text-2xl font-black",children:Ee})]})]}),o.jsxs("div",{className:"h-2 bg-slate-700 w-full flex",children:[o.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${k/f.questions.length*50}%`}}),o.jsx("div",{className:"h-full bg-rose-500 transition-all duration-500 ml-auto",style:{width:`${De/f.questions.length*50}%`}})]}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative",children:le?o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Waiting for results..."}),o.jsx(Un,{size:48,className:"animate-spin text-indigo-500 mx-auto"})]}):o.jsxs("div",{className:"w-full max-w-2xl",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 mb-6 shadow-xl",children:[o.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:["Question ",k+1,"/",f.questions.length]}),o.jsx("h3",{className:"text-xl md:text-2xl font-bold leading-relaxed",children:o.jsx(OE,{text:Y.content})})]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:(I=Y.options)==null?void 0:I.map((_e,Oe)=>o.jsx("button",{onClick:()=>D(_e),className:"p-4 rounded-xl border-2 border-slate-700 bg-slate-800 hover:bg-indigo-600 hover:border-indigo-500 hover:scale-[1.02] transition-all text-left font-medium",children:o.jsx(OE,{text:_e})},Oe))})]})})]})}if(s==="RESULT"&&f){const P=f.winner===n.uid,L=f.winner==="DRAW";return o.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6 text-white text-center",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl ${P?"bg-emerald-500 shadow-emerald-500/50":"bg-rose-500 shadow-rose-500/50"}`,children:P?o.jsx(ws,{size:64}):L?o.jsx($l,{size:64}):o.jsx(Lo,{size:64})}),o.jsx("h1",{className:"text-5xl font-black mb-2 italic uppercase",children:P?"VICTORY!":L?"DRAW":"DEFEAT"}),o.jsx("p",{className:"text-slate-400 mb-8 text-lg",children:P?"+100 XP":"+20 XP"}),o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-4 mb-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"You"}),o.jsx("div",{className:"text-3xl font-black text-indigo-400",children:f.scores[n.uid]})]}),o.jsx("div",{className:"text-xl font-black text-slate-600",children:"VS"}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"Opponent"}),o.jsx("div",{className:"text-3xl font-black text-rose-400",children:f.scores[f.hostUid===n.uid?f.guestUid:f.hostUid]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white text-slate-900 font-bold rounded-xl hover:scale-105 transition",children:"Back to Menu"})]})]})})}return null},HB=({user:n})=>{var s,a;const[e,t]=B.useState(!1);return B.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?o.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):o.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:[" ",((a=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:a.toUpperCase())||"T"," "]})},kA=({text:n})=>{if(!n)return null;let e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return e=e.replace(/([\u00BC-\u00BE\u2150-\u215E\u2190-\u21FF\u2200-\u22FF\u2300-\u23FF\u2460-\u24FF\u2500-\u257F\u25A0-\u25FF\u2600-\u26FF\u2700-\u27BF\u2B00-\u2BFF\u{1F000}-\u{1F9FF}])/gu,'<span style="font-size: 2.5em; line-height: 1; vertical-align: middle; display: inline-block; padding: 0 4px;">$1</span>'),o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},qB=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",a=e==="success"?o.jsx(ds,{size:20}):e==="error"?o.jsx(Ff,{size:20}):o.jsx(p9,{size:20});return B.useEffect(()=>{const l=setTimeout(t,3e3);return()=>clearTimeout(l)},[t]),o.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[" ",a," ",o.jsx("span",{className:"font-bold text-sm",children:n})," ",o.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:o.jsx(Lo,{size:18})})," "]})},KB=({session:n,onResume:e,onDiscard:t})=>{const s=Math.round(Object.keys(n.answerMap).length/n.questions.length*100);return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[" ",o.jsxs("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:[" ",o.jsx(Lu,{size:32})," "]})," ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Tes Belum Selesai"})," ",o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:[" Ditemukan sesi ",o.jsx("b",{children:n.packageTitle||n.category})," yang belum diselesaikan. Ingin melanjutkan? "]})," ",o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left",children:[" ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[s,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-200 dark:bg-slate-600 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex flex-col gap-3",children:[" ",o.jsxs("button",{onClick:e,className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" ",o.jsx(Uo,{size:20})," Lanjutkan Tes "]})," ",o.jsxs("button",{onClick:t,className:"w-full py-3.5 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition flex items-center justify-center gap-2",children:[" ",o.jsx(Ro,{size:20})," Hapus & Menu Utama "]})," "]})," "]})," "]})},$B=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[" ",o.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"})," ",o.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"})," ",o.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"})," ",o.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})," "]}),YB=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>{const[s,a]=B.useState(!0);return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[" ",t&&o.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[" ",o.jsx(Un,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"})," ",o.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})," "]})," ",o.jsxs("div",{className:"mb-8 flex justify-center",children:[" ",o.jsx("img",{src:Eh,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})," "]})," ",o.jsxs("div",{className:"text-center mb-8",children:[" ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})," "]})," ",o.jsxs("div",{className:"space-y-4",children:[" ",o.jsxs("button",{onClick:()=>n(s),className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[" ",o.jsx("div",{className:"absolute left-4",children:o.jsx($B,{})})," ",o.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})," "]})," ",o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[" ",o.jsx("input",{type:"checkbox",id:"remember",checked:s,onChange:l=>a(l.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-100 border-gray-300 rounded focus:ring-indigo-500 dark:focus:ring-indigo-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})," ",o.jsx("label",{htmlFor:"remember",className:"cursor-pointer select-none",children:"Tetap masuk di perangkat ini"})," "]})," ",o.jsxs("div",{className:"relative flex py-2 items-center",children:[" ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," ",o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"})," ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," "]})," ",o.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" Masuk sebagai Tamu ",o.jsx(br,{size:20})," "]})," ",o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" *Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard. "})," "]})," "]})," "]})},JB=({onSubmit:n,isLoading:e})=>{const[t,s]=B.useState(""),[a,l]=B.useState(""),u=h=>{if(h.preventDefault(),t.length<3){l("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){l("Hanya huruf, angka, dan underscore (_).");return}n(t)};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[" ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."})," ",o.jsxs("form",{onSubmit:u,children:[" ",o.jsxs("div",{className:"mb-4",children:[" ",o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"})," ",o.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"Username_Unik",value:t,onChange:h=>{s(h.target.value.replace(/\s/g,"")),l("")},autoFocus:!0})," ",a&&o.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:a})," "]})," ",o.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[" ",e?o.jsx(Un,{className:"animate-spin"}):o.jsx(ds,{size:20})," Simpan & Lanjut "]})," "]})," "]})," "]})},QB=({result:n,feature:e,onBack:t})=>o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:o.jsxs("div",{className:"max-w-3xl w-full",children:[o.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[o.jsx(pt,{size:18})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(Vf,{size:28,className:"text-indigo-600"})," Hasil ",e]}),o.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:o.jsx(kA,{text:n})})]})]})}),WB=({questions:n,onComplete:e})=>{const[t,s]=B.useState(0),[a,l]=B.useState(""),[u,h]=B.useState(null),[p,f]=B.useState(!1),[b,_]=B.useState([]),T=n[t],E=async()=>{if(a.trim()){f(!0);try{const k=await xP(T.content,a);h(k)}catch{alert("Gagal evaluasi.")}finally{f(!1)}}},R=()=>{const k={questionId:T.id,selectedAnswer:a,isCorrect:!0,scoreEarned:(u==null?void 0:u.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:u||void 0},C=[...b,k];_(C),l(""),h(null),t<n.length-1?s(t+1):e(C)};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),u?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",u.score,"/100"]}),o.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:u.toneAnalysis})]}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[o.jsx("b",{children:"Feedback:"})," ",u.feedback]}),o.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[o.jsx("b",{children:"Saran Jawaban:"})," ",u.improvedAnswer]})]}),o.jsx("button",{onClick:R,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:a,onChange:k=>l(k.target.value)}),o.jsxs("button",{onClick:E,disabled:p||!a,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[p?o.jsx(Un,{className:"animate-spin"}):o.jsx(zf,{size:18})," Submit Jawaban"]})]})]})})},XB=({flashcards:n,onFinish:e})=>{const[t,s]=B.useState(0),a=l=>{t<n.length-1?s(t+1):e()};return n.length===0?o.jsx("div",{children:"No Flashcards"}):o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[o.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:o.jsx(pt,{size:20})}),o.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),o.jsx(B7,{data:n[t],onNext:a})]})},ZB=({topic:n,onFinish:e})=>{const[t,s]=B.useState(""),[a,l]=B.useState(null),[u,h]=B.useState(!1),p=async()=>{h(!0);try{const f=await yP(n,t);l(f)}catch{alert("Error")}finally{h(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",o.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun)."]}),a?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4",children:o.jsxs("div",{className:`text-2xl font-bold ${a.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[a.understandingScore,"/100"]})}),o.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("p",{children:[o.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",a.simplificationQuality]}),o.jsxs("p",{children:[o.jsx("b",{children:"Konsep yang Terlewat:"})," ",a.missingConcepts.join(", ")||"Tidak ada"]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[o.jsx("b",{children:"Koreksi / Saran:"})," ",a.correction]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:f=>s(f.target.value)}),o.jsx("button",{onClick:p,disabled:u||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:u?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},eG=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,a]=B.useState(0);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:"flex justify-center mb-8",children:t.map((l,u)=>o.jsxs("div",{className:`flex items-center ${u<t.length-1?"w-full":""}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${u<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:l[0]}),u<t.length-1&&o.jsx("div",{className:`h-1 flex-1 ${u<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},l))}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),o.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Lakukan tahap ",t[s],' untuk materi "',n,'".']}),o.jsx("button",{onClick:()=>{s<4?a(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},VE=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},tG=({sessions:n,onBack:e,onResume:t,onDelete:s,loading:a})=>{const l=h=>{switch(h){case"UTBK":return{icon:rc,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Bf,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Ts,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Bs,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Io,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};default:return{icon:oi,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},u=h=>{const p=Math.floor(h/3600),f=Math.floor(h%3600/60),b=Math.floor(h%60);return`${p>0?p+":":""}${f.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:[" ",o.jsxs("div",{className:"max-w-5xl mx-auto",children:[" ",o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[" ",o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(pt,{size:20})})," ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Lanjutkan Sesi Tersimpan"})," "]})," ",a?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(Un,{className:"animate-spin text-indigo-600 w-8 h-8"})}):n.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[" ",o.jsx(Lu,{size:48,className:"mx-auto mb-4 opacity-20"})," ",o.jsx("p",{children:"Tidak ada sesi tersimpan."})," "]}):o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[" ",n.map(h=>{const p=Math.round(Object.keys(h.answerMap).length/h.questions.length*100),f=l(h.category),b=f.icon;return o.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-3xl border-2 ${f.border} shadow-sm flex flex-col gap-4 animate-fade-in-up hover:shadow-md transition-all`,children:[" ",o.jsxs("div",{className:"flex justify-between items-start",children:[" ",o.jsxs("div",{className:`p-3 rounded-xl ${f.bg} ${f.color}`,children:[" ",o.jsx(b,{size:24})," "]})," ",o.jsxs("div",{className:"text-right",children:[" ",o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1",children:"SISA WAKTU"})," ",o.jsxs("div",{className:`font-mono text-xl font-bold ${h.timeLeft<300?"text-rose-500":"text-slate-800 dark:text-white"}`,children:[" ",u(h.timeLeft)," "]})," "]})," "]})," ",o.jsxs("div",{children:[" ",o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[" ",o.jsxs("span",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",title:h.packageTitle||h.category,children:[" ",h.packageTitle||h.category," "]})," "]})," ",o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block mb-3",children:[" ",new Date(h.timestamp).toLocaleDateString(),"  ",h.questions.length," Soal "]})," ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[p,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:`h-full ${h.category==="UTBK"?"bg-rose-500":"bg-indigo-500"}`,style:{width:`${p}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex gap-2 mt-2",children:[" ",o.jsxs("button",{onClick:()=>s(h.id),className:"p-3 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition border border-rose-200 dark:border-rose-900/50",children:[" ",o.jsx(Ro,{size:20})," "]})," ",o.jsxs("button",{onClick:()=>t(h),className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[" ",o.jsx(Uo,{size:18,fill:"currentColor"})," Lanjutkan "]})," "]})," "]},h.id||h.timestamp)})," "]})," "]})," "]})},nG=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:a,onStartTesKoran:l,onStartTesKecermatan:u,onGeneralInputSubmit:h,generalInput:p,setGeneralInput:f,isReadingMaterial:b,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:E,weakTopicsCount:R,loading:k,skdStream:C,onSkdStreamSelect:U,onHistory:M,onStartGeneralSession:G,onStartSkripsiSession:q,username:X,isDarkMode:J,onToggleDarkMode:D,tpaStream:A,onTpaStreamSelect:I,onOpenAcademicHub:P,onBattle:L}=n,[z,V]=B.useState(""),[Ee,De]=B.useState(null),[Y,le]=B.useState("MEDIUM"),[_e,Oe]=B.useState("MEDIUM"),[te,F]=B.useState(!1),Q=B.useRef(null),[fe,ie]=B.useState(""),[re,ue]=B.useState(5),[Ae,Fe]=B.useState("Medium"),We=tt=>{var de;const mt=(de=tt.target.files)==null?void 0:de[0];if(mt){if(mt.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}De(mt.name),V(""),F(!0);const Be=new FileReader;Be.onload=Xe=>{var Vt;const Qe=((Vt=Xe.target)==null?void 0:Vt.result).split(",")[1];setTimeout(()=>{f&&f({type:"pdf",content:Qe,title:mt.name,lengthPreference:Y,difficultyPreference:_e}),F(!1)},800)},Be.readAsDataURL(mt)}},At=()=>{(p==null?void 0:p.type)==="pdf"?h({...p,lengthPreference:Y,difficultyPreference:_e}):z?h({type:"text",content:z,title:"Input Manual",lengthPreference:Y,difficultyPreference:_e}):alert("Mohon masukkan teks atau upload PDF.")},jt=tt=>{const mt=tt.filter(de=>de.toLowerCase().includes(fe.toLowerCase()));return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),o.jsxs("div",{className:"mb-4 relative",children:[o.jsx(hu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),o.jsx("input",{type:"text",placeholder:"Cari topik...",value:fe,onChange:de=>ie(de.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:mt.length>0?mt.map(de=>o.jsx("button",{onClick:()=>{Z.play("tap"),T(de)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${E===de?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:de},de)):o.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),E&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),o.jsxs("select",{value:re,onChange:de=>ue(Number(de.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"5",children:"5 Soal"}),o.jsx("option",{value:"10",children:"10 Soal"}),o.jsx("option",{value:"15",children:"15 Soal"}),o.jsx("option",{value:"20",children:"20 Soal"})]})]}),o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),o.jsxs("select",{value:Ae,onChange:de=>Fe(de.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"Easy",children:"Mudah"}),o.jsx("option",{value:"Medium",children:"Sedang"}),o.jsx("option",{value:"Hard",children:"Sulit"}),o.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),s(Ke.PRACTICE,Ae,re)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(Qp,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&E&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:o.jsxs("button",{onClick:()=>{Z.play("click"),s(Ke.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(zf,{size:20})," Mulai Sesi Wawancara"]})})]})};return o.jsxs("div",{className:"min-h-screen bg-transparent",children:[o.jsx(V7,{}),o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>{Z.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[o.jsx(pt,{size:18,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[D&&o.jsx("button",{onClick:()=>{D()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:J?o.jsx(yA,{size:16}):o.jsx(hx,{size:16})}),o.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[o.jsx(vA,{size:12})," ",X]})]})]}),o.jsx("div",{className:"flex justify-between items-end mb-8",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:e==="TPA"?"Seleksi Lanjutan":e+" Dashboard"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),k?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx(Un,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),o.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:o.jsx(z7,{})})]}):o.jsxs(o.Fragment,{children:[e==="KECERMATAN"&&o.jsx("div",{className:"animate-fade-in-up",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),u("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:o.jsx(Qn,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:o.jsx(oi,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:o.jsx(o7,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:o.jsx(r9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:o.jsx(Pr,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:o.jsx(v9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&o.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(Vf,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:z,onChange:tt=>V(tt.target.value)}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("TITLE_IDEAS",z)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[o.jsx(Ts,{size:24})," Ide Judul"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("OUTLINE",z)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[o.jsx(oi,{size:24})," Buat Outline"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("METHODOLOGY",z)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[o.jsx(hu,{size:24})," Cek Metodologi"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),q&&q("PARAPHRASE",z)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[o.jsx(J8,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&o.jsx("div",{className:"space-y-8 animate-fade-in-up",children:b?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(Jp,{size:20})," Materi Belajar"]}),o.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(p==null?void 0:p.type)==="pdf"&&p.content&&o.jsx("div",{className:"mb-6",children:o.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),o.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:o.jsx(kA,{text:(p==null?void 0:p.extractedText)||(p==null?void 0:p.content)||""})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Y2.map(tt=>{const de={Brain:Ts,Repeat:Z9,MessageCircle:D9,Share2:c7,Search:hu,GraduationCap:rc,BookOpen:Jp,PenTool:Qp}[tt.icon]||Ts;return o.jsxs("button",{onClick:()=>{Z.play("click"),G(tt.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[o.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:o.jsx(de,{size:24})}),o.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:tt.name}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:tt.desc})]},tt.id)})})]})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(mx,{size:20})," Input Materi"]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:Ee?`PDF Terpilih: ${Ee}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:z,disabled:!!Ee,onChange:tt=>{V(tt.target.value)}}),o.jsx("input",{type:"file",ref:Q,accept:"application/pdf",className:"hidden",onChange:We}),o.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${Ee?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var tt;return(tt=Q.current)==null?void 0:tt.click()},children:[o.jsx(oi,{size:20}),o.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),Ee&&o.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ds,{size:16})," ",o.jsxs("span",{children:["File siap: ",o.jsx("b",{children:Ee})]})]}),o.jsx("button",{onClick:()=>{De(null),f&&f(null),Q.current&&(Q.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:o.jsx(Ro,{size:16})})]}),te?o.jsxs("div",{className:"mb-6 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[o.jsx(Un,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),o.jsx(xo,{height:"h-[300px]",className:"rounded-xl"})]}):(p==null?void 0:p.type)==="pdf"&&p.content&&o.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),o.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),o.jsxs("select",{value:Y,onChange:tt=>le(tt.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),o.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),o.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),o.jsxs("select",{value:_e,onChange:tt=>Oe(tt.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),o.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),o.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),o.jsx("button",{onClick:()=>{Z.play("click"),At()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-emerald-600 dark:bg-emerald-600 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-emerald-200 dark:shadow-none hover:bg-emerald-700 transition-all",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Ar,{size:24,className:"text-white/80"})," Simulasi UTBK SNBT Full"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),o.jsx(br,{className:"group-hover:translate-x-2 transition-transform"})]}),jt(J2)]}),e==="TPA"&&o.jsx(o.Fragment,{children:A?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>{Z.play("click"),I&&I(null)},className:"underline hover:text-indigo-600",children:"Ubah Jalur"})," ",o.jsx(br,{size:14})," ",o.jsx("b",{className:"uppercase",children:A==="TPA_TBI"?"TPA & TBI":"Psikotes PKN STAN"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-emerald-600 dark:bg-emerald-600 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg hover:bg-emerald-700 transition-all",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Ar,{size:24,className:"text-white/80"})," Simulasi ",A==="TPA_TBI"?"TPA & TBI":"Psikotes"," Full"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:A==="TPA_TBI"?"65 Soal. 100 Menit.":"TIU, Logika Gambar, Kepribadian."})]}),o.jsx(br,{className:"group-hover:translate-x-2 transition-transform"})]}),jt(A==="TPA_TBI"?W2:X2)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 animate-fade-in-up",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),I&&I("TPA_TBI")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-blue-500 dark:hover:border-blue-500 transition text-center group shadow-sm",children:[o.jsx(Ts,{size:48,className:"mx-auto mb-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"TPA & TBI"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Pascasarjana & Umum"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),I&&I("PSIKOTEST_KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 transition text-center group shadow-sm",children:[o.jsx(Bf,{size:48,className:"mx-auto mb-4 text-purple-600 dark:text-purple-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Lanjutan I PKN STAN"})]})]})}),e==="PSIKOTEST"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),l()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 transition text-center group shadow-sm",children:[o.jsx(_8,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 transition text-center group shadow-sm",children:[o.jsx(Ts,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),o.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),jt(Z2)]})]}),e==="INTERVIEW"&&jt(eC),e==="SKD"&&(C?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>U(null),className:"underline",children:"Ubah Jalur"})," ",o.jsx(br,{size:14})," ",o.jsx("b",{children:C})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-emerald-600 dark:bg-emerald-600 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg hover:bg-emerald-700 transition-all",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Ar,{size:24,className:"text-white/80"})," Simulasi SKD CAT (110 Soal)"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),o.jsx(br,{className:"group-hover:translate-x-2 transition-transform"})]}),jt(Q2)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),U("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(x9,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),U("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(b8,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&o.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),s(Ke.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(Bs,{className:"text-amber-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),s(Ke.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(Ts,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),R>0&&o.jsxs("button",{onClick:()=>{Z.play("click"),s(Ke.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[o.jsx(Pr,{className:"text-rose-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[R," Topik Lemah"]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),P&&P()},className:"p-4 bg-white dark:bg-slate-800 border border-emerald-200 dark:border-emerald-900 rounded-xl hover:border-emerald-500 hover:shadow-md transition text-left",children:[o.jsx(So,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Analisis Akademik"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Target Skor & Review"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),L&&L()},className:"p-4 bg-white dark:bg-slate-800 border border-indigo-200 dark:border-indigo-900 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(bA,{className:"text-indigo-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Battle Arena"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"1v1 Duel"})]})]})]})]})]})]})};function sG(){var Hr;const[n,e]=B.useState("SPLASH"),[t,s]=B.useState(null),[a,l]=B.useState(!1),[u,h]=B.useState(!0),[p,f]=B.useState("DASHBOARD"),[b,_]=B.useState(!1),[T,E]=B.useState(null),[R,k]=B.useState(null),[C,U]=B.useState(""),[M,G]=B.useState([]),[q,X]=B.useState(!1),[J,D]=B.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1,theme:"light",appBaseColor:"#ffffff",appPattern:"none",fontSize:"md"}),[A,I]=B.useState(null),[P,L]=B.useState(!1),[z,V]=B.useState(null),[Ee,De]=B.useState(!1),[Y,le]=B.useState(""),[_e,Oe]=B.useState(null),[te,F]=B.useState(null),[Q,fe]=B.useState(null),[ie,re]=B.useState(new Set),[ue,Ae]=B.useState("ANGKA"),[Fe,We]=B.useState(null),[At,jt]=B.useState(null),[tt,mt]=B.useState([]),[de,Be]=B.useState(null),[Xe,Qe]=B.useState(null),[Vt,ht]=B.useState(""),[Ze,Lt]=B.useState([]),[ci,Pn]=B.useState(null),[ve,Se]=B.useState([]),[Me,Ye]=B.useState(!1),[kt,Bt]=B.useState(void 0),[Vn,Gs]=B.useState([]),[ui,Bn]=B.useState(!1),[en,Cn]=B.useState(null),[Gt,Kt]=B.useState(void 0),[hs,fs]=B.useState(!1),[tn,Gn]=B.useState([]),[on,zs]=B.useState(null),[ms,ps]=B.useState(null),it=($,ye)=>ps({msg:$,type:ye}),[di,zn]=B.useState([...Qv,...Wv,...Xv,...t_,...s_,...Zv,...e_,...n_]),Ii=async $=>{try{const ye=localStorage.getItem("fajmuls_active_session");if(ye){const ge=JSON.parse(ye);if(ge.uid===$&&Date.now()-ge.timestamp<1440*60*1e3)return Cn(ge),!0;localStorage.removeItem("fajmuls_active_session")}}catch{localStorage.removeItem("fajmuls_active_session")}return!1},oc=$=>{s($.category),Oe($.mode),Lt($.questions),Pn($.drillContent),$.skdStream&&F($.skdStream),$.tpaStream&&fe($.tpaStream),$.packageTitle&&Kt($.packageTitle),Bt($),Cn(null),e("SESSION")},na=()=>{localStorage.removeItem("fajmuls_active_session"),Cn(null)},Or=async()=>{if(Z.play("click"),!(A!=null&&A.uid)||A.isGuest){it("Fitur ini hanya untuk pengguna login.","info");return}Bn(!0),e("RESUME_LIST");try{const $=await DV(A.uid);Gs($)}catch{it("Gagal memuat sesi tersimpan.","error")}finally{Bn(!1)}},Va=async $=>{Z.play("click"),oc($),$.id&&(A!=null&&A.uid)&&await yE(A.uid,$.id)},sa=async $=>{Z.play("click"),A!=null&&A.uid&&(await yE(A.uid,$),Gs(ye=>ye.filter(ge=>ge.id!==$&&String(ge.timestamp)!==$)),it("Sesi dihapus.","success"))};B.useEffect(()=>{const $=localStorage.getItem("fajmuls_settings");if($){const ge=JSON.parse($);ge.theme||(ge.theme=ge.darkMode?"dark":"light"),ge.appBaseColor||(ge.appBaseColor=ge.darkMode?"#0f172a":"#ffffff",ge.appBackground==="grid"?ge.appPattern="grid":ge.appBackground==="dots"?ge.appPattern="dots":ge.appBackground==="waves"?ge.appPattern="waves":ge.appBackground==="aurora"?ge.appPattern="aurora":ge.appBackground==="fajmuls"?ge.appPattern="fajmuls":ge.appPattern="none"),ge.fontSize||(ge.fontSize="md"),D(ge)}else window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&D(ge=>({...ge,theme:"dark",darkMode:!0,appBaseColor:"#0f172a"}));const ye=NV(async ge=>{if(h(!0),ge)try{const Pe=await $p(ge.uid);if(Pe){let Ne=Pe;if(Pe.gamification){const ke=TV(Pe.gamification);ke.streak!==Pe.gamification.streak&&(await xE(ge.uid,ke),Ne={...Pe,gamification:ke})}I({uid:ge.uid,username:Ne.username,email:ge.email,photoURL:Ne.photoURL||ge.photoURL,gamification:Ne.gamification});const je=await oA(ge.uid);Gn(je),await Ii(ge.uid),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else I({uid:ge.uid,username:"",email:ge.email,photoURL:ge.photoURL}),e("USERNAME_SETUP")}catch(Pe){console.error("Profile fetch error",Pe)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const Ne=localStorage.getItem("fajmuls_guest_username"),je="guest-"+(Ne||"user");I({uid:je,username:Ne||"Tamu",email:null,isGuest:!0});const ke=localStorage.getItem("fajmuls_guest_history");if(ke)try{Gn(JSON.parse(ke))}catch{}await Ii(je),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");h(!1),L(!1)});return()=>ye()},[]),B.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(J)),J.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),Z.syncSettings(J)},[J]);const hi=async $=>{L(!0);try{const ye=await AV($);await $p(ye.uid)||(I({uid:ye.uid,username:"",email:ye.email,photoURL:ye.photoURL}),e("USERNAME_SETUP"))}catch{it("Gagal login dengan Google.","error"),L(!1)}},Oo=()=>{Z.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),I({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const $=localStorage.getItem("fajmuls_guest_history");if($)try{Gn(JSON.parse($))}catch{}else Gn([]);e("HOME")},Ns=async $=>{if(A!=null&&A.uid){L(!0);try{if(!await CV($)){it("Username sudah dipakai. Pilih yang lain.","error"),L(!1);return}await IV(A.uid,{username:$,email:A.email||"",photoURL:A.photoURL||""}),I(ge=>ge?{...ge,username:$,gamification:Xh}:null),Gn([]),Z.play("success"),e("HOME")}catch{it("Gagal membuat profil.","error")}finally{L(!1)}}},As=async()=>{Z.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),A!=null&&A.isGuest||await kV(),I(null),Gn([]),e("LOGIN")},ln=async $=>{const ye=[$,...tn];Gn(ye),A!=null&&A.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ye,VE())):A!=null&&A.uid&&await bE(A.uid,$)},vn=async $=>{const ye=tn.filter(ge=>ge.id!==$);Gn(ye),A!=null&&A.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ye)):A!=null&&A.uid&&await jV(A.uid,$),it("Riwayat berhasil dihapus.","success"),Z.play("click")},ks=async $=>{if(A!=null&&A.isGuest){$.username&&(I(ye=>ye?{...ye,username:$.username}:null),localStorage.setItem("fajmuls_guest_username",$.username),it("Nama Tamu diubah.","success"));return}if(A!=null&&A.uid)try{await RV(A.uid,$),I(ye=>ye?{...ye,...$}:null),it("Profil berhasil diperbarui!","success")}catch(ye){it(ye.message||"Gagal memperbarui profil.","error")}},Ba=async $=>{Ye(!0);try{const ye=await bP($);V({...$,extractedText:ye}),De(!0)}catch{it("Gagal memproses materi. Coba lagi.","error")}finally{Ye(!1)}},lc=async($,ye)=>{if(!ye.trim()){it("Mohon isi judul atau topik.","error");return}Ye(!0),Qe($);try{const ge=await vP(ye,$);ht(ge),e("SESSION")}catch{it("Gagal generate konten skripsi.","error")}finally{Ye(!1)}},Vo=async $=>{if(!z){it("Materi hilang. Silakan input ulang.","error");return}Ye(!0),jt($),Oe(Ke.DRILL);try{if($==="ACTIVE_RECALL"||$==="PBL"||$==="PRACTICE"||$==="TEACHING"){const ye=await hn(Ke.DRILL,"GENERAL",z,5,[],void 0,$);Lt(ye)}else if($==="SPACED_REPETITION"){const ye=await _P(z);mt(ye)}else if($==="MIND_MAP"){const ye=await TP(z);Be(ye)}e("SESSION")}catch{it("Gagal memuat materi AI.","error")}finally{Ye(!1)}},Bo=$=>{if($.length===0){it("Tidak ada soal salah untuk dikerjakan.","info");return}Lt($),Oe(Ke.DRILL),Kt("Smart Review: Weakness Attack"),Bt(void 0),e("SESSION")},Cs=async($,ye,ge)=>{if(t){if(Kt(void 0),Bt(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!Y&&$!==Ke.SIMULATION&&$!==Ke.WEAKNESS){it(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!te){it("Harap pilih jalur (CPNS / Kedinasan).","error");return}Ye(!0),Oe($),Se([]),Lt([]),Pn(null);try{const Pe=Y;if($===Ke.DRILL){const Ne=await SP(t,Pe,te||void 0);Pn(Ne),Ne&&Ne.question&&Lt([Ne.question])}else if($===Ke.SIMULATION&&t==="SKD"&&te){const Ne=await UT(te);Lt(Ne||[])}else if($===Ke.SIMULATION&&t==="UTBK"){const Ne=await OT();Lt(Ne||[])}else if($===Ke.SIMULATION&&t==="TPA")if(Q==="PSIKOTEST_KEDINASAN"){const Ne=await BT();Lt(Ne||[])}else{const Ne=await VT();Lt(Ne||[])}else if($===Ke.SIMULATION&&t==="PSIKOTEST"){const Ne=await GT();Lt(Ne||[])}else{let Ne=ge||5;t==="PSIKOTEST"&&$===Ke.SIMULATION&&(Ne=40),t==="INTERVIEW"&&(Ne=3);const je=await hn($,t,Pe,Ne,Array.from(ie),te||void 0,void 0,ye);Lt(je||[])}e("SESSION")}catch(Pe){console.error(Pe),it("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{Ye(!1)}}},Is=async($,ye,ge=!1)=>{let Pe;if(ye)Pe={...ye,isAborted:ge};else{Se($);let Ne=0,je=0,ke;if(t==="SKD"&&_e===Ke.SIMULATION){let Ue=0,$e=0,nt=0;$.forEach(Ge=>{var Et,$t,Qt,mn,In,_n;const ft=Ze.find(Ga=>Ga.id===Ge.questionId);ft&&(($t=(Et=ft.metadata)==null?void 0:Et.subtest)!=null&&$t.includes("TWK")&&(Ue+=Ge.scoreEarned),(mn=(Qt=ft.metadata)==null?void 0:Qt.subtest)!=null&&mn.includes("TIU")&&($e+=Ge.scoreEarned),(_n=(In=ft.metadata)==null?void 0:In.subtest)!=null&&_n.includes("TKP")&&(nt+=Ge.scoreEarned))}),Ne=Ue+$e+nt,je=550,ke={twk:Ue,tiu:$e,tkp:nt,total:Ne,passed:Ue>=65&&$e>=80&&nt>=166}}else if(t==="UTBK"&&_e===Ke.SIMULATION){const Ue=In=>{const _n=Ze.filter(Ri=>{var fi,Ks;return(Ks=(fi=Ri.metadata)==null?void 0:fi.subtest)==null?void 0:Ks.includes(In)});if(!_n.length)return 0;const Ga=$.filter(Ri=>{var fi,Ks,qr;return Ri.isCorrect&&((qr=(Ks=(fi=Ze.find(Mi=>Mi.id===Ri.questionId))==null?void 0:fi.metadata)==null?void 0:Ks.subtest)==null?void 0:qr.includes(In))}).length;return Math.round(200+Ga/_n.length*600)},$e=Ue("Penalaran Umum"),nt=Ue("PPU"),Ge=Ue("PBM"),ft=Ue("Kuantitatif"),Et=Ue("Literasi B.Indo"),$t=Ue("Literasi B.Inggris"),Qt=Ue("Penalaran Matematika"),mn=Math.round(($e+nt+Ge+ft+Et+$t+Qt)/7);Ne=mn,je=1e3,ke={pu:$e,ppu:nt,pbm:Ge,pk:ft,lbi:Et,lbe:$t,pm:Qt,average:mn}}else if(t==="TPA"&&_e===Ke.SIMULATION)if(Q==="PSIKOTEST_KEDINASAN"){let Ue=0,$e=0,nt=0,Ge=0;$.forEach(Qt=>{const mn=Ze.find(In=>In.id===Qt.questionId);mn&&(mn.metadata.subtest.includes("TIU")?Ue+=Qt.scoreEarned:mn.metadata.subtest.includes("Gambar")||mn.metadata.subtest.includes("Figural")?$e+=Qt.scoreEarned:mn.metadata.subtest.includes("Kepribadian")&&(nt+=Qt.scoreEarned,Ge++))});const ft=Ge*5,Et=ft>0?Math.round(nt/ft*100):0;Ne=Ue+$e+Et,je=500;const $t=Et>=70;ke={tiuScore:Ue,figuralScore:$e,personalityScore:Et,passed:$t,verdict:$t?"MEMENUHI SYARAT":"TIDAK MEMENUHI SYARAT"}}else{let Ue=0,$e=0;$.forEach(Ge=>{var Et,$t,Qt,mn;const ft=Ze.find(In=>In.id===Ge.questionId);ft&&((($t=(Et=ft.metadata)==null?void 0:Et.subtest)==null?void 0:$t.includes("TBI"))||((mn=(Qt=ft.metadata)==null?void 0:Qt.subtest)==null?void 0:mn.includes("Inggris"))?Ge.isCorrect&&($e+=5):Ge.selectedAnswer&&(Ge.isCorrect?Ue+=4:Ue-=1))});const nt=Ue>=67&&$e>=30;Ne=Ue+$e,je=280,ke={tpaScore:Ue,tbiScore:$e,passed:nt}}else if(t==="INTERVIEW"){const Ue=$.map($e=>{var nt;return((nt=$e.interviewFeedback)==null?void 0:nt.score)||0});Ne=Math.round(Ue.reduce(($e,nt)=>$e+nt,0)/(Ue.length||1)),je=100}else if(t==="PSIKOTEST"&&_e===Ke.SIMULATION){const Ue=$.filter(Et=>Et.isCorrect).length,$e=Ze.length,nt=Ue/$e,Ge=Math.round(70+nt*75);let ft=Ge>=130?"Very Superior":Ge>=120?"Superior":Ge>=110?"High Average":Ge>=90?"Average":"Low Average";Ne=Ge,je=160,ke={iqScore:Ge,classification:ft}}else if(t==="GENERAL"){const Ue=$.reduce(($e,nt)=>$e+(nt.scoreEarned||0),0);Ne=Math.round(Ue/($.length||1)),je=100}else{const Ue=$.filter($e=>$e.isCorrect).length;Ne=Math.round(Ue/Ze.length*100),je=100}Pe={id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:te||void 0,tpaStream:Q||void 0,score:Ne,maxScore:je,details:ke,questions:Ze,answers:$,isAborted:ge,packageTitle:Gt}}if(await ln(Pe),!ge&&!(A!=null&&A.isGuest)&&(A!=null&&A.uid)&&A.gamification){const Ne=_V(Pe.score,Pe.answers||[],_e===Ke.SIMULATION,Pe.category||"");let je={...A.gamification};je.xp+=Ne;const ke=gE(je.xp);ke>je.level&&(je.level=ke,Z.play("levelUp"),E({level:ke}));const Ue=[Pe,...tn],$e=SV(je,Ue);if($e.length>0){const nt=$e.map(Et=>Et.id);je.unlockedAchievements=[...je.unlockedAchievements,...nt];const Ge=$e.reduce((Et,$t)=>Et+$t.xpReward,0);je.xp+=Ge;const ft=gE(je.xp);ft>je.level&&(je.level=ft,T||(Z.play("levelUp"),E({level:ft}))),k($e[0]),Z.play("success")}await xE(A.uid,je),I({...A,gamification:je})}if(!ge&&!(A!=null&&A.isGuest)&&(A!=null&&A.uid)){if(Pe.category==="KECERMATAN"&&Pe.details){const Ne=Pe.details;vE("KECERMATAN",Ne.mode||"General",Pe.score,A.username,A.uid)}else if(t&&_e===Ke.SIMULATION){let Ne="General";t==="SKD"&&te&&(Ne=te),t==="TPA"&&Q&&(Ne=Q),vE(t,Ne,Pe.score,A.username,A.uid,Gt)}}Kt(void 0),ye?(ye.category!=="BENCHMARK"||ge)&&e("HOME"):e("RESULTS")},Rs=$=>{Z.play("click"),s($),Kt(void 0),Bt(void 0),$==="BUTAWRNA"?e("COLORBLIND"):$==="BENCHMARK"?(We(null),f("DASHBOARD"),e("BENCHMARK")):(e("DASHBOARD"),V(null),De(!1),le(""),F(null),fe(null),jt(null),Qe(null),ht(""))},is=$=>{Ae($),e("TES_KECERMATAN")},as=()=>{if(tn.length===0){it("Belum ada riwayat untuk disimpan.","info");return}const $=JSON.stringify(tn,VE(),2),ye=new Blob([$],{type:"application/json"}),ge=URL.createObjectURL(ye),Pe=document.createElement("a");Pe.href=ge,Pe.download=`Fajmuls_History_${(A==null?void 0:A.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(ge),it("Export berhasil!","success")},Fs=$=>{const ye=new FileReader;ye.onload=ge=>{var Pe;try{const Ne=(Pe=ge.target)==null?void 0:Pe.result,je=JSON.parse(Ne);if(!Array.isArray(je))throw new Error("Format salah");const ke=new Set(tn.map(nt=>nt.id)),Ue=je.filter(nt=>!ke.has(nt.id)),$e=[...tn,...Ue].sort((nt,Ge)=>new Date(Ge.date).getTime()-new Date(nt.date).getTime());Gn($e),A!=null&&A.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify($e)):A!=null&&A.uid&&Ue.forEach(nt=>{bE(A.uid,nt)}),it(`Berhasil memuat ${Ue.length} riwayat baru.`,"success")}catch{it("Gagal membaca file JSON.","error")}},ye.readAsText($)},cn=$=>{Lt($.questions),Oe(Ke.SIMULATION),Kt($.title),Bt(void 0),e("SESSION")},Vr=async $=>{if(t)try{let ye=[],ge=60;t==="SKD"?(ye=await UT(te||"CPNS"),ge=100):t==="UTBK"?(ye=await OT(),ge=195):t==="TPA"?Q==="PSIKOTEST_KEDINASAN"?(ye=await BT(),ge=90):(ye=await VT(),ge=100):t==="PSIKOTEST"?(ye=await GT(),ge=40):ye=await hn(Ke.SIMULATION,t,"SIMULATION",20,[],te||void 0,void 0,"HOTS");const je=di.filter(Ge=>Ge.category!==t?!1:t==="SKD"?Ge.skdStream===te:t==="TPA"?Ge.tpaStream===Q:!0).reduce((Ge,ft)=>{const Et=ft.title.match(/(\d+)$/);if(Et){const $t=parseInt(Et[1]);return $t>Ge?$t:Ge}return Ge},0)+1;let ke="",Ue="gen";t==="SKD"?te==="CPNS"?(ke=`TO SKD CPNS ${je}`,Ue+="-skd-cpns"):te==="KEDINASAN"?(ke=`TO SKD Kedinasan ${je}`,Ue+="-skd-kedinasan"):(ke=`TO SKD ${je}`,Ue+="-skd-general"):t==="UTBK"?(ke=`TO UTBK ${je}`,Ue+="-utbk"):t==="TPA"?Q==="PSIKOTEST_KEDINASAN"?(ke=`TO Psikotes Kedinasan ${je}`,Ue+="-tpa-psikotest_kedinasan"):(ke=`TO TPA TBI ${je}`,Ue+="-tpa-tbi"):t==="PSIKOTEST"?(ke=`TO Psikotest ${je}`,Ue+="-psikotest"):(ke=`TO ${t} ${je}`,Ue+=`-${t.toLowerCase()}`);const nt={id:`${Ue}-${je}-${Date.now()}`,title:ke,category:t,skdStream:te||void 0,tpaStream:Q||void 0,questions:ye,durationMinutes:ge,isAiGenerated:!0,version:"v3",createdAt:new Date().toISOString()};await lh(nt),zn(Ge=>[nt,...Ge]),it(`Paket baru "${ke}" (v3) berhasil dibuat dan disimpan!`,"success")}catch(ye){console.error(ye),it("Gagal membuat paket soal. Coba lagi.","error")}},Br=async $=>{if(zn(ye=>ye.filter(ge=>ge.id!==$)),$.startsWith("gen-")||$.startsWith("pkg-"))try{await VV($),it("Paket dihapus dari database.","success")}catch(ye){console.error(ye)}else it("Paket dihapus dari tampilan lokal.","success")},Hs=$=>{Array.from($).forEach(ye=>{const ge=new FileReader;ge.onload=async Pe=>{var Ne;try{const je=(Ne=Pe.target)==null?void 0:Ne.result,ke=JSON.parse(je);ke.id&&ke.questions&&(await lh(ke),zn(Ue=>Ue.find($e=>$e.id===ke.id)?Ue:[ke,...Ue]),it(`Paket "${ke.title}" diimpor dan disimpan.`,"success"))}catch{it("File tidak valid.","error")}},ge.readAsDataURL(ye)})},qs=async()=>{fs(!0);try{const $=await OV(),ye=new Map;[...Qv,...Wv,...Xv,...t_,...s_,...Zv,...e_,...n_].forEach(ge=>ye.set(ge.id,ge)),$.forEach(ge=>ye.set(ge.id,ge)),zn(Array.from(ye.values())),it("Paket soal diperbarui.","success")}catch($){console.error($),it("Gagal memuat paket soal.","error")}finally{fs(!1)}},Gr=async()=>{if(t){fs(!0);try{const $=di.filter(je=>je.category!==t?!1:t==="SKD"?je.skdStream===te:t==="TPA"?je.tpaStream===Q:!0),ye=new Map;$.forEach(je=>{const ke=je.title.trim();ye.has(ke)||ye.set(ke,[]),ye.get(ke).push(je)});const ge=Array.from(ye.values()).filter(je=>je.length>1);if(ge.length===0){it("Tidak ditemukan duplikasi.","info"),fs(!1);return}const Pe=[],Ne=[...di];for(const je of ge){je.sort((Ge,ft)=>(Ge.createdAt||"").localeCompare(ft.createdAt||""));const ke=je[0],Ue=ke.title.match(/^(.*?)(\d+)$/),$e=Ue?Ue[1]:ke.title+" ";let nt=0;$.forEach(Ge=>{if(Ge.title.startsWith($e)){const ft=Ge.title.match(/(\d+)$/);if(ft){const Et=parseInt(ft[1]);Et>nt&&(nt=Et)}}});for(let Ge=1;Ge<je.length;Ge++){const ft=je[Ge];nt++;const Et=`${$e}${nt}`,$t={...ft,title:Et};Pe.push(lh($t));const Qt=Ne.findIndex(mn=>mn.id===ft.id);Qt!==-1&&(Ne[Qt]=$t)}}await Promise.all(Pe),zn(Ne),it(`Berhasil memperbaiki ${Pe.length} duplikasi.`,"success")}catch($){console.error($),it("Gagal memperbaiki duplikasi.","error")}finally{fs(!1)}}},zr=async()=>{if(t){fs(!0);try{const $=di.filter(Ne=>Ne.category!==t?!1:t==="SKD"?Ne.skdStream===te:t==="TPA"?Ne.tpaStream===Q:!0);$.sort((Ne,je)=>new Date(Ne.createdAt).getTime()-new Date(je.createdAt).getTime());const ye=[],ge=[...di];let Pe=0;$.forEach((Ne,je)=>{const ke=je+1,Ue=Ne.title.match(/^(.*?)(\d+)$/);if(Ue){const $e=Ue[1];if(parseInt(Ue[2])!==ke){const Ge=`${$e}${ke}`,ft={...Ne,title:Ge};ye.push(lh(ft));const Et=ge.findIndex($t=>$t.id===Ne.id);Et!==-1&&(ge[Et]=ft),Pe++}}}),ye.length>0?(await Promise.all(ye),zn(ge),it(`Berhasil mengurutkan ulang ${Pe} paket.`,"success")):it("Urutan paket sudah benar.","info")}catch($){console.error($),it("Gagal mengurutkan paket.","error")}finally{fs(!1)}}},Fr=$=>{if(Z.play("click"),U(""),X(!1),$.type==="CATEGORY")Rs($.id);else if($.type==="FEATURE"){if($.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if($.id.startsWith("KECERMATAN_")){s("KECERMATAN");const ye=$.id.replace("KECERMATAN_","");is(ye)}else if(["REACTION","AIM","SEQUENCE","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"].includes($.id))s("BENCHMARK"),We($.id),f("DASHBOARD"),e("BENCHMARK");else if($.id.startsWith("UTBK_")){s("UTBK");const ye=$.label.replace("UTBK ","");le(ye),e("DASHBOARD")}else if($.id.startsWith("SKD_")){s("SKD");const ye=$.label.replace("SKD ","");le(ye),F("CPNS"),e("DASHBOARD")}}};return n==="SPLASH"?o.jsx(F7,{onComplete:()=>e(A?"HOME":"LOGIN")}):u?o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:[" ",o.jsx(Un,{className:"animate-spin text-indigo-600 w-10 h-10"})," "]}):n==="LOGIN"?o.jsx(YB,{onGoogleLogin:hi,onGuestLogin:Oo,isLoading:P}):n==="USERNAME_SETUP"?o.jsx(JB,{onSubmit:Ns,isLoading:P}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed inset-0 -z-10 transition-colors duration-500 bg-pattern-${J.appPattern||"none"}`,style:{backgroundColor:J.appBaseColor||"#ffffff"}}),ms&&o.jsx(qB,{message:ms.msg,type:ms.type,onClose:()=>ps(null)}),R&&o.jsx(BB,{achievement:R,onClose:()=>k(null)}),T&&o.jsx(VB,{newLevel:T.level,onClose:()=>E(null)}),o.jsx(OB,{isOpen:b,onClose:()=>_(!1),profile:(A==null?void 0:A.gamification)||Xh}),en&&o.jsx(KB,{session:en,onResume:()=>Va(en),onDiscard:na}),o.jsx(H7,{isOpen:a,onClose:()=>l(!1),settings:J,onUpdate:D,userProfile:A,onUpdateProfile:ks}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"&&o.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex flex-col sm:flex-row justify-between items-center animate-fade-in-down gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto cursor-pointer",onClick:()=>{Z.play("click"),e("HOME")},children:[o.jsx("img",{src:Eh,alt:"Logo",className:"w-8 h-8 object-contain"}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),o.jsxs("div",{className:"flex-1 max-w-lg relative w-full sm:w-auto mx-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(hu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),o.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari: UTBK, Pauli, Reaction Time...",value:C,onChange:$=>U($.target.value)})]}),q&&M.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:M.map($=>o.jsxs("button",{onClick:()=>Fr($),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:$.label}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${$.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:$.type})]},$.id))})]}),!(A!=null&&A.isGuest)&&(A==null?void 0:A.gamification)&&o.jsx("div",{className:"w-full sm:w-auto flex justify-center",children:o.jsx(UB,{profile:A.gamification,onOpenAchievements:()=>{Z.play("click"),_(!0)}})}),o.jsxs("div",{className:"flex items-center gap-3 hidden sm:flex",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-xl transition",onClick:()=>{!(A!=null&&A.uid)||A.isGuest?it("Login untuk akses Social Hub","info"):(Z.play("click"),e("SOCIAL_HUB"))},children:[o.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[o.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(A==null?void 0:A.username)||"Tamu"}),o.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:A!=null&&A.isGuest?"Mode Tamu":"Online"})]}),o.jsx(HB,{user:A})]}),o.jsx("button",{onClick:()=>{Z.play("click"),l(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:o.jsx(xA,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),o.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"?"pt-32 sm:pt-20":""}`,children:[n==="HOME"&&o.jsxs("div",{className:"min-h-screen p-6 flex flex-col items-center justify-center relative transition-colors duration-300 bg-transparent",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("img",{src:Eh,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:zE.map($=>{let ye=J.theme==="fajmuls"?"bg-white/60 backdrop-blur-xl border-white/50 shadow-xl hover:bg-white/80 hover:scale-[1.02] text-slate-900":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:-translate-y-1 hover:shadow-xl";J.theme!=="fajmuls"&&($.id==="BENCHMARK"?ye+=" hover:border-red-500 dark:hover:border-red-500":$.id==="KECERMATAN"||$.id==="BUTAWRNA"?ye+=" hover:border-orange-500 dark:hover:border-orange-500":$.id==="UTBK"||$.id==="SKD"||$.id==="TPA"||$.id==="PSIKOTEST"?ye+=" hover:border-emerald-500 dark:hover:border-emerald-500":ye+=" hover:border-indigo-500 dark:hover:border-indigo-500");let ge="bg-indigo-50 dark:bg-slate-700",Pe="text-indigo-600 dark:text-indigo-400",Ne="bg-indigo-50 dark:bg-indigo-900/20";return $.id==="BENCHMARK"?(ge="bg-red-100 dark:bg-red-900/40",Pe="text-red-600 dark:text-red-400",Ne="bg-red-50 dark:bg-red-900/20"):$.id==="KECERMATAN"||$.id==="BUTAWRNA"?(ge="bg-orange-100 dark:bg-orange-900/40",Pe="text-orange-600 dark:text-orange-400",Ne="bg-orange-50 dark:bg-orange-900/20"):($.id==="UTBK"||$.id==="SKD"||$.id==="TPA"||$.id==="PSIKOTEST")&&(ge="bg-emerald-100 dark:bg-emerald-900/40",Pe="text-emerald-600 dark:text-emerald-400",Ne="bg-emerald-50 dark:bg-emerald-900/20"),o.jsxs("button",{onClick:()=>Rs($.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden ${ye}`,children:[o.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110 ${Ne}`}),o.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mb-6 transition-colors relative z-10 ${ge} ${Pe} group-hover:bg-opacity-80`,children:$.id==="GENERAL"?o.jsx(oi,{}):$.id==="SKD"?o.jsx(Bf,{}):$.id==="INTERVIEW"?o.jsx(zf,{}):$.id==="BUTAWRNA"?o.jsx(ql,{}):$.id==="PSIKOTEST"?o.jsx(Ts,{}):$.id==="SKRIPSI"?o.jsx(Vf,{}):$.id==="KECERMATAN"?o.jsx(Io,{}):$.id==="BENCHMARK"?o.jsx(Qn,{}):$.id==="TPA"?o.jsx(Bs,{}):o.jsx(rc,{})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:$.name}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:$.desc})]},$.id)})}),o.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),e("HISTORY")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(Lu,{size:18})," Riwayat"]}),o.jsxs("button",{onClick:Or,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 dark:shadow-none border border-indigo-600 font-bold hover:bg-indigo-700 transition",children:[o.jsx(D8,{size:18})," Lanjutkan TO"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),e("GLOBAL_LEADERBOARD")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(ws,{size:18,className:"text-amber-500"})," Global Rank"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),!(A!=null&&A.uid)||A.isGuest?it("Login diperlukan untuk fitur sosial.","info"):e("SOCIAL_HUB")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx($l,{size:18,className:"text-blue-500"})," Social"]}),o.jsxs("button",{onClick:As,className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${J.theme==="fajmuls"?"bg-white/50 border-rose-200 text-rose-600 hover:bg-rose-50":"bg-rose-50 dark:bg-rose-900/20 border-rose-100 dark:border-rose-900 text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40"}`,children:[o.jsx(A9,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&o.jsx(nG,{category:t,onBack:()=>{Z.play("back"),e("HOME")},onStartSession:Cs,onOpenTOSelection:()=>{Z.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{Z.play("click"),e("TES_KORAN")},onStartTesKecermatan:is,onGeneralInputSubmit:Ba,generalInput:z,setGeneralInput:V,isReadingMaterial:Ee,onResetMaterial:()=>{De(!1),V(null)},onSubtestSelect:le,selectedSubtest:Y,weakTopicsCount:ie.size,loading:Me,skdStream:te,onSkdStreamSelect:F,onHistory:()=>{Z.play("click"),e("HISTORY")},onStartGeneralSession:Vo,onStartSkripsiSession:lc,username:(A==null?void 0:A.username)||"Guest",isDarkMode:J.darkMode,onToggleDarkMode:()=>{D($=>({...$,darkMode:!$.darkMode,theme:$.darkMode?"light":"dark"}))},tpaStream:Q,onTpaStreamSelect:fe,onOpenAcademicHub:()=>{Z.play("click"),e("ACADEMIC_HUB")},onBattle:()=>{!(A!=null&&A.uid)||A.isGuest?it("Login diperlukan untuk Battle Mode.","info"):(Z.play("click"),e("BATTLE"))}}),n==="TO_SELECTION"&&o.jsx(K7,{category:t,skdStream:te||void 0,tpaStream:Q||void 0,availablePackages:di,history:tn,onSelectPackage:cn,onGenerateNew:Vr,onDeletePackage:Br,onImportPackage:Hs,onFixDuplicates:Gr,onFixGaps:zr,onBack:()=>{Z.play("back"),e("DASHBOARD")},showToast:it,confirmEnabled:J.confirmActions,onRefresh:qs,isLoading:hs}),n==="RESUME_LIST"&&o.jsx(tG,{sessions:Vn,onBack:()=>{Z.play("back"),e("HOME")},onResume:Va,onDelete:sa,loading:ui}),n==="ACADEMIC_HUB"&&o.jsx(GB,{history:tn,category:t,onBack:()=>{Z.play("back"),e("DASHBOARD")},onStartSmartReview:Bo}),n==="SOCIAL_HUB"&&A&&o.jsx(zB,{userProfile:A,history:tn,onBack:()=>{Z.play("back"),e("HOME")},onUpdateProfile:ks}),n==="BATTLE"&&A&&o.jsx(FB,{userProfile:A,category:t||"SKD",onBack:()=>{Z.play("back"),e("DASHBOARD")}}),n==="SESSION"&&(t==="SKRIPSI"?o.jsx(QB,{result:Vt,feature:Xe,onBack:()=>{Z.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?o.jsx(WB,{questions:Ze,onComplete:$=>Is($)}):t==="GENERAL"&&At==="SPACED_REPETITION"?o.jsx(XB,{flashcards:tt,onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&At==="MIND_MAP"?o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",o.jsxs("button",{onClick:()=>{Z.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[o.jsx(pt,{size:18})," Kembali"]})," ",o.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",o.jsx(G7,{data:de})," "]}):t==="GENERAL"&&At==="FEYNMAN"?o.jsx(ZB,{topic:(z==null?void 0:z.content)||"",onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&At==="SQ3R"?o.jsx(eG,{topic:(z==null?void 0:z.content)||"",onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):o.jsx(sB,{mode:_e,questions:Ze,drillContent:ci,onComplete:($,ye,ge)=>Is($,ye,ge),isSkdSimulation:_e===Ke.SIMULATION&&t==="SKD",isUtbkSimulation:_e===Ke.SIMULATION&&t==="UTBK",category:t,showToast:it,initialState:kt,userId:A==null?void 0:A.uid,skdStream:te,tpaStream:Q,packageTitle:Gt,onSaveAndExit:()=>e("HOME"),initialFontSize:J.fontSize})),n==="TES_KORAN"&&o.jsx(lB,{onBack:()=>e("DASHBOARD"),onComplete:$=>Is([],$)}),n==="TES_KECERMATAN"&&o.jsx(cB,{initialMode:ue,onBack:()=>e("DASHBOARD"),onComplete:$=>Is([],$)}),n==="BENCHMARK"&&o.jsx(PB,{onBack:()=>e("HOME"),onComplete:$=>Is([],$),username:(A==null?void 0:A.username)||"Guest",history:tn,isGuest:A==null?void 0:A.isGuest,initialMode:Fe||void 0,initialTab:p}),n==="GLOBAL_LEADERBOARD"&&o.jsx(LB,{onBack:()=>{Z.play("back"),e("HOME")},userProfile:A,onOpenHumanBenchmark:()=>{Z.play("click"),s("BENCHMARK"),We(null),f("RANKING"),e("BENCHMARK")}}),n==="RESULTS"&&o.jsx(Y7,{answers:ve,questions:Ze,onHome:()=>{Z.play("back"),e("HOME")},onRetry:()=>{Z.play("click"),Cs(_e)},category:t,details:(Hr=tn[0])==null?void 0:Hr.details}),n==="HISTORY"&&o.jsx(X7,{history:tn,onBack:()=>{Z.play("back"),e("HOME")},onReview:$=>{Z.play("click"),zs($),e("REVIEW")},username:(A==null?void 0:A.username)||"Guest",onExport:as,onImport:Fs,isDarkMode:J.darkMode,onDelete:vn}),n==="REVIEW"&&o.jsx(Z7,{item:on,onBack:()=>{Z.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&o.jsx(xB,{onBack:()=>{Z.play("back"),e("HOME")},onComplete:$=>Is([],$)})]})]})}const CA=document.getElementById("root");if(!CA)throw new Error("Could not find root element to mount to");const iG=g2.createRoot(CA);iG.render(o.jsx(GE.StrictMode,{children:o.jsx(sG,{})}));
