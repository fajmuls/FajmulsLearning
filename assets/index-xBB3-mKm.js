(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function lS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vp={exports:{}},Lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function wk(){if(ub)return Lc;ub=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var f in r)f!=="key"&&(o[f]=r[f])}else o=r;return r=o.ref,{$$typeof:n,type:s,key:u,ref:r!==void 0?r:null,props:o}}return Lc.Fragment=e,Lc.jsx=t,Lc.jsxs=t,Lc}var db;function Nk(){return db||(db=1,vp.exports=wk()),vp.exports}var c=Nk(),bp={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function kk(){if(fb)return et;fb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,C={};function V(H,re,ue){this.props=H,this.context=re,this.refs=C,this.updater=ue||k}V.prototype.isReactComponent={},V.prototype.setState=function(H,re){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,re,"setState")},V.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=V.prototype;function G(H,re,ue){this.props=H,this.context=re,this.refs=C,this.updater=ue||k}var $=G.prototype=new N;$.constructor=G,M($,V.prototype),$.isPureReactComponent=!0;var se=Array.isArray;function Y(){}var D={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(H,re,ue){var ne=ue.ref;return{$$typeof:n,type:H,key:re,ref:ne!==void 0?ne:null,props:ue}}function O(H,re){return R(H.type,re,H.props)}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var re={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ue){return re[ue]})}var j=/\/+/g;function ce(H,re){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):re.toString(36)}function ke(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Y,Y):(H.status="pending",H.then(function(re){H.status==="pending"&&(H.status="fulfilled",H.value=re)},function(re){H.status==="pending"&&(H.status="rejected",H.reason=re)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function K(H,re,ue,ne,te){var xe=typeof H;(xe==="undefined"||xe==="boolean")&&(H=null);var Ce=!1;if(H===null)Ce=!0;else switch(xe){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(H.$$typeof){case n:case e:Ce=!0;break;case v:return Ce=H._init,K(Ce(H._payload),re,ue,ne,te)}}if(Ce)return te=te(H),Ce=ne===""?"."+ce(H,0):ne,se(te)?(ue="",Ce!=null&&(ue=Ce.replace(j,"$&/")+"/"),K(te,re,ue,"",function(Ke){return Ke})):te!=null&&(U(te)&&(te=O(te,ue+(te.key==null||H&&H.key===te.key?"":(""+te.key).replace(j,"$&/")+"/")+Ce)),re.push(te)),1;Ce=0;var ut=ne===""?".":ne+":";if(se(H))for(var qe=0;qe<H.length;qe++)ne=H[qe],xe=ut+ce(ne,qe),Ce+=K(ne,re,ue,xe,te);else if(qe=A(H),typeof qe=="function")for(H=qe.call(H),qe=0;!(ne=H.next()).done;)ne=ne.value,xe=ut+ce(ne,qe++),Ce+=K(ne,re,ue,xe,te);else if(xe==="object"){if(typeof H.then=="function")return K(ke(H),re,ue,ne,te);throw re=String(H),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function fe(H,re,ue){if(H==null)return H;var ne=[],te=0;return K(H,ne,"","",function(xe){return re.call(ue,xe,te++)}),ne}function Se(H){if(H._status===-1){var re=H._result;re=re(),re.then(function(ue){(H._status===0||H._status===-1)&&(H._status=1,H._result=ue)},function(ue){(H._status===0||H._status===-1)&&(H._status=2,H._result=ue)}),H._status===-1&&(H._status=0,H._result=re)}if(H._status===1)return H._result.default;throw H._result}var Oe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},be={map:fe,forEach:function(H,re,ue){fe(H,function(){re.apply(this,arguments)},ue)},count:function(H){var re=0;return fe(H,function(){re++}),re},toArray:function(H){return fe(H,function(re){return re})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return et.Activity=_,et.Children=be,et.Component=V,et.Fragment=t,et.Profiler=r,et.PureComponent=G,et.StrictMode=s,et.Suspense=m,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,et.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},et.cache=function(H){return function(){return H.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(H,re,ue){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ne=M({},H.props),te=H.key;if(re!=null)for(xe in re.key!==void 0&&(te=""+re.key),re)!P.call(re,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&re.ref===void 0||(ne[xe]=re[xe]);var xe=arguments.length-2;if(xe===1)ne.children=ue;else if(1<xe){for(var Ce=Array(xe),ut=0;ut<xe;ut++)Ce[ut]=arguments[ut+2];ne.children=Ce}return R(H.type,te,ne)},et.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},et.createElement=function(H,re,ue){var ne,te={},xe=null;if(re!=null)for(ne in re.key!==void 0&&(xe=""+re.key),re)P.call(re,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(te[ne]=re[ne]);var Ce=arguments.length-2;if(Ce===1)te.children=ue;else if(1<Ce){for(var ut=Array(Ce),qe=0;qe<Ce;qe++)ut[qe]=arguments[qe+2];te.children=ut}if(H&&H.defaultProps)for(ne in Ce=H.defaultProps,Ce)te[ne]===void 0&&(te[ne]=Ce[ne]);return R(H,xe,te)},et.createRef=function(){return{current:null}},et.forwardRef=function(H){return{$$typeof:f,render:H}},et.isValidElement=U,et.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:Se}},et.memo=function(H,re){return{$$typeof:p,type:H,compare:re===void 0?null:re}},et.startTransition=function(H){var re=D.T,ue={};D.T=ue;try{var ne=H(),te=D.S;te!==null&&te(ue,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Y,Oe)}catch(xe){Oe(xe)}finally{re!==null&&ue.types!==null&&(re.types=ue.types),D.T=re}},et.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},et.use=function(H){return D.H.use(H)},et.useActionState=function(H,re,ue){return D.H.useActionState(H,re,ue)},et.useCallback=function(H,re){return D.H.useCallback(H,re)},et.useContext=function(H){return D.H.useContext(H)},et.useDebugValue=function(){},et.useDeferredValue=function(H,re){return D.H.useDeferredValue(H,re)},et.useEffect=function(H,re){return D.H.useEffect(H,re)},et.useEffectEvent=function(H){return D.H.useEffectEvent(H)},et.useId=function(){return D.H.useId()},et.useImperativeHandle=function(H,re,ue){return D.H.useImperativeHandle(H,re,ue)},et.useInsertionEffect=function(H,re){return D.H.useInsertionEffect(H,re)},et.useLayoutEffect=function(H,re){return D.H.useLayoutEffect(H,re)},et.useMemo=function(H,re){return D.H.useMemo(H,re)},et.useOptimistic=function(H,re){return D.H.useOptimistic(H,re)},et.useReducer=function(H,re,ue){return D.H.useReducer(H,re,ue)},et.useRef=function(H){return D.H.useRef(H)},et.useState=function(H){return D.H.useState(H)},et.useSyncExternalStore=function(H,re,ue){return D.H.useSyncExternalStore(H,re,ue)},et.useTransition=function(){return D.H.useTransition()},et.version="19.2.3",et}var hb;function R0(){return hb||(hb=1,bp.exports=kk()),bp.exports}var z=R0();const Ik=lS(z);var _p={exports:{}},Uc={},Tp={exports:{}},Ep={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function Ck(){return mb||(mb=1,(function(n){function e(K,fe){var Se=K.length;K.push(fe);e:for(;0<Se;){var Oe=Se-1>>>1,be=K[Oe];if(0<r(be,fe))K[Oe]=fe,K[Se]=be,Se=Oe;else break e}}function t(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var fe=K[0],Se=K.pop();if(Se!==fe){K[0]=Se;e:for(var Oe=0,be=K.length,H=be>>>1;Oe<H;){var re=2*(Oe+1)-1,ue=K[re],ne=re+1,te=K[ne];if(0>r(ue,Se))ne<be&&0>r(te,ue)?(K[Oe]=te,K[ne]=Se,Oe=ne):(K[Oe]=ue,K[re]=Se,Oe=re);else if(ne<be&&0>r(te,Se))K[Oe]=te,K[ne]=Se,Oe=ne;else break e}}return fe}function r(K,fe){var Se=K.sortIndex-fe.sortIndex;return Se!==0?Se:K.id-fe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],p=[],v=1,_=null,T=3,A=!1,k=!1,M=!1,C=!1,V=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function $(K){for(var fe=t(p);fe!==null;){if(fe.callback===null)s(p);else if(fe.startTime<=K)s(p),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=t(p)}}function se(K){if(M=!1,$(K),!k)if(t(m)!==null)k=!0,Y||(Y=!0,B());else{var fe=t(p);fe!==null&&ke(se,fe.startTime-K)}}var Y=!1,D=-1,P=5,R=-1;function O(){return C?!0:!(n.unstable_now()-R<P)}function U(){if(C=!1,Y){var K=n.unstable_now();R=K;var fe=!0;try{e:{k=!1,M&&(M=!1,N(D),D=-1),A=!0;var Se=T;try{t:{for($(K),_=t(m);_!==null&&!(_.expirationTime>K&&O());){var Oe=_.callback;if(typeof Oe=="function"){_.callback=null,T=_.priorityLevel;var be=Oe(_.expirationTime<=K);if(K=n.unstable_now(),typeof be=="function"){_.callback=be,$(K),fe=!0;break t}_===t(m)&&s(m),$(K)}else s(m);_=t(m)}if(_!==null)fe=!0;else{var H=t(p);H!==null&&ke(se,H.startTime-K),fe=!1}}break e}finally{_=null,T=Se,A=!1}fe=void 0}}finally{fe?B():Y=!1}}}var B;if(typeof G=="function")B=function(){G(U)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ce=j.port2;j.port1.onmessage=U,B=function(){ce.postMessage(null)}}else B=function(){V(U,0)};function ke(K,fe){D=V(function(){K(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(K){switch(T){case 1:case 2:case 3:var fe=3;break;default:fe=T}var Se=T;T=fe;try{return K()}finally{T=Se}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(K,fe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Se=T;T=K;try{return fe()}finally{T=Se}},n.unstable_scheduleCallback=function(K,fe,Se){var Oe=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Oe+Se:Oe):Se=Oe,K){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Se+be,K={id:v++,callback:fe,priorityLevel:K,startTime:Se,expirationTime:be,sortIndex:-1},Se>Oe?(K.sortIndex=Se,e(p,K),t(m)===null&&K===t(p)&&(M?(N(D),D=-1):M=!0,ke(se,Se-Oe))):(K.sortIndex=be,e(m,K),k||A||(k=!0,Y||(Y=!0,B()))),K},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(K){var fe=T;return function(){var Se=T;T=fe;try{return K.apply(this,arguments)}finally{T=Se}}}})(Ep)),Ep}var pb;function Rk(){return pb||(pb=1,Tp.exports=Ck()),Tp.exports}var Sp={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function Mk(){if(gb)return Gn;gb=1;var n=R0();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(m,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:m,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,v)},Gn.flushSync=function(m){var p=u.T,v=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=p,s.p=v,s.d.f()}},Gn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},Gn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Gn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,_=f(v,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(m,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},Gn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=f(v,p.crossOrigin);s.d.L(m,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},Gn.requestFormReset=function(m){s.d.r(m)},Gn.unstable_batchedUpdates=function(m,p){return m(p)},Gn.useFormState=function(m,p,v){return u.H.useFormState(m,p,v)},Gn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Gn.version="19.2.3",Gn}var xb;function Dk(){if(xb)return Sp.exports;xb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sp.exports=Mk(),Sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function Pk(){if(yb)return Uc;yb=1;var n=Rk(),e=R0(),t=Dk();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(s(188))}function p(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(s(188));return a!==i?null:i}for(var l=i,d=a;;){var y=l.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===l)return m(y),i;if(b===d)return m(y),a;b=b.sibling}throw Error(s(188))}if(l.return!==d.return)l=y,d=b;else{for(var S=!1,I=y.child;I;){if(I===l){S=!0,l=y,d=b;break}if(I===d){S=!0,d=y,l=b;break}I=I.sibling}if(!S){for(I=b.child;I;){if(I===l){S=!0,l=b,d=y;break}if(I===d){S=!0,d=b,l=y;break}I=I.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),G=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var j=Symbol.for("react.client.reference");function ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===j?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case V:return"Profiler";case C:return"StrictMode";case se:return"Suspense";case Y:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case G:return i.displayName||"Context";case N:return(i._context.displayName||"Context")+".Consumer";case $:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return a=i.displayName||null,a!==null?a:ce(i.type)||"Memo";case P:a=i._payload,i=i._init;try{return ce(i(a))}catch{}}return null}var ke=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Oe=[],be=-1;function H(i){return{current:i}}function re(i){0>be||(i.current=Oe[be],Oe[be]=null,be--)}function ue(i,a){be++,Oe[be]=i.current,i.current=a}var ne=H(null),te=H(null),xe=H(null),Ce=H(null);function ut(i,a){switch(ue(xe,a),ue(te,i),ue(ne,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Dv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Dv(a),i=Pv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(ne),ue(ne,i)}function qe(){re(ne),re(te),re(xe)}function Ke(i){i.memoizedState!==null&&ue(Ce,i);var a=ne.current,l=Pv(a,i.type);a!==l&&(ue(te,i),ue(ne,l))}function Ct(i){te.current===i&&(re(ne),re(te)),Ce.current===i&&(re(Ce),Rc._currentValue=Se)}var ot,lt;function nt(i){if(ot===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);ot=a&&a[1]||"",lt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+i+lt}var $e=!1;function Ot(i,a){if(!i||$e)return"";$e=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ae){var ee=ae}Reflect.construct(i,[],me)}else{try{me.call()}catch(ae){ee=ae}i.call(me.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(me=i())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],I=b[1];if(S&&I){var F=S.split(`
`),Z=I.split(`
`);for(y=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Z.length&&!Z[y].includes("DetermineComponentFrameRoot");)y++;if(d===F.length||y===Z.length)for(d=F.length-1,y=Z.length-1;1<=d&&0<=y&&F[d]!==Z[y];)y--;for(;1<=d&&0<=y;d--,y--)if(F[d]!==Z[y]){if(d!==1||y!==1)do if(d--,y--,0>y||F[d]!==Z[y]){var le=`
`+F[d].replace(" at new "," at ");return i.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",i.displayName)),le}while(1<=d&&0<=y);break}}}finally{$e=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?nt(l):""}function un(i,a){switch(i.tag){case 26:case 27:case 5:return nt(i.type);case 16:return nt("Lazy");case 13:return i.child!==a&&a!==null?nt("Suspense Fallback"):nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return Ot(i.type,!1);case 11:return Ot(i.type.render,!1);case 1:return Ot(i.type,!0);case 31:return nt("Activity");default:return""}}function es(i){try{var a="",l=null;do a+=un(i,l),l=i,i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ye=Object.prototype.hasOwnProperty,ge=n.unstable_scheduleCallback,Ee=n.unstable_cancelCallback,We=n.unstable_shouldYield,wt=n.unstable_requestPaint,ht=n.unstable_now,nn=n.unstable_getCurrentPriorityLevel,ks=n.unstable_ImmediatePriority,us=n.unstable_UserBlockingPriority,$n=n.unstable_NormalPriority,yi=n.unstable_LowPriority,Xs=n.unstable_IdlePriority,ds=n.log,Wt=n.unstable_setDisableYieldValue,dn=null,Rt=null;function Xt(i){if(typeof ds=="function"&&Wt(i),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(dn,i)}catch{}}var Yt=Math.clz32?Math.clz32:wa,yo=Math.log,vi=Math.LN2;function wa(i){return i>>>=0,i===0?32:31-(yo(i)/vi|0)|0}var st=256,bi=262144,Bt=4194304;function fs(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Is(i,a,l){var d=i.pendingLanes;if(d===0)return 0;var y=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var I=d&134217727;return I!==0?(d=I&~b,d!==0?y=fs(d):(S&=I,S!==0?y=fs(S):l||(l=I&~i,l!==0&&(y=fs(l))))):(I=d&~b,I!==0?y=fs(I):S!==0?y=fs(S):l||(l=d&~i,l!==0&&(y=fs(l)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,l=a&-a,b>=l||b===32&&(l&4194048)!==0)?a:y}function hs(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function zl(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Na(){var i=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),i}function Cs(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Fi(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Fl(i,a,l,d,y,b){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var I=i.entanglements,F=i.expirationTimes,Z=i.hiddenUpdates;for(l=S&~l;0<l;){var le=31-Yt(l),me=1<<le;I[le]=0,F[le]=-1;var ee=Z[le];if(ee!==null)for(Z[le]=null,le=0;le<ee.length;le++){var ae=ee[le];ae!==null&&(ae.lane&=-536870913)}l&=~me}d!==0&&qi(i,d,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~a))}function qi(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Yt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function ka(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var d=31-Yt(l),y=1<<d;y&a|i[d]&a&&(i[d]|=a),l&=~y}}function Ia(i,a){var l=a&-a;return l=(l&42)!==0?1:Ki(l),(l&(i.suspendedLanes|a))!==0?0:l}function Ki(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Rs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vo(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:sb(i.type))}function ms(i,a){var l=fe.p;try{return fe.p=i,a()}finally{fe.p=l}}var ps=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ps,fn="__reactProps$"+ps,gs="__reactContainer$"+ps,xs="__reactEvents$"+ps,bo="__reactListeners$"+ps,Ca="__reactHandles$"+ps,_o="__reactResources$"+ps,Ms="__reactMarker$"+ps;function wr(i){delete i[Zt],delete i[fn],delete i[xs],delete i[bo],delete i[Ca]}function Ds(i){var a=i[Zt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[gs]||l[Zt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Bv(i);i!==null;){if(l=i[Zt])return l;i=Bv(i)}return a}i=l,l=i.parentNode}return null}function ts(i){if(i=i[Zt]||i[gs]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Yn(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function Ps(i){var a=i[_o];return a||(a=i[_o]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Jt(i){i[Ms]=!0}var Q=new Set,ve={};function Ie(i,a){Ue(i,a),Ue(i+"Capture",a)}function Ue(i,a){for(ve[i]=a,i=0;i<a.length;i++)Q.add(a[i])}var Le=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ye={},De={};function ze(i){return ye.call(De,i)?!0:ye.call(Ye,i)?!1:Le.test(i)?De[i]=!0:(Ye[i]=!0,!1)}function _t(i,a,l){if(ze(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Xe(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function ct(i,a,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+d)}}function Tt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function hn(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _n(i,a,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,b.call(this,S)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ze(i){if(!i._valueTracker){var a=hn(i)?"checked":"value";i._valueTracker=_n(i,a,""+i[a])}}function An(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return i&&(d=hn(i)?i.checked?"true":"false":i.value),i=d,i!==l?(a.setValue(i),!0):!1}function On(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Zs=/[\n"\\]/g;function Tn(i){return i.replace(Zs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ls(i,a,l,d,y,b,S,I){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),a!=null?S==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Tt(a)):i.value!==""+Tt(a)&&(i.value=""+Tt(a)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),a!=null?Nr(i,S,Tt(a)):l!=null?Nr(i,S,Tt(l)):d!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Tt(I):i.removeAttribute("name")}function _i(i,a,l,d,y,b,S,I){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){Ze(i);return}l=l!=null?""+Tt(l):"",a=a!=null?""+Tt(a):l,I||a===i.value||(i.value=a),i.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=I?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Ze(i)}function Nr(i,a,l){a==="number"&&On(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Ti(i,a,l,d){if(i=i.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<i.length;l++)y=a.hasOwnProperty("$"+i[l].value),i[l].selected!==y&&(i[l].selected=y),y&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Tt(l),a=null,y=0;y<i.length;y++){if(i[y].value===l){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function _u(i,a,l){if(a!=null&&(a=""+Tt(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Tt(l):""}function kr(i,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(s(92));if(ke(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=Tt(a),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),Ze(i)}function ns(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ql(i,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,l):typeof l!="number"||l===0||Tu.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Kl(i,a,l){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&l[y]!==d&&ql(i,y,d)}else for(var b in a)a.hasOwnProperty(b)&&ql(i,b,a[b])}function To(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eo(i){return Ir.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ei(){}var $l=null;function Us(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Cr=null,Ei=null;function Ra(i){var a=ts(i);if(a&&(i=a.stateNode)){var l=i[fn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Ls(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==i&&d.form===i.form){var y=d[fn]||null;if(!y)throw Error(s(90));Ls(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===i.form&&An(d)}break e;case"textarea":_u(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Ti(i,!!l.multiple,a,!1)}}}var So=!1;function Rr(i,a,l){if(So)return i(a,l);So=!0;try{var d=i(a);return d}finally{if(So=!1,(Cr!==null||Ei!==null)&&(gd(),Cr&&(a=Cr,i=Ei,Ei=Cr=null,Ra(a),i)))for(a=0;a<i.length;a++)Ra(i[a])}}function ti(i,a){var l=i.stateNode;if(l===null)return null;var d=l[fn]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,a,typeof l));return l}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=!1;if(js)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{Ma=!1}var Si=null,Yl=null,Da=null;function Jl(){if(Da)return Da;var i,a=Yl,l=a.length,d,y="value"in Si?Si.value:Si.textContent,b=y.length;for(i=0;i<l&&a[i]===y[i];i++);var S=l-i;for(d=1;d<=S&&a[l-d]===y[b-d];d++);return Da=y.slice(i,1<d?1-d:void 0)}function Pa(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function ni(){return!1}function In(i){function a(l,d,y,b,S){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(l=i[I],this[I]=l?l(b):b[I]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?$i:ni,this.isPropagationStopped=ni,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),a}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=In(Yi),Mr=_({},Yi,{view:0,detail:0}),Ql=In(Mr),Dr,Ao,wi,wo=_({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==wi&&(wi&&i.type==="mousemove"?(Dr=i.screenX-wi.screenX,Ao=i.screenY-wi.screenY):Ao=Dr=0,wi=i),Dr)},movementY:function(i){return"movementY"in i?i.movementY:Ao}}),Wl=In(wo),La=_({},wo,{dataTransfer:0}),Su=In(La),Au=_({},Mr,{relatedTarget:0}),Ua=In(Au),Xl=_({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),wu=In(Xl),No=_({},Yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Nu=In(No),ku=_({},Yi,{data:0}),Ni=In(ku),Iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Ru[i])?!!a[i]:!1}function Pr(){return Mu}var Jn=_({},Mr,{key:function(i){if(i.key){var a=Iu[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Pa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Cu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(i){return i.type==="keypress"?Pa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Pa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Du=In(Jn),Pu=_({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=In(Pu),x=_({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),E=In(x),w=_({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),L=In(w),W=_({},wo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=In(W),_e=_({},Yi,{newState:0,oldState:0}),it=In(_e),sn=[9,13,27,32],Nt=js&&"CompositionEvent"in window,Kt=null;js&&"documentMode"in document&&(Kt=document.documentMode);var Vs=js&&"TextEvent"in window&&!Kt,ki=js&&(!Nt||Kt&&8<Kt&&11>=Kt),si=" ",ii=!1;function ja(i,a){switch(i){case"keyup":return sn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ko(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Io=!1;function QN(i,a){switch(i){case"compositionend":return ko(a);case"keypress":return a.which!==32?null:(ii=!0,si);case"textInput":return i=a.data,i===si&&ii?null:i;default:return null}}function WN(i,a){if(Io)return i==="compositionend"||!Nt&&ja(i,a)?(i=Jl(),Da=Yl=Si=null,Io=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ki&&a.locale!=="ko"?null:a.data;default:return null}}var XN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!XN[i.type]:a==="textarea"}function qg(i,a,l,d){Cr?Ei?Ei.push(d):Ei=[d]:Cr=d,a=Ed(a,"onChange"),0<a.length&&(l=new Ai("onChange","change",null,l,d),i.push({event:l,listeners:a}))}var Zl=null,ec=null;function ZN(i){Nv(i,0)}function Lu(i){var a=Yn(i);if(An(a))return i}function Kg(i,a){if(i==="change")return a}var $g=!1;if(js){var wh;if(js){var Nh="oninput"in document;if(!Nh){var Yg=document.createElement("div");Yg.setAttribute("oninput","return;"),Nh=typeof Yg.oninput=="function"}wh=Nh}else wh=!1;$g=wh&&(!document.documentMode||9<document.documentMode)}function Jg(){Zl&&(Zl.detachEvent("onpropertychange",Qg),ec=Zl=null)}function Qg(i){if(i.propertyName==="value"&&Lu(ec)){var a=[];qg(a,ec,i,Us(i)),Rr(ZN,a)}}function e1(i,a,l){i==="focusin"?(Jg(),Zl=a,ec=l,Zl.attachEvent("onpropertychange",Qg)):i==="focusout"&&Jg()}function t1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Lu(ec)}function n1(i,a){if(i==="click")return Lu(a)}function s1(i,a){if(i==="input"||i==="change")return Lu(a)}function i1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ys=typeof Object.is=="function"?Object.is:i1;function tc(i,a){if(ys(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!ye.call(a,y)||!ys(i[y],a[y]))return!1}return!0}function Wg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Xg(i,a){var l=Wg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=a&&d>=a)return{node:l,offset:a-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Wg(l)}}function Zg(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Zg(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function ex(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=On(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=On(i.document)}return a}function kh(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var r1=js&&"documentMode"in document&&11>=document.documentMode,Co=null,Ih=null,nc=null,Ch=!1;function tx(i,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ch||Co==null||Co!==On(d)||(d=Co,"selectionStart"in d&&kh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),nc&&tc(nc,d)||(nc=d,d=Ed(Ih,"onSelect"),0<d.length&&(a=new Ai("onSelect","select",null,a,l),i.push({event:a,listeners:d}),a.target=Co)))}function Va(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Ro={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionrun:Va("Transition","TransitionRun"),transitionstart:Va("Transition","TransitionStart"),transitioncancel:Va("Transition","TransitionCancel"),transitionend:Va("Transition","TransitionEnd")},Rh={},nx={};js&&(nx=document.createElement("div").style,"AnimationEvent"in window||(delete Ro.animationend.animation,delete Ro.animationiteration.animation,delete Ro.animationstart.animation),"TransitionEvent"in window||delete Ro.transitionend.transition);function Oa(i){if(Rh[i])return Rh[i];if(!Ro[i])return i;var a=Ro[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in nx)return Rh[i]=a[l];return i}var sx=Oa("animationend"),ix=Oa("animationiteration"),rx=Oa("animationstart"),a1=Oa("transitionrun"),o1=Oa("transitionstart"),l1=Oa("transitioncancel"),ax=Oa("transitionend"),ox=new Map,Mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mh.push("scrollEnd");function ri(i,a){ox.set(i,a),Ie(a,[i])}var Uu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Os=[],Mo=0,Dh=0;function ju(){for(var i=Mo,a=Dh=Mo=0;a<i;){var l=Os[a];Os[a++]=null;var d=Os[a];Os[a++]=null;var y=Os[a];Os[a++]=null;var b=Os[a];if(Os[a++]=null,d!==null&&y!==null){var S=d.pending;S===null?y.next=y:(y.next=S.next,S.next=y),d.pending=y}b!==0&&lx(l,y,b)}}function Vu(i,a,l,d){Os[Mo++]=i,Os[Mo++]=a,Os[Mo++]=l,Os[Mo++]=d,Dh|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Ph(i,a,l,d){return Vu(i,a,l,d),Ou(i)}function Ga(i,a){return Vu(i,null,null,a),Ou(i)}function lx(i,a,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var y=!1,b=i.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&a!==null&&(y=31-Yt(l),i=b.hiddenUpdates,d=i[y],d===null?i[y]=[a]:d.push(a),a.lane=l|536870912),b):null}function Ou(i){if(50<Sc)throw Sc=0,zm=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Do={};function c1(i,a,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(i,a,l,d){return new c1(i,a,l,d)}function Lh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qi(i,a){var l=i.alternate;return l===null?(l=vs(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function cx(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Gu(i,a,l,d,y,b){var S=0;if(d=i,typeof i=="function")Lh(i)&&(S=1);else if(typeof i=="string")S=mk(i,l,ne.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=vs(31,l,a,y),i.elementType=R,i.lanes=b,i;case M:return Ba(l.children,y,b,a);case C:S=8,y|=24;break;case V:return i=vs(12,l,a,y|2),i.elementType=V,i.lanes=b,i;case se:return i=vs(13,l,a,y),i.elementType=se,i.lanes=b,i;case Y:return i=vs(19,l,a,y),i.elementType=Y,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:S=10;break e;case N:S=9;break e;case $:S=11;break e;case D:S=14;break e;case P:S=16,d=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),d=null}return a=vs(S,l,a,y),a.elementType=i,a.type=d,a.lanes=b,a}function Ba(i,a,l,d){return i=vs(7,i,d,a),i.lanes=l,i}function Uh(i,a,l){return i=vs(6,i,null,a),i.lanes=l,i}function ux(i){var a=vs(18,null,null,0);return a.stateNode=i,a}function jh(i,a,l){return a=vs(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var dx=new WeakMap;function Gs(i,a){if(typeof i=="object"&&i!==null){var l=dx.get(i);return l!==void 0?l:(a={value:i,source:a,stack:es(a)},dx.set(i,a),a)}return{value:i,source:a,stack:es(a)}}var Po=[],Lo=0,Bu=null,sc=0,Bs=[],Hs=0,Lr=null,Ii=1,Ci="";function Wi(i,a){Po[Lo++]=sc,Po[Lo++]=Bu,Bu=i,sc=a}function fx(i,a,l){Bs[Hs++]=Ii,Bs[Hs++]=Ci,Bs[Hs++]=Lr,Lr=i;var d=Ii;i=Ci;var y=32-Yt(d)-1;d&=~(1<<y),l+=1;var b=32-Yt(a)+y;if(30<b){var S=y-y%5;b=(d&(1<<S)-1).toString(32),d>>=S,y-=S,Ii=1<<32-Yt(a)+y|l<<y|d,Ci=b+i}else Ii=1<<b|l<<y|d,Ci=i}function Vh(i){i.return!==null&&(Wi(i,1),fx(i,1,0))}function Oh(i){for(;i===Bu;)Bu=Po[--Lo],Po[Lo]=null,sc=Po[--Lo],Po[Lo]=null;for(;i===Lr;)Lr=Bs[--Hs],Bs[Hs]=null,Ci=Bs[--Hs],Bs[Hs]=null,Ii=Bs[--Hs],Bs[Hs]=null}function hx(i,a){Bs[Hs++]=Ii,Bs[Hs++]=Ci,Bs[Hs++]=Lr,Ii=a.id,Ci=a.overflow,Lr=i}var Cn=null,zt=null,vt=!1,Ur=null,zs=!1,Gh=Error(s(519));function jr(i){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ic(Gs(a,i)),Gh}function mx(i){var a=i.stateNode,l=i.type,d=i.memoizedProps;switch(a[Zt]=i,a[fn]=d,l){case"dialog":ft("cancel",a),ft("close",a);break;case"iframe":case"object":case"embed":ft("load",a);break;case"video":case"audio":for(l=0;l<wc.length;l++)ft(wc[l],a);break;case"source":ft("error",a);break;case"img":case"image":case"link":ft("error",a),ft("load",a);break;case"details":ft("toggle",a);break;case"input":ft("invalid",a),_i(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":ft("invalid",a);break;case"textarea":ft("invalid",a),kr(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||Rv(a.textContent,l)?(d.popover!=null&&(ft("beforetoggle",a),ft("toggle",a)),d.onScroll!=null&&ft("scroll",a),d.onScrollEnd!=null&&ft("scrollend",a),d.onClick!=null&&(a.onclick=ei),a=!0):a=!1,a||jr(i,!0)}function px(i){for(Cn=i.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:Cn=Cn.return}}function Uo(i){if(i!==Cn)return!1;if(!vt)return px(i),vt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||ip(i.type,i.memoizedProps)),l=!l),l&&zt&&jr(i),px(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));zt=Gv(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));zt=Gv(i)}else a===27?(a=zt,Wr(i.type)?(i=cp,cp=null,zt=i):zt=a):zt=Cn?qs(i.stateNode.nextSibling):null;return!0}function Ha(){zt=Cn=null,vt=!1}function Bh(){var i=Ur;return i!==null&&(as===null?as=i:as.push.apply(as,i),Ur=null),i}function ic(i){Ur===null?Ur=[i]:Ur.push(i)}var Hh=H(null),za=null,Xi=null;function Vr(i,a,l){ue(Hh,a._currentValue),a._currentValue=l}function Zi(i){i._currentValue=Hh.current,re(Hh)}function zh(i,a,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===l)break;i=i.return}}function Fh(i,a,l,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var S=y.child;b=b.firstContext;e:for(;b!==null;){var I=b;b=y;for(var F=0;F<a.length;F++)if(I.context===a[F]){b.lanes|=l,I=b.alternate,I!==null&&(I.lanes|=l),zh(b.return,l,i),d||(S=null);break e}b=I.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(s(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),zh(S,l,i),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function jo(i,a,l,d){i=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var I=y.type;ys(y.pendingProps.value,S.value)||(i!==null?i.push(I):i=[I])}}else if(y===Ce.current){if(S=y.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Rc):i=[Rc])}y=y.return}i!==null&&Fh(a,i,l,d),a.flags|=262144}function Hu(i){for(i=i.firstContext;i!==null;){if(!ys(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fa(i){za=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Rn(i){return gx(za,i)}function zu(i,a){return za===null&&Fa(i),gx(i,a)}function gx(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xi===null){if(i===null)throw Error(s(308));Xi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xi=Xi.next=a;return l}var u1=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},d1=n.unstable_scheduleCallback,f1=n.unstable_NormalPriority,mn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qh(){return{controller:new u1,data:new Map,refCount:0}}function rc(i){i.refCount--,i.refCount===0&&d1(f1,function(){i.controller.abort()})}var ac=null,Kh=0,Vo=0,Oo=null;function h1(i,a){if(ac===null){var l=ac=[];Kh=0,Vo=Jm(),Oo={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Kh++,a.then(xx,xx),a}function xx(){if(--Kh===0&&ac!==null){Oo!==null&&(Oo.status="fulfilled");var i=ac;ac=null,Vo=0,Oo=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function m1(i,a){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<l.length;y++)(0,l[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var yx=K.S;K.S=function(i,a){tv=ht(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&h1(i,a),yx!==null&&yx(i,a)};var qa=H(null);function $h(){var i=qa.current;return i!==null?i:Gt.pooledCache}function Fu(i,a){a===null?ue(qa,qa.current):ue(qa,a.pool)}function vx(){var i=$h();return i===null?null:{parent:mn._currentValue,pool:i}}var Go=Error(s(460)),Yh=Error(s(474)),qu=Error(s(542)),Ku={then:function(){}};function bx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function _x(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(ei,ei),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ex(i),i;default:if(typeof a.status=="string")a.then(ei,ei);else{if(i=Gt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ex(i),i}throw $a=a,Go}}function Ka(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?($a=l,Go):l}}var $a=null;function Tx(){if($a===null)throw Error(s(459));var i=$a;return $a=null,i}function Ex(i){if(i===Go||i===qu)throw Error(s(483))}var Bo=null,oc=0;function $u(i){var a=oc;return oc+=1,Bo===null&&(Bo=[]),_x(Bo,i,a)}function lc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Yu(i,a){throw a.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Sx(i){function a(J,q){if(i){var X=J.deletions;X===null?(J.deletions=[q],J.flags|=16):X.push(q)}}function l(J,q){if(!i)return null;for(;q!==null;)a(J,q),q=q.sibling;return null}function d(J){for(var q=new Map;J!==null;)J.key!==null?q.set(J.key,J):q.set(J.index,J),J=J.sibling;return q}function y(J,q){return J=Qi(J,q),J.index=0,J.sibling=null,J}function b(J,q,X){return J.index=X,i?(X=J.alternate,X!==null?(X=X.index,X<q?(J.flags|=67108866,q):X):(J.flags|=67108866,q)):(J.flags|=1048576,q)}function S(J){return i&&J.alternate===null&&(J.flags|=67108866),J}function I(J,q,X,de){return q===null||q.tag!==6?(q=Uh(X,J.mode,de),q.return=J,q):(q=y(q,X),q.return=J,q)}function F(J,q,X,de){var je=X.type;return je===M?le(J,q,X.props.children,de,X.key):q!==null&&(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===P&&Ka(je)===q.type)?(q=y(q,X.props),lc(q,X),q.return=J,q):(q=Gu(X.type,X.key,X.props,null,J.mode,de),lc(q,X),q.return=J,q)}function Z(J,q,X,de){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=jh(X,J.mode,de),q.return=J,q):(q=y(q,X.children||[]),q.return=J,q)}function le(J,q,X,de,je){return q===null||q.tag!==7?(q=Ba(X,J.mode,de,je),q.return=J,q):(q=y(q,X),q.return=J,q)}function me(J,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Uh(""+q,J.mode,X),q.return=J,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return X=Gu(q.type,q.key,q.props,null,J.mode,X),lc(X,q),X.return=J,X;case k:return q=jh(q,J.mode,X),q.return=J,q;case P:return q=Ka(q),me(J,q,X)}if(ke(q)||B(q))return q=Ba(q,J.mode,X,null),q.return=J,q;if(typeof q.then=="function")return me(J,$u(q),X);if(q.$$typeof===G)return me(J,zu(J,q),X);Yu(J,q)}return null}function ee(J,q,X,de){var je=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return je!==null?null:I(J,q,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return X.key===je?F(J,q,X,de):null;case k:return X.key===je?Z(J,q,X,de):null;case P:return X=Ka(X),ee(J,q,X,de)}if(ke(X)||B(X))return je!==null?null:le(J,q,X,de,null);if(typeof X.then=="function")return ee(J,q,$u(X),de);if(X.$$typeof===G)return ee(J,q,zu(J,X),de);Yu(J,X)}return null}function ae(J,q,X,de,je){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return J=J.get(X)||null,I(q,J,""+de,je);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case A:return J=J.get(de.key===null?X:de.key)||null,F(q,J,de,je);case k:return J=J.get(de.key===null?X:de.key)||null,Z(q,J,de,je);case P:return de=Ka(de),ae(J,q,X,de,je)}if(ke(de)||B(de))return J=J.get(X)||null,le(q,J,de,je,null);if(typeof de.then=="function")return ae(J,q,X,$u(de),je);if(de.$$typeof===G)return ae(J,q,X,zu(q,de),je);Yu(q,de)}return null}function Me(J,q,X,de){for(var je=null,Et=null,Pe=q,at=q=0,pt=null;Pe!==null&&at<X.length;at++){Pe.index>at?(pt=Pe,Pe=null):pt=Pe.sibling;var St=ee(J,Pe,X[at],de);if(St===null){Pe===null&&(Pe=pt);break}i&&Pe&&St.alternate===null&&a(J,Pe),q=b(St,q,at),Et===null?je=St:Et.sibling=St,Et=St,Pe=pt}if(at===X.length)return l(J,Pe),vt&&Wi(J,at),je;if(Pe===null){for(;at<X.length;at++)Pe=me(J,X[at],de),Pe!==null&&(q=b(Pe,q,at),Et===null?je=Pe:Et.sibling=Pe,Et=Pe);return vt&&Wi(J,at),je}for(Pe=d(Pe);at<X.length;at++)pt=ae(Pe,J,at,X[at],de),pt!==null&&(i&&pt.alternate!==null&&Pe.delete(pt.key===null?at:pt.key),q=b(pt,q,at),Et===null?je=pt:Et.sibling=pt,Et=pt);return i&&Pe.forEach(function(na){return a(J,na)}),vt&&Wi(J,at),je}function Be(J,q,X,de){if(X==null)throw Error(s(151));for(var je=null,Et=null,Pe=q,at=q=0,pt=null,St=X.next();Pe!==null&&!St.done;at++,St=X.next()){Pe.index>at?(pt=Pe,Pe=null):pt=Pe.sibling;var na=ee(J,Pe,St.value,de);if(na===null){Pe===null&&(Pe=pt);break}i&&Pe&&na.alternate===null&&a(J,Pe),q=b(na,q,at),Et===null?je=na:Et.sibling=na,Et=na,Pe=pt}if(St.done)return l(J,Pe),vt&&Wi(J,at),je;if(Pe===null){for(;!St.done;at++,St=X.next())St=me(J,St.value,de),St!==null&&(q=b(St,q,at),Et===null?je=St:Et.sibling=St,Et=St);return vt&&Wi(J,at),je}for(Pe=d(Pe);!St.done;at++,St=X.next())St=ae(Pe,J,at,St.value,de),St!==null&&(i&&St.alternate!==null&&Pe.delete(St.key===null?at:St.key),q=b(St,q,at),Et===null?je=St:Et.sibling=St,Et=St);return i&&Pe.forEach(function(Ak){return a(J,Ak)}),vt&&Wi(J,at),je}function Vt(J,q,X,de){if(typeof X=="object"&&X!==null&&X.type===M&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case A:e:{for(var je=X.key;q!==null;){if(q.key===je){if(je=X.type,je===M){if(q.tag===7){l(J,q.sibling),de=y(q,X.props.children),de.return=J,J=de;break e}}else if(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===P&&Ka(je)===q.type){l(J,q.sibling),de=y(q,X.props),lc(de,X),de.return=J,J=de;break e}l(J,q);break}else a(J,q);q=q.sibling}X.type===M?(de=Ba(X.props.children,J.mode,de,X.key),de.return=J,J=de):(de=Gu(X.type,X.key,X.props,null,J.mode,de),lc(de,X),de.return=J,J=de)}return S(J);case k:e:{for(je=X.key;q!==null;){if(q.key===je)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){l(J,q.sibling),de=y(q,X.children||[]),de.return=J,J=de;break e}else{l(J,q);break}else a(J,q);q=q.sibling}de=jh(X,J.mode,de),de.return=J,J=de}return S(J);case P:return X=Ka(X),Vt(J,q,X,de)}if(ke(X))return Me(J,q,X,de);if(B(X)){if(je=B(X),typeof je!="function")throw Error(s(150));return X=je.call(X),Be(J,q,X,de)}if(typeof X.then=="function")return Vt(J,q,$u(X),de);if(X.$$typeof===G)return Vt(J,q,zu(J,X),de);Yu(J,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(l(J,q.sibling),de=y(q,X),de.return=J,J=de):(l(J,q),de=Uh(X,J.mode,de),de.return=J,J=de),S(J)):l(J,q)}return function(J,q,X,de){try{oc=0;var je=Vt(J,q,X,de);return Bo=null,je}catch(Pe){if(Pe===Go||Pe===qu)throw Pe;var Et=vs(29,Pe,null,J.mode);return Et.lanes=de,Et.return=J,Et}finally{}}}var Ya=Sx(!0),Ax=Sx(!1),Or=!1;function Jh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Gr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Br(i,a,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(kt&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=Ou(i),lx(i,null,l),a}return Vu(i,d,a,l),Ou(i)}function cc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,ka(i,l)}}function Wh(i,a){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?y=b=S:b=b.next=S,l=l.next}while(l!==null);b===null?y=b=a:b=b.next=a}else y=b=a;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Xh=!1;function uc(){if(Xh){var i=Oo;if(i!==null)throw i}}function dc(i,a,l,d){Xh=!1;var y=i.updateQueue;Or=!1;var b=y.firstBaseUpdate,S=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var F=I,Z=F.next;F.next=null,S===null?b=Z:S.next=Z,S=F;var le=i.alternate;le!==null&&(le=le.updateQueue,I=le.lastBaseUpdate,I!==S&&(I===null?le.firstBaseUpdate=Z:I.next=Z,le.lastBaseUpdate=F))}if(b!==null){var me=y.baseState;S=0,le=Z=F=null,I=b;do{var ee=I.lane&-536870913,ae=ee!==I.lane;if(ae?(mt&ee)===ee:(d&ee)===ee){ee!==0&&ee===Vo&&(Xh=!0),le!==null&&(le=le.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Me=i,Be=I;ee=a;var Vt=l;switch(Be.tag){case 1:if(Me=Be.payload,typeof Me=="function"){me=Me.call(Vt,me,ee);break e}me=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Be.payload,ee=typeof Me=="function"?Me.call(Vt,me,ee):Me,ee==null)break e;me=_({},me,ee);break e;case 2:Or=!0}}ee=I.callback,ee!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:I.tag,payload:I.payload,callback:I.callback,next:null},le===null?(Z=le=ae,F=me):le=le.next=ae,S|=ee;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;ae=I,I=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);le===null&&(F=me),y.baseState=F,y.firstBaseUpdate=Z,y.lastBaseUpdate=le,b===null&&(y.shared.lanes=0),Kr|=S,i.lanes=S,i.memoizedState=me}}function wx(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function Nx(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)wx(l[i],a)}var Ho=H(null),Ju=H(0);function kx(i,a){i=lr,ue(Ju,i),ue(Ho,a),lr=i|a.baseLanes}function Zh(){ue(Ju,lr),ue(Ho,Ho.current)}function em(){lr=Ju.current,re(Ho),re(Ju)}var bs=H(null),Fs=null;function Hr(i){var a=i.alternate;ue(rn,rn.current&1),ue(bs,i),Fs===null&&(a===null||Ho.current!==null||a.memoizedState!==null)&&(Fs=i)}function tm(i){ue(rn,rn.current),ue(bs,i),Fs===null&&(Fs=i)}function Ix(i){i.tag===22?(ue(rn,rn.current),ue(bs,i),Fs===null&&(Fs=i)):zr()}function zr(){ue(rn,rn.current),ue(bs,bs.current)}function _s(i){re(bs),Fs===i&&(Fs=null),re(rn)}var rn=H(0);function Qu(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||op(l)||lp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var er=0,rt=null,Ut=null,pn=null,Wu=!1,zo=!1,Ja=!1,Xu=0,fc=0,Fo=null,p1=0;function en(){throw Error(s(321))}function nm(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ys(i[l],a[l]))return!1;return!0}function sm(i,a,l,d,y,b){return er=b,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,K.H=i===null||i.memoizedState===null?fy:ym,Ja=!1,b=l(d,y),Ja=!1,zo&&(b=Rx(a,l,d,y)),Cx(i),b}function Cx(i){K.H=pc;var a=Ut!==null&&Ut.next!==null;if(er=0,pn=Ut=rt=null,Wu=!1,fc=0,Fo=null,a)throw Error(s(300));i===null||gn||(i=i.dependencies,i!==null&&Hu(i)&&(gn=!0))}function Rx(i,a,l,d){rt=i;var y=0;do{if(zo&&(Fo=null),fc=0,zo=!1,25<=y)throw Error(s(301));if(y+=1,pn=Ut=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}K.H=hy,b=a(l,d)}while(zo);return b}function g1(){var i=K.H,a=i.useState()[0];return a=typeof a.then=="function"?hc(a):a,i=i.useState()[0],(Ut!==null?Ut.memoizedState:null)!==i&&(rt.flags|=1024),a}function im(){var i=Xu!==0;return Xu=0,i}function rm(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function am(i){if(Wu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Wu=!1}er=0,pn=Ut=rt=null,zo=!1,fc=Xu=0,Fo=null}function Qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?rt.memoizedState=pn=i:pn=pn.next=i,pn}function an(){if(Ut===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=Ut.next;var a=pn===null?rt.memoizedState:pn.next;if(a!==null)pn=a,Ut=i;else{if(i===null)throw rt.alternate===null?Error(s(467)):Error(s(310));Ut=i,i={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},pn===null?rt.memoizedState=pn=i:pn=pn.next=i}return pn}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(i){var a=fc;return fc+=1,Fo===null&&(Fo=[]),i=_x(Fo,i,a),a=rt,(pn===null?a.memoizedState:pn.next)===null&&(a=a.alternate,K.H=a===null||a.memoizedState===null?fy:ym),i}function ed(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return hc(i);if(i.$$typeof===G)return Rn(i)}throw Error(s(438,String(i)))}function om(i){var a=null,l=rt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=rt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Zu(),rt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),d=0;d<i;d++)l[d]=O;return a.index++,l}function tr(i,a){return typeof a=="function"?a(i):a}function td(i){var a=an();return lm(a,Ut,i)}function lm(i,a,l){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var y=i.baseQueue,b=d.pending;if(b!==null){if(y!==null){var S=y.next;y.next=b.next,b.next=S}a.baseQueue=y=b,d.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{a=y.next;var I=S=null,F=null,Z=a,le=!1;do{var me=Z.lane&-536870913;if(me!==Z.lane?(mt&me)===me:(er&me)===me){var ee=Z.revertLane;if(ee===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),me===Vo&&(le=!0);else if((er&ee)===ee){Z=Z.next,ee===Vo&&(le=!0);continue}else me={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},F===null?(I=F=me,S=b):F=F.next=me,rt.lanes|=ee,Kr|=ee;me=Z.action,Ja&&l(b,me),b=Z.hasEagerState?Z.eagerState:l(b,me)}else ee={lane:me,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},F===null?(I=F=ee,S=b):F=F.next=ee,rt.lanes|=me,Kr|=me;Z=Z.next}while(Z!==null&&Z!==a);if(F===null?S=b:F.next=I,!ys(b,i.memoizedState)&&(gn=!0,le&&(l=Oo,l!==null)))throw l;i.memoizedState=b,i.baseState=S,i.baseQueue=F,d.lastRenderedState=b}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function cm(i){var a=an(),l=a.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=l.dispatch,y=l.pending,b=a.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do b=i(b,S.action),S=S.next;while(S!==y);ys(b,a.memoizedState)||(gn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,d]}function Mx(i,a,l){var d=rt,y=an(),b=vt;if(b){if(l===void 0)throw Error(s(407));l=l()}else l=a();var S=!ys((Ut||y).memoizedState,l);if(S&&(y.memoizedState=l,gn=!0),y=y.queue,fm(Lx.bind(null,d,y,i),[i]),y.getSnapshot!==a||S||pn!==null&&pn.memoizedState.tag&1){if(d.flags|=2048,qo(9,{destroy:void 0},Px.bind(null,d,y,l,a),null),Gt===null)throw Error(s(349));b||(er&127)!==0||Dx(d,a,l)}return l}function Dx(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=rt.updateQueue,a===null?(a=Zu(),rt.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Px(i,a,l,d){a.value=l,a.getSnapshot=d,Ux(a)&&jx(i)}function Lx(i,a,l){return l(function(){Ux(a)&&jx(i)})}function Ux(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ys(i,l)}catch{return!0}}function jx(i){var a=Ga(i,2);a!==null&&os(a,i,2)}function um(i){var a=Qn();if(typeof i=="function"){var l=i;if(i=l(),Ja){Xt(!0);try{l()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:i},a}function Vx(i,a,l,d){return i.baseState=l,lm(i,Ut,typeof d=="function"?d:tr)}function x1(i,a,l,d,y){if(id(i))throw Error(s(485));if(i=a.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};K.T!==null?l(!0):b.isTransition=!1,d(b),l=a.pending,l===null?(b.next=a.pending=b,Ox(a,b)):(b.next=l.next,a.pending=l.next=b)}}function Ox(i,a){var l=a.action,d=a.payload,y=i.state;if(a.isTransition){var b=K.T,S={};K.T=S;try{var I=l(y,d),F=K.S;F!==null&&F(S,I),Gx(i,a,I)}catch(Z){dm(i,a,Z)}finally{b!==null&&S.types!==null&&(b.types=S.types),K.T=b}}else try{b=l(y,d),Gx(i,a,b)}catch(Z){dm(i,a,Z)}}function Gx(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Bx(i,a,d)},function(d){return dm(i,a,d)}):Bx(i,a,l)}function Bx(i,a,l){a.status="fulfilled",a.value=l,Hx(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Ox(i,l)))}function dm(i,a,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,Hx(a),a=a.next;while(a!==d)}i.action=null}function Hx(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function zx(i,a){return a}function Fx(i,a){if(vt){var l=Gt.formState;if(l!==null){e:{var d=rt;if(vt){if(zt){t:{for(var y=zt,b=zs;y.nodeType!==8;){if(!b){y=null;break t}if(y=qs(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){zt=qs(y.nextSibling),d=y.data==="F!";break e}}jr(d)}d=!1}d&&(a=l[0])}}return l=Qn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zx,lastRenderedState:a},l.queue=d,l=cy.bind(null,rt,d),d.dispatch=l,d=um(!1),b=xm.bind(null,rt,!1,d.queue),d=Qn(),y={state:a,dispatch:null,action:i,pending:null},d.queue=y,l=x1.bind(null,rt,y,b,l),y.dispatch=l,d.memoizedState=i,[a,l,!1]}function qx(i){var a=an();return Kx(a,Ut,i)}function Kx(i,a,l){if(a=lm(i,a,zx)[0],i=td(tr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=hc(a)}catch(S){throw S===Go?qu:S}else d=a;a=an();var y=a.queue,b=y.dispatch;return l!==a.memoizedState&&(rt.flags|=2048,qo(9,{destroy:void 0},y1.bind(null,y,l),null)),[d,b,i]}function y1(i,a){i.action=a}function $x(i){var a=an(),l=Ut;if(l!==null)return Kx(a,l,i);an(),a=a.memoizedState,l=an();var d=l.queue.dispatch;return l.memoizedState=i,[a,d,!1]}function qo(i,a,l,d){return i={tag:i,create:l,deps:d,inst:a,next:null},a=rt.updateQueue,a===null&&(a=Zu(),rt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,a.lastEffect=i),i}function Yx(){return an().memoizedState}function nd(i,a,l,d){var y=Qn();rt.flags|=i,y.memoizedState=qo(1|a,{destroy:void 0},l,d===void 0?null:d)}function sd(i,a,l,d){var y=an();d=d===void 0?null:d;var b=y.memoizedState.inst;Ut!==null&&d!==null&&nm(d,Ut.memoizedState.deps)?y.memoizedState=qo(a,b,l,d):(rt.flags|=i,y.memoizedState=qo(1|a,b,l,d))}function Jx(i,a){nd(8390656,8,i,a)}function fm(i,a){sd(2048,8,i,a)}function v1(i){rt.flags|=4;var a=rt.updateQueue;if(a===null)a=Zu(),rt.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function Qx(i){var a=an().memoizedState;return v1({ref:a,nextImpl:i}),function(){if((kt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Wx(i,a){return sd(4,2,i,a)}function Xx(i,a){return sd(4,4,i,a)}function Zx(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function ey(i,a,l){l=l!=null?l.concat([i]):null,sd(4,4,Zx.bind(null,a,i),l)}function hm(){}function ty(i,a){var l=an();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&nm(a,d[1])?d[0]:(l.memoizedState=[i,a],i)}function ny(i,a){var l=an();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&nm(a,d[1]))return d[0];if(d=i(),Ja){Xt(!0);try{i()}finally{Xt(!1)}}return l.memoizedState=[d,a],d}function mm(i,a,l){return l===void 0||(er&1073741824)!==0&&(mt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=sv(),rt.lanes|=i,Kr|=i,l)}function sy(i,a,l,d){return ys(l,a)?l:Ho.current!==null?(i=mm(i,l,d),ys(i,a)||(gn=!0),i):(er&42)===0||(er&1073741824)!==0&&(mt&261930)===0?(gn=!0,i.memoizedState=l):(i=sv(),rt.lanes|=i,Kr|=i,a)}function iy(i,a,l,d,y){var b=fe.p;fe.p=b!==0&&8>b?b:8;var S=K.T,I={};K.T=I,xm(i,!1,a,l);try{var F=y(),Z=K.S;if(Z!==null&&Z(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var le=m1(F,d);mc(i,a,le,Ss(i))}else mc(i,a,d,Ss(i))}catch(me){mc(i,a,{then:function(){},status:"rejected",reason:me},Ss())}finally{fe.p=b,S!==null&&I.types!==null&&(S.types=I.types),K.T=S}}function b1(){}function pm(i,a,l,d){if(i.tag!==5)throw Error(s(476));var y=ry(i).queue;iy(i,y,a,Se,l===null?b1:function(){return ay(i),l(d)})}function ry(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:Se},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function ay(i){var a=ry(i);a.next===null&&(a=i.alternate.memoizedState),mc(i,a.next.queue,{},Ss())}function gm(){return Rn(Rc)}function oy(){return an().memoizedState}function ly(){return an().memoizedState}function _1(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Ss();i=Gr(l);var d=Br(a,i,l);d!==null&&(os(d,a,l),cc(d,a,l)),a={cache:qh()},i.payload=a;return}a=a.return}}function T1(i,a,l){var d=Ss();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},id(i)?uy(a,l):(l=Ph(i,a,l,d),l!==null&&(os(l,i,d),dy(l,a,d)))}function cy(i,a,l){var d=Ss();mc(i,a,l,d)}function mc(i,a,l,d){var y={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(id(i))uy(a,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,I=b(S,l);if(y.hasEagerState=!0,y.eagerState=I,ys(I,S))return Vu(i,a,y,0),Gt===null&&ju(),!1}catch{}finally{}if(l=Ph(i,a,y,d),l!==null)return os(l,i,d),dy(l,a,d),!0}return!1}function xm(i,a,l,d){if(d={lane:2,revertLane:Jm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},id(i)){if(a)throw Error(s(479))}else a=Ph(i,l,d,2),a!==null&&os(a,i,2)}function id(i){var a=i.alternate;return i===rt||a!==null&&a===rt}function uy(i,a){zo=Wu=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function dy(i,a,l){if((l&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,ka(i,l)}}var pc={readContext:Rn,use:ed,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};pc.useEffectEvent=en;var fy={readContext:Rn,use:ed,useCallback:function(i,a){return Qn().memoizedState=[i,a===void 0?null:a],i},useContext:Rn,useEffect:Jx,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,nd(4194308,4,Zx.bind(null,a,i),l)},useLayoutEffect:function(i,a){return nd(4194308,4,i,a)},useInsertionEffect:function(i,a){nd(4,2,i,a)},useMemo:function(i,a){var l=Qn();a=a===void 0?null:a;var d=i();if(Ja){Xt(!0);try{i()}finally{Xt(!1)}}return l.memoizedState=[d,a],d},useReducer:function(i,a,l){var d=Qn();if(l!==void 0){var y=l(a);if(Ja){Xt(!0);try{l(a)}finally{Xt(!1)}}}else y=a;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=T1.bind(null,rt,i),[d.memoizedState,i]},useRef:function(i){var a=Qn();return i={current:i},a.memoizedState=i},useState:function(i){i=um(i);var a=i.queue,l=cy.bind(null,rt,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:hm,useDeferredValue:function(i,a){var l=Qn();return mm(l,i,a)},useTransition:function(){var i=um(!1);return i=iy.bind(null,rt,i.queue,!0,!1),Qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var d=rt,y=Qn();if(vt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=a(),Gt===null)throw Error(s(349));(mt&127)!==0||Dx(d,a,l)}y.memoizedState=l;var b={value:l,getSnapshot:a};return y.queue=b,Jx(Lx.bind(null,d,b,i),[i]),d.flags|=2048,qo(9,{destroy:void 0},Px.bind(null,d,b,l,a),null),l},useId:function(){var i=Qn(),a=Gt.identifierPrefix;if(vt){var l=Ci,d=Ii;l=(d&~(1<<32-Yt(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Xu++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=p1++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:gm,useFormState:Fx,useActionState:Fx,useOptimistic:function(i){var a=Qn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=xm.bind(null,rt,!0,l),l.dispatch=a,[i,a]},useMemoCache:om,useCacheRefresh:function(){return Qn().memoizedState=_1.bind(null,rt)},useEffectEvent:function(i){var a=Qn(),l={impl:i};return a.memoizedState=l,function(){if((kt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},ym={readContext:Rn,use:ed,useCallback:ty,useContext:Rn,useEffect:fm,useImperativeHandle:ey,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:ny,useReducer:td,useRef:Yx,useState:function(){return td(tr)},useDebugValue:hm,useDeferredValue:function(i,a){var l=an();return sy(l,Ut.memoizedState,i,a)},useTransition:function(){var i=td(tr)[0],a=an().memoizedState;return[typeof i=="boolean"?i:hc(i),a]},useSyncExternalStore:Mx,useId:oy,useHostTransitionStatus:gm,useFormState:qx,useActionState:qx,useOptimistic:function(i,a){var l=an();return Vx(l,Ut,i,a)},useMemoCache:om,useCacheRefresh:ly};ym.useEffectEvent=Qx;var hy={readContext:Rn,use:ed,useCallback:ty,useContext:Rn,useEffect:fm,useImperativeHandle:ey,useInsertionEffect:Wx,useLayoutEffect:Xx,useMemo:ny,useReducer:cm,useRef:Yx,useState:function(){return cm(tr)},useDebugValue:hm,useDeferredValue:function(i,a){var l=an();return Ut===null?mm(l,i,a):sy(l,Ut.memoizedState,i,a)},useTransition:function(){var i=cm(tr)[0],a=an().memoizedState;return[typeof i=="boolean"?i:hc(i),a]},useSyncExternalStore:Mx,useId:oy,useHostTransitionStatus:gm,useFormState:$x,useActionState:$x,useOptimistic:function(i,a){var l=an();return Ut!==null?Vx(l,Ut,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:om,useCacheRefresh:ly};hy.useEffectEvent=Qx;function vm(i,a,l,d){a=i.memoizedState,l=l(d,a),l=l==null?a:_({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var bm={enqueueSetState:function(i,a,l){i=i._reactInternals;var d=Ss(),y=Gr(d);y.payload=a,l!=null&&(y.callback=l),a=Br(i,y,d),a!==null&&(os(a,i,d),cc(a,i,d))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var d=Ss(),y=Gr(d);y.tag=1,y.payload=a,l!=null&&(y.callback=l),a=Br(i,y,d),a!==null&&(os(a,i,d),cc(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Ss(),d=Gr(l);d.tag=2,a!=null&&(d.callback=a),a=Br(i,d,l),a!==null&&(os(a,i,l),cc(a,i,l))}};function my(i,a,l,d,y,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,S):a.prototype&&a.prototype.isPureReactComponent?!tc(l,d)||!tc(y,b):!0}function py(i,a,l,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==i&&bm.enqueueReplaceState(a,a.state,null)}function Qa(i,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(i=i.defaultProps){l===a&&(l=_({},l));for(var y in i)l[y]===void 0&&(l[y]=i[y])}return l}function gy(i){Uu(i)}function xy(i){console.error(i)}function yy(i){Uu(i)}function rd(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function vy(i,a,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function _m(i,a,l){return l=Gr(l),l.tag=3,l.payload={element:null},l.callback=function(){rd(i,a)},l}function by(i){return i=Gr(i),i.tag=3,i}function _y(i,a,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;i.payload=function(){return y(b)},i.callback=function(){vy(a,l,d)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){vy(a,l,d),typeof y!="function"&&($r===null?$r=new Set([this]):$r.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function E1(i,a,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&jo(a,l,y,!0),l=bs.current,l!==null){switch(l.tag){case 31:case 13:return Fs===null?xd():l.alternate===null&&tn===0&&(tn=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===Ku?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),Km(i,d,y)),!1;case 22:return l.flags|=65536,d===Ku?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),Km(i,d,y)),!1}throw Error(s(435,l.tag))}return Km(i,d,y),xd(),!1}if(vt)return a=bs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==Gh&&(i=Error(s(422),{cause:d}),ic(Gs(i,l)))):(d!==Gh&&(a=Error(s(423),{cause:d}),ic(Gs(a,l))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=Gs(d,l),y=_m(i.stateNode,d,y),Wh(i,y),tn!==4&&(tn=2)),!1;var b=Error(s(520),{cause:d});if(b=Gs(b,l),Ec===null?Ec=[b]:Ec.push(b),tn!==4&&(tn=2),a===null)return!0;d=Gs(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=y&-y,l.lanes|=i,i=_m(l.stateNode,d,i),Wh(l,i),!1;case 1:if(a=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($r===null||!$r.has(b))))return l.flags|=65536,y&=-y,l.lanes|=y,y=by(y),_y(y,i,l,d),Wh(l,y),!1}l=l.return}while(l!==null);return!1}var Tm=Error(s(461)),gn=!1;function Mn(i,a,l,d){a.child=i===null?Ax(a,null,l,d):Ya(a,i.child,l,d)}function Ty(i,a,l,d,y){l=l.render;var b=a.ref;if("ref"in d){var S={};for(var I in d)I!=="ref"&&(S[I]=d[I])}else S=d;return Fa(a),d=sm(i,a,l,S,b,y),I=im(),i!==null&&!gn?(rm(i,a,y),nr(i,a,y)):(vt&&I&&Vh(a),a.flags|=1,Mn(i,a,d,y),a.child)}function Ey(i,a,l,d,y){if(i===null){var b=l.type;return typeof b=="function"&&!Lh(b)&&b.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=b,Sy(i,a,b,d,y)):(i=Gu(l.type,null,d,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!Cm(i,y)){var S=b.memoizedProps;if(l=l.compare,l=l!==null?l:tc,l(S,d)&&i.ref===a.ref)return nr(i,a,y)}return a.flags|=1,i=Qi(b,d),i.ref=a.ref,i.return=a,a.child=i}function Sy(i,a,l,d,y){if(i!==null){var b=i.memoizedProps;if(tc(b,d)&&i.ref===a.ref)if(gn=!1,a.pendingProps=d=b,Cm(i,y))(i.flags&131072)!==0&&(gn=!0);else return a.lanes=i.lanes,nr(i,a,y)}return Em(i,a,l,d,y)}function Ay(i,a,l,d){var y=d.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(d=a.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~b}else d=0,a.child=null;return wy(i,a,b,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fu(a,b!==null?b.cachePool:null),b!==null?kx(a,b):Zh(),Ix(a);else return d=a.lanes=536870912,wy(i,a,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Fu(a,b.cachePool),kx(a,b),zr(),a.memoizedState=null):(i!==null&&Fu(a,null),Zh(),zr());return Mn(i,a,y,l),a.child}function gc(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function wy(i,a,l,d,y){var b=$h();return b=b===null?null:{parent:mn._currentValue,pool:b},a.memoizedState={baseLanes:l,cachePool:b},i!==null&&Fu(a,null),Zh(),Ix(a),i!==null&&jo(i,a,d,!0),a.childLanes=y,null}function ad(i,a){return a=ld({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Ny(i,a,l){return Ya(a,i.child,null,l),i=ad(a,a.pendingProps),i.flags|=2,_s(a),a.memoizedState=null,i}function S1(i,a,l){var d=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(vt){if(d.mode==="hidden")return i=ad(a,d),a.lanes=536870912,gc(null,i);if(tm(a),(i=zt)?(i=Ov(i,zs),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Lr!==null?{id:Ii,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},l=ux(i),l.return=a,a.child=l,Cn=a,zt=null)):i=null,i===null)throw jr(a);return a.lanes=536870912,null}return ad(a,d)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if(tm(a),y)if(a.flags&256)a.flags&=-257,a=Ny(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(s(558));else if(gn||jo(i,a,l,!1),y=(l&i.childLanes)!==0,gn||y){if(d=Gt,d!==null&&(S=Ia(d,l),S!==0&&S!==b.retryLane))throw b.retryLane=S,Ga(i,S),os(d,i,S),Tm;xd(),a=Ny(i,a,l)}else i=b.treeContext,zt=qs(S.nextSibling),Cn=a,vt=!0,Ur=null,zs=!1,i!==null&&hx(a,i),a=ad(a,d),a.flags|=4096;return a}return i=Qi(i.child,{mode:d.mode,children:d.children}),i.ref=a.ref,a.child=i,i.return=a,i}function od(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Em(i,a,l,d,y){return Fa(a),l=sm(i,a,l,d,void 0,y),d=im(),i!==null&&!gn?(rm(i,a,y),nr(i,a,y)):(vt&&d&&Vh(a),a.flags|=1,Mn(i,a,l,y),a.child)}function ky(i,a,l,d,y,b){return Fa(a),a.updateQueue=null,l=Rx(a,d,l,y),Cx(i),d=im(),i!==null&&!gn?(rm(i,a,b),nr(i,a,b)):(vt&&d&&Vh(a),a.flags|=1,Mn(i,a,l,b),a.child)}function Iy(i,a,l,d,y){if(Fa(a),a.stateNode===null){var b=Do,S=l.contextType;typeof S=="object"&&S!==null&&(b=Rn(S)),b=new l(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=bm,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},Jh(a),S=l.contextType,b.context=typeof S=="object"&&S!==null?Rn(S):Do,b.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(vm(a,l,S,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&bm.enqueueReplaceState(b,b.state,null),dc(a,d,b,y),uc(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){b=a.stateNode;var I=a.memoizedProps,F=Qa(l,I);b.props=F;var Z=b.context,le=l.contextType;S=Do,typeof le=="object"&&le!==null&&(S=Rn(le));var me=l.getDerivedStateFromProps;le=typeof me=="function"||typeof b.getSnapshotBeforeUpdate=="function",I=a.pendingProps!==I,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I||Z!==S)&&py(a,b,d,S),Or=!1;var ee=a.memoizedState;b.state=ee,dc(a,d,b,y),uc(),Z=a.memoizedState,I||ee!==Z||Or?(typeof me=="function"&&(vm(a,l,me,d),Z=a.memoizedState),(F=Or||my(a,l,F,d,ee,Z,S))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=Z),b.props=d,b.state=Z,b.context=S,d=F):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,Qh(i,a),S=a.memoizedProps,le=Qa(l,S),b.props=le,me=a.pendingProps,ee=b.context,Z=l.contextType,F=Do,typeof Z=="object"&&Z!==null&&(F=Rn(Z)),I=l.getDerivedStateFromProps,(Z=typeof I=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==me||ee!==F)&&py(a,b,d,F),Or=!1,ee=a.memoizedState,b.state=ee,dc(a,d,b,y),uc();var ae=a.memoizedState;S!==me||ee!==ae||Or||i!==null&&i.dependencies!==null&&Hu(i.dependencies)?(typeof I=="function"&&(vm(a,l,I,d),ae=a.memoizedState),(le=Or||my(a,l,le,d,ee,ae,F)||i!==null&&i.dependencies!==null&&Hu(i.dependencies))?(Z||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ae,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ae,F)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ae),b.props=d,b.state=ae,b.context=F,d=le):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),d=!1)}return b=d,od(i,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&d?(a.child=Ya(a,i.child,null,y),a.child=Ya(a,null,l,y)):Mn(i,a,l,y),a.memoizedState=b.state,i=a.child):i=nr(i,a,y),i}function Cy(i,a,l,d){return Ha(),a.flags|=256,Mn(i,a,l,d),a.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(i){return{baseLanes:i,cachePool:vx()}}function wm(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Es),i}function Ry(i,a,l){var d=a.pendingProps,y=!1,b=(a.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(rn.current&2)!==0),S&&(y=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,i===null){if(vt){if(y?Hr(a):zr(),(i=zt)?(i=Ov(i,zs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Lr!==null?{id:Ii,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},l=ux(i),l.return=a,a.child=l,Cn=a,zt=null)):i=null,i===null)throw jr(a);return lp(i)?a.lanes=32:a.lanes=536870912,null}var I=d.children;return d=d.fallback,y?(zr(),y=a.mode,I=ld({mode:"hidden",children:I},y),d=Ba(d,y,l,null),I.return=a,d.return=a,I.sibling=d,a.child=I,d=a.child,d.memoizedState=Am(l),d.childLanes=wm(i,S,l),a.memoizedState=Sm,gc(null,d)):(Hr(a),Nm(a,I))}var F=i.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(b)a.flags&256?(Hr(a),a.flags&=-257,a=km(i,a,l)):a.memoizedState!==null?(zr(),a.child=i.child,a.flags|=128,a=null):(zr(),I=d.fallback,y=a.mode,d=ld({mode:"visible",children:d.children},y),I=Ba(I,y,l,null),I.flags|=2,d.return=a,I.return=a,d.sibling=I,a.child=d,Ya(a,i.child,null,l),d=a.child,d.memoizedState=Am(l),d.childLanes=wm(i,S,l),a.memoizedState=Sm,a=gc(null,d));else if(Hr(a),lp(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var Z=S.dgst;S=Z,d=Error(s(419)),d.stack="",d.digest=S,ic({value:d,source:null,stack:null}),a=km(i,a,l)}else if(gn||jo(i,a,l,!1),S=(l&i.childLanes)!==0,gn||S){if(S=Gt,S!==null&&(d=Ia(S,l),d!==0&&d!==F.retryLane))throw F.retryLane=d,Ga(i,d),os(S,i,d),Tm;op(I)||xd(),a=km(i,a,l)}else op(I)?(a.flags|=192,a.child=i.child,a=null):(i=F.treeContext,zt=qs(I.nextSibling),Cn=a,vt=!0,Ur=null,zs=!1,i!==null&&hx(a,i),a=Nm(a,d.children),a.flags|=4096);return a}return y?(zr(),I=d.fallback,y=a.mode,F=i.child,Z=F.sibling,d=Qi(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,Z!==null?I=Qi(Z,I):(I=Ba(I,y,l,null),I.flags|=2),I.return=a,d.return=a,d.sibling=I,a.child=d,gc(null,d),d=a.child,I=i.child.memoizedState,I===null?I=Am(l):(y=I.cachePool,y!==null?(F=mn._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=vx(),I={baseLanes:I.baseLanes|l,cachePool:y}),d.memoizedState=I,d.childLanes=wm(i,S,l),a.memoizedState=Sm,gc(i.child,d)):(Hr(a),l=i.child,i=l.sibling,l=Qi(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,i!==null&&(S=a.deletions,S===null?(a.deletions=[i],a.flags|=16):S.push(i)),a.child=l,a.memoizedState=null,l)}function Nm(i,a){return a=ld({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function ld(i,a){return i=vs(22,i,null,a),i.lanes=0,i}function km(i,a,l){return Ya(a,i.child,null,l),i=Nm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function My(i,a,l){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),zh(i.return,a,l)}function Im(i,a,l,d,y,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y,treeForkCount:b}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=y,S.treeForkCount=b)}function Dy(i,a,l){var d=a.pendingProps,y=d.revealOrder,b=d.tail;d=d.children;var S=rn.current,I=(S&2)!==0;if(I?(S=S&1|2,a.flags|=128):S&=1,ue(rn,S),Mn(i,a,d,l),d=vt?sc:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&My(i,l,a);else if(i.tag===19)My(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(l=a.child,y=null;l!==null;)i=l.alternate,i!==null&&Qu(i)===null&&(y=l),l=l.sibling;l=y,l===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),Im(a,!1,y,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Qu(i)===null){a.child=y;break}i=y.sibling,y.sibling=l,l=y,y=i}Im(a,!0,l,null,b,d);break;case"together":Im(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function nr(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Kr|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(jo(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,l=Qi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Qi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Cm(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Hu(i)))}function A1(i,a,l){switch(a.tag){case 3:ut(a,a.stateNode.containerInfo),Vr(a,mn,i.memoizedState.cache),Ha();break;case 27:case 5:Ke(a);break;case 4:ut(a,a.stateNode.containerInfo);break;case 10:Vr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,tm(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Hr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Ry(i,a,l):(Hr(a),i=nr(i,a,l),i!==null?i.sibling:null);Hr(a);break;case 19:var y=(i.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(jo(i,a,l,!1),d=(l&a.childLanes)!==0),y){if(d)return Dy(i,a,l);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(rn,rn.current),d)break;return null;case 22:return a.lanes=0,Ay(i,a,l,a.pendingProps);case 24:Vr(a,mn,i.memoizedState.cache)}return nr(i,a,l)}function Py(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)gn=!0;else{if(!Cm(i,l)&&(a.flags&128)===0)return gn=!1,A1(i,a,l);gn=(i.flags&131072)!==0}else gn=!1,vt&&(a.flags&1048576)!==0&&fx(a,sc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(i=Ka(a.elementType),a.type=i,typeof i=="function")Lh(i)?(d=Qa(i,d),a.tag=1,a=Iy(null,a,i,d,l)):(a.tag=0,a=Em(null,a,i,d,l));else{if(i!=null){var y=i.$$typeof;if(y===$){a.tag=11,a=Ty(null,a,i,d,l);break e}else if(y===D){a.tag=14,a=Ey(null,a,i,d,l);break e}}throw a=ce(i)||i,Error(s(306,a,""))}}return a;case 0:return Em(i,a,a.type,a.pendingProps,l);case 1:return d=a.type,y=Qa(d,a.pendingProps),Iy(i,a,d,y,l);case 3:e:{if(ut(a,a.stateNode.containerInfo),i===null)throw Error(s(387));d=a.pendingProps;var b=a.memoizedState;y=b.element,Qh(i,a),dc(a,d,null,l);var S=a.memoizedState;if(d=S.cache,Vr(a,mn,d),d!==b.cache&&Fh(a,[mn],l,!0),uc(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Cy(i,a,d,l);break e}else if(d!==y){y=Gs(Error(s(424)),a),ic(y),a=Cy(i,a,d,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(zt=qs(i.firstChild),Cn=a,vt=!0,Ur=null,zs=!0,l=Ax(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ha(),d===y){a=nr(i,a,l);break e}Mn(i,a,d,l)}a=a.child}return a;case 26:return od(i,a),i===null?(l=qv(a.type,null,a.pendingProps,null))?a.memoizedState=l:vt||(l=a.type,i=a.pendingProps,d=Sd(xe.current).createElement(l),d[Zt]=a,d[fn]=i,Dn(d,l,i),Jt(d),a.stateNode=d):a.memoizedState=qv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ke(a),i===null&&vt&&(d=a.stateNode=Hv(a.type,a.pendingProps,xe.current),Cn=a,zs=!0,y=zt,Wr(a.type)?(cp=y,zt=qs(d.firstChild)):zt=y),Mn(i,a,a.pendingProps.children,l),od(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&vt&&((y=d=zt)&&(d=tk(d,a.type,a.pendingProps,zs),d!==null?(a.stateNode=d,Cn=a,zt=qs(d.firstChild),zs=!1,y=!0):y=!1),y||jr(a)),Ke(a),y=a.type,b=a.pendingProps,S=i!==null?i.memoizedProps:null,d=b.children,ip(y,b)?d=null:S!==null&&ip(y,S)&&(a.flags|=32),a.memoizedState!==null&&(y=sm(i,a,g1,null,null,l),Rc._currentValue=y),od(i,a),Mn(i,a,d,l),a.child;case 6:return i===null&&vt&&((i=l=zt)&&(l=nk(l,a.pendingProps,zs),l!==null?(a.stateNode=l,Cn=a,zt=null,i=!0):i=!1),i||jr(a)),null;case 13:return Ry(i,a,l);case 4:return ut(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=Ya(a,null,d,l):Mn(i,a,d,l),a.child;case 11:return Ty(i,a,a.type,a.pendingProps,l);case 7:return Mn(i,a,a.pendingProps,l),a.child;case 8:return Mn(i,a,a.pendingProps.children,l),a.child;case 12:return Mn(i,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,Vr(a,a.type,d.value),Mn(i,a,d.children,l),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,Fa(a),y=Rn(y),d=d(y),a.flags|=1,Mn(i,a,d,l),a.child;case 14:return Ey(i,a,a.type,a.pendingProps,l);case 15:return Sy(i,a,a.type,a.pendingProps,l);case 19:return Dy(i,a,l);case 31:return S1(i,a,l);case 22:return Ay(i,a,l,a.pendingProps);case 24:return Fa(a),d=Rn(mn),i===null?(y=$h(),y===null&&(y=Gt,b=qh(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=l),y=b),a.memoizedState={parent:d,cache:y},Jh(a),Vr(a,mn,y)):((i.lanes&l)!==0&&(Qh(i,a),dc(a,null,null,l),uc()),y=i.memoizedState,b=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Vr(a,mn,d)):(d=b.cache,Vr(a,mn,d),d!==y.cache&&Fh(a,[mn],l,!0))),Mn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function sr(i){i.flags|=4}function Rm(i,a,l,d,y){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(ov())i.flags|=8192;else throw $a=Ku,Yh}else i.flags&=-16777217}function Ly(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Qv(a))if(ov())i.flags|=8192;else throw $a=Ku,Yh}function cd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Na():536870912,i.lanes|=a,Jo|=a)}function xc(i,a){if(!vt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ft(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(a)for(var y=i.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=l,a}function w1(i,a,l){var d=a.pendingProps;switch(Oh(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(a),null;case 1:return Ft(a),null;case 3:return l=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Zi(mn),qe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Uo(a)?sr(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Bh())),Ft(a),null;case 26:var y=a.type,b=a.memoizedState;return i===null?(sr(a),b!==null?(Ft(a),Ly(a,b)):(Ft(a),Rm(a,y,null,d,l))):b?b!==i.memoizedState?(sr(a),Ft(a),Ly(a,b)):(Ft(a),a.flags&=-16777217):(i=i.memoizedProps,i!==d&&sr(a),Ft(a),Rm(a,y,i,d,l)),null;case 27:if(Ct(a),l=xe.current,y=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&sr(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Ft(a),null}i=ne.current,Uo(a)?mx(a):(i=Hv(y,d,l),a.stateNode=i,sr(a))}return Ft(a),null;case 5:if(Ct(a),y=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&sr(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Ft(a),null}if(b=ne.current,Uo(a))mx(a);else{var S=Sd(xe.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?S.createElement(y,{is:d.is}):S.createElement(y)}}b[Zt]=a,b[fn]=d;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=b;e:switch(Dn(b,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&sr(a)}}return Ft(a),Rm(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&sr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(s(166));if(i=xe.current,Uo(a)){if(i=a.stateNode,l=a.memoizedProps,d=null,y=Cn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[Zt]=a,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Rv(i.nodeValue,l)),i||jr(a,!0)}else i=Sd(i).createTextNode(d),i[Zt]=a,a.stateNode=i}return Ft(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(d=Uo(a),l!==null){if(i===null){if(!d)throw Error(s(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Zt]=a}else Ha(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),i=!1}else l=Bh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(_s(a),a):(_s(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Ft(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Uo(a),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Zt]=a}else Ha(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),y=!1}else y=Bh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(_s(a),a):(_s(a),null)}return _s(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),cd(a,a.updateQueue),Ft(a),null);case 4:return qe(),i===null&&Zm(a.stateNode.containerInfo),Ft(a),null;case 10:return Zi(a.type),Ft(a),null;case 19:if(re(rn),d=a.memoizedState,d===null)return Ft(a),null;if(y=(a.flags&128)!==0,b=d.rendering,b===null)if(y)xc(d,!1);else{if(tn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=Qu(i),b!==null){for(a.flags|=128,xc(d,!1),i=b.updateQueue,a.updateQueue=i,cd(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)cx(l,i),l=l.sibling;return ue(rn,rn.current&1|2),vt&&Wi(a,d.treeForkCount),a.child}i=i.sibling}d.tail!==null&&ht()>md&&(a.flags|=128,y=!0,xc(d,!1),a.lanes=4194304)}else{if(!y)if(i=Qu(b),i!==null){if(a.flags|=128,y=!0,i=i.updateQueue,a.updateQueue=i,cd(a,i),xc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!vt)return Ft(a),null}else 2*ht()-d.renderingStartTime>md&&l!==536870912&&(a.flags|=128,y=!0,xc(d,!1),a.lanes=4194304);d.isBackwards?(b.sibling=a.child,a.child=b):(i=d.last,i!==null?i.sibling=b:a.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=ht(),i.sibling=null,l=rn.current,ue(rn,y?l&1|2:l&1),vt&&Wi(a,d.treeForkCount),i):(Ft(a),null);case 22:case 23:return _s(a),em(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(Ft(a),a.subtreeFlags&6&&(a.flags|=8192)):Ft(a),l=a.updateQueue,l!==null&&cd(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),i!==null&&re(qa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Zi(mn),Ft(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function N1(i,a){switch(Oh(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Zi(mn),qe(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Ct(a),null;case 31:if(a.memoizedState!==null){if(_s(a),a.alternate===null)throw Error(s(340));Ha()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(_s(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Ha()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return re(rn),null;case 4:return qe(),null;case 10:return Zi(a.type),null;case 22:case 23:return _s(a),em(),i!==null&&re(qa),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Zi(mn),null;case 25:return null;default:return null}}function Uy(i,a){switch(Oh(a),a.tag){case 3:Zi(mn),qe();break;case 26:case 27:case 5:Ct(a);break;case 4:qe();break;case 31:a.memoizedState!==null&&_s(a);break;case 13:_s(a);break;case 19:re(rn);break;case 10:Zi(a.type);break;case 22:case 23:_s(a),em(),i!==null&&re(qa);break;case 24:Zi(mn)}}function yc(i,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&i)===i){d=void 0;var b=l.create,S=l.inst;d=b(),S.destroy=d}l=l.next}while(l!==y)}}catch(I){Pt(a,a.return,I)}}function Fr(i,a,l){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&i)===i){var S=d.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,y=a;var F=l,Z=I;try{Z()}catch(le){Pt(y,F,le)}}}d=d.next}while(d!==b)}}catch(le){Pt(a,a.return,le)}}function jy(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Nx(a,l)}catch(d){Pt(i,i.return,d)}}}function Vy(i,a,l){l.props=Qa(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){Pt(i,a,d)}}function vc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(y){Pt(i,a,y)}}function Ri(i,a){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){Pt(i,a,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){Pt(i,a,y)}else l.current=null}function Oy(i){var a=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){Pt(i,i.return,y)}}function Mm(i,a,l){try{var d=i.stateNode;J1(d,i.type,l,a),d[fn]=a}catch(y){Pt(i,i.return,y)}}function Gy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Wr(i.type)||i.tag===4}function Dm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Wr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pm(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ei));else if(d!==4&&(d===27&&Wr(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Pm(i,a,l),i=i.sibling;i!==null;)Pm(i,a,l),i=i.sibling}function ud(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(d!==4&&(d===27&&Wr(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(ud(i,a,l),i=i.sibling;i!==null;)ud(i,a,l),i=i.sibling}function By(i){var a=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Dn(a,d,l),a[Zt]=i,a[fn]=l}catch(b){Pt(i,i.return,b)}}var ir=!1,xn=!1,Lm=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,wn=null;function k1(i,a){if(i=i.containerInfo,np=Rd,i=ex(i),kh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var S=0,I=-1,F=-1,Z=0,le=0,me=i,ee=null;t:for(;;){for(var ae;me!==l||y!==0&&me.nodeType!==3||(I=S+y),me!==b||d!==0&&me.nodeType!==3||(F=S+d),me.nodeType===3&&(S+=me.nodeValue.length),(ae=me.firstChild)!==null;)ee=me,me=ae;for(;;){if(me===i)break t;if(ee===l&&++Z===y&&(I=S),ee===b&&++le===d&&(F=S),(ae=me.nextSibling)!==null)break;me=ee,ee=me.parentNode}me=ae}l=I===-1||F===-1?null:{start:I,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(sp={focusedElem:i,selectionRange:l},Rd=!1,wn=a;wn!==null;)if(a=wn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,wn=i;else for(;wn!==null;){switch(a=wn,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)y=i[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=a,y=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Me=Qa(l.type,y);i=d.getSnapshotBeforeUpdate(Me,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Be){Pt(l,l.return,Be)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)ap(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ap(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,wn=i;break}wn=a.return}}function zy(i,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:ar(i,l),d&4&&yc(5,l);break;case 1:if(ar(i,l),d&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(S){Pt(l,l.return,S)}else{var y=Qa(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(y,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Pt(l,l.return,S)}}d&64&&jy(l),d&512&&vc(l,l.return);break;case 3:if(ar(i,l),d&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Nx(i,a)}catch(S){Pt(l,l.return,S)}}break;case 27:a===null&&d&4&&By(l);case 26:case 5:ar(i,l),a===null&&d&4&&Oy(l),d&512&&vc(l,l.return);break;case 12:ar(i,l);break;case 31:ar(i,l),d&4&&Ky(i,l);break;case 13:ar(i,l),d&4&&$y(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=j1.bind(null,l),sk(i,l))));break;case 22:if(d=l.memoizedState!==null||ir,!d){a=a!==null&&a.memoizedState!==null||xn,y=ir;var b=xn;ir=d,(xn=a)&&!b?or(i,l,(l.subtreeFlags&8772)!==0):ar(i,l),ir=y,xn=b}break;case 30:break;default:ar(i,l)}}function Fy(i){var a=i.alternate;a!==null&&(i.alternate=null,Fy(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&wr(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var $t=null,ss=!1;function rr(i,a,l){for(l=l.child;l!==null;)qy(i,a,l),l=l.sibling}function qy(i,a,l){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(dn,l)}catch{}switch(l.tag){case 26:xn||Ri(l,a),rr(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xn||Ri(l,a);var d=$t,y=ss;Wr(l.type)&&($t=l.stateNode,ss=!1),rr(i,a,l),kc(l.stateNode),$t=d,ss=y;break;case 5:xn||Ri(l,a);case 6:if(d=$t,y=ss,$t=null,rr(i,a,l),$t=d,ss=y,$t!==null)if(ss)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(l.stateNode)}catch(b){Pt(l,a,b)}else try{$t.removeChild(l.stateNode)}catch(b){Pt(l,a,b)}break;case 18:$t!==null&&(ss?(i=$t,jv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),sl(i)):jv($t,l.stateNode));break;case 4:d=$t,y=ss,$t=l.stateNode.containerInfo,ss=!0,rr(i,a,l),$t=d,ss=y;break;case 0:case 11:case 14:case 15:Fr(2,l,a),xn||Fr(4,l,a),rr(i,a,l);break;case 1:xn||(Ri(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Vy(l,a,d)),rr(i,a,l);break;case 21:rr(i,a,l);break;case 22:xn=(d=xn)||l.memoizedState!==null,rr(i,a,l),xn=d;break;default:rr(i,a,l)}}function Ky(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{sl(i)}catch(l){Pt(a,a.return,l)}}}function $y(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{sl(i)}catch(l){Pt(a,a.return,l)}}function I1(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Hy),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Hy),a;default:throw Error(s(435,i.tag))}}function dd(i,a){var l=I1(i);a.forEach(function(d){if(!l.has(d)){l.add(d);var y=V1.bind(null,i,d);d.then(y,y)}})}function is(i,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],b=i,S=a,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(Wr(I.type)){$t=I.stateNode,ss=!1;break e}break;case 5:$t=I.stateNode,ss=!1;break e;case 3:case 4:$t=I.stateNode.containerInfo,ss=!0;break e}I=I.return}if($t===null)throw Error(s(160));qy(b,S,y),$t=null,ss=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Yy(a,i),a=a.sibling}var ai=null;function Yy(i,a){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:is(a,i),rs(i),d&4&&(Fr(3,i,i.return),yc(3,i),Fr(5,i,i.return));break;case 1:is(a,i),rs(i),d&512&&(xn||l===null||Ri(l,l.return)),d&64&&ir&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=ai;if(is(a,i),rs(i),d&512&&(xn||l===null||Ri(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Ms]||b[Zt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),Dn(b,d,l),b[Zt]=i,Jt(b),d=b;break e;case"link":var S=Yv("link","href",y).get(d+(l.href||""));if(S){for(var I=0;I<S.length;I++)if(b=S[I],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(I,1);break t}}b=y.createElement(d),Dn(b,d,l),y.head.appendChild(b);break;case"meta":if(S=Yv("meta","content",y).get(d+(l.content||""))){for(I=0;I<S.length;I++)if(b=S[I],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(I,1);break t}}b=y.createElement(d),Dn(b,d,l),y.head.appendChild(b);break;default:throw Error(s(468,d))}b[Zt]=i,Jt(b),d=b}i.stateNode=d}else Jv(y,i.type,i.stateNode);else i.stateNode=$v(y,d,i.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?Jv(y,i.type,i.stateNode):$v(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Mm(i,i.memoizedProps,l.memoizedProps)}break;case 27:is(a,i),rs(i),d&512&&(xn||l===null||Ri(l,l.return)),l!==null&&d&4&&Mm(i,i.memoizedProps,l.memoizedProps);break;case 5:if(is(a,i),rs(i),d&512&&(xn||l===null||Ri(l,l.return)),i.flags&32){y=i.stateNode;try{ns(y,"")}catch(Me){Pt(i,i.return,Me)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,Mm(i,y,l!==null?l.memoizedProps:y)),d&1024&&(Lm=!0);break;case 6:if(is(a,i),rs(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(Me){Pt(i,i.return,Me)}}break;case 3:if(Nd=null,y=ai,ai=Ad(a.containerInfo),is(a,i),ai=y,rs(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{sl(a.containerInfo)}catch(Me){Pt(i,i.return,Me)}Lm&&(Lm=!1,Jy(i));break;case 4:d=ai,ai=Ad(i.stateNode.containerInfo),is(a,i),rs(i),ai=d;break;case 12:is(a,i),rs(i);break;case 31:is(a,i),rs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,dd(i,d)));break;case 13:is(a,i),rs(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(hd=ht()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,dd(i,d)));break;case 22:y=i.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,Z=ir,le=xn;if(ir=Z||y,xn=le||F,is(a,i),xn=le,ir=Z,rs(i),d&8192)e:for(a=i.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(l===null||F||ir||xn||Wa(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(b=F.stateNode,y)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=F.stateNode;var me=F.memoizedProps.style,ee=me!=null&&me.hasOwnProperty("display")?me.display:null;I.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Me){Pt(F,F.return,Me)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(Me){Pt(F,F.return,Me)}}}else if(a.tag===18){if(l===null){F=a;try{var ae=F.stateNode;y?Vv(ae,!0):Vv(F.stateNode,!1)}catch(Me){Pt(F,F.return,Me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,dd(i,l))));break;case 19:is(a,i),rs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,dd(i,d)));break;case 30:break;case 21:break;default:is(a,i),rs(i)}}function rs(i){var a=i.flags;if(a&2){try{for(var l,d=i.return;d!==null;){if(Gy(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var y=l.stateNode,b=Dm(i);ud(i,b,y);break;case 5:var S=l.stateNode;l.flags&32&&(ns(S,""),l.flags&=-33);var I=Dm(i);ud(i,I,S);break;case 3:case 4:var F=l.stateNode.containerInfo,Z=Dm(i);Pm(i,Z,F);break;default:throw Error(s(161))}}catch(le){Pt(i,i.return,le)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Jy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Jy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ar(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)zy(i,a.alternate,a),a=a.sibling}function Wa(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Fr(4,a,a.return),Wa(a);break;case 1:Ri(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Vy(a,a.return,l),Wa(a);break;case 27:kc(a.stateNode);case 26:case 5:Ri(a,a.return),Wa(a);break;case 22:a.memoizedState===null&&Wa(a);break;case 30:Wa(a);break;default:Wa(a)}i=i.sibling}}function or(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=i,b=a,S=b.flags;switch(b.tag){case 0:case 11:case 15:or(y,b,l),yc(4,b);break;case 1:if(or(y,b,l),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){Pt(d,d.return,Z)}if(d=b,y=d.updateQueue,y!==null){var I=d.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)wx(F[y],I)}catch(Z){Pt(d,d.return,Z)}}l&&S&64&&jy(b),vc(b,b.return);break;case 27:By(b);case 26:case 5:or(y,b,l),l&&d===null&&S&4&&Oy(b),vc(b,b.return);break;case 12:or(y,b,l);break;case 31:or(y,b,l),l&&S&4&&Ky(y,b);break;case 13:or(y,b,l),l&&S&4&&$y(y,b);break;case 22:b.memoizedState===null&&or(y,b,l),vc(b,b.return);break;case 30:break;default:or(y,b,l)}a=a.sibling}}function Um(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&rc(l))}function jm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&rc(i))}function oi(i,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Qy(i,a,l,d),a=a.sibling}function Qy(i,a,l,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:oi(i,a,l,d),y&2048&&yc(9,a);break;case 1:oi(i,a,l,d);break;case 3:oi(i,a,l,d),y&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&rc(i)));break;case 12:if(y&2048){oi(i,a,l,d),i=a.stateNode;try{var b=a.memoizedProps,S=b.id,I=b.onPostCommit;typeof I=="function"&&I(S,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){Pt(a,a.return,F)}}else oi(i,a,l,d);break;case 31:oi(i,a,l,d);break;case 13:oi(i,a,l,d);break;case 23:break;case 22:b=a.stateNode,S=a.alternate,a.memoizedState!==null?b._visibility&2?oi(i,a,l,d):bc(i,a):b._visibility&2?oi(i,a,l,d):(b._visibility|=2,Ko(i,a,l,d,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Um(S,a);break;case 24:oi(i,a,l,d),y&2048&&jm(a.alternate,a);break;default:oi(i,a,l,d)}}function Ko(i,a,l,d,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,S=a,I=l,F=d,Z=S.flags;switch(S.tag){case 0:case 11:case 15:Ko(b,S,I,F,y),yc(8,S);break;case 23:break;case 22:var le=S.stateNode;S.memoizedState!==null?le._visibility&2?Ko(b,S,I,F,y):bc(b,S):(le._visibility|=2,Ko(b,S,I,F,y)),y&&Z&2048&&Um(S.alternate,S);break;case 24:Ko(b,S,I,F,y),y&&Z&2048&&jm(S.alternate,S);break;default:Ko(b,S,I,F,y)}a=a.sibling}}function bc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,d=a,y=d.flags;switch(d.tag){case 22:bc(l,d),y&2048&&Um(d.alternate,d);break;case 24:bc(l,d),y&2048&&jm(d.alternate,d);break;default:bc(l,d)}a=a.sibling}}var _c=8192;function $o(i,a,l){if(i.subtreeFlags&_c)for(i=i.child;i!==null;)Wy(i,a,l),i=i.sibling}function Wy(i,a,l){switch(i.tag){case 26:$o(i,a,l),i.flags&_c&&i.memoizedState!==null&&pk(l,ai,i.memoizedState,i.memoizedProps);break;case 5:$o(i,a,l);break;case 3:case 4:var d=ai;ai=Ad(i.stateNode.containerInfo),$o(i,a,l),ai=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=_c,_c=16777216,$o(i,a,l),_c=d):$o(i,a,l));break;default:$o(i,a,l)}}function Xy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Tc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];wn=d,ev(d,i)}Xy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zy(i),i=i.sibling}function Zy(i){switch(i.tag){case 0:case 11:case 15:Tc(i),i.flags&2048&&Fr(9,i,i.return);break;case 3:Tc(i);break;case 12:Tc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,fd(i)):Tc(i);break;default:Tc(i)}}function fd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];wn=d,ev(d,i)}Xy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Fr(8,a,a.return),fd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,fd(a));break;default:fd(a)}i=i.sibling}}function ev(i,a){for(;wn!==null;){var l=wn;switch(l.tag){case 0:case 11:case 15:Fr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:rc(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,wn=d;else e:for(l=i;wn!==null;){d=wn;var y=d.sibling,b=d.return;if(Fy(d),d===l){wn=null;break e}if(y!==null){y.return=b,wn=y;break e}wn=b}}}var C1={getCacheForType:function(i){var a=Rn(mn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Rn(mn).controller.signal}},R1=typeof WeakMap=="function"?WeakMap:Map,kt=0,Gt=null,dt=null,mt=0,Dt=0,Ts=null,qr=!1,Yo=!1,Vm=!1,lr=0,tn=0,Kr=0,Xa=0,Om=0,Es=0,Jo=0,Ec=null,as=null,Gm=!1,hd=0,tv=0,md=1/0,pd=null,$r=null,En=0,Yr=null,Qo=null,cr=0,Bm=0,Hm=null,nv=null,Sc=0,zm=null;function Ss(){return(kt&2)!==0&&mt!==0?mt&-mt:K.T!==null?Jm():vo()}function sv(){if(Es===0)if((mt&536870912)===0||vt){var i=bi;bi<<=1,(bi&3932160)===0&&(bi=262144),Es=i}else Es=536870912;return i=bs.current,i!==null&&(i.flags|=32),Es}function os(i,a,l){(i===Gt&&(Dt===2||Dt===9)||i.cancelPendingCommit!==null)&&(Wo(i,0),Jr(i,mt,Es,!1)),Fi(i,l),((kt&2)===0||i!==Gt)&&(i===Gt&&((kt&2)===0&&(Xa|=l),tn===4&&Jr(i,mt,Es,!1)),Mi(i))}function iv(i,a,l){if((kt&6)!==0)throw Error(s(327));var d=!l&&(a&127)===0&&(a&i.expiredLanes)===0||hs(i,a),y=d?P1(i,a):qm(i,a,!0),b=d;do{if(y===0){Yo&&!d&&Jr(i,a,0,!1);break}else{if(l=i.current.alternate,b&&!M1(l)){y=qm(i,a,!1),b=!1;continue}if(y===2){if(b=a,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var I=i;y=Ec;var F=I.current.memoizedState.isDehydrated;if(F&&(Wo(I,S).flags|=256),S=qm(I,S,!1),S!==2){if(Vm&&!F){I.errorRecoveryDisabledLanes|=b,Xa|=b,y=4;break e}b=as,as=y,b!==null&&(as===null?as=b:as.push.apply(as,b))}y=S}if(b=!1,y!==2)continue}}if(y===1){Wo(i,0),Jr(i,a,0,!0);break}e:{switch(d=i,b=y,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Jr(d,a,Es,!qr);break e;case 2:as=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(y=hd+300-ht(),10<y)){if(Jr(d,a,Es,!qr),Is(d,0,!0)!==0)break e;cr=a,d.timeoutHandle=Lv(rv.bind(null,d,l,as,pd,Gm,a,Es,Xa,Jo,qr,b,"Throttled",-0,0),y);break e}rv(d,l,as,pd,Gm,a,Es,Xa,Jo,qr,b,null,-0,0)}}break}while(!0);Mi(i)}function rv(i,a,l,d,y,b,S,I,F,Z,le,me,ee,ae){if(i.timeoutHandle=-1,me=a.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},Wy(a,b,me);var Me=(b&62914560)===b?hd-ht():(b&4194048)===b?tv-ht():0;if(Me=gk(me,Me),Me!==null){cr=b,i.cancelPendingCommit=Me(hv.bind(null,i,a,b,l,d,y,S,I,F,le,me,null,ee,ae)),Jr(i,b,S,!Z);return}}hv(i,a,b,l,d,y,S,I,F)}function M1(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],b=y.getSnapshot;y=y.value;try{if(!ys(b(),y))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Jr(i,a,l,d){a&=~Om,a&=~Xa,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var y=a;0<y;){var b=31-Yt(y),S=1<<b;d[b]=-1,y&=~S}l!==0&&qi(i,l,a)}function gd(){return(kt&6)===0?(Ac(0),!1):!0}function Fm(){if(dt!==null){if(Dt===0)var i=dt.return;else i=dt,Xi=za=null,am(i),Bo=null,oc=0,i=dt;for(;i!==null;)Uy(i.alternate,i),i=i.return;dt=null}}function Wo(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,X1(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),cr=0,Fm(),Gt=i,dt=l=Qi(i.current,null),mt=a,Dt=0,Ts=null,qr=!1,Yo=hs(i,a),Vm=!1,Jo=Es=Om=Xa=Kr=tn=0,as=Ec=null,Gm=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var y=31-Yt(d),b=1<<y;a|=i[y],d&=~b}return lr=a,ju(),l}function av(i,a){rt=null,K.H=pc,a===Go||a===qu?(a=Tx(),Dt=3):a===Yh?(a=Tx(),Dt=4):Dt=a===Tm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ts=a,dt===null&&(tn=1,rd(i,Gs(a,i.current)))}function ov(){var i=bs.current;return i===null?!0:(mt&4194048)===mt?Fs===null:(mt&62914560)===mt||(mt&536870912)!==0?i===Fs:!1}function lv(){var i=K.H;return K.H=pc,i===null?pc:i}function cv(){var i=K.A;return K.A=C1,i}function xd(){tn=4,qr||(mt&4194048)!==mt&&bs.current!==null||(Yo=!0),(Kr&134217727)===0&&(Xa&134217727)===0||Gt===null||Jr(Gt,mt,Es,!1)}function qm(i,a,l){var d=kt;kt|=2;var y=lv(),b=cv();(Gt!==i||mt!==a)&&(pd=null,Wo(i,a)),a=!1;var S=tn;e:do try{if(Dt!==0&&dt!==null){var I=dt,F=Ts;switch(Dt){case 8:Fm(),S=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(a=!0);var Z=Dt;if(Dt=0,Ts=null,Xo(i,I,F,Z),l&&Yo){S=0;break e}break;default:Z=Dt,Dt=0,Ts=null,Xo(i,I,F,Z)}}D1(),S=tn;break}catch(le){av(i,le)}while(!0);return a&&i.shellSuspendCounter++,Xi=za=null,kt=d,K.H=y,K.A=b,dt===null&&(Gt=null,mt=0,ju()),S}function D1(){for(;dt!==null;)uv(dt)}function P1(i,a){var l=kt;kt|=2;var d=lv(),y=cv();Gt!==i||mt!==a?(pd=null,md=ht()+500,Wo(i,a)):Yo=hs(i,a);e:do try{if(Dt!==0&&dt!==null){a=dt;var b=Ts;t:switch(Dt){case 1:Dt=0,Ts=null,Xo(i,a,b,1);break;case 2:case 9:if(bx(b)){Dt=0,Ts=null,dv(a);break}a=function(){Dt!==2&&Dt!==9||Gt!==i||(Dt=7),Mi(i)},b.then(a,a);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:bx(b)?(Dt=0,Ts=null,dv(a)):(Dt=0,Ts=null,Xo(i,a,b,7));break;case 5:var S=null;switch(dt.tag){case 26:S=dt.memoizedState;case 5:case 27:var I=dt;if(S?Qv(S):I.stateNode.complete){Dt=0,Ts=null;var F=I.sibling;if(F!==null)dt=F;else{var Z=I.return;Z!==null?(dt=Z,yd(Z)):dt=null}break t}}Dt=0,Ts=null,Xo(i,a,b,5);break;case 6:Dt=0,Ts=null,Xo(i,a,b,6);break;case 8:Fm(),tn=6;break e;default:throw Error(s(462))}}L1();break}catch(le){av(i,le)}while(!0);return Xi=za=null,K.H=d,K.A=y,kt=l,dt!==null?0:(Gt=null,mt=0,ju(),tn)}function L1(){for(;dt!==null&&!We();)uv(dt)}function uv(i){var a=Py(i.alternate,i,lr);i.memoizedProps=i.pendingProps,a===null?yd(i):dt=a}function dv(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=ky(l,a,a.pendingProps,a.type,void 0,mt);break;case 11:a=ky(l,a,a.pendingProps,a.type.render,a.ref,mt);break;case 5:am(a);default:Uy(l,a),a=dt=cx(a,lr),a=Py(l,a,lr)}i.memoizedProps=i.pendingProps,a===null?yd(i):dt=a}function Xo(i,a,l,d){Xi=za=null,am(a),Bo=null,oc=0;var y=a.return;try{if(E1(i,y,a,l,mt)){tn=1,rd(i,Gs(l,i.current)),dt=null;return}}catch(b){if(y!==null)throw dt=y,b;tn=1,rd(i,Gs(l,i.current)),dt=null;return}a.flags&32768?(vt||d===1?i=!0:Yo||(mt&536870912)!==0?i=!1:(qr=i=!0,(d===2||d===9||d===3||d===6)&&(d=bs.current,d!==null&&d.tag===13&&(d.flags|=16384))),fv(a,i)):yd(a)}function yd(i){var a=i;do{if((a.flags&32768)!==0){fv(a,qr);return}i=a.return;var l=w1(a.alternate,a,lr);if(l!==null){dt=l;return}if(a=a.sibling,a!==null){dt=a;return}dt=a=i}while(a!==null);tn===0&&(tn=5)}function fv(i,a){do{var l=N1(i.alternate,i);if(l!==null){l.flags&=32767,dt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){dt=i;return}dt=i=l}while(i!==null);tn=6,dt=null}function hv(i,a,l,d,y,b,S,I,F){i.cancelPendingCommit=null;do vd();while(En!==0);if((kt&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=Dh,Fl(i,l,b,S,I,F),i===Gt&&(dt=Gt=null,mt=0),Qo=a,Yr=i,cr=l,Bm=b,Hm=y,nv=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,O1($n,function(){return yv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=K.T,K.T=null,y=fe.p,fe.p=2,S=kt,kt|=4;try{k1(i,a,l)}finally{kt=S,fe.p=y,K.T=d}}En=1,mv(),pv(),gv()}}function mv(){if(En===1){En=0;var i=Yr,a=Qo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=K.T,K.T=null;var d=fe.p;fe.p=2;var y=kt;kt|=4;try{Yy(a,i);var b=sp,S=ex(i.containerInfo),I=b.focusedElem,F=b.selectionRange;if(S!==I&&I&&I.ownerDocument&&Zg(I.ownerDocument.documentElement,I)){if(F!==null&&kh(I)){var Z=F.start,le=F.end;if(le===void 0&&(le=Z),"selectionStart"in I)I.selectionStart=Z,I.selectionEnd=Math.min(le,I.value.length);else{var me=I.ownerDocument||document,ee=me&&me.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),Me=I.textContent.length,Be=Math.min(F.start,Me),Vt=F.end===void 0?Be:Math.min(F.end,Me);!ae.extend&&Be>Vt&&(S=Vt,Vt=Be,Be=S);var J=Xg(I,Be),q=Xg(I,Vt);if(J&&q&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var X=me.createRange();X.setStart(J.node,J.offset),ae.removeAllRanges(),Be>Vt?(ae.addRange(X),ae.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ae.addRange(X))}}}}for(me=[],ae=I;ae=ae.parentNode;)ae.nodeType===1&&me.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<me.length;I++){var de=me[I];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Rd=!!np,sp=np=null}finally{kt=y,fe.p=d,K.T=l}}i.current=a,En=2}}function pv(){if(En===2){En=0;var i=Yr,a=Qo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=K.T,K.T=null;var d=fe.p;fe.p=2;var y=kt;kt|=4;try{zy(i,a.alternate,a)}finally{kt=y,fe.p=d,K.T=l}}En=3}}function gv(){if(En===4||En===3){En=0,wt();var i=Yr,a=Qo,l=cr,d=nv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?En=5:(En=0,Qo=Yr=null,xv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&($r=null),Rs(l),a=a.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(dn,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=K.T,y=fe.p,fe.p=2,K.T=null;try{for(var b=i.onRecoverableError,S=0;S<d.length;S++){var I=d[S];b(I.value,{componentStack:I.stack})}}finally{K.T=a,fe.p=y}}(cr&3)!==0&&vd(),Mi(i),y=i.pendingLanes,(l&261930)!==0&&(y&42)!==0?i===zm?Sc++:(Sc=0,zm=i):Sc=0,Ac(0)}}function xv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,rc(a)))}function vd(){return mv(),pv(),gv(),yv()}function yv(){if(En!==5)return!1;var i=Yr,a=Bm;Bm=0;var l=Rs(cr),d=K.T,y=fe.p;try{fe.p=32>l?32:l,K.T=null,l=Hm,Hm=null;var b=Yr,S=cr;if(En=0,Qo=Yr=null,cr=0,(kt&6)!==0)throw Error(s(331));var I=kt;if(kt|=4,Zy(b.current),Qy(b,b.current,S,l),kt=I,Ac(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(dn,b)}catch{}return!0}finally{fe.p=y,K.T=d,xv(i,a)}}function vv(i,a,l){a=Gs(l,a),a=_m(i.stateNode,a,2),i=Br(i,a,2),i!==null&&(Fi(i,2),Mi(i))}function Pt(i,a,l){if(i.tag===3)vv(i,i,l);else for(;a!==null;){if(a.tag===3){vv(a,i,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&($r===null||!$r.has(d))){i=Gs(l,i),l=by(2),d=Br(a,l,2),d!==null&&(_y(l,d,a,i),Fi(d,2),Mi(d));break}}a=a.return}}function Km(i,a,l){var d=i.pingCache;if(d===null){d=i.pingCache=new R1;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(l)||(Vm=!0,y.add(l),i=U1.bind(null,i,a,l),a.then(i,i))}function U1(i,a,l){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Gt===i&&(mt&l)===l&&(tn===4||tn===3&&(mt&62914560)===mt&&300>ht()-hd?(kt&2)===0&&Wo(i,0):Om|=l,Jo===mt&&(Jo=0)),Mi(i)}function bv(i,a){a===0&&(a=Na()),i=Ga(i,a),i!==null&&(Fi(i,a),Mi(i))}function j1(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),bv(i,l)}function V1(i,a){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(a),bv(i,l)}function O1(i,a){return ge(i,a)}var bd=null,Zo=null,$m=!1,_d=!1,Ym=!1,Qr=0;function Mi(i){i!==Zo&&i.next===null&&(Zo===null?bd=Zo=i:Zo=Zo.next=i),_d=!0,$m||($m=!0,B1())}function Ac(i,a){if(!Ym&&_d){Ym=!0;do for(var l=!1,d=bd;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var S=d.suspendedLanes,I=d.pingedLanes;b=(1<<31-Yt(42|i)+1)-1,b&=y&~(S&~I),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Sv(d,b))}else b=mt,b=Is(d,d===Gt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||hs(d,b)||(l=!0,Sv(d,b));d=d.next}while(l);Ym=!1}}function G1(){_v()}function _v(){_d=$m=!1;var i=0;Qr!==0&&W1()&&(i=Qr);for(var a=ht(),l=null,d=bd;d!==null;){var y=d.next,b=Tv(d,a);b===0?(d.next=null,l===null?bd=y:l.next=y,y===null&&(Zo=l)):(l=d,(i!==0||(b&3)!==0)&&(_d=!0)),d=y}En!==0&&En!==5||Ac(i),Qr!==0&&(Qr=0)}function Tv(i,a){for(var l=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-Yt(b),I=1<<S,F=y[S];F===-1?((I&l)===0||(I&d)!==0)&&(y[S]=zl(I,a)):F<=a&&(i.expiredLanes|=I),b&=~I}if(a=Gt,l=mt,l=Is(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===a&&(Dt===2||Dt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Ee(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||hs(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(d!==null&&Ee(d),Rs(l)){case 2:case 8:l=us;break;case 32:l=$n;break;case 268435456:l=Xs;break;default:l=$n}return d=Ev.bind(null,i),l=ge(l,d),i.callbackPriority=a,i.callbackNode=l,a}return d!==null&&d!==null&&Ee(d),i.callbackPriority=2,i.callbackNode=null,2}function Ev(i,a){if(En!==0&&En!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(vd()&&i.callbackNode!==l)return null;var d=mt;return d=Is(i,i===Gt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(iv(i,d,a),Tv(i,ht()),i.callbackNode!=null&&i.callbackNode===l?Ev.bind(null,i):null)}function Sv(i,a){if(vd())return null;iv(i,a,!0)}function B1(){Z1(function(){(kt&6)!==0?ge(ks,G1):_v()})}function Jm(){if(Qr===0){var i=Vo;i===0&&(i=st,st<<=1,(st&261888)===0&&(st=256)),Qr=i}return Qr}function Av(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Eo(""+i)}function wv(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function H1(i,a,l,d,y){if(a==="submit"&&l&&l.stateNode===y){var b=Av((y[fn]||null).action),S=d.submitter;S&&(a=(a=S[fn]||null)?Av(a.formAction):S.getAttribute("formAction"),a!==null&&(b=a,S=null));var I=new Ai("action","action",null,d,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Qr!==0){var F=S?wv(y,S):new FormData(y);pm(l,{pending:!0,data:F,method:y.method,action:b},null,F)}}else typeof b=="function"&&(I.preventDefault(),F=S?wv(y,S):new FormData(y),pm(l,{pending:!0,data:F,method:y.method,action:b},b,F))},currentTarget:y}]})}}for(var Qm=0;Qm<Mh.length;Qm++){var Wm=Mh[Qm],z1=Wm.toLowerCase(),F1=Wm[0].toUpperCase()+Wm.slice(1);ri(z1,"on"+F1)}ri(sx,"onAnimationEnd"),ri(ix,"onAnimationIteration"),ri(rx,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(a1,"onTransitionRun"),ri(o1,"onTransitionStart"),ri(l1,"onTransitionCancel"),ri(ax,"onTransitionEnd"),Ue("onMouseEnter",["mouseout","mouseover"]),Ue("onMouseLeave",["mouseout","mouseover"]),Ue("onPointerEnter",["pointerout","pointerover"]),Ue("onPointerLeave",["pointerout","pointerover"]),Ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wc));function Nv(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],y=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var S=d.length-1;0<=S;S--){var I=d[S],F=I.instance,Z=I.currentTarget;if(I=I.listener,F!==b&&y.isPropagationStopped())break e;b=I,y.currentTarget=Z;try{b(y)}catch(le){Uu(le)}y.currentTarget=null,b=F}else for(S=0;S<d.length;S++){if(I=d[S],F=I.instance,Z=I.currentTarget,I=I.listener,F!==b&&y.isPropagationStopped())break e;b=I,y.currentTarget=Z;try{b(y)}catch(le){Uu(le)}y.currentTarget=null,b=F}}}}function ft(i,a){var l=a[xs];l===void 0&&(l=a[xs]=new Set);var d=i+"__bubble";l.has(d)||(kv(a,i,2,!1),l.add(d))}function Xm(i,a,l){var d=0;a&&(d|=4),kv(l,i,d,a)}var Td="_reactListening"+Math.random().toString(36).slice(2);function Zm(i){if(!i[Td]){i[Td]=!0,Q.forEach(function(l){l!=="selectionchange"&&(q1.has(l)||Xm(l,!1,i),Xm(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Td]||(a[Td]=!0,Xm("selectionchange",!1,a))}}function kv(i,a,l,d){switch(sb(a)){case 2:var y=vk;break;case 8:y=bk;break;default:y=mp}l=y.bind(null,a,l,i),y=void 0,!Ma||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(a,l,{capture:!0,passive:y}):i.addEventListener(a,l,!0):y!==void 0?i.addEventListener(a,l,{passive:y}):i.addEventListener(a,l,!1)}function ep(i,a,l,d,y){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var I=d.stateNode.containerInfo;if(I===y)break;if(S===4)for(S=d.return;S!==null;){var F=S.tag;if((F===3||F===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;I!==null;){if(S=Ds(I),S===null)return;if(F=S.tag,F===5||F===6||F===26||F===27){d=b=S;continue e}I=I.parentNode}}d=d.return}Rr(function(){var Z=b,le=Us(l),me=[];e:{var ee=ox.get(i);if(ee!==void 0){var ae=Ai,Me=i;switch(i){case"keypress":if(Pa(l)===0)break e;case"keydown":case"keyup":ae=Du;break;case"focusin":Me="focus",ae=Ua;break;case"focusout":Me="blur",ae=Ua;break;case"beforeblur":case"afterblur":ae=Ua;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=E;break;case sx:case ix:case rx:ae=wu;break;case ax:ae=L;break;case"scroll":case"scrollend":ae=Ql;break;case"wheel":ae=ie;break;case"copy":case"cut":case"paste":ae=Nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Ji;break;case"toggle":case"beforetoggle":ae=it}var Be=(a&4)!==0,Vt=!Be&&(i==="scroll"||i==="scrollend"),J=Be?ee!==null?ee+"Capture":null:ee;Be=[];for(var q=Z,X;q!==null;){var de=q;if(X=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||X===null||J===null||(de=ti(q,J),de!=null&&Be.push(Nc(q,de,X))),Vt)break;q=q.return}0<Be.length&&(ee=new ae(ee,Me,null,l,le),me.push({event:ee,listeners:Be}))}}if((a&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",ee&&l!==$l&&(Me=l.relatedTarget||l.fromElement)&&(Ds(Me)||Me[gs]))break e;if((ae||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Me=l.relatedTarget||l.toElement,ae=Z,Me=Me?Ds(Me):null,Me!==null&&(Vt=o(Me),Be=Me.tag,Me!==Vt||Be!==5&&Be!==27&&Be!==6)&&(Me=null)):(ae=null,Me=Z),ae!==Me)){if(Be=Wl,de="onMouseLeave",J="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Be=Ji,de="onPointerLeave",J="onPointerEnter",q="pointer"),Vt=ae==null?ee:Yn(ae),X=Me==null?ee:Yn(Me),ee=new Be(de,q+"leave",ae,l,le),ee.target=Vt,ee.relatedTarget=X,de=null,Ds(le)===Z&&(Be=new Be(J,q+"enter",Me,l,le),Be.target=X,Be.relatedTarget=Vt,de=Be),Vt=de,ae&&Me)t:{for(Be=K1,J=ae,q=Me,X=0,de=J;de;de=Be(de))X++;de=0;for(var je=q;je;je=Be(je))de++;for(;0<X-de;)J=Be(J),X--;for(;0<de-X;)q=Be(q),de--;for(;X--;){if(J===q||q!==null&&J===q.alternate){Be=J;break t}J=Be(J),q=Be(q)}Be=null}else Be=null;ae!==null&&Iv(me,ee,ae,Be,!1),Me!==null&&Vt!==null&&Iv(me,Vt,Me,Be,!0)}}e:{if(ee=Z?Yn(Z):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var Et=Kg;else if(Fg(ee))if($g)Et=s1;else{Et=t1;var Pe=e1}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&To(Z.elementType)&&(Et=Kg):Et=n1;if(Et&&(Et=Et(i,Z))){qg(me,Et,l,le);break e}Pe&&Pe(i,ee,Z),i==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&Nr(ee,"number",ee.value)}switch(Pe=Z?Yn(Z):window,i){case"focusin":(Fg(Pe)||Pe.contentEditable==="true")&&(Co=Pe,Ih=Z,nc=null);break;case"focusout":nc=Ih=Co=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,tx(me,l,le);break;case"selectionchange":if(r1)break;case"keydown":case"keyup":tx(me,l,le)}var at;if(Nt)e:{switch(i){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Io?ja(i,l)&&(pt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(pt="onCompositionStart");pt&&(ki&&l.locale!=="ko"&&(Io||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Io&&(at=Jl()):(Si=le,Yl="value"in Si?Si.value:Si.textContent,Io=!0)),Pe=Ed(Z,pt),0<Pe.length&&(pt=new Ni(pt,i,null,l,le),me.push({event:pt,listeners:Pe}),at?pt.data=at:(at=ko(l),at!==null&&(pt.data=at)))),(at=Vs?QN(i,l):WN(i,l))&&(pt=Ed(Z,"onBeforeInput"),0<pt.length&&(Pe=new Ni("onBeforeInput","beforeinput",null,l,le),me.push({event:Pe,listeners:pt}),Pe.data=at)),H1(me,i,Z,l,le)}Nv(me,a)})}function Nc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Ed(i,a){for(var l=a+"Capture",d=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=ti(i,l),y!=null&&d.unshift(Nc(i,y,b)),y=ti(i,a),y!=null&&d.push(Nc(i,y,b))),i.tag===3)return d;i=i.return}return[]}function K1(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Iv(i,a,l,d,y){for(var b=a._reactName,S=[];l!==null&&l!==d;){var I=l,F=I.alternate,Z=I.stateNode;if(I=I.tag,F!==null&&F===d)break;I!==5&&I!==26&&I!==27||Z===null||(F=Z,y?(Z=ti(l,b),Z!=null&&S.unshift(Nc(l,Z,F))):y||(Z=ti(l,b),Z!=null&&S.push(Nc(l,Z,F)))),l=l.return}S.length!==0&&i.push({event:a,listeners:S})}var $1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function Cv(i){return(typeof i=="string"?i:""+i).replace($1,`
`).replace(Y1,"")}function Rv(i,a){return a=Cv(a),Cv(i)===a}function jt(i,a,l,d,y,b){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||ns(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&ns(i,""+d);break;case"className":Xe(i,"class",d);break;case"tabIndex":Xe(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Xe(i,l,d);break;case"style":Kl(i,d,b);break;case"data":if(a!=="object"){Xe(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Eo(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(a!=="input"&&jt(i,a,"name",y.name,y,null),jt(i,a,"formEncType",y.formEncType,y,null),jt(i,a,"formMethod",y.formMethod,y,null),jt(i,a,"formTarget",y.formTarget,y,null)):(jt(i,a,"encType",y.encType,y,null),jt(i,a,"method",y.method,y,null),jt(i,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Eo(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=ei);break;case"onScroll":d!=null&&ft("scroll",i);break;case"onScrollEnd":d!=null&&ft("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=Eo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":ft("beforetoggle",i),ft("toggle",i),_t(i,"popover",d);break;case"xlinkActuate":ct(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ct(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ct(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ct(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ct(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ct(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ct(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ct(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ct(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":_t(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Eu.get(l)||l,_t(i,l,d))}}function tp(i,a,l,d,y,b){switch(l){case"style":Kl(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof d=="string"?ns(i,d):(typeof d=="number"||typeof d=="bigint")&&ns(i,""+d);break;case"onScroll":d!=null&&ft("scroll",i);break;case"onScrollEnd":d!=null&&ft("scrollend",i);break;case"onClick":d!=null&&(i.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ve.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),a=l.slice(2,y?l.length-7:void 0),b=i[fn]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(a,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,d,y);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):_t(i,l,d)}}}function Dn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",i),ft("load",i);var d=!1,y=!1,b;for(b in l)if(l.hasOwnProperty(b)){var S=l[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:jt(i,a,b,S,l,null)}}y&&jt(i,a,"srcSet",l.srcSet,l,null),d&&jt(i,a,"src",l.src,l,null);return;case"input":ft("invalid",i);var I=b=S=y=null,F=null,Z=null;for(d in l)if(l.hasOwnProperty(d)){var le=l[d];if(le!=null)switch(d){case"name":y=le;break;case"type":S=le;break;case"checked":F=le;break;case"defaultChecked":Z=le;break;case"value":b=le;break;case"defaultValue":I=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,a));break;default:jt(i,a,d,le,l,null)}}_i(i,b,I,F,Z,S,y,!1);return;case"select":ft("invalid",i),d=S=b=null;for(y in l)if(l.hasOwnProperty(y)&&(I=l[y],I!=null))switch(y){case"value":b=I;break;case"defaultValue":S=I;break;case"multiple":d=I;default:jt(i,a,y,I,l,null)}a=b,l=S,i.multiple=!!d,a!=null?Ti(i,!!d,a,!1):l!=null&&Ti(i,!!d,l,!0);return;case"textarea":ft("invalid",i),b=y=d=null;for(S in l)if(l.hasOwnProperty(S)&&(I=l[S],I!=null))switch(S){case"value":d=I;break;case"defaultValue":y=I;break;case"children":b=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:jt(i,a,S,I,l,null)}kr(i,d,y,b);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(d=l[F],d!=null))switch(F){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:jt(i,a,F,d,l,null)}return;case"dialog":ft("beforetoggle",i),ft("toggle",i),ft("cancel",i),ft("close",i);break;case"iframe":case"object":ft("load",i);break;case"video":case"audio":for(d=0;d<wc.length;d++)ft(wc[d],i);break;case"image":ft("error",i),ft("load",i);break;case"details":ft("toggle",i);break;case"embed":case"source":case"link":ft("error",i),ft("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(d=l[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:jt(i,a,Z,d,l,null)}return;default:if(To(a)){for(le in l)l.hasOwnProperty(le)&&(d=l[le],d!==void 0&&tp(i,a,le,d,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(d=l[I],d!=null&&jt(i,a,I,d,l,null))}function J1(i,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,S=null,I=null,F=null,Z=null,le=null;for(ae in l){var me=l[ae];if(l.hasOwnProperty(ae)&&me!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=me;default:d.hasOwnProperty(ae)||jt(i,a,ae,null,d,me)}}for(var ee in d){var ae=d[ee];if(me=l[ee],d.hasOwnProperty(ee)&&(ae!=null||me!=null))switch(ee){case"type":b=ae;break;case"name":y=ae;break;case"checked":Z=ae;break;case"defaultChecked":le=ae;break;case"value":S=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:ae!==me&&jt(i,a,ee,ae,d,me)}}Ls(i,S,I,F,Z,le,b,y);return;case"select":ae=S=I=ee=null;for(b in l)if(F=l[b],l.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":ae=F;default:d.hasOwnProperty(b)||jt(i,a,b,null,d,F)}for(y in d)if(b=d[y],F=l[y],d.hasOwnProperty(y)&&(b!=null||F!=null))switch(y){case"value":ee=b;break;case"defaultValue":I=b;break;case"multiple":S=b;default:b!==F&&jt(i,a,y,b,d,F)}a=I,l=S,d=ae,ee!=null?Ti(i,!!l,ee,!1):!!d!=!!l&&(a!=null?Ti(i,!!l,a,!0):Ti(i,!!l,l?[]:"",!1));return;case"textarea":ae=ee=null;for(I in l)if(y=l[I],l.hasOwnProperty(I)&&y!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:jt(i,a,I,null,d,y)}for(S in d)if(y=d[S],b=l[S],d.hasOwnProperty(S)&&(y!=null||b!=null))switch(S){case"value":ee=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==b&&jt(i,a,S,y,d,b)}_u(i,ee,ae);return;case"option":for(var Me in l)if(ee=l[Me],l.hasOwnProperty(Me)&&ee!=null&&!d.hasOwnProperty(Me))switch(Me){case"selected":i.selected=!1;break;default:jt(i,a,Me,null,d,ee)}for(F in d)if(ee=d[F],ae=l[F],d.hasOwnProperty(F)&&ee!==ae&&(ee!=null||ae!=null))switch(F){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:jt(i,a,F,ee,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in l)ee=l[Be],l.hasOwnProperty(Be)&&ee!=null&&!d.hasOwnProperty(Be)&&jt(i,a,Be,null,d,ee);for(Z in d)if(ee=d[Z],ae=l[Z],d.hasOwnProperty(Z)&&ee!==ae&&(ee!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,a));break;default:jt(i,a,Z,ee,d,ae)}return;default:if(To(a)){for(var Vt in l)ee=l[Vt],l.hasOwnProperty(Vt)&&ee!==void 0&&!d.hasOwnProperty(Vt)&&tp(i,a,Vt,void 0,d,ee);for(le in d)ee=d[le],ae=l[le],!d.hasOwnProperty(le)||ee===ae||ee===void 0&&ae===void 0||tp(i,a,le,ee,d,ae);return}}for(var J in l)ee=l[J],l.hasOwnProperty(J)&&ee!=null&&!d.hasOwnProperty(J)&&jt(i,a,J,null,d,ee);for(me in d)ee=d[me],ae=l[me],!d.hasOwnProperty(me)||ee===ae||ee==null&&ae==null||jt(i,a,me,ee,d,ae)}function Mv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q1(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var y=l[d],b=y.transferSize,S=y.initiatorType,I=y.duration;if(b&&I&&Mv(S)){for(S=0,I=y.responseEnd,d+=1;d<l.length;d++){var F=l[d],Z=F.startTime;if(Z>I)break;var le=F.transferSize,me=F.initiatorType;le&&Mv(me)&&(F=F.responseEnd,S+=le*(F<I?1:(I-Z)/(F-Z)))}if(--d,a+=8*(b+S)/(y.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var np=null,sp=null;function Sd(i){return i.nodeType===9?i:i.ownerDocument}function Dv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function ip(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rp=null;function W1(){var i=window.event;return i&&i.type==="popstate"?i===rp?!1:(rp=i,!0):(rp=null,!1)}var Lv=typeof setTimeout=="function"?setTimeout:void 0,X1=typeof clearTimeout=="function"?clearTimeout:void 0,Uv=typeof Promise=="function"?Promise:void 0,Z1=typeof queueMicrotask=="function"?queueMicrotask:typeof Uv<"u"?function(i){return Uv.resolve(null).then(i).catch(ek)}:Lv;function ek(i){setTimeout(function(){throw i})}function Wr(i){return i==="head"}function jv(i,a){var l=a,d=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(y),sl(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")kc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,kc(l);for(var b=l.firstChild;b;){var S=b.nextSibling,I=b.nodeName;b[Ms]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=S}}else l==="body"&&kc(i.ownerDocument.body);l=y}while(l);sl(a)}function Vv(i,a){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function ap(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ap(l),wr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function tk(i,a,l,d){for(;i.nodeType===1;){var y=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ms])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=qs(i.nextSibling),i===null)break}return null}function nk(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=qs(i.nextSibling),i===null))return null;return i}function Ov(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=qs(i.nextSibling),i===null))return null;return i}function op(i){return i.data==="$?"||i.data==="$~"}function lp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function sk(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function qs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var cp=null;function Gv(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return qs(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function Bv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Hv(i,a,l){switch(a=Sd(l),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function kc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);wr(i)}var Ks=new Map,zv=new Set;function Ad(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ur=fe.d;fe.d={f:ik,r:rk,D:ak,C:ok,L:lk,m:ck,X:dk,S:uk,M:fk};function ik(){var i=ur.f(),a=gd();return i||a}function rk(i){var a=ts(i);a!==null&&a.tag===5&&a.type==="form"?ay(a):ur.r(i)}var el=typeof document>"u"?null:document;function Fv(i,a,l){var d=el;if(d&&typeof a=="string"&&a){var y=Tn(a);y='link[rel="'+i+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),zv.has(y)||(zv.add(y),i={rel:i,crossOrigin:l,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),Dn(a,"link",i),Jt(a),d.head.appendChild(a)))}}function ak(i){ur.D(i),Fv("dns-prefetch",i,null)}function ok(i,a){ur.C(i,a),Fv("preconnect",i,a)}function lk(i,a,l){ur.L(i,a,l);var d=el;if(d&&i&&a){var y='link[rel="preload"][as="'+Tn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Tn(l.imageSizes)+'"]')):y+='[href="'+Tn(i)+'"]';var b=y;switch(a){case"style":b=tl(i);break;case"script":b=nl(i)}Ks.has(b)||(i=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Ks.set(b,i),d.querySelector(y)!==null||a==="style"&&d.querySelector(Ic(b))||a==="script"&&d.querySelector(Cc(b))||(a=d.createElement("link"),Dn(a,"link",i),Jt(a),d.head.appendChild(a)))}}function ck(i,a){ur.m(i,a);var l=el;if(l&&i){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Tn(d)+'"][href="'+Tn(i)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=nl(i)}if(!Ks.has(b)&&(i=_({rel:"modulepreload",href:i},a),Ks.set(b,i),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Cc(b)))return}d=l.createElement("link"),Dn(d,"link",i),Jt(d),l.head.appendChild(d)}}}function uk(i,a,l){ur.S(i,a,l);var d=el;if(d&&i){var y=Ps(d).hoistableStyles,b=tl(i);a=a||"default";var S=y.get(b);if(!S){var I={loading:0,preload:null};if(S=d.querySelector(Ic(b)))I.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Ks.get(b))&&up(i,l);var F=S=d.createElement("link");Jt(F),Dn(F,"link",i),F._p=new Promise(function(Z,le){F.onload=Z,F.onerror=le}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,wd(S,a,d)}S={type:"stylesheet",instance:S,count:1,state:I},y.set(b,S)}}}function dk(i,a){ur.X(i,a);var l=el;if(l&&i){var d=Ps(l).hoistableScripts,y=nl(i),b=d.get(y);b||(b=l.querySelector(Cc(y)),b||(i=_({src:i,async:!0},a),(a=Ks.get(y))&&dp(i,a),b=l.createElement("script"),Jt(b),Dn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function fk(i,a){ur.M(i,a);var l=el;if(l&&i){var d=Ps(l).hoistableScripts,y=nl(i),b=d.get(y);b||(b=l.querySelector(Cc(y)),b||(i=_({src:i,async:!0,type:"module"},a),(a=Ks.get(y))&&dp(i,a),b=l.createElement("script"),Jt(b),Dn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function qv(i,a,l,d){var y=(y=xe.current)?Ad(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=tl(l.href),l=Ps(y).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=tl(l.href);var b=Ps(y).hoistableStyles,S=b.get(i);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=y.querySelector(Ic(i)))&&!b._p&&(S.instance=b,S.state.loading=5),Ks.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ks.set(i,l),b||hk(y,i,l,S.state))),a&&d===null)throw Error(s(528,""));return S}if(a&&d!==null)throw Error(s(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=nl(l),l=Ps(y).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function tl(i){return'href="'+Tn(i)+'"'}function Ic(i){return'link[rel="stylesheet"]['+i+"]"}function Kv(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function hk(i,a,l,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Dn(a,"link",l),Jt(a),i.head.appendChild(a))}function nl(i){return'[src="'+Tn(i)+'"]'}function Cc(i){return"script[async]"+i}function $v(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+Tn(l.href)+'"]');if(d)return a.instance=d,Jt(d),d;var y=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Jt(d),Dn(d,"style",y),wd(d,l.precedence,i),a.instance=d;case"stylesheet":y=tl(l.href);var b=i.querySelector(Ic(y));if(b)return a.state.loading|=4,a.instance=b,Jt(b),b;d=Kv(l),(y=Ks.get(y))&&up(d,y),b=(i.ownerDocument||i).createElement("link"),Jt(b);var S=b;return S._p=new Promise(function(I,F){S.onload=I,S.onerror=F}),Dn(b,"link",d),a.state.loading|=4,wd(b,l.precedence,i),a.instance=b;case"script":return b=nl(l.src),(y=i.querySelector(Cc(b)))?(a.instance=y,Jt(y),y):(d=l,(y=Ks.get(b))&&(d=_({},l),dp(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),Jt(y),Dn(y,"link",d),i.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,wd(d,l.precedence,i));return a.instance}function wd(i,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,S=0;S<d.length;S++){var I=d[S];if(I.dataset.precedence===a)b=I;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function up(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function dp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Nd=null;function Yv(i,a,l){if(Nd===null){var d=new Map,y=Nd=new Map;y.set(l,d)}else y=Nd,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),y=0;y<l.length;y++){var b=l[y];if(!(b[Ms]||b[Zt]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(a)||"";S=i+S;var I=d.get(S);I?I.push(b):d.set(S,[b])}}return d}function Jv(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function mk(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Qv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function pk(i,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=tl(d.href),b=a.querySelector(Ic(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=kd.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=b,Jt(b);return}b=a.ownerDocument||a,d=Kv(d),(y=Ks.get(y))&&up(d,y),b=b.createElement("link"),Jt(b);var S=b;S._p=new Promise(function(I,F){S.onload=I,S.onerror=F}),Dn(b,"link",d),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=kd.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var fp=0;function gk(i,a){return i.stylesheets&&i.count===0&&Cd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&Cd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&fp===0&&(fp=62500*Q1());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Cd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>fp?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function kd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Id=null;function Cd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Id=new Map,a.forEach(xk,i),Id=null,kd.call(i))}function xk(i,a){if(!(a.state.loading&4)){var l=Id.get(i);if(l)var d=l.get(null);else{l=new Map,Id.set(i,l);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var S=y[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),d=S)}d&&l.set(null,d)}y=a.instance,S=y.getAttribute("data-precedence"),b=l.get(S)||d,b===d&&l.set(null,y),l.set(S,y),this.count++,d=kd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),a.state.loading|=4}}var Rc={$$typeof:G,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function yk(i,a,l,d,y,b,S,I,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.hiddenUpdates=Cs(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Wv(i,a,l,d,y,b,S,I,F,Z,le,me){return i=new yk(i,a,l,S,F,Z,le,me,I),a=1,b===!0&&(a|=24),b=vs(3,null,null,a),i.current=b,b.stateNode=i,a=qh(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:a},Jh(b),i}function Xv(i){return i?(i=Do,i):Do}function Zv(i,a,l,d,y,b){y=Xv(y),d.context===null?d.context=y:d.pendingContext=y,d=Gr(a),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=Br(i,d,a),l!==null&&(os(l,i,a),cc(l,i,a))}function eb(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function hp(i,a){eb(i,a),(i=i.alternate)&&eb(i,a)}function tb(i){if(i.tag===13||i.tag===31){var a=Ga(i,67108864);a!==null&&os(a,i,67108864),hp(i,67108864)}}function nb(i){if(i.tag===13||i.tag===31){var a=Ss();a=Ki(a);var l=Ga(i,a);l!==null&&os(l,i,a),hp(i,a)}}var Rd=!0;function vk(i,a,l,d){var y=K.T;K.T=null;var b=fe.p;try{fe.p=2,mp(i,a,l,d)}finally{fe.p=b,K.T=y}}function bk(i,a,l,d){var y=K.T;K.T=null;var b=fe.p;try{fe.p=8,mp(i,a,l,d)}finally{fe.p=b,K.T=y}}function mp(i,a,l,d){if(Rd){var y=pp(d);if(y===null)ep(i,a,d,Md,l),ib(i,d);else if(Tk(y,i,a,l,d))d.stopPropagation();else if(ib(i,d),a&4&&-1<_k.indexOf(i)){for(;y!==null;){var b=ts(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=fs(b.pendingLanes);if(S!==0){var I=b;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var F=1<<31-Yt(S);I.entanglements[1]|=F,S&=~F}Mi(b),(kt&6)===0&&(md=ht()+500,Ac(0))}}break;case 31:case 13:I=Ga(b,2),I!==null&&os(I,b,2),gd(),hp(b,2)}if(b=pp(d),b===null&&ep(i,a,d,Md,l),b===y)break;y=b}y!==null&&d.stopPropagation()}else ep(i,a,d,null,l)}}function pp(i){return i=Us(i),gp(i)}var Md=null;function gp(i){if(Md=null,i=Ds(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=f(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Md=i,null}function sb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nn()){case ks:return 2;case us:return 8;case $n:case yi:return 32;case Xs:return 268435456;default:return 32}default:return 32}}var xp=!1,Xr=null,Zr=null,ea=null,Mc=new Map,Dc=new Map,ta=[],_k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ib(i,a){switch(i){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":Mc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(a.pointerId)}}function Pc(i,a,l,d,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},a!==null&&(a=ts(a),a!==null&&tb(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function Tk(i,a,l,d,y){switch(a){case"focusin":return Xr=Pc(Xr,i,a,l,d,y),!0;case"dragenter":return Zr=Pc(Zr,i,a,l,d,y),!0;case"mouseover":return ea=Pc(ea,i,a,l,d,y),!0;case"pointerover":var b=y.pointerId;return Mc.set(b,Pc(Mc.get(b)||null,i,a,l,d,y)),!0;case"gotpointercapture":return b=y.pointerId,Dc.set(b,Pc(Dc.get(b)||null,i,a,l,d,y)),!0}return!1}function rb(i){var a=Ds(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,ms(i.priority,function(){nb(l)});return}}else if(a===31){if(a=f(l),a!==null){i.blockedOn=a,ms(i.priority,function(){nb(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Dd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=pp(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);$l=d,l.target.dispatchEvent(d),$l=null}else return a=ts(l),a!==null&&tb(a),i.blockedOn=l,!1;a.shift()}return!0}function ab(i,a,l){Dd(i)&&l.delete(a)}function Ek(){xp=!1,Xr!==null&&Dd(Xr)&&(Xr=null),Zr!==null&&Dd(Zr)&&(Zr=null),ea!==null&&Dd(ea)&&(ea=null),Mc.forEach(ab),Dc.forEach(ab)}function Pd(i,a){i.blockedOn===a&&(i.blockedOn=null,xp||(xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ek)))}var Ld=null;function ob(i){Ld!==i&&(Ld=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ld===i&&(Ld=null);for(var a=0;a<i.length;a+=3){var l=i[a],d=i[a+1],y=i[a+2];if(typeof d!="function"){if(gp(d||l)===null)continue;break}var b=ts(l);b!==null&&(i.splice(a,3),a-=3,pm(b,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function sl(i){function a(F){return Pd(F,i)}Xr!==null&&Pd(Xr,i),Zr!==null&&Pd(Zr,i),ea!==null&&Pd(ea,i),Mc.forEach(a),Dc.forEach(a);for(var l=0;l<ta.length;l++){var d=ta[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<ta.length&&(l=ta[0],l.blockedOn===null);)rb(l),l.blockedOn===null&&ta.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],b=l[d+1],S=y[fn]||null;if(typeof b=="function")S||ob(l);else if(S){var I=null;if(b&&b.hasAttribute("formAction")){if(y=b,S=b[fn]||null)I=S.formAction;else if(gp(y)!==null)continue}else I=S.action;typeof I=="function"?l[d+1]=I:(l.splice(d,3),d-=3),ob(l)}}}function lb(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function yp(i){this._internalRoot=i}Ud.prototype.render=yp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var l=a.current,d=Ss();Zv(l,d,i,a,null,null)},Ud.prototype.unmount=yp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Zv(i.current,2,null,i,null,null),gd(),a[gs]=null}};function Ud(i){this._internalRoot=i}Ud.prototype.unstable_scheduleHydration=function(i){if(i){var a=vo();i={blockedOn:null,target:i,priority:a};for(var l=0;l<ta.length&&a!==0&&a<ta[l].priority;l++);ta.splice(l,0,i),l===0&&rb(i)}};var cb=e.version;if(cb!=="19.2.3")throw Error(s(527,cb,"19.2.3"));fe.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var Sk={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{dn=jd.inject(Sk),Rt=jd}catch{}}return Uc.createRoot=function(i,a){if(!r(i))throw Error(s(299));var l=!1,d="",y=gy,b=xy,S=yy;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=Wv(i,1,!1,null,null,l,d,null,y,b,S,lb),i[gs]=a.current,Zm(i),new yp(a)},Uc.hydrateRoot=function(i,a,l){if(!r(i))throw Error(s(299));var d=!1,y="",b=gy,S=xy,I=yy,F=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=Wv(i,1,!0,a,l??null,d,y,F,b,S,I,lb),a.context=Xv(null),l=a.current,d=Ss(),d=Ki(d),y=Gr(d),y.callback=null,Br(l,y,d),l=d,a.current.lanes=l,Fi(a,l),Mi(a),i[gs]=a.current,Zm(i),new Ud(a)},Uc.version="19.2.3",Uc}var vb;function Lk(){if(vb)return _p.exports;vb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_p.exports=Pk(),_p.exports}var Uk=Lk();const jk=lS(Uk);var Ge=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(Ge||{});const ff="https://files.catbox.moe/02xqjo.png",bb={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3"},_b=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],Hp=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"Seleksi Lanjutan I PKN STAN",desc:"TPA, TBI, & Psikotes Kedinasan"},{id:"PSIKOTEST",name:"Tes Koran & IQ",desc:"IQ, Koran/Pauli, & Kognitif"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],Vk=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],Ok=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],Gk=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],Bk=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],Hk=["TIU - Verbal & Numerik","TIU - Logika (Silogisme/Analitis)","Tes Logika Gambar (Abstrak)","Tes Kepribadian (EPPS/Sikap Kerja)"],zk=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],Fk=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],Tb=[],Eb=[],Sb=[],Ab=[],wb=[],Nb=[],kb=[],Ib=[],Di=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var qk={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Kk,$k;function Yk(){return{geminiUrl:Kk,vertexUrl:$k}}function Jk(n,e,t,s){var r,o;if(!(n!=null&&n.baseUrl)){const u=Yk();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(o=u.geminiUrl)!==null&&o!==void 0?o:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Er{}function Ne(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(n,e,t){for(let o=0;o<e.length-1;o++){const u=e[o];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let p=0;p<m.length;p++){const v=m[p];g(v,e.slice(o+1),t[p])}else for(const p of m)g(p,e.slice(o+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];g(m[0],e.slice(o+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function h(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in n){const u=n[o];return Array.isArray(u)?u.map(f=>h(f,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function Qk(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),o=s.split("."),u=new Set;let f=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){f=m;break}if(f!==-1&&o.length>f)for(let m=f;m<o.length;m++){const p=o[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}zp(n,r,o,0,u)}}function zp(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const o=e[s];if(o.endsWith("[]")){const u=o.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const m of f[u])zp(m,e,t,s+1,r)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of f)m[p]=u[p];for(const[p,v]of Object.entries(m)){const _=[];for(const T of t.slice(s))T==="*"?_.push(p):_.push(T);g(u,_,v)}for(const p of f)delete u[p]}}else{const u=n;o in u&&zp(u[o],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M0(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wk(n){const e={},t=h(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=h(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function Xk(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],eI(u)),e}function Zk(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["response"]);return u!=null&&g(e,["response"],tI(u)),e}function eI(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>nI(u))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function tI(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>sI(u))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function nI(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],cI(t)),e}function sI(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],uI(t)),e}function iI(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function rI(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function aI(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["response"]);return u!=null&&g(e,["response"],oI(u)),e}function oI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const r=h(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function cS(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["response"]);return u!=null&&g(e,["response"],lI(u)),e}function lI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const r=h(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function cI(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],M0(s));const r=h(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function uI(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],M0(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cb||(Cb={}));var Rb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Rb||(Rb={}));var Mb;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Mb||(Mb={}));var Ae;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ae||(Ae={}));var Db;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Db||(Db={}));var Pb;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Pb||(Pb={}));var Lb;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Lb||(Lb={}));var Ub;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ub||(Ub={}));var jb;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(jb||(jb={}));var Vb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Vb||(Vb={}));var Ob;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Ob||(Ob={}));var Gb;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Gb||(Gb={}));var Bb;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Bb||(Bb={}));var Hb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Hb||(Hb={}));var zb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(zb||(zb={}));var Fb;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Fb||(Fb={}));var qb;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(qb||(qb={}));var Kb;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Kb||(Kb={}));var $b;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($b||($b={}));var Yb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Yb||(Yb={}));var Jb;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Jb||(Jb={}));var hf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(hf||(hf={}));var Qb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qb||(Qb={}));var Wb;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Wb||(Wb={}));var Xb;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xb||(Xb={}));var Fp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fp||(Fp={}));var Zb;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Zb||(Zb={}));var e_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(e_||(e_={}));var t_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(t_||(t_={}));var n_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(n_||(n_={}));var s_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(s_||(s_={}));var i_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(i_||(i_={}));var r_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(r_||(r_={}));var a_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(a_||(a_={}));var o_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(o_||(o_={}));var l_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(l_||(l_={}));var c_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(c_||(c_={}));var u_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(u_||(u_={}));var d_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(d_||(d_={}));var f_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(f_||(f_={}));var h_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(h_||(h_={}));var m_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(m_||(m_={}));var p_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(p_||(p_={}));var g_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(g_||(g_={}));var x_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(x_||(x_={}));var y_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(y_||(y_={}));var v_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(v_||(v_={}));var b_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(b_||(b_={}));var __;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(__||(__={}));var T_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(T_||(T_={}));var E_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(E_||(E_={}));var S_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(S_||(S_={}));var A_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(A_||(A_={}));var w_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(w_||(w_={}));var ul;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ul||(ul={}));class qp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class jc{get text(){var e,t,s,r,o,u,f,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const _=[];for(const T of(m=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[A,k]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(k!==null||k!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,p+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,s,r,o,u,f,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const _ of(m=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,o,u,f,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,o,u,f,m,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,o,u,f,m,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class N_{}class k_{}class dI{}class fI{}class hI{}class mI{}class I_{}class C_{}class R_{}class pI{}class mf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new mf;let r;const o=e;return t?r=Zk(o):r=Xk(o),Object.assign(s,r),s}}class M_{}class D_{}class P_{}class L_{}class gI{}class xI{}class yI{}class D0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new D0,o=aI(e);return Object.assign(s,o),s}}class vI{}class bI{}class _I{}class U_{}class TI{get text(){var e,t,s;let r="",o=!1;const u=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&u.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;o=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,s;let r="";const o=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,m]of Object.entries(u))f!=="inlineData"&&m!==null&&o.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class EI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class P0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new P0,o=cS(e);return Object.assign(s,o),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uS(n,e){const t=At(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function dS(n){return Array.isArray(n)?n.map(e=>pf(e)):[pf(n)]}function pf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function fS(n){const e=pf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hS(n){const e=pf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function j_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function mS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>j_(e)):[j_(n)]}function Kp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function V_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function O_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Fn(n){if(n==null)throw new Error("ContentUnion is required");return Kp(n)?n:{role:"user",parts:mS(n)}}function L0(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Fn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=Fn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Fn(t)):[Fn(e)]}function Js(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(V_(n)||O_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Fn(n)]}const e=[],t=[],s=Kp(n[0]);for(const r of n){const o=Kp(r);if(o!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(V_(r)||O_(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:mS(t)}),e}function SI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Ae).includes(t[0].toUpperCase())?t[0].toUpperCase():Ae.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Ae).includes(s.toUpperCase())?s.toUpperCase():Ae.TYPE_UNSPECIFIED})}}function fl(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&SI(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ae).includes(f.toUpperCase())?f.toUpperCase():Ae.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=fl(f);else if(s.includes(u)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(fl(p))}e[u]=m}else if(r.includes(u)){const m={};for(const[p,v]of Object.entries(f))m[p]=fl(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=f}return e}function U0(n){return fl(n)}function j0(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function V0(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Il(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=fl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=fl(e.response));return n}function Cl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function AI(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Sr(n,e){if(typeof e!="string")throw new Error("name must be a string");return AI(n,e,"cachedContents")}function pS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ta(n){return M0(n)}function wI(n){return n!=null&&typeof n=="object"&&"name"in n}function NI(n){return n!=null&&typeof n=="object"&&"video"in n}function kI(n){return n!=null&&typeof n=="object"&&"uri"in n}function gS(n){var e;let t;if(wI(n)&&(t=n.name),!(kI(n)&&(t=n.uri,t===void 0))&&!(NI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function xS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function yS(n){for(const e of["models","tunedModels","publisherModels"])if(II(n,e))return n[e];return[]}function II(n,e){return n!==null&&typeof n=="object"&&e in n}function CI(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function RI(n,e={}){const t=[],s=new Set;for(const r of n){const o=r.name;if(s.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);s.add(o);const u=CI(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function vS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function MI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function bS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let o=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Rl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function _S(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(n){const e={},t=h(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=h(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>hC(u))),g(e,["inlinedResponses"],o)}const r=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["inlinedEmbedContentResponses"],o)}return e}function PI(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const r=h(n,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function LI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const r=h(n,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Wd(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["metadata","state"]);r!=null&&g(e,["state"],_S(r));const o=h(n,["metadata","createTime"]);o!=null&&g(e,["createTime"],o);const u=h(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const f=h(n,["metadata","updateTime"]);f!=null&&g(e,["updateTime"],f);const m=h(n,["metadata","model"]);m!=null&&g(e,["model"],m);const p=h(n,["metadata","output"]);return p!=null&&g(e,["dest"],DI(bS(p))),e}function $p(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["state"]);r!=null&&g(e,["state"],_S(r));const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["createTime"]);u!=null&&g(e,["createTime"],u);const f=h(n,["startTime"]);f!=null&&g(e,["startTime"],f);const m=h(n,["endTime"]);m!=null&&g(e,["endTime"],m);const p=h(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const v=h(n,["model"]);v!=null&&g(e,["model"],v);const _=h(n,["inputConfig"]);_!=null&&g(e,["src"],UI(_));const T=h(n,["outputConfig"]);T!=null&&g(e,["dest"],PI(bS(T)));const A=h(n,["completionStats"]);return A!=null&&g(e,["completionStats"],A),e}function UI(n){const e={},t=h(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const r=h(n,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function jI(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&g(t,["fileName"],s);const r=h(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>fC(n,u))),g(t,["requests","requests"],o)}return t}function VI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const r=h(n,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function OI(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function GI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Rl(n,s)),t}function BI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Rl(n,s)),t}function HI(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],zI(s));const r=h(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const u=h(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const m=h(n,["index"]);m!=null&&g(e,["index"],m);const p=h(n,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function zI(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["citations"],s)}return e}function TS(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>bC(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function FI(n,e){const t={},s=h(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function qI(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=h(n,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],LI(MI(r))),t}function G_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["src"]);r!=null&&g(t,["batch","inputConfig"],jI(n,vS(n,r)));const o=h(e,["config"]);return o!=null&&FI(o,t),t}function KI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],At(n,s));const r=h(e,["src"]);r!=null&&g(t,["inputConfig"],VI(vS(n,r)));const o=h(e,["config"]);return o!=null&&qI(o,t),t}function $I(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function YI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["src"]);r!=null&&g(t,["batch","inputConfig"],tC(n,r));const o=h(e,["config"]);return o!=null&&$I(o,t),t}function JI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Rl(n,s)),t}function QI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Rl(n,s)),t}function WI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function XI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function ZI(n,e){const t={},s=h(e,["contents"]);if(s!=null){let o=L0(n,s);Array.isArray(o)&&(o=o.map(u=>u)),g(t,["requests[]","request","content"],o)}const r=h(e,["config"]);return r!=null&&(g(t,["_self"],eC(r,t)),Qk(t,{"requests[].*":"requests[].request.*"})),t}function eC(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function tC(n,e){const t={},s=h(e,["fileName"]);s!=null&&g(t,["file_name"],s);const r=h(e,["inlinedRequests"]);return r!=null&&g(t,["requests"],ZI(n,r)),t}function nC(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function sC(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iC(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rC(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],TS(Fn(r)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const u=h(e,["topP"]);u!=null&&g(s,["topP"],u);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=h(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const k=h(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const M=h(e,["seed"]);M!=null&&g(s,["seed"],M);const C=h(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const V=h(e,["responseSchema"]);V!=null&&g(s,["responseSchema"],U0(V));const N=h(e,["responseJsonSchema"]);if(N!=null&&g(s,["responseJsonSchema"],N),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=h(e,["safetySettings"]);if(t!==void 0&&G!=null){let j=G;Array.isArray(j)&&(j=j.map(ce=>_C(ce))),g(t,["safetySettings"],j)}const $=h(e,["tools"]);if(t!==void 0&&$!=null){let j=Cl($);Array.isArray(j)&&(j=j.map(ce=>EC(Il(ce)))),g(t,["tools"],j)}const se=h(e,["toolConfig"]);if(t!==void 0&&se!=null&&g(t,["toolConfig"],TC(se)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=h(e,["cachedContent"]);t!==void 0&&Y!=null&&g(t,["cachedContent"],Sr(n,Y));const D=h(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const P=h(e,["mediaResolution"]);P!=null&&g(s,["mediaResolution"],P);const R=h(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],j0(R)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const U=h(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],dC(U));const B=h(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function aC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>HI(p))),g(e,["candidates"],m)}const r=h(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const u=h(n,["responseId"]);u!=null&&g(e,["responseId"],u);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function oC(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Rl(n,s)),t}function lC(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Rl(n,s)),t}function cC(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function uC(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function dC(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fC(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["request","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let f=Js(r);Array.isArray(f)&&(f=f.map(m=>TS(m))),g(t,["request","contents"],f)}const o=h(e,["metadata"]);o!=null&&g(t,["metadata"],o);const u=h(e,["config"]);return u!=null&&g(t,["request","generationConfig"],rC(n,u,h(t,["request"],{}))),t}function hC(n){const e={},t=h(n,["response"]);t!=null&&g(e,["response"],aC(t));const s=h(n,["error"]);return s!=null&&g(e,["error"],s),e}function mC(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function pC(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const o=h(n,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),t}function gC(n){const e={},t=h(n,["config"]);return t!=null&&mC(t,e),e}function xC(n){const e={},t=h(n,["config"]);return t!=null&&pC(t,e),e}function yC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>Wd(u))),g(e,["batchJobs"],o)}return e}function vC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>$p(u))),g(e,["batchJobs"],o)}return e}function bC(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],nC(o));const u=h(n,["functionCall"]);u!=null&&g(e,["functionCall"],sC(u));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=h(n,["inlineData"]);m!=null&&g(e,["inlineData"],OI(m));const p=h(n,["text"]);p!=null&&g(e,["text"],p);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function _C(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function TC(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],iC(s)),e}function EC(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=h(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],cC(u));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],uC(f));const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=h(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(xr||(xr={}));class ho{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(o=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC extends Er{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(xr.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=G_(this.apiClient,e),s=t._url,r=Ne("{model}:batchGenerateContent",s),f=t.batch.inputConfig.requests,m=f.requests,p=[];for(const v of m){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}p.push(_)}return f.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const o=this.getGcsUri(e),u=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?s.dest=`${o.slice(0,-6)}/dest`:s.dest=`${o}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=KI(this.apiClient,e);return f=Ne("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>$p(v))}else{const p=G_(this.apiClient,e);return f=Ne("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Wd(v))}}async createEmbeddingsInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YI(this.apiClient,e);return o=Ne("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>Wd(m))}}async get(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=lC(this.apiClient,e);return f=Ne("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>$p(v))}else{const p=oC(this.apiClient,e);return f=Ne("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Wd(v))}}async cancel(e){var t,s,r,o;let u="",f={};if(this.apiClient.isVertexAI()){const m=BI(this.apiClient,e);u=Ne("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=GI(this.apiClient,e);u=Ne("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=xC(e);return f=Ne("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=vC(v),T=new U_;return Object.assign(T,_),T})}else{const p=gC(e);return f=Ne("batches",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=yC(v),T=new U_;return Object.assign(T,_),T})}}async delete(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=QI(this.apiClient,e);return f=Ne("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>XI(v))}else{const p=JI(this.apiClient,e);return f=Ne("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>WI(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AC(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function B_(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>YC(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function wC(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let v=Js(u);Array.isArray(v)&&(v=v.map(_=>B_(_))),g(e,["contents"],v)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],B_(Fn(f)));const m=h(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(_=>QC(_))),g(e,["tools"],v)}const p=h(n,["toolConfig"]);if(e!==void 0&&p!=null&&g(e,["toolConfig"],JC(p)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function NC(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const u=h(n,["contents"]);if(e!==void 0&&u!=null){let _=Js(u);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],Fn(f));const m=h(n,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(T=>WC(T))),g(e,["tools"],_)}const p=h(n,["toolConfig"]);e!==void 0&&p!=null&&g(e,["toolConfig"],p);const v=h(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function kC(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],uS(n,s));const r=h(e,["config"]);return r!=null&&wC(r,t),t}function IC(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],uS(n,s));const r=h(e,["config"]);return r!=null&&NC(r,t),t}function CC(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sr(n,s)),t}function RC(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sr(n,s)),t}function MC(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function DC(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function PC(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function LC(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UC(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jC(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const u=h(n,["response"]);u!=null&&g(e,["response"],u);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function VC(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sr(n,s)),t}function OC(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],Sr(n,s)),t}function GC(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function BC(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function HC(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function zC(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function FC(n){const e={},t=h(n,["config"]);return t!=null&&HC(t,e),e}function qC(n){const e={},t=h(n,["config"]);return t!=null&&zC(t,e),e}function KC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["cachedContents"],o)}return e}function $C(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["cachedContents"],o)}return e}function YC(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],PC(o));const u=h(n,["functionCall"]);u!=null&&g(e,["functionCall"],LC(u));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=h(n,["inlineData"]);m!=null&&g(e,["inlineData"],AC(m));const p=h(n,["text"]);p!=null&&g(e,["text"],p);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function JC(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],UC(s)),e}function QC(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=h(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],GC(u));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],BC(f));const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=h(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function WC(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const u=h(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>jC(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const m=h(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function XC(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function ZC(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=h(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function e2(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],Sr(n,s));const r=h(e,["config"]);return r!=null&&XC(r,t),t}function t2(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],Sr(n,s));const r=h(e,["config"]);return r!=null&&ZC(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n2 extends Er{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(xr.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=IC(this.apiClient,e);return f=Ne("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=kC(this.apiClient,e);return f=Ne("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=OC(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=VC(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=RC(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=DC(v),T=new P_;return Object.assign(T,_),T})}else{const p=CC(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=MC(v),T=new P_;return Object.assign(T,_),T})}}async update(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=t2(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=e2(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=qC(e);return f=Ne("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=$C(v),T=new L_;return Object.assign(T,_),T})}else{const p=FC(e);return f=Ne("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=KC(v),T=new L_;return Object.assign(T,_),T})}}}function gf(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function H_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(n){return this instanceof Je?(this.v=n,this):new Je(n)}function di(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(A){return function(k){return Promise.resolve(k).then(A,_)}}function f(A,k){s[A]&&(r[A]=function(M){return new Promise(function(C,V){o.push([A,M,C,V])>1||m(A,M)})},k&&(r[A]=k(r[A])))}function m(A,k){try{p(s[A](k))}catch(M){T(o[0][3],M)}}function p(A){A.value instanceof Je?Promise.resolve(A.value.v).then(v,_):T(o[0][2],A)}function v(A){m("next",A)}function _(A){m("throw",A)}function T(A,k){A(k),o.shift(),o.length&&m(o[0][0],o[0][1])}}function fi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof H_=="function"?H_(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(o){t[o]=n[o]&&function(u){return new Promise(function(f,m){u=n[o](u),r(f,m,u.done,u.value)})}}function r(o,u,f,m){Promise.resolve(m).then(function(p){o({value:p,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ES(t)}function ES(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function i2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function z_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let o=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),o&&!ES(n[s])&&(o=!1),s++;o?e.push(...r):e.pop()}return e}class r2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new a2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class a2{constructor(e,t,s,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),i2(o)}async sendMessage(e){var t;await this.sendPromise;const s=Fn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,u,f;const m=await r,p=(u=(o=m.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(f=v.slice(_))!==null&&f!==void 0?f:[]);const A=p?[p]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=Fn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,s)}getHistory(e=!1){const t=e?z_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return di(this,arguments,function*(){var r,o,u,f,m,p;const v=[];try{for(var _=!0,T=fi(e),A;A=yield Je(T.next()),r=A.done,!r;_=!0){f=A.value,_=!1;const k=f;if(s2(k)){const M=(p=(m=k.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;M!==void 0&&v.push(M)}yield yield Je(k)}}catch(k){o={error:k}}finally{try{!_&&!r&&(u=T.return)&&(yield Je(u.call(T)))}finally{if(o)throw o.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(o=>o.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...z_(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Kf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o2(n){const e={},t=h(n,["file"]);return t!=null&&g(e,["file"],t),e}function l2(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function c2(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],gS(t)),e}function u2(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function d2(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],gS(t)),e}function f2(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function h2(n){const e={},t=h(n,["config"]);return t!=null&&f2(t,e),e}function m2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p2 extends Er{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(xr.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=h2(e);return o=Ne("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=m2(m),v=new vI;return Object.assign(v,p),v})}}async createInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=o2(e);return o=Ne("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=l2(m),v=new bI;return Object.assign(v,p),v})}}async get(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=d2(e);return o=Ne("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=c2(e);return o=Ne("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=u2(m),v=new _I;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xd(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function g2(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>M2(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function x2(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function y2(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v2(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const u=h(n,["response"]);u!=null&&g(e,["response"],u);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function b2(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const r=h(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const u=h(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const m=h(n,["logprobs"]);m!=null&&g(e,["logprobs"],m);const p=h(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const k=h(n,["responseModalities"]);k!=null&&g(e,["responseModalities"],k);const M=h(n,["responseSchema"]);M!=null&&g(e,["responseSchema"],M);const C=h(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const V=h(n,["seed"]);V!=null&&g(e,["seed"],V);const N=h(n,["speechConfig"]);N!=null&&g(e,["speechConfig"],N);const G=h(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const $=h(n,["temperature"]);$!=null&&g(e,["temperature"],$);const se=h(n,["thinkingConfig"]);se!=null&&g(e,["thinkingConfig"],se);const Y=h(n,["topK"]);Y!=null&&g(e,["topK"],Y);const D=h(n,["topP"]);if(D!=null&&g(e,["topP"],D),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _2(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function T2(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function E2(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const u=h(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],V0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const k=h(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],g2(Fn(k)));const M=h(n,["tools"]);if(e!==void 0&&M!=null){let Y=Cl(M);Array.isArray(Y)&&(Y=Y.map(D=>P2(Il(D)))),g(e,["setup","tools"],Y)}const C=h(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],D2(C));const V=h(n,["inputAudioTranscription"]);e!==void 0&&V!=null&&g(e,["setup","inputAudioTranscription"],V);const N=h(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&g(e,["setup","outputAudioTranscription"],N);const G=h(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const se=h(n,["proactivity"]);if(e!==void 0&&se!=null&&g(e,["setup","proactivity"],se),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function S2(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],b2(s));const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const u=h(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],V0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const k=h(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],Fn(k));const M=h(n,["tools"]);if(e!==void 0&&M!=null){let D=Cl(M);Array.isArray(D)&&(D=D.map(P=>L2(Il(P)))),g(e,["setup","tools"],D)}const C=h(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],C);const V=h(n,["inputAudioTranscription"]);e!==void 0&&V!=null&&g(e,["setup","inputAudioTranscription"],V);const N=h(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&g(e,["setup","outputAudioTranscription"],N);const G=h(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const se=h(n,["proactivity"]);e!==void 0&&se!=null&&g(e,["setup","proactivity"],se);const Y=h(n,["explicitVadSignal"]);return e!==void 0&&Y!=null&&g(e,["setup","explicitVadSignal"],Y),t}function A2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],At(n,s));const r=h(e,["config"]);return r!=null&&g(t,["config"],E2(r,t)),t}function w2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],At(n,s));const r=h(e,["config"]);return r!=null&&g(t,["config"],S2(r,t)),t}function N2(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function k2(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["weightedPrompts"],s)}return e}function I2(n){const e={},t=h(n,["media"]);if(t!=null){let p=dS(t);Array.isArray(p)&&(p=p.map(v=>Xd(v))),g(e,["mediaChunks"],p)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],Xd(hS(s)));const r=h(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=h(n,["video"]);o!=null&&g(e,["video"],Xd(fS(o)));const u=h(n,["text"]);u!=null&&g(e,["text"],u);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const m=h(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function C2(n){const e={},t=h(n,["media"]);if(t!=null){let p=dS(t);Array.isArray(p)&&(p=p.map(v=>v)),g(e,["mediaChunks"],p)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],hS(s));const r=h(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=h(n,["video"]);o!=null&&g(e,["video"],fS(o));const u=h(n,["text"]);u!=null&&g(e,["text"],u);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const m=h(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function R2(n){const e={},t=h(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=h(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const r=h(n,["toolCall"]);r!=null&&g(e,["toolCall"],r);const o=h(n,["toolCallCancellation"]);o!=null&&g(e,["toolCallCancellation"],o);const u=h(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],U2(u));const f=h(n,["goAway"]);f!=null&&g(e,["goAway"],f);const m=h(n,["sessionResumptionUpdate"]);m!=null&&g(e,["sessionResumptionUpdate"],m);const p=h(n,["voiceActivityDetectionSignal"]);return p!=null&&g(e,["voiceActivityDetectionSignal"],p),e}function M2(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],x2(o));const u=h(n,["functionCall"]);u!=null&&g(e,["functionCall"],y2(u));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=h(n,["inlineData"]);m!=null&&g(e,["inlineData"],Xd(m));const p=h(n,["text"]);p!=null&&g(e,["text"],p);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function D2(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function P2(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=h(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],_2(u));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],T2(f));const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=h(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function L2(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const u=h(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>v2(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const m=h(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function U2(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const r=h(n,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const o=h(n,["toolUsePromptTokenCount"]);o!=null&&g(e,["toolUsePromptTokenCount"],o);const u=h(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const f=h(n,["totalTokenCount"]);f!=null&&g(e,["totalTokenCount"],f);const m=h(n,["promptTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["promptTokensDetails"],A)}const p=h(n,["cacheTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["cacheTokensDetails"],A)}const v=h(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["responseTokensDetails"],A)}const _=h(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["toolUsePromptTokensDetails"],A)}const T=h(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j2(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function V2(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],O2(s));const r=h(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const u=h(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const m=h(n,["index"]);m!=null&&g(e,["index"],m);const p=h(n,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function O2(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["citations"],s)}return e}function G2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let o=Js(r);Array.isArray(o)&&(o=o.map(u=>u)),g(t,["contents"],o)}return t}function B2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(e,["tokensInfo"],r)}return e}function H2(n){const e={},t=h(n,["values"]);t!=null&&g(e,["values"],t);const s=h(n,["statistics"]);return s!=null&&g(e,["statistics"],z2(s)),e}function z2(n){const e={},t=h(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=h(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function $f(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>XR(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function F2(n){const e={},t=h(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=h(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function q2(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function K2(n,e){const t={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],Fn(s));const r=h(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>NS(f))),g(e,["tools"],u)}const o=h(n,["generationConfig"]);return e!==void 0&&o!=null&&g(e,["generationConfig"],jR(o)),t}function $2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let u=Js(r);Array.isArray(u)&&(u=u.map(f=>$f(f))),g(t,["contents"],u)}const o=h(e,["config"]);return o!=null&&q2(o),t}function Y2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let u=Js(r);Array.isArray(u)&&(u=u.map(f=>f)),g(t,["contents"],u)}const o=h(e,["config"]);return o!=null&&K2(o,t),t}function J2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const r=h(n,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function Q2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function W2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function X2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function Z2(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function eR(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function tR(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=h(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const u=h(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const m=h(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const p=h(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const k=h(n,["outputMimeType"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","mimeType"],k);const M=h(n,["outputCompressionQuality"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","compressionQuality"],M);const C=h(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const V=h(n,["labels"]);e!==void 0&&V!=null&&g(e,["labels"],V);const N=h(n,["editMode"]);e!==void 0&&N!=null&&g(e,["parameters","editMode"],N);const G=h(n,["baseSteps"]);return e!==void 0&&G!=null&&g(e,["parameters","editConfig","baseSteps"],G),t}function nR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["referenceImages"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>iM(m))),g(t,["instances[0]","referenceImages"],f)}const u=h(e,["config"]);return u!=null&&tR(u,t),t}function sR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Yf(o))),g(e,["generatedImages"],r)}return e}function iR(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function rR(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const r=h(n,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const o=h(n,["outputDimensionality"]);e!==void 0&&o!=null&&g(e,["parameters","outputDimensionality"],o);const u=h(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const f=h(n,["autoTruncate"]);return e!==void 0&&f!=null&&g(e,["parameters","autoTruncate"],f),t}function aR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let f=L0(n,r);Array.isArray(f)&&(f=f.map(m=>m)),g(t,["requests[]","content"],f)}const o=h(e,["config"]);o!=null&&iR(o,t);const u=h(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],At(n,u)),t}function oR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let u=L0(n,r);Array.isArray(u)&&(u=u.map(f=>f)),g(t,["instances[]","content"],u)}const o=h(e,["config"]);return o!=null&&rR(o,t),t}function lR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["embeddings"],o)}const r=h(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function cR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions[]","embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>H2(u))),g(e,["embeddings"],o)}const r=h(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function uR(n){const e={},t=h(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=h(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function dR(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function fR(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hR(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mR(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const r=h(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const u=h(n,["response"]);u!=null&&g(e,["response"],u);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pR(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],$f(Fn(r)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const u=h(e,["topP"]);u!=null&&g(s,["topP"],u);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=h(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const k=h(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const M=h(e,["seed"]);M!=null&&g(s,["seed"],M);const C=h(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const V=h(e,["responseSchema"]);V!=null&&g(s,["responseSchema"],U0(V));const N=h(e,["responseJsonSchema"]);if(N!=null&&g(s,["responseJsonSchema"],N),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=h(e,["safetySettings"]);if(t!==void 0&&G!=null){let j=G;Array.isArray(j)&&(j=j.map(ce=>rM(ce))),g(t,["safetySettings"],j)}const $=h(e,["tools"]);if(t!==void 0&&$!=null){let j=Cl($);Array.isArray(j)&&(j=j.map(ce=>fM(Il(ce)))),g(t,["tools"],j)}const se=h(e,["toolConfig"]);if(t!==void 0&&se!=null&&g(t,["toolConfig"],dM(se)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=h(e,["cachedContent"]);t!==void 0&&Y!=null&&g(t,["cachedContent"],Sr(n,Y));const D=h(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const P=h(e,["mediaResolution"]);P!=null&&g(s,["mediaResolution"],P);const R=h(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],j0(R)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const U=h(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],HR(U));const B=h(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function gR(n,e,t){const s={},r=h(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],Fn(r));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const u=h(e,["topP"]);u!=null&&g(s,["topP"],u);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=h(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const k=h(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const M=h(e,["seed"]);M!=null&&g(s,["seed"],M);const C=h(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const V=h(e,["responseSchema"]);V!=null&&g(s,["responseSchema"],U0(V));const N=h(e,["responseJsonSchema"]);N!=null&&g(s,["responseJsonSchema"],N);const G=h(e,["routingConfig"]);G!=null&&g(s,["routingConfig"],G);const $=h(e,["modelSelectionConfig"]);$!=null&&g(s,["modelConfig"],$);const se=h(e,["safetySettings"]);if(t!==void 0&&se!=null){let K=se;Array.isArray(K)&&(K=K.map(fe=>fe)),g(t,["safetySettings"],K)}const Y=h(e,["tools"]);if(t!==void 0&&Y!=null){let K=Cl(Y);Array.isArray(K)&&(K=K.map(fe=>NS(Il(fe)))),g(t,["tools"],K)}const D=h(e,["toolConfig"]);t!==void 0&&D!=null&&g(t,["toolConfig"],D);const P=h(e,["labels"]);t!==void 0&&P!=null&&g(t,["labels"],P);const R=h(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Sr(n,R));const O=h(e,["responseModalities"]);O!=null&&g(s,["responseModalities"],O);const U=h(e,["mediaResolution"]);U!=null&&g(s,["mediaResolution"],U);const B=h(e,["speechConfig"]);B!=null&&g(s,["speechConfig"],j0(B));const j=h(e,["audioTimestamp"]);j!=null&&g(s,["audioTimestamp"],j);const ce=h(e,["thinkingConfig"]);ce!=null&&g(s,["thinkingConfig"],ce);const ke=h(e,["imageConfig"]);if(ke!=null&&g(s,["imageConfig"],zR(ke)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function F_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let u=Js(r);Array.isArray(u)&&(u=u.map(f=>$f(f))),g(t,["contents"],u)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],pR(n,o,t)),t}function q_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["contents"]);if(r!=null){let u=Js(r);Array.isArray(u)&&(u=u.map(f=>f)),g(t,["contents"],u)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],gR(n,o,t)),t}function K_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>V2(p))),g(e,["candidates"],m)}const r=h(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const u=h(n,["responseId"]);u!=null&&g(e,["responseId"],u);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function $_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["candidates"],p)}const r=h(n,["createTime"]);r!=null&&g(e,["createTime"],r);const o=h(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const u=h(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const f=h(n,["responseId"]);f!=null&&g(e,["responseId"],f);const m=h(n,["usageMetadata"]);return m!=null&&g(e,["usageMetadata"],m),e}function xR(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=h(n,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const o=h(n,["guidanceScale"]);if(e!==void 0&&o!=null&&g(e,["parameters","guidanceScale"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=h(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const f=h(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const m=h(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const p=h(n,["includeRaiReason"]);e!==void 0&&p!=null&&g(e,["parameters","includeRaiReason"],p);const v=h(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=h(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=h(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=h(n,["imageSize"]);if(e!==void 0&&A!=null&&g(e,["parameters","sampleImageSize"],A),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function yR(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=h(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const u=h(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const m=h(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const p=h(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const k=h(n,["outputMimeType"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","mimeType"],k);const M=h(n,["outputCompressionQuality"]);e!==void 0&&M!=null&&g(e,["parameters","outputOptions","compressionQuality"],M);const C=h(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const V=h(n,["labels"]);e!==void 0&&V!=null&&g(e,["labels"],V);const N=h(n,["imageSize"]);e!==void 0&&N!=null&&g(e,["parameters","sampleImageSize"],N);const G=h(n,["enhancePrompt"]);return e!==void 0&&G!=null&&g(e,["parameters","enhancePrompt"],G),t}function vR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["config"]);return o!=null&&xR(o,t),t}function bR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["config"]);return o!=null&&yR(o,t),t}function _R(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>DR(u))),g(e,["generatedImages"],o)}const r=h(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],AS(r)),e}function TR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>Yf(u))),g(e,["generatedImages"],o)}const r=h(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],wS(r)),e}function ER(n,e){const t={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=h(n,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const u=h(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const f=h(n,["personGeneration"]);if(e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=h(n,["negativePrompt"]);e!==void 0&&m!=null&&g(e,["parameters","negativePrompt"],m);const p=h(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&g(e,["parameters","enhancePrompt"],p),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=h(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Jf(v));const _=h(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>AM(A))),g(e,["instances[0]","referenceImages"],T)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function SR(n,e){const t={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=h(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const o=h(n,["fps"]);e!==void 0&&o!=null&&g(e,["parameters","fps"],o);const u=h(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const f=h(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const m=h(n,["aspectRatio"]);e!==void 0&&m!=null&&g(e,["parameters","aspectRatio"],m);const p=h(n,["resolution"]);e!==void 0&&p!=null&&g(e,["parameters","resolution"],p);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=h(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const A=h(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const k=h(n,["generateAudio"]);e!==void 0&&k!=null&&g(e,["parameters","generateAudio"],k);const M=h(n,["lastFrame"]);e!==void 0&&M!=null&&g(e,["instances[0]","lastFrame"],gi(M));const C=h(n,["referenceImages"]);if(e!==void 0&&C!=null){let G=C;Array.isArray(G)&&(G=G.map($=>wM($))),g(e,["instances[0]","referenceImages"],G)}const V=h(n,["mask"]);e!==void 0&&V!=null&&g(e,["instances[0]","mask"],SM(V));const N=h(n,["compressionQuality"]);return e!==void 0&&N!=null&&g(e,["parameters","compressionQuality"],N),t}function AR(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],IR(u)),e}function wR(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["response"]);return u!=null&&g(e,["response"],CR(u)),e}function NR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],Jf(o));const u=h(e,["video"]);u!=null&&g(t,["instances[0]","video"],kS(u));const f=h(e,["source"]);f!=null&&RR(f,t);const m=h(e,["config"]);return m!=null&&ER(m,t),t}function kR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],gi(o));const u=h(e,["video"]);u!=null&&g(t,["instances[0]","video"],IS(u));const f=h(e,["source"]);f!=null&&MR(f,t);const m=h(e,["config"]);return m!=null&&SR(m,t),t}function IR(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>LR(u))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function CR(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>UR(u))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=h(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function RR(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],Jf(r));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],kS(o)),t}function MR(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],gi(r));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],IS(o)),t}function DR(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],FR(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const r=h(n,["_self"]);return r!=null&&g(e,["safetyAttributes"],AS(r)),e}function Yf(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],SS(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const r=h(n,["_self"]);r!=null&&g(e,["safetyAttributes"],wS(r));const o=h(n,["prompt"]);return o!=null&&g(e,["enhancedPrompt"],o),e}function PR(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["mask"],SS(t));const s=h(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(e,["labels"],r)}return e}function LR(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],TM(t)),e}function UR(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],EM(t)),e}function jR(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const r=h(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const u=h(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const m=h(n,["logprobs"]);m!=null&&g(e,["logprobs"],m);const p=h(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const k=h(n,["responseModalities"]);k!=null&&g(e,["responseModalities"],k);const M=h(n,["responseSchema"]);M!=null&&g(e,["responseSchema"],M);const C=h(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const V=h(n,["seed"]);V!=null&&g(e,["seed"],V);const N=h(n,["speechConfig"]);N!=null&&g(e,["speechConfig"],N);const G=h(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const $=h(n,["temperature"]);$!=null&&g(e,["temperature"],$);const se=h(n,["thinkingConfig"]);se!=null&&g(e,["thinkingConfig"],se);const Y=h(n,["topK"]);Y!=null&&g(e,["topK"],Y);const D=h(n,["topP"]);if(D!=null&&g(e,["topP"],D),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function OR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function GR(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function BR(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function HR(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zR(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const r=h(n,["personGeneration"]);r!=null&&g(e,["personGeneration"],r);const o=h(n,["outputMimeType"]);o!=null&&g(e,["imageOutputOptions","mimeType"],o);const u=h(n,["outputCompressionQuality"]);return u!=null&&g(e,["imageOutputOptions","compressionQuality"],u),e}function FR(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Ta(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function SS(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Ta(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Jf(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Ta(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function gi(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Ta(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function qR(n,e,t){const s={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const u=h(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],xS(n,f)),s}function KR(n,e,t){const s={},r=h(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const u=h(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],xS(n,f)),s}function $R(n,e){const t={},s=h(e,["config"]);return s!=null&&qR(n,s,t),t}function YR(n,e){const t={},s=h(e,["config"]);return s!=null&&KR(n,s,t),t}function JR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["_self"]);if(r!=null){let o=yS(r);Array.isArray(o)&&(o=o.map(u=>Yp(u))),g(e,["models"],o)}return e}function QR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["_self"]);if(r!=null){let o=yS(r);Array.isArray(o)&&(o=o.map(u=>Jp(u))),g(e,["models"],o)}return e}function WR(n){const e={},t=h(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=h(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const r=h(n,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function Yp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);r!=null&&g(e,["description"],r);const o=h(n,["version"]);o!=null&&g(e,["version"],o);const u=h(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],hM(u));const f=h(n,["inputTokenLimit"]);f!=null&&g(e,["inputTokenLimit"],f);const m=h(n,["outputTokenLimit"]);m!=null&&g(e,["outputTokenLimit"],m);const p=h(n,["supportedGenerationMethods"]);p!=null&&g(e,["supportedActions"],p);const v=h(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=h(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=h(n,["topP"]);T!=null&&g(e,["topP"],T);const A=h(n,["topK"]);A!=null&&g(e,["topK"],A);const k=h(n,["thinking"]);return k!=null&&g(e,["thinking"],k),e}function Jp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);r!=null&&g(e,["description"],r);const o=h(n,["versionId"]);o!=null&&g(e,["version"],o);const u=h(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>uR(T))),g(e,["endpoints"],_)}const f=h(n,["labels"]);f!=null&&g(e,["labels"],f);const m=h(n,["_self"]);m!=null&&g(e,["tunedModelInfo"],mM(m));const p=h(n,["defaultCheckpointId"]);p!=null&&g(e,["defaultCheckpointId"],p);const v=h(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function XR(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],dR(o));const u=h(n,["functionCall"]);u!=null&&g(e,["functionCall"],fR(u));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=h(n,["inlineData"]);m!=null&&g(e,["inlineData"],j2(m));const p=h(n,["text"]);p!=null&&g(e,["text"],p);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function ZR(n){const e={},t=h(n,["productImage"]);return t!=null&&g(e,["image"],gi(t)),e}function eM(n,e){const t={},s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=h(n,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const o=h(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const u=h(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const m=h(n,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const p=h(n,["addWatermark"]);e!==void 0&&p!=null&&g(e,["parameters","addWatermark"],p);const v=h(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=h(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=h(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const A=h(n,["labels"]);return e!==void 0&&A!=null&&g(e,["labels"],A),t}function tM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["source"]);r!=null&&sM(r,t);const o=h(e,["config"]);return o!=null&&eM(o,t),t}function nM(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Yf(r))),g(e,["generatedImages"],s)}return e}function sM(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],gi(r));const o=h(n,["productImages"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>ZR(f))),g(e,["instances[0]","productImages"],u)}return t}function iM(n){const e={},t=h(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],gi(t));const s=h(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const r=h(n,["referenceType"]);r!=null&&g(e,["referenceType"],r);const o=h(n,["maskImageConfig"]);o!=null&&g(e,["maskImageConfig"],WR(o));const u=h(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],F2(u));const f=h(n,["styleImageConfig"]);f!=null&&g(e,["styleImageConfig"],f);const m=h(n,["subjectImageConfig"]);return m!=null&&g(e,["subjectImageConfig"],m),e}function AS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const r=h(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function wS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const r=h(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function rM(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function aM(n){const e={},t=h(n,["image"]);return t!=null&&g(e,["image"],gi(t)),e}function oM(n,e){const t={},s=h(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const r=h(n,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const o=h(n,["confidenceThreshold"]);e!==void 0&&o!=null&&g(e,["parameters","confidenceThreshold"],o);const u=h(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const f=h(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&g(e,["parameters","binaryColorThreshold"],f);const m=h(n,["labels"]);return e!==void 0&&m!=null&&g(e,["labels"],m),t}function lM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["source"]);r!=null&&uM(r,t);const o=h(e,["config"]);return o!=null&&oM(o,t),t}function cM(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>PR(r))),g(e,["generatedMasks"],s)}return e}function uM(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=h(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],gi(r));const o=h(n,["scribbleImage"]);return e!==void 0&&o!=null&&g(e,["instances[0]","scribble"],aM(o)),t}function dM(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],hR(s)),e}function fM(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=h(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],GR(u));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],BR(f));const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=h(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function NS(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const u=h(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>mR(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const m=h(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function hM(n){const e={},t=h(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const r=h(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function mM(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const r=h(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function pM(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function gM(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=h(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function xM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","name"],At(n,s));const r=h(e,["config"]);return r!=null&&pM(r,t),t}function yM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["config"]);return r!=null&&gM(r,t),t}function vM(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=h(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const o=h(n,["personGeneration"]);e!==void 0&&o!=null&&g(e,["parameters","personGeneration"],o);const u=h(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const f=h(n,["outputMimeType"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","mimeType"],f);const m=h(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","compressionQuality"],m);const p=h(n,["enhanceInputImage"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=h(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const A=h(n,["mode"]);return e!==void 0&&A!=null&&g(e,["parameters","mode"],A),t}function bM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const r=h(e,["image"]);r!=null&&g(t,["instances[0]","image"],gi(r));const o=h(e,["upscaleFactor"]);o!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],o);const u=h(e,["config"]);return u!=null&&vM(u,t),t}function _M(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Yf(o))),g(e,["generatedImages"],r)}return e}function TM(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Ta(s));const r=h(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function EM(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Ta(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function SM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["_self"],gi(t));const s=h(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function AM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],Jf(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function wM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],gi(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function kS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],Ta(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function IS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Ta(s));const r=h(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NM(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function kM(n){const e={},t=h(n,["config"]);return t!=null&&NM(t,e),e}function IM(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function CM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&IM(s,e),e}function RM(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function MM(n,e){const t={},s=h(n,["customMetadata"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["customMetadata"],o)}const r=h(n,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),t}function DM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=h(n,["done"]);r!=null&&g(e,["done"],r);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const u=h(n,["response"]);return u!=null&&g(e,["response"],LM(u)),e}function PM(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["fileName"]);s!=null&&g(e,["fileName"],s);const r=h(n,["config"]);return r!=null&&MM(r,e),e}function LM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const r=h(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function UM(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function jM(n){const e={},t=h(n,["config"]);return t!=null&&UM(t,e),e}function VM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["fileSearchStores"],o)}return e}function CS(n,e){const t={},s=h(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const r=h(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const o=h(n,["customMetadata"]);if(e!==void 0&&o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>m)),g(e,["customMetadata"],f)}const u=h(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function OM(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["config"]);return s!=null&&CS(s,e),e}function GM(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BM="Content-Type",HM="X-Server-Timeout",zM="User-Agent",Qp="x-goog-api-client",FM="1.35.0",qM=`google-genai-sdk/${FM}`,KM="v1beta1",$M="v1beta";class YM{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:KM,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:$M,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))typeof o=="object"?s[r]=Object.assign(Object.assign({},s[r]),o):o!==void 0&&(s[r]=o);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const o=new AbortController,u=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>o.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=u}return t&&t.extraBody!==null&&JM(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await Y_(r),new qp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await Y_(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return di(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield Je(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=o.decode(v,{stream:!0});try{const k=JSON.parse(_);if("error"in k){const M=JSON.parse(JSON.stringify(k.error)),C=M.status,V=M.code,N=`got status: ${C}. ${JSON.stringify(k)}`;if(V>=400&&V<600)throw new Kf({message:N,status:V})}}catch(k){if(k.name==="ApiError")throw k}u+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const C of m){const V=u.indexOf(C);V!==-1&&(T===-1||V<T)&&(T=V,A=C.length)}if(T===-1)break;const k=u.substring(0,T);u=u.substring(T+A);const M=k.trim();if(M.startsWith(f)){const C=M.substring(f.length).trim();try{const V=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Je(new qp(V))}catch(V){throw new Error(`exception parsing stream chunk ${C}. ${V}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=qM+" "+this.clientOptions.userAgentExtra;return e[zM]=t,e[Qp]=t,e[BM]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))s.append(r,o);e.timeout&&e.timeout>0&&s.append(HM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,u=await o.stat(e);r.sizeBytes=String(u.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const m={file:r},p=this.getFileName(e),v=Ne("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,m,t==null?void 0:t.httpOptions);return o.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var r;const o=this.clientOptions.uploader,u=await o.stat(t),f=String(u.size),m=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&CS(s,_);const T=await this.fetchUploadUrl(p,f,m,v,_,s==null?void 0:s.httpOptions);return o.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,o,u){var f;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Y_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Kf({message:r,status:t}):new Error(r)}}function JM(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(o,u){const f=Object.assign({},o);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const p=u[m],v=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QM="mcp_used/unknown";let WM=!1;function RS(n){for(const e of n)if(XM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WM}function MS(n){var e;const t=(e=n[Qp])!==null&&e!==void 0?e:"";n[Qp]=(t+` ${QM}`).trimStart()}function XM(n){return n!==null&&typeof n=="object"&&n instanceof O0}function ZM(n){return di(this,arguments,function*(t,s=100){let r,o=0;for(;o<s;){const u=yield Je(t.listTools({cursor:r}));for(const f of u.tools)yield yield Je(f),o++;if(!u.nextCursor)break;r=u.nextCursor}})}class O0{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new O0(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const o={},u=[];for(const v of this.mcpClients)try{for(var f=!0,m=(t=void 0,fi(ZM(v))),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const _=r;u.push(_);const T=_.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=v}}catch(_){t={error:_}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),RI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,o);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e4(n,e,t){const s=new EI;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class t4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),u=i4(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const v=new Promise(G=>{p=G}),_=e.callbacks,T=function(){p({})},A=this.apiClient,k={onopen:T,onmessage:G=>{e4(A,_.onmessage,G)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(G){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(G){}},M=this.webSocketFactory.create(m,s4(u),k);M.connect(),await v;const N={setup:{model:At(this.apiClient,e.model)}};return M.send(JSON.stringify(N)),new n4(M,this.apiClient)}}class n4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=k2(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=N2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ul.PLAY)}pause(){this.sendPlaybackControl(ul.PAUSE)}stop(){this.sendPlaybackControl(ul.STOP)}resetContext(){this.sendPlaybackControl(ul.RESET_CONTEXT)}close(){this.conn.close()}}function s4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function i4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function a4(n,e,t){const s=new TI;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const o=JSON.parse(r);if(n.isVertexAI()){const u=R2(o);Object.assign(s,u)}else Object.assign(s,o);e(s)}class o4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new t4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,o,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&RS(e.config.tools)&&MS(_);const T=d4(_);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const R=this.apiClient.getApiKey();let O="BidiGenerateContent",U="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",U="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${O}?${U}=${R}`}let A=()=>{};const k=new Promise(R=>{A=R}),M=e.callbacks,C=function(){var R;(R=M==null?void 0:M.onopen)===null||R===void 0||R.call(M),A({})},V=this.apiClient,N={onopen:C,onmessage:R=>{a4(V,M.onmessage,R)},onerror:(t=M==null?void 0:M.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=M==null?void 0:M.onclose)!==null&&s!==void 0?s:function(R){}},G=this.webSocketFactory.create(v,u4(T),N);G.connect(),await k;let $=At(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const R=this.apiClient.getProject(),O=this.apiClient.getLocation();$=`projects/${R}/locations/${O}/`+$}let se={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hf.AUDIO]}:e.config.responseModalities=[hf.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],D=[];for(const R of Y)if(this.isCallableTool(R)){const O=R;D.push(await O.tool())}else D.push(R);D.length>0&&(e.config.tools=D);const P={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=w2(this.apiClient,P):se=A2(this.apiClient,P),delete se.config,G.send(JSON.stringify(se)),new c4(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const l4={turnComplete:!0};class c4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Js(t.turns),e.isVertexAI()||(s=s.map(r=>$f(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const o of s){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(r4)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},l4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:C2(e)}:t={realtimeInput:I2(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function u4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function d4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J_=10;function Q_(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(hl(u)){r=!0;break}if(!r)return!0;const o=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function hl(n){return"callTool"in n&&typeof n.callTool=="function"}function f4(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>hl(r)))!==null&&s!==void 0?s:!1}function W_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(hl(s))return;const o=s;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(r)}),t}function X_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h4 extends Er{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,o,u,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!f4(t)||Q_(t.config))return await this.generateContentInternal(m);const p=W_(t);if(p.length>0){const M=p.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let v,_;const T=Js(m.contents),A=(o=(r=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:J_;let k=0;for(;k<A&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const M=v.candidates[0].content,C=[];for(const V of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(hl(V)){const G=await V.callTool(v.functionCalls);C.push(...G)}k++,_={role:"user",parts:C},m.contents=Js(m.contents),m.contents.push(M),m.contents.push(_),X_(m.config)&&(T.push(M),T.push(_))}return X_(m.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var s,r,o,u,f;if(this.maybeMoveToResponseJsonSchem(t),Q_(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const m=W_(t);if(m.length>0){const _=m.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(o=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let o;const u=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=m==null?void 0:m.safetyAttributes:u.push(m);let f;return o?f={generatedImages:u,positivePromptSafetyAttributes:o,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ho(xr.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,o,u,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(o=t.source)===null||o===void 0?void 0:o.video)===null||u===void 0)&&u.uri&&(!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const u=await Promise.all(o.map(async m=>hl(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&RS(e.config.tools)){const m=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),MS(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var t,s,r;const o=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(hl(u)){const f=u,m=await f.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(o.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);o.set(p.name,f)}}return o}async processAfcStream(e){var t,s,r;const o=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:J_;let u=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,v,_){return di(this,arguments,function*(){for(var T,A,k,M,C,V;f<o;){u&&(f++,u=!1);const se=yield Je(p.processParamsMaybeAddMcpUsage(_)),Y=yield Je(p.generateContentStreamInternal(se)),D=[],P=[];try{for(var N=!0,G=(A=void 0,fi(Y)),$;$=yield Je(G.next()),T=$.done,!T;N=!0){M=$.value,N=!1;const R=M;if(yield yield Je(R),R.candidates&&(!((C=R.candidates[0])===null||C===void 0)&&C.content)){P.push(R.candidates[0].content);for(const O of(V=R.candidates[0].content.parts)!==null&&V!==void 0?V:[])if(f<o&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(O.functionCall.name)){const U=yield Je(v.get(O.functionCall.name).callTool([O.functionCall]));D.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(R){A={error:R}}finally{try{!N&&!T&&(k=G.return)&&(yield Je(k.call(G)))}finally{if(A)throw A.error}}if(D.length>0){u=!0;const R=new jc;R.candidates=[{content:{role:"user",parts:D}}],yield yield Je(R);const O=[];O.push(...P),O.push({role:"user",parts:D});const U=Js(_.contents).concat(O);_.contents=U}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=q_(this.apiClient,e);return f=Ne("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=$_(v),T=new jc;return Object.assign(T,_),T})}else{const p=F_(this.apiClient,e);return f=Ne("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=K_(v),T=new jc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=q_(this.apiClient,e);return f=Ne("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return di(this,arguments,function*(){var T,A,k,M;try{for(var C=!0,V=fi(_),N;N=yield Je(V.next()),T=N.done,!T;C=!0){M=N.value,C=!1;const G=M,$=$_(yield Je(G.json()));$.sdkHttpResponse={headers:G.headers};const se=new jc;Object.assign(se,$),yield yield Je(se)}}catch(G){A={error:G}}finally{try{!C&&!T&&(k=V.return)&&(yield Je(k.call(V)))}finally{if(A)throw A.error}}})})}else{const p=F_(this.apiClient,e);return f=Ne("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(_){return di(this,arguments,function*(){var T,A,k,M;try{for(var C=!0,V=fi(_),N;N=yield Je(V.next()),T=N.done,!T;C=!0){M=N.value,C=!1;const G=M,$=K_(yield Je(G.json()));$.sdkHttpResponse={headers:G.headers};const se=new jc;Object.assign(se,$),yield yield Je(se)}}catch(G){A={error:G}}finally{try{!C&&!T&&(k=V.return)&&(yield Je(k.call(V)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=oR(this.apiClient,e);return f=Ne("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=cR(v),T=new N_;return Object.assign(T,_),T})}else{const p=aR(this.apiClient,e);return f=Ne("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=lR(v),T=new N_;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=bR(this.apiClient,e);return f=Ne("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=TR(v),T=new k_;return Object.assign(T,_),T})}else{const p=vR(this.apiClient,e);return f=Ne("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=_R(v),T=new k_;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const f=nR(this.apiClient,e);return o=Ne("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=sR(m),v=new dI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const f=bM(this.apiClient,e);return o=Ne("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=_M(m),v=new fI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const f=tM(this.apiClient,e);return o=Ne("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=nM(m),v=new hI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const f=lM(this.apiClient,e);return o=Ne("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=cM(m),v=new mI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=OR(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const p=VR(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Yp(v))}}async listInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=YR(this.apiClient,e);return f=Ne("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=QR(v),T=new I_;return Object.assign(T,_),T})}else{const p=$R(this.apiClient,e);return f=Ne("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=JR(v),T=new I_;return Object.assign(T,_),T})}}async update(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=yM(this.apiClient,e);return f=Ne("{model}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const p=xM(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Yp(v))}}async delete(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=X2(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=eR(v),T=new C_;return Object.assign(T,_),T})}else{const p=W2(this.apiClient,e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=Z2(v),T=new C_;return Object.assign(T,_),T})}}async countTokens(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Y2(this.apiClient,e);return f=Ne("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=Q2(v),T=new R_;return Object.assign(T,_),T})}else{const p=$2(this.apiClient,e);return f=Ne("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=J2(v),T=new R_;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const f=G2(this.apiClient,e);return o=Ne("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=B2(m),v=new pI;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=kR(this.apiClient,e);return f=Ne("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const _=wR(v),T=new mf;return Object.assign(T,_),T})}else{const p=NR(this.apiClient,e);return f=Ne("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>{const _=AR(v),T=new mf;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m4 extends Er{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=rI(e);return f=Ne("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const p=iI(e);return f=Ne("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const f=Wk(e);return o=Ne("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p4(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function g4(n){const e={},t=h(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>A4(o))),g(e,["parts"],r)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function x4(n,e,t){const s={},r=h(e,["expireTime"]);t!==void 0&&r!=null&&g(t,["expireTime"],r);const o=h(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&g(t,["newSessionExpireTime"],o);const u=h(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const f=h(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&g(t,["bidiGenerateContentSetup"],S4(n,f));const m=h(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&g(t,["fieldMask"],m),s}function y4(n,e){const t={},s=h(e,["config"]);return s!=null&&g(t,["config"],x4(n,s,t)),t}function v4(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function b4(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const r=h(n,["name"]);if(r!=null&&g(e,["name"],r),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _4(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function T4(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function E4(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const r=h(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const u=h(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const m=h(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],V0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const k=h(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],g4(Fn(k)));const M=h(n,["tools"]);if(e!==void 0&&M!=null){let Y=Cl(M);Array.isArray(Y)&&(Y=Y.map(D=>N4(Il(D)))),g(e,["setup","tools"],Y)}const C=h(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],w4(C));const V=h(n,["inputAudioTranscription"]);e!==void 0&&V!=null&&g(e,["setup","inputAudioTranscription"],V);const N=h(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&g(e,["setup","outputAudioTranscription"],N);const G=h(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const se=h(n,["proactivity"]);if(e!==void 0&&se!=null&&g(e,["setup","proactivity"],se),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function S4(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],At(n,s));const r=h(e,["config"]);return r!=null&&g(t,["config"],E4(r,t)),t}function A4(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=h(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],v4(o));const u=h(n,["functionCall"]);u!=null&&g(e,["functionCall"],b4(u));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const m=h(n,["inlineData"]);m!=null&&g(e,["inlineData"],p4(m));const p=h(n,["text"]);p!=null&&g(e,["text"],p);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function w4(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function N4(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=h(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=h(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],_4(u));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],T4(f));const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=h(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(o=>`${t}.${o}`);e.push(...r)}else e.push(t)}return e.join(",")}function I4(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const o=s.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const o=k4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(p=>u.includes(p)?`generationConfig.${p}`:p));const m=[];o&&m.push(o),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class C4 extends Er{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=y4(this.apiClient,e);o=Ne("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const m=I4(f,e.config);return r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R4(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function M4(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&R4(s,e),e}function D4(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function P4(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=h(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function L4(n){const e={},t=h(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=h(n,["config"]);return s!=null&&P4(s,e),e}function U4(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=h(n,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j4 extends Er{constructor(e){super(),this.apiClient=e,this.list=async t=>new ho(xr.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=D4(e);return o=Ne("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,s;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=M4(e);r=Ne("{name}",u._url),o=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=L4(e);return o=Ne("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=U4(m),v=new gI;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V4 extends Er{constructor(e,t=new j4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new ho(xr.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kM(e);return o=Ne("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=RM(e);return o=Ne("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,s;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=CM(e);r=Ne("{name}",u._url),o=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=jM(e);return o=Ne("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=VM(m),v=new xI;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=OM(e);return o=Ne("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=GM(m),v=new yI;return Object.assign(v,p),v})}}async importFile(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=PM(e);return o=Ne("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=DM(m),v=new D0;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return DS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const O4=()=>DS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Xp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ws extends Error{}class Zn extends Ws{constructor(e,t,s,r){super(`${Zn.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Qf({message:s,cause:Xp(t)});const o=t;return e===400?new LS(e,o,s,r):e===401?new US(e,o,s,r):e===403?new jS(e,o,s,r):e===404?new VS(e,o,s,r):e===409?new OS(e,o,s,r):e===422?new GS(e,o,s,r):e===429?new BS(e,o,s,r):e>=500?new HS(e,o,s,r):new Zn(e,o,s,r)}}class Zp extends Zn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Qf extends Zn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class PS extends Qf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class LS extends Zn{}class US extends Zn{}class jS extends Zn{}class VS extends Zn{}class OS extends Zn{}class GS extends Zn{}class BS extends Zn{}class HS extends Zn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G4=/^[a-z][a-z0-9+.-]*:/i,B4=n=>G4.test(n);let e0=n=>(e0=Array.isArray,e0(n));const H4=e0;let z4=H4;const Z_=z4;function F4(n){if(!n)return!0;for(const e in n)return!1;return!0}function q4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const K4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ws(`${n} must be an integer`);if(e<0)throw new Ws(`${n} must be a positive integer`);return e},$4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Q4=()=>{var n,e,t,s,r;const o=J4();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rl,"X-Stainless-OS":tT(Deno.build.os),"X-Stainless-Arch":eT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rl,"X-Stainless-OS":tT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":eT((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=W4();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":rl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function W4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,o=s[2]||0,u=s[3]||0;return{browser:e,version:`${r}.${o}.${u}`}}}return null}const eT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",tT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Vd;const X4=()=>Vd??(Vd=Q4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function zS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function eD(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return zS({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function FS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tD(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qS=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ap(n,e,t){return qS(),new File(n,e??"unknown_file",t)}function sD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const iD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",rD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&KS(n),aD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function oD(n,e,t){if(qS(),n=await n,rD(n))return n instanceof File?n:Ap([await n.arrayBuffer()],n.name);if(aD(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Ap(await t0(r),e,t)}const s=await t0(n);if(e||(e=sD(n)),!(t!=null&&t.type)){const r=s.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Ap(s,e,t)}async function t0(n){var e,t,s,r,o;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(KS(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(iD(n))try{for(var f=!0,m=fi(n),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const v=r;u.push(...await t0(v))}}catch(v){t={error:v}}finally{try{!f&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}else{const v=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${lD(n)}`)}return u}function lD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $S{constructor(e){this._client=e}}$S._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const nT=Object.freeze(Object.create(null)),cD=(n=YS)=>(function(t,...s){if(t.length===1)return t[0];let r=!1;const o=[],u=t.reduce((v,_,T)=>{var A,k,M;/[?#]/.test(_)&&(r=!0);const C=s[T];let V=(r?encodeURIComponent:n)(""+C);return T!==s.length&&(C==null||typeof C=="object"&&C.toString===((M=Object.getPrototypeOf((k=Object.getPrototypeOf((A=C.hasOwnProperty)!==null&&A!==void 0?A:nT))!==null&&k!==void 0?k:nT))===null||M===void 0?void 0:M.toString))&&(V=C+"",o.push({start:v.length+_.length,length:V.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":V)},""),f=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(f))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((v,_)=>v.start-_.start),o.length>0){let v=0;const _=o.reduce((T,A)=>{const k=" ".repeat(A.start-v),M="^".repeat(A.length);return v=A.start+A.length,T+k+M},"");throw new Ws(`Path parameters result in path with invalid segments:
${o.map(T=>T.error).join(`
`)}
${u}
${_}`)}return u}),Od=cD(YS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JS extends $S{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,o=gf(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Ws("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Ws("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Od`/${r}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Od`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Od`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const o=t??{},{api_version:u=this._client.apiVersion}=o,f=gf(o,["api_version"]);return this._client.get(Od`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}JS._key=Object.freeze(["interactions"]);class QS extends JS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uD(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let Gd;function G0(n){let e;return(Gd??(e=new globalThis.TextEncoder,Gd=e.encode.bind(e)))(n)}let Bd;function sT(n){let e;return(Bd??(e=new globalThis.TextDecoder,Bd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?G0(e):e;this.buffer=uD([this.buffer,t]);const s=[];let r;for(;(r=dD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(sT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=sT(this.buffer.subarray(0,o));s.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Wf.NEWLINE_CHARS=new Set([`
`,"\r"]);Wf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dD(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function fD(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xf={off:0,error:200,warn:300,info:400,debug:500},iT=(n,e,t)=>{if(n){if(q4(xf,n))return n;Wn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(xf))}`)}};function Oc(){}function Hd(n,e,t){return!e||xf[n]>xf[t]?Oc:e[n].bind(e)}const hD={error:Oc,warn:Oc,info:Oc,debug:Oc};let rT=new WeakMap;function Wn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return hD;const r=rT.get(t);if(r&&r[0]===s)return r[1];const o={error:Hd("error",t,s),warn:Hd("warn",t,s),info:Hd("info",t,s),debug:Hd("debug",t,s)};return rT.set(t,[s,o]),o}const Za=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dl{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const o=s?Wn(s):console;function u(){return di(this,arguments,function*(){var m,p,v,_;if(r)throw new Ws("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,k=fi(mD(e,t)),M;M=yield Je(k.next()),m=M.done,!m;A=!0){_=M.value,A=!1;const C=_;if(!T)if(C.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Je(JSON.parse(C.data))}catch(V){throw o.error("Could not parse message into JSON:",C.data),o.error("From chunk:",C.raw),V}}}catch(C){p={error:C}}finally{try{!A&&!m&&(v=k.return)&&(yield Je(v.call(k)))}finally{if(p)throw p.error}}T=!0}catch(C){if(Wp(C))return yield Je(void 0);throw C}finally{T||t.abort()}})}return new dl(u,t,s)}static fromReadableStream(e,t,s){let r=!1;function o(){return di(this,arguments,function*(){var m,p,v,_;const T=new Wf,A=FS(e);try{for(var k=!0,M=fi(A),C;C=yield Je(M.next()),m=C.done,!m;k=!0){_=C.value,k=!1;const V=_;for(const N of T.decode(V))yield yield Je(N)}}catch(V){p={error:V}}finally{try{!k&&!m&&(v=M.return)&&(yield Je(v.call(M)))}finally{if(p)throw p.error}}for(const V of T.flush())yield yield Je(V)})}function u(){return di(this,arguments,function*(){var m,p,v,_;if(r)throw new Ws("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,k=fi(o()),M;M=yield Je(k.next()),m=M.done,!m;A=!0){_=M.value,A=!1;const C=_;T||C&&(yield yield Je(JSON.parse(C)))}}catch(C){p={error:C}}finally{try{!A&&!m&&(v=k.return)&&(yield Je(v.call(k)))}finally{if(p)throw p.error}}T=!0}catch(C){if(Wp(C))return yield Je(void 0);throw C}finally{T||t.abort()}})}return new dl(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=o=>({next:()=>{if(o.length===0){const u=s.next();e.push(u),t.push(u)}return o.shift()}});return[new dl(()=>r(e),this.controller,this.client),new dl(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return zS({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:o}=await t.next();if(o)return s.close();const u=G0(JSON.stringify(r)+`
`);s.enqueue(u)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function mD(n,e){return di(this,arguments,function*(){var s,r,o,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ws("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ws("Attempted to iterate over a response with no body");const f=new gD,m=new Wf,p=FS(n.body);try{for(var v=!0,_=fi(pD(p)),T;T=yield Je(_.next()),s=T.done,!s;v=!0){u=T.value,v=!1;const A=u;for(const k of m.decode(A)){const M=f.decode(k);M&&(yield yield Je(M))}}}catch(A){r={error:A}}finally{try{!v&&!s&&(o=_.return)&&(yield Je(o.call(_)))}finally{if(r)throw r.error}}for(const A of m.flush()){const k=f.decode(A);k&&(yield yield Je(k))}})}function pD(n){return di(this,arguments,function*(){var t,s,r,o;let u=new Uint8Array;try{for(var f=!0,m=fi(n),p;p=yield Je(m.next()),t=p.done,!t;f=!0){o=p.value,f=!1;const v=o;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?G0(v):v;let T=new Uint8Array(u.length+_.length);T.set(u),T.set(_,u.length),u=T;let A;for(;(A=fD(u))!==-1;)yield yield Je(u.slice(0,A)),u=u.slice(A)}}catch(v){s={error:v}}finally{try{!f&&!t&&(r=m.return)&&(yield Je(r.call(m)))}finally{if(s)throw s.error}}u.length>0&&(yield yield Je(u))})}class gD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=xD(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function xD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yD(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:o}=e,u=await(async()=>{var f;if(e.options.stream)return Wn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):dl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),p=(f=m==null?void 0:m.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await t.json():await t.text()})();return Wn(n).debug(`[${s}] response parsed`,Za({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-o})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B0 extends Promise{constructor(e,t,s=yD){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new B0(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WS=Symbol("brand.privateNullableHeaders");function*vD(n){if(!n)return;if(WS in n){const{values:s,nulls:r}=n;yield*s.entries();for(const o of r)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Z_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=Z_(s[1])?s[1]:[s[1]];let u=!1;for(const f of o)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const Vc=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[o,u]of vD(s)){const f=o.toLowerCase();r.has(f)||(e.delete(o),r.add(f)),u===null?(e.delete(o),t.add(f)):(e.append(o,u),t.delete(f))}}return{[WS]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wp=n=>{var e,t,s,r,o,u;if(typeof globalThis.process<"u")return(s=(t=(e=qk)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var XS;class Xf{constructor(e){var t,s,r,o,u,f,m,{baseURL:p=wp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=wp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=gf(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Xf.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const k="warn";this.logLevel=k,this.logLevel=(u=(o=iT(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:iT(wp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=A.fetchOptions,this.maxRetries=(f=A.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=A.fetch)!==null&&m!==void 0?m:Z4(),this.encoder=nD,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Vc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Vc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new Ws(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${rl}`}defaultIdempotencyKey(){return`stainless-node-retry-${O4()}`}makeStatusError(e,t,s,r){return Zn.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,o=B4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return F4(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new B0(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,o,u;const f=await e,m=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=m),await this.prepareOptions(f);const{req:p,url:v,timeout:_}=await this.buildRequest(f,{retryCount:m-t});await this.prepareRequest(p,{url:v,options:f});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,k=Date.now();if(Wn(this).debug(`[${T}] sending request`,Za({retryOfRequestLogID:s,method:f.method,url:v,options:f,headers:p.headers})),!((o=f.signal)===null||o===void 0)&&o.aborted)throw new Zp;const M=new AbortController,C=await this.fetchWithTimeout(v,p,_,M).catch(Xp),V=Date.now();if(C instanceof globalThis.Error){const G=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Zp;const $=Wp(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(t)return Wn(this).info(`[${T}] connection ${$?"timed out":"failed"} - ${G}`),Wn(this).debug(`[${T}] connection ${$?"timed out":"failed"} (${G})`,Za({retryOfRequestLogID:s,url:v,durationMs:V-k,message:C.message})),this.retryRequest(f,t,s??T);throw Wn(this).info(`[${T}] connection ${$?"timed out":"failed"} - error; no more retries left`),Wn(this).debug(`[${T}] connection ${$?"timed out":"failed"} (error; no more retries left)`,Za({retryOfRequestLogID:s,url:v,durationMs:V-k,message:C.message})),$?new PS:new Qf({cause:C})}const N=`[${T}${A}] ${p.method} ${v} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${V-k}ms`;if(!C.ok){const G=await this.shouldRetry(C);if(t&&G){const R=`retrying, ${t} attempts remaining`;return await tD(C.body),Wn(this).info(`${N} - ${R}`),Wn(this).debug(`[${T}] response error (${R})`,Za({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:V-k})),this.retryRequest(f,t,s??T,C.headers)}const $=G?"error; no more retries left":"error; not retryable";Wn(this).info(`${N} - ${$}`);const se=await C.text().catch(R=>Xp(R).message),Y=$4(se),D=Y?void 0:se;throw Wn(this).debug(`[${T}] response error (${$})`,Za({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:D,durationMs:Date.now()-k})),this.makeStatusError(C.status,Y,D,C.headers)}return Wn(this).info(N),Wn(this).debug(`[${T}] response start`,Za({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:V-k})),{response:C,options:f,controller:M,requestLogID:T,retryOfRequestLogID:s,startTime:k}}async fetchWithTimeout(e,t,s,r){const o=t||{},{signal:u,method:f}=o,m=gf(o,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,_=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),m);f&&(_.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){var o;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(u=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!u){const p=parseFloat(m);Number.isNaN(p)?u=Date.parse(m)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,p)}return await Y4(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,u=Math.min(.5*Math.pow(2,o),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,o;const u=Object.assign({},e),{method:f,path:m,query:p,defaultBaseURL:v}=u,_=this.buildURL(m,p,v);"timeout"in u&&K4("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:f,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=u.fetchOptions)!==null&&o!==void 0?o:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=Vc([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),X4()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Vc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:eD(e)}:this.encoder({body:e,headers:s})}}Xf.DEFAULT_TIMEOUT=6e4;class kn extends Xf{constructor(){super(...arguments),this.interactions=new QS(this)}}XS=kn;kn.GeminiNextGenAPIClient=XS;kn.GeminiNextGenAPIClientError=Ws;kn.APIError=Zn;kn.APIConnectionError=Qf;kn.APIConnectionTimeoutError=PS;kn.APIUserAbortError=Zp;kn.NotFoundError=VS;kn.ConflictError=OS;kn.RateLimitError=BS;kn.BadRequestError=LS;kn.AuthenticationError=US;kn.InternalServerError=HS;kn.PermissionDeniedError=jS;kn.UnprocessableEntityError=GS;kn.toFile=oD;kn.Interactions=QS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function _D(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function TD(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function ED(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function SD(n,e,t){const s={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=h(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=h(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const u=h(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=h(n,["batchSize"]);e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","batchSize"],f);const m=h(n,["learningRate"]);if(e!==void 0&&m!=null&&g(e,["tuningTask","hyperparameters","learningRate"],m),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function AD(n,e,t){const s={};let r=h(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec"],aT(A))}else if(r==="PREFERENCE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec"],aT(A))}const o=h(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const u=h(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let f=h(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(f==="PREFERENCE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let m=h(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(m==="PREFERENCE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let p=h(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(p==="PREFERENCE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=h(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function wD(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const r=h(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const o=h(n,["trainingDataset"]);o!=null&&jD(o);const u=h(n,["config"]);return u!=null&&SD(u,t),t}function ND(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const r=h(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const o=h(n,["trainingDataset"]);o!=null&&VD(o,t,e);const u=h(n,["config"]);return u!=null&&AD(u,t,e),t}function kD(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function ID(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function CD(n,e,t){const s={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const u=h(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function RD(n,e,t){const s={},r=h(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const u=h(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function MD(n,e){const t={},s=h(n,["config"]);return s!=null&&CD(s,t),t}function DD(n,e){const t={},s=h(n,["config"]);return s!=null&&RD(s,t),t}function PD(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const o=h(n,["tunedModels"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>ZS(f))),g(t,["tuningJobs"],u)}return t}function LD(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const o=h(n,["tuningJobs"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>n0(f))),g(t,["tuningJobs"],u)}return t}function UD(n,e){const t={},s=h(n,["name"]);s!=null&&g(t,["model"],s);const r=h(n,["name"]);return r!=null&&g(t,["endpoint"],r),t}function jD(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=h(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(t,["examples","examples"],r)}return t}function VD(n,e,t){const s={};let r=h(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=h(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=h(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function ZS(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["name"]);r!=null&&g(t,["name"],r);const o=h(n,["state"]);o!=null&&g(t,["state"],pS(o));const u=h(n,["createTime"]);u!=null&&g(t,["createTime"],u);const f=h(n,["tuningTask","startTime"]);f!=null&&g(t,["startTime"],f);const m=h(n,["tuningTask","completeTime"]);m!=null&&g(t,["endTime"],m);const p=h(n,["updateTime"]);p!=null&&g(t,["updateTime"],p);const v=h(n,["description"]);v!=null&&g(t,["description"],v);const _=h(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=h(n,["_self"]);return T!=null&&g(t,["tunedModel"],UD(T)),t}function n0(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["name"]);r!=null&&g(t,["name"],r);const o=h(n,["state"]);o!=null&&g(t,["state"],pS(o));const u=h(n,["createTime"]);u!=null&&g(t,["createTime"],u);const f=h(n,["startTime"]);f!=null&&g(t,["startTime"],f);const m=h(n,["endTime"]);m!=null&&g(t,["endTime"],m);const p=h(n,["updateTime"]);p!=null&&g(t,["updateTime"],p);const v=h(n,["error"]);v!=null&&g(t,["error"],v);const _=h(n,["description"]);_!=null&&g(t,["description"],_);const T=h(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const A=h(n,["tunedModel"]);A!=null&&g(t,["tunedModel"],A);const k=h(n,["preTunedModel"]);k!=null&&g(t,["preTunedModel"],k);const M=h(n,["supervisedTuningSpec"]);M!=null&&g(t,["supervisedTuningSpec"],M);const C=h(n,["preferenceOptimizationSpec"]);C!=null&&g(t,["preferenceOptimizationSpec"],C);const V=h(n,["tuningDataStats"]);V!=null&&g(t,["tuningDataStats"],V);const N=h(n,["encryptionSpec"]);N!=null&&g(t,["encryptionSpec"],N);const G=h(n,["partnerModelTuningSpec"]);G!=null&&g(t,["partnerModelTuningSpec"],G);const $=h(n,["customBaseModel"]);$!=null&&g(t,["customBaseModel"],$);const se=h(n,["experiment"]);se!=null&&g(t,["experiment"],se);const Y=h(n,["labels"]);Y!=null&&g(t,["labels"],Y);const D=h(n,["outputUri"]);D!=null&&g(t,["outputUri"],D);const P=h(n,["pipelineJob"]);P!=null&&g(t,["pipelineJob"],P);const R=h(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const O=h(n,["tunedModelDisplayName"]);O!=null&&g(t,["tunedModelDisplayName"],O);const U=h(n,["veoTuningSpec"]);return U!=null&&g(t,["veoTuningSpec"],U),t}function OD(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=h(n,["name"]);r!=null&&g(t,["name"],r);const o=h(n,["metadata"]);o!=null&&g(t,["metadata"],o);const u=h(n,["done"]);u!=null&&g(t,["done"],u);const f=h(n,["error"]);return f!=null&&g(t,["error"],f),t}function aT(n,e){const t={},s=h(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const r=h(n,["vertexDatasetResource"]);return r!=null&&g(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GD extends Er{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ho(xr.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),o=await this.tuneMldevInternal(r);let u="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?u=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(u=o.name.split("/operations/")[0]),{name:u,state:Fp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=ID(e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>n0(v))}else{const p=kD(e);return f=Ne("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>ZS(v))}}async listInternal(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=DD(e);return f=Ne("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=LD(v),T=new M_;return Object.assign(T,_),T})}else{const p=MD(e);return f=Ne("tunedModels",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=PD(v),T=new M_;return Object.assign(T,_),T})}}async cancel(e){var t,s,r,o;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=_D(e);return f=Ne("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=ED(v),T=new D_;return Object.assign(T,_),T})}else{const p=bD(e);return f=Ne("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=TD(v),T=new D_;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const f=ND(e,e);return o=Ne("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>n0(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=wD(e);return o=Ne("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>OD(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const HD=1024*1024*8,zD=3,FD=1e3,qD=2,yf="x-goog-upload-status";async function KD(n,e,t){var s;const r=await eA(n,e,t),o=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[yf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function $D(n,e,t){var s;const r=await eA(n,e,t),o=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[yf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=cS(o),f=new P0;return Object.assign(f,u),f}async function eA(n,e,t){var s,r;let o=0,u=0,f=new qp(new Response),m="upload";for(o=n.size;u<o;){const p=Math.min(HD,o-u),v=n.slice(u,u+p);u+p>=o&&(m+=", finalize");let _=0,T=FD;for(;_<zD&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[yf]));)_++,await JD(T),T=T*qD;if(u+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[yf])!=="active")break;if(o<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function YD(n){return{size:n.size,type:n.type}}function JD(n){return new Promise(e=>setTimeout(e,n))}class QD{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KD(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $D(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WD{create(e,t,s){return new XD(e,t,s)}}class XD{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oT="x-goog-api-key";class ZD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(oT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(oT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eP="gl-node/";class tP{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new kn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=Jk(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new ZD(this.apiKey);this.apiClient=new YM({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:eP+"web",uploader:new QD,downloader:new BD}),this.models=new h4(this.apiClient),this.live=new o4(this.apiClient,r,new WD),this.batches=new SC(this.apiClient),this.chats=new r2(this.models,this.apiClient),this.caches=new n2(this.apiClient),this.files=new p2(this.apiClient),this.operations=new m4(this.apiClient),this.authTokens=new C4(this.apiClient),this.tunings=new GD(this.apiClient),this.fileSearchStores=new V4(this.apiClient)}}const nP=new tP({apiKey:"AIzaSyBm_oApA7D89kWU7QLCTfoeHn9WaZgHJpI"});function lT(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const tA={type:Ae.OBJECT,properties:{id:{type:Ae.STRING},type:{type:Ae.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:Ae.STRING},options:{type:Ae.ARRAY,items:{type:Ae.STRING}},correctAnswer:{type:Ae.STRING},tkpPoints:{type:Ae.ARRAY,items:{type:Ae.OBJECT,properties:{option:{type:Ae.STRING},points:{type:Ae.INTEGER}}}},explanation:{type:Ae.STRING},shortcut:{type:Ae.STRING},metadata:{type:Ae.OBJECT,properties:{difficulty:{type:Ae.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:Ae.INTEGER},topic:{type:Ae.STRING},subtest:{type:Ae.STRING},trapPattern:{type:Ae.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},sP={type:Ae.OBJECT,properties:{questions:{type:Ae.ARRAY,items:tA}},required:["questions"]};async function Hi(n,e,t){const s="gemini-3-flash-preview",r={temperature:.9,topP:.95,topK:40};e&&(r.responseMimeType="application/json",r.responseSchema=e);const o=[];t&&o.push({inlineData:{mimeType:"application/pdf",data:t}}),o.push({text:n});try{const f=(await nP.models.generateContent({model:s,contents:{role:"user",parts:o},config:r})).text;if(!f)throw new Error("Empty response from AI");if(e)try{let m=f.trim();return m.startsWith("```json")?m=m.replace(/^```json\n?/,"").replace(/\n?```$/,""):m.startsWith("```")&&(m=m.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(m)}catch(m){console.error("JSON Parse Error",m);const p=f.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return p?JSON.parse(p[0]):f}return f}catch(u){throw console.error("Gemini API Error:",u),u}}function iP(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0&&(n.options.includes("Sangat Setuju")||n.options.includes("Sangat Tidak Setuju"))||(n.options=lT(n.options))),n}const ln=async(n,e,t,s=5,r=[],o,u,f)=>{let m="",p;const v="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let _=sP;const T=e==="TPA"&&typeof t=="string"&&(t.includes("Psikotes")||t.includes("Kepribadian")||t.includes("Logika Gambar"));if(e==="GENERAL"&&u){const M=t,C=M.type==="topic"?`Topic: ${M.content}`:"Material Content";M.type==="pdf"&&(p=M.content);const V=M.difficultyPreference||"MEDIUM",N=`DIFFICULTY LEVEL: ${V}. ${V==="HARD"?"Use complex analysis/HOTS.":V==="EASY"?"Use straightforward recall.":""}`;u==="ACTIVE_RECALL"?m=`Create ${s} Active Recall questions (Short Answer format) based on this: ${C}. 
          ${v} ${N}
          Questions must be specific and require recall of key facts/concepts.`:u==="PBL"?m=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${v} ${N}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${C}. 
          Each question should be a realistic scenario requiring application of the concept.`:m=`Create ${s} practice questions based on: ${C}. ${v} ${N}`,M.type==="text"&&(m+=`

CONTENT: ${M.content}`)}else if(T){const M=t;m=`GENERATE QUESTIONS FOR PSIKOTEST KEDINASAN (PKN STAN).
      Subtest Context: ${M}.
      Count: ${s}.
      
      RULES:
      `,M.includes("Kepribadian")?m+=`
          TYPE: PERSONALITY TEST (Tes Kepribadian).
          Format: Statement with Likert Scale options (Sangat Setuju, Setuju, Ragu-ragu, Tidak Setuju, Sangat Tidak Setuju) OR Forced Choice (A/B).
          Topics: Integritas, Kerjasama, Orientasi Pelayanan, Stabilitas Emosi.
          SCORING (tkpPoints):
          - Assign points 1-5 based on positive/negative traits for ASN/Kemenkeu profile.
          - Consistency is key.
          - NO "correctAnswer" strictly, but define the 5-point option as "correctAnswer" for system compatibility.
          `:M.includes("Gambar")?m+=`
          TYPE: TES LOGIKA GAMBAR (Abstract Reasoning).
          Format: Text description of a visual pattern (since we are text-based).
          Example: "Gambar 1: Segitiga tegak. Gambar 2: Segitiga terbalik. Gambar 3: Segi empat tegak. Gambar 4: ...?"
          Options: Describe the next shape/pattern.
          Focus: Rotasi, Transformasi, Analogi Gambar.
          `:m+=`
          TYPE: TIU (Tes Intelegensi Umum).
          Focus: 
          - Verbal: Sinonim/Antonim (HOTS vocabulary), Analogi.
          - Numerik: Deret Angka (Complex), Aritmatika.
          - Logika: Silogisme, Analitis (Posisi duduk/urutan).
          Time constraint simulation: Questions should be solvable in 60-90s.
          `,m+=`
Language: Bahasa Indonesia. Provide detailed explanation for TIU/Logika.`}else{let M="";e==="SKD"&&typeof t=="string"&&(t.includes("TIU")||t.includes("Intelegensia"));const C=e==="UTBK",V=e==="TPA"&&!T;if(f==="HOTS"?(M=`
          DIFFICULTY DISTRIBUTION RULES (STRICT):
          - **80% of questions MUST be HOTS (High Order Thinking Skills)**.
          - **20% of questions should be VERY HARD**.
          `,C&&(M+=" CONTEXT: UTBK SNBT 2025 (HOTS). Reading & Quant focused."),V&&(M+=" CONTEXT: TPA & TBI (Seleksi Pascasarjana/Kerja). Advanced logic & vocab.")):e==="SKD"&&f==="TKP"?M="CONTEXT: SKD TKP. Focus on professional scenarios.":M="Standard difficulty. Mix of Easy, Medium, Hard.",e==="INTERVIEW")m=`Roleplay Task: Act as a professional HR Interviewer. Context: ${t}. Generate ${s} interview questions.`,_={type:Ae.OBJECT,properties:{questions:{type:Ae.ARRAY,items:{type:Ae.OBJECT,properties:{id:{type:Ae.STRING},type:{type:Ae.STRING,enum:["long_text"]},content:{type:Ae.STRING},explanation:{type:Ae.STRING},metadata:{type:Ae.OBJECT,properties:{topic:{type:Ae.STRING}}}},required:["content","type"]}}}};else{const N=`Generate ${s} distinct questions. ${M}. Provide DETAILED explanation.`;typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&f==="TKP"?m=`SKD TKP MODE. ${N} 
           SCORING: 1-5 points. 
           FORMAT: Provide 'tkpPoints' mapping each option to score.`:m=`TRY OUT / PRACTICE. Context: ${e} - ${JSON.stringify(t)}. ${N}`}}return((await Hi(m,_,p)).questions||[]).filter(M=>!!M).map(M=>{const C=iP(M);return e==="INTERVIEW"&&(C.type="long_text",C.options=[]),C})},rP=async(n,e,t)=>{const s={type:Ae.OBJECT,properties:{score:{type:Ae.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:Ae.BOOLEAN,description:"True if score > 70"},feedback:{type:Ae.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},r=`Evaluate this answer. 
  Question: ${n}
  Correct Answer / Key Concept: ${e}
  User Answer: ${t}
  
  Provide a score (0-100), boolean correctness, and feedback.`;return Hi(r,s)},aP=async n=>{const e=`The user is weak in these topics: ${n.join(", ")}. Provide a concise, actionable study plan (3 paragraphs max) to improve.`;return Hi(e)},oP=async(n,e)=>{const t={type:Ae.OBJECT,properties:{score:{type:Ae.INTEGER},feedback:{type:Ae.STRING},improvedAnswer:{type:Ae.STRING},keyPointsCovered:{type:Ae.ARRAY,items:{type:Ae.STRING}},toneAnalysis:{type:Ae.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate this job interview answer given by a candidate.
  Question: ${n}
  Candidate Answer: ${e}
  
  Act as a senior HR manager. Critique the tone, content, and structure.
  `;return Hi(s,t)},lP=async(n,e)=>{const t={type:Ae.OBJECT,properties:{understandingScore:{type:Ae.INTEGER},simplificationQuality:{type:Ae.STRING},missingConcepts:{type:Ae.ARRAY,items:{type:Ae.STRING}},correction:{type:Ae.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate this Feynman Technique explanation. The user is trying to explain "${n}" to a 5-year old.
  Explanation: ${e}`;return Hi(s,t)},cP=async n=>n.type==="pdf"&&n.content?await Hi("Extract and summarize the main text content from this PDF for study purposes. Ignore headers/footers.",void 0,n.content):n.content,uP=async(n,e)=>{const t=`Context: University Thesis (Skripsi). Topic: ${n}. Task: ${e}. Provide detailed output.`;return Hi(t)},dP=async n=>{const e={type:Ae.OBJECT,properties:{flashcards:{type:Ae.ARRAY,items:{type:Ae.OBJECT,properties:{id:{type:Ae.STRING},front:{type:Ae.STRING},back:{type:Ae.STRING}},required:["front","back"]}}}},t=`Create 10 flashcards based on this material: ${n.extractedText||n.content}`;return(await Hi(t,e)).flashcards},fP=async n=>{const e={type:Ae.OBJECT,properties:{label:{type:Ae.STRING},children:{type:Ae.ARRAY,items:{type:Ae.OBJECT,properties:{label:{type:Ae.STRING},children:{type:Ae.ARRAY,items:{type:Ae.OBJECT,properties:{label:{type:Ae.STRING}}}}}}}}},t=`Create a hierarchical mind map structure (JSON) for the topic: ${n.title||n.content.substring(0,50)}. Base it on the content.`;return Hi(t,e)},hP=async(n,e,t)=>{const s={type:Ae.OBJECT,properties:{topic:{type:Ae.STRING},summary:{type:Ae.STRING},keyPoints:{type:Ae.ARRAY,items:{type:Ae.STRING}},question:tA},required:["topic","summary","keyPoints","question"]},r=`Create a Drill Card (Mini Lesson + 1 Question) for ${n} - ${e} ${t?"("+t+")":""}.`;return Hi(r,s)},cT=async n=>{const e=ln(Ge.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK) - Nasionalisme, Integritas, Bela Negara, Pilar Negara",30,[],n,void 0,"HOTS"),t=ln(Ge.SIMULATION,"SKD","Tes Intelegensia Umum (TIU) - Verbal, Numerik, Figural",35,[],n,void 0,"HOTS"),s=ln(Ge.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP) - Pelayanan Publik, Jejaring Kerja, Sosial Budaya, TIK, Profesionalisme, Anti Radikalisme",45,[],n,void 0,"TKP"),[r,o,u]=await Promise.all([e,t,s]);return r.forEach(f=>f.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),o.forEach(f=>f.metadata.subtest="Tes Intelegensia Umum (TIU)"),u.forEach(f=>f.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...r,...o,...u]},uT=async()=>{const n=ln(Ge.SIMULATION,"UTBK","Penalaran Umum (Induktif, Deduktif, Kuantitatif)",30,[],void 0,void 0,"HOTS"),e=ln(Ge.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=ln(Ge.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=ln(Ge.SIMULATION,"UTBK","Pengetahuan Kuantitatif (Math & Logic)",20,[],void 0,void 0,"HOTS"),r=ln(Ge.SIMULATION,"UTBK","Literasi Bahasa Indonesia (Teks Panjang)",25,[],void 0,void 0,"HOTS"),o=ln(Ge.SIMULATION,"UTBK","Literasi Bahasa Inggris (Long Text Analysis)",25,[],void 0,void 0,"HOTS"),u=ln(Ge.SIMULATION,"UTBK","Penalaran Matematika (Complex Word Problems)",20,[],void 0,void 0,"HOTS"),[f,m,p,v,_,T,A]=await Promise.all([n,e,t,s,r,o,u]);return f.forEach(k=>k.metadata.subtest="Penalaran Umum"),m.forEach(k=>k.metadata.subtest="Pengetahuan dan Pemahaman Umum"),p.forEach(k=>k.metadata.subtest="Pemahaman Bacaan dan Menulis"),v.forEach(k=>k.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(k=>k.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(k=>k.metadata.subtest="Literasi Bahasa Inggris"),A.forEach(k=>k.metadata.subtest="Penalaran Matematika"),[...f,...m,...p,...v,..._,...T,...A]},dT=async()=>{const n=ln(Ge.SIMULATION,"TPA","Subtest: TPA - Kemampuan Verbal. Topics: Analogi Kata, Sinonim/Antonim, Wacana. Count: 15. Difficulty: HOTS.",15,[],void 0,void 0,"HOTS"),e=ln(Ge.SIMULATION,"TPA","Subtest: TPA - Kemampuan Kuantitatif. Topics: Deret Angka, Aritmatika, Aljabar, Geometri. Count: 15. Difficulty: HOTS.",15,[],void 0,void 0,"HOTS"),t=ln(Ge.SIMULATION,"TPA","Subtest: TPA - Kemampuan Penalaran. Topics: Silogisme, Analitis, Figural. Count: 15. Difficulty: HOTS.",15,[],void 0,void 0,"HOTS"),s=ln(Ge.SIMULATION,"TPA","Subtest: TBI - Tes Bahasa Inggris. Topics: Structure, Reading. Count: 20. Difficulty: TOEFL 550.",20,[],void 0,void 0,"HOTS"),[r,o,u,f]=await Promise.all([n,e,t,s]);return r.forEach(m=>m.metadata.subtest="TPA - Kemampuan Verbal"),o.forEach(m=>m.metadata.subtest="TPA - Kemampuan Kuantitatif"),u.forEach(m=>m.metadata.subtest="TPA - Kemampuan Penalaran"),f.forEach(m=>m.metadata.subtest="TBI - Bahasa Inggris"),[...r,...o,...u,...f]},fT=async()=>{const n=ln(Ge.SIMULATION,"TPA",`PSIKOTEST KEDINASAN (PKN STAN) - TIU. 
         Topics: Sinonim, Antonim, Analogi, Deret, Aritmatika, Silogisme, Analitis.
         Count: 30 Questions. Time limit tight (60s/soal).`,30,[],void 0,void 0,"HOTS"),e=ln(Ge.SIMULATION,"TPA",`PSIKOTEST KEDINASAN - TES LOGIKA GAMBAR.
         Topics: Deret Gambar, Pola Bentuk, Rotasi, Transformasi.
         Count: 15 Questions. Visual reasoning.`,15,[],void 0,void 0,"HOTS"),t=ln(Ge.SIMULATION,"TPA",`PSIKOTEST KEDINASAN - TES KEPRIBADIAN.
         Topics: Sikap Kerja, Kejujuran, Tanggung Jawab, Stabilitas Emosi.
         Format: Likert Scale (Sangat Setuju - Sangat Tidak Setuju).
         Count: 20 Questions.
         Output must include 'tkpPoints' for 1-5 scoring based on ASN values.`,20,[],void 0,void 0,"TKP"),[s,r,o]=await Promise.all([n,e,t]);return s.forEach(u=>u.metadata.subtest="TIU - Verbal & Numerik"),r.forEach(u=>u.metadata.subtest="Tes Logika Gambar (Abstrak)"),o.forEach(u=>u.metadata.subtest="Tes Kepribadian"),[...s,...r,...o]},hT=async()=>ln(Ge.SIMULATION,"PSIKOTEST","SIMULATION",40,[],void 0,void 0,"HOTS"),mP=()=>{};var mT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},pP=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[s++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],u=n[t++],f=n[t++],m=((r&7)<<18|(o&63)<<12|(u&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],u=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(o&63)<<6|u&63)}}return e.join("")},sA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const o=n[r],u=r+1<n.length,f=u?n[r+1]:0,m=r+2<n.length,p=m?n[r+2]:0,v=o>>2,_=(o&3)<<4|f>>4;let T=(f&15)<<2|p>>6,A=p&63;m||(A=64,u||(T=64)),s.push(t[v],t[_],t[T],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||f==null||p==null||_==null)throw new gP;const T=o<<2|f>>4;if(s.push(T),p!==64){const A=f<<4&240|p>>2;if(s.push(A),_!==64){const k=p<<6&192|_;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xP=function(n){const e=nA(n);return sA.encodeByteArray(e,!0)},vf=function(n){return xP(n).replace(/\./g,"")},iA=function(n){try{return sA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=()=>yP().__FIREBASE_DEFAULTS__,bP=()=>{if(typeof process>"u"||typeof mT>"u")return;const n=mT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_P=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&iA(n[1]);return e&&JSON.parse(e)},Zf=()=>{try{return mP()||vP()||bP()||_P()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rA=n=>{var e,t;return(t=(e=Zf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},TP=n=>{const e=rA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},aA=()=>{var n;return(n=Zf())==null?void 0:n.config},oA=n=>{var e;return(e=Zf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vf(JSON.stringify(t)),vf(JSON.stringify(u)),""].join(".")}const Fc={};function AP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?n.emulator.push(e):n.prod.push(e);return n}function wP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pT=!1;function cA(n,e){if(typeof window>"u"||typeof document>"u"||!Ml(window.location.host)||Fc[n]===e||Fc[n]||pT)return;Fc[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",o=AP().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{pT=!0,u()},T}function v(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=wP(s),A=t("text"),k=document.getElementById(A)||document.createElement("span"),M=t("learnmore"),C=document.getElementById(M)||document.createElement("a"),V=t("preprendIcon"),N=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;f(G),v(C,M);const $=p();m(N,V),G.append(N,k,C,$),document.body.appendChild(G)}o?(k.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function kP(){var e;const n=(e=Zf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MP(){const n=Kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DP(){return!kP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PP(){try{return typeof indexedDB=="object"}catch{return!1}}function LP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="FirebaseError";class Ar extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=UP,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],u=o?jP(o,s):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new Ar(r,f,s)}}function jP(n,e){return n.replace(VP,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const VP=/\{\$([^}]+)}/g;function OP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ao(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const o=n[r],u=e[r];if(gT(o)&&gT(u)){if(!ao(o,u))return!1}else if(o!==u)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function gT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function GP(n,e){const t=new BP(n,e);return t.subscribe.bind(t)}class BP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");HP(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=Np),r.error===void 0&&(r.error=Np),r.complete===void 0&&(r.complete=Np);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(n){return n&&n._delegate?n._delegate:n}class oo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new EP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qP(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});s.resolve(o)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);s===f&&u.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:FP(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FP(n){return n===eo?void 0:n}function qP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(gt||(gt={}));const $P={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},YP=gt.INFO,JP={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},QP=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=JP[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H0{constructor(e){this.name=e,this._logLevel=YP,this._logHandler=QP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const WP=(n,e)=>e.some(t=>n instanceof t);let xT,yT;function XP(){return xT||(xT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZP(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uA=new WeakMap,s0=new WeakMap,dA=new WeakMap,kp=new WeakMap,z0=new WeakMap;function e6(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(ca(n.result)),r()},u=()=>{s(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&uA.set(t,n)}).catch(()=>{}),z0.set(e,n),e}function t6(n){if(s0.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),r()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});s0.set(n,e)}let i0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return s0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ca(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function n6(n){i0=n(i0)}function s6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Ip(this),e,...t);return dA.set(s,e.sort?e.sort():[e]),ca(s)}:ZP().includes(n)?function(...e){return n.apply(Ip(this),e),ca(uA.get(this))}:function(...e){return ca(n.apply(Ip(this),e))}}function i6(n){return typeof n=="function"?s6(n):(n instanceof IDBTransaction&&t6(n),WP(n,XP())?new Proxy(n,i0):n)}function ca(n){if(n instanceof IDBRequest)return e6(n);if(kp.has(n))return kp.get(n);const e=i6(n);return e!==n&&(kp.set(n,e),z0.set(e,n)),e}const Ip=n=>z0.get(n);function r6(n,e,{blocked:t,upgrade:s,blocking:r,terminated:o}={}){const u=indexedDB.open(n,e),f=ca(u);return s&&u.addEventListener("upgradeneeded",m=>{s(ca(u.result),m.oldVersion,m.newVersion,ca(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{o&&m.addEventListener("close",()=>o()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const a6=["get","getKey","getAll","getAllKeys","count"],o6=["put","add","delete","clear"],Cp=new Map;function vT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Cp.get(e))return Cp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=o6.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||a6.includes(t)))return;const o=async function(u,...f){const m=this.transaction(u,r?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),r&&m.done]))[0]};return Cp.set(e,o),o}n6(n=>({...n,get:(e,t,s)=>vT(e,t)||n.get(e,t,s),has:(e,t)=>!!vT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c6(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function c6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const r0="@firebase/app",bT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new H0("@firebase/app"),u6="@firebase/app-compat",d6="@firebase/analytics-compat",f6="@firebase/analytics",h6="@firebase/app-check-compat",m6="@firebase/app-check",p6="@firebase/auth",g6="@firebase/auth-compat",x6="@firebase/database",y6="@firebase/data-connect",v6="@firebase/database-compat",b6="@firebase/functions",_6="@firebase/functions-compat",T6="@firebase/installations",E6="@firebase/installations-compat",S6="@firebase/messaging",A6="@firebase/messaging-compat",w6="@firebase/performance",N6="@firebase/performance-compat",k6="@firebase/remote-config",I6="@firebase/remote-config-compat",C6="@firebase/storage",R6="@firebase/storage-compat",M6="@firebase/firestore",D6="@firebase/ai",P6="@firebase/firestore-compat",L6="firebase",U6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="[DEFAULT]",j6={[r0]:"fire-core",[u6]:"fire-core-compat",[f6]:"fire-analytics",[d6]:"fire-analytics-compat",[m6]:"fire-app-check",[h6]:"fire-app-check-compat",[p6]:"fire-auth",[g6]:"fire-auth-compat",[x6]:"fire-rtdb",[y6]:"fire-data-connect",[v6]:"fire-rtdb-compat",[b6]:"fire-fn",[_6]:"fire-fn-compat",[T6]:"fire-iid",[E6]:"fire-iid-compat",[S6]:"fire-fcm",[A6]:"fire-fcm-compat",[w6]:"fire-perf",[N6]:"fire-perf-compat",[k6]:"fire-rc",[I6]:"fire-rc-compat",[C6]:"fire-gcs",[R6]:"fire-gcs-compat",[M6]:"fire-fst",[P6]:"fire-fst-compat",[D6]:"fire-vertex","fire-js":"fire-js",[L6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new Map,V6=new Map,o0=new Map;function _T(n,e){try{n.container.addComponent(e)}catch(t){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vl(n){const e=n.name;if(o0.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;o0.set(e,n);for(const t of bf.values())_T(t,n);for(const t of V6.values())_T(t,n);return!0}function F0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ci(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new lu("app","Firebase",O6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=U6;function fA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:a0,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ua.create("bad-app-name",{appName:String(r)});if(t||(t=aA()),!t)throw ua.create("no-options");const o=bf.get(r);if(o){if(ao(t,o.options)&&ao(s,o.config))return o;throw ua.create("duplicate-app",{appName:r})}const u=new KP(r);for(const m of o0.values())u.addComponent(m);const f=new G6(t,s,u);return bf.set(r,f),f}function hA(n=a0){const e=bf.get(n);if(!e&&n===a0&&aA())return fA();if(!e)throw ua.create("no-app",{appName:n});return e}function da(n,e,t){let s=j6[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const u=[`Unable to register library "${s}" with version "${e}":`];r&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(u.join(" "));return}vl(new oo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="firebase-heartbeat-database",H6=1,Wc="firebase-heartbeat-store";let Rp=null;function mA(){return Rp||(Rp=r6(B6,H6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ua.create("idb-open",{originalErrorMessage:n.message})})),Rp}async function z6(n){try{const t=(await mA()).transaction(Wc),s=await t.objectStore(Wc).get(pA(n));return await t.done,s}catch(e){if(e instanceof Ar)yr.warn(e.message);else{const t=ua.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(t.message)}}}async function TT(n,e){try{const s=(await mA()).transaction(Wc,"readwrite");await s.objectStore(Wc).put(e,pA(n)),await s.done}catch(t){if(t instanceof Ar)yr.warn(t.message);else{const s=ua.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});yr.warn(s.message)}}}function pA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=1024,q6=30;class K6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ET();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>q6){const u=J6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){yr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ET(),{heartbeatsToSend:s,unsentEntries:r}=$6(this._heartbeatsCache.heartbeats),o=vf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return yr.warn(t),""}}}function ET(){return new Date().toISOString().substring(0,10)}function $6(n,e=F6){const t=[];let s=n.slice();for(const r of n){const o=t.find(u=>u.agent===r.agent);if(o){if(o.dates.push(r.date),ST(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),ST(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Y6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PP()?LP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await z6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ST(n){return vf(JSON.stringify({version:2,heartbeats:n})).length}function J6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(n){vl(new oo("platform-logger",e=>new l6(e),"PRIVATE")),vl(new oo("heartbeat",e=>new K6(e),"PRIVATE")),da(r0,bT,n),da(r0,bT,"esm2020"),da("fire-js","")}Q6("");var W6="firebase",X6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */da(W6,X6,"app");var AT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fa,gA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,P){function R(){}R.prototype=P.prototype,D.F=P.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(O,U,B){for(var j=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)j[ce-2]=arguments[ce];return P.prototype[U].apply(O,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,P,R){R||(R=0);const O=Array(16);if(typeof P=="string")for(var U=0;U<16;++U)O[U]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(U=0;U<16;++U)O[U]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=D.g[0],R=D.g[1],U=D.g[2];let B=D.g[3],j;j=P+(B^R&(U^B))+O[0]+3614090360&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[1]+3905402710&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[2]+606105819&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[3]+3250441966&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(B^R&(U^B))+O[4]+4118548399&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[5]+1200080426&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[6]+2821735955&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[7]+4249261313&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(B^R&(U^B))+O[8]+1770035416&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[9]+2336552879&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[10]+4294925233&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[11]+2304563134&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(B^R&(U^B))+O[12]+1804603682&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[13]+4254626195&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[14]+2792965006&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[15]+1236535329&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(U^B&(R^U))+O[1]+4129170786&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[6]+3225465664&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[11]+643717713&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[0]+3921069994&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(U^B&(R^U))+O[5]+3593408605&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[10]+38016083&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[15]+3634488961&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[4]+3889429448&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(U^B&(R^U))+O[9]+568446438&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[14]+3275163606&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[3]+4107603335&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[8]+1163531501&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(U^B&(R^U))+O[13]+2850285829&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[2]+4243563512&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[7]+1735328473&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[12]+2368359562&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(R^U^B)+O[5]+4294588738&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[8]+2272392833&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[11]+1839030562&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[14]+4259657740&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(R^U^B)+O[1]+2763975236&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[4]+1272893353&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[7]+4139469664&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[10]+3200236656&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(R^U^B)+O[13]+681279174&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[0]+3936430074&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[3]+3572445317&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[6]+76029189&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(R^U^B)+O[9]+3654602809&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[12]+3873151461&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[15]+530742520&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[2]+3299628645&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(U^(R|~B))+O[0]+4096336452&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[7]+1126891415&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[14]+2878612391&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[5]+4237533241&4294967295,R=U+(j<<21&4294967295|j>>>11),j=P+(U^(R|~B))+O[12]+1700485571&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[3]+2399980690&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[10]+4293915773&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[1]+2240044497&4294967295,R=U+(j<<21&4294967295|j>>>11),j=P+(U^(R|~B))+O[8]+1873313359&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[15]+4264355552&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[6]+2734768916&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[13]+1309151649&4294967295,R=U+(j<<21&4294967295|j>>>11),j=P+(U^(R|~B))+O[4]+4149444226&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[11]+3174756917&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[2]+718787259&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(U+(j<<21&4294967295|j>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+B&4294967295}s.prototype.v=function(D,P){P===void 0&&(P=D.length);const R=P-this.blockSize,O=this.C;let U=this.h,B=0;for(;B<P;){if(U==0)for(;B<=R;)r(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<P;)if(O[U++]=D.charCodeAt(B++),U==this.blockSize){r(this,O),U=0;break}}else for(;B<P;)if(O[U++]=D[B++],U==this.blockSize){r(this,O),U=0;break}}this.h=U,this.o+=P},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;P=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=P&255,P/=256;for(this.v(D),D=Array(16),P=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)D[P++]=this.g[R]>>>O&255;return D};function o(D,P){var R=f;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=P(D)}function u(D,P){this.h=P;const R=[];let O=!0;for(let U=D.length-1;U>=0;U--){const B=D[U]|0;O&&B==P||(R[U]=B,O=!1)}this.g=R}var f={};function m(D){return-128<=D&&D<128?o(D,function(P){return new u([P|0],P<0?-1:0)}):new u([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return _;if(D<0)return C(p(-D));const P=[];let R=1;for(let O=0;D>=R;O++)P[O]=D/R|0,R*=4294967296;return new u(P,0)}function v(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return C(v(D.substring(1),P));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(P,8));let O=_;for(let B=0;B<D.length;B+=8){var U=Math.min(8,D.length-B);const j=parseInt(D.substring(B,B+U),P);U<8?(U=p(Math.pow(P,U)),O=O.j(U).add(p(j))):(O=O.j(R),O=O.add(p(j)))}return O}var _=m(0),T=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(M(this))return-C(this).m();let D=0,P=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);D+=(O>=0?O:4294967296+O)*P,P*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(M(this))return"-"+C(this).toString(D);const P=p(Math.pow(D,6));var R=this;let O="";for(;;){const U=$(R,P).g;R=V(R,U.j(P));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=U,k(R))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function M(D){return D.h==-1}n.l=function(D){return D=V(this,D),M(D)?-1:k(D)?0:1};function C(D){const P=D.g.length,R=[];for(let O=0;O<P;O++)R[O]=~D.g[O];return new u(R,~D.h).add(T)}n.abs=function(){return M(this)?C(this):this},n.add=function(D){const P=Math.max(this.g.length,D.g.length),R=[];let O=0;for(let U=0;U<=P;U++){let B=O+(this.i(U)&65535)+(D.i(U)&65535),j=(B>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);O=j>>>16,B&=65535,j&=65535,R[U]=j<<16|B}return new u(R,R[R.length-1]&-2147483648?-1:0)};function V(D,P){return D.add(C(P))}n.j=function(D){if(k(this)||k(D))return _;if(M(this))return M(D)?C(this).j(C(D)):C(C(this).j(D));if(M(D))return C(this.j(C(D)));if(this.l(A)<0&&D.l(A)<0)return p(this.m()*D.m());const P=this.g.length+D.g.length,R=[];for(var O=0;O<2*P;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let U=0;U<D.g.length;U++){const B=this.i(O)>>>16,j=this.i(O)&65535,ce=D.i(U)>>>16,ke=D.i(U)&65535;R[2*O+2*U]+=j*ke,N(R,2*O+2*U),R[2*O+2*U+1]+=B*ke,N(R,2*O+2*U+1),R[2*O+2*U+1]+=j*ce,N(R,2*O+2*U+1),R[2*O+2*U+2]+=B*ce,N(R,2*O+2*U+2)}for(D=0;D<P;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=P;D<2*P;D++)R[D]=0;return new u(R,0)};function N(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function G(D,P){this.g=D,this.h=P}function $(D,P){if(k(P))throw Error("division by zero");if(k(D))return new G(_,_);if(M(D))return P=$(C(D),P),new G(C(P.g),C(P.h));if(M(P))return P=$(D,C(P)),new G(C(P.g),P.h);if(D.g.length>30){if(M(D)||M(P))throw Error("slowDivide_ only works with positive integers.");for(var R=T,O=P;O.l(D)<=0;)R=se(R),O=se(O);var U=Y(R,1),B=Y(O,1);for(O=Y(O,2),R=Y(R,2);!k(O);){var j=B.add(O);j.l(D)<=0&&(U=U.add(R),B=j),O=Y(O,1),R=Y(R,1)}return P=V(D,U.j(P)),new G(U,P)}for(U=_;D.l(P)>=0;){for(R=Math.max(1,Math.floor(D.m()/P.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=p(R),j=B.j(P);M(j)||j.l(D)>0;)R-=O,B=p(R),j=B.j(P);k(B)&&(B=T),U=U.add(B),D=V(D,j)}return new G(U,D)}n.B=function(D){return $(this,D).h},n.and=function(D){const P=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<P;O++)R[O]=this.i(O)&D.i(O);return new u(R,this.h&D.h)},n.or=function(D){const P=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<P;O++)R[O]=this.i(O)|D.i(O);return new u(R,this.h|D.h)},n.xor=function(D){const P=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<P;O++)R[O]=this.i(O)^D.i(O);return new u(R,this.h^D.h)};function se(D){const P=D.g.length+1,R=[];for(let O=0;O<P;O++)R[O]=D.i(O)<<1|D.i(O-1)>>>31;return new u(R,D.h)}function Y(D,P){const R=P>>5;P%=32;const O=D.g.length-R,U=[];for(let B=0;B<O;B++)U[B]=P>0?D.i(B+R)>>>P|D.i(B+R+1)<<32-P:D.i(B+R);return new u(U,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,gA=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,fa=u}).apply(typeof AT<"u"?AT:typeof self<"u"?self:typeof window<"u"?window:{});var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xA,Gc,yA,Zd,l0,vA,bA,_A;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof zd=="object"&&zd];for(var E=0;E<x.length;++E){var w=x[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function r(x,E){if(E)e:{var w=s;x=x.split(".");for(var L=0;L<x.length-1;L++){var W=x[L];if(!(W in w))break e;w=w[W]}x=x[x.length-1],L=w[x],E=E(L),E!=L&&E!=null&&e(w,x,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(x){return x||function(E){var w=[],L;for(L in E)Object.prototype.hasOwnProperty.call(E,L)&&w.push([L,E[L]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function f(x){var E=typeof x;return E=="object"&&x!=null||E=="function"}function m(x,E,w){return x.call.apply(x.bind,arguments)}function p(x,E,w){return p=m,p.apply(null,arguments)}function v(x,E){var w=Array.prototype.slice.call(arguments,1);return function(){var L=w.slice();return L.push.apply(L,arguments),x.apply(this,L)}}function _(x,E){function w(){}w.prototype=E.prototype,x.Z=E.prototype,x.prototype=new w,x.prototype.constructor=x,x.Ob=function(L,W,ie){for(var _e=Array(arguments.length-2),it=2;it<arguments.length;it++)_e[it-2]=arguments[it];return E.prototype[W].apply(L,_e)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function A(x){const E=x.length;if(E>0){const w=Array(E);for(let L=0;L<E;L++)w[L]=x[L];return w}return[]}function k(x,E){for(let L=1;L<arguments.length;L++){const W=arguments[L];var w=typeof W;if(w=w!="object"?w:W?Array.isArray(W)?"array":w:"null",w=="array"||w=="object"&&typeof W.length=="number"){w=x.length||0;const ie=W.length||0;x.length=w+ie;for(let _e=0;_e<ie;_e++)x[w+_e]=W[_e]}else x.push(W)}}class M{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function C(x){u.setTimeout(()=>{throw x},0)}function V(){var x=D;let E=null;return x.g&&(E=x.g,x.g=x.g.next,x.g||(x.h=null),E.next=null),E}class N{constructor(){this.h=this.g=null}add(E,w){const L=G.get();L.set(E,w),this.h?this.h.next=L:this.g=L,this.h=L}}var G=new M(()=>new $,x=>x.reset());class ${constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let se,Y=!1,D=new N,P=()=>{const x=Promise.resolve(void 0);se=()=>{x.then(R)}};function R(){for(var x;x=V();){try{x.h.call(x.g)}catch(w){C(w)}var E=G;E.j(x),E.h<100&&(E.h++,x.next=E.g,E.g=x)}Y=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(x,E){this.type=x,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,E=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const w=()=>{};u.addEventListener("test",w,E),u.removeEventListener("test",w,E)}catch{}return x})();function j(x){return/^[\s\xa0]*$/.test(x)}function ce(x,E){U.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,E)}_(ce,U),ce.prototype.init=function(x,E){const w=this.type=x.type,L=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=E,E=x.relatedTarget,E||(w=="mouseover"?E=x.fromElement:w=="mouseout"&&(E=x.toElement)),this.relatedTarget=E,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),K=0;function fe(x,E,w,L,W){this.listener=x,this.proxy=null,this.src=E,this.type=w,this.capture=!!L,this.ha=W,this.key=++K,this.da=this.fa=!1}function Se(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Oe(x,E,w){for(const L in x)E.call(w,x[L],L,x)}function be(x,E){for(const w in x)E.call(void 0,x[w],w,x)}function H(x){const E={};for(const w in x)E[w]=x[w];return E}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(x,E){let w,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(w in L)x[w]=L[w];for(let ie=0;ie<re.length;ie++)w=re[ie],Object.prototype.hasOwnProperty.call(L,w)&&(x[w]=L[w])}}function ne(x){this.src=x,this.g={},this.h=0}ne.prototype.add=function(x,E,w,L,W){const ie=x.toString();x=this.g[ie],x||(x=this.g[ie]=[],this.h++);const _e=xe(x,E,L,W);return _e>-1?(E=x[_e],w||(E.fa=!1)):(E=new fe(E,this.src,ie,!!L,W),E.fa=w,x.push(E)),E};function te(x,E){const w=E.type;if(w in x.g){var L=x.g[w],W=Array.prototype.indexOf.call(L,E,void 0),ie;(ie=W>=0)&&Array.prototype.splice.call(L,W,1),ie&&(Se(E),x.g[w].length==0&&(delete x.g[w],x.h--))}}function xe(x,E,w,L){for(let W=0;W<x.length;++W){const ie=x[W];if(!ie.da&&ie.listener==E&&ie.capture==!!w&&ie.ha==L)return W}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),ut={};function qe(x,E,w,L,W){if(Array.isArray(E)){for(let ie=0;ie<E.length;ie++)qe(x,E[ie],w,L,W);return null}return w=es(w),x&&x[ke]?x.J(E,w,f(L)?!!L.capture:!1,W):Ke(x,E,w,!1,L,W)}function Ke(x,E,w,L,W,ie){if(!E)throw Error("Invalid event type");const _e=f(W)?!!W.capture:!!W;let it=Ot(x);if(it||(x[Ce]=it=new ne(x)),w=it.add(E,w,L,_e,ie),w.proxy)return w;if(L=Ct(),w.proxy=L,L.src=x,L.listener=w,x.addEventListener)B||(W=_e),W===void 0&&(W=!1),x.addEventListener(E.toString(),L,W);else if(x.attachEvent)x.attachEvent(nt(E.toString()),L);else if(x.addListener&&x.removeListener)x.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ct(){function x(w){return E.call(x.src,x.listener,w)}const E=$e;return x}function ot(x,E,w,L,W){if(Array.isArray(E))for(var ie=0;ie<E.length;ie++)ot(x,E[ie],w,L,W);else L=f(L)?!!L.capture:!!L,w=es(w),x&&x[ke]?(x=x.i,ie=String(E).toString(),ie in x.g&&(E=x.g[ie],w=xe(E,w,L,W),w>-1&&(Se(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete x.g[ie],x.h--)))):x&&(x=Ot(x))&&(E=x.g[E.toString()],x=-1,E&&(x=xe(E,w,L,W)),(w=x>-1?E[x]:null)&&lt(w))}function lt(x){if(typeof x!="number"&&x&&!x.da){var E=x.src;if(E&&E[ke])te(E.i,x);else{var w=x.type,L=x.proxy;E.removeEventListener?E.removeEventListener(w,L,x.capture):E.detachEvent?E.detachEvent(nt(w),L):E.addListener&&E.removeListener&&E.removeListener(L),(w=Ot(E))?(te(w,x),w.h==0&&(w.src=null,E[Ce]=null)):Se(x)}}}function nt(x){return x in ut?ut[x]:ut[x]="on"+x}function $e(x,E){if(x.da)x=!0;else{E=new ce(E,this);const w=x.listener,L=x.ha||x.src;x.fa&&lt(x),x=w.call(L,E)}return x}function Ot(x){return x=x[Ce],x instanceof ne?x:null}var un="__closure_events_fn_"+(Math.random()*1e9>>>0);function es(x){return typeof x=="function"?x:(x[un]||(x[un]=function(E){return x.handleEvent(E)}),x[un])}function ye(){O.call(this),this.i=new ne(this),this.M=this,this.G=null}_(ye,O),ye.prototype[ke]=!0,ye.prototype.removeEventListener=function(x,E,w,L){ot(this,x,E,w,L)};function ge(x,E){var w,L=x.G;if(L)for(w=[];L;L=L.G)w.push(L);if(x=x.M,L=E.type||E,typeof E=="string")E=new U(E,x);else if(E instanceof U)E.target=E.target||x;else{var W=E;E=new U(L,x),ue(E,W)}W=!0;let ie,_e;if(w)for(_e=w.length-1;_e>=0;_e--)ie=E.g=w[_e],W=Ee(ie,L,!0,E)&&W;if(ie=E.g=x,W=Ee(ie,L,!0,E)&&W,W=Ee(ie,L,!1,E)&&W,w)for(_e=0;_e<w.length;_e++)ie=E.g=w[_e],W=Ee(ie,L,!1,E)&&W}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var x=this.i;for(const E in x.g){const w=x.g[E];for(let L=0;L<w.length;L++)Se(w[L]);delete x.g[E],x.h--}}this.G=null},ye.prototype.J=function(x,E,w,L){return this.i.add(String(x),E,!1,w,L)},ye.prototype.K=function(x,E,w,L){return this.i.add(String(x),E,!0,w,L)};function Ee(x,E,w,L){if(E=x.i.g[String(E)],!E)return!0;E=E.concat();let W=!0;for(let ie=0;ie<E.length;++ie){const _e=E[ie];if(_e&&!_e.da&&_e.capture==w){const it=_e.listener,sn=_e.ha||_e.src;_e.fa&&te(x.i,_e),W=it.call(sn,L)!==!1&&W}}return W&&!L.defaultPrevented}function We(x,E){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=p(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(x,E||0)}function wt(x){x.g=We(()=>{x.g=null,x.i&&(x.i=!1,wt(x))},x.l);const E=x.h;x.h=null,x.m.apply(null,E)}class ht extends O{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nn(x){O.call(this),this.h=x,this.g={}}_(nn,O);var ks=[];function us(x){Oe(x.g,function(E,w){this.g.hasOwnProperty(w)&&lt(E)},x),x.g={}}nn.prototype.N=function(){nn.Z.N.call(this),us(this)},nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=u.JSON.stringify,yi=u.JSON.parse,Xs=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function ds(){}function Wt(){}var dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rt(){U.call(this,"d")}_(Rt,U);function Xt(){U.call(this,"c")}_(Xt,U);var Yt={},yo=null;function vi(){return yo=yo||new ye}Yt.Ia="serverreachability";function wa(x){U.call(this,Yt.Ia,x)}_(wa,U);function st(x){const E=vi();ge(E,new wa(E))}Yt.STAT_EVENT="statevent";function bi(x,E){U.call(this,Yt.STAT_EVENT,x),this.stat=E}_(bi,U);function Bt(x){const E=vi();ge(E,new bi(E,x))}Yt.Ja="timingevent";function fs(x,E){U.call(this,Yt.Ja,x),this.size=E}_(fs,U);function Is(x,E){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},E)}function hs(){this.g=!0}hs.prototype.ua=function(){this.g=!1};function zl(x,E,w,L,W,ie){x.info(function(){if(x.g)if(ie){var _e="",it=ie.split("&");for(let Nt=0;Nt<it.length;Nt++){var sn=it[Nt].split("=");if(sn.length>1){const Kt=sn[0];sn=sn[1];const Vs=Kt.split("_");_e=Vs.length>=2&&Vs[1]=="type"?_e+(Kt+"="+sn+"&"):_e+(Kt+"=redacted&")}}}else _e=null;else _e=ie;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+E+`
`+w+`
`+_e})}function Na(x,E,w,L,W,ie,_e){x.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+E+`
`+w+`
`+ie+" "+_e})}function Cs(x,E,w,L){x.info(function(){return"XMLHTTP TEXT ("+E+"): "+Fl(x,w)+(L?" "+L:"")})}function Fi(x,E){x.info(function(){return"TIMEOUT: "+E})}hs.prototype.info=function(){};function Fl(x,E){if(!x.g)return E;if(!E)return null;try{const ie=JSON.parse(E);if(ie){for(x=0;x<ie.length;x++)if(Array.isArray(ie[x])){var w=ie[x];if(!(w.length<2)){var L=w[1];if(Array.isArray(L)&&!(L.length<1)){var W=L[0];if(W!="noop"&&W!="stop"&&W!="close")for(let _e=1;_e<L.length;_e++)L[_e]=""}}}}return $n(ie)}catch{return E}}var qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ka={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ia;function Ki(){}_(Ki,ds),Ki.prototype.g=function(){return new XMLHttpRequest},Ia=new Ki;function Rs(x){return encodeURIComponent(String(x))}function vo(x){var E=1;x=x.split(":");const w=[];for(;E>0&&x.length;)w.push(x.shift()),E--;return x.length&&w.push(x.join(":")),w}function ms(x,E,w,L){this.j=x,this.i=E,this.l=w,this.S=L||1,this.V=new nn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ps}function ps(){this.i=null,this.g="",this.h=!1}var Zt={},fn={};function gs(x,E,w){x.M=1,x.A=An(ct(E)),x.u=w,x.R=!0,xs(x,null)}function xs(x,E){x.F=Date.now(),Ms(x),x.B=ct(x.A);var w=x.B,L=x.S;Array.isArray(L)||(L=[String(L)]),To(w.i,"t",L),x.C=0,w=x.j.L,x.h=new ps,x.g=Ru(x.j,w?E:null,!x.u),x.P>0&&(x.O=new ht(p(x.Y,x,x.g),x.P)),E=x.V,w=x.g,L=x.ba;var W="readystatechange";Array.isArray(W)||(W&&(ks[0]=W.toString()),W=ks);for(let ie=0;ie<W.length;ie++){const _e=qe(w,W[ie],L||E.handleEvent,!1,E.h||E);if(!_e)break;E.g[_e.key]=_e}E=x.J?H(x.J):{},x.u?(x.v||(x.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,E)):(x.v="GET",x.g.ea(x.B,x.v,null,E)),st(),zl(x.i,x.v,x.B,x.l,x.S,x.u)}ms.prototype.ba=function(x){x=x.target;const E=this.O;E&&ni(x)==3?E.j():this.Y(x)},ms.prototype.Y=function(x){try{if(x==this.g)e:{const it=ni(this.g),sn=this.g.ya(),Nt=this.g.ca();if(!(it<3)&&(it!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||it!=4||sn==7||(sn==8||Nt<=0?st(3):st(2)),Ds(this);var E=this.g.ca();this.X=E;var w=bo(this);if(this.o=E==200,Na(this.i,this.v,this.B,this.l,this.S,it,E),this.o){if(this.U&&!this.L){t:{if(this.g){var L,W=this.g;if((L=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(L)){var ie=L;break t}}ie=null}if(x=ie)Cs(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ps(this,x);else{this.o=!1,this.m=3,Bt(12),Yn(this),ts(this);break e}}if(this.R){x=!0;let Kt;for(;!this.K&&this.C<w.length;)if(Kt=_o(this,w),Kt==fn){it==4&&(this.m=4,Bt(14),x=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Zt){this.m=4,Bt(15),Cs(this.i,this.l,w,"[Invalid Chunk]"),x=!1;break}else Cs(this.i,this.l,Kt,null),Ps(this,Kt);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||w.length!=0||this.h.h||(this.m=1,Bt(16),x=!1),this.o=this.o&&x,!x)Cs(this.i,this.l,w,"[Invalid Chunked Response]"),Yn(this),ts(this);else if(w.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Xl(_e),_e.P=!0,Bt(11))}}else Cs(this.i,this.l,w,null),Ps(this,w);it==4&&Yn(this),this.o&&!this.K&&(it==4?Nu(this.j,this):(this.o=!1,Ms(this)))}else Yi(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Yn(this),ts(this)}}}catch{}finally{}};function bo(x){if(!Ca(x))return x.g.la();const E=In(x.g);if(E==="")return"";let w="";const L=E.length,W=ni(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Yn(x),ts(x),"";x.h.i=new u.TextDecoder}for(let ie=0;ie<L;ie++)x.h.h=!0,w+=x.h.i.decode(E[ie],{stream:!(W&&ie==L-1)});return E.length=0,x.h.g+=w,x.C=0,x.h.g}function Ca(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function _o(x,E){var w=x.C,L=E.indexOf(`
`,w);return L==-1?fn:(w=Number(E.substring(w,L)),isNaN(w)?Zt:(L+=1,L+w>E.length?fn:(E=E.slice(L,L+w),x.C=L+w,E)))}ms.prototype.cancel=function(){this.K=!0,Yn(this)};function Ms(x){x.T=Date.now()+x.H,wr(x,x.H)}function wr(x,E){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Is(p(x.aa,x),E)}function Ds(x){x.D&&(u.clearTimeout(x.D),x.D=null)}ms.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Fi(this.i,this.B),this.M!=2&&(st(),Bt(17)),Yn(this),this.m=2,ts(this)):wr(this,this.T-x)};function ts(x){x.j.I==0||x.K||Nu(x.j,x)}function Yn(x){Ds(x);var E=x.O;E&&typeof E.dispose=="function"&&E.dispose(),x.O=null,us(x.V),x.g&&(E=x.g,x.g=null,E.abort(),E.dispose())}function Ps(x,E){try{var w=x.j;if(w.I!=0&&(w.g==x||Ue(w.h,x))){if(!x.L&&Ue(w.h,x)&&w.I==3){try{var L=w.Ba.g.parse(E)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<x.F)No(w),Dr(w);else break e;Ua(w),Bt(18)}}else w.xa=W[1],0<w.xa-w.K&&W[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Is(p(w.Va,w),6e3));Ie(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ni(w,11)}else if((x.L||w.g==x)&&No(w),!j(E))for(W=w.Ba.g.parse(E),E=0;E<W.length;E++){let Nt=W[E];const Kt=Nt[0];if(!(Kt<=w.K))if(w.K=Kt,Nt=Nt[1],w.I==2)if(Nt[0]=="c"){w.M=Nt[1],w.ba=Nt[2];const Vs=Nt[3];Vs!=null&&(w.ka=Vs,w.j.info("VER="+w.ka));const ki=Nt[4];ki!=null&&(w.za=ki,w.j.info("SVER="+w.za));const si=Nt[5];si!=null&&typeof si=="number"&&si>0&&(L=1.5*si,w.O=L,w.j.info("backChannelRequestTimeoutMs_="+L)),L=w;const ii=x.g;if(ii){const ja=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var ie=L.h;ie.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Le(ie,ie.h),ie.h=null))}if(L.G){const ko=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ko&&(L.wa=ko,Ze(L.J,L.G,ko))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-x.F,w.j.info("Handshake RTT: "+w.T+"ms")),L=w;var _e=x;if(L.na=Cu(L,L.L?L.ba:null,L.W),_e.L){Ye(L.h,_e);var it=_e,sn=L.O;sn&&(it.H=sn),it.D&&(Ds(it),Ms(it)),L.g=_e}else Au(L);w.i.length>0&&wi(w)}else Nt[0]!="stop"&&Nt[0]!="close"||Ni(w,7);else w.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Ni(w,7):Ql(w):Nt[0]!="noop"&&w.l&&w.l.qa(Nt),w.A=0)}}st(4)}catch{}}var Jt=class{constructor(x,E){this.g=x,this.map=E}};function Q(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ve(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Ie(x){return x.h?1:x.g?x.g.size:0}function Ue(x,E){return x.h?x.h==E:x.g?x.g.has(E):!1}function Le(x,E){x.g?x.g.add(E):x.h=E}function Ye(x,E){x.h&&x.h==E?x.h=null:x.g&&x.g.has(E)&&x.g.delete(E)}Q.prototype.cancel=function(){if(this.i=De(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function De(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let E=x.i;for(const w of x.g.values())E=E.concat(w.G);return E}return A(x.i)}var ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _t(x,E){if(x){x=x.split("&");for(let w=0;w<x.length;w++){const L=x[w].indexOf("=");let W,ie=null;L>=0?(W=x[w].substring(0,L),ie=x[w].substring(L+1)):W=x[w],E(W,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Xe(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;x instanceof Xe?(this.l=x.l,Tt(this,x.j),this.o=x.o,this.g=x.g,hn(this,x.u),this.h=x.h,_n(this,Eu(x.i)),this.m=x.m):x&&(E=String(x).match(ze))?(this.l=!1,Tt(this,E[1]||"",!0),this.o=On(E[2]||""),this.g=On(E[3]||"",!0),hn(this,E[4]),this.h=On(E[5]||"",!0),_n(this,E[6]||"",!0),this.m=On(E[7]||"")):(this.l=!1,this.i=new kr(null,this.l))}Xe.prototype.toString=function(){const x=[];var E=this.j;E&&x.push(Zs(E,Ls,!0),":");var w=this.g;return(w||E=="file")&&(x.push("//"),(E=this.o)&&x.push(Zs(E,Ls,!0),"@"),x.push(Rs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&x.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&x.push("/"),x.push(Zs(w,w.charAt(0)=="/"?Nr:_i,!0))),(w=this.i.toString())&&x.push("?",w),(w=this.m)&&x.push("#",Zs(w,_u)),x.join("")},Xe.prototype.resolve=function(x){const E=ct(this);let w=!!x.j;w?Tt(E,x.j):w=!!x.o,w?E.o=x.o:w=!!x.g,w?E.g=x.g:w=x.u!=null;var L=x.h;if(w)hn(E,x.u);else if(w=!!x.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var W=E.h.lastIndexOf("/");W!=-1&&(L=E.h.slice(0,W+1)+L)}if(W=L,W==".."||W==".")L="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){L=W.lastIndexOf("/",0)==0,W=W.split("/");const ie=[];for(let _e=0;_e<W.length;){const it=W[_e++];it=="."?L&&_e==W.length&&ie.push(""):it==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),L&&_e==W.length&&ie.push("")):(ie.push(it),L=!0)}L=ie.join("/")}else L=W}return w?E.h=L:w=x.i.toString()!=="",w?_n(E,Eu(x.i)):w=!!x.m,w&&(E.m=x.m),E};function ct(x){return new Xe(x)}function Tt(x,E,w){x.j=w?On(E,!0):E,x.j&&(x.j=x.j.replace(/:$/,""))}function hn(x,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);x.u=E}else x.u=null}function _n(x,E,w){E instanceof kr?(x.i=E,Eo(x.i,x.l)):(w||(E=Zs(E,Ti)),x.i=new kr(E,x.l))}function Ze(x,E,w){x.i.set(E,w)}function An(x){return Ze(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function On(x,E){return x?E?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Zs(x,E,w){return typeof x=="string"?(x=encodeURI(x).replace(E,Tn),w&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Tn(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Ls=/[#\/\?@]/g,_i=/[#\?:]/g,Nr=/[#\?]/g,Ti=/[#\?@]/g,_u=/#/g;function kr(x,E){this.h=this.g=null,this.i=x||null,this.j=!!E}function ns(x){x.g||(x.g=new Map,x.h=0,x.i&&_t(x.i,function(E,w){x.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=kr.prototype,n.add=function(x,E){ns(this),this.i=null,x=Ir(this,x);let w=this.g.get(x);return w||this.g.set(x,w=[]),w.push(E),this.h+=1,this};function Tu(x,E){ns(x),E=Ir(x,E),x.g.has(E)&&(x.i=null,x.h-=x.g.get(E).length,x.g.delete(E))}function ql(x,E){return ns(x),E=Ir(x,E),x.g.has(E)}n.forEach=function(x,E){ns(this),this.g.forEach(function(w,L){w.forEach(function(W){x.call(E,W,L,this)},this)},this)};function Kl(x,E){ns(x);let w=[];if(typeof E=="string")ql(x,E)&&(w=w.concat(x.g.get(Ir(x,E))));else for(x=Array.from(x.g.values()),E=0;E<x.length;E++)w=w.concat(x[E]);return w}n.set=function(x,E){return ns(this),this.i=null,x=Ir(this,x),ql(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[E]),this.h+=1,this},n.get=function(x,E){return x?(x=Kl(this,x),x.length>0?String(x[0]):E):E};function To(x,E,w){Tu(x,E),w.length>0&&(x.i=null,x.g.set(Ir(x,E),A(w)),x.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],E=Array.from(this.g.keys());for(let L=0;L<E.length;L++){var w=E[L];const W=Rs(w);w=Kl(this,w);for(let ie=0;ie<w.length;ie++){let _e=W;w[ie]!==""&&(_e+="="+Rs(w[ie])),x.push(_e)}}return this.i=x.join("&")};function Eu(x){const E=new kr;return E.i=x.i,x.g&&(E.g=new Map(x.g),E.h=x.h),E}function Ir(x,E){return E=String(E),x.j&&(E=E.toLowerCase()),E}function Eo(x,E){E&&!x.j&&(ns(x),x.i=null,x.g.forEach(function(w,L){const W=L.toLowerCase();L!=W&&(Tu(this,L),To(this,W,w))},x)),x.j=E}function ei(x,E){const w=new hs;if(u.Image){const L=new Image;L.onload=v(Us,w,"TestLoadImage: loaded",!0,E,L),L.onerror=v(Us,w,"TestLoadImage: error",!1,E,L),L.onabort=v(Us,w,"TestLoadImage: abort",!1,E,L),L.ontimeout=v(Us,w,"TestLoadImage: timeout",!1,E,L),u.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=x}else E(!1)}function $l(x,E){const w=new hs,L=new AbortController,W=setTimeout(()=>{L.abort(),Us(w,"TestPingServer: timeout",!1,E)},1e4);fetch(x,{signal:L.signal}).then(ie=>{clearTimeout(W),ie.ok?Us(w,"TestPingServer: ok",!0,E):Us(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(W),Us(w,"TestPingServer: error",!1,E)})}function Us(x,E,w,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(w)}catch{}}function Cr(){this.g=new Xs}function Ei(x){this.i=x.Sb||null,this.h=x.ab||!1}_(Ei,ds),Ei.prototype.g=function(){return new Ra(this.i,this.h)};function Ra(x,E){ye.call(this),this.H=x,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ra,ye),n=Ra.prototype,n.open=function(x,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=E,this.readyState=1,ti(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(E.body=x),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;So(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function So(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var E=x.value?x.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!x.done}))&&(this.response=this.responseText+=E)}x.done?Rr(this):ti(this),this.readyState==3&&So(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Rr(this))},n.Na=function(x){this.g&&(this.response=x,Rr(this))},n.ga=function(){this.g&&Rr(this)};function Rr(x){x.readyState=4,x.l=null,x.j=null,x.B=null,ti(x)}n.setRequestHeader=function(x,E){this.A.append(x,E)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,x.push(w[0]+": "+w[1]),w=E.next();return x.join(`\r
`)};function ti(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function js(x){let E="";return Oe(x,function(w,L){E+=L,E+=":",E+=w,E+=`\r
`}),E}function Ma(x,E,w){e:{for(L in w){var L=!1;break e}L=!0}L||(w=js(w),typeof x=="string"?w!=null&&Rs(w):Ze(x,E,w))}function Lt(x){ye.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Lt,ye);var Si=/^https?$/i,Yl=["POST","PUT"];n=Lt.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,E,w,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);E=E?E.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ia.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(x),!0),this.B=!1}catch(ie){Da(this,ie);return}if(x=w||"",w=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)w.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ie of L.keys())w.set(ie,L.get(ie));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(w.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(Yl,E,void 0)>=0)||L||W||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,_e]of w)this.g.setRequestHeader(ie,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(ie){Da(this,ie)}};function Da(x,E){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=E,x.o=5,Jl(x),$i(x)}function Jl(x){x.A||(x.A=!0,ge(x,"complete"),ge(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,ge(this,"complete"),ge(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),Lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Pa(this):this.Xa())},n.Xa=function(){Pa(this)};function Pa(x){if(x.h&&typeof o<"u"){if(x.v&&ni(x)==4)setTimeout(x.Ca.bind(x),0);else if(ge(x,"readystatechange"),ni(x)==4){x.h=!1;try{const ie=x.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var L;if(L=ie===0){let _e=String(x.D).match(ze)[1]||null;!_e&&u.self&&u.self.location&&(_e=u.self.location.protocol.slice(0,-1)),L=!Si.test(_e?_e.toLowerCase():"")}w=L}if(w)ge(x,"complete"),ge(x,"success");else{x.o=6;try{var W=ni(x)>2?x.g.statusText:""}catch{W=""}x.l=W+" ["+x.ca()+"]",Jl(x)}}finally{$i(x)}}}}function $i(x,E){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const w=x.g;x.g=null,E||ge(x,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ni(x){return x.g?x.g.readyState:0}n.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var E=this.g.responseText;return x&&E.indexOf(x)==0&&(E=E.substring(x.length)),yi(E)}};function In(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(x){const E={};x=(x.g&&ni(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<x.length;L++){if(j(x[L]))continue;var w=vo(x[L]);const W=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ie=E[W]||[];E[W]=ie,ie.push(w)}be(E,function(L){return L.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(x,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[x]||E}function Mr(x){this.za=0,this.i=[],this.j=new hs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ai("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ai("baseRetryDelayMs",5e3,x),this.Za=Ai("retryDelaySeedMs",1e4,x),this.Ta=Ai("forwardChannelMaxRetries",2,x),this.va=Ai("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Q(x&&x.concurrentRequestLimit),this.Ba=new Cr,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Mr.prototype,n.ka=8,n.I=1,n.connect=function(x,E,w,L){Bt(0),this.W=x,this.H=E||{},w&&L!==void 0&&(this.H.OSID=w,this.H.OAID=L),this.F=this.X,this.J=Cu(this,null,this.W),wi(this)};function Ql(x){if(Ao(x),x.I==3){var E=x.V++,w=ct(x.J);if(Ze(w,"SID",x.M),Ze(w,"RID",E),Ze(w,"TYPE","terminate"),La(x,w),E=new ms(x,x.j,E),E.M=2,E.A=An(ct(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=E.A,w=!0),w||(E.g=Ru(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ms(E)}Iu(x)}function Dr(x){x.g&&(Xl(x),x.g.cancel(),x.g=null)}function Ao(x){Dr(x),x.v&&(u.clearTimeout(x.v),x.v=null),No(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function wi(x){if(!ve(x.h)&&!x.m){x.m=!0;var E=x.Ea;se||P(),Y||(se(),Y=!0),D.add(E,x),x.D=0}}function wo(x,E){return Ie(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=E.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Is(p(x.Ea,x,E),ku(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const W=new ms(this,this.j,x);let ie=this.o;if(this.U&&(ie?(ie=H(ie),ue(ie,this.U)):ie=this.U),this.u!==null||this.R||(W.J=ie,ie=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var L=this.i[w];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(E+=L,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=Su(this,W,E),w=ct(this.J),Ze(w,"RID",x),Ze(w,"CVER",22),this.G&&Ze(w,"X-HTTP-Session-Id",this.G),La(this,w),ie&&(this.R?E="headers="+Rs(js(ie))+"&"+E:this.u&&Ma(w,this.u,ie)),Le(this.h,W),this.Ra&&Ze(w,"TYPE","init"),this.S?(Ze(w,"$req",E),Ze(w,"SID","null"),W.U=!0,gs(W,w,null)):gs(W,w,E),this.I=2}}else this.I==3&&(x?Wl(this,x):this.i.length==0||ve(this.h)||Wl(this))};function Wl(x,E){var w;E?w=E.l:w=x.V++;const L=ct(x.J);Ze(L,"SID",x.M),Ze(L,"RID",w),Ze(L,"AID",x.K),La(x,L),x.u&&x.o&&Ma(L,x.u,x.o),w=new ms(x,x.j,w,x.D+1),x.u===null&&(w.J=x.o),E&&(x.i=E.G.concat(x.i)),E=Su(x,w,1e3),w.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),Le(x.h,w),gs(w,L,E)}function La(x,E){x.H&&Oe(x.H,function(w,L){Ze(E,L,w)}),x.l&&Oe({},function(w,L){Ze(E,L,w)})}function Su(x,E,w){w=Math.min(x.i.length,w);const L=x.l?p(x.l.Ka,x.l,x):null;e:{var W=x.i;let it=-1;for(;;){const sn=["count="+w];it==-1?w>0?(it=W[0].g,sn.push("ofs="+it)):it=0:sn.push("ofs="+it);let Nt=!0;for(let Kt=0;Kt<w;Kt++){var ie=W[Kt].g;const Vs=W[Kt].map;if(ie-=it,ie<0)it=Math.max(0,W[Kt].g-100),Nt=!1;else try{ie="req"+ie+"_"||"";try{var _e=Vs instanceof Map?Vs:Object.entries(Vs);for(const[ki,si]of _e){let ii=si;f(si)&&(ii=$n(si)),sn.push(ie+ki+"="+encodeURIComponent(ii))}}catch(ki){throw sn.push(ie+"type="+encodeURIComponent("_badmap")),ki}}catch{L&&L(Vs)}}if(Nt){_e=sn.join("&");break e}}_e=void 0}return x=x.i.splice(0,w),E.G=x,_e}function Au(x){if(!x.g&&!x.v){x.Y=1;var E=x.Da;se||P(),Y||(se(),Y=!0),D.add(E,x),x.A=0}}function Ua(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Is(p(x.Da,x),ku(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Is(p(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Dr(this),wu(this))};function Xl(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function wu(x){x.g=new ms(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var E=ct(x.na);Ze(E,"RID","rpc"),Ze(E,"SID",x.M),Ze(E,"AID",x.K),Ze(E,"CI",x.F?"0":"1"),!x.F&&x.ia&&Ze(E,"TO",x.ia),Ze(E,"TYPE","xmlhttp"),La(x,E),x.u&&x.o&&Ma(E,x.u,x.o),x.O&&(x.g.H=x.O);var w=x.g;x=x.ba,w.M=1,w.A=An(ct(E)),w.u=null,w.R=!0,xs(w,x)}n.Va=function(){this.C!=null&&(this.C=null,Dr(this),Ua(this),Bt(19))};function No(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function Nu(x,E){var w=null;if(x.g==E){No(x),Xl(x),x.g=null;var L=2}else if(Ue(x.h,E))w=E.G,Ye(x.h,E),L=1;else return;if(x.I!=0){if(E.o)if(L==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var W=x.D;L=vi(),ge(L,new fs(L,w)),wi(x)}else Au(x);else if(W=E.m,W==3||W==0&&E.X>0||!(L==1&&wo(x,E)||L==2&&Ua(x)))switch(w&&w.length>0&&(E=x.h,E.i=E.i.concat(w)),W){case 1:Ni(x,5);break;case 4:Ni(x,10);break;case 3:Ni(x,6);break;default:Ni(x,2)}}}function ku(x,E){let w=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(w*=2),w*E}function Ni(x,E){if(x.j.info("Error code "+E),E==2){var w=p(x.bb,x),L=x.Ua;const W=!L;L=new Xe(L||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Tt(L,"https"),An(L),W?ei(L.toString(),w):$l(L.toString(),w)}else Bt(2);x.I=0,x.l&&x.l.pa(E),Iu(x),Ao(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Iu(x){if(x.I=0,x.ja=[],x.l){const E=De(x.h);(E.length!=0||x.i.length!=0)&&(k(x.ja,E),k(x.ja,x.i),x.h.i.length=0,A(x.i),x.i.length=0),x.l.oa()}}function Cu(x,E,w){var L=w instanceof Xe?ct(w):new Xe(w);if(L.g!="")E&&(L.g=E+"."+L.g),hn(L,L.u);else{var W=u.location;L=W.protocol,E=E?E+"."+W.hostname:W.hostname,W=+W.port;const ie=new Xe(null);L&&Tt(ie,L),E&&(ie.g=E),W&&hn(ie,W),w&&(ie.h=w),L=ie}return w=x.G,E=x.wa,w&&E&&Ze(L,w,E),Ze(L,"VER",x.ka),La(x,L),L}function Ru(x,E,w){if(E&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=x.Aa&&!x.ma?new Lt(new Ei({ab:w})):new Lt(x.ma),E.Fa(x.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}n=Mu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Pr(){}Pr.prototype.g=function(x,E){return new Jn(x,E)};function Jn(x,E){ye.call(this),this.g=new Mr(E),this.l=x,this.h=E&&E.messageUrlParams||null,x=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(x?x["X-WebChannel-Content-Type"]=E.messageContentType:x={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(x?x["X-WebChannel-Client-Profile"]=E.sa:x={"X-WebChannel-Client-Profile":E.sa}),this.g.U=x,(x=E&&E.Qb)&&!j(x)&&(this.g.u=x),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!j(E)&&(this.g.G=E,x=this.h,x!==null&&E in x&&(x=this.h,E in x&&delete x[E])),this.j=new Ji(this)}_(Jn,ye),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Ql(this.g)},Jn.prototype.o=function(x){var E=this.g;if(typeof x=="string"){var w={};w.__data__=x,x=w}else this.v&&(w={},w.__data__=$n(x),x=w);E.i.push(new Jt(E.Ya++,x)),E.I==3&&wi(E)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,Jn.Z.N.call(this)};function Du(x){Rt.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var E=x.__sm__;if(E){e:{for(const w in E){x=w;break e}x=void 0}(this.i=x)&&(x=this.i,E=E!==null&&x in E?E[x]:void 0),this.data=E}else this.data=x}_(Du,Rt);function Pu(){Xt.call(this),this.status=1}_(Pu,Xt);function Ji(x){this.g=x}_(Ji,Mu),Ji.prototype.ra=function(){ge(this.g,"a")},Ji.prototype.qa=function(x){ge(this.g,new Du(x))},Ji.prototype.pa=function(x){ge(this.g,new Pu)},Ji.prototype.oa=function(){ge(this.g,"b")},Pr.prototype.createWebChannel=Pr.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,_A=function(){return new Pr},bA=function(){return vi()},vA=Yt,l0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,Zd=qi,ka.COMPLETE="complete",yA=ka,Wt.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",ye.prototype.listen=ye.prototype.J,Gc=Wt,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,xA=Lt}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});const wT="@firebase/firestore",NT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new H0("@firebase/firestore");function al(){return lo.logLevel}function Re(n,...e){if(lo.logLevel<=gt.DEBUG){const t=e.map(q0);lo.debug(`Firestore (${Pl}): ${n}`,...t)}}function vr(n,...e){if(lo.logLevel<=gt.ERROR){const t=e.map(q0);lo.error(`Firestore (${Pl}): ${n}`,...t)}}function bl(n,...e){if(lo.logLevel<=gt.WARN){const t=e.map(q0);lo.warn(`Firestore (${Pl}): ${n}`,...t)}}function q0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,TA(n,s,t)}function TA(n,e,t){let s=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw vr(s),new Error(s)}function Mt(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||TA(e,r,s)}function tt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Hn.UNAUTHENTICATED)))}shutdown(){}}class e5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class t5{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mt(this.o===void 0,42304);let s=this.i;const r=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let o=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pr,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await r(this.currentUser)}))},f=m=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Mt(typeof s.accessToken=="string",31837,{l:s}),new EA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new Hn(e)}}class n5{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s5{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new n5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mt(this.o===void 0,3512);const s=o=>{o.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const r=o=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=r5(40);for(let o=0;o<r.length;++o)s.length<20&&r[o]<t&&(s+=e.charAt(r[o]%62))}return s}}function xt(n,e){return n<e?-1:n>e?1:0}function c0(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),o=e.charAt(s);if(r!==o)return Mp(r)===Mp(o)?xt(r,o):Mp(r)?1:-1}return xt(n.length,e.length)}const a5=55296,o5=57343;function Mp(n){const e=n.charCodeAt(0);return e>=a5&&e<=o5}function _l(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__name__";class Pi{constructor(e,t,s){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&He(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const o=Pi.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return xt(e.length,t.length)}static compareSegments(e,t){const s=Pi.isNumericId(e),r=Pi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):c0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fa.fromString(e.substring(4,e.length-2))}}class Ht extends Pi{construct(e,t,s){return new Ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new we(he.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new Ht(t)}static emptyPath(){return new Ht([])}}const l5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Pi{construct(e,t,s){return new Ln(e,t,s)}static isValidIdentifier(e){return l5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IT}static keyField(){return new Ln([IT])}static fromServerFormat(e){const t=[];let s="",r=0;const o=()=>{if(s.length===0)throw new we(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new we(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new we(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(s+=f,r++):(o(),r++)}if(o(),u)throw new we(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(t)}static emptyPath(){return new Ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Ht.fromString(e))}static fromName(e){return new Ve(Ht.fromString(e).popFirst(5))}static empty(){return new Ve(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n,e,t){if(!t)throw new we(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c5(n,e,t,s){if(e===!0&&s===!0)throw new we(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CT(n){if(!Ve.isDocumentKey(n))throw new we(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RT(n){if(Ve.isDocumentKey(n))throw new we(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function eh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":He(12329,{type:typeof n})}function mi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eh(n);throw new we(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function u5(n,e){if(e<=0)throw new we(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n,e){const t={typeString:n};return e&&(t.value=e),t}function uu(n,e){if(!AA(n))throw new we(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(r&&typeof u!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new we(he.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=-62135596800,DT=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*DT);return new qt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<MT)throw new we(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DT}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uu(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-MT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:bn("string",qt._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new qt(0,0))}static max(){return new Qe(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=-1;function d5(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Qe.fromTimestamp(s===1e9?new qt(t+1,0):new qt(t,s));return new pa(r,Ve.empty(),e)}function f5(n){return new pa(n.readTime,n.key,Xc)}class pa{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new pa(Qe.min(),Ve.empty(),Xc)}static max(){return new pa(Qe.max(),Ve.empty(),Xc)}}function h5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(n.documentKey,e.documentKey),t!==0?t:xt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==m5)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((s,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,s)=>{t(e)}))}static reject(e){return new pe(((t,s)=>{s(e)}))}static waitFor(e){return new pe(((t,s)=>{let r=0,o=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++o,u&&o===r&&t()}),(m=>s(m)))})),u=!0,o===r&&t()}))}static or(e){let t=pe.resolve(!1);for(const s of e)t=t.next((r=>r?pe.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,o)=>{s.push(t.call(this,r,o))})),this.waitFor(s)}static mapArray(e,t){return new pe(((s,r)=>{const o=e.length,u=new Array(o);let f=0;for(let m=0;m<o;m++){const p=m;t(e[p]).next((v=>{u[p]=v,++f,f===o&&s(u)}),(v=>r(v)))}}))}static doWhile(e,t){return new pe(((s,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):s()};o()}))}}function g5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=-1;function nh(n){return n==null}function _f(n){return n===0&&1/n==-1/0}function x5(n){return typeof n=="number"&&Number.isInteger(n)&&!_f(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="";function y5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PT(e)),e=v5(n.get(t),e);return PT(e)}function v5(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case wA:t+="";break;default:t+=o}}return t}function PT(n){return n+wA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ea(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Qt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}}class Fd{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,s,r,o){this.key=e,this.value=t,this.color=s??Pn.RED,this.left=r??Pn.EMPTY,this.right=o??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,o){return new Pn(e??this.key,t??this.value,s??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const o=s(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,s),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Pn.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,s,r,o){return this}insert(e,t,s){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new UT(this.data.getIterator())}getIteratorFrom(e){return new UT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class UT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new As([])}unionWith(e){let t=new Sn(Ln.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new As(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kA("Invalid base64 string: "+o):o}})(e);return new jn(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o})(e);return new jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const b5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(Mt(!!n,39018),typeof n=="string"){let e=0;const t=b5.exec(n);if(Mt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xa(n){return typeof n=="string"?jn.fromBase64String(n):jn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="server_timestamp",CA="__type__",RA="__previous_value__",MA="__local_write_time__";function Y0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[CA])==null?void 0:s.stringValue)===IA}function sh(n){const e=n.mapValue.fields[RA];return Y0(e)?sh(e):e}function Zc(n){const e=ga(n.mapValue.fields[MA].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,t,s,r,o,u,f,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const Tf="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||Tf}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="__type__",T5="__max__",qd={mapValue:{}},PA="__vector__",Ef="value";function ya(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Y0(n)?4:S5(n)?9007199254740991:E5(n)?10:11:He(28295,{value:n})}function Gi(n,e){if(n===e)return!0;const t=ya(n);if(t!==ya(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zc(n).isEqual(Zc(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ga(r.timestampValue),f=ga(o.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return xa(r.bytesValue).isEqual(xa(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return on(r.geoPointValue.latitude)===on(o.geoPointValue.latitude)&&on(r.geoPointValue.longitude)===on(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return on(r.integerValue)===on(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=on(r.doubleValue),f=on(o.doubleValue);return u===f?_f(u)===_f(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return _l(n.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return(function(r,o){const u=r.mapValue.fields||{},f=o.mapValue.fields||{};if(LT(u)!==LT(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!Gi(u[m],f[m])))return!1;return!0})(n,e);default:return He(52216,{left:n})}}function tu(n,e){return(n.values||[]).find((t=>Gi(t,e)))!==void 0}function Tl(n,e){if(n===e)return 0;const t=ya(n),s=ya(e);if(t!==s)return xt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return(function(o,u){const f=on(o.integerValue||o.doubleValue),m=on(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return jT(n.timestampValue,e.timestampValue);case 4:return jT(Zc(n),Zc(e));case 5:return c0(n.stringValue,e.stringValue);case 6:return(function(o,u){const f=xa(o),m=xa(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(o,u){const f=o.split("/"),m=u.split("/");for(let p=0;p<f.length&&p<m.length;p++){const v=xt(f[p],m[p]);if(v!==0)return v}return xt(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,u){const f=xt(on(o.latitude),on(u.latitude));return f!==0?f:xt(on(o.longitude),on(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return VT(n.arrayValue,e.arrayValue);case 10:return(function(o,u){var T,A,k,M;const f=o.fields||{},m=u.fields||{},p=(T=f[Ef])==null?void 0:T.arrayValue,v=(A=m[Ef])==null?void 0:A.arrayValue,_=xt(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((M=v==null?void 0:v.values)==null?void 0:M.length)||0);return _!==0?_:VT(p,v)})(n.mapValue,e.mapValue);case 11:return(function(o,u){if(o===qd.mapValue&&u===qd.mapValue)return 0;if(o===qd.mapValue)return 1;if(u===qd.mapValue)return-1;const f=o.fields||{},m=Object.keys(f),p=u.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let _=0;_<m.length&&_<v.length;++_){const T=c0(m[_],v[_]);if(T!==0)return T;const A=Tl(f[m[_]],p[v[_]]);if(A!==0)return A}return xt(m.length,v.length)})(n.mapValue,e.mapValue);default:throw He(23264,{he:t})}}function jT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xt(n,e);const t=ga(n),s=ga(e),r=xt(t.seconds,s.seconds);return r!==0?r:xt(t.nanos,s.nanos)}function VT(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const o=Tl(t[r],s[r]);if(o)return o}return xt(t.length,s.length)}function El(n){return u0(n)}function u0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ga(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return xa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const o of t.values||[])r?r=!1:s+=",",s+=u0(o);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const u of s)o?o=!1:r+=",",r+=`${u}:${u0(t.fields[u])}`;return r+"}"})(n.mapValue):He(61005,{value:n})}function ef(n){switch(ya(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sh(n);return e?16+ef(e):16;case 5:return 2*n.stringValue.length;case 6:return xa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,o)=>r+ef(o)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return Ea(s.fields,((o,u)=>{r+=o.length+ef(u)})),r})(n.mapValue);default:throw He(13486,{value:n})}}function OT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function d0(n){return!!n&&"integerValue"in n}function J0(n){return!!n&&"arrayValue"in n}function GT(n){return!!n&&"nullValue"in n}function BT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tf(n){return!!n&&"mapValue"in n}function E5(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[DA])==null?void 0:s.stringValue)===PA}function qc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ea(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=qc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qc(n.arrayValue.values[t]);return e}return{...n}}function S5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===T5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.value=e}static empty(){return new cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qc(t)}setAll(e){let t=Ln.emptyPath(),s={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,r),s={},r=[],t=f.popLast()}u?s[f.lastSegment()]=qc(u):r.push(f.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,r)}delete(e){const t=this.field(e.popLast());tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];tf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){Ea(t,((r,o)=>e[r]=o));for(const r of s)delete e[r]}clone(){return new cs(qc(this.value))}}function LA(n){const e=[];return Ea(n.fields,((t,s)=>{const r=new Ln([t]);if(tf(s)){const o=LA(s.mapValue).fields;if(o.length===0)e.push(r);else for(const u of o)e.push(r.child(u))}else e.push(r)})),new As(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,s,r,o,u,f){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=o,this.data=u,this.documentState=f}static newInvalidDocument(e){return new zn(e,0,Qe.min(),Qe.min(),Qe.min(),cs.empty(),0)}static newFoundDocument(e,t,s,r){return new zn(e,1,t,Qe.min(),s,r,0)}static newNoDocument(e,t){return new zn(e,2,t,Qe.min(),Qe.min(),cs.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,Qe.min(),Qe.min(),cs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t){this.position=e,this.inclusive=t}}function HT(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const o=e[r],u=n.position[r];if(o.field.isKeyField()?s=Ve.comparator(Ve.fromName(u.referenceValue),t.key):s=Tl(u,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function zT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t="asc"){this.field=e,this.dir=t}}function A5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{}class vn extends UA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new N5(e,t,s):t==="array-contains"?new C5(e,s):t==="in"?new R5(e,s):t==="not-in"?new M5(e,s):t==="array-contains-any"?new D5(e,s):new vn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new k5(e,s):new I5(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Tl(t,this.value)):t!==null&&ya(this.value)===ya(t)&&this.matchesComparison(Tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends UA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pi(e,t)}matches(e){return jA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jA(n){return n.op==="and"}function VA(n){return w5(n)&&jA(n)}function w5(n){for(const e of n.filters)if(e instanceof pi)return!1;return!0}function f0(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+El(n.value);if(VA(n))return n.filters.map((e=>f0(e))).join(",");{const e=n.filters.map((t=>f0(t))).join(",");return`${n.op}(${e})`}}function OA(n,e){return n instanceof vn?(function(s,r){return r instanceof vn&&s.op===r.op&&s.field.isEqual(r.field)&&Gi(s.value,r.value)})(n,e):n instanceof pi?(function(s,r){return r instanceof pi&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((o,u,f)=>o&&OA(u,r.filters[f])),!0):!1})(n,e):void He(19439)}function GA(n){return n instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${El(t.value)}`})(n):n instanceof pi?(function(t){return t.op.toString()+" {"+t.getFilters().map(GA).join(" ,")+"}"})(n):"Filter"}class N5 extends vn{constructor(e,t,s){super(e,t,s),this.key=Ve.fromName(s.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class k5 extends vn{constructor(e,t){super(e,"in",t),this.keys=BA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class I5 extends vn{constructor(e,t){super(e,"not-in",t),this.keys=BA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ve.fromName(s.referenceValue)))}class C5 extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return J0(t)&&tu(t.arrayValue,this.value)}}class R5 extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tu(this.value.arrayValue,t)}}class M5 extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tu(this.value.arrayValue,t)}}class D5 extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!J0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>tu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,t=null,s=[],r=[],o=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=o,this.startAt=u,this.endAt=f,this.Te=null}}function FT(n,e=null,t=[],s=[],r=null,o=null,u=null){return new P5(n,e,t,s,r,o,u)}function Q0(n){const e=tt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>f0(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),nh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>El(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>El(s))).join(",")),e.Te=t}return e.Te}function W0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zT(n.startAt,e.startAt)&&zT(n.endAt,e.endAt)}function h0(n){return Ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,s=[],r=[],o=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=o,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L5(n,e,t,s,r,o,u,f){return new jl(n,e,t,s,r,o,u,f)}function X0(n){return new jl(n)}function qT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HA(n){return n.collectionGroup!==null}function Kc(n){const e=tt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Sn(Ln.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new nu(o,s))})),t.has(Ln.keyField().canonicalString())||e.Ie.push(new nu(Ln.keyField(),s))}return e.Ie}function Li(n){const e=tt(n);return e.Ee||(e.Ee=U5(e,Kc(n))),e.Ee}function U5(n,e){if(n.limitType==="F")return FT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new nu(r.field,o)}));const t=n.endAt?new Sf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Sf(n.startAt.position,n.startAt.inclusive):null;return FT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function m0(n,e){const t=n.filters.concat([e]);return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Af(n,e,t){return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ih(n,e){return W0(Li(n),Li(e))&&n.limitType===e.limitType}function zA(n){return`${Q0(Li(n))}|lt:${n.limitType}`}function ol(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>GA(r))).join(", ")}]`),nh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>El(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>El(r))).join(",")),`Target(${s})`})(Li(n))}; limitType=${n.limitType})`}function rh(n,e){return e.isFoundDocument()&&(function(s,r){const o=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):Ve.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(n,e)&&(function(s,r){for(const o of Kc(s))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const o of s.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(u,f,m){const p=HT(u,f,m);return u.inclusive?p<=0:p<0})(s.startAt,Kc(s),r)||s.endAt&&!(function(u,f,m){const p=HT(u,f,m);return u.inclusive?p>=0:p>0})(s.endAt,Kc(s),r))})(n,e)}function j5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FA(n){return(e,t)=>{let s=!1;for(const r of Kc(n)){const o=V5(r,e,t);if(o!==0)return o;s=s||r.field.isKeyField()}return 0}}function V5(n,e,t){const s=n.field.isKeyField()?Ve.comparator(e.key,t.key):(function(o,u,f){const m=u.data.field(o),p=f.data.field(o);return m!==null&&p!==null?Tl(m,p):He(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return He(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,o]of s)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,((t,s)=>{for(const[r,o]of s)e(r,o)}))}isEmpty(){return NA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=new Qt(Ve.comparator);function br(){return O5}const qA=new Qt(Ve.comparator);function Bc(...n){let e=qA;for(const t of n)e=e.insert(t.key,t);return e}function KA(n){let e=qA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function no(){return $c()}function $A(){return $c()}function $c(){return new mo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const G5=new Qt(Ve.comparator),B5=new Sn(Ve.comparator);function yt(...n){let e=B5;for(const t of n)e=e.add(t);return e}const H5=new Sn(xt);function z5(){return H5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_f(e)?"-0":e}}function YA(n){return{integerValue:""+n}}function F5(n,e){return x5(e)?YA(e):Z0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function q5(n,e,t){return n instanceof wf?(function(r,o){const u={fields:{[CA]:{stringValue:IA},[MA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Y0(o)&&(o=sh(o)),o&&(u.fields[RA]=o),{mapValue:u}})(t,e):n instanceof su?QA(n,e):n instanceof iu?WA(n,e):(function(r,o){const u=JA(r,o),f=KT(u)+KT(r.Ae);return d0(u)&&d0(r.Ae)?YA(f):Z0(r.serializer,f)})(n,e)}function K5(n,e,t){return n instanceof su?QA(n,e):n instanceof iu?WA(n,e):t}function JA(n,e){return n instanceof Nf?(function(s){return d0(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class wf extends ah{}class su extends ah{constructor(e){super(),this.elements=e}}function QA(n,e){const t=XA(e);for(const s of n.elements)t.some((r=>Gi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class iu extends ah{constructor(e){super(),this.elements=e}}function WA(n,e){let t=XA(e);for(const s of n.elements)t=t.filter((r=>!Gi(r,s)));return{arrayValue:{values:t}}}class Nf extends ah{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function KT(n){return on(n.integerValue||n.doubleValue)}function XA(n){return J0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function $5(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof su&&r instanceof su||s instanceof iu&&r instanceof iu?_l(s.elements,r.elements,Gi):s instanceof Nf&&r instanceof Nf?Gi(s.Ae,r.Ae):s instanceof wf&&r instanceof wf})(n.transform,e.transform)}class Y5{constructor(e,t){this.version=e,this.transformResults=t}}class Qs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qs}static exists(e){return new Qs(void 0,e)}static updateTime(e){return new Qs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class oh{}function ZA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new eg(n.key,Qs.none()):new du(n.key,n.data,Qs.none());{const t=n.data,s=cs.empty();let r=new Sn(Ln.comparator);for(let o of e.fields)if(!r.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?s.delete(o):s.set(o,u),r=r.add(o)}return new Sa(n.key,s,new As(r.toArray()),Qs.none())}}function J5(n,e,t){n instanceof du?(function(r,o,u){const f=r.value.clone(),m=YT(r.fieldTransforms,o,u.transformResults);f.setAll(m),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Sa?(function(r,o,u){if(!nf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const f=YT(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(ew(r)),m.setAll(f),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(r,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Yc(n,e,t,s){return n instanceof du?(function(o,u,f,m){if(!nf(o.precondition,u))return f;const p=o.value.clone(),v=JT(o.fieldTransforms,m,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof Sa?(function(o,u,f,m){if(!nf(o.precondition,u))return f;const p=JT(o.fieldTransforms,m,u),v=u.data;return v.setAll(ew(o)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(o,u,f){return nf(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function Q5(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),o=JA(s.transform,r||null);o!=null&&(t===null&&(t=cs.empty()),t.set(s.field,o))}return t||null}function $T(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&_l(s,r,((o,u)=>$5(o,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class du extends oh{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sa extends oh{constructor(e,t,s,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ew(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function YT(n,e,t){const s=new Map;Mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const o=n[r],u=o.transform,f=e.data.field(o.field);s.set(o.field,K5(u,f,t[r]))}return s}function JT(n,e,t){const s=new Map;for(const r of n){const o=r.transform,u=t.data.field(r.field);s.set(r.field,q5(o,u,e))}return s}class eg extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W5 extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&J5(o,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Yc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Yc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=$A();return this.mutations.forEach((r=>{const o=e.get(r.key),u=o.overlayedDocument;let f=this.applyToLocalView(u,o.mutatedFields);f=t.has(r.key)?null:f;const m=ZA(u,f);m!==null&&s.set(r.key,m),u.isValidDocument()||u.convertToNoDocument(Qe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),yt())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,((t,s)=>$T(t,s)))&&_l(this.baseMutations,e.baseMutations,((t,s)=>$T(t,s)))}}class tg{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){Mt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return G5})();const o=e.mutations;for(let u=0;u<o.length;u++)r=r.insert(o[u].key,s[u].version);return new tg(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn,bt;function tL(n){switch(n){case he.OK:return He(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return He(15467,{code:n})}}function tw(n){if(n===void 0)return vr("GRPC error has no .code"),he.UNKNOWN;switch(n){case yn.OK:return he.OK;case yn.CANCELLED:return he.CANCELLED;case yn.UNKNOWN:return he.UNKNOWN;case yn.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case yn.INTERNAL:return he.INTERNAL;case yn.UNAVAILABLE:return he.UNAVAILABLE;case yn.UNAUTHENTICATED:return he.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case yn.NOT_FOUND:return he.NOT_FOUND;case yn.ALREADY_EXISTS:return he.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return he.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case yn.ABORTED:return he.ABORTED;case yn.OUT_OF_RANGE:return he.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return he.UNIMPLEMENTED;case yn.DATA_LOSS:return he.DATA_LOSS;default:return He(39323,{code:n})}}(bt=yn||(yn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new fa([4294967295,4294967295],0);function QT(n){const e=nL().encode(n),t=new gA;return t.update(e),new Uint8Array(t.digest())}function WT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fa([t,s],0),new fa([r,o],0)]}class ng{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Hc(`Invalid padding: ${t}`);if(s<0)throw new Hc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Hc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Hc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fa.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(fa.fromNumber(s)));return r.compare(sL)===1&&(r=new fa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=QT(e),[s,r]=WT(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,r,o);if(!this.we(u))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new ng(o,r,t);return s.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=QT(e),[s,r]=WT(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,r,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,s,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lh(Qe.min(),r,new Qt(xt),br(),yt())}}class fu{constructor(e,t,s,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new fu(s,t,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class nw{constructor(e,t){this.targetId=e,this.Ce=t}}class sw{constructor(e,t,s=jn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class XT{constructor(){this.ve=0,this.Fe=ZT(),this.Me=jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=yt(),t=yt(),s=yt();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:He(38017,{changeType:o})}})),new fu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=ZT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iL{constructor(e){this.Ge=e,this.ze=new Map,this.je=br(),this.Je=Kd(),this.He=Kd(),this.Ye=new Qt(xt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(h0(o))if(s===0){const u=new Ve(o.path);this.et(t,u,zn.newNoDocument(u,Qe.min()))}else Mt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:o=0}=t;let u,f;try{u=xa(s).toUint8Array()}catch(m){if(m instanceof kA)return bl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new ng(u,r,o)}catch(m){return bl(m instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((o=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,u)=>{const f=this.ot(u);if(f){if(o.current&&h0(f.target)){const m=new Ve(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,zn.newNoDocument(m,e))}o.Be&&(t.set(u,o.ke()),o.qe())}}));let s=yt();this.He.forEach(((o,u)=>{let f=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const r=new lh(e,t,this.Ye,this.je,s);return this.je=br(),this.Je=Kd(),this.He=Kd(),this.Ye=new Qt(xt),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Sn(xt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Sn(xt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kd(){return new Qt(Ve.comparator)}function ZT(){return new Qt(Ve.comparator)}const rL={asc:"ASCENDING",desc:"DESCENDING"},aL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oL={and:"AND",or:"OR"};class lL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function p0(n,e){return n.useProto3Json||nh(e)?e:{value:e}}function kf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cL(n,e){return kf(n,e.toTimestamp())}function Ui(n){return Mt(!!n,49232),Qe.fromTimestamp((function(t){const s=ga(t);return new qt(s.seconds,s.nanos)})(n))}function sg(n,e){return g0(n,e).canonicalString()}function g0(n,e){const t=(function(r){return new Ht(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function rw(n){const e=Ht.fromString(n);return Mt(uw(e),10190,{key:e.toString()}),e}function x0(n,e){return sg(n.databaseId,e.path)}function Dp(n,e){const t=rw(e);if(t.get(1)!==n.databaseId.projectId)throw new we(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(ow(t))}function aw(n,e){return sg(n.databaseId,e)}function uL(n){const e=rw(n);return e.length===4?Ht.emptyPath():ow(e)}function y0(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ow(n){return Mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function eE(n,e,t){return{name:x0(n,e),fields:t.value.mapValue.fields}}function dL(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:He(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(p,v){return p.useProto3Json?(Mt(v===void 0||typeof v=="string",58123),jn.fromBase64String(v||"")):(Mt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),jn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(p){const v=p.code===void 0?he.UNKNOWN:tw(p.code);return new we(v,p.message||"")})(u);t=new sw(s,r,o,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Dp(n,s.document.name),o=Ui(s.document.updateTime),u=s.document.createTime?Ui(s.document.createTime):Qe.min(),f=new cs({mapValue:{fields:s.document.fields}}),m=zn.newFoundDocument(r,o,u,f),p=s.targetIds||[],v=s.removedTargetIds||[];t=new sf(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Dp(n,s.document),o=s.readTime?Ui(s.readTime):Qe.min(),u=zn.newNoDocument(r,o),f=s.removedTargetIds||[];t=new sf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Dp(n,s.document),o=s.removedTargetIds||[];t=new sf([],o,r,null)}else{if(!("filter"in e))return He(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:o}=s,u=new eL(r,o),f=s.targetId;t=new nw(f,u)}}return t}function fL(n,e){let t;if(e instanceof du)t={update:eE(n,e.key,e.value)};else if(e instanceof eg)t={delete:x0(n,e.key)};else if(e instanceof Sa)t={update:eE(n,e.key,e.data),updateMask:_L(e.fieldMask)};else{if(!(e instanceof W5))return He(16599,{Vt:e.type});t={verify:x0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,u){const f=u.transform;if(f instanceof wf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof su)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof iu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Nf)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw He(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:cL(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:He(27497)})(n,e.precondition)),t}function hL(n,e){return n&&n.length>0?(Mt(e!==void 0,14353),n.map((t=>(function(r,o){let u=r.updateTime?Ui(r.updateTime):Ui(o);return u.isEqual(Qe.min())&&(u=Ui(o)),new Y5(u,r.transformResults||[])})(t,e)))):[]}function mL(n,e){return{documents:[aw(n,e.path)]}}function pL(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=aw(n,r);const o=(function(p){if(p.length!==0)return cw(pi.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const u=(function(p){if(p.length!==0)return p.map((v=>(function(T){return{field:ll(T.field),direction:yL(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=p0(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function gL(n){let e=uL(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){Mt(s===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=(function(_){const T=lw(_);return T instanceof pi&&VA(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(k){return new nu(cl(k.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let T;return T=typeof _=="object"?_.value:_,nh(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(_){const T=!!_.before,A=_.values||[];return new Sf(A,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const T=!_.before,A=_.values||[];return new Sf(A,T)})(t.endAt)),L5(e,r,u,o,f,"F",m,p)}function xL(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=cl(t.unaryFilter.field);return vn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=cl(t.unaryFilter.field);return vn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=cl(t.unaryFilter.field);return vn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=cl(t.unaryFilter.field);return vn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vn.create(cl(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pi.create(t.compositeFilter.filters.map((s=>lw(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(t.compositeFilter.op))})(n):He(30097,{filter:n})}function yL(n){return rL[n]}function vL(n){return aL[n]}function bL(n){return oL[n]}function ll(n){return{fieldPath:n.canonicalString()}}function cl(n){return Ln.fromServerFormat(n.fieldPath)}function cw(n){return n instanceof vn?(function(t){if(t.op==="=="){if(BT(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NAN"}};if(GT(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BT(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NAN"}};if(GT(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(t.field),op:vL(t.op),value:t.value}}})(n):n instanceof pi?(function(t){const s=t.getFilters().map((r=>cw(r)));return s.length===1?s[0]:{compositeFilter:{op:bL(t.op),filters:s}}})(n):He(54877,{filter:n})}function _L(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function uw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,s,r,o=Qe.min(),u=Qe.min(),f=jn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new la(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new la(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.yt=e}}function EL(n){const e=gL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.Cn=new AL}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(pa.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(pa.min())}updateCollectionGroup(e,t,s){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class AL{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Sn(Ht.comparator),o=!r.has(s);return this.index[t]=r.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Sn(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dw=41943040;class ls{static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(dw,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Sl(0)}static cr(){return new Sl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="LruGarbageCollector",wL=1048576;function sE([n,e],[t,s]){const r=xt(n,t);return r===0?xt(e,s):r}class NL{constructor(e){this.Ir=e,this.buffer=new Sn(sE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();sE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kL{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(nE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ul(t)?Re(nE,"Ignoring IndexedDB error during garbage collection: ",t):await Ll(t)}await this.Vr(3e5)}))}}class IL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(th.ce);const s=new NL(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(tE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,o,u,f,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,u=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(s=_,f=Date.now(),this.removeTargets(e,s,t)))).next((_=>(o=_,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(p=Date.now(),al()<=gt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${o} targets in `+(m-f)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function CL(n,e){return new IL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.changes=new mo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?pe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Yc(s.mutation,r,As.empty(),qt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,yt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=yt()){const r=no();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((o=>{let u=Bc();return o.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=no();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,yt())))}populateOverlays(e,t,s){const r=[];return s.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,s,r){let o=br();const u=$c(),f=(function(){return $c()})();return t.forEach(((m,p)=>{const v=s.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof Sa)?o=o.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),Yc(v.mutation,p,v.mutation.getFieldMask(),qt.now())):u.set(p.key,As.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>f.set(p,new ML(v,u.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=$c();let r=new Qt(((u,f)=>u-f)),o=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=s.get(m)||As.empty();v=f.applyToLocalView(p,v),s.set(m,v);const _=(r.get(f.batchId)||yt()).add(m);r=r.insert(f.batchId,_)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,v=m.value,_=$A();v.forEach((T=>{if(!o.has(T)){const A=ZA(t.get(T),s.get(T));A!==null&&_.set(T,A),o=o.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,_))}return pe.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(u){return Ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((o=>{const u=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-o.size):pe.resolve(no());let f=Xc,m=o;return u.next((p=>pe.forEach(p,((v,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),o.get(v)?pe.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{m=m.insert(v,T)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,m,p,yt()))).next((v=>({batchId:f,changes:KA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((s=>{let r=Bc();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const o=t.collectionGroup;let u=Bc();return this.indexManager.getCollectionParents(e,o).next((f=>pe.forEach(f,(m=>{const p=(function(_,T){return new jl(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((v=>{v.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,r)))).next((u=>{o.forEach(((m,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,zn.newInvalidDocument(v)))}));let f=Bc();return u.forEach(((m,p)=>{const v=o.get(m);v!==void 0&&Yc(v.mutation,p,As.empty(),qt.now()),rh(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Ui(r.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:EL(r.bundledQuery),readTime:Ui(r.readTime)}})(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.overlays=new Qt(Ve.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=no();return pe.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&s.set(r,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,o)=>{this.St(e,t,o)})),pe.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),pe.resolve()}getOverlaysForCollection(e,t,s){const r=no(),o=t.length+1,u=new Ve(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&m.largestBatchId>s&&r.set(m.getKey(),m)}return pe.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let o=new Qt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=o.get(p.largestBatchId);v===null&&(v=no(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const f=no(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>f.set(p,v))),!(f.size()>=r)););return pe.resolve(f)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new Z5(t,s));let o=this.qr.get(t);o===void 0&&(o=yt(),this.qr.set(t,o)),this.qr.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.Qr=new Sn(Nn.$r),this.Ur=new Sn(Nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Nn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Nn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ve(new Ht([])),s=new Nn(t,e),r=new Nn(t,e+1),o=[];return this.Ur.forEachInRange([s,r],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ve(new Ht([])),s=new Nn(t,e),r=new Nn(t,e+1);let o=yt();return this.Ur.forEachInRange([s,r],(u=>{o=o.add(u.key)})),o}containsKey(e){const t=new Nn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ve.comparator(e.key,t.key)||xt(e.Yr,t.Yr)}static Kr(e,t){return xt(e.Yr,t.Yr)||Ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Sn(Nn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new X5(o,t,s,r);this.mutationQueue.push(u);for(const f of r)this.Zr=this.Zr.add(new Nn(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return pe.resolve(u)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),o=r<0?0:r;return pe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?$0:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Nn(t,0),r=new Nn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,r],(u=>{const f=this.Xr(u.Yr);o.push(f)})),pe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Sn(xt);return t.forEach((r=>{const o=new Nn(r,0),u=new Nn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(f=>{s=s.add(f.Yr)}))})),pe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let o=s;Ve.isDocumentKey(o)||(o=o.child(""));const u=new Nn(new Ve(o),0);let f=new Sn(xt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(f=f.add(m.Yr)),!0)}),u),pe.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return pe.forEach(t.mutations,(r=>{const o=new Nn(r.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Nn(t,0),r=this.Zr.firstAfterOrEqual(s);return pe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.ri=e,this.docs=(function(){return new Qt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),o=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return pe.resolve(s?s.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let s=br();return t.forEach((r=>{const o=this.docs.get(r);s=s.insert(r,o?o.document.mutableCopy():zn.newInvalidDocument(r))})),pe.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let o=br();const u=t.path,f=new Ve(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||h5(f5(v),s)<=0||(r.has(v.key)||rh(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return pe.resolve(o)}getAllFromCollectionGroup(e,t,s,r){He(9500)}ii(e,t){return pe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new OL(this)}getSize(e){return pe.resolve(this.size)}}class OL extends RL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.persistence=e,this.si=new mo((t=>Q0(t)),W0),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.oi=0,this._i=new ig,this.targetCount=0,this.ai=Sl.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Sl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,s){let r=0;const o=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),pe.waitFor(o).next((()=>r))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return pe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),pe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((u=>{o.push(r.markPotentiallyOrphaned(e,u))})),pe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return pe.resolve(s)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t){this.ui={},this.overlays={},this.ci=new th(0),this.li=!1,this.li=!0,this.hi=new UL,this.referenceDelegate=e(this),this.Pi=new GL(this),this.indexManager=new SL,this.remoteDocumentCache=(function(r){return new VL(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new TL(t),this.Ii=new PL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new jL(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Re("MemoryPersistence","Starting transaction:",e);const r=new BL(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return pe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class BL extends p5{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ig,this.Vi=null}static mi(e){return new rg(e)}get fi(){if(this.Vi)return this.Vi;throw He(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),pe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(s=>{const r=Ve.fromPath(s);return this.gi(e,r).next((o=>{o||t.removeEntry(r,Qe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class If{constructor(e,t){this.persistence=e,this.pi=new mo((s=>y5(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=CL(this,t)}static mi(e,t){return new If(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return pe.forEach(this.pi,((s,r)=>this.br(e,s,r).next((o=>o?pe.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((f=>{f||(s++,o.removeEntry(u,Qe.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ef(e.data.value)),t}br(e,t,s){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return pe.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=yt(),r=yt();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new ag(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return DP()?8:g5(Kn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const o={result:null};return this.ys(e,t).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,t,r,s).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new HL;return this.Ss(e,t,u).next((f=>{if(o.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>o.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(al()<=gt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(al()<=gt.DEBUG&&Re("QueryEngine","Query:",ol(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(al()<=gt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(t))):pe.resolve())}ys(e,t){if(qT(t))return pe.resolve(null);let s=Li(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Af(t,null,"F"),s=Li(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const u=yt(...o);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,s).next((m=>{const p=this.Ds(t,f);return this.Cs(t,p,u,m.readTime)?this.ys(e,Af(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,s,r){return qT(t)||r.isEqual(Qe.min())?pe.resolve(null):this.ps.getDocuments(e,s).next((o=>{const u=this.Ds(t,o);return this.Cs(t,u,s,r)?pe.resolve(null):(al()<=gt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ol(t)),this.vs(e,u,t,d5(r,Xc)).next((f=>f)))}))}Ds(e,t){let s=new Sn(FA(e));return t.forEach(((r,o)=>{rh(e,o)&&(s=s.add(o))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,s){return al()<=gt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",ol(t)),this.ps.getDocumentsMatchingQuery(e,t,pa.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((o=>(t.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="LocalStore",FL=3e8;class qL{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Qt(xt),this.xs=new mo((o=>Q0(o)),W0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KL(n,e,t,s){return new qL(n,e,t,s)}async function hw(n,e){const t=tt(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const u=[],f=[];let m=yt();for(const p of r){u.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of o){f.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(s,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:f})))}))}))}function $L(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,v){const _=p.batch,T=_.keys();let A=pe.resolve();return T.forEach((k=>{A=A.next((()=>v.getEntry(m,k))).next((M=>{const C=p.docVersions.get(k);Mt(C!==null,48541),M.version.compareTo(C)<0&&(_.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),v.addEntry(M)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(m,_)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let m=yt();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function mw(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function YL(n,e){const t=tt(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((v,_)=>{const T=r.get(_);if(!T)return;f.push(t.Pi.removeMatchingKeys(o,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,v.addedDocuments,_))));let A=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(jn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,s)),r=r.insert(_,A),(function(M,C,V){return M.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=FL?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(T,A,v)&&f.push(t.Pi.updateTargetData(o,A))}));let m=br(),p=yt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))})),f.push(JL(o,u,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!s.isEqual(Qe.min())){const v=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));f.push(v)}return pe.waitFor(f).next((()=>u.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,m,p))).next((()=>m))})).then((o=>(t.Ms=r,o)))}function JL(n,e,t){let s=yt(),r=yt();return t.forEach((o=>s=s.add(o))),e.getEntries(n,s).next((o=>{let u=br();return t.forEach(((f,m)=>{const p=o.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(f)),m.isNoDocument()&&m.version.isEqual(Qe.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):Re(og,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:r}}))}function QL(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=$0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function WL(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((o=>o?(r=o,pe.resolve(r)):t.Pi.allocateTargetId(s).next((u=>(r=new la(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function v0(n,e,t){const s=tt(n),r=s.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(u=>s.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Ul(u))throw u;Re(og,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function iE(n,e,t){const s=tt(n);let r=Qe.min(),o=yt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,v){const _=tt(m),T=_.xs.get(v);return T!==void 0?pe.resolve(_.Ms.get(T)):_.Pi.getTargetData(p,v)})(s,u,Li(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{o=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?r:Qe.min(),t?o:yt()))).next((f=>(XL(s,j5(e),f),{documents:f,Qs:o})))))}function XL(n,e,t){let s=n.Os.get(e)||Qe.min();t.forEach(((r,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),n.Os.set(e,s)}class rE{constructor(){this.activeTargetIds=z5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZL{constructor(){this.Mo=new rE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="ConnectivityMonitor";class oE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(aE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(aE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function b0(){return $d===null?$d=(function(){return 268435456+Math.round(2147483648*Math.random())})():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="RestConnection",t3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Tf?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,o){const u=b0(),f=this.zo(e,t.toUriEncodedString());Re(Pp,`Sending RPC '${e}' ${u}:`,f,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,r,o);const{host:p}=new URL(f),v=Ml(p);return this.Jo(e,f,m,s,v).then((_=>(Re(Pp,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw bl(Pp,`RPC '${e}' ${u} failed with error: `,_,"url: ",f,"request:",s),_}))}Ho(e,t,s,r,o,u){return this.Go(e,t,s,r,o)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),s&&s.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const s=t3[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class i3 extends n3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,o){const u=b0();return new Promise(((f,m)=>{const p=new xA;p.setWithCredentials(!0),p.listenOnce(yA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Zd.NO_ERROR:const _=p.getResponseJson();Re(Bn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),f(_);break;case Zd.TIMEOUT:Re(Bn,`RPC '${e}' ${u} timed out`),m(new we(he.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const T=p.getStatus();if(Re(Bn,`RPC '${e}' ${u} failed with status:`,T,"response text:",p.getResponseText()),T>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const k=A==null?void 0:A.error;if(k&&k.status&&k.message){const M=(function(V){const N=V.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(N)>=0?N:he.UNKNOWN})(k.status);m(new we(M,k.message))}else m(new we(he.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new we(he.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Re(Bn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(r);Re(Bn,`RPC '${e}' ${u} sending request:`,r),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const r=b0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=_A(),f=bA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const v=o.join("");Re(Bn,`Creating RPC '${e}' stream ${r}: ${v}`,m);const _=u.createWebChannel(v,m);this.I_(_);let T=!1,A=!1;const k=new s3({Yo:C=>{A?Re(Bn,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(T||(Re(Bn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),Re(Bn,`RPC '${e}' stream ${r} sending:`,C),_.send(C))},Zo:()=>_.close()}),M=(C,V,N)=>{C.listen(V,(G=>{try{N(G)}catch($){setTimeout((()=>{throw $}),0)}}))};return M(_,Gc.EventType.OPEN,(()=>{A||(Re(Bn,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),M(_,Gc.EventType.CLOSE,(()=>{A||(A=!0,Re(Bn,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(_))})),M(_,Gc.EventType.ERROR,(C=>{A||(A=!0,bl(Bn,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),k.a_(new we(he.UNAVAILABLE,"The operation could not be completed")))})),M(_,Gc.EventType.MESSAGE,(C=>{var V;if(!A){const N=C.data[0];Mt(!!N,16349);const G=N,$=(G==null?void 0:G.error)||((V=G[0])==null?void 0:V.error);if($){Re(Bn,`RPC '${e}' stream ${r} received error:`,$);const se=$.status;let Y=(function(R){const O=yn[R];if(O!==void 0)return tw(O)})(se),D=$.message;Y===void 0&&(Y=he.INTERNAL,D="Unknown error status: "+se+" with message "+$.message),A=!0,k.a_(new we(Y,D)),_.close()}else Re(Bn,`RPC '${e}' stream ${r} received:`,N),k.u_(N)}})),M(f,vA.STAT_EVENT,(C=>{C.stat===l0.PROXY?Re(Bn,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===l0.NOPROXY&&Re(Bn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){return new lL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t,s=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&Re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="PersistentStream";class gw{constructor(e,t,s,r,o,u,f,m){this.Mi=e,this.S_=s,this.b_=r,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new we(he.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(lE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Re(lE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class r3 extends gw{constructor(e,t,s,r,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,u),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dL(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Qe.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Qe.min():u.readTime?Ui(u.readTime):Qe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=y0(this.serializer),t.addTarget=(function(o,u){let f;const m=u.target;if(f=h0(m)?{documents:mL(o,m)}:{query:pL(o,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=iw(o,u.resumeToken);const p=p0(o,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(Qe.min())>0){f.readTime=kf(o,u.snapshotVersion.toTimestamp());const p=p0(o,u.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const s=xL(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=y0(this.serializer),t.removeTarget=e,this.q_(t)}}class a3 extends gw{constructor(e,t,s,r,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=hL(e.writeResults,e.commitTime),s=Ui(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=y0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>fL(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{}class l3 extends o3{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new we(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,g0(t,s),r,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(he.UNKNOWN,o.toString())}))}Ho(e,t,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,g0(t,s),r,u,f,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(he.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class c3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="RemoteStore";class u3{constructor(e,t,s,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{po(this)&&(Re(co,"Restarting streams for network reachability change."),await(async function(m){const p=tt(m);p.Ea.add(4),await hu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await uh(p)})(this))}))})),this.Ra=new c3(s,r)}}async function uh(n){if(po(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function xw(n,e){const t=tt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dg(t)?ug(t):Vl(t).O_()&&cg(t,e))}function lg(n,e){const t=tt(n),s=Vl(t);t.Ia.delete(e),s.O_()&&yw(t,e),t.Ia.size===0&&(s.O_()?s.L_():po(t)&&t.Ra.set("Unknown"))}function cg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(n).Y_(e)}function yw(n,e){n.Va.Ue(e),Vl(n).Z_(e)}function ug(n){n.Va=new iL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vl(n).start(),n.Ra.ua()}function dg(n){return po(n)&&!Vl(n).x_()&&n.Ia.size>0}function po(n){return tt(n).Ea.size===0}function vw(n){n.Va=void 0}async function d3(n){n.Ra.set("Online")}async function f3(n){n.Ia.forEach(((e,t)=>{cg(n,e)}))}async function h3(n,e){vw(n),dg(n)?(n.Ra.ha(e),ug(n)):n.Ra.set("Unknown")}async function m3(n,e,t){if(n.Ra.set("Online"),e instanceof sw&&e.state===2&&e.cause)try{await(async function(r,o){const u=o.cause;for(const f of o.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(s){Re(co,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Cf(n,s)}else if(e instanceof sf?n.Va.Ze(e):e instanceof nw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Qe.min()))try{const s=await mw(n.localStore);t.compareTo(s)>=0&&await(function(o,u){const f=o.Va.Tt(u);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=o.Ia.get(p);v&&o.Ia.set(p,v.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,p)=>{const v=o.Ia.get(m);if(!v)return;o.Ia.set(m,v.withResumeToken(jn.EMPTY_BYTE_STRING,v.snapshotVersion)),yw(o,m);const _=new la(v.target,m,p,v.sequenceNumber);cg(o,_)})),o.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){Re(co,"Failed to raise snapshot:",s),await Cf(n,s)}}async function Cf(n,e,t){if(!Ul(e))throw e;n.Ea.add(1),await hu(n),n.Ra.set("Offline"),t||(t=()=>mw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Re(co,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await uh(n)}))}function bw(n,e){return e().catch((t=>Cf(n,t,e)))}async function dh(n){const e=tt(n),t=va(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$0;for(;p3(e);)try{const r=await QL(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,g3(e,r)}catch(r){await Cf(e,r)}_w(e)&&Tw(e)}function p3(n){return po(n)&&n.Ta.length<10}function g3(n,e){n.Ta.push(e);const t=va(n);t.O_()&&t.X_&&t.ea(e.mutations)}function _w(n){return po(n)&&!va(n).x_()&&n.Ta.length>0}function Tw(n){va(n).start()}async function x3(n){va(n).ra()}async function y3(n){const e=va(n);for(const t of n.Ta)e.ea(t.mutations)}async function v3(n,e,t){const s=n.Ta.shift(),r=tg.from(s,e,t);await bw(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await dh(n)}async function b3(n,e){e&&va(n).X_&&await(async function(s,r){if((function(u){return tL(u)&&u!==he.ABORTED})(r.code)){const o=s.Ta.shift();va(s).B_(),await bw(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,r))),await dh(s)}})(n,e),_w(n)&&Tw(n)}async function cE(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),Re(co,"RemoteStore received new credentials");const s=po(t);t.Ea.add(3),await hu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uh(t)}async function _3(n,e){const t=tt(n);e?(t.Ea.delete(2),await uh(t)):e||(t.Ea.add(2),await hu(t),t.Ra.set("Unknown"))}function Vl(n){return n.ma||(n.ma=(function(t,s,r){const o=tt(t);return o.sa(),new r3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:d3.bind(null,n),t_:f3.bind(null,n),r_:h3.bind(null,n),H_:m3.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),dg(n)?ug(n):n.Ra.set("Unknown")):(await n.ma.stop(),vw(n))}))),n.ma}function va(n){return n.fa||(n.fa=(function(t,s,r){const o=tt(t);return o.sa(),new a3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:x3.bind(null,n),r_:b3.bind(null,n),ta:y3.bind(null,n),na:v3.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await dh(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(co,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,s,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=o,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,o){const u=Date.now()+s,f=new fg(e,t,u,r,o);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(n,e){if(vr("AsyncQueue",`${e}: ${n}`),Ul(n))return new we(he.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ve.comparator(t.key,s.key):(t,s)=>Ve.comparator(t.key,s.key),this.keyedMap=Bc(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ml;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.ga=new Qt(Ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):He(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Al{constructor(e,t,s,r,o,u,f,m,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,o){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Al(e,t,ml.emptySet(t),u,s,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class E3{constructor(){this.queries=dE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=tt(t),o=r.queries;r.queries=dE(),o.forEach(((u,f)=>{for(const m of f.Sa)m.onError(s)}))})(this,new we(he.ABORTED,"Firestore shutting down"))}}function dE(){return new mo((n=>zA(n)),ih)}async function Ew(n,e){const t=tt(n);let s=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(s=2):(o=new T3,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=hg(u,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&mg(t)}async function Sw(n,e){const t=tt(n),s=e.query;let r=3;const o=t.queries.get(s);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function S3(n,e){const t=tt(n);let s=!1;for(const r of e){const o=r.query,u=t.queries.get(o);if(u){for(const f of u.Sa)f.Fa(r)&&(s=!0);u.wa=r}}s&&mg(t)}function A3(n,e,t){const s=tt(n),r=s.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);s.queries.delete(e)}function mg(n){n.Ca.forEach((e=>{e.next()}))}var _0,fE;(fE=_0||(_0={})).Ma="default",fE.Cache="cache";class Aw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Al(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.key=e}}class Nw{constructor(e){this.key=e}}class w3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=yt(),this.mutatedKeys=yt(),this.eu=FA(e),this.tu=new ml(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new uE,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,_)=>{const T=r.get(v),A=rh(this.query,_)?_:null,k=!!T&&this.mutatedKeys.has(T.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let C=!1;T&&A?T.data.isEqual(A.data)?k!==M&&(s.track({type:3,doc:A}),C=!0):this.su(T,A)||(s.track({type:2,doc:A}),C=!0,(m&&this.eu(A,m)>0||p&&this.eu(A,p)<0)&&(f=!0)):!T&&A?(s.track({type:0,doc:A}),C=!0):T&&!A&&(s.track({type:1,doc:T}),C=!0,(m||p)&&(f=!0)),C&&(A?(u=u.add(A),o=M?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:f,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(A,k){const M=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Rt:C})}};return M(A)-M(k)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),r=r??!1;const f=t&&!r?this._u():[],m=this.Xa.size===0&&this.current&&!r?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new Al(this.query,e.tu,o,u,e.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=yt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Nw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new ww(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=yt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pg="SyncEngine";class N3{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class k3{constructor(e){this.key=e,this.hu=!1}}class I3{constructor(e,t,s,r,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new mo((f=>zA(f)),ih),this.Iu=new Map,this.Eu=new Set,this.du=new Qt(Ve.comparator),this.Au=new Map,this.Ru=new ig,this.Vu={},this.mu=new Map,this.fu=Sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C3(n,e,t=!0){const s=Dw(n);let r;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await kw(s,e,t,!0),r}async function R3(n,e){const t=Dw(n);await kw(t,e,!0,!1)}async function kw(n,e,t,s){const r=await WL(n.localStore,Li(e)),o=r.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let f;return s&&(f=await M3(n,e,o,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&xw(n.remoteStore,r),f}async function M3(n,e,t,s,r){n.pu=(_,T,A)=>(async function(M,C,V,N){let G=C.view.ru(V);G.Cs&&(G=await iE(M.localStore,C.query,!1).then((({documents:D})=>C.view.ru(D,G))));const $=N&&N.targetChanges.get(C.targetId),se=N&&N.targetMismatches.get(C.targetId)!=null,Y=C.view.applyChanges(G,M.isPrimaryClient,$,se);return mE(M,C.targetId,Y.au),Y.snapshot})(n,_,T,A);const o=await iE(n.localStore,e,!0),u=new w3(e,o.Qs),f=u.ru(o.documents),m=fu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=u.applyChanges(f,n.isPrimaryClient,m);mE(n,t,p.au);const v=new N3(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function D3(n,e,t){const s=tt(n),r=s.Tu.get(e),o=s.Iu.get(r.targetId);if(o.length>1)return s.Iu.set(r.targetId,o.filter((u=>!ih(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await v0(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&lg(s.remoteStore,r.targetId),T0(s,r.targetId)})).catch(Ll)):(T0(s,r.targetId),await v0(s.localStore,r.targetId,!0))}async function P3(n,e){const t=tt(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),lg(t.remoteStore,s.targetId))}async function L3(n,e,t){const s=H3(n);try{const r=await(function(u,f){const m=tt(u),p=qt.now(),v=f.reduce(((A,k)=>A.add(k.key)),yt());let _,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let k=br(),M=yt();return m.Ns.getEntries(A,v).next((C=>{k=C,k.forEach(((V,N)=>{N.isValidDocument()||(M=M.add(V))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,k))).next((C=>{_=C;const V=[];for(const N of f){const G=Q5(N,_.get(N.key).overlayedDocument);G!=null&&V.push(new Sa(N.key,G,LA(G.value.mapValue),Qs.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,V,f)})).next((C=>{T=C;const V=C.applyToLocalDocumentSet(_,M);return m.documentOverlayCache.saveOverlays(A,C.batchId,V)}))})).then((()=>({batchId:T.batchId,changes:KA(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(u,f,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new Qt(xt)),p=p.insert(f,m),u.Vu[u.currentUser.toKey()]=p})(s,r.batchId,t),await mu(s,r.changes),await dh(s.remoteStore)}catch(r){const o=hg(r,"Failed to persist write");t.reject(o)}}async function Iw(n,e){const t=tt(n);try{const s=await YL(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const u=t.Au.get(o);u&&(Mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?Mt(u.hu,14607):r.removedDocuments.size>0&&(Mt(u.hu,42227),u.hu=!1))})),await mu(t,s,e)}catch(s){await Ll(s)}}function hE(n,e,t){const s=tt(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((o,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const m=tt(u);m.onlineState=f;let p=!1;m.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(f)&&(p=!0)})),p&&mg(m)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function U3(n,e,t){const s=tt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),o=r&&r.key;if(o){let u=new Qt(Ve.comparator);u=u.insert(o,zn.newNoDocument(o,Qe.min()));const f=yt().add(o),m=new lh(Qe.min(),new Map,new Qt(xt),u,f);await Iw(s,m),s.du=s.du.remove(o),s.Au.delete(e),gg(s)}else await v0(s.localStore,e,!1).then((()=>T0(s,e,t))).catch(Ll)}async function j3(n,e){const t=tt(n),s=e.batch.batchId;try{const r=await $L(t.localStore,e);Rw(t,s,null),Cw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await mu(t,r)}catch(r){await Ll(r)}}async function V3(n,e,t){const s=tt(n);try{const r=await(function(u,f){const m=tt(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,f).next((_=>(Mt(_!==null,37113),v=_.keys(),m.mutationQueue.removeMutationBatch(p,_)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);Rw(s,e,t),Cw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await mu(s,r)}catch(r){await Ll(r)}}function Cw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Rw(n,e,t){const s=tt(n);let r=s.Vu[s.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function T0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Mw(n,s)}))}function Mw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(lg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),gg(n))}function mE(n,e,t){for(const s of t)s instanceof ww?(n.Ru.addReference(s.key,e),O3(n,s)):s instanceof Nw?(Re(pg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Mw(n,s.key)):He(19791,{wu:s})}function O3(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Re(pg,"New document in limbo: "+t),n.Eu.add(s),gg(n))}function gg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ve(Ht.fromString(e)),s=n.fu.next();n.Au.set(s,new k3(t)),n.du=n.du.insert(t,s),xw(n.remoteStore,new la(Li(X0(t.path)),s,"TargetPurposeLimboResolution",th.ce))}}async function mu(n,e,t){const s=tt(n),r=[],o=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,m)=>{u.push(s.pu(m,e,t).then((p=>{var v;if((p||t)&&s.isPrimaryClient){const _=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(p){r.push(p);const _=ag.As(m.targetId,p);o.push(_)}})))})),await Promise.all(u),s.Pu.H_(r),await(async function(m,p){const v=tt(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>pe.forEach(p,(T=>pe.forEach(T.Es,(A=>v.persistence.referenceDelegate.addReference(_,T.targetId,A))).next((()=>pe.forEach(T.ds,(A=>v.persistence.referenceDelegate.removeReference(_,T.targetId,A)))))))))}catch(_){if(!Ul(_))throw _;Re(og,"Failed to update sequence numbers: "+_)}for(const _ of p){const T=_.targetId;if(!_.fromCache){const A=v.Ms.get(T),k=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(T,M)}}})(s.localStore,o))}async function G3(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){Re(pg,"User change. New user:",e.toKey());const s=await hw(t.localStore,e);t.currentUser=e,(function(o,u){o.mu.forEach((f=>{f.forEach((m=>{m.reject(new we(he.CANCELLED,u))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await mu(t,s.Ls)}}function B3(n,e){const t=tt(n),s=t.Au.get(e);if(s&&s.hu)return yt().add(s.key);{let r=yt();const o=t.Iu.get(e);if(!o)return r;for(const u of o){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function Dw(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U3.bind(null,e),e.Pu.H_=S3.bind(null,e.eventManager),e.Pu.yu=A3.bind(null,e.eventManager),e}function H3(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V3.bind(null,e),e}class Rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KL(this.persistence,new zL,e.initialUser,this.serializer)}Cu(e){return new fw(rg.mi,this.serializer)}Du(e){return new ZL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rf.provider={build:()=>new Rf};class z3 extends Rf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Mt(this.persistence.referenceDelegate instanceof If,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new kL(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new fw((s=>If.mi(s,t)),this.serializer)}}class E0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>hE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=G3.bind(null,this.syncEngine),await _3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new E3})()}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=(function(o){return new i3(o)})(e.databaseInfo);return(function(o,u,f,m){return new l3(o,u,f,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,o,u,f){return new u3(s,r,o,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>hE(this.syncEngine,t,0)),(function(){return oE.v()?new oE:new e3})())}createSyncEngine(e,t){return(function(r,o,u,f,m,p,v){const _=new I3(r,o,u,f,m,p);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=tt(r);Re(co,"RemoteStore shutting down."),o.Ea.add(5),await hu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}E0.provider={build:()=>new E0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="FirestoreClient";class F3{constructor(e,t,s,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=Hn.UNAUTHENTICATED,this.clientId=K0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async u=>{Re(ba,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Re(ba,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=hg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Up(n,e){n.asyncQueue.verifyOperationInProgress(),Re(ba,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await hw(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function pE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await q3(n);Re(ba,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>cE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>cE(e.remoteStore,r))),n._onlineComponents=e}async function q3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(ba,"Using user provided OfflineComponentProvider");try{await Up(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===he.FAILED_PRECONDITION||r.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;bl("Error using user provided cache. Falling back to memory cache: "+t),await Up(n,new Rf)}}else Re(ba,"Using default OfflineComponentProvider"),await Up(n,new z3(void 0));return n._offlineComponents}async function Lw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(ba,"Using user provided OnlineComponentProvider"),await pE(n,n._uninitializedComponentsProvider._online)):(Re(ba,"Using default OnlineComponentProvider"),await pE(n,new E0))),n._onlineComponents}function K3(n){return Lw(n).then((e=>e.syncEngine))}async function Uw(n){const e=await Lw(n),t=e.eventManager;return t.onListen=C3.bind(null,e.syncEngine),t.onUnlisten=D3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=R3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=P3.bind(null,e.syncEngine),t}function $3(n,e,t={}){const s=new pr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,f,m,p){const v=new Pw({next:T=>{v.Nu(),u.enqueueAndForget((()=>Sw(o,_)));const A=T.docs.has(f);!A&&T.fromCache?p.reject(new we(he.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&m&&m.source==="server"?p.reject(new we(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new Aw(X0(f.path),v,{includeMetadataChanges:!0,qa:!0});return Ew(o,_)})(await Uw(n),n.asyncQueue,e,t,s))),s.promise}function Y3(n,e,t={}){const s=new pr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,f,m,p){const v=new Pw({next:T=>{v.Nu(),u.enqueueAndForget((()=>Sw(o,_))),T.fromCache&&m.source==="server"?p.reject(new we(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new Aw(f,v,{includeMetadataChanges:!0,qa:!0});return Ew(o,_)})(await Uw(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="firestore.googleapis.com",xE=!0;class yE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vw,this.ssl=xE}else this.host=e.host,this.ssl=e.ssl??xE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wL)throw new we(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fh{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Z6;switch(s.type){case"firstParty":return new s5(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new we(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=gE.get(t);s&&(Re("ComponentProvider","Removing Datastore"),gE.delete(t),s.terminate())})(this),Promise.resolve()}}function J3(n,e,t,s={}){var p;n=mi(n,fh);const r=Ml(e),o=n._getSettings(),u={...o,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(lA(`https://${f}`),cA("Firestore",!0)),o.host!==Vw&&o.host!==f&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:f,ssl:r,emulatorOptions:s};if(!ao(m,u)&&(n._setSettings(m),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Hn.MOCK_USER;else{v=SP(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new we(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Hn(T)}n._authCredentials=new e5(new EA(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Aa(this.firestore,e,this._query)}}class cn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}toJSON(){return{type:cn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(uu(t,cn._jsonSchema))return new cn(e,s||null,new Ve(Ht.fromString(t.referencePath)))}}cn._jsonSchemaVersion="firestore/documentReference/1.0",cn._jsonSchema={type:bn("string",cn._jsonSchemaVersion),referencePath:bn("string")};class ha extends Aa{constructor(e,t,s){super(e,t,X0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Ve(e))}withConverter(e){return new ha(this.firestore,e,this._path)}}function go(n,e,...t){if(n=Un(n),SA("collection","path",e),n instanceof fh){const s=Ht.fromString(e,...t);return RT(s),new ha(n,null,s)}{if(!(n instanceof cn||n instanceof ha))throw new we(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ht.fromString(e,...t));return RT(s),new ha(n.firestore,null,s)}}function xi(n,e,...t){if(n=Un(n),arguments.length===1&&(e=K0.newId()),SA("doc","path",e),n instanceof fh){const s=Ht.fromString(e,...t);return CT(s),new cn(n,null,new Ve(s))}{if(!(n instanceof cn||n instanceof ha))throw new we(he.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ht.fromString(e,...t));return CT(s),new cn(n.firestore,n instanceof ha?n.converter:null,new Ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="AsyncQueue";class bE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pw(this,"async_queue_retry"),this._c=()=>{const s=Lp();s&&Re(vE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ul(e))throw e;Re(vE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",_E(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=fg.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&He(47125,{Pc:_E(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _E(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class xo extends fh{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new bE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bE(e),this._firestoreClient=void 0,await e}}}function Q3(n,e){const t=typeof n=="object"?n:hA(),s=typeof n=="string"?n:Tf,r=F0(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const o=TP("firestore");o&&J3(r,...o)}return r}function xg(n){if(n._terminated)throw new we(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||W3(n),n._firestoreClient}function W3(n){var s,r,o;const e=n._freezeSettings(),t=(function(f,m,p,v){return new _5(f,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,jw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new F3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ys(jn.fromBase64String(e))}catch(t){throw new we(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ys(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ys._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uu(e,Ys._jsonSchema))return Ys.fromBase64String(e.bytes)}}Ys._jsonSchemaVersion="firestore/bytes/1.0",Ys._jsonSchema={type:bn("string",Ys._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(uu(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:bn("string",ji._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uu(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new we(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:bn("string",Vi._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=/^__.*__$/;class Z3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class Ow{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ac:n})}}class vg{constructor(e,t,s,r,o,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Gw(this.Ac)&&X3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eU{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ch(e)}Cc(e,t,s,r=!1){return new vg({Ac:e,methodName:t,Dc:s,path:Ln.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mh(n){const e=n._freezeSettings(),t=ch(n._databaseId);return new eU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Bw(n,e,t,s,r,o={}){const u=n.Cc(o.merge||o.mergeFields?2:0,e,t,r);bg("Data must be an object, but it was:",u,s);const f=Hw(s,u);let m,p;if(o.merge)m=new As(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const _ of o.mergeFields){const T=S0(e,_,t);if(!u.contains(T))throw new we(he.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Fw(v,T)||v.push(T)}m=new As(v),p=u.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,p=u.fieldTransforms;return new Z3(new cs(f),m,p)}class ph extends yg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}function tU(n,e,t,s){const r=n.Cc(1,e,t);bg("Data must be an object, but it was:",r,s);const o=[],u=cs.empty();Ea(s,((m,p)=>{const v=_g(e,m,t);p=Un(p);const _=r.yc(v);if(p instanceof ph)o.push(v);else{const T=pu(p,_);T!=null&&(o.push(v),u.set(v,T))}}));const f=new As(o);return new Ow(u,f,r.fieldTransforms)}function nU(n,e,t,s,r,o){const u=n.Cc(1,e,t),f=[S0(e,s,t)],m=[r];if(o.length%2!=0)throw new we(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)f.push(S0(e,o[T])),m.push(o[T+1]);const p=[],v=cs.empty();for(let T=f.length-1;T>=0;--T)if(!Fw(p,f[T])){const A=f[T];let k=m[T];k=Un(k);const M=u.yc(A);if(k instanceof ph)p.push(A);else{const C=pu(k,M);C!=null&&(p.push(A),v.set(A,C))}}const _=new As(p);return new Ow(v,_,u.fieldTransforms)}function sU(n,e,t,s=!1){return pu(t,n.Cc(s?4:3,e))}function pu(n,e){if(zw(n=Un(n)))return bg("Unsupported field value:",e,n),Hw(n,e);if(n instanceof yg)return(function(s,r){if(!Gw(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const o=[];let u=0;for(const f of s){let m=pu(f,r.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}})(n,e)}return(function(s,r){if((s=Un(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return F5(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=qt.fromDate(s);return{timestampValue:kf(r.serializer,o)}}if(s instanceof qt){const o=new qt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kf(r.serializer,o)}}if(s instanceof ji)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ys)return{bytesValue:iw(r.serializer,s._byteString)};if(s instanceof cn){const o=r.databaseId,u=s.firestore._databaseId;if(!u.isEqual(o))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sg(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Vi)return(function(u,f){return{mapValue:{fields:{[DA]:{stringValue:PA},[Ef]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return Z0(f.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${eh(s)}`)})(n,e)}function Hw(n,e){const t={};return NA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(n,((s,r)=>{const o=pu(r,e.mc(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function zw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qt||n instanceof ji||n instanceof Ys||n instanceof cn||n instanceof yg||n instanceof Vi)}function bg(n,e,t){if(!zw(t)||!AA(t)){const s=eh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function S0(n,e,t){if((e=Un(e))instanceof hh)return e._internalPath;if(typeof e=="string")return _g(n,e);throw Mf("Field path arguments must be of type string or ",n,!1,void 0,t)}const iU=new RegExp("[~\\*/\\[\\]]");function _g(n,e,t){if(e.search(iU)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hh(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mf(n,e,t,s,r){const o=s&&!s.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${s}`),u&&(m+=` in document ${r}`),m+=")"),new we(he.INVALID_ARGUMENT,f+n+m)}function Fw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,s,r,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rU extends qw{data(){return super.data()}}function gh(n,e){return typeof e=="string"?_g(n,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class Eg extends Tg{}function gu(n,e,...t){let s=[];e instanceof Tg&&s.push(e),s=s.concat(t),(function(o){const u=o.filter((m=>m instanceof Sg)).length,f=o.filter((m=>m instanceof xh)).length;if(u>1||u>0&&f>0)throw new we(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class xh extends Eg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new xh(e,t,s)}_apply(e){const t=this._parse(e);return $w(e._query,t),new Aa(e.firestore,e.converter,m0(e._query,t))}_parse(e){const t=mh(e.firestore);return(function(o,u,f,m,p,v,_){let T;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){EE(_,v);const k=[];for(const M of _)k.push(TE(m,o,M));T={arrayValue:{values:k}}}else T=TE(m,o,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||EE(_,v),T=sU(f,u,_,v==="in"||v==="not-in");return vn.create(p,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Df(n,e,t){const s=e,r=gh("where",n);return xh._create(r,s,t)}class Sg extends Tg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:pi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let u=r;const f=o.getFlattenedFilters();for(const m of f)$w(u,m),u=m0(u,m)})(e._query,t),new Aa(e.firestore,e.converter,m0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends Eg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ag(e,t)}_apply(e){const t=(function(r,o,u){if(r.startAt!==null)throw new we(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new we(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nu(o,u)})(e._query,this._field,this._direction);return new Aa(e.firestore,e.converter,(function(r,o){const u=r.explicitOrderBy.concat([o]);return new jl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function Kw(n,e="asc"){const t=e,s=gh("orderBy",n);return Ag._create(s,t)}class wg extends Eg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new wg(e,t,s)}_apply(e){return new Aa(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function oU(n){return u5("limit",n),wg._create("limit",n,"F")}function TE(n,e,t){if(typeof(t=Un(t))=="string"){if(t==="")throw new we(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HA(e)&&t.indexOf("/")!==-1)throw new we(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ht.fromString(t));if(!Ve.isDocumentKey(s))throw new we(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return OT(n,new Ve(s))}if(t instanceof cn)return OT(n,t._key);throw new we(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(t)}.`)}function EE(n,e){if(!Array.isArray(n)||n.length===0)throw new we(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $w(n,e){const t=(function(r,o){for(const u of r)for(const f of u.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lU{convertValue(e,t="none"){switch(ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ea(e,((r,o)=>{s[r]=this.convertValue(o,t)})),s}convertVectorValue(e){var s,r,o;const t=(o=(r=(s=e.fields)==null?void 0:s[Ef].arrayValue)==null?void 0:r.values)==null?void 0:o.map((u=>on(u.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new ji(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=sh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){const t=ga(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ht.fromString(e);Mt(uw(s),9688,{name:e});const r=new eu(s.get(1),s.get(3)),o=new Ve(s.popFirst(5));return r.isEqual(t)||vr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class io extends qw{constructor(e,t,s,r,o,u){super(e,t,s,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(gh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}io._jsonSchemaVersion="firestore/documentSnapshot/1.0",io._jsonSchema={type:bn("string",io._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};class rf extends io{data(e={}){return super.data(e)}}class pl{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new rf(this._firestore,this._userDataWriter,s.key,s,new zc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const m=new rf(r._firestore,r._userDataWriter,f.doc.key,f.doc,new zc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const m=new rf(r._firestore,r._userDataWriter,f.doc.key,f.doc,new zc(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:cU(f.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(n){n=mi(n,cn);const e=mi(n.firestore,xo);return $3(xg(e),n._key).then((t=>dU(e,n,t)))}pl._jsonSchemaVersion="firestore/querySnapshot/1.0",pl._jsonSchema={type:bn("string",pl._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class Qw extends lU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function Ol(n){n=mi(n,Aa);const e=mi(n.firestore,xo),t=xg(e),s=new Qw(e);return aU(n._query),Y3(t,n._query).then((r=>new pl(e,s,n,r)))}function xu(n,e,t){n=mi(n,cn);const s=mi(n.firestore,xo),r=Yw(n.converter,e,t);return yh(s,[Bw(mh(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Qs.none())])}function Ww(n,e,t,...s){n=mi(n,cn);const r=mi(n.firestore,xo),o=mh(r);let u;return u=typeof(e=Un(e))=="string"||e instanceof hh?nU(o,"updateDoc",n._key,e,t,s):tU(o,"updateDoc",n._key,e),yh(r,[u.toMutation(n._key,Qs.exists(!0))])}function Ng(n){return yh(mi(n.firestore,xo),[new eg(n._key,Qs.none())])}function uU(n,e){const t=mi(n.firestore,xo),s=xi(n),r=Yw(n.converter,e);return yh(t,[Bw(mh(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Qs.exists(!1))]).then((()=>s))}function yh(n,e){return(function(s,r){const o=new pr;return s.asyncQueue.enqueueAndForget((async()=>L3(await K3(s),r,o))),o.promise})(xg(n),e)}function dU(n,e,t){const s=t.docs.get(e._key),r=new Qw(n);return new io(n,r,e._key,s,new zc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Pl=r})(Dl),vl(new oo("firestore",((s,{instanceIdentifier:r,options:o})=>{const u=s.getProvider("app").getImmediate(),f=new xo(new t5(s.getProvider("auth-internal")),new i5(u,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(p.options.projectId,v)})(u,r),u);return o={useFetchStreams:t,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),da(wT,NT,e),da(wT,NT,"esm2020")})();function Xw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fU=Xw,Zw=new lu("auth","Firebase",Xw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new H0("@firebase/auth");function hU(n,...e){Pf.logLevel<=gt.WARN&&Pf.warn(`Auth (${Dl}): ${n}`,...e)}function af(n,...e){Pf.logLevel<=gt.ERROR&&Pf.error(`Auth (${Dl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(n,...e){throw Ig(n,...e)}function hi(n,...e){return Ig(n,...e)}function kg(n,e,t){const s={...fU(),[e]:t};return new lu("auth","Firebase",s).create(e,{appName:n.name})}function ro(n){return kg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mU(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Bi(n,"argument-error"),kg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ig(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return Zw.create(n,...e)}function Fe(n,e,...t){if(!n)throw Ig(e,...t)}function fr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw af(e),new Error(e)}function _r(n,e){n||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function pU(){return SE()==="http:"||SE()==="https:"}function SE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pU()||CP()||"connection"in navigator)?navigator.onLine:!0}function xU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,_r(t>e,"Short delay should be less than long delay!"),this.isMobile=NP()||RP()}get(){return gU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n,e){_r(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bU=new yu(3e4,6e4);function Rg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Gl(n,e,t,s,r={}){return tN(n,r,async()=>{let o={},u={};s&&(e==="GET"?u=s:o={body:JSON.stringify(s)});const f=cu({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...o};return IP()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Ml(n.emulatorConfig.host)&&(p.credentials="include"),eN.fetch()(await nN(n,n.config.apiHost,t,f),p)})}async function tN(n,e,t){n._canInitEmulator=!1;const s={...yU,...e};try{const r=new TU(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Yd(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const f=o.ok?u.errorMessage:u.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Yd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Yd(n,"user-disabled",u);const v=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw kg(n,v,p);Bi(n,v)}}catch(r){if(r instanceof Ar)throw r;Bi(n,"network-request-failed",{message:String(r)})}}async function _U(n,e,t,s,r={}){const o=await Gl(n,e,t,s,r);return"mfaPendingCredential"in o&&Bi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function nN(n,e,t,s){const r=`${e}${t}?${s}`,o=n,u=o.config.emulator?Cg(n.config,r):`${n.config.apiScheme}://${r}`;return vU.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}class TU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(hi(this.auth,"network-request-failed")),bU.get())})}}function Yd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=hi(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(n,e){return Gl(n,"POST","/v1/accounts:delete",e)}async function Lf(n,e){return Gl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SU(n,e=!1){const t=Un(n),s=await t.getIdToken(e),r=Mg(s);Fe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:r,token:s,authTime:Jc(jp(r.auth_time)),issuedAtTime:Jc(jp(r.iat)),expirationTime:Jc(jp(r.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function jp(n){return Number(n)*1e3}function Mg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return af("JWT malformed, contained fewer than 3 sections"),null;try{const r=iA(t);return r?JSON.parse(r):(af("Failed to decode base64 JWT payload"),null)}catch(r){return af("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function AE(n){const e=Mg(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ar&&AU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function AU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(n){var _;const e=n.auth,t=await n.getIdToken(),s=await ru(n,Lf(e,{idToken:t}));Fe(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?sN(r.providerUserInfo):[],u=kU(n.providerData,o),f=n.isAnonymous,m=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),p=f?m:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new w0(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function NU(n){const e=Un(n);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kU(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function sN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e){const t=await tN(n,{},async()=>{const s=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,u=await nN(n,r,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return n.emulatorConfig&&Ml(n.emulatorConfig.host)&&(m.credentials="include"),eN.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function CU(n,e){return Gl(n,"POST","/v2/accounts:revokeToken",Rg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=AE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:o}=await IU(e,t);this.updateTokensAndExpiration(s,r,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:o}=t,u=new gl;return s&&(Fe(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),r&&(Fe(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),o&&(Fe(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gl,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new wU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new w0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await ru(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SU(this,e)}reload(){return NU(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(ro(this.auth));const e=await this.getIdToken();return await ru(this,EU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:A,providerData:k,stsTokenManager:M}=t;Fe(_&&M,e,"internal-error");const C=gl.fromJSON(this.name,M);Fe(typeof _=="string",e,"internal-error"),sa(s,e.name),sa(r,e.name),Fe(typeof T=="boolean",e,"internal-error"),Fe(typeof A=="boolean",e,"internal-error"),sa(o,e.name),sa(u,e.name),sa(f,e.name),sa(m,e.name),sa(p,e.name),sa(v,e.name);const V=new ui({uid:_,auth:e,email:r,emailVerified:T,displayName:s,isAnonymous:A,photoURL:u,phoneNumber:o,tenantId:f,stsTokenManager:C,createdAt:p,lastLoginAt:v});return k&&Array.isArray(k)&&(V.providerData=k.map(N=>({...N}))),m&&(V._redirectEventId=m),V}static async _fromIdTokenResponse(e,t,s=!1){const r=new gl;r.updateFromServerResponse(t);const o=new ui({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Uf(o),o}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];Fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?sN(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),f=new gl;f.updateFromIdToken(s);const m=new ui({uid:r.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new w0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;function hr(n){_r(n instanceof Function,"Expected a class definition");let e=wE.get(n);return e?(_r(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iN.type="NONE";const NE=iN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(n,e,t){return`firebase:${n}:${e}:${t}`}class xl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:o}=this.auth;this.fullUserKey=of(this.userKey,r.apiKey,o),this.fullPersistenceKey=of("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lf(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new xl(hr(NE),e,s);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||hr(NE);const u=of(s,e.config.apiKey,e.name);let f=null;for(const p of t)try{const v=await p._get(u);if(v){let _;if(typeof v=="string"){const T=await Lf(e,{idToken:v}).catch(()=>{});if(!T)break;_=await ui._fromGetAccountInfoResponse(e,T,v)}else _=ui._fromJSON(e,v);p!==o&&(f=_),o=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new xl(o,e,s):(o=m[0],f&&await o._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new xl(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uN(e))return"Blackberry";if(dN(e))return"Webos";if(aN(e))return"Safari";if((e.includes("chrome/")||oN(e))&&!e.includes("edge/"))return"Chrome";if(cN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function rN(n=Kn()){return/firefox\//i.test(n)}function aN(n=Kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oN(n=Kn()){return/crios\//i.test(n)}function lN(n=Kn()){return/iemobile/i.test(n)}function cN(n=Kn()){return/android/i.test(n)}function uN(n=Kn()){return/blackberry/i.test(n)}function dN(n=Kn()){return/webos/i.test(n)}function Dg(n=Kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RU(n=Kn()){var e;return Dg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function MU(){return MP()&&document.documentMode===10}function fN(n=Kn()){return Dg(n)||cN(n)||dN(n)||uN(n)||/windows phone/i.test(n)||lN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n,e=[]){let t;switch(n){case"Browser":t=kE(Kn());break;case"Worker":t=`${kE(Kn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((u,f)=>{try{const m=e(o);u(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e={}){return Gl(n,"GET","/v2/passwordPolicy",Rg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=6;class UU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??LU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IE(this),this.idTokenSubscription=new IE(this),this.beforeStateQueue=new DU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hr(t)),this._initializationPromise=this.queue(async()=>{var s,r,o;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lf(this,{idToken:e}),s=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ci(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(o=this.redirectUser)==null?void 0:o._redirectEventId,f=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(s=m.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(ro(this));const t=e?Un(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PU(this),t=new UU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await CU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hr(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(f,this,"internal-error"),f.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,r);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&hU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vh(n){return Un(n)}class IE{constructor(e){this.auth=e,this.observer=null,this.addObserver=GP(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VU(n){Pg=n}function OU(n){return Pg.loadJS(n)}function GU(){return Pg.gapiScript}function BU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(n,e){const t=F0(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(ao(o,e??{}))return r;Bi(r,"already-initialized")}return t.initialize({options:e})}function zU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(hr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function FU(n,e,t){const s=vh(n);Fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,o=mN(e),{host:u,port:f}=qU(e),m=f===null?"":`:${f}`,p={url:`${o}//${u}${m}/`},v=Object.freeze({host:u,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Fe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Fe(ao(p,s.config.emulator)&&ao(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ml(u)?(lA(`${o}//${u}${m}`),cA("Auth",!0)):KU()}function mN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qU(n){const e=mN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const o=r[1];return{host:o,port:CE(s.substr(o.length+1))}}else{const[o,u]=s.split(":");return{host:o,port:CE(u)}}}function CE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function KU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,t){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n,e){return _U(n,"POST","/v1/accounts:signInWithIdp",Rg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="http://localhost";class uo extends pN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...o}=t;if(!s||!r)return null;const u=new uo(s,r);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return yl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,yl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yl(e,t)}buildRequest(){const e={requestUri:$U,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends Lg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends vu{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.FACEBOOK_SIGN_IN_METHOD="facebook.com";ia.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return dr.credential(t,s)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends vu{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ra.credential(e.oauthAccessToken)}catch{return null}}}ra.GITHUB_SIGN_IN_METHOD="github.com";ra.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends vu{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return aa.credential(t,s)}catch{return null}}}aa.TWITTER_SIGN_IN_METHOD="twitter.com";aa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const o=await ui._fromIdTokenResponse(e,s,r),u=RE(s);return new wl({user:o,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=RE(s);return new wl({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function RE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends Ar{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,jf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new jf(e,t,s,r)}}function gN(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jf._fromErrorAndOperation(n,o,e,s):o})}async function YU(n,e,t=!1){const s=await ru(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return wl._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(n,e,t=!1){const{auth:s}=n;if(ci(s.app))return Promise.reject(ro(s));const r="reauthenticate";try{const o=await ru(n,gN(s,r,e,n),t);Fe(o.idToken,s,"internal-error");const u=Mg(o.idToken);Fe(u,s,"internal-error");const{sub:f}=u;return Fe(n.uid===f,s,"user-mismatch"),wl._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Bi(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(n,e,t=!1){if(ci(n.app))return Promise.reject(ro(n));const s="signIn",r=await gN(n,s,e),o=await wl._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(o.user),o}function WU(n,e,t,s){return Un(n).onIdTokenChanged(e,t,s)}function XU(n,e,t){return Un(n).beforeAuthStateChanged(e,t)}function ZU(n,e,t,s){return Un(n).onAuthStateChanged(e,t,s)}function ej(n){return Un(n).signOut()}const Vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vf,"1"),this.storage.removeItem(Vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=1e3,nj=10;class yN extends xN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},o=this.storage.getItem(s);MU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,nj):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},tj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yN.type="LOCAL";const sj=yN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN extends xN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vN.type="SESSION";const bN=vN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new bh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:o}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const f=Array.from(u).map(async p=>p(t.origin,o)),m=await ij(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,u;return new Promise((f,m)=>{const p=Ug("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:r,onMessage(_){const T=_;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(T.data.response);break;default:clearTimeout(v),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function aj(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function oj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function cj(){return _N()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="firebaseLocalStorageDb",uj=1,Of="firebaseLocalStorage",EN="fbase_key";class bu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _h(n,e){return n.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function dj(){const n=indexedDB.deleteDatabase(TN);return new bu(n).toPromise()}function N0(){const n=indexedDB.open(TN,uj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Of,{keyPath:EN})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Of)?e(s):(s.close(),await dj(),e(await N0()))})})}async function ME(n,e,t){const s=_h(n,!0).put({[EN]:e,value:t});return new bu(s).toPromise()}async function fj(n,e){const t=_h(n,!1).get(e),s=await new bu(t).toPromise();return s===void 0?null:s.value}function DE(n,e){const t=_h(n,!0).delete(e);return new bu(t).toPromise()}const hj=800,mj=3;class SN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>mj)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _N()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(cj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await oj(),!this.activeServiceWorker)return;this.sender=new rj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N0();return await ME(e,Vf,"1"),await DE(e,Vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ME(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>fj(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>DE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=_h(r,!1).getAll();return new bu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SN.type="LOCAL";const pj=SN;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(n,e){return e?hr(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends pN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gj(n){return QU(n.auth,new jg(n),n.bypassAuthState)}function xj(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),JU(t,new jg(n),n.bypassAuthState)}async function yj(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),YU(t,new jg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,s,r,o=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:o,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gj;case"linkViaPopup":case"linkViaRedirect":return yj;case"reauthViaPopup":case"reauthViaRedirect":return xj;default:Bi(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new yu(2e3,1e4);async function bj(n,e,t){if(ci(n.app))return Promise.reject(hi(n,"operation-not-supported-in-this-environment"));const s=vh(n);mU(n,e,Lg);const r=AN(s,t);return new so(s,"signInViaPopup",e,r).executeNotNull()}class so extends wN{constructor(e,t,s,r,o){super(e,t,r,o),this.provider=s,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){_r(this.filter.length===1,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vj.get())};e()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="pendingRedirect",lf=new Map;class Tj extends wN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lf.get(this.auth._key());if(!e){try{const s=await Ej(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lf.set(this.auth._key(),e)}return this.bypassAuthState||lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ej(n,e){const t=wj(e),s=Aj(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function Sj(n,e){lf.set(n._key(),e)}function Aj(n){return hr(n._redirectPersistence)}function wj(n){return of(_j,n.config.apiKey,n.name)}async function Nj(n,e,t=!1){if(ci(n.app))return Promise.reject(ro(n));const s=vh(n),r=AN(s,e),u=await new Tj(s,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=600*1e3;class Ij{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Cj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!NN(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(hi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kj&&this.cachedEventUids.clear(),this.cachedEventUids.has(PE(e))}saveEventToCache(e){this.cachedEventUids.add(PE(e)),this.lastProcessedEventTime=Date.now()}}function PE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Cj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(n,e={}){return Gl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dj=/^https?/;async function Pj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Rj(n);for(const t of e)try{if(Lj(t))return}catch{}Bi(n,"unauthorized-domain")}function Lj(n){const e=A0(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!Dj.test(t))return!1;if(Mj.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=new yu(3e4,6e4);function LE(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jj(n){return new Promise((e,t)=>{var r,o,u;function s(){LE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LE(),t(hi(n,"network-request-failed"))},timeout:Uj.get()})}if((o=(r=Oi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((u=Oi().gapi)!=null&&u.load)s();else{const f=BU("iframefcb");return Oi()[f]=()=>{gapi.load?s():t(hi(n,"network-request-failed"))},OU(`${GU()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw cf=null,e})}let cf=null;function Vj(n){return cf=cf||jj(n),cf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new yu(5e3,15e3),Gj="__/auth/iframe",Bj="emulator/auth/iframe",Hj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fj(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cg(e,Bj):`https://${n.config.authDomain}/${Gj}`,s={apiKey:e.apiKey,appName:n.name,v:Dl},r=zj.get(n.config.apiHost);r&&(s.eid=r);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${cu(s).slice(1)}`}async function qj(n){const e=await Vj(n),t=Oi().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:Fj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hj,dontclear:!0},s=>new Promise(async(r,o)=>{await s.restyle({setHideOnLeave:!1});const u=hi(n,"network-request-failed"),f=Oi().setTimeout(()=>{o(u)},Oj.get());function m(){Oi().clearTimeout(f),r(s)}s.ping(m).then(m,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$j=500,Yj=600,Jj="_blank",Qj="http://localhost";class UE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wj(n,e,t,s=$j,r=Yj){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m={...Kj,width:s.toString(),height:r.toString(),top:o,left:u},p=Kn().toLowerCase();t&&(f=oN(p)?Jj:t),rN(p)&&(e=e||Qj,m.scrollbars="yes");const v=Object.entries(m).reduce((T,[A,k])=>`${T}${A}=${k},`,"");if(RU(p)&&f!=="_self")return Xj(e||"",f),new UE(null);const _=window.open(e||"",f,v);Fe(_,n,"popup-blocked");try{_.focus()}catch{}return new UE(_)}function Xj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="__/auth/handler",eV="emulator/auth/handler",tV=encodeURIComponent("fac");async function jE(n,e,t,s,r,o){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Dl,eventId:r};if(e instanceof Lg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",OP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof vu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),p=m?`#${tV}=${encodeURIComponent(m)}`:"";return`${nV(n)}?${cu(f).slice(1)}${p}`}function nV({config:n}){return n.emulator?Cg(n,eV):`https://${n.authDomain}/${Zj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="webStorageSupport";class sV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bN,this._completeRedirectFn=Nj,this._overrideRedirectResult=Sj}async _openPopup(e,t,s,r){var u;_r((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const o=await jE(e,t,s,A0(),r);return Wj(e,o,Ug())}async _openRedirect(e,t,s,r){await this._originValidation(e);const o=await jE(e,t,s,A0(),r);return aj(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(_r(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await qj(e),s=new Ij(e);return t.register("authEvent",r=>(Fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vp,{type:Vp},r=>{var u;const o=(u=r==null?void 0:r[0])==null?void 0:u[Vp];o!==void 0&&t(!!o),Bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fN()||aN()||Dg()}}const iV=sV;var VE="@firebase/auth",OE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oV(n){vl(new oo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=s.options;Fe(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hN(n)},p=new jU(s,r,o,m);return zU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),vl(new oo("auth-internal",e=>{const t=vh(e.getProvider("auth").getImmediate());return(s=>new rV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),da(VE,OE,aV(n)),da(VE,OE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=300,cV=oA("authIdTokenMaxAge")||lV;let GE=null;const uV=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>cV)return;const r=t==null?void 0:t.token;GE!==r&&(GE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function dV(n=hA()){const e=F0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=HU(n,{popupRedirectResolver:iV,persistence:[pj,sj,bN]}),s=oA("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const u=uV(o.toString());XU(t,u,()=>u(t.currentUser)),WU(t,f=>u(f))}}const r=rA("auth");return r&&FU(t,`http://${r}`),t}function fV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}VU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const o=hi("internal-error");o.customData=r,t(o)},s.type="text/javascript",s.charset="UTF-8",fV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oV("Browser");const hV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},kN=fA(hV),Vn=Q3(kN),Vg=dV(kN),mV=new dr;console.log("Firebase Service Initialized for: fajmuls-learning");const IN="benchmark_scores",CN="global_leaderboard",Og="test_packages",zi="users",pV=n=>ZU(Vg,n),gV=async()=>{try{return(await bj(Vg,mV)).user}catch(n){throw console.error("Error signing in with Google",n),n}},xV=async()=>{try{await ej(Vg)}catch(n){console.error("Error signing out",n)}},yV=async n=>{const e=gu(go(Vn,zi),Df("username_lowercase","==",n.toLowerCase()));return(await Ol(e)).empty},BE=async n=>{const e=xi(Vn,zi,n),t=await Jw(e);return t.exists()?t.data():null},vV=async(n,e)=>{await xu(xi(Vn,zi,n),{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0})},bV=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await Ww(xi(Vn,zi,n),t)},_V=async(n,e)=>{try{const t=e.timestamp?`sess-${e.timestamp}`:`sess-${Date.now()}`,s=JSON.parse(JSON.stringify(e,(r,o)=>o===void 0?null:o));await xu(xi(Vn,zi,n,"sessions",t),{...s,id:t}),console.log(`Session ${t} saved to cloud`)}catch(t){throw console.error("Error saving session to cloud",t),t}},TV=async n=>{try{const e=gu(go(Vn,zi,n,"sessions"),Kw("timestamp","desc")),t=await Ol(e),s=[];return t.forEach(r=>{s.push({...r.data(),id:r.id})}),s}catch(e){return console.error("Error fetching all saved sessions",e),[]}},HE=async(n,e)=>{try{await Ng(xi(Vn,zi,n,"sessions",e)),console.log(`Cloud session ${e} deleted`)}catch(t){console.error("Error deleting session from cloud",t)}},EV=async n=>{console.log("clearSessionFromCloud called - Use deleteSavedSession for specific items")},zE=async(n,e)=>{try{const t=JSON.parse(JSON.stringify(e));await xu(xi(Vn,zi,n,"history",e.id),t),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},SV=async n=>{try{const e=gu(go(Vn,zi,n,"history")),t=await Ol(e),s=[];return t.forEach(r=>{s.push(r.data())}),s.sort((r,o)=>new Date(o.date).getTime()-new Date(r.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},AV=async(n,e)=>{try{await Ng(xi(Vn,zi,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},FE=async(n,e,t,s,r,o)=>{if(!r||r.startsWith("guest-"))return;const u=`${n}_${e}_${r}`,f=xi(Vn,CN,u);try{const m=await Jw(f);if(m.exists()){const p=m.data();t>p.score&&(await Ww(f,{score:t,packageName:o||p.packageName,timestamp:Date.now(),username:s}),console.log(`Global Leaderboard Updated: ${n} - ${t}`))}else{const p={uid:r,username:s,category:n,subCategory:e,score:t,packageName:o,timestamp:Date.now()};await xu(f,p),console.log(`Global Leaderboard Entry Created: ${n} - ${t}`)}}catch(m){console.error("Error saving to global leaderboard",m)}},il=async(n,e,t=50)=>{try{const s=gu(go(Vn,CN),Df("category","==",n),Df("subCategory","==",e),Kw("score","desc"),oU(t)),r=await Ol(s),o=[];return r.forEach(u=>o.push(u.data())),o}catch(s){return console.error(`Error fetching leaderboard for ${n}/${e}:`,s),[]}},wV=async(n,e,t,s)=>{try{await uU(go(Vn,IN),{game:n,score:e,username:t,unit:s,timestamp:Date.now()}),console.log(`Score saved to Cloud Leaderboard: ${n} - ${e}`)}catch(r){console.error("Error saving score to Firebase:",r)}},NV=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=gu(go(Vn,IN),Df("game","==",n)),r=await Ol(s),o=[];r.forEach(m=>{o.push({id:m.id,...m.data()})}),o.sort((m,p)=>t?m.score-p.score:p.score-m.score);const u=[],f=new Set;for(const m of o){const p=m.username.toLowerCase().trim();if(f.has(p)||(u.push(m),f.add(p)),u.length>=e)break}return u}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},qE=async n=>{try{const e=JSON.parse(JSON.stringify(n,(t,s)=>s));await xu(xi(Vn,Og,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},kV=async()=>{try{const n=await Ol(go(Vn,Og)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},IV=async n=>{try{await Ng(xi(Vn,Og,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}};class CV{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(bb[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const r=this.audioCache[e];r.currentTime=0;const o=r.play();o!==void 0&&o.catch(()=>{});return}const t=bb[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const oe=new CV;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),KE=n=>{const e=MV(n);return e.charAt(0).toUpperCase()+e.slice(1)},RN=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),DV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:u,...f},m)=>z.createElement("svg",{ref:m,...PV,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:RN("lucide",r),...!o&&!DV(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,v])=>z.createElement(p,v)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(n,e)=>{const t=z.forwardRef(({className:s,...r},o)=>z.createElement(LV,{ref:o,iconNode:e,className:RN(`lucide-${RV(KE(n))}`,`lucide-${n}`,s),...r}));return t.displayName=KE(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ws=Te("activity",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],It=Te("arrow-left",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],OV=Te("arrow-up",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],MN=Te("award",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],HV=Te("bell-off",BV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],FV=Te("bell",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$E=Te("book-open",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Th=Te("book",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],$s=Te("brain",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Gg=Te("briefcase",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],QV=Te("building-2",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],XV=Te("calculator",WV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],eO=Te("calendar",ZV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],nO=Te("camera",tO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Qc=Te("chart-no-axes-column",sO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rO=Te("chevron-down",iO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oa=Te("chevron-right",aO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ns=Te("circle-check-big",oO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cO=Te("circle-play",lO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Bl=Te("circle-x",uO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ma=Te("clock",dO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],YE=Te("cloud-upload",fO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gf=Te("copy",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],pO=Te("crown",mO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],DN=Te("download",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],yO=Te("external-link",xO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PN=Te("eye",vO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],_O=Te("file-search",bO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gr=Te("file-text",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],SO=Te("flag",EO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wO=Te("funnel",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],kO=Te("git-merge",NO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],CO=Te("globe",IO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Bg=Te("graduation-cap",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Tr=Te("grid-3x3",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Bf=Te("hash",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Eh=Te("heart",PO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],au=Te("history",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jO=Te("info",UO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],OO=Te("landmark",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],BO=Te("layout-grid",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],LN=Te("lightbulb",HO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qn=Te("loader-circle",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qO=Te("lock",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$O=Te("log-out",KO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Hf=Te("map",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],JE=Te("medal",JO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],WO=Te("message-circle",QO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Sh=Te("message-square",XO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],UN=Te("moon",ZO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],t9=Te("music",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],jN=Te("package",n9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],VN=Te("palette",s9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],ou=Te("pause",i9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],QE=Te("pen-tool",r9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],o9=Te("pen",a9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Hl=Te("play",l9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],u9=Te("plus",c9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],f9=Te("refresh-cw",d9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],m9=Te("repeat",h9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],g9=Te("rocket",p9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],k0=Te("rotate-ccw",x9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ah=Te("save",y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],uf=Te("search",v9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ON=Te("settings",b9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],T9=Te("shapes",_9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],S9=Te("share-2",E9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],w9=Te("shield-check",A9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],GN=Te("sun",N9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],fo=Te("target",k9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],I0=Te("timer",I9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nl=Te("trash-2",C9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],M9=Te("trending-up",R9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zf=Te("triangle-alert",D9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],kl=Te("trophy",P9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ff=Te("type",L9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Hg=Te("upload",U9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],BN=Te("user",j9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],O9=Te("users",V9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],B9=Te("volume-2",G9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],z9=Te("volume-x",H9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],HN=Te("x",F9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],_a=Te("zap",q9),K9=()=>{const[n,e]=z.useState(!1),[t,s]=z.useState(1500),[r,o]=z.useState(!1),[u,f]=z.useState("focus");z.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),z.useEffect(()=>{let A=null;return r&&t>0?A=setInterval(()=>{s(t-1)},1e3):t===0&&(o(!1),m()),()=>clearInterval(A)},[r,t]);const m=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(k=>console.log("Audio play failed",k)),"Notification"in window&&Notification.permission==="granted"&&new Notification(u==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:u==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},p=()=>o(!r),v=()=>{o(!1),s(u==="focus"?1500:300)},_=()=>{const A=u==="focus"?"break":"focus";f(A),s(A==="focus"?1500:300),o(!1)},T=A=>{const k=Math.floor(A/60),M=A%60;return`${k.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`};return n?c.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[c.jsxs("div",{className:`p-4 ${u==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(I0,{size:20}),c.jsx("span",{className:"font-bold",children:u==="focus"?"Fokus":"Istirahat"})]}),c.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:c.jsx(HN,{size:18})})]}),c.jsxs("div",{className:"p-6 flex flex-col items-center",children:[c.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),c.jsxs("div",{className:"flex gap-4 mb-6",children:[c.jsx("button",{onClick:p,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:r?c.jsx(ou,{size:24}):c.jsx(Hl,{size:24})}),c.jsx("button",{onClick:v,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:c.jsx(k0,{size:24})})]}),c.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",u==="focus"?"Istirahat":"Fokus"]})]})]}):c.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[c.jsx(I0,{size:24}),c.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},$9=({data:n,onNext:e})=>{const[t,s]=z.useState(!1);return c.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[c.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[c.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),c.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),c.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),c.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),c.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&c.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[c.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),c.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),c.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},zN=({node:n,depth:e=0})=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&c.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),c.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>c.jsxs("div",{className:"flex flex-col items-center relative",children:[c.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),c.jsx(zN,{node:t,depth:e+1})]},s))]})]}),Y9=({data:n})=>{const e=n.root||n;return c.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:c.jsx(zN,{node:e})})},to=({className:n="",height:e="h-4",width:t="w-full"})=>c.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),J9=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx(to,{height:"h-12",width:"w-12",className:"rounded-full"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(to,{height:"h-4",width:"w-1/3"}),c.jsx(to,{height:"h-3",width:"w-1/2"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(to,{height:"h-4"}),c.jsx(to,{height:"h-4"}),c.jsx(to,{height:"h-4",width:"w-2/3"})]})]}),Q9=({onComplete:n})=>{const e=()=>{oe.play("click"),n()};return c.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[c.jsxs("div",{className:"relative mb-8 group",children:[c.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),c.jsx("img",{src:ff,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),c.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",c.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),c.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),c.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[c.jsx(g9,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},W9=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:r,onUpdateProfile:o})=>{var $,se;const[u,f]=z.useState(!1),[m,p]=z.useState(""),[v,_]=z.useState(null),[T,A]=z.useState(!1),k=z.useRef(null);if(!n)return null;const M=Y=>{oe.play("tap"),s({...t,[Y]:!t[Y]})},C=Y=>{s({...t,volume:parseFloat(Y.target.value)})},V=Y=>{var P;const D=(P=Y.target.files)==null?void 0:P[0];if(D){if(D.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const R=new FileReader;R.onload=O=>{var B;const U=new Image;U.onload=()=>{const j=document.createElement("canvas"),ce=j.getContext("2d");if(!ce)return;const ke=200;let K=U.width,fe=U.height;K>fe?K>ke&&(fe*=ke/K,K=ke):fe>ke&&(K*=ke/fe,fe=ke),j.width=K,j.height=fe,ce.drawImage(U,0,0,K,fe);const Se=j.toDataURL("image/jpeg",.8);_(Se),f(!0),r&&!m&&p(r.username)},U.src=(B=O.target)==null?void 0:B.result},R.readAsDataURL(D)}},N=async()=>{A(!0);try{const Y={};m&&m!==(r==null?void 0:r.username)&&(Y.username=m),v&&(Y.photoURL=v),Object.keys(Y).length>0&&await o(Y),f(!1),_(null)}catch(Y){console.error(Y),alert("Gagal menyimpan profil.")}finally{A(!1)}},G=()=>{p((r==null?void 0:r.username)||""),f(!0)};return c.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(ON,{size:24,className:"text-slate-400"})," Pengaturan"]}),c.jsx("button",{onClick:()=>{oe.play("back"),e()},children:c.jsx(Bl,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),c.jsxs("div",{className:"space-y-4",children:[r&&c.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Akun"}),r.isGuest?c.jsx("span",{className:"text-xs bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded text-slate-600 dark:text-slate-300 font-bold",children:"TAMU"}):c.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900 px-2 py-1 rounded text-emerald-600 dark:text-emerald-300 font-bold",children:"ONLINE"})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var Y;return(Y=k.current)==null?void 0:Y.click()},children:[v||r.photoURL?c.jsx("img",{src:v||r.photoURL||"",alt:"Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-md",onError:Y=>{var D;Y.currentTarget.style.display="none",(D=Y.currentTarget.nextElementSibling)==null||D.classList.remove("hidden")}}):null,c.jsx("div",{className:`w-16 h-16 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-2xl border-2 border-white dark:border-slate-600 shadow-md ${v||r.photoURL?"hidden":""}`,children:(se=($=r.username)==null?void 0:$[0])==null?void 0:se.toUpperCase()}),c.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(nO,{size:20,className:"text-white"})})]}),c.jsx("input",{type:"file",ref:k,className:"hidden",accept:"image/*",onChange:V}),c.jsx("div",{className:"flex-1 min-w-0",children:u?c.jsx("input",{type:"text",value:m,onChange:Y=>p(Y.target.value.replace(/\s/g,"")),className:"w-full p-2 border border-indigo-300 rounded-lg text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",placeholder:"Username"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold text-lg text-slate-800 dark:text-white truncate",children:r.username}),c.jsx("div",{className:"text-xs text-slate-500 truncate",children:r.email||"Mode Offline"})]})}),!u&&c.jsx("button",{onClick:G,className:"p-2 bg-white dark:bg-slate-700 rounded-lg text-indigo-600 dark:text-indigo-400 hover:shadow-md transition",children:c.jsx(o9,{size:16})})]}),u&&c.jsxs("div",{className:"flex gap-2 animate-fade-in",children:[c.jsxs("button",{onClick:N,disabled:T||!m,className:"flex-1 bg-indigo-600 text-white py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-1 disabled:opacity-50 hover:bg-indigo-700 transition",children:[T?c.jsx(qn,{size:14,className:"animate-spin"}):c.jsx(Ah,{size:14})," Simpan Perubahan"]}),c.jsx("button",{onClick:()=>{f(!1),_(null)},className:"flex-1 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 py-2 rounded-lg text-xs font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition",children:"Batal"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.darkMode?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,children:t.darkMode?c.jsx(UN,{size:20}):c.jsx(GN,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Tema Gelap"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Tampilan malam hari."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.darkMode,onChange:()=>M("darkMode")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?c.jsx(B9,{size:20}):c.jsx(z9,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>M("soundEnabled")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:c.jsx(t9,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Musik Latar"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Musik santai saat belajar."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.musicEnabled,onChange:()=>M("musicEnabled")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex justify-between mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),c.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:C,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?c.jsx(FV,{size:20}):c.jsx(HV,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>M("funnyNotifications")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:c.jsx(Ns,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>M("confirmActions")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},X9="Fajmuls22",Z9=({category:n,skdStream:e,availablePackages:t,history:s,onSelectPackage:r,onGenerateNew:o,onImportPackage:u,onDeletePackage:f,onBack:m,showToast:p,confirmEnabled:v,onRefresh:_,isLoading:T})=>{z.useEffect(()=>{_()},[]);const[A,k]=z.useState(""),[M,C]=z.useState(!1),[V,N]=z.useState(null),[G,$]=z.useState(!1),se=z.useRef(null),Y=ce=>{const ke=s.filter(fe=>fe.packageId===ce);if(ke.length===0)return{attempts:0,highScore:0,avgScore:0,lastAttemptDate:""};const K=ke.map(fe=>fe.score);return{attempts:ke.length,highScore:Math.max(...K),avgScore:Math.round(K.reduce((fe,Se)=>fe+Se,0)/K.length),lastAttemptDate:ke[0].date}},D=(ce,ke)=>{oe.play("click"),N({type:ce,payload:ke}),k(""),C(!0)},P=()=>{var ce;if(!A){p("Masukkan token akses!","error");return}A===X9?(C(!1),oe.play("success"),(V==null?void 0:V.type)==="GENERATE"?R():(V==null?void 0:V.type)==="IMPORT"?(ce=se.current)==null||ce.click():(V==null?void 0:V.type)==="DELETE"&&O(V.payload)):(oe.play("error"),p("Token salah! Akses ditolak.","error"))},R=async()=>{$(!0);try{await o("verified_client")}catch(ce){console.error(ce)}finally{$(!1)}},O=ce=>{f(ce)},U=(ce,ke)=>{ce.stopPropagation();const K=JSON.stringify(ke,null,2),fe=new Blob([K],{type:"application/json"}),Se=URL.createObjectURL(fe),Oe=document.createElement("a");Oe.href=Se,Oe.download=`${ke.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe),URL.revokeObjectURL(Se),p("Paket Soal berhasil didownload","success")},B=()=>{oe.play("click"),_()},j=t.filter(ce=>ce.category===n&&(!e||ce.skdStream===e)).sort((ce,ke)=>ce.title.localeCompare(ke.title,void 0,{numeric:!0,sensitivity:"base"}));return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[M&&c.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col items-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:c.jsx(w9,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),c.jsx("input",{type:"password",placeholder:"Token Akses...",value:A,onChange:ce=>k(ce.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:ce=>ce.key==="Enter"&&P()}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>C(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),c.jsx("button",{onClick:P,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),c.jsxs("div",{className:"max-w-4xl w-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("button",{onClick:m,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[c.jsx(It,{size:20})," Kembali"]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:["Pilih Paket Soal ",n]}),c.jsx("button",{onClick:B,disabled:T,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:c.jsx(f9,{size:20,className:T?"animate-spin":""})})]})]}),c.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:["Pilih Paket Soal ",n]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[c.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[c.jsx(qO,{size:18,className:"text-slate-400"})," Admin Zone"]}),c.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>D("GENERATE"),disabled:G,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[G?c.jsx(qn,{className:"animate-spin",size:18}):c.jsx(u9,{size:18}),c.jsx("span",{children:"Buat Paket AI"})]}),c.jsxs("button",{onClick:()=>D("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[c.jsx(Hg,{size:18}),c.jsx("span",{children:"Import"})]})]})]}),c.jsx("input",{type:"file",ref:se,className:"hidden",accept:".json",multiple:!0,onChange:ce=>{ce.target.files&&ce.target.files.length>0&&u(ce.target.files),se.current&&(se.current.value="")}})]}),T&&j.length===0?c.jsxs("div",{className:"py-20 text-center text-slate-500",children:[c.jsx(qn,{className:"animate-spin mx-auto mb-2"}),c.jsx("p",{children:"Memuat paket soal terbaru..."})]}):c.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:j.map(ce=>{const ke=Y(ce.id);return c.jsxs("button",{onClick:()=>r(ce),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[ce.isAiGenerated&&c.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:ce.title}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{onClick:K=>U(K,ce),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:c.jsx(DN,{size:18})}),c.jsx("div",{onClick:K=>{K.stopPropagation(),D("DELETE",ce.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:c.jsx(Nl,{size:18})})]})]}),c.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(ma,{size:12})," ",ce.durationMinutes," Menit"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(gr,{size:12})," ",ce.questions.length," Soal"]}),ce.version==="v2"&&c.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),c.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[ke.attempts,"x"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),c.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:ke.highScore})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),c.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:ke.avgScore})]})]})]},ce.id)})})]})]})},e8=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},t8=({answers:n,questions:e,onHome:t,onRetry:s,category:r,details:o})=>{const u=n.filter(M=>M.isCorrect).length;let f=(o==null?void 0:o.total)||(o==null?void 0:o.average)||(o==null?void 0:o.iqScore)||Math.round(u/e.length*100);if(r==="GENERAL"&&!o){const M=n.reduce((C,V)=>C+(V.scoreEarned||0),0);f=Math.round(M/(e.length||1))}const[m,p]=z.useState(""),[v,_]=z.useState(!1),T=n.filter(M=>!M.isCorrect),A=Array.from(new Set(T.map(M=>{var V,N;const C=e.find(G=>G.id===M.questionId);return((V=C==null?void 0:C.metadata)==null?void 0:V.subtest)||((N=C==null?void 0:C.metadata)==null?void 0:N.topic)||"General"}))),k=async()=>{_(!0);try{const M=await aP(A);p(M)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return c.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:c.jsxs("div",{className:"max-w-2xl w-full text-center",children:[c.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:f>=(r==="UTBK"?600:70)?c.jsx(MN,{size:48,className:"text-emerald-500"}):c.jsx(ws,{size:48,className:"text-amber-500"})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[c.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),c.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:f})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[c.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:r==="GENERAL"?"Poin":"Akurasi"}),c.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:r==="GENERAL"?f:`${Math.round(u/e.length*100)}%`})]})]}),r==="UTBK"&&o&&c.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Penalaran Umum:"})," ",c.jsx("b",{children:o.pu})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"PPU:"})," ",c.jsx("b",{children:o.ppu})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"PBM:"})," ",c.jsx("b",{children:o.pbm})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Kuantitatif:"})," ",c.jsx("b",{children:o.pk})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lit. B.Indo:"})," ",c.jsx("b",{children:o.lbi})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lit. B.Inggris:"})," ",c.jsx("b",{children:o.lbe})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Penalaran Math:"})," ",c.jsx("b",{children:o.pm})]})]})]}),A.length>0&&c.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[c.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[c.jsx(fo,{size:20})," Topik Perlu Perbaikan"]}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.slice(0,5).map(M=>c.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:M},M))}),m?c.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[c.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),c.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:c.jsx(e8,{text:m})})]}):c.jsxs("button",{onClick:k,disabled:v,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[v?c.jsx(qn,{className:"animate-spin",size:14}):c.jsx(LN,{size:14}),"Minta Saran Perbaikan AI"]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[c.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),c.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.map((M,C)=>{const V=n.find(G=>G.questionId===M.id),N=V==null?void 0:V.isCorrect;return c.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",C+1]}),N?c.jsx(Ns,{size:16,className:"text-emerald-500"}):c.jsx(Bl,{size:16,className:"text-rose-500"})]}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:M.content})]},C)})})]}),c.jsxs("div",{className:"flex gap-4 w-full",children:[c.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),c.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},WE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},qf=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,FN=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,df=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,n8=n=>{switch(n){case"UTBK":return{icon:Bg,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Gg,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:$s,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:_a,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:PN,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:Sh,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:VN,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:Th,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:gr,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},mr=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},XE=(n,e)=>{const t=e>0?n/e*100:0;return mr(t,"PERCENT").color},ZE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},qN=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,s8=({history:n,onBack:e,onReview:t,username:s,onExport:r,onImport:o,onDelete:u})=>{const[f,m]=z.useState("ALL"),[p,v]=z.useState(null),_=z.useRef(null),T=n.filter(N=>f==="ALL"||N.category===f),A=T.length,k=A>0?Math.round(T.reduce((N,G)=>N+G.score,0)/A):0,M=A>0?Math.max(...T.map(N=>N.score)):0,C=(N,G)=>{N.stopPropagation(),oe.play("click"),v(G)},V=()=>{p&&(u(p),v(null))};return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[p&&c.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:c.jsx(Nl,{size:24})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),c.jsxs("div",{className:"flex gap-3 w-full",children:[c.jsx("button",{onClick:()=>v(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),c.jsx("button",{onClick:V,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:c.jsx(It,{size:20})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),c.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[c.jsx(BN,{size:12})," ",s]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[c.jsx(DN,{size:14})," Backup"]}),c.jsxs("button",{onClick:()=>{var N;return(N=_.current)==null?void 0:N.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[c.jsx(Hg,{size:14})," Restore"]}),c.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:N=>{var G;(G=N.target.files)!=null&&G[0]&&o(N.target.files[0]),_.current&&(_.current.value="")}})]})]}),c.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[c.jsx("button",{onClick:()=>m("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),Hp.map(N=>c.jsx("button",{onClick:()=>m(N.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f===N.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:N.name},N.id))]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[c.jsx(wO,{size:14})," Total Tes"]}),c.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:A})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[c.jsx(M9,{size:14})," Avg Skor"]}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:k})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[c.jsx(MN,{size:14})," Tertinggi"]}),c.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:M})]})]}),c.jsx("div",{className:"space-y-4",children:T.length===0?c.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[c.jsx(au,{size:48,className:"mx-auto mb-4 opacity-20"}),c.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(N=>{const G=n8(N.category),$=G.icon,se=N.questions?N.questions.length:0,Y=N.answers?N.answers.length:0,D=N.answers?N.answers.filter(te=>te.isCorrect).length:0,P=Y-D,R=N.answers?N.answers.reduce((te,xe)=>te+(xe.timeTakenSeconds||0),0):0,O=ZE(R),U=qf(N),B=FN(N),j=df(N);let ce=N.category;N.category==="TPA"?ce="TPA & Bahasa Inggris":N.category==="PSIKOTEST"&&qf(N)?ce="Tes Koran / Pauli":N.category==="PSIKOTEST"&&df(N)?ce="Psikotes (IQ & Logika)":N.category==="KECERMATAN"&&(ce="Tes Kecermatan"),N.packageTitle&&(ce=N.packageTitle);let ke=N.score.toString(),K="SKOR",fe={text:"-",color:"text-slate-500"};if(B){const te=N.details;ke=te.accuracy+"%",K="AKURASI",fe=mr(te.accuracy,"PERCENT")}else if(U){const te=N.details;ke=te.accuracy+"%",K="AKURASI",fe=mr(te.accuracy,"PERCENT")}else if(j){const te=N.details.iqScore||N.score;ke=te.toString(),K="IQ SCORE",fe=mr(te,"IQ")}else{const te=N.maxScore>0?N.score/N.maxScore*100:0;fe=mr(te,"PERCENT")}const Se=fe.color;let Oe=D,be=P,H=0,re=0,ue={val:0,index:0},ne=[];if(B){const te=N.details;Oe=te.totalCorrect,be=te.totalWrong,H=te.averageSpeed,re=te.stability,ne=te.sectionData.map(xe=>xe.correct)}else if(U){const te=N.details;Oe=te.totalCorrect,be=te.totalWrong,H=te.speedPerMinute,re=te.consistencyScore,ne=te.intervalData}if(ne&&ne.length>0){const te=Math.max(...ne),xe=ne.indexOf(te);ue={val:te,index:xe+1}}return c.jsxs("div",{onClick:()=>t(N),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[c.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[N.isAborted&&c.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),N.details&&N.details.passed!==void 0&&c.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${N.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:N.details.passed?"LULUS":"TIDAK LULUS"})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${G.bg} ${G.color} border ${G.border}`,children:c.jsx($,{size:24})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:ce}),N.packageTitle&&N.packageTitle!==ce&&c.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[c.jsx(jN,{size:10})," ",N.packageTitle]}),c.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(eO,{size:12})," ",new Date(N.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),N.skdStream&&c.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:N.skdStream}),B&&N.details.mode&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:qN(N.details.mode)}),c.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[c.jsx(ma,{size:10})," ",O]})]}),U&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),c.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[c.jsx(ma,{size:10})," ",O]})]}),df(N)&&c.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),c.jsxs("div",{className:"text-right shrink-0",children:[c.jsx("div",{className:`text-2xl font-black ${Se}`,children:ke}),c.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:K})]})]}),c.jsxs("div",{className:"mt-3",children:[B||U?c.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),c.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:Oe+be})]}),c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),c.jsxs("span",{className:"font-bold",children:[c.jsx("span",{className:"text-emerald-500",children:Oe})," / ",c.jsx("span",{className:"text-rose-500",children:be})]})]}),c.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),c.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:H})]}),c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),c.jsx("span",{className:"font-black text-amber-500",children:re})]}),c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),c.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${ue.val} at Interval ${ue.index}`,children:[ue.val,c.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",ue.index]})]})]}),c.jsxs("div",{className:"flex flex-col text-center",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),c.jsx("span",{className:`font-black text-[10px] leading-tight ${fe.color}`,children:fe.text})]})]}):c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),c.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[Y," ",c.jsxs("span",{className:"text-slate-400",children:["/ ",se]})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),c.jsxs("span",{className:"font-bold text-emerald-600",children:[D," ",c.jsx("span",{className:"text-slate-400",children:"/"})," ",c.jsx("span",{className:"text-rose-500",children:P})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),c.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:ZE(R)})]}),N.category==="SKD"&&N.details&&c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),c.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",N.details.twk]}),c.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",N.details.tiu]}),c.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",N.details.tkp]})]})]}),N.category==="UTBK"&&N.details&&c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),c.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:N.details.average})]})]}),(U||B)&&ne.length>0&&c.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:ne.map((te,xe)=>{const Ce=Math.max(...ne,1),ut=te/Ce*100;return c.jsx("div",{className:`flex-1 rounded-t-sm ${xe+1===ue.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${ut}%`}},xe)})})]})]})]}),c.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:te=>C(te,N.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:c.jsx(Nl,{size:14})}),c.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:c.jsx(oa,{size:14})})]})]},N.id)})})]})]})},i8=({item:n,onBack:e})=>{if(qf(n)||FN(n)){const t=qf(n),s=n.details;let r=[],o=0,u=0,f=0,m=0,p=0,v="",_={text:"-",color:"text-slate-500"};if(t){const k=s;r=k.intervalData||[],o=k.totalCorrect,u=k.totalWrong,f=k.speedPerMinute,m=k.accuracy,p=k.consistencyScore,v="PAULI / KORAN",_=mr(k.accuracy,"PERCENT")}else{const k=s;r=k.sectionData.map(M=>M.correct),o=k.totalCorrect,u=k.totalWrong,f=k.averageSpeed,m=k.accuracy,p=k.stability,v=qN(k.mode),_=mr(k.accuracy,"PERCENT")}let T=0,A=0;return r.length>0&&(T=Math.max(...r),A=r.indexOf(T)+1),c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[c.jsx(It,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&c.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:c.jsx(ws,{size:32})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",v]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",c.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:o}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),c.jsx("div",{className:"text-3xl font-black text-rose-500",children:u}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),c.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:f}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),c.jsxs("div",{className:`text-3xl font-black ${mr(m,"PERCENT").color}`,children:[m,"%"]}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),c.jsx("div",{className:"text-3xl font-black text-amber-500",children:p}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),c.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",A]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),c.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:r.map((k,M)=>{const C=Math.max(...r,10),V=k/C*100,N=k===T;return c.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[c.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${N?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${V}%`}}),c.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:M+1}),c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",M+1,": ",k]})]},M)})}),c.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",c.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[c.jsx(It,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&c.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),c.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),c.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),c.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),c.jsx("div",{className:`text-3xl font-black ${XE(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),c.jsx("div",{className:`text-3xl font-black ${n.details.tpaScore>=67?"text-emerald-600":"text-rose-500"}`,children:n.details.tpaScore}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 67"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),c.jsx("div",{className:`text-3xl font-black ${n.details.tbiScore>=30?"text-emerald-600":"text-rose-500"}`,children:n.details.tbiScore}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 30"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),c.jsx("div",{className:`text-xl font-black ${n.details.passed?"text-emerald-600":"text-rose-500"}`,children:n.details.passed?"LULUS":"GAGAL"})]})]}),n.category==="UTBK"&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),c.jsxs("div",{className:`text-xl font-black ${XE(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>c.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),c.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),df(n)&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),c.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${mr(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),c.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),c.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(_a,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),c.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var m;const r=n.answers.find(p=>p.questionId===t.id),o=r==null?void 0:r.isCorrect,u=(r==null?void 0:r.scoreEarned)||0;let f="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return u>0?t.tkpPoints?u===5?f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),c.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(m=t.metadata)==null?void 0:m.subtest})]}),c.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${f}`,children:[u>0?c.jsx(Ns,{size:12}):c.jsx(Bl,{size:12}),u," Poin"]})]}),c.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:c.jsx(WE,{text:t.content})}),c.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[c.jsxs("div",{className:`p-3 rounded-lg border ${o?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[c.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(r==null?void 0:r.selectedAnswer)||"Tidak dijawab"]}),!o&&!t.tkpPoints&&c.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[c.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&c.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[c.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),c.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((p,v)=>v.points-p.points).map((p,v)=>c.jsxs("li",{className:p.option===(r==null?void 0:r.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[p.points," Poin: ",p.option]},v))})]})]}),c.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[c.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block mb-1",children:"Pembahasan:"}),c.jsx(WE,{text:t.explanation})]})]},s)})})]})]})})},Op=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},r8=({timeLeft:n,onFinish:e})=>(z.useEffect(()=>{n<=0&&e()},[n,e]),c.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[c.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:c.jsx(I0,{size:48,className:"text-white"})}),c.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),c.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),c.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),c.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),a8=({isOpen:n,onCancel:e,onConfirm:t,stats:s})=>{if(!n)return null;const r=s.unanswered>0||s.doubtful>0;return c.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${r?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`,children:r?c.jsx(zf,{size:32}):c.jsx(Ns,{size:32})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:r?"Yakin Selesai?":"Selesaikan Ujian?"}),r?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left space-y-2 border border-slate-200 dark:border-slate-600",children:[c.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Periksa kembali jawaban Anda:"}),s.unanswered>0&&c.jsxs("div",{className:"flex items-center justify-between text-rose-600 dark:text-rose-400 text-sm font-medium",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Bl,{size:14})," Belum Diisi"]}),c.jsxs("span",{className:"font-bold",children:[s.unanswered," Soal"]})]}),s.doubtful>0&&c.jsxs("div",{className:"flex items-center justify-between text-amber-600 dark:text-amber-400 text-sm font-medium",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(SO,{size:14})," Ragu-ragu"]}),c.jsxs("span",{className:"font-bold",children:[s.doubtful," Soal"]})]})]}):c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Semua ",s.total," soal telah dijawab. Waktu akan dihentikan dan skor akan dihitung."]}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition",children:"Ya, Selesai"}),c.jsx("button",{onClick:e,className:"w-full py-3 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Kembali Mengerjakan"})]})]})})},o8=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:r,isUtbkSimulation:o,category:u,showToast:f,initialState:m,userId:p,skdStream:v,tpaStream:_,packageTitle:T,onSaveAndExit:A})=>{var Ot,un,es;const[k,M]=z.useState((m==null?void 0:m.utbkSubtestIndex)||0),[C,V]=z.useState(!1),[N,G]=z.useState(0),[$,se]=z.useState((m==null?void 0:m.currentIndex)||0),[Y,D]=z.useState((m==null?void 0:m.answerMap)||{}),[P,R]=z.useState(!1),[O,U]=z.useState(!1),[B,j]=z.useState(!1),[ce,ke]=z.useState(!1),[K,fe]=z.useState({unanswered:0,doubtful:0,total:0}),Se=z.useRef(Date.now()),Oe=()=>m!=null&&m.timeLeft?m.timeLeft:o&&Di[0]?Di[0].duration*60:r?6e3:n===Ge.SIMULATION?u==="PSIKOTEST"?2400:u==="TPA"?6e3:3600:0,[be,H]=z.useState(Oe);z.useEffect(()=>{if(!p)return;let ye=v;typeof v=="object"&&v!==null&&(ye=null);let ge=_;typeof _=="object"&&_!==null&&(ge=null);const Ee={uid:p,mode:n,category:u,questions:e,answerMap:Y,timeLeft:be,currentIndex:$,utbkSubtestIndex:k,drillContent:t,skdStream:ye,tpaStream:ge,packageTitle:T,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(Ee))}catch(We){We instanceof TypeError&&We.message.includes("circular")||console.warn("Failed to save session state",We)}},[be,Y,$,k,p,v,_]);const re=()=>{localStorage.removeItem("fajmuls_active_session")},ue=z.useMemo(()=>{if(o){const ye=Di[k].name;return e.filter(ge=>{var Ee,We;return(We=(Ee=ge.metadata)==null?void 0:Ee.subtest)==null?void 0:We.includes(ye)})}return e},[e,o,k]);z.useEffect(()=>{let ye=null;return C&&N>0?ye=setInterval(()=>G(ge=>ge-1),1e3):C&&N===0?V(!1):be>0&&!P&&n===Ge.SIMULATION?ye=setInterval(()=>{H(ge=>(ge<=11&&ge>1&&oe.play("tick"),ge-1))},1e3):be===0&&n===Ge.SIMULATION&&(o?ne():Ce()),()=>clearInterval(ye)},[be,P,C,N,n]);const ne=()=>{if(o)if(k<Di.length-1){oe.play("success");const ye=k+1;M(ye);const ge=Di[ye].duration;H(ge*60),se(0),G(30),V(!0)}else Ce();else Ce()},te=()=>{oe.play("click");const ye=o&&k<Di.length-1?ue:e;let ge=0,Ee=0;ye.forEach(We=>{const wt=Y[We.id];!wt||!wt.selectedAnswer?ge++:wt.isDoubtful&&Ee++}),fe({unanswered:ge,doubtful:Ee,total:ye.length}),ke(!0)},xe=()=>{ke(!1),o&&k<Di.length-1?ne():Ce()},Ce=async()=>{if(p&&!p.startsWith("guest-"))try{await EV(p)}catch{}re(),oe.play("finish"),s(Object.values(Y))},ut=()=>{s(Object.values(Y),void 0,!0)},qe=async()=>{if(!p||p.startsWith("guest-")){f("Fitur simpan ke cloud hanya untuk pengguna login.","error");return}j(!0);let ye=v;typeof v=="object"&&v!==null&&(ye=null);let ge=_;typeof _=="object"&&_!==null&&(ge=null);const Ee={uid:p,mode:n,category:u,questions:e,answerMap:Y,timeLeft:be,currentIndex:$,utbkSubtestIndex:k,drillContent:t,skdStream:ye,tpaStream:ge,packageTitle:T,timestamp:Date.now()};try{await _V(p,Ee),re(),f("Progres tersimpan di cloud! Anda bisa melanjutkannya nanti.","success"),A?A():s(Object.values(Y),void 0,!0)}catch(We){console.error(We),f("Gagal menyimpan ke cloud. Cek koneksi internet.","error")}finally{j(!1)}},Ke=async ye=>{var us,$n,yi,Xs,ds;const ge=ue[$];if(!ge)return;oe.play("click");let Ee=0,We=!1;if(u==="SKD")if(ge.tkpPoints&&ge.tkpPoints.length>0){const Wt=ge.tkpPoints.find(dn=>dn.option===ye);Ee=Wt?Wt.points:0,We=Ee===5}else We=ye===ge.correctAnswer,Ee=We?5:0;else if(u==="UTBK"){We=ye===ge.correctAnswer;const Wt=((us=ge.metadata)==null?void 0:us.difficulty)||"Medium";Ee=We?Wt==="HOTS"||Wt==="Hard"?3:Wt==="Medium"?2:1:0}else if(u==="TPA"){const Wt=((yi=($n=ge.metadata)==null?void 0:$n.subtest)==null?void 0:yi.includes("TBI"))||((ds=(Xs=ge.metadata)==null?void 0:Xs.subtest)==null?void 0:ds.includes("Inggris"));if(_==="PSIKOTEST_KEDINASAN")if(ge.tkpPoints&&ge.tkpPoints.length>0){const dn=ge.tkpPoints.find(Rt=>Rt.option===ye);Ee=dn?dn.points:0,We=Ee===5}else We=ye===ge.correctAnswer,Ee=We?5:0;else We=ye===ge.correctAnswer,Wt?Ee=We?5:0:Ee=We?4:-1}else We=ye===ge.correctAnswer,Ee=We?10:0;let wt="";if(ge.type!=="multiple_choice"&&u==="GENERAL")try{const Wt=await rP(ge.content,ge.correctAnswer,ye);Ee=Wt.score,We=Wt.isCorrect,wt=Wt.feedback}catch{console.error("Grading failed")}const ht=Y[ge.id],nn=(Date.now()-Se.current)/1e3,ks={questionId:ge.id,selectedAnswer:ye,isCorrect:We,scoreEarned:Ee,timeTakenSeconds:((ht==null?void 0:ht.timeTakenSeconds)||0)+nn,isOverthinking:!1,isGuessing:nn<5,aiEvaluation:wt,isDoubtful:(ht==null?void 0:ht.isDoubtful)||!1};D(Wt=>({...Wt,[ge.id]:ks})),Se.current=Date.now()},Ct=()=>{const ye=ue[$];D(ge=>{const Ee=ge[ye.id];return Ee?{...ge,[ye.id]:{...Ee,isDoubtful:!Ee.isDoubtful}}:{...ge,[ye.id]:{questionId:ye.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},ot=ye=>{const ge=Math.floor(ye/3600),Ee=Math.floor(ye%3600/60),We=Math.floor(ye%60);return`${ge>0?ge+":":""}${Ee.toString().padStart(2,"0")}:${We.toString().padStart(2,"0")}`},lt=(ye,ge)=>ye.length===0?null:c.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[c.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:ge}),c.jsx("div",{className:"grid grid-cols-5 gap-2",children:ye.map((Ee,We)=>{const wt=ue.findIndex(ks=>ks.id===Ee.id),ht=Y[Ee.id];let nn="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return ht!=null&&ht.selectedAnswer&&(nn="bg-emerald-500 border-emerald-500 text-white"),ht!=null&&ht.isDoubtful&&(nn="bg-amber-400 border-amber-400 text-white"),wt===$&&(nn+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),c.jsx("button",{onClick:()=>{se(wt),U(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${nn}`,children:wt+1},Ee.id)})})]});if(C)return c.jsx(r8,{timeLeft:N,onFinish:()=>{V(!1)}});if(ue.length===0)return c.jsxs("div",{className:"p-10 text-center",children:[c.jsx(qn,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const nt=ue[$],$e=Y[nt.id];return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[c.jsx(a8,{isOpen:ce,onCancel:()=>ke(!1),onConfirm:xe,stats:K}),P&&c.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[c.jsx(ou,{size:48,className:"mx-auto mb-4 text-indigo-600"}),c.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),c.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[c.jsxs("button",{onClick:()=>R(!1),className:"w-full px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[c.jsx(Hl,{size:20})," Lanjutkan"]}),!(p!=null&&p.startsWith("guest-"))&&c.jsxs("button",{onClick:qe,disabled:B,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[B?c.jsx(qn,{className:"animate-spin"}):c.jsx(YE,{size:20}),"Simpan & Lanjut Nanti"]}),c.jsx("button",{onClick:ut,className:"w-full px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan Lokal)"})]})]})}),c.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[c.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[c.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",$+1]}),c.jsxs("div",{className:"flex items-center gap-2",children:[n===Ge.SIMULATION&&c.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:ot(be)}),c.jsx("button",{onClick:()=>U(!O),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:c.jsx(Tr,{size:20})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:c.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===Ge.DRILL&&t&&c.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[c.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[c.jsx(_a,{size:16})," ",t.topic]}),c.jsx("p",{children:t.summary})]}),c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:o?Di[k].name:((Ot=nt.metadata)==null?void 0:Ot.subtest)||"General"}),((un=nt.metadata)==null?void 0:un.difficulty)==="HOTS"&&c.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[c.jsx(_a,{size:12})," HOTS"]})]}),c.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100",children:c.jsx(Op,{text:nt.content})}),nt.type==="multiple_choice"?c.jsx("div",{className:"space-y-3",children:(es=nt.options)==null?void 0:es.map((ye,ge)=>{var nn;const Ee=String.fromCharCode(65+ge),We=($e==null?void 0:$e.selectedAnswer)===ye;let wt="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",ht="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return We&&(wt="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",ht="bg-indigo-600 text-white"),n!==Ge.SIMULATION&&$e&&((nt.tkpPoints?((nn=nt.tkpPoints.find(us=>us.option===ye))==null?void 0:nn.points)===5:ye===nt.correctAnswer)?(wt="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",ht="bg-emerald-500 text-white"):We&&(wt="border-rose-500 bg-rose-50 dark:bg-rose-900/20",ht="bg-rose-500 text-white")),c.jsxs("button",{onClick:()=>Ke(ye),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${wt}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${ht}`,children:Ee}),c.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-base",children:c.jsx(Op,{text:ye})})]},ge)})}):c.jsxs("div",{children:[" ",c.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:($e==null?void 0:$e.selectedAnswer)||"",onChange:ye=>Ke(ye.target.value)})," "]})]}),n!==Ge.SIMULATION&&$e&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[c.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[c.jsx(LN,{size:20})," Pembahasan"]}),c.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:c.jsx(Op,{text:nt.explanation})})]})]})}),c.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[c.jsxs("button",{onClick:()=>{se(ye=>Math.max(0,ye-1))},disabled:$===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[c.jsx(It,{size:20})," ",c.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[m&&c.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[c.jsx(Ah,{size:12})," Disimpan Otomatis"]}),c.jsxs("button",{onClick:Ct,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${$e!=null&&$e.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[c.jsx("input",{type:"checkbox",checked:($e==null?void 0:$e.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),c.jsx("span",{children:"Ragu-ragu"})]})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),$<ue.length-1?se(ye=>ye+1):te()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[c.jsx("span",{className:"hidden sm:inline",children:$===ue.length-1?o&&k<Di.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),c.jsx(oa,{size:20})]})]})})]}),c.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${O?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[c.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex flex-col gap-3 bg-slate-50 dark:bg-slate-800",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Navigasi Soal"}),c.jsx("button",{onClick:()=>U(!1),className:"md:hidden text-slate-500",children:c.jsx(Bl,{size:24})})]}),!(p!=null&&p.startsWith("guest-"))&&c.jsxs("button",{onClick:qe,disabled:B,className:"w-full flex items-center justify-center gap-2 py-2 bg-emerald-600 text-white rounded-lg font-bold text-xs hover:bg-emerald-700 disabled:opacity-50 transition",children:[B?c.jsx(qn,{size:14,className:"animate-spin"}):c.jsx(YE,{size:14}),"Kerjakan Lagi Nanti (Cloud)"]}),c.jsxs("button",{onClick:ut,className:"w-full flex items-center justify-center gap-2 py-2 border border-rose-200 dark:border-rose-900 text-rose-600 dark:text-rose-400 rounded-lg font-bold text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20 transition",children:[c.jsx(It,{size:14})," Keluar (Simpan Lokal)"]})]}),n===Ge.SIMULATION&&be>0&&c.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),c.jsxs("button",{onClick:()=>R(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[c.jsx(ou,{size:12})," Jeda"]})]}),c.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:ot(be)})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:r?c.jsxs(c.Fragment,{children:[lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):u==="TPA"&&n===Ge.SIMULATION?_==="PSIKOTEST_KEDINASAN"?c.jsxs(c.Fragment,{children:[lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("TIU")}),"TIU - Verbal & Numerik"),lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("Gambar")}),"Tes Logika Gambar"),lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("Kepribadian")}),"Tes Kepribadian")]}):c.jsxs(c.Fragment,{children:[lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("Verbal")}),"TPA - Verbal"),lt(ue.filter(ye=>{var ge,Ee;return(Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("Kuantitatif")}),"TPA - Kuantitatif"),lt(ue.filter(ye=>{var ge,Ee,We,wt;return((Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("Penalaran"))||((wt=(We=ye.metadata)==null?void 0:We.subtest)==null?void 0:wt.includes("Logika"))}),"TPA - Penalaran"),lt(ue.filter(ye=>{var ge,Ee,We,wt;return((Ee=(ge=ye.metadata)==null?void 0:ge.subtest)==null?void 0:Ee.includes("TBI"))||((wt=(We=ye.metadata)==null?void 0:We.subtest)==null?void 0:wt.includes("Inggris"))}),"TBI - Bahasa Inggris")]}):lt(ue,o?Di[k].name:u)}),c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:c.jsx("button",{onClick:te,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),O&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>U(!1)})]})},Jd=10,Gp=60,l8=500,eS=50,c8=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),u8=(n,e,t,s,r)=>{let o=0;return n>=400?o+=40:n>=300?o+=30:n>=200?o+=20:o+=10,t>=99?o+=20:t>=97?o+=15:t>=95?o+=10:o+=5,s<3?o+=20:s<6?o+=15:s<9?o+=10:o+=5,r==="NAIK"?o+=20:r==="STABIL"?o+=15:o+=5,o>=90?"Sangat Disarankan (Konsisten & Tinggi)":o>=75?"Disarankan (Baik)":o>=60?"Cukup (Perlu Latihan)":r==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},d8=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),r=t.reduce((f,m)=>f+m,0)/(t.length||1),u=(s.reduce((f,m)=>f+m,0)/(s.length||1)-r)/r*100;return u>5?"NAIK":u<-10?"TURUN":"STABIL"},f8=({onBack:n,onComplete:e})=>{const[t,s]=z.useState("SETUP"),[r,o]=z.useState([]),[u,f]=z.useState(0),[m,p]=z.useState(0),[v,_]=z.useState(0),[T,A]=z.useState(0),[k,M]=z.useState([]),[C,V]=z.useState(0),[N,G]=z.useState(!1),[$,se]=z.useState(Jd*60),[Y,D]=z.useState(Gp),P=()=>{const be=c8(l8,eS);o(be),f(0),p(0),_(0),A(0),M([]),V(0),se(Jd*60),D(Gp),s("PLAYING"),oe.play("click")},R=z.useCallback(be=>{if(t!=="PLAYING")return;const H=r[u][m],re=r[u][m+1];if(re===void 0){f(xe=>xe+1),p(0);return}const ne=(H+re)%10;be===ne?(_(xe=>xe+1),V(xe=>xe+1)):(A(xe=>xe+1),oe.play("error")),m<eS-2?p(xe=>xe+1):(f(xe=>xe+1),p(0))},[r,u,m,t]);z.useEffect(()=>{const be=H=>{t==="PLAYING"&&H.key>="0"&&H.key<="9"&&R(parseInt(H.key))};return window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)},[t,R]),z.useEffect(()=>{if(t!=="PLAYING")return;const be=setInterval(()=>{se(H=>H<=1?(B(),0):H-1),D(H=>(H<=6&&H>1&&oe.play("tick"),H<=1?(oe.play("success"),U(),Gp):H-1))},1e3);return()=>clearInterval(be)},[t,C]);const O=z.useRef(0);z.useEffect(()=>{O.current=C},[C]);const U=()=>{const be=O.current;M(H=>[...H,be]),V(0),G(!0),setTimeout(()=>G(!1),2e3)},B=(be=!1)=>{const H=O.current;H>0&&M(re=>[...re,H]),s("FINISHED"),be||oe.play("finish")},j=()=>{const be=v+T,H=(Jd*60-$)/60,re=H<.1?.1:H,ue=re>0?Math.round(v/re):0,ne=be>0?v/be*100:0;let te=0;if(k.length>0){const ut=k.reduce((Ke,Ct)=>Ke+Ct,0)/k.length,qe=k.reduce((Ke,Ct)=>Ke+Math.pow(Ct-ut,2),0)/k.length;te=Math.sqrt(qe)}const xe=d8(k),Ce=u8(v,ue,ne,te,xe);return{totalCorrect:v,totalWrong:T,totalAttempts:be,totalColumns:u,speedPerMinute:ue,consistencyScore:parseFloat(te.toFixed(2)),accuracy:Math.round(ne),intervalData:k,interpretation:{verdict:Ce,speedDesc:ue>50?"Sangat Cepat":ue>35?"Cepat":"Sedang",accDesc:ne>98?"Sangat Teliti":ne>92?"Teliti":"Kurang Teliti",stabDesc:xe==="TURUN"?"Menurun (Lelah)":te<4?"Stabil":"Fluktuatif",trend:xe}}},ce=be=>{const H=Math.floor(be/60),re=be%60;return`${H}:${re.toString().padStart(2,"0")}`},ke=()=>{const be=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:be.totalCorrect,maxScore:0,details:be,questions:[],answers:[],isAborted:!0};e(H)};if(t==="SETUP")return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[c.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[c.jsx(ws,{size:64,className:"mx-auto mb-4 relative z-10"}),c.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),c.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),c.jsxs("div",{className:"p-8 space-y-6",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[c.jsxs("p",{className:"flex items-center gap-3",children:[c.jsx(ma,{size:18,className:"text-indigo-500 shrink-0"})," ",c.jsxs("span",{children:[c.jsx("strong",{children:"Durasi:"})," ",Jd," Menit"]})]}),c.jsxs("p",{className:"flex items-center gap-3",children:[c.jsx(ws,{size:18,className:"text-emerald-500 shrink-0"})," ",c.jsxs("span",{children:[c.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),c.jsxs("p",{className:"flex items-center gap-3",children:[c.jsx(Qc,{size:18,className:"text-amber-500 shrink-0"})," ",c.jsxs("span",{children:[c.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),c.jsxs("button",{onClick:P,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[c.jsx(Hl,{size:24,fill:"currentColor"})," Mulai Tes"]}),c.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const be=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:be.totalCorrect,maxScore:0,details:be,questions:[],answers:[]};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),c.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:be.interpretation.verdict})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx(ws,{size:14})," Prestasi (Total)"]}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:be.totalCorrect}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx(ma,{size:14})," Tempo"]}),c.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:be.speedPerMinute}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx(Ns,{size:14})," Ketelitian"]}),c.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:be.totalWrong}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",be.interpretation.accDesc,")"]})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx(Qc,{size:14})," Stabilitas"]}),c.jsx("div",{className:"text-3xl font-black text-amber-500",children:be.consistencyScore}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",be.interpretation.trend,")"]})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[c.jsx(Qc,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),c.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:be.intervalData.map((re,ue)=>{const ne=Math.max(...be.intervalData,1),te=re/ne*100;return c.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${te}%`},children:[c.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:ue+1}),c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:re})]},ue)})}),c.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),c.jsxs("button",{onClick:()=>e(H),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[c.jsx(Ah,{size:20})," Simpan & Keluar"]})]})]})})}const K=r[u]||[],fe=K[m],Se=K[m+1],Oe=[1,2,3,4,5,6,7,8,9,0];return c.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),c.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:ce($)})]}),c.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[c.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),c.jsx("div",{className:"text-xl font-bold text-emerald-600",children:v})]})]}),c.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:c.jsx(ou,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),N&&c.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:c.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[c.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:m>0?K[m-1]:"-"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[c.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:fe}),c.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),c.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:Se!==void 0?Se:"-"})]}),c.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:K[m+2]!==void 0?K[m+2]:"-"})]})}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[c.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Oe.map(be=>c.jsx("button",{onClick:()=>R(be),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:be},be))}),c.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&c.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),c.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),c.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),c.jsx("button",{onClick:ke,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},Bp=10,tS=60,nS=["A","B","C","D","E"],Xn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],sS=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},iS=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...Xn].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((r,o)=>o!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},rS=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>Xn[Math.floor(Math.random()*Xn.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const r=Math.floor(Math.random()*n);let o=Xn[Math.floor(Math.random()*Xn.length)];for(;o===e[r];)o=Xn[Math.floor(Math.random()*Xn.length)];s[r]=o}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=Xn.find(u=>u!==s[0])||"X"));return{left:e,right:s,isSame:t}},aS=()=>{const e=[...Xn].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},oS=()=>{const n=Xn[Math.floor(Math.random()*Xn.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=Xn[Math.floor(Math.random()*Xn.length)];for(;s===n;)s=Xn[Math.floor(Math.random()*Xn.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},h8=({initialMode:n,onBack:e,onComplete:t})=>{var ue;const[s,r]=z.useState(n||"ANGKA"),[o,u]=z.useState(1),[f,m]=z.useState(tS),[p,v]=z.useState(!1),[_,T]=z.useState("PLAYING"),[A,k]=z.useState(null),[M,C]=z.useState(null),[V,N]=z.useState(null),[G,$]=z.useState(null),[se,Y]=z.useState([]),[D,P]=z.useState([]),[R,O]=z.useState(0),[U,B]=z.useState(0),[j,ce]=z.useState(null),ke=z.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(A){const ne=Math.floor(Math.random()*5),te=A.reference.filter((xe,Ce)=>Ce!==ne).sort(()=>.5-Math.random());k({...A,question:te,answer:ne})}else{const ne=iS(s);k(ne)}else if(s==="SAMA_BEDA")C(rS());else if(s==="MATCHING")if(!V)N(aS());else{const ne=Math.floor(Math.random()*5);N({...V,target:V.map[ne],answer:ne})}else s==="GROUPING"&&($(oS()),Y([]))},[s,A,V]),K=z.useCallback(()=>{k(null),N(null),C(null),$(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?k(iS(s)):s==="SAMA_BEDA"?C(rS()):s==="MATCHING"?N(aS()):s==="GROUPING"&&($(oS()),Y([])),m(tS),O(0),B(0)},[s]);z.useEffect(()=>{_==="PLAYING"&&K()},[o,s,_]);const fe=ne=>{if(p)return;let te=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?te=ne===(A==null?void 0:A.answer):s==="SAMA_BEDA"?te=ne===(M==null?void 0:M.isSame):s==="MATCHING"&&(te=ne===(V==null?void 0:V.answer)),te?(O(xe=>xe+1),ce("CORRECT")):(B(xe=>xe+1),ce("WRONG"),oe.play("error")),setTimeout(()=>ce(null),150),ke()},Se=()=>{if(!G)return;let ne=0,te=0;se.forEach(Ce=>{G.grid[Ce]===G.target?ne++:te++});const xe=G.totalCorrect-ne;O(Ce=>Ce+ne),B(Ce=>Ce+te+xe),te===0&&xe===0?(ce("CORRECT"),oe.play("success")):(ce("WRONG"),oe.play("error")),setTimeout(()=>ce(null),200),ke()},Oe=ne=>{oe.play("click"),Y(te=>te.includes(ne)?te.filter(xe=>xe!==ne):[...te,ne])};z.useEffect(()=>{if(p||_==="FINISHED")return;const ne=setInterval(()=>{m(te=>(te<=6&&te>1&&oe.play("tick"),te<=1?(be(),0):te-1))},1e3);return()=>clearInterval(ne)},[p,o,_,R,U]);const be=()=>{P(ne=>{if(ne.find(Ce=>Ce.section===o))return ne;const te={section:o,correct:R,wrong:U},xe=[...ne,te];return o>=Bp?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{u(Ce=>Ce+1),oe.play("success")},0),xe})},H=()=>{const ne=D.length,te=D.reduce((Ot,un)=>Ot+un.correct,0),xe=D.reduce((Ot,un)=>Ot+un.wrong,0),Ce=ne>0?te/ne:0,ut=te+xe,qe=ut>0?te/ut*100:0,Ke=Ce,Ct=D.reduce((Ot,un)=>Ot+Math.pow(un.correct-Ke,2),0)/(ne||1),ot=Math.sqrt(Ct),lt=sS(qe,Ce,ot),nt={mode:s,totalCorrect:te,totalWrong:xe,averageSpeed:parseFloat(Ce.toFixed(1)),accuracy:parseFloat(qe.toFixed(1)),sectionData:D,stability:parseFloat(ot.toFixed(2)),verdict:lt},$e={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(qe),maxScore:100,details:nt,questions:[],answers:[]};oe.play("finish"),t($e)},re=()=>{const ne={section:o,correct:R,wrong:U},te=[...D];te.find($e=>$e.section===o)||te.push(ne);const xe=te.reduce(($e,Ot)=>$e+Ot.correct,0),Ce=te.reduce(($e,Ot)=>$e+Ot.wrong,0),ut=xe/(te.length||1),qe=xe+Ce,Ke=qe>0?xe/qe*100:0,lt={mode:s,totalCorrect:xe,totalWrong:Ce,averageSpeed:parseFloat(ut.toFixed(1)),accuracy:parseFloat(Ke.toFixed(1)),sectionData:te,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},nt={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Ke),maxScore:100,details:lt,questions:[],answers:[],isAborted:!0};t(nt)};if(_==="FINISHED"){const ne=D.reduce((ot,lt)=>ot+lt.correct,0),te=D.reduce((ot,lt)=>ot+lt.wrong,0),xe=ne/D.length,Ce=ne/(ne+te)*100,ut=xe,qe=D.reduce((ot,lt)=>ot+Math.pow(lt.correct-ut,2),0)/D.length,Ke=Math.sqrt(qe),Ct=sS(Ce,xe,Ke);return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[c.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),c.jsx("div",{className:"flex justify-center mb-8",children:c.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:Ct})}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),c.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:xe.toFixed(1)}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),c.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[Ce.toFixed(1),"%"]})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),c.jsx("div",{className:"text-2xl font-black text-amber-500",children:Ke.toFixed(2)}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),c.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:Bp}).map((ot,lt)=>{const nt=D.find(es=>es.section===lt+1),$e=nt?nt.correct:0,Ot=Math.max(...D.map(es=>es.correct),10),un=$e/Ot*100;return c.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[c.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${un}%`},children:c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",lt+1,": ",$e]})}),c.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:lt+1})]},lt)})})]}),c.jsxs("button",{onClick:H,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[c.jsx(Ah,{size:20})," Simpan Hasil"]})]})})}return c.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),c.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[o,"/",Bp]})]}),c.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),c.jsxs("span",{className:`text-lg font-mono font-black ${f<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[f,"s"]})]}),c.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),c.jsx("span",{className:"text-lg font-black text-emerald-600",children:R})]})]}),c.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:c.jsx(ou,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),c.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[j&&c.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${j==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:c.jsx("div",{className:`p-4 rounded-full ${j==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:j==="CORRECT"?c.jsx(Ns,{size:64}):c.jsx(k0,{size:64})})}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&c.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[c.jsx("div",{className:"grid grid-cols-5 gap-1",children:(ue=s==="MATCHING"?V==null?void 0:V.map:A==null?void 0:A.reference)==null?void 0:ue.map((ne,te)=>c.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:c.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:ne})},te))}),c.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:nS.map((ne,te)=>c.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:ne},te))})]}),c.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[c.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?c.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:c.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:V==null?void 0:V.target})}):c.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:A==null?void 0:A.question.map((ne,te)=>c.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:ne},te))})]})]}),s==="SAMA_BEDA"&&M&&c.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[c.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:c.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:M.left.map((ne,te)=>c.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ne},te))})}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:c.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:M.right.map((ne,te)=>c.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ne},te))})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[c.jsxs("button",{onClick:()=>fe(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[c.jsx(Ns,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),c.jsxs("button",{onClick:()=>fe(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[c.jsx(k0,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),c.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&G&&c.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[c.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",c.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:G.target})]}),c.jsx("button",{onClick:Se,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),c.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:G.grid.map((ne,te)=>{const xe=se.includes(te);return c.jsx("button",{onClick:()=>Oe(te),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${xe?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:ne},te)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&c.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:c.jsx("div",{className:"max-w-3xl mx-auto",children:c.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:nS.map((ne,te)=>c.jsx("button",{onClick:()=>fe(te),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:c.jsx("span",{className:"text-xl sm:text-2xl font-black",children:ne})},te))})})}),p&&c.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),c.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),c.jsx("button",{onClick:()=>v(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),c.jsx("button",{onClick:re,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},m8=({targetNumber:n,refreshTrigger:e})=>{const t=z.useRef(null);return z.useEffect(()=>{const s=t.current;if(!s)return;const r=s.getContext("2d");if(!r)return;r.clearRect(0,0,s.width,s.height);const o=document.createElement("canvas");o.width=s.width,o.height=s.height;const u=o.getContext("2d");if(!u)return;u.fillStyle="#000000",u.fillRect(0,0,s.width,s.height),u.fillStyle="#FFFFFF",u.font='bold 160px "Arial Rounded MT Bold", "Helvetica Rounded", Arial, sans-serif',u.textAlign="center",u.textBaseline="middle";const f=(Math.random()-.5)*.2;u.save(),u.translate(s.width/2,s.height/2),u.rotate(f),u.fillText(n.toString(),0,0),u.restore();const p=u.getImageData(0,0,s.width,s.height).data,v=["#E74C3C","#E67E22","#D35400","#C0392B","#F1948A","#E59866","#CD6155"],_=["#27AE60","#2ECC71","#1ABC9C","#16A085","#7DCEA0","#73C6B6","#A9DFBF","#52BE80"],T=s.width/2,A=s.height/2,k=s.width/2-5,M=3500;for(let C=0;C<M;C++){let V=Math.random()*s.width,N=Math.random()*s.height;if(Math.sqrt(Math.pow(V-T,2)+Math.pow(N-A,2))>k)continue;const $=Math.random()*4+1.5,se=(Math.floor(N)*s.width+Math.floor(V))*4,D=p[se]>128?v:_;let P=D[Math.floor(Math.random()*D.length)];Math.random()<.05&&(P="#95A5A6"),r.beginPath(),r.arc(V,N,$,0,Math.PI*2),r.fillStyle=P,r.fill()}},[n,e]),c.jsxs("div",{className:"relative",children:[c.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-50 dark:bg-slate-800 mx-auto border-4 border-slate-200 dark:border-slate-700"}),c.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner pointer-events-none opacity-20 bg-gradient-to-br from-white to-black"})]})},p8=({onBack:n,onComplete:e})=>{const[t,s]=z.useState([]),[r,o]=z.useState(0),[u,f]=z.useState([]),[m,p]=z.useState(""),[v,_]=z.useState(!1);z.useEffect(()=>{const k=Array.from({length:10},()=>({number:Math.floor(Math.random()*90)+10}));s(k)},[]);const T=()=>{oe.play("click");const k=[...u,m];f(k),p(""),r<t.length-1?o(r+1):(oe.play("finish"),_(!0))};if(t.length===0)return c.jsx("div",{className:"p-10 text-center dark:text-white flex items-center justify-center min-h-[50vh]",children:"Menyiapkan Tes..."});if(v){const k=t.filter((G,$)=>{var se;return G.number.toString().trim()===((se=u[$])==null?void 0:se.trim())}).length,M=k>=8,C=t.map((G,$)=>({id:`cb-q-${$}`,type:"short_answer",content:`Ishihara Plate #${$+1}`,correctAnswer:G.number.toString(),explanation:`Plate displayed number ${G.number}`,metadata:{difficulty:"Medium",idealTimeSeconds:10,topic:"Buta Warna",subtest:"Ishihara"}})),V=u.map((G,$)=>({questionId:`cb-q-${$}`,selectedAnswer:G,isCorrect:G.trim()===t[$].number.toString().trim(),scoreEarned:G.trim()===t[$].number.toString().trim()?10:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1})),N={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:k*10,maxScore:100,details:{type:"Ishihara Simulation",passed:M},questions:C,answers:V};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center transition-colors",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl max-w-lg w-full text-center max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${M?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:M?c.jsx(Ns,{size:40}):c.jsx(zf,{size:40})}),c.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:M?"Mata Normal":"Indikasi Buta Warna"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Skor Anda: ",k," dari ",t.length]}),c.jsx("div",{className:"mb-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden text-left",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-300 font-bold",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3",children:"Plate"}),c.jsx("th",{className:"p-3 text-center",children:"Angka"}),c.jsx("th",{className:"p-3 text-center",children:"Jawab"}),c.jsx("th",{className:"p-3 text-center",children:"Status"})]})}),c.jsx("tbody",{children:t.map((G,$)=>{const se=u[$],Y=G.number.toString().trim()===se.trim();return c.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 text-slate-700 dark:text-slate-300",children:[c.jsxs("td",{className:"p-3 font-medium",children:["#",$+1]}),c.jsx("td",{className:"p-3 font-mono text-center",children:G.number}),c.jsx("td",{className:"p-3 font-mono text-center text-slate-600 dark:text-slate-400",children:se||"-"}),c.jsx("td",{className:"p-3 text-center",children:Y?c.jsx(Ns,{size:16,className:"text-emerald-500 inline"}):c.jsx(zf,{size:16,className:"text-rose-500 inline"})})]},$)})})]})}),c.jsx("button",{onClick:()=>e(N),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Simpan & Keluar"}),c.jsx("p",{className:"mt-4 text-[10px] text-slate-400",children:"Hasil ini adalah simulasi. Untuk diagnosis medis, hubungi dokter mata."})]})})}const A=t[r];return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[c.jsx(It,{size:18,className:"mr-2"})," Kembali"]}),c.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[r+1," / ",t.length]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"mb-8 flex justify-center py-4",children:c.jsx(m8,{targetNumber:A.number,refreshTrigger:r})}),c.jsx("p",{className:"mb-4 text-slate-600 dark:text-slate-300 font-medium",children:"Angka berapa yang Anda lihat?"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:m,onChange:k=>p(k.target.value),autoFocus:!0,onKeyDown:k=>k.key==="Enter"&&m&&T()}),c.jsx("button",{onClick:T,disabled:!m,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}),c.jsx("div",{className:"mt-6 flex justify-center",children:c.jsx("button",{onClick:()=>p("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline",children:"Saya tidak melihat angka"})})]})]})})},zg=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},g8=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",C0=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},KN=n=>{switch(n){case"REACTION":return c.jsx(_a,{size:20});case"SEQUENCE":return c.jsx(Tr,{size:20});case"AIM":return c.jsx(fo,{size:20});case"CHIMP":return c.jsx($s,{size:20});case"VISUAL":return c.jsx(Tr,{size:20});case"NUMBER":return c.jsx(Bf,{size:20});case"VERBAL":return c.jsx(Ff,{size:20});case"TYPING":return c.jsx(gr,{size:20});case"BRIDGE":return c.jsx(Hf,{size:20});case"MATCH":return c.jsx(Gf,{size:20});default:return c.jsx(ws,{size:20})}},$N=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},x8=()=>c.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:c.jsx(ws,{size:64})}),y8=({percentile:n,score:e,unit:t,game:s})=>{const u=n/100*300;return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[c.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[c.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),c.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),c.jsx("line",{x1:u,y1:"10",x2:u,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),c.jsx("circle",{cx:u,cy:"10",r:"4",fill:"#ef4444"})]}),c.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),c.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[c.jsx("span",{children:"Bottom 1%"}),c.jsx("span",{children:"Average"}),c.jsx("span",{children:"Top 1%"})]})]})},v8=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const r=zg(t,s),o=g8(r);let u="pts";return(t==="REACTION"||t==="AIM")&&(u="ms"),t==="TYPING"&&(u="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(u="lvl"),c.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(Qc,{className:"text-indigo-500"})," Statistik Anda"]}),c.jsx("button",{onClick:()=>{oe.play("back"),e()},children:c.jsx(HN,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),c.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",c.jsx("span",{className:"text-lg font-medium text-slate-400",children:u})]}),c.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",r,"% orang"]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[c.jsx(y8,{percentile:r,score:s,unit:u,game:t}),c.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:o})]})]}):c.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},b8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState("WAITING"),[r,o]=z.useState(0),[u,f]=z.useState([]),[m,p]=z.useState(0),v=z.useRef(null);z.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=()=>{s("READY");const C=Math.floor(Math.random()*3e3)+2e3;v.current=window.setTimeout(()=>{o(Date.now()),s("GO")},C)},T=()=>{if(t==="WAITING")_();else if(t==="READY")v.current&&clearTimeout(v.current),s("TOO_SOON");else if(t==="GO"){const C=Date.now()-r;p(C);const V=[...u,C];f(V),V.length>=5?(s("FINAL_SCORE"),oe.play("finish")):(s("RESULT"),oe.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},A=u.length>0?Math.round(u.reduce((C,V)=>C+V,0)/u.length):0;let k,M="bg-slate-900";return t==="WAITING"?(k=c.jsxs(c.Fragment,{children:[c.jsx(_a,{size:80,className:"mx-auto mb-6 text-amber-400"}),c.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),c.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",u.length+1," dari 5"]}),c.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),M="bg-slate-800"):t==="READY"?(k=c.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),M="bg-rose-600"):t==="GO"?(k=c.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),M="bg-emerald-500"):t==="RESULT"?(k=c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[m," ms"]}),c.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),M="bg-indigo-600"):t==="FINAL_SCORE"?(k=c.jsxs(c.Fragment,{children:[c.jsx(ws,{size:64,className:"mx-auto mb-4 text-emerald-400"}),c.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),c.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[A," ms"]}),c.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[c.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(A),children:"Simpan Skor"}),c.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{f([]),s("WAITING")},children:"Coba Lagi"})]})]}),M="bg-slate-800"):t==="TOO_SOON"&&(k=c.jsxs(c.Fragment,{children:[c.jsx(x8,{}),c.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),c.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),M="bg-slate-800"),c.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${M}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[c.jsx("button",{onClick:C=>{C.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),k]})},_8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState([]),[r,o]=z.useState([]),[u,f]=z.useState(1),[m,p]=z.useState("START"),[v,_]=z.useState(null),T=async(k,M)=>{p("WATCHING"),o([]);const C=Math.floor(Math.random()*9),V=[...M,C];s(V),await new Promise(N=>setTimeout(N,800));for(let N=0;N<V.length;N++)_(V[N]),oe.play("click"),await new Promise(G=>setTimeout(G,600)),_(null),await new Promise(G=>setTimeout(G,200));p("PLAYING")},A=async k=>{if(m!=="PLAYING")return;_(k),oe.play("tap"),setTimeout(()=>_(null),200);const M=[...r,k];if(o(M),M[M.length-1]!==t[M.length-1]){p("GAMEOVER"),oe.play("error");return}M.length===t.length&&(p("WATCHING"),oe.play("success"),await new Promise(C=>setTimeout(C,800)),f(C=>C+1),T(u+1,t))};return m==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Tr,{size:80,className:"mx-auto mb-6 text-indigo-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),c.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):m==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Tr,{size:64,className:"mx-auto mb-6 text-rose-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:u})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{f(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(Math.max(1,u-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",u]}),c.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:m==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((k,M)=>c.jsx("div",{onClick:()=>A(M),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${v===M?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},M))})]})},T8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState("IDLE"),[r,o]=z.useState(30),[u,f]=z.useState({top:"50%",left:"50%"}),[m,p]=z.useState([]),v=z.useRef(null),[_,T]=z.useState(0),[A,k]=z.useState(0),[M,C]=z.useState(0),[V,N]=z.useState(null),G=()=>{if(!v.current)return;const R=v.current.getBoundingClientRect(),O=96,U=50,B=R.width-O-U,j=R.height-O-U,ce=Math.max(U,Math.random()*B),ke=Math.max(U,Math.random()*j);f({top:`${ke}px`,left:`${ce}px`})},$=()=>{s("PLAYING"),o(30),p([]),T(0),k(0),G()};z.useEffect(()=>{if(t==="PLAYING"&&A>0){const R=setInterval(()=>{T(Date.now()-A)},50);return N(R),()=>clearInterval(R)}},[t,A]);const se=R=>{if(R.stopPropagation(),t!=="PLAYING")return;const O=Date.now();if(A===0){k(O),C(O),o(B=>B-1),G(),oe.play("click");return}const U=O-M;p(B=>[...B,U]),C(O),oe.play("click"),r<=1?(clearInterval(V),s("FINISHED"),oe.play("finish")):(o(B=>B-1),G())},Y=()=>{t==="PLAYING"&&A>0&&oe.play("error")},D=m.length>0?Math.round(m.reduce((R,O)=>R+O,0)/m.length):0,P=m.length>0?Math.round(m.reduce((R,O)=>R+O,0)/m.length):0;return c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:Y,children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),t==="IDLE"&&c.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[c.jsx(fo,{size:80,className:"mx-auto mb-6 text-orange-500"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),c.jsx("button",{onClick:$,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),c.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:r})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),c.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),c.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[P," ms"]})]})]}),c.jsx("div",{ref:v,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:c.jsxs("div",{onMouseDown:se,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:u.top,left:u.left},children:[c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),c.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),c.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&c.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[c.jsx(fo,{size:64,className:"mx-auto mb-4 text-orange-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),c.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),c.jsxs("h1",{className:"text-7xl font-black mb-8",children:[D," ms"]}),c.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),c.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[c.jsx("button",{onClick:()=>n(D),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),c.jsx("button",{onClick:$,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},E8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(4),[r,o]=z.useState([]),[u,f]=z.useState("IDLE"),[m,p]=z.useState(1),[v,_]=z.useState(!1),T=k=>{const C=Array.from({length:40},(N,G)=>G).sort(()=>.5-Math.random()),V=Array.from({length:k},(N,G)=>({id:G+1,pos:C[G],visible:!0}));o(V),p(1),_(!1),f("PLAYING")},A=k=>{u==="PLAYING"&&(k===m?(oe.play("click"),k===1&&_(!0),o(M=>M.map(C=>C.id===k?{...C,visible:!1}:C)),k===r.length?(oe.play("success"),setTimeout(()=>{s(M=>M+1),T(t+1)},500)):p(M=>M+1)):(oe.play("error"),f("GAMEOVER")))};return c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),u==="IDLE"&&c.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[c.jsx($s,{size:80,className:"mx-auto mb-6 text-teal-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),c.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),u==="PLAYING"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),c.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((k,M)=>{const C=r.find(V=>V.pos===M);return!C||!C.visible?c.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},M):c.jsx("button",{onMouseDown:()=>A(C.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${v&&C.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:v&&C.id>1?"":C.id},M)})})]}),u==="GAMEOVER"&&c.jsxs("div",{className:"text-center text-white",children:[c.jsx($s,{size:64,className:"mx-auto mb-4 text-rose-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),c.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[c.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},S8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(3),[u,f]=z.useState(3),[m,p]=z.useState([]),[v,_]=z.useState([]),[T,A]=z.useState([]),[k,M]=z.useState("START"),C=N=>{let G=3;N>2&&(G=4),N>5&&(G=5),N>10&&(G=6),N>20&&(G=7),f(G);const $=Math.min(Math.floor(G*G/2),N+2),se=[];for(;se.length<$;){const Y=Math.floor(Math.random()*(G*G));se.includes(Y)||se.push(Y)}p(se),_([]),A([]),M("SHOWING"),setTimeout(()=>M("PLAYING"),1e3+N*100)},V=N=>{if(k==="PLAYING"&&!(v.includes(N)||T.includes(N)))if(m.includes(N)){oe.play("tap");const G=[...v,N];_(G),G.length===m.length&&(oe.play("success"),setTimeout(()=>{s($=>$+1),C(t+1)},500))}else{oe.play("error");const G=r-1;o(G),A($=>[...$,N]),G<=0&&setTimeout(()=>M("GAMEOVER"),500)}};return k==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Tr,{size:80,className:"mx-auto mb-6 text-sky-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),c.jsx("button",{onClick:()=>{s(1),o(3),C(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):k==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[c.jsx(Tr,{size:64,className:"mx-auto mb-6 text-sky-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{s(1),o(3),C(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[c.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((N,G)=>c.jsx(Eh,{size:24,className:G<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},G))})]}),c.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:u*u}).map((N,G)=>{const $=m.includes(G),se=v.includes(G),Y=T.includes(G);let D="bg-slate-700 hover:bg-slate-600";return k==="SHOWING"&&$&&(D="bg-white shadow-[0_0_15px_white] scale-95"),k==="PLAYING"&&se&&(D="bg-white"),k==="PLAYING"&&Y&&(D="bg-slate-900 border-2 border-rose-900"),c.jsx("div",{onMouseDown:()=>V(G),className:`rounded-lg transition-all duration-200 cursor-pointer ${D}`},G)})})]})},A8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(""),[u,f]=z.useState(""),[m,p]=z.useState("START"),[v,_]=z.useState(0),[T,A]=z.useState(100),k=N=>{let G="";for(let $=0;$<N;$++)G+=Math.floor(Math.random()*10);return G},M=()=>{s(1),C(1)},C=N=>{const G=k(N);o(G),p("SHOWING"),A(100);const $=1e3+N*500;_($),setTimeout(()=>{A(0)},50),setTimeout(()=>{p("INPUT")},$)},V=N=>{N==null||N.preventDefault(),u===r?(oe.play("success"),p("RESULT"),setTimeout(()=>{s(G=>G+1),f(""),C(t+1)},1e3)):(oe.play("error"),p("GAMEOVER"))};return m==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Bf,{size:80,className:"mx-auto mb-6 text-blue-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),c.jsx("button",{onClick:M,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):m==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Bf,{size:64,className:"mx-auto mb-6 text-blue-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),c.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[c.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),c.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:r}),c.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),c.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:u})]}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:M,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),m==="SHOWING"&&c.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[c.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:r}),c.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:c.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${v}ms`,opacity:T>0?1:.2}})})]}),m==="INPUT"&&c.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[c.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),c.jsxs("form",{onSubmit:V,children:[c.jsx("input",{type:"number",autoFocus:!0,value:u,onChange:N=>f(N.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),c.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),m==="RESULT"&&c.jsxs("div",{className:"text-center",children:[c.jsx(Ns,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),c.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},w8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(0),[r,o]=z.useState(3),[u,f]=z.useState(""),[m,p]=z.useState(new Set),[v,_]=z.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],A=()=>{const C=m.size>0&&Math.random()<.4;let V="";if(C){const N=Array.from(m);V=N[Math.floor(Math.random()*N.length)]}else{let N=0;do V=T[Math.floor(Math.random()*T.length)],N++;while(m.has(V)&&N<100)}f(V)},k=C=>{const V=m.has(u);if(C==="SEEN"&&V||C==="NEW"&&!V)s(G=>G+1),C==="NEW"&&p(G=>new Set(G).add(u)),oe.play("click"),A();else{const G=r-1;o(G),oe.play("error"),C==="NEW"&&p($=>new Set($).add(u)),G<=0?_("GAMEOVER"):A()}},M=()=>{s(0),o(3),p(new Set),_("PLAYING"),A()};return v==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Ff,{size:80,className:"mx-auto mb-6 text-purple-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),c.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",c.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",c.jsx("strong",{children:"SUDAH"}),"."]}),c.jsx("button",{onClick:M,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Ff,{size:64,className:"mx-auto mb-6 text-purple-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:M,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[c.jsxs("div",{children:["Skor: ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((C,V)=>c.jsx(Eh,{size:24,className:V<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},V))})]}),c.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:u}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>k("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),c.jsx("button",{onClick:()=>k("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},N8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(""),[r,o]=z.useState(""),[u,f]=z.useState(null),[m,p]=z.useState(0),[v,_]=z.useState(0),[T,A]=z.useState("START");z.useEffect(()=>{const C=_b,V=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(V||"")},[]),z.useEffect(()=>{let C;return T==="PLAYING"&&u&&(C=setInterval(()=>{const N=(Date.now()-u)/1e3;_(Math.floor(N));const G=r.length,$=N/60;$>0&&p(Math.round(G/5/$))},1e3)),()=>clearInterval(C)},[T,u,r]);const k=C=>{const V=C.target.value;if(T==="START"&&(f(Date.now()),A("PLAYING")),o(V),V===t){const N=(Date.now()-(u||Date.now()))/6e4,G=Math.round(t.length/5/N);p(G),A("FINISHED"),oe.play("finish")}else V.length%5===0&&oe.play("tap")},M=()=>{const C=_b,V=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(V||""),o(""),f(null),p(0),_(0),A("START")};return T==="FINISHED"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(gr,{size:64,className:"mx-auto mb-6 text-slate-400"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),c.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[m," ",c.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:M,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(m),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[c.jsxs("div",{children:["WPM: ",c.jsx("span",{className:"font-bold text-emerald-400",children:m})]}),c.jsxs("div",{children:["Time: ",c.jsxs("span",{className:"font-bold text-emerald-400",children:[v,"s"]})]})]}),c.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[c.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((C,V)=>{let N="text-slate-500";return V<r.length&&(N=r[V]===C?"text-white":"text-rose-500 bg-rose-500/20"),c.jsx("span",{className:N,children:C},V)})}),c.jsx("textarea",{value:r,onChange:k,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},k8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(3),[u,f]=z.useState(5),[m,p]=z.useState(4),[v,_]=z.useState([]),[T,A]=z.useState("START"),[k,M]=z.useState(0),[C,V]=z.useState(100),[N,G]=z.useState(1500),$=D=>{const R=4+Math.floor(D/2);f(5),p(R);const O=[];let U=R-1,B=Math.floor(5/2);for(O.push({row:U,col:B});U>0;){U--;const j=[B];B>0&&j.push(B-1),B<4&&j.push(B+1),B=j[Math.floor(Math.random()*j.length)],O.push({row:U,col:B})}_(O)},se=D=>{$(D),A("SHOWING"),V(100);const P=1500;G(P),setTimeout(()=>V(0),50),setTimeout(()=>{A("PLAYING"),M(0)},P)},Y=(D,P)=>{if(T!=="PLAYING")return;const R=v[k];if(D===R.row&&P===R.col){oe.play("click");const O=k+1;M(O),O===v.length&&(oe.play("success"),setTimeout(()=>{s(U=>U+1),se(t+1)},500))}else oe.play("error"),o(O=>O-1),r<=1?A("GAMEOVER"):(A("SHOWING"),V(100),setTimeout(()=>V(0),50),setTimeout(()=>{A("PLAYING"),M(0)},N))};return T==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Hf,{size:80,className:"mx-auto mb-6 text-emerald-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),se(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Hf,{size:64,className:"mx-auto mb-6 text-emerald-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),se(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[c.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((D,P)=>c.jsx(Eh,{size:24,className:P<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},P))})]}),c.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:c.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${C}%`,transitionDuration:`${N}ms`}})}),c.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:c.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,gridTemplateRows:`repeat(${m}, 1fr)`},children:Array.from({length:m}).map((D,P)=>Array.from({length:u}).map((R,O)=>{const U=v.findIndex(ke=>ke.row===P&&ke.col===O),B=U!==-1,j=B&&U<k;let ce="bg-slate-700";return T==="SHOWING"&&B?ce="bg-emerald-400":T==="PLAYING"&&(j?ce="bg-emerald-600":B&&U===k&&(ce="bg-slate-700 active:bg-emerald-400")),c.jsx("div",{onMouseDown:()=>Y(P,O),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${ce} hover:opacity-90`},`${P}-${O}`)}))})}),c.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[c.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),c.jsx(OV,{size:32})]})]})},I8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(5),[u,f]=z.useState([]),[m,p]=z.useState([]),[v,_]=z.useState("START"),[T,A]=z.useState(!1),[k,M]=z.useState(3),C=["","","","","","","","","","","","","","","",""],V=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],N=se=>{const Y=se+2,D=Y*2,P=Math.ceil(Math.sqrt(D));M(P);const R=[...C].sort(()=>Math.random()-.5).slice(0,Y);let O=[];for(let U=0;U<Y;U++){const B=R[U],j=V[U%V.length];O.push({id:U*2,icon:B,flipped:!0,matched:!1,color:j}),O.push({id:U*2+1,icon:B,flipped:!0,matched:!1,color:j})}O=O.sort(()=>Math.random()-.5).map((U,B)=>({...U,id:B})),f(O),_("PREVIEW")},G=()=>{oe.play("click"),f(se=>se.map(Y=>({...Y,flipped:!1}))),_("PLAYING")},$=se=>{if(v!=="PLAYING"||T)return;const Y=u.find(R=>R.id===se);if(!Y||Y.flipped||Y.matched)return;oe.play("click");const D=u.map(R=>R.id===se?{...R,flipped:!0}:R);f(D);const P=[...m,se];if(p(P),P.length===2){A(!0);const R=D.find(U=>U.id===P[0]),O=D.find(U=>U.id===P[1]);R&&O&&R.icon===O.icon?(oe.play("success"),setTimeout(()=>{f(U=>U.map(B=>P.includes(B.id)?{...B,matched:!0}:B)),p([]),A(!1),D.filter(U=>!U.matched&&!P.includes(U.id)).length===0&&setTimeout(()=>{s(U=>U+1),N(t+1)},500)},500)):setTimeout(()=>{oe.play("error"),f(U=>U.map(B=>P.includes(B.id)?{...B,flipped:!1}:B)),p([]),A(!1),o(U=>{const B=U-1;return B<=0&&_("GAMEOVER"),B})},1e3)}};return v==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Gf,{size:80,className:"mx-auto mb-6 text-pink-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),N(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Gf,{size:64,className:"mx-auto mb-6 text-pink-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),N(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(It,{size:24})}),c.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[c.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((se,Y)=>c.jsx(Eh,{size:24,className:Y<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},Y))}),v==="PREVIEW"&&c.jsx("button",{onClick:G,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),c.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${k}, minmax(0, 1fr))`},children:u.map(se=>c.jsx("div",{onClick:()=>$(se.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${se.flipped||se.matched?`${se.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:se.flipped||se.matched?se.icon:""},se.id))})]})},C8=({username:n,history:e})=>{const[t,s]=z.useState({}),[r,o]=z.useState(!0),[u,f]=z.useState(!0),m=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];z.useEffect(()=>{(async()=>{if(!u)return;o(!0);const _={};await Promise.all(m.map(async T=>{try{const A=await NV(T);_[T]=A}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),o(!1)})()},[u]);const p=v=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===v);return v==="REACTION"||v==="AIM"?_.sort((T,A)=>T.score-A.score):_.sort((T,A)=>A.score-T.score),_.slice(0,5).map(T=>{const A=T.details;return{name:n,score:T.score,unit:(A==null?void 0:A.unit)||""}})};return c.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(kl,{className:"text-amber-500"})," Leaderboard"]}),c.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[c.jsxs("button",{onClick:()=>f(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[c.jsx(CO,{size:14,className:"inline mr-1"})," Global"]}),c.jsxs("button",{onClick:()=>f(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[c.jsx(O9,{size:14,className:"inline mr-1"})," Personal"]})]})]}),r&&u?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[c.jsx(qn,{size:40,className:"animate-spin mb-4 text-indigo-500"}),c.jsx("p",{children:"Memuat Data Global Rank..."})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(v=>{let _=[];u?_=t[v]||[]:_=p(v);const T=C0(v);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[c.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[c.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:KN(v)}),c.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:$N(v)})]}),c.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((A,k)=>c.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${k===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`font-bold w-4 text-center ${k===0?"text-amber-500":k===1?"text-slate-400":k===2?"text-orange-700":"text-slate-500"}`,children:k+1}),c.jsxs("span",{className:`font-medium truncate max-w-[120px] ${A.username===n||A.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[A.name||A.username," ",A.username===n||A.name===n?"(You)":""]})]}),c.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[A.score,c.jsx("span",{className:"text-xs text-slate-400 ml-1",children:A.unit})]})]},k)):c.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},v)})})]})},R8=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[c.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:c.jsx(au,{size:32,className:"text-slate-400"})}),c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):c.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[c.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[c.jsx(ws,{className:"text-indigo-500"})," Recent Activity"]}),c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),c.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const r=s.game,o=t.score,u=s.unit||"",f=zg(r,o);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[c.jsx("td",{className:"p-5",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`p-2 rounded-xl ${C0(r)}`,children:KN(r)}),c.jsx("span",{className:`font-bold text-base ${C0(r).split(" ")[0]}`,children:$N(r)})]})}),c.jsx("td",{className:"p-5",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),c.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),c.jsx("td",{className:"p-5 text-right",children:c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[o,u]}),c.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${f>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",f,"%"]})]})})]},t.id)})})]})})})]})},M8=({onBack:n,username:e,history:t,onComplete:s,isGuest:r,initialMode:o,initialTab:u})=>{const[f,m]=z.useState("MENU"),[p,v]=z.useState(u||"DASHBOARD");z.useEffect(()=>{o&&m(o)},[o]),z.useEffect(()=>{u&&v(u)},[u]);const[_,T]=z.useState(!1),[A,k]=z.useState("REACTION"),M=async(N,G)=>{let $="pts";(G==="REACTION"||G==="AIM")&&($="ms"),(G==="SEQUENCE"||G==="NUMBER"||G==="CHIMP"||G==="VISUAL"||G==="BRIDGE"||G==="MATCH")&&($="lvl"),G==="TYPING"&&($="wpm"),r||wV(G,N,e,$).catch(Y=>console.error("Cloud save failed",Y));const se={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:N,maxScore:0,details:{game:G,unit:$},questions:[],answers:[]};s(se),m("MENU")},C=N=>{const G=t.filter(Y=>Y.category!=="BENCHMARK"||!Y.details?!1:Y.details.game===N).map(Y=>{const D=Y.details;return{id:Y.id,game:D.game,score:Y.score,unit:D.unit,date:Y.date}});if(G.length===0)return{best:null,percentile:0};let $;N==="REACTION"||N==="AIM"?$=Math.min(...G.map(Y=>Y.score)):$=Math.max(...G.map(Y=>Y.score));const se=zg(N,$);return{best:$,percentile:se}};if(f!=="MENU")switch(f){case"REACTION":return c.jsx(b8,{onFinish:N=>M(N,"REACTION"),onExit:()=>m("MENU")});case"SEQUENCE":return c.jsx(_8,{onFinish:N=>M(N,"SEQUENCE"),onExit:()=>m("MENU")});case"AIM":return c.jsx(T8,{onFinish:N=>M(N,"AIM"),onExit:()=>m("MENU")});case"CHIMP":return c.jsx(E8,{onFinish:N=>M(N,"CHIMP"),onExit:()=>m("MENU")});case"VISUAL":return c.jsx(S8,{onFinish:N=>M(N,"VISUAL"),onExit:()=>m("MENU")});case"NUMBER":return c.jsx(A8,{onFinish:N=>M(N,"NUMBER"),onExit:()=>m("MENU")});case"VERBAL":return c.jsx(w8,{onFinish:N=>M(N,"VERBAL"),onExit:()=>m("MENU")});case"TYPING":return c.jsx(N8,{onFinish:N=>M(N,"TYPING"),onExit:()=>m("MENU")});case"BRIDGE":return c.jsx(k8,{onFinish:N=>M(N,"BRIDGE"),onExit:()=>m("MENU")});case"MATCH":return c.jsx(I8,{onFinish:N=>M(N,"MATCH"),onExit:()=>m("MENU")});default:return m("MENU"),null}const V=({game:N,title:G,desc:$,icon:se,colorClass:Y,btnColorClass:D})=>{const{best:P,percentile:R}=C(N);let O="pts";return(N==="REACTION"||N==="AIM")&&(O="ms"),N==="TYPING"&&(O="wpm"),(N==="SEQUENCE"||N==="NUMBER"||N==="CHIMP"||N==="VISUAL"||N==="BRIDGE"||N==="MATCH")&&(O="lvl"),c.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[c.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${Y}`}),c.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[c.jsx("div",{className:`p-4 rounded-2xl ${Y} bg-opacity-10 text-opacity-100 shrink-0`,children:c.jsx("div",{className:`${Y.replace("bg-","text-")}`,children:se})}),c.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:G}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:$}),c.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${Y}`,style:{width:`${R}%`}})}),c.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[c.jsxs("span",{children:["Best: ",P!==null?`${P} ${O}`:"-"]}),c.jsx("span",{children:R>0?`Top ${R}%`:"-"})]})]}),c.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[c.jsxs("button",{onClick:U=>{U.stopPropagation(),oe.play("click"),m(N)},className:`flex-1 sm:flex-none px-6 py-2.5 ${D} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[c.jsx(Hl,{size:16,fill:"currentColor"})," MAIN"]}),c.jsxs("button",{onClick:U=>{U.stopPropagation(),oe.play("click"),k(N),T(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[c.jsx(Qc,{size:14})," Stats"]})]})]})]})};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:c.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[c.jsx(v8,{isOpen:_,onClose:()=>T(!1),game:A,bestScore:C(A).best}),c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:c.jsxs("button",{onClick:()=>{oe.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[c.jsx(It,{size:20,className:"mr-2"})," Menu Utama"]})}),c.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[c.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[c.jsx(ws,{className:"text-rose-500",size:40})," Human Benchmark"]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",c.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),r&&c.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),c.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>v("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${p==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),c.jsx("button",{onClick:()=>v("RANKING"),className:`pb-3 px-4 font-bold transition-all ${p==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),p==="DASHBOARD"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[c.jsx(V,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:c.jsx(_a,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),c.jsx(V,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:c.jsx(Tr,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),c.jsx(V,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:c.jsx(fo,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),c.jsx(V,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:c.jsx($s,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),c.jsx(V,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:c.jsx(Tr,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),c.jsx(V,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:c.jsx(Bf,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),c.jsx(V,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:c.jsx(Ff,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),c.jsx(V,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:c.jsx(gr,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),c.jsx(V,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:c.jsx(Hf,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),c.jsx(V,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:c.jsx(Gf,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),c.jsx(R8,{history:t})]}):c.jsx(C8,{username:e,history:t})]})})},Qd=[{id:"utbk",label:"UTBK SNBT",type:"UTBK",sub:"General",mode:"SINGLE",color:"bg-rose-500",description:"Ranking berdasarkan skor IRT rata-rata."},{id:"skd_combined",label:"SKD CPNS & Kedinasan",type:"SKD",mode:"SPLIT_SKD",color:"bg-amber-500",description:"Ranking jalur CPNS Umum dan Sekolah Kedinasan."},{id:"tpa_combined",label:"Seleksi Lanjutan I PKN STAN",type:"TPA",mode:"SPLIT_TPA",color:"bg-blue-600",description:"Ranking TPA/TBI dan Psikotes Kedinasan."},{id:"psikotest",label:"Tes Koran & IQ",type:"PSIKOTEST",sub:"General",mode:"SINGLE",color:"bg-purple-500",description:"Ranking berdasarkan estimasi IQ & Tes Pauli."},{id:"kecermatan_combined",label:"Tes Kecermatan",type:"KECERMATAN",mode:"SPLIT_KECERMATAN",color:"bg-emerald-600",description:"Ranking ketelitian di berbagai mode tes."},{id:"benchmark",label:"Human Benchmark",type:"BENCHMARK",mode:"BENCHMARK",color:"bg-slate-800",description:"Ranking game kognitif khusus."}],D8=({rank:n})=>n===1?c.jsx(pO,{size:24,className:"text-amber-400 fill-amber-400"}):n===2?c.jsx(JE,{size:24,className:"text-slate-400 fill-slate-400"}):n===3?c.jsx(JE,{size:24,className:"text-orange-400 fill-orange-400"}):c.jsx("span",{className:"font-black text-slate-400 text-lg w-6 text-center",children:n}),li=({title:n,data:e,currentUserId:t,colorClass:s,compact:r})=>e.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center h-full min-h-[200px]",children:[c.jsx("div",{className:`p-3 rounded-full ${s.replace("bg-","bg-opacity-10 text-")} mb-3`,children:c.jsx(kl,{size:24})}),c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:n}),c.jsx("p",{className:"text-xs text-slate-500",children:"Belum ada data ranking."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[c.jsx("div",{className:`p-4 border-b border-slate-100 dark:border-slate-700 ${s} bg-opacity-10`,children:c.jsxs("h3",{className:`font-bold ${s.replace("bg-","text-")} flex items-center gap-2`,children:[c.jsx(kl,{size:18})," ",n]})}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-[500px] p-2 scrollbar-hide",children:c.jsx("div",{className:"space-y-2",children:e.map((o,u)=>{const f=u+1,m=t===o.uid;return c.jsxs("div",{className:`flex items-center p-3 rounded-xl border transition-all ${m?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 shadow-sm":"bg-white dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[c.jsx("div",{className:"w-8 shrink-0 flex justify-center mr-2",children:c.jsx(D8,{rank:f})}),c.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-500 dark:text-slate-400 mr-3 text-xs shrink-0",children:o.username[0].toUpperCase()}),c.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[c.jsxs("div",{className:`font-bold text-sm truncate ${m?"text-indigo-700 dark:text-indigo-300":"text-slate-800 dark:text-white"}`,children:[o.username," ",m&&"(You)"]}),!r&&o.packageName&&c.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-0.5",children:[c.jsx(jN,{size:10})," ",o.packageName]})]}),c.jsx("div",{className:"text-right",children:c.jsx("div",{className:`font-black ${r?"text-sm":"text-lg"} ${f<=3?"text-slate-800 dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:o.score})})]},u)})})})]}),P8=({onBack:n,userProfile:e,onOpenHumanBenchmark:t})=>{const[s,r]=z.useState("utbk"),[o,u]=z.useState([]),[f,m]=z.useState({}),[p,v]=z.useState(!1),[_,T]=z.useState(!1),A=Qd.find(V=>V.id===s)||Qd[0];z.useEffect(()=>{(async()=>{if(A.mode!=="BENCHMARK"){v(!0),u([]),m({});try{if(A.mode==="SINGLE"){const N=await il(A.type,A.sub||"General");u(N)}else if(A.mode==="SPLIT_SKD"){const[N,G]=await Promise.all([il("SKD","CPNS"),il("SKD","KEDINASAN")]);m({CPNS:N,KEDINASAN:G})}else if(A.mode==="SPLIT_TPA"){const[N,G]=await Promise.all([il("TPA","TPA_TBI"),il("TPA","PSIKOTEST_KEDINASAN")]);m({TPA_TBI:N,PSIKOTEST_KEDINASAN:G})}else if(A.mode==="SPLIT_KECERMATAN"){const N=["ANGKA","HURUF","SIMBOL_HILANG","SAMA_BEDA","MATCHING","GROUPING"],G=N.map(Y=>il("KECERMATAN",Y)),$=await Promise.all(G),se={};N.forEach((Y,D)=>{se[Y]=$[D]}),m(se)}}catch(N){console.error("Error fetching leaderboard",N)}finally{v(!1)}}})()},[s]);const k=V=>{oe.play("click"),r(V),T(!1)},C=(()=>{if(!(e!=null&&e.uid)||A.mode!=="SINGLE")return null;const V=o.findIndex(N=>N.uid===e.uid);return V!==-1?{rank:V+1,data:o[V]}:null})();return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row transition-colors h-screen overflow-hidden",children:[c.jsxs("div",{className:"hidden md:flex w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex-col shrink-0 z-20",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[c.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition text-slate-500 dark:text-slate-400",children:c.jsx(It,{size:20})}),c.jsxs("h2",{className:"font-black text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(kl,{className:"text-amber-500",size:20})," Global Rank"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:Qd.map(V=>c.jsxs("button",{onClick:()=>k(V.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all text-left ${s===V.id?`${V.color} text-white shadow-md`:"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${s===V.id?"bg-white":V.color}`}),V.label]},V.id))})]}),c.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 z-30 sticky top-0",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 font-bold text-sm",children:[c.jsx(It,{size:18,className:"mr-1"})," Menu"]}),c.jsxs("div",{className:"text-sm font-black text-slate-800 dark:text-white flex items-center gap-1",children:[c.jsx(kl,{size:16,className:"text-amber-500"})," Global Leaderboard"]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>T(!_),className:"w-full flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700 rounded-xl font-bold text-slate-700 dark:text-white",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${A.color}`}),A.label]}),c.jsx(rO,{size:18,className:`transition-transform ${_?"rotate-180":""}`})]}),_&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-down max-h-[60vh] overflow-y-auto",children:Qd.map(V=>c.jsxs("button",{onClick:()=>k(V.id),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-bold transition-all text-left border-b border-slate-50 dark:border-slate-700 last:border-0 ${s===V.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${V.color}`}),V.label]},V.id))})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col h-full relative overflow-hidden bg-slate-50 dark:bg-slate-900",onClick:()=>T(!1),children:[c.jsxs("div",{className:"p-6 pb-4 hidden md:block",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A.label}),c.jsx("p",{className:"text-slate-500 text-sm",children:A.description})]}),p&&c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[c.jsx(qn,{className:"animate-spin text-indigo-600 mb-4",size:40}),c.jsx("p",{className:"text-slate-500 font-medium",children:"Memuat data ranking..."})]}),!p&&c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-24 scrollbar-hide",children:[A.mode==="BENCHMARK"&&c.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 max-w-md w-full",children:[c.jsx(ws,{size:64,className:"mx-auto mb-6 text-indigo-500 animate-bounce-slow"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Human Benchmark"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Peringkat untuk game kognitif (Reaction Time, Memory, dll) tersedia di dashboard khusus."}),c.jsxs("button",{onClick:()=>{oe.play("click"),t()},className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg",children:[c.jsx(yO,{size:20})," Buka Dashboard"]})]})}),A.mode==="SINGLE"&&c.jsx("div",{className:"max-w-3xl mx-auto",children:c.jsx(li,{title:`Ranking ${A.label}`,data:o,currentUserId:e==null?void 0:e.uid,colorClass:A.color})}),A.mode==="SPLIT_SKD"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[c.jsx(li,{title:"SKD CPNS Umum",data:f.CPNS||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-amber-500"}),c.jsx(li,{title:"SKD Kedinasan",data:f.KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-orange-500"})]}),A.mode==="SPLIT_TPA"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[c.jsx(li,{title:"TPA & TBI (Standar)",data:f.TPA_TBI||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-600"}),c.jsx(li,{title:"Psikotes Kedinasan",data:f.PSIKOTEST_KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-purple-600"})]}),A.mode==="SPLIT_KECERMATAN"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:[c.jsx(li,{title:"Angka Hilang",data:f.ANGKA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-emerald-500",compact:!0}),c.jsx(li,{title:"Huruf Hilang",data:f.HURUF||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-teal-500",compact:!0}),c.jsx(li,{title:"Simbol Hilang",data:f.SIMBOL_HILANG||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-cyan-500",compact:!0}),c.jsx(li,{title:"Sama Beda Simbol",data:f.SAMA_BEDA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-500",compact:!0}),c.jsx(li,{title:"Matching",data:f.MATCHING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-indigo-500",compact:!0}),c.jsx(li,{title:"Grouping",data:f.GROUPING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-violet-500",compact:!0})]})]}),C&&A.mode==="SINGLE"&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 shadow-[0_-5px_20px_rgba(0,0,0,0.05)] z-30 animate-slide-up",children:c.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Rank"}),c.jsxs("div",{className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black px-3 py-1 rounded-lg",children:["#",C.rank]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Score"}),c.jsx("div",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:C.data.score})]})]})})]})]})},L8=({user:n})=>{var s,r;const[e,t]=z.useState(!1);return z.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?c.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):c.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:[" ",((r=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:r.toUpperCase())||"T"," "]})},YN=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},U8=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",r=e==="success"?c.jsx(Ns,{size:20}):e==="error"?c.jsx(zf,{size:20}):c.jsx(jO,{size:20});return z.useEffect(()=>{const o=setTimeout(t,3e3);return()=>clearTimeout(o)},[t]),c.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[" ",r," ",c.jsx("span",{className:"font-bold text-sm",children:n})," ",c.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:c.jsx(Bl,{size:18})})," "]})},j8=({session:n,onResume:e,onDiscard:t})=>{const s=Math.round(Object.keys(n.answerMap).length/n.questions.length*100);return c.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:[" ",c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[" ",c.jsxs("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:[" ",c.jsx(au,{size:32})," "]})," ",c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Tes Belum Selesai"})," ",c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:[" Ditemukan sesi ",c.jsx("b",{children:n.packageTitle||n.category})," yang belum diselesaikan. Ingin melanjutkan? "]})," ",c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left",children:[" ",c.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",c.jsx("span",{children:"Progress"})," ",c.jsxs("span",{children:[s,"%"]})," "]})," ",c.jsxs("div",{className:"w-full bg-slate-200 dark:bg-slate-600 h-2 rounded-full overflow-hidden",children:[" ",c.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s}%`}})," "]})," "]})," ",c.jsxs("div",{className:"flex flex-col gap-3",children:[" ",c.jsxs("button",{onClick:e,className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" ",c.jsx(Hl,{size:20})," Lanjutkan Tes "]})," ",c.jsxs("button",{onClick:t,className:"w-full py-3.5 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition flex items-center justify-center gap-2",children:[" ",c.jsx(Nl,{size:20})," Hapus & Menu Utama "]})," "]})," "]})," "]})},V8=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[" ",c.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"})," ",c.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"})," ",c.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"})," ",c.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})," "]}),O8=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:[" ",c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[" ",t&&c.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[" ",c.jsx(qn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"})," ",c.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})," "]})," ",c.jsxs("div",{className:"mb-8 flex justify-center",children:[" ",c.jsx("img",{src:ff,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})," "]})," ",c.jsxs("div",{className:"text-center mb-8",children:[" ",c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"})," ",c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})," "]})," ",c.jsxs("div",{className:"space-y-4",children:[" ",c.jsxs("button",{onClick:n,className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[" ",c.jsx("div",{className:"absolute left-4",children:c.jsx(V8,{})})," ",c.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})," "]})," ",c.jsxs("div",{className:"relative flex py-2 items-center",children:[" ",c.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," ",c.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"})," ",c.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," "]})," ",c.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" Masuk sebagai Tamu ",c.jsx(oa,{size:20})," "]})," ",c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" *Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard. "})," "]})," "]})," "]}),G8=({onSubmit:n,isLoading:e})=>{const[t,s]=z.useState(""),[r,o]=z.useState(""),u=f=>{if(f.preventDefault(),t.length<3){o("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){o("Hanya huruf, angka, dan underscore (_).");return}n(t)};return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:[" ",c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[" ",c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"})," ",c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."})," ",c.jsxs("form",{onSubmit:u,children:[" ",c.jsxs("div",{className:"mb-4",children:[" ",c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"})," ",c.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"Username_Unik",value:t,onChange:f=>{s(f.target.value.replace(/\s/g,"")),o("")},autoFocus:!0})," ",r&&c.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:r})," "]})," ",c.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[" ",e?c.jsx(qn,{className:"animate-spin"}):c.jsx(Ns,{size:20})," Simpan & Lanjut "]})," "]})," "]})," "]})},B8=({result:n,feature:e,onBack:t})=>c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:c.jsxs("div",{className:"max-w-3xl w-full",children:[c.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[c.jsx(It,{size:18})," Kembali"]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[c.jsx(Th,{size:28,className:"text-indigo-600"})," Hasil ",e]}),c.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:c.jsx(YN,{text:n})})]})]})}),H8=({questions:n,onComplete:e})=>{const[t,s]=z.useState(0),[r,o]=z.useState(""),[u,f]=z.useState(null),[m,p]=z.useState(!1),[v,_]=z.useState([]),T=n[t],A=async()=>{if(r.trim()){p(!0);try{const M=await oP(T.content,r);f(M)}catch{alert("Gagal evaluasi.")}finally{p(!1)}}},k=()=>{const M={questionId:T.id,selectedAnswer:r,isCorrect:!0,scoreEarned:(u==null?void 0:u.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:u||void 0},C=[...v,M];_(C),o(""),f(null),t<n.length-1?s(t+1):e(C)};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),u?c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",u.score,"/100"]}),c.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:u.toneAnalysis})]}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[c.jsx("b",{children:"Feedback:"})," ",u.feedback]}),c.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[c.jsx("b",{children:"Saran Jawaban:"})," ",u.improvedAnswer]})]}),c.jsx("button",{onClick:k,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):c.jsxs(c.Fragment,{children:[c.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:r,onChange:M=>o(M.target.value)}),c.jsxs("button",{onClick:A,disabled:m||!r,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[m?c.jsx(qn,{className:"animate-spin"}):c.jsx(Sh,{size:18})," Submit Jawaban"]})]})]})})},z8=({flashcards:n,onFinish:e})=>{const[t,s]=z.useState(0),r=o=>{t<n.length-1?s(t+1):e()};return n.length===0?c.jsx("div",{children:"No Flashcards"}):c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[c.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:c.jsx(It,{size:20})}),c.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),c.jsx($9,{data:n[t],onNext:r})]})},F8=({topic:n,onFinish:e})=>{const[t,s]=z.useState(""),[r,o]=z.useState(null),[u,f]=z.useState(!1),m=async()=>{f(!0);try{const p=await lP(n,t);o(p)}catch{alert("Error")}finally{f(!1)}};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",c.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun)."]}),r?c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsx("div",{className:"flex items-center gap-2 mb-4",children:c.jsxs("div",{className:`text-2xl font-bold ${r.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[r.understandingScore,"/100"]})}),c.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[c.jsxs("p",{children:[c.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",r.simplificationQuality]}),c.jsxs("p",{children:[c.jsx("b",{children:"Konsep yang Terlewat:"})," ",r.missingConcepts.join(", ")||"Tidak ada"]}),c.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[c.jsx("b",{children:"Koreksi / Saran:"})," ",r.correction]})]})]}),c.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):c.jsxs(c.Fragment,{children:[c.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:p=>s(p.target.value)}),c.jsx("button",{onClick:m,disabled:u||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:u?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},q8=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,r]=z.useState(0);return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"flex justify-center mb-8",children:t.map((o,u)=>c.jsxs("div",{className:`flex items-center ${u<t.length-1?"w-full":""}`,children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${u<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:o[0]}),u<t.length-1&&c.jsx("div",{className:`h-1 flex-1 ${u<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},o))}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),c.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Lakukan tahap ",t[s],' untuk materi "',n,'".']}),c.jsx("button",{onClick:()=>{s<4?r(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},K8=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:r,onStartTesKoran:o,onStartTesKecermatan:u,onGeneralInputSubmit:f,generalInput:m,setGeneralInput:p,isReadingMaterial:v,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:A,weakTopicsCount:k,loading:M,skdStream:C,onSkdStreamSelect:V,onHistory:N,onStartGeneralSession:G,onStartSkripsiSession:$,username:se,isDarkMode:Y,onToggleDarkMode:D,tpaStream:P,onTpaStreamSelect:R}=n,[O,U]=z.useState(""),[B,j]=z.useState(null),[ce,ke]=z.useState("MEDIUM"),[K,fe]=z.useState("MEDIUM"),[Se,Oe]=z.useState(!1),be=z.useRef(null),[H,re]=z.useState(""),[ue,ne]=z.useState(5),[te,xe]=z.useState("Medium"),Ce=Ke=>{var ot;const Ct=(ot=Ke.target.files)==null?void 0:ot[0];if(Ct){if(Ct.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}j(Ct.name),U(""),Oe(!0);const lt=new FileReader;lt.onload=nt=>{var Ot;const $e=((Ot=nt.target)==null?void 0:Ot.result).split(",")[1];setTimeout(()=>{p&&p({type:"pdf",content:$e,title:Ct.name,lengthPreference:ce,difficultyPreference:K}),Oe(!1)},800)},lt.readAsDataURL(Ct)}},ut=()=>{(m==null?void 0:m.type)==="pdf"?f({...m,lengthPreference:ce,difficultyPreference:K}):O?f({type:"text",content:O,title:"Input Manual",lengthPreference:ce,difficultyPreference:K}):alert("Mohon masukkan teks atau upload PDF.")},qe=Ke=>{const Ct=Ke.filter(ot=>ot.toLowerCase().includes(H.toLowerCase()));return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),c.jsxs("div",{className:"mb-4 relative",children:[c.jsx(uf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{type:"text",placeholder:"Cari topik...",value:H,onChange:ot=>re(ot.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Ct.length>0?Ct.map(ot=>c.jsx("button",{onClick:()=>{oe.play("tap"),T(ot)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${A===ot?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:ot},ot)):c.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),A&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&c.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[c.jsxs("div",{className:"flex-1 w-full",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),c.jsxs("select",{value:ue,onChange:ot=>ne(Number(ot.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[c.jsx("option",{value:"5",children:"5 Soal"}),c.jsx("option",{value:"10",children:"10 Soal"}),c.jsx("option",{value:"15",children:"15 Soal"}),c.jsx("option",{value:"20",children:"20 Soal"})]})]}),c.jsxs("div",{className:"flex-1 w-full",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),c.jsxs("select",{value:te,onChange:ot=>xe(ot.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[c.jsx("option",{value:"Easy",children:"Mudah"}),c.jsx("option",{value:"Medium",children:"Sedang"}),c.jsx("option",{value:"Hard",children:"Sulit"}),c.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),s(Ge.PRACTICE,te,ue)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[c.jsx(QE,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&A&&c.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:c.jsxs("button",{onClick:()=>{oe.play("click"),s(Ge.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[c.jsx(Sh,{size:20})," Mulai Sesi Wawancara"]})})]})};return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors duration-300",children:[c.jsx(K9,{}),c.jsxs("div",{className:"max-w-5xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("button",{onClick:()=>{oe.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[c.jsx(It,{size:18,className:"mr-2"})," Kembali"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[D&&c.jsx("button",{onClick:()=>{D()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:Y?c.jsx(GN,{size:16}):c.jsx(UN,{size:16})}),c.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[c.jsx(BN,{size:12})," ",se]})]})]}),c.jsx("div",{className:"flex justify-between items-end mb-8",children:c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:e==="TPA"?"Seleksi Lanjutan":e+" Dashboard"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),M?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[c.jsx(qn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),c.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),c.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:c.jsx(J9,{})})]}):c.jsxs(c.Fragment,{children:[e==="KECERMATAN"&&c.jsx("div",{className:"animate-fade-in-up",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),u("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:c.jsx(ws,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:c.jsx(gr,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:c.jsx(T9,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:c.jsx(kO,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:c.jsx(fo,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:c.jsx(BO,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&c.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(Th,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),c.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:O,onChange:Ke=>U(Ke.target.value)}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("TITLE_IDEAS",O)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[c.jsx($s,{size:24})," Ide Judul"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("OUTLINE",O)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[c.jsx(gr,{size:24})," Buat Outline"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("METHODOLOGY",O)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[c.jsx(uf,{size:24})," Cek Metodologi"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("PARAPHRASE",O)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[c.jsx(_O,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&c.jsx("div",{className:"space-y-8 animate-fade-in-up",children:v?c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[c.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[c.jsx($E,{size:20})," Materi Belajar"]}),c.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(m==null?void 0:m.type)==="pdf"&&m.content&&c.jsx("div",{className:"mb-6",children:c.jsx("embed",{src:`data:application/pdf;base64,${m.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),c.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:c.jsx(YN,{text:(m==null?void 0:m.extractedText)||(m==null?void 0:m.content)||""})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Vk.map(Ke=>{const ot={Brain:$s,Repeat:m9,MessageCircle:WO,Share2:S9,Search:uf,GraduationCap:Bg,BookOpen:$E,PenTool:QE}[Ke.icon]||$s;return c.jsxs("button",{onClick:()=>{oe.play("click"),G(Ke.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[c.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:c.jsx(ot,{size:24})}),c.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:Ke.name}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Ke.desc})]},Ke.id)})})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[c.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(Hg,{size:20})," Input Materi"]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),c.jsxs("div",{className:"flex gap-2 mb-4",children:[c.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:B?`PDF Terpilih: ${B}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:O,disabled:!!B,onChange:Ke=>{U(Ke.target.value)}}),c.jsx("input",{type:"file",ref:be,accept:"application/pdf",className:"hidden",onChange:Ce}),c.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${B?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var Ke;return(Ke=be.current)==null?void 0:Ke.click()},children:[c.jsx(gr,{size:20}),c.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),B&&c.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ns,{size:16})," ",c.jsxs("span",{children:["File siap: ",c.jsx("b",{children:B})]})]}),c.jsx("button",{onClick:()=>{j(null),p&&p(null),be.current&&(be.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:c.jsx(Nl,{size:16})})]}),Se?c.jsxs("div",{className:"mb-6 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[c.jsx(qn,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),c.jsx(to,{height:"h-[300px]",className:"rounded-xl"})]}):(m==null?void 0:m.type)==="pdf"&&m.content&&c.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),c.jsx("embed",{src:`data:application/pdf;base64,${m.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),c.jsxs("select",{value:ce,onChange:Ke=>ke(Ke.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[c.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),c.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),c.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),c.jsxs("select",{value:K,onChange:Ke=>fe(Ke.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[c.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),c.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),c.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),c.jsx("button",{onClick:()=>{oe.play("click"),ut()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(ma,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),c.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),c.jsx(oa,{className:"group-hover:translate-x-2 transition-transform"})]}),qe(Ok)]}),e==="TPA"&&c.jsx(c.Fragment,{children:P?c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("button",{onClick:()=>{oe.play("click"),R&&R(null)},className:"underline hover:text-indigo-600",children:"Ubah Jalur"}),c.jsx(oa,{size:14}),c.jsx("b",{className:"uppercase",children:P==="TPA_TBI"?"TPA & TBI":"Psikotes PKN STAN"})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(ma,{size:24,className:"text-amber-400"}),"Simulasi ",P==="TPA_TBI"?"TPA & TBI":"Psikotes"," Full"]}),c.jsx("p",{className:"text-slate-400 text-sm mt-1",children:P==="TPA_TBI"?"65 Soal. 100 Menit.":"TIU, Logika Gambar, Kepribadian."})]}),c.jsx(oa,{className:"group-hover:translate-x-2 transition-transform"})]}),qe(P==="TPA_TBI"?Bk:Hk)]}):c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 animate-fade-in-up",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),R&&R("TPA_TBI")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-blue-500 dark:hover:border-blue-500 transition text-center group shadow-sm",children:[c.jsx($s,{size:48,className:"mx-auto mb-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"TPA & TBI"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Pascasarjana & Umum"})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),R&&R("PSIKOTEST_KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 transition text-center group shadow-sm",children:[c.jsx(Gg,{size:48,className:"mx-auto mb-4 text-purple-600 dark:text-purple-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Kedinasan"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Lanjutan I PKN STAN"})]})]})}),e==="PSIKOTEST"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),o()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[c.jsx(XV,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[c.jsx($s,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),c.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),qe(zk)]})]}),e==="INTERVIEW"&&qe(Fk),e==="SKD"&&(C?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("button",{onClick:()=>V(null),className:"underline",children:"Ubah Jalur"})," ",c.jsx(oa,{size:14})," ",c.jsx("b",{children:C})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(ma,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),c.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),c.jsx(oa,{className:"group-hover:translate-x-2 transition-transform"})]}),qe(Gk)]}):c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),V("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[c.jsx(OO,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),V("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[c.jsx(QV,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&c.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),s(Ge.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[c.jsx(_a,{className:"text-amber-500 mb-2"}),c.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),s(Ge.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[c.jsx($s,{className:"text-emerald-500 mb-2"}),c.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),k>0&&c.jsxs("button",{onClick:()=>{oe.play("click"),s(Ge.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[c.jsx(fo,{className:"text-rose-500 mb-2"}),c.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),c.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[k," Topik Lemah"]})]})]})]})]})]})]})};function $8(){var Jt;const[n,e]=z.useState("SPLASH"),[t,s]=z.useState(null),[r,o]=z.useState(!1),[u,f]=z.useState(!0),[m,p]=z.useState("DASHBOARD"),[v,_]=z.useState(""),[T,A]=z.useState([]),[k,M]=z.useState(!1),[C,V]=z.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1}),[N,G]=z.useState(null),[$,se]=z.useState(!1),[Y,D]=z.useState(null),[P,R]=z.useState(!1),[O,U]=z.useState(""),[B,j]=z.useState(null),[ce,ke]=z.useState(null),[K,fe]=z.useState(null),[Se,Oe]=z.useState(new Set),[be,H]=z.useState("ANGKA"),[re,ue]=z.useState(null),[ne,te]=z.useState(null),[xe,Ce]=z.useState([]),[ut,qe]=z.useState(null),[Ke,Ct]=z.useState(null),[ot,lt]=z.useState(""),[nt,$e]=z.useState([]),[Ot,un]=z.useState(null),[es,ye]=z.useState([]),[ge,Ee]=z.useState(!1),[We,wt]=z.useState(void 0),[ht,nn]=z.useState([]),[ks,us]=z.useState(!1),[$n,yi]=z.useState(null),[Xs,ds]=z.useState(void 0),[Wt,dn]=z.useState(!1),[Rt,Xt]=z.useState([]),[Yt,yo]=z.useState(null),[vi,wa]=z.useState(null),st=(Q,ve)=>wa({msg:Q,type:ve}),[bi,Bt]=z.useState([...Tb,...Eb,...Sb,...Nb,...Ib,...Ab,...wb,...kb]),fs=async Q=>{try{const ve=localStorage.getItem("fajmuls_active_session");if(ve){const Ie=JSON.parse(ve);if(Ie.uid===Q&&Date.now()-Ie.timestamp<1440*60*1e3)return yi(Ie),!0;localStorage.removeItem("fajmuls_active_session")}}catch(ve){console.error("Failed to parse saved session",ve),localStorage.removeItem("fajmuls_active_session")}return!1},Is=Q=>{s(Q.category),j(Q.mode),$e(Q.questions),un(Q.drillContent),Q.skdStream&&ke(Q.skdStream),Q.tpaStream&&fe(Q.tpaStream),Q.packageTitle&&ds(Q.packageTitle),wt(Q),yi(null),e("SESSION")},hs=()=>{localStorage.removeItem("fajmuls_active_session"),yi(null)},zl=async()=>{if(oe.play("click"),!(N!=null&&N.uid)||N.isGuest){st("Fitur ini hanya untuk pengguna login.","info");return}us(!0),e("RESUME_LIST");try{const Q=await TV(N.uid);nn(Q)}catch{st("Gagal memuat sesi tersimpan.","error")}finally{us(!1)}},Na=async Q=>{oe.play("click"),Is(Q),Q.id&&(N!=null&&N.uid)&&await HE(N.uid,Q.id)},Cs=async Q=>{oe.play("click"),N!=null&&N.uid&&(await HE(N.uid,Q),nn(ve=>ve.filter(Ie=>Ie.id!==Q&&String(Ie.timestamp)!==Q)),st("Sesi dihapus.","success"))};z.useEffect(()=>{const Q=localStorage.getItem("fajmuls_settings");Q?V(JSON.parse(Q)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&V(Ie=>({...Ie,darkMode:!0}));const ve=pV(async Ie=>{if(f(!0),Ie)try{const Ue=await BE(Ie.uid);if(Ue){G({uid:Ie.uid,username:Ue.username,email:Ie.email,photoURL:Ue.photoURL||Ie.photoURL});const Le=await SV(Ie.uid);Xt(Le),await fs(Ie.uid),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else G({uid:Ie.uid,username:"",email:Ie.email,photoURL:Ie.photoURL}),e("USERNAME_SETUP")}catch(Ue){console.error("Profile fetch error",Ue)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const Le=localStorage.getItem("fajmuls_guest_username"),Ye="guest-"+(Le||"user");G({uid:Ye,username:Le||"Tamu",email:null,isGuest:!0});const De=localStorage.getItem("fajmuls_guest_history");if(De)try{Xt(JSON.parse(De))}catch{}await fs(Ye),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");f(!1),se(!1)});return()=>ve()},[]),z.useEffect(()=>{if(v.trim().length===0){A([]),M(!1);return}const Q=v.toLowerCase(),ve=[];Hp.forEach(Ue=>{(Ue.name.toLowerCase().includes(Q)||Ue.desc.toLowerCase().includes(Q))&&ve.push({id:Ue.id,label:Ue.name,type:"CATEGORY"})}),[{id:"TES_KORAN",label:"Tes Koran / Pauli"},{id:"REACTION",label:"Reaction Time (Benchmark)"},{id:"AIM",label:"Aim Trainer (Benchmark)"},{id:"SEQUENCE",label:"Sequence Memory (Benchmark)"},{id:"CHIMP",label:"Chimp Test (Benchmark)"},{id:"VISUAL",label:"Visual Memory (Benchmark)"},{id:"NUMBER",label:"Number Memory (Benchmark)"},{id:"VERBAL",label:"Verbal Memory (Benchmark)"},{id:"TYPING",label:"Typing Test (Benchmark)"},{id:"BRIDGE",label:"Bridge Memory (Benchmark)"},{id:"MATCH",label:"Match Memory (Benchmark)"},{id:"KECERMATAN_ANGKA",label:"Kecermatan Angka"},{id:"KECERMATAN_HURUF",label:"Kecermatan Huruf"},{id:"KECERMATAN_SIMBOL",label:"Kecermatan Simbol"}].forEach(Ue=>{Ue.label.toLowerCase().includes(Q)&&ve.push({id:Ue.id,label:Ue.label,type:"FEATURE"})}),A(ve),M(ve.length>0)},[v]);const Fi=Q=>{if(oe.play("click"),_(""),M(!1),Q.type==="CATEGORY")bo(Q.id);else if(Q.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if(Q.id.startsWith("KECERMATAN_")){s("KECERMATAN");const ve=Q.id.replace("KECERMATAN_","");Ca(ve)}else s("BENCHMARK"),ue(Q.id),e("BENCHMARK")},Fl=async()=>{dn(!0);const Q=[...Tb,...Eb,...Sb,...Nb,...Ib,...Ab,...wb,...kb];try{const ve=await kV(),Ie=new Set(Q.map(Le=>Le.id)),Ue=ve.filter(Le=>!Ie.has(Le.id));Bt([...Q,...Ue])}catch(ve){console.error("Failed to load cloud packages",ve),Bt(Q),st("Gagal memuat paket online. Menggunakan data offline.","error")}finally{dn(!1)}};z.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(C)),C.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),oe.syncSettings(C)},[C]);const qi=async()=>{se(!0);try{const Q=await gV();await BE(Q.uid)||(G({uid:Q.uid,username:"",email:Q.email,photoURL:Q.photoURL}),e("USERNAME_SETUP"))}catch{st("Gagal login dengan Google.","error"),se(!1)}},ka=()=>{oe.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),G({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const Q=localStorage.getItem("fajmuls_guest_history");if(Q)try{Xt(JSON.parse(Q))}catch{}else Xt([]);e("HOME")},Ia=async Q=>{if(N!=null&&N.uid){se(!0);try{if(!await yV(Q)){st("Username sudah dipakai. Pilih yang lain.","error"),se(!1);return}await vV(N.uid,{username:Q,email:N.email||"",photoURL:N.photoURL||""}),G(Ie=>Ie?{...Ie,username:Q}:null),Xt([]),oe.play("success"),e("HOME")}catch{st("Gagal membuat profil.","error")}finally{se(!1)}}},Ki=async()=>{oe.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),N!=null&&N.isGuest||await xV(),G(null),Xt([]),e("LOGIN")},Rs=async Q=>{const ve=[Q,...Rt];Xt(ve),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ve)):N!=null&&N.uid&&await zE(N.uid,Q)},vo=async Q=>{const ve=Rt.filter(Ie=>Ie.id!==Q);Xt(ve),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ve)):N!=null&&N.uid&&await AV(N.uid,Q),st("Riwayat berhasil dihapus.","success"),oe.play("click")},ms=async Q=>{if(N!=null&&N.isGuest){Q.username&&(G(ve=>ve?{...ve,username:Q.username}:null),localStorage.setItem("fajmuls_guest_username",Q.username),st("Nama Tamu diubah.","success"));return}if(N!=null&&N.uid)try{await bV(N.uid,Q),G(ve=>ve?{...ve,...Q}:null),st("Profil berhasil diperbarui!","success")}catch(ve){st(ve.message||"Gagal memperbarui profil.","error")}},ps=async Q=>{Ee(!0);try{const ve=await cP(Q);D({...Q,extractedText:ve}),R(!0)}catch{st("Gagal memproses materi. Coba lagi.","error")}finally{Ee(!1)}},Zt=async(Q,ve)=>{if(!ve.trim()){st("Mohon isi judul atau topik.","error");return}Ee(!0),Ct(Q);try{const Ie=await uP(ve,Q);lt(Ie),e("SESSION")}catch{st("Gagal generate konten skripsi.","error")}finally{Ee(!1)}},fn=async Q=>{if(!Y){st("Materi hilang. Silakan input ulang.","error");return}Ee(!0),te(Q),j(Ge.DRILL);try{if(Q==="ACTIVE_RECALL"||Q==="PBL"||Q==="PRACTICE"||Q==="TEACHING"){const ve=await ln(Ge.DRILL,"GENERAL",Y,5,[],void 0,Q);$e(ve)}else if(Q==="SPACED_REPETITION"){const ve=await dP(Y);Ce(ve)}else if(Q==="MIND_MAP"){const ve=await fP(Y);qe(ve)}e("SESSION")}catch{st("Gagal memuat materi AI.","error")}finally{Ee(!1)}},gs=async(Q,ve,Ie)=>{if(t){if(ds(void 0),wt(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!O&&Q!==Ge.SIMULATION&&Q!==Ge.WEAKNESS){st(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!ce){st("Harap pilih jalur (CPNS / Kedinasan).","error");return}Ee(!0),j(Q),ye([]),$e([]),un(null);try{const Ue=O;if(Q===Ge.DRILL){const Le=await hP(t,Ue,ce||void 0);un(Le),Le&&Le.question&&$e([Le.question])}else if(Q===Ge.SIMULATION&&t==="SKD"&&ce){const Le=await cT(ce);$e(Le||[])}else if(Q===Ge.SIMULATION&&t==="UTBK"){const Le=await uT();$e(Le||[])}else if(Q===Ge.SIMULATION&&t==="TPA")if(K==="PSIKOTEST_KEDINASAN"){const Le=await fT();$e(Le||[])}else{const Le=await dT();$e(Le||[])}else if(Q===Ge.SIMULATION&&t==="PSIKOTEST"){const Le=await hT();$e(Le||[])}else{let Le=Ie||5;t==="PSIKOTEST"&&Q===Ge.SIMULATION&&(Le=40),t==="INTERVIEW"&&(Le=3);const Ye=await ln(Q,t,Ue,Le,Array.from(Se),ce||void 0,void 0,ve);$e(Ye||[])}e("SESSION")}catch(Ue){console.error(Ue),st("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{Ee(!1)}}},xs=(Q,ve,Ie=!1)=>{if(ve){const De={...ve,isAborted:Ie};if(Rs(De),!Ie&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)&&ve.category==="KECERMATAN"&&ve.details){const ze=ve.details;FE("KECERMATAN",ze.mode||"General",ve.score,N.username,N.uid)}(ve.category!=="BENCHMARK"||Ie)&&e("HOME");return}ye(Q);let Ue=0,Le=0,Ye;if(t==="SKD"&&B===Ge.SIMULATION){let De=0,ze=0,_t=0;Q.forEach(Xe=>{var Tt,hn,_n,Ze,An,On;const ct=nt.find(Zs=>Zs.id===Xe.questionId);ct&&((hn=(Tt=ct.metadata)==null?void 0:Tt.subtest)!=null&&hn.includes("TWK")&&(De+=Xe.scoreEarned),(Ze=(_n=ct.metadata)==null?void 0:_n.subtest)!=null&&Ze.includes("TIU")&&(ze+=Xe.scoreEarned),(On=(An=ct.metadata)==null?void 0:An.subtest)!=null&&On.includes("TKP")&&(_t+=Xe.scoreEarned))}),Ue=De+ze+_t,Le=550,Ye={twk:De,tiu:ze,tkp:_t,total:Ue,passed:De>=65&&ze>=80&&_t>=166}}else if(t==="UTBK"&&B===Ge.SIMULATION){const De=An=>{const On=nt.filter(Tn=>{var Ls,_i;return(_i=(Ls=Tn.metadata)==null?void 0:Ls.subtest)==null?void 0:_i.includes(An)});if(!On.length)return 0;const Zs=Q.filter(Tn=>{var Ls,_i,Nr;return Tn.isCorrect&&((Nr=(_i=(Ls=nt.find(Ti=>Ti.id===Tn.questionId))==null?void 0:Ls.metadata)==null?void 0:_i.subtest)==null?void 0:Nr.includes(An))}).length;return Math.round(200+Zs/On.length*600)},ze=De("Penalaran Umum"),_t=De("PPU"),Xe=De("PBM"),ct=De("Kuantitatif"),Tt=De("Literasi B.Indo"),hn=De("Literasi B.Inggris"),_n=De("Penalaran Matematika"),Ze=Math.round((ze+_t+Xe+ct+Tt+hn+_n)/7);Ue=Ze,Le=1e3,Ye={pu:ze,ppu:_t,pbm:Xe,pk:ct,lbi:Tt,lbe:hn,pm:_n,average:Ze}}else if(t==="TPA"&&B===Ge.SIMULATION)if(K==="PSIKOTEST_KEDINASAN"){let De=0,ze=0,_t=0,Xe=0;Q.forEach(_n=>{const Ze=nt.find(An=>An.id===_n.questionId);Ze&&(Ze.metadata.subtest.includes("TIU")?De+=_n.scoreEarned:Ze.metadata.subtest.includes("Gambar")||Ze.metadata.subtest.includes("Figural")?ze+=_n.scoreEarned:Ze.metadata.subtest.includes("Kepribadian")&&(_t+=_n.scoreEarned,Xe++))});const ct=Xe*5,Tt=ct>0?Math.round(_t/ct*100):0;Ue=De+ze+Tt,Le=500;const hn=Tt>=70;Ye={tiuScore:De,figuralScore:ze,personalityScore:Tt,passed:hn,verdict:hn?"MEMENUHI SYARAT":"TIDAK MEMENUHI SYARAT"}}else{let De=0,ze=0;Q.forEach(Xe=>{var Tt,hn,_n,Ze;const ct=nt.find(An=>An.id===Xe.questionId);ct&&(((hn=(Tt=ct.metadata)==null?void 0:Tt.subtest)==null?void 0:hn.includes("TBI"))||((Ze=(_n=ct.metadata)==null?void 0:_n.subtest)==null?void 0:Ze.includes("Inggris"))?Xe.isCorrect&&(ze+=5):Xe.selectedAnswer&&(Xe.isCorrect?De+=4:De-=1))});const _t=De>=67&&ze>=30;Ue=De+ze,Le=280,Ye={tpaScore:De,tbiScore:ze,passed:_t}}else if(t==="INTERVIEW"){const De=Q.map(ze=>{var _t;return((_t=ze.interviewFeedback)==null?void 0:_t.score)||0});Ue=Math.round(De.reduce((ze,_t)=>ze+_t,0)/(De.length||1)),Le=100}else if(t==="PSIKOTEST"&&B===Ge.SIMULATION){const De=Q.filter(Tt=>Tt.isCorrect).length,ze=nt.length,_t=De/ze,Xe=Math.round(70+_t*75);let ct=Xe>=130?"Very Superior":Xe>=120?"Superior":Xe>=110?"High Average":Xe>=90?"Average":"Low Average";Ue=Xe,Le=160,Ye={iqScore:Xe,classification:ct}}else if(t==="GENERAL"){const De=Q.reduce((ze,_t)=>ze+(_t.scoreEarned||0),0);Ue=Math.round(De/(Q.length||1)),Le=100}else{const De=Q.filter(ze=>ze.isCorrect).length;Ue=Math.round(De/nt.length*100),Le=100}if(Rs({id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:ce||void 0,tpaStream:K||void 0,score:Ue,maxScore:Le,details:Ye,questions:nt,answers:Q,isAborted:Ie,packageTitle:Xs}),!Ie&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)&&t&&B===Ge.SIMULATION){let De="General";t==="SKD"&&ce&&(De=ce),t==="TPA"&&K&&(De=K),FE(t,De,Ue,N.username,N.uid,Xs)}ds(void 0),e("RESULTS")},bo=Q=>{oe.play("click"),s(Q),ds(void 0),wt(void 0),Q==="BUTAWRNA"?e("COLORBLIND"):Q==="BENCHMARK"?(ue(null),p("DASHBOARD"),e("BENCHMARK")):(e("DASHBOARD"),D(null),R(!1),U(""),ke(null),fe(null),te(null),Ct(null),lt(""))},Ca=Q=>{H(Q),e("TES_KECERMATAN")},_o=()=>{if(Rt.length===0){st("Belum ada riwayat untuk disimpan.","info");return}const Q=JSON.stringify(Rt,null,2),ve=new Blob([Q],{type:"application/json"}),Ie=URL.createObjectURL(ve),Ue=document.createElement("a");Ue.href=Ie,Ue.download=`Fajmuls_History_${(N==null?void 0:N.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue),URL.revokeObjectURL(Ie),st("Export berhasil!","success")},Ms=Q=>{const ve=new FileReader;ve.onload=Ie=>{var Ue;try{const Le=(Ue=Ie.target)==null?void 0:Ue.result,Ye=JSON.parse(Le);if(!Array.isArray(Ye))throw new Error("Format salah");const De=new Set(Rt.map(Xe=>Xe.id)),ze=Ye.filter(Xe=>!De.has(Xe.id)),_t=[...Rt,...ze].sort((Xe,ct)=>new Date(ct.date).getTime()-new Date(Xe.date).getTime());Xt(_t),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(_t)):N!=null&&N.uid&&ze.forEach(Xe=>{zE(N.uid,Xe)}),st(`Berhasil memuat ${ze.length} riwayat baru.`,"success")}catch{st("Gagal membaca file JSON.","error")}},ve.readAsText(Q)},wr=Q=>{$e(Q.questions),j(Ge.SIMULATION),ds(Q.title),wt(void 0),e("SESSION")},Ds=async Q=>{if(t)try{let ve=[],Ie=60;t==="SKD"?(ve=await cT(ce||"CPNS"),Ie=100):t==="UTBK"?(ve=await uT(),Ie=195):t==="TPA"?K==="PSIKOTEST_KEDINASAN"?(ve=await fT(),Ie=90):(ve=await dT(),Ie=100):t==="PSIKOTEST"?(ve=await hT(),Ie=40):ve=await ln(Ge.SIMULATION,t,"SIMULATION",20,[],ce||void 0,void 0,"HOTS");const Le=bi.filter(ze=>ze.category===t&&(t==="SKD"?ze.skdStream===ce:!0)).length+1;let Ye="";t==="SKD"?ce==="CPNS"?Ye=`TO SKD CPNS ${Le}`:ce==="KEDINASAN"?Ye=`TO SKD Kedinasan ${Le}`:Ye=`TO SKD ${Le}`:t==="UTBK"?Ye=`TO UTBK ${Le}`:t==="TPA"?K==="PSIKOTEST_KEDINASAN"?Ye=`TO Psikotes Kedinasan ${Le}`:Ye=`TO TPA TBI ${Le}`:t==="PSIKOTEST"?Ye=`TO Psikotest ${Le}`:Ye=`TO ${t} ${Le}`;const De={id:`gen-${Date.now()}`,title:Ye,category:t,skdStream:ce||void 0,tpaStream:K||void 0,questions:ve,durationMinutes:Ie,isAiGenerated:!0,version:"v2",createdAt:new Date().toISOString()};await qE(De),Bt(ze=>[De,...ze]),st(`Paket baru "${Ye}" berhasil dibuat dan disimpan ke database!`,"success")}catch(ve){console.error(ve),st("Gagal membuat paket soal. Coba lagi.","error")}},ts=async Q=>{if(Bt(ve=>ve.filter(Ie=>Ie.id!==Q)),Q.startsWith("gen-")||Q.startsWith("pkg-"))try{await IV(Q),st("Paket dihapus dari database.","success")}catch(ve){console.error(ve)}else st("Paket dihapus dari tampilan lokal.","success")},Yn=Q=>{Array.from(Q).forEach(ve=>{const Ie=new FileReader;Ie.onload=async Ue=>{var Le;try{const Ye=(Le=Ue.target)==null?void 0:Le.result,De=JSON.parse(Ye);De.id&&De.questions&&(await qE(De),Bt(ze=>ze.find(_t=>_t.id===De.id)?ze:[De,...ze]),st(`Paket "${De.title}" diimpor dan disimpan.`,"success"))}catch{st("File tidak valid.","error")}},Ie.readAsText(ve)})},Ps=({sessions:Q,onBack:ve,onResume:Ie,onDelete:Ue,loading:Le})=>c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:ve,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:c.jsx(It,{size:20})}),c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Lanjutkan Sesi Tersimpan"})]}),Le?c.jsx("div",{className:"flex justify-center py-20",children:c.jsx(qn,{className:"animate-spin text-indigo-600 w-8 h-8"})}):Q.length===0?c.jsxs("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[c.jsx(au,{size:48,className:"mx-auto mb-4 opacity-20"}),c.jsx("p",{children:"Tidak ada sesi tersimpan."})]}):c.jsx("div",{className:"grid gap-4",children:Q.map(Ye=>{const De=Math.round(Object.keys(Ye.answerMap).length/Ye.questions.length*100);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 animate-fade-in-up",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:Ye.packageTitle||Ye.category}),c.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-mono text-slate-500",children:new Date(Ye.timestamp).toLocaleDateString()})]}),c.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:[Ye.questions.length," Soal  Progress ",De,"%"]}),c.jsx("div",{className:"w-full sm:w-48 h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-indigo-500",style:{width:`${De}%`}})})]}),c.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[c.jsx("button",{onClick:()=>Ue(Ye.id),className:"p-3 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition border border-rose-200 dark:border-rose-900",children:c.jsx(Nl,{size:20})}),c.jsxs("button",{onClick:()=>Ie(Ye),className:"flex-1 sm:flex-none px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[c.jsx(Hl,{size:18})," Lanjutkan"]})]})]},Ye.id||Ye.timestamp)})})]})});return n==="SPLASH"?c.jsx(Q9,{onComplete:()=>e(N?"HOME":"LOGIN")}):u?c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:c.jsx(qn,{className:"animate-spin text-indigo-600 w-10 h-10"})}):n==="LOGIN"?c.jsx(O8,{onGoogleLogin:qi,onGuestLogin:ka,isLoading:$}):n==="USERNAME_SETUP"?c.jsx(G8,{onSubmit:Ia,isLoading:$}):c.jsxs(c.Fragment,{children:[vi&&c.jsx(U8,{message:vi.msg,type:vi.type,onClose:()=>wa(null)}),$n&&c.jsx(j8,{session:$n,onResume:()=>Na($n),onDiscard:hs}),c.jsx(W9,{isOpen:r,onClose:()=>o(!1),settings:C,onUpdate:V,userProfile:N,onUpdateProfile:ms}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&c.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex justify-between items-center animate-fade-in-down",children:[c.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{oe.play("click"),e("HOME")},children:[c.jsx("img",{src:ff,alt:"Logo",className:"w-8 h-8 object-contain"}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),c.jsxs("div",{className:"flex-1 max-w-md mx-4 relative",children:[c.jsxs("div",{className:"relative",children:[c.jsx(uf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),c.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari fitur (UTBK, Pauli, dll)...",value:v,onChange:Q=>_(Q.target.value)})]}),k&&T.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:T.map(Q=>c.jsxs("button",{onClick:()=>Fi(Q),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:Q.label}),c.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${Q.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:Q.type})]},Q.id))})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[c.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(N==null?void 0:N.username)||"Tamu"}),c.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:N!=null&&N.isGuest?"Mode Tamu":"Online"})]}),c.jsx(L8,{user:N}),c.jsx("button",{onClick:()=>{oe.play("click"),o(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:c.jsx(ON,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),c.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"?"pt-20":""}`,children:[n==="HOME"&&c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center relative transition-colors duration-300",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("img",{src:ff,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),c.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Hp.map(Q=>c.jsxs("button",{onClick:()=>bo(Q.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden hover:-translate-y-1 hover:shadow-xl ${Q.id==="BENCHMARK"?"bg-white dark:bg-slate-800 border-red-200 dark:border-red-900 hover:border-red-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500"}`,children:[Q.id==="BENCHMARK"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/40 rounded-lg flex items-center justify-center mb-6 group-hover:bg-red-600 transition-colors relative z-10 text-red-600 dark:text-red-400 group-hover:text-white",children:c.jsx(ws,{size:24})})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors relative z-10",children:Q.id==="GENERAL"?c.jsx(gr,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="SKD"?c.jsx(Gg,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="INTERVIEW"?c.jsx(Sh,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="BUTAWRNA"?c.jsx(VN,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="PSIKOTEST"?c.jsx($s,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="SKRIPSI"?c.jsx(Th,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="KECERMATAN"?c.jsx(PN,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):c.jsx(Bg,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"})})]}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:Q.name}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:Q.desc})]},Q.id))}),c.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),e("HISTORY")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[c.jsx(au,{size:18})," Riwayat Belajar"]}),c.jsxs("button",{onClick:zl,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 dark:shadow-none border border-indigo-600 font-bold hover:bg-indigo-700 transition",children:[c.jsx(cO,{size:18})," Lanjutkan TO"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),e("GLOBAL_LEADERBOARD")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[c.jsx(kl,{size:18,className:"text-amber-500"})," Global Rank"]}),c.jsxs("button",{onClick:Ki,className:"flex items-center gap-2 px-6 py-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl shadow-sm border border-rose-100 dark:border-rose-900 font-bold text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition",children:[c.jsx($O,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&c.jsx(K8,{category:t,onBack:()=>{oe.play("back"),e("HOME")},onStartSession:gs,onOpenTOSelection:()=>{oe.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{oe.play("click"),e("TES_KORAN")},onStartTesKecermatan:Ca,onGeneralInputSubmit:ps,generalInput:Y,setGeneralInput:D,isReadingMaterial:P,onResetMaterial:()=>{R(!1),D(null)},onSubtestSelect:U,selectedSubtest:O,weakTopicsCount:Se.size,loading:ge,skdStream:ce,onSkdStreamSelect:ke,onHistory:()=>{oe.play("click"),e("HISTORY")},onStartGeneralSession:fn,onStartSkripsiSession:Zt,username:(N==null?void 0:N.username)||"Guest",isDarkMode:C.darkMode,onToggleDarkMode:()=>{V(Q=>({...Q,darkMode:!Q.darkMode}))},tpaStream:K,onTpaStreamSelect:fe}),n==="TO_SELECTION"&&c.jsx(Z9,{category:t,skdStream:ce||void 0,availablePackages:bi,history:Rt,onSelectPackage:wr,onGenerateNew:Ds,onDeletePackage:ts,onImportPackage:Yn,onBack:()=>{oe.play("back"),e("DASHBOARD")},showToast:st,confirmEnabled:C.confirmActions,onRefresh:Fl,isLoading:Wt}),n==="RESUME_LIST"&&c.jsx(Ps,{sessions:ht,onBack:()=>{oe.play("back"),e("HOME")},onResume:Na,onDelete:Cs,loading:ks}),n==="SESSION"&&(t==="SKRIPSI"?c.jsx(B8,{result:ot,feature:Ke,onBack:()=>{oe.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?c.jsx(H8,{questions:nt,onComplete:Q=>xs(Q)}):t==="GENERAL"&&ne==="SPACED_REPETITION"?c.jsx(z8,{flashcards:xe,onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&ne==="MIND_MAP"?c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",c.jsxs("button",{onClick:()=>{oe.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[c.jsx(It,{size:18})," Kembali"]})," ",c.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",c.jsx(Y9,{data:ut})," "]}):t==="GENERAL"&&ne==="FEYNMAN"?c.jsx(F8,{topic:(Y==null?void 0:Y.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&ne==="SQ3R"?c.jsx(q8,{topic:(Y==null?void 0:Y.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):c.jsx(o8,{mode:B,questions:nt,drillContent:Ot,onComplete:(Q,ve,Ie)=>xs(Q,ve,Ie),isSkdSimulation:B===Ge.SIMULATION&&t==="SKD",isUtbkSimulation:B===Ge.SIMULATION&&t==="UTBK",category:t,showToast:st,initialState:We,userId:N==null?void 0:N.uid,skdStream:ce,tpaStream:K,packageTitle:Xs,onSaveAndExit:()=>e("HOME")})),n==="TES_KORAN"&&c.jsx(f8,{onBack:()=>e("DASHBOARD"),onComplete:Q=>xs([],Q)}),n==="TES_KECERMATAN"&&c.jsx(h8,{initialMode:be,onBack:()=>e("DASHBOARD"),onComplete:Q=>xs([],Q)}),n==="BENCHMARK"&&c.jsx(M8,{onBack:()=>e("HOME"),onComplete:Q=>xs([],Q),username:(N==null?void 0:N.username)||"Guest",history:Rt,isGuest:N==null?void 0:N.isGuest,initialMode:re||void 0,initialTab:m}),n==="GLOBAL_LEADERBOARD"&&c.jsx(P8,{onBack:()=>{oe.play("back"),e("HOME")},userProfile:N,onOpenHumanBenchmark:()=>{oe.play("click"),s("BENCHMARK"),ue(null),p("RANKING"),e("BENCHMARK")}}),n==="RESULTS"&&c.jsx(t8,{answers:es,questions:nt,onHome:()=>{oe.play("back"),e("HOME")},onRetry:()=>{oe.play("click"),gs(B)},category:t,details:(Jt=Rt[0])==null?void 0:Jt.details}),n==="HISTORY"&&c.jsx(s8,{history:Rt,onBack:()=>{oe.play("back"),e("HOME")},onReview:Q=>{oe.play("click"),yo(Q),e("REVIEW")},username:(N==null?void 0:N.username)||"Guest",onExport:_o,onImport:Ms,isDarkMode:C.darkMode,onDelete:vo}),n==="REVIEW"&&c.jsx(i8,{item:Yt,onBack:()=>{oe.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&c.jsx(p8,{onBack:()=>{oe.play("back"),e("HOME")},onComplete:Q=>xs([],Q)})]})]})}const JN=document.getElementById("root");if(!JN)throw new Error("Could not find root element to mount to");const Y8=jk.createRoot(JN);Y8.render(c.jsx(Ik.StrictMode,{children:c.jsx($8,{})}));
