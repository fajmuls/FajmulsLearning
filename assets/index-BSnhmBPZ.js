(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function BE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L0={exports:{}},Jc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function i2(){if(Uv)return Jc;Uv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return Jc.Fragment=e,Jc.jsx=t,Jc.jsxs=t,Jc}var Ov;function a2(){return Ov||(Ov=1,L0.exports=i2()),L0.exports}var o=a2(),U0={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function r2(){if(Vv)return rt;Vv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function E(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function j(H,Q,he){this.props=H,this.context=Q,this.refs=k,this.updater=he||I}j.prototype.isReactComponent={},j.prototype.setState=function(H,Q){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Q,"setState")},j.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function M(){}M.prototype=j.prototype;function z(H,Q,he){this.props=H,this.context=Q,this.refs=k,this.updater=he||I}var q=z.prototype=new M;q.constructor=z,C(q,j.prototype),q.isPureReactComponent=!0;var X=Array.isArray;function $(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function R(H,Q,he){var se=he.ref;return{$$typeof:n,type:H,key:Q,ref:se!==void 0?se:null,props:he}}function L(H,Q){return R(H.type,Q,H.props)}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var Q={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(he){return Q[he]})}var U=/\/+/g;function Te(H,Q){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):Q.toString(36)}function Me(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then($,$):(H.status="pending",H.then(function(Q){H.status==="pending"&&(H.status="fulfilled",H.value=Q)},function(Q){H.status==="pending"&&(H.status="rejected",H.reason=Q)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function J(H,Q,he,se,ue){var de=typeof H;(de==="undefined"||de==="boolean")&&(H=null);var Ee=!1;if(H===null)Ee=!0;else switch(de){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(H.$$typeof){case n:case e:Ee=!0;break;case b:return Ee=H._init,J(Ee(H._payload),Q,he,se,ue)}}if(Ee)return ue=ue(H),Ee=se===""?"."+Te(H,0):se,X(ue)?(he="",Ee!=null&&(he=Ee.replace(U,"$&/")+"/"),J(ue,Q,he,"",function(wt){return wt})):ue!=null&&(O(ue)&&(ue=L(ue,he+(ue.key==null||H&&H.key===ue.key?"":(""+ue.key).replace(U,"$&/")+"/")+Ee)),Q.push(ue)),1;Ee=0;var ht=se===""?".":se+":";if(X(H))for(var Xe=0;Xe<H.length;Xe++)se=H[Xe],de=ht+Te(se,Xe),Ee+=J(se,Q,he,de,ue);else if(Xe=E(H),typeof Xe=="function")for(H=Xe.call(H),Xe=0;!(se=H.next()).done;)se=se.value,de=ht+Te(se,Xe++),Ee+=J(se,Q,he,de,ue);else if(de==="object"){if(typeof H.then=="function")return J(Me(H),Q,he,se,ue);throw Q=String(H),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function le(H,Q,he){if(H==null)return H;var se=[],ue=0;return J(H,se,"","",function(de){return Q.call(he,de,ue++)}),se}function ye(H){if(H._status===-1){var Q=H._result;Q=Q(),Q.then(function(he){(H._status===0||H._status===-1)&&(H._status=1,H._result=he)},function(he){(H._status===0||H._status===-1)&&(H._status=2,H._result=he)}),H._status===-1&&(H._status=0,H._result=Q)}if(H._status===1)return H._result.default;throw H._result}var Ue=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Z={map:le,forEach:function(H,Q,he){le(H,function(){Q.apply(this,arguments)},he)},count:function(H){var Q=0;return le(H,function(){Q++}),Q},toArray:function(H){return le(H,function(Q){return Q})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return rt.Activity=_,rt.Children=Z,rt.Component=j,rt.Fragment=t,rt.Profiler=a,rt.PureComponent=z,rt.StrictMode=s,rt.Suspense=p,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,rt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},rt.cache=function(H){return function(){return H.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(H,Q,he){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var se=C({},H.props),ue=H.key;if(Q!=null)for(de in Q.key!==void 0&&(ue=""+Q.key),Q)!N.call(Q,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Q.ref===void 0||(se[de]=Q[de]);var de=arguments.length-2;if(de===1)se.children=he;else if(1<de){for(var Ee=Array(de),ht=0;ht<de;ht++)Ee[ht]=arguments[ht+2];se.children=Ee}return R(H.type,ue,se)},rt.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},rt.createElement=function(H,Q,he){var se,ue={},de=null;if(Q!=null)for(se in Q.key!==void 0&&(de=""+Q.key),Q)N.call(Q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ue[se]=Q[se]);var Ee=arguments.length-2;if(Ee===1)ue.children=he;else if(1<Ee){for(var ht=Array(Ee),Xe=0;Xe<Ee;Xe++)ht[Xe]=arguments[Xe+2];ue.children=ht}if(H&&H.defaultProps)for(se in Ee=H.defaultProps,Ee)ue[se]===void 0&&(ue[se]=Ee[se]);return R(H,de,ue)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(H){return{$$typeof:h,render:H}},rt.isValidElement=O,rt.lazy=function(H){return{$$typeof:b,_payload:{_status:-1,_result:H},_init:ye}},rt.memo=function(H,Q){return{$$typeof:f,type:H,compare:Q===void 0?null:Q}},rt.startTransition=function(H){var Q=D.T,he={};D.T=he;try{var se=H(),ue=D.S;ue!==null&&ue(he,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then($,Ue)}catch(de){Ue(de)}finally{Q!==null&&he.types!==null&&(Q.types=he.types),D.T=Q}},rt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},rt.use=function(H){return D.H.use(H)},rt.useActionState=function(H,Q,he){return D.H.useActionState(H,Q,he)},rt.useCallback=function(H,Q){return D.H.useCallback(H,Q)},rt.useContext=function(H){return D.H.useContext(H)},rt.useDebugValue=function(){},rt.useDeferredValue=function(H,Q){return D.H.useDeferredValue(H,Q)},rt.useEffect=function(H,Q){return D.H.useEffect(H,Q)},rt.useEffectEvent=function(H){return D.H.useEffectEvent(H)},rt.useId=function(){return D.H.useId()},rt.useImperativeHandle=function(H,Q,he){return D.H.useImperativeHandle(H,Q,he)},rt.useInsertionEffect=function(H,Q){return D.H.useInsertionEffect(H,Q)},rt.useLayoutEffect=function(H,Q){return D.H.useLayoutEffect(H,Q)},rt.useMemo=function(H,Q){return D.H.useMemo(H,Q)},rt.useOptimistic=function(H,Q){return D.H.useOptimistic(H,Q)},rt.useReducer=function(H,Q,he){return D.H.useReducer(H,Q,he)},rt.useRef=function(H){return D.H.useRef(H)},rt.useState=function(H){return D.H.useState(H)},rt.useSyncExternalStore=function(H,Q,he){return D.H.useSyncExternalStore(H,Q,he)},rt.useTransition=function(){return D.H.useTransition()},rt.version="19.2.3",rt}var Bv;function Zp(){return Bv||(Bv=1,U0.exports=r2()),U0.exports}var G=Zp();const GE=BE(G);var O0={exports:{}},Qc={},V0={exports:{}},B0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function o2(){return Gv||(Gv=1,(function(n){function e(J,le){var ye=J.length;J.push(le);e:for(;0<ye;){var Ue=ye-1>>>1,Z=J[Ue];if(0<a(Z,le))J[Ue]=le,J[ye]=Z,ye=Ue;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var le=J[0],ye=J.pop();if(ye!==le){J[0]=ye;e:for(var Ue=0,Z=J.length,H=Z>>>1;Ue<H;){var Q=2*(Ue+1)-1,he=J[Q],se=Q+1,ue=J[se];if(0>a(he,ye))se<Z&&0>a(ue,he)?(J[Ue]=ue,J[se]=ye,Ue=se):(J[Ue]=he,J[Q]=ye,Ue=Q);else if(se<Z&&0>a(ue,ye))J[Ue]=ue,J[se]=ye,Ue=se;else break e}}return le}function a(J,le){var ye=J.sortIndex-le.sortIndex;return ye!==0?ye:J.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],f=[],b=1,_=null,T=3,E=!1,I=!1,C=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function q(J){for(var le=t(f);le!==null;){if(le.callback===null)s(f);else if(le.startTime<=J)s(f),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(f)}}function X(J){if(C=!1,q(J),!I)if(t(p)!==null)I=!0,$||($=!0,B());else{var le=t(f);le!==null&&Me(X,le.startTime-J)}}var $=!1,D=-1,N=5,R=-1;function L(){return k?!0:!(n.unstable_now()-R<N)}function O(){if(k=!1,$){var J=n.unstable_now();R=J;var le=!0;try{e:{I=!1,C&&(C=!1,M(D),D=-1),E=!0;var ye=T;try{t:{for(q(J),_=t(p);_!==null&&!(_.expirationTime>J&&L());){var Ue=_.callback;if(typeof Ue=="function"){_.callback=null,T=_.priorityLevel;var Z=Ue(_.expirationTime<=J);if(J=n.unstable_now(),typeof Z=="function"){_.callback=Z,q(J),le=!0;break t}_===t(p)&&s(p),q(J)}else s(p);_=t(p)}if(_!==null)le=!0;else{var H=t(f);H!==null&&Me(X,H.startTime-J),le=!1}}break e}finally{_=null,T=ye,E=!1}le=void 0}}finally{le?B():$=!1}}}var B;if(typeof z=="function")B=function(){z(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Te=U.port2;U.port1.onmessage=O,B=function(){Te.postMessage(null)}}else B=function(){j(O,0)};function Me(J,le){D=j(function(){J(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(J){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var ye=T;T=le;try{return J()}finally{T=ye}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ye=T;T=J;try{return le()}finally{T=ye}},n.unstable_scheduleCallback=function(J,le,ye){var Ue=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ue+ye:Ue):ye=Ue,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ye+Z,J={id:b++,callback:le,priorityLevel:J,startTime:ye,expirationTime:Z,sortIndex:-1},ye>Ue?(J.sortIndex=ye,e(f,J),t(p)===null&&J===t(f)&&(C?(M(D),D=-1):C=!0,Me(X,ye-Ue))):(J.sortIndex=Z,e(p,J),I||E||(I=!0,$||($=!0,B()))),J},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(J){var le=T;return function(){var ye=T;T=le;try{return J.apply(this,arguments)}finally{T=ye}}}})(B0)),B0}var zv;function l2(){return zv||(zv=1,V0.exports=o2()),V0.exports}var G0={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function c2(){if(Hv)return Wn;Hv=1;var n=Zp();function e(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,f,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:f,implementation:b}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Wn.createPortal=function(p,f){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(p,f,null,b)},Wn.flushSync=function(p){var f=u.T,b=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=f,s.p=b,s.d.f()}},Wn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(p,f))},Wn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Wn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var b=f.as,_=h(b,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;b==="style"?s.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:E}):b==="script"&&s.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Wn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var b=h(f.as,f.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(p)},Wn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var b=f.as,_=h(b,f.crossOrigin);s.d.L(p,b,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Wn.preloadModule=function(p,f){if(typeof p=="string")if(f){var b=h(f.as,f.crossOrigin);s.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(p)},Wn.requestFormReset=function(p){s.d.r(p)},Wn.unstable_batchedUpdates=function(p,f){return p(f)},Wn.useFormState=function(p,f,b){return u.H.useFormState(p,f,b)},Wn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Wn.version="19.2.3",Wn}var Fv;function u2(){if(Fv)return G0.exports;Fv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),G0.exports=c2(),G0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function d2(){if(qv)return Qc;qv=1;var n=l2(),e=Zp(),t=u2();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var c=i,d=r;;){var y=c.return;if(y===null)break;var v=y.alternate;if(v===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===c)return p(y),i;if(v===d)return p(y),r;v=v.sibling}throw Error(s(188))}if(c.return!==d.return)c=y,d=v;else{for(var w=!1,P=y.child;P;){if(P===c){w=!0,c=y,d=v;break}if(P===d){w=!0,d=y,c=v;break}P=P.sibling}if(!w){for(P=v.child;P;){if(P===c){w=!0,c=v,d=y;break}if(P===d){w=!0,d=v,c=y;break}P=P.sibling}if(!w)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:r}function b(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=b(i),r!==null)return r;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),z=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function Te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case C:return"Fragment";case j:return"Profiler";case k:return"StrictMode";case X:return"Suspense";case $:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case z:return i.displayName||"Context";case M:return(i._context.displayName||"Context")+".Consumer";case q:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Te(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return Te(i(r))}catch{}}return null}var Me=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ue=[],Z=-1;function H(i){return{current:i}}function Q(i){0>Z||(i.current=Ue[Z],Ue[Z]=null,Z--)}function he(i,r){Z++,Ue[Z]=i.current,i.current=r}var se=H(null),ue=H(null),de=H(null),Ee=H(null);function ht(i,r){switch(he(de,r),he(ue,i),he(se,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?rv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=rv(r),i=ov(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(se),he(se,i)}function Xe(){Q(se),Q(ue),Q(de)}function wt(i){i.memoizedState!==null&&he(Ee,i);var r=se.current,c=ov(r,i.type);r!==c&&(he(ue,i),he(se,c))}function Dt(i){ue.current===i&&(Q(se),Q(ue)),Ee.current===i&&(Q(Ee),qc._currentValue=ye)}var nt,et;function ce(i){if(nt===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);nt=r&&r[1]||"",et=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+i+et}var Be=!1;function Je(i,r){if(!i||Be)return"";Be=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(oe){var ae=oe}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(oe){ae=oe}i.call(ge.prototype)}}else{try{throw Error()}catch(oe){ae=oe}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(oe){if(oe&&ae&&typeof oe.stack=="string")return[oe.stack,ae.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),w=v[0],P=v[1];if(w&&P){var F=w.split(`
`),ie=P.split(`
`);for(y=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;y<ie.length&&!ie[y].includes("DetermineComponentFrameRoot");)y++;if(d===F.length||y===ie.length)for(d=F.length-1,y=ie.length-1;1<=d&&0<=y&&F[d]!==ie[y];)y--;for(;1<=d&&0<=y;d--,y--)if(F[d]!==ie[y]){if(d!==1||y!==1)do if(d--,y--,0>y||F[d]!==ie[y]){var fe=`
`+F[d].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=d&&0<=y);break}}}finally{Be=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?ce(c):""}function Qe(i,r){switch(i.tag){case 26:case 27:case 5:return ce(i.type);case 16:return ce("Lazy");case 13:return i.child!==r&&r!==null?ce("Suspense Fallback"):ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return Je(i.type,!1);case 11:return Je(i.type.render,!1);case 1:return Je(i.type,!0);case 31:return ce("Activity");default:return""}}function Le(i){try{var r="",c=null;do r+=Qe(i,c),c=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var we=Object.prototype.hasOwnProperty,Oe=n.unstable_scheduleCallback,He=n.unstable_cancelCallback,xn=n.unstable_shouldYield,Bt=n.unstable_requestPaint,Ct=n.unstable_now,cn=n.unstable_getCurrentPriorityLevel,js=n.unstable_ImmediatePriority,Un=n.unstable_UserBlockingPriority,_s=n.unstable_NormalPriority,Ls=n.unstable_LowPriority,Zi=n.unstable_IdlePriority,Zt=n.log,Us=n.unstable_setDisableYieldValue,Jn=null,un=null;function Qn(i){if(typeof Zt=="function"&&Us(i),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Jn,i)}catch{}}var Ft=Math.clz32?Math.clz32:Os,ri=Math.log,Oa=Math.LN2;function Os(i){return i>>>=0,i===0?32:31-(ri(i)/Oa|0)|0}var Jt=256,On=262144,tn=4194304;function Vs(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function cs(i,r,c){var d=i.pendingLanes;if(d===0)return 0;var y=0,v=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var P=d&134217727;return P!==0?(d=P&~v,d!==0?y=Vs(d):(w&=P,w!==0?y=Vs(w):c||(c=P&~i,c!==0&&(y=Vs(c))))):(P=d&~v,P!==0?y=Vs(P):w!==0?y=Vs(w):c||(c=d&~i,c!==0&&(y=Vs(c)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,c=r&-r,v>=c||v===32&&(c&4194048)!==0)?r:y}function us(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function st(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oi(){var i=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),i}function Rn(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function Ai(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function rc(i,r,c,d,y,v){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var P=i.entanglements,F=i.expirationTimes,ie=i.hiddenUpdates;for(c=w&~c;0<c;){var fe=31-Ft(c),ge=1<<fe;P[fe]=0,F[fe]=-1;var ae=ie[fe];if(ae!==null)for(ie[fe]=null,fe=0;fe<ae.length;fe++){var oe=ae[fe];oe!==null&&(oe.lane&=-536870913)}c&=~ge}d!==0&&ea(i,d,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(w&~r))}function ea(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-Ft(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function Or(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var d=31-Ft(c),y=1<<d;y&r|i[d]&r&&(i[d]|=r),c&=~y}}function Va(i,r){var c=r&-r;return c=(c&42)!==0?1:ta(c),(c&(i.suspendedLanes|r))!==0?0:c}function ta(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function li(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Uo(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:Iv(i.type))}function Ts(i,r){var c=le.p;try{return le.p=i,r()}finally{le.p=c}}var Ss=Math.random().toString(36).slice(2),nn="__reactFiber$"+Ss,yn="__reactProps$"+Ss,Bs="__reactContainer$"+Ss,Ba="__reactEvents$"+Ss,Oo="__reactListeners$"+Ss,Vo="__reactHandles$"+Ss,Bo="__reactResources$"+Ss,Gs="__reactMarker$"+Ss;function Ga(i){delete i[nn],delete i[yn],delete i[Ba],delete i[Oo],delete i[Vo]}function Es(i){var r=i[nn];if(r)return r;for(var c=i.parentNode;c;){if(r=c[Bs]||c[nn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=mv(i);i!==null;){if(c=i[nn])return c;i=mv(i)}return r}i=c,c=i.parentNode}return null}function An(i){if(i=i[nn]||i[Bs]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Mn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function ws(i){var r=i[Bo];return r||(r=i[Bo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function sn(i){i[Gs]=!0}var Vr=new Set,Br={};function zs(i,r){Hs(i,r),Hs(i+"Capture",r)}function Hs(i,r){for(Br[i]=r,i=0;i<r.length;i++)Vr.add(r[i])}var Gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zr={},Hr={};function Fr(i){return we.call(Hr,i)?!0:we.call(zr,i)?!1:Gr.test(i)?Hr[i]=!0:(zr[i]=!0,!1)}function Y(i,r,c){if(Fr(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function be(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function _e(i,r,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+d)}}function ke(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ne(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function De(i,r,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,v=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(w){c=""+w,v.call(this,w)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ae(i){if(!i._valueTracker){var r=Ne(i)?"checked":"value";i._valueTracker=De(i,r,""+i[r])}}function je(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return i&&(d=Ne(i)?i.checked?"true":"false":i.value),i=d,i!==c?(r.setValue(i),!0):!1}function Ke(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ze=/[\n"\\]/g;function Ge(i){return i.replace(Ze,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function dt(i,r,c,d,y,v,w,P){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),r!=null?w==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+ke(r)):i.value!==""+ke(r)&&(i.value=""+ke(r)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),r!=null?Gt(i,w,ke(r)):c!=null?Gt(i,w,ke(c)):d!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+ke(P):i.removeAttribute("name")}function Tt(i,r,c,d,y,v,w,P){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Ae(i);return}c=c!=null?""+ke(c):"",r=r!=null?""+ke(r):c,P||r===i.value||(i.value=r),i.defaultValue=r}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=P?i.checked:!!d,i.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),Ae(i)}function Gt(i,r,c){r==="number"&&Ke(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function qt(i,r,c,d){if(i=i.options,r){r={};for(var y=0;y<c.length;y++)r["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=r.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&d&&(i[c].defaultSelected=!0)}else{for(c=""+ke(c),r=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function dn(i,r,c){if(r!=null&&(r=""+ke(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+ke(c):""}function kn(i,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(s(92));if(Me(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=ke(r),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Ae(i)}function bn(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var za=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ki(i,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,c):typeof c!="number"||c===0||za.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function ci(i,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in r)d=r[y],r.hasOwnProperty(y)&&c[y]!==d&&ki(i,y,d)}else for(var v in r)r.hasOwnProperty(v)&&ki(i,v,r[v])}function Fs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ci=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(i){return Ci.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ui(){}var oc=null;function qs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ha=null,Ii=null;function Kr(i){var r=An(i);if(r&&(i=r.stateNode)){var c=i[yn]||null;e:switch(i=r.stateNode,r.type){case"input":if(dt(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ge(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==i&&d.form===i.form){var y=d[yn]||null;if(!y)throw Error(s(90));dt(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===i.form&&je(d)}break e;case"textarea":dn(i,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&qt(i,!!c.multiple,r,!1)}}}var zo=!1;function Fa(i,r,c){if(zo)return i(r,c);zo=!0;try{var d=i(r);return d}finally{if(zo=!1,(Ha!==null||Ii!==null)&&(Ad(),Ha&&(r=Ha,i=Ii,Ii=Ha=null,Kr(r),i)))for(r=0;r<i.length;r++)Kr(i[r])}}function di(i,r){var c=i.stateNode;if(c===null)return null;var d=c[yn]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(Ks)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){$r=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{$r=!1}var Ri=null,lc=null,Yr=null;function cc(){if(Yr)return Yr;var i,r=lc,c=r.length,d,y="value"in Ri?Ri.value:Ri.textContent,v=y.length;for(i=0;i<c&&r[i]===y[i];i++);var w=c-i;for(d=1;d<=w&&r[c-d]===y[v-d];d++);return Yr=y.slice(i,1<d?1-d:void 0)}function Jr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function na(){return!0}function hi(){return!1}function Vn(i){function r(c,d,y,v,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(c=i[P],this[P]=c?c(v):v[P]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?na:hi,this.isPropagationStopped=hi,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),r}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Vn(sa),qa=_({},sa,{view:0,detail:0}),uc=Vn(qa),Ka,Ho,Di,Fo=_({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Di&&(Di&&i.type==="mousemove"?(Ka=i.screenX-Di.screenX,Ho=i.screenY-Di.screenY):Ho=Ka=0,Di=i),Ka)},movementY:function(i){return"movementY"in i?i.movementY:Ho}}),dc=Vn(Fo),Qr=_({},Fo,{dataTransfer:0}),ju=Vn(Qr),Lu=_({},qa,{relatedTarget:0}),Wr=Vn(Lu),hc=_({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),Uu=Vn(hc),qo=_({},sa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ou=Vn(qo),Vu=_({},sa,{data:0}),Pi=Vn(Vu),Bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=zu[i])?!!r[i]:!1}function $a(){return Hu}var is=_({},qa,{key:function(i){if(i.key){var r=Bu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Jr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Gu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(i){return i.type==="keypress"?Jr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Jr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Fu=Vn(is),qu=_({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ia=Vn(qu),x=_({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),S=Vn(x),A=_({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Vn(A),ee=_({},Fo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Vn(ee),Se=_({},sa,{newState:0,oldState:0}),lt=Vn(Se),hn=[9,13,27,32],It=Ks&&"CompositionEvent"in window,Qt=null;Ks&&"documentMode"in document&&(Qt=document.documentMode);var $s=Ks&&"TextEvent"in window&&!Qt,ji=Ks&&(!It||Qt&&8<Qt&&11>=Qt),fi=" ",mi=!1;function Xr(i,r){switch(i){case"keyup":return hn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ko(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $o=!1;function kA(i,r){switch(i){case"compositionend":return Ko(r);case"keypress":return r.which!==32?null:(mi=!0,fi);case"textInput":return i=r.data,i===fi&&mi?null:i;default:return null}}function CA(i,r){if($o)return i==="compositionend"||!It&&Xr(i,r)?(i=cc(),Yr=lc=Ri=null,$o=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ji&&r.locale!=="ko"?null:r.data;default:return null}}var IA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xx(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!IA[i.type]:r==="textarea"}function yx(i,r,c,d){Ha?Ii?Ii.push(d):Ii=[d]:Ha=d,r=Pd(r,"onChange"),0<r.length&&(c=new Mi("onChange","change",null,c,d),i.push({event:c,listeners:r}))}var fc=null,mc=null;function RA(i){ev(i,0)}function Ku(i){var r=Mn(i);if(je(r))return i}function bx(i,r){if(i==="change")return r}var vx=!1;if(Ks){var Hf;if(Ks){var Ff="oninput"in document;if(!Ff){var _x=document.createElement("div");_x.setAttribute("oninput","return;"),Ff=typeof _x.oninput=="function"}Hf=Ff}else Hf=!1;vx=Hf&&(!document.documentMode||9<document.documentMode)}function Tx(){fc&&(fc.detachEvent("onpropertychange",Sx),mc=fc=null)}function Sx(i){if(i.propertyName==="value"&&Ku(mc)){var r=[];yx(r,mc,i,qs(i)),Fa(RA,r)}}function MA(i,r,c){i==="focusin"?(Tx(),fc=r,mc=c,fc.attachEvent("onpropertychange",Sx)):i==="focusout"&&Tx()}function DA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ku(mc)}function PA(i,r){if(i==="click")return Ku(r)}function jA(i,r){if(i==="input"||i==="change")return Ku(r)}function LA(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Ns=typeof Object.is=="function"?Object.is:LA;function pc(i,r){if(Ns(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!we.call(r,y)||!Ns(i[y],r[y]))return!1}return!0}function Ex(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wx(i,r){var c=Ex(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=r&&d>=r)return{node:c,offset:r-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ex(c)}}function Nx(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Nx(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Ax(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ke(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=Ke(i.document)}return r}function qf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var UA=Ks&&"documentMode"in document&&11>=document.documentMode,Yo=null,Kf=null,gc=null,$f=!1;function kx(i,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$f||Yo==null||Yo!==Ke(d)||(d=Yo,"selectionStart"in d&&qf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),gc&&pc(gc,d)||(gc=d,d=Pd(Kf,"onSelect"),0<d.length&&(r=new Mi("onSelect","select",null,r,c),i.push({event:r,listeners:d}),r.target=Yo)))}function Zr(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Jo={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},Yf={},Cx={};Ks&&(Cx=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function eo(i){if(Yf[i])return Yf[i];if(!Jo[i])return i;var r=Jo[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in Cx)return Yf[i]=r[c];return i}var Ix=eo("animationend"),Rx=eo("animationiteration"),Mx=eo("animationstart"),OA=eo("transitionrun"),VA=eo("transitionstart"),BA=eo("transitioncancel"),Dx=eo("transitionend"),Px=new Map,Jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jf.push("scrollEnd");function pi(i,r){Px.set(i,r),zs(r,[i])}var $u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ys=[],Qo=0,Qf=0;function Yu(){for(var i=Qo,r=Qf=Qo=0;r<i;){var c=Ys[r];Ys[r++]=null;var d=Ys[r];Ys[r++]=null;var y=Ys[r];Ys[r++]=null;var v=Ys[r];if(Ys[r++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}v!==0&&jx(c,y,v)}}function Ju(i,r,c,d){Ys[Qo++]=i,Ys[Qo++]=r,Ys[Qo++]=c,Ys[Qo++]=d,Qf|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Wf(i,r,c,d){return Ju(i,r,c,d),Qu(i)}function to(i,r){return Ju(i,null,null,r),Qu(i)}function jx(i,r,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var y=!1,v=i.return;v!==null;)v.childLanes|=c,d=v.alternate,d!==null&&(d.childLanes|=c),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&r!==null&&(y=31-Ft(c),i=v.hiddenUpdates,d=i[y],d===null?i[y]=[r]:d.push(r),r.lane=c|536870912),v):null}function Qu(i){if(50<Oc)throw Oc=0,r0=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Wo={};function GA(i,r,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(i,r,c,d){return new GA(i,r,c,d)}function Xf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function aa(i,r){var c=i.alternate;return c===null?(c=As(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Lx(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Wu(i,r,c,d,y,v){var w=0;if(d=i,typeof i=="function")Xf(i)&&(w=1);else if(typeof i=="string")w=Kk(i,c,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=As(31,c,r,y),i.elementType=R,i.lanes=v,i;case C:return no(c.children,y,v,r);case k:w=8,y|=24;break;case j:return i=As(12,c,r,y|2),i.elementType=j,i.lanes=v,i;case X:return i=As(13,c,r,y),i.elementType=X,i.lanes=v,i;case $:return i=As(19,c,r,y),i.elementType=$,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:w=10;break e;case M:w=9;break e;case q:w=11;break e;case D:w=14;break e;case N:w=16,d=null;break e}w=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return r=As(w,c,r,y),r.elementType=i,r.type=d,r.lanes=v,r}function no(i,r,c,d){return i=As(7,i,d,r),i.lanes=c,i}function Zf(i,r,c){return i=As(6,i,null,r),i.lanes=c,i}function Ux(i){var r=As(18,null,null,0);return r.stateNode=i,r}function em(i,r,c){return r=As(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Ox=new WeakMap;function Js(i,r){if(typeof i=="object"&&i!==null){var c=Ox.get(i);return c!==void 0?c:(r={value:i,source:r,stack:Le(r)},Ox.set(i,r),r)}return{value:i,source:r,stack:Le(r)}}var Xo=[],Zo=0,Xu=null,xc=0,Qs=[],Ws=0,Ya=null,Li=1,Ui="";function ra(i,r){Xo[Zo++]=xc,Xo[Zo++]=Xu,Xu=i,xc=r}function Vx(i,r,c){Qs[Ws++]=Li,Qs[Ws++]=Ui,Qs[Ws++]=Ya,Ya=i;var d=Li;i=Ui;var y=32-Ft(d)-1;d&=~(1<<y),c+=1;var v=32-Ft(r)+y;if(30<v){var w=y-y%5;v=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Li=1<<32-Ft(r)+y|c<<y|d,Ui=v+i}else Li=1<<v|c<<y|d,Ui=i}function tm(i){i.return!==null&&(ra(i,1),Vx(i,1,0))}function nm(i){for(;i===Xu;)Xu=Xo[--Zo],Xo[Zo]=null,xc=Xo[--Zo],Xo[Zo]=null;for(;i===Ya;)Ya=Qs[--Ws],Qs[Ws]=null,Ui=Qs[--Ws],Qs[Ws]=null,Li=Qs[--Ws],Qs[Ws]=null}function Bx(i,r){Qs[Ws++]=Li,Qs[Ws++]=Ui,Qs[Ws++]=Ya,Li=r.id,Ui=r.overflow,Ya=i}var Bn=null,Kt=null,_t=!1,Ja=null,Xs=!1,sm=Error(s(519));function Qa(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yc(Js(r,i)),sm}function Gx(i){var r=i.stateNode,c=i.type,d=i.memoizedProps;switch(r[nn]=i,r[yn]=d,c){case"dialog":pt("cancel",r),pt("close",r);break;case"iframe":case"object":case"embed":pt("load",r);break;case"video":case"audio":for(c=0;c<Bc.length;c++)pt(Bc[c],r);break;case"source":pt("error",r);break;case"img":case"image":case"link":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"input":pt("invalid",r),Tt(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":pt("invalid",r);break;case"textarea":pt("invalid",r),kn(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||iv(r.textContent,c)?(d.popover!=null&&(pt("beforetoggle",r),pt("toggle",r)),d.onScroll!=null&&pt("scroll",r),d.onScrollEnd!=null&&pt("scrollend",r),d.onClick!=null&&(r.onclick=ui),r=!0):r=!1,r||Qa(i,!0)}function zx(i){for(Bn=i.return;Bn;)switch(Bn.tag){case 5:case 31:case 13:Xs=!1;return;case 27:case 3:Xs=!0;return;default:Bn=Bn.return}}function el(i){if(i!==Bn)return!1;if(!_t)return zx(i),_t=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||_0(i.type,i.memoizedProps)),c=!c),c&&Kt&&Qa(i),zx(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Kt=fv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Kt=fv(i)}else r===27?(r=Kt,ur(i.type)?(i=N0,N0=null,Kt=i):Kt=r):Kt=Bn?ei(i.stateNode.nextSibling):null;return!0}function so(){Kt=Bn=null,_t=!1}function im(){var i=Ja;return i!==null&&(ms===null?ms=i:ms.push.apply(ms,i),Ja=null),i}function yc(i){Ja===null?Ja=[i]:Ja.push(i)}var am=H(null),io=null,oa=null;function Wa(i,r,c){he(am,r._currentValue),r._currentValue=c}function la(i){i._currentValue=am.current,Q(am)}function rm(i,r,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===c)break;i=i.return}}function om(i,r,c,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var w=y.child;v=v.firstContext;e:for(;v!==null;){var P=v;v=y;for(var F=0;F<r.length;F++)if(P.context===r[F]){v.lanes|=c,P=v.alternate,P!==null&&(P.lanes|=c),rm(v.return,c,i),d||(w=null);break e}v=P.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(s(341));w.lanes|=c,v=w.alternate,v!==null&&(v.lanes|=c),rm(w,c,i),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===i){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function tl(i,r,c,d){i=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var P=y.type;Ns(y.pendingProps.value,w.value)||(i!==null?i.push(P):i=[P])}}else if(y===Ee.current){if(w=y.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(qc):i=[qc])}y=y.return}i!==null&&om(r,i,c,d),r.flags|=262144}function Zu(i){for(i=i.firstContext;i!==null;){if(!Ns(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ao(i){io=i,oa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Gn(i){return Hx(io,i)}function ed(i,r){return io===null&&ao(i),Hx(i,r)}function Hx(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},oa===null){if(i===null)throw Error(s(308));oa=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else oa=oa.next=r;return c}var zA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},HA=n.unstable_scheduleCallback,FA=n.unstable_NormalPriority,vn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new zA,data:new Map,refCount:0}}function bc(i){i.refCount--,i.refCount===0&&HA(FA,function(){i.controller.abort()})}var vc=null,cm=0,nl=0,sl=null;function qA(i,r){if(vc===null){var c=vc=[];cm=0,nl=h0(),sl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return cm++,r.then(Fx,Fx),r}function Fx(){if(--cm===0&&vc!==null){sl!==null&&(sl.status="fulfilled");var i=vc;vc=null,nl=0,sl=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function KA(i,r){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var y=0;y<c.length;y++)(0,c[y])(r)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var qx=J.S;J.S=function(i,r){kb=Ct(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&qA(i,r),qx!==null&&qx(i,r)};var ro=H(null);function um(){var i=ro.current;return i!==null?i:zt.pooledCache}function td(i,r){r===null?he(ro,ro.current):he(ro,r.pool)}function Kx(){var i=um();return i===null?null:{parent:vn._currentValue,pool:i}}var il=Error(s(460)),dm=Error(s(474)),nd=Error(s(542)),sd={then:function(){}};function $x(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Yx(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(ui,ui),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Qx(i),i;default:if(typeof r.status=="string")r.then(ui,ui);else{if(i=zt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=d}},function(d){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Qx(i),i}throw lo=r,il}}function oo(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(lo=c,il):c}}var lo=null;function Jx(){if(lo===null)throw Error(s(459));var i=lo;return lo=null,i}function Qx(i){if(i===il||i===nd)throw Error(s(483))}var al=null,_c=0;function id(i){var r=_c;return _c+=1,al===null&&(al=[]),Yx(al,i,r)}function Tc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ad(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Wx(i){function r(W,K){if(i){var ne=W.deletions;ne===null?(W.deletions=[K],W.flags|=16):ne.push(K)}}function c(W,K){if(!i)return null;for(;K!==null;)r(W,K),K=K.sibling;return null}function d(W){for(var K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function y(W,K){return W=aa(W,K),W.index=0,W.sibling=null,W}function v(W,K,ne){return W.index=ne,i?(ne=W.alternate,ne!==null?(ne=ne.index,ne<K?(W.flags|=67108866,K):ne):(W.flags|=67108866,K)):(W.flags|=1048576,K)}function w(W){return i&&W.alternate===null&&(W.flags|=67108866),W}function P(W,K,ne,me){return K===null||K.tag!==6?(K=Zf(ne,W.mode,me),K.return=W,K):(K=y(K,ne),K.return=W,K)}function F(W,K,ne,me){var Fe=ne.type;return Fe===C?fe(W,K,ne.props.children,me,ne.key):K!==null&&(K.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===N&&oo(Fe)===K.type)?(K=y(K,ne.props),Tc(K,ne),K.return=W,K):(K=Wu(ne.type,ne.key,ne.props,null,W.mode,me),Tc(K,ne),K.return=W,K)}function ie(W,K,ne,me){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=em(ne,W.mode,me),K.return=W,K):(K=y(K,ne.children||[]),K.return=W,K)}function fe(W,K,ne,me,Fe){return K===null||K.tag!==7?(K=no(ne,W.mode,me,Fe),K.return=W,K):(K=y(K,ne),K.return=W,K)}function ge(W,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Zf(""+K,W.mode,ne),K.return=W,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return ne=Wu(K.type,K.key,K.props,null,W.mode,ne),Tc(ne,K),ne.return=W,ne;case I:return K=em(K,W.mode,ne),K.return=W,K;case N:return K=oo(K),ge(W,K,ne)}if(Me(K)||B(K))return K=no(K,W.mode,ne,null),K.return=W,K;if(typeof K.then=="function")return ge(W,id(K),ne);if(K.$$typeof===z)return ge(W,ed(W,K),ne);ad(W,K)}return null}function ae(W,K,ne,me){var Fe=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Fe!==null?null:P(W,K,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case E:return ne.key===Fe?F(W,K,ne,me):null;case I:return ne.key===Fe?ie(W,K,ne,me):null;case N:return ne=oo(ne),ae(W,K,ne,me)}if(Me(ne)||B(ne))return Fe!==null?null:fe(W,K,ne,me,null);if(typeof ne.then=="function")return ae(W,K,id(ne),me);if(ne.$$typeof===z)return ae(W,K,ed(W,ne),me);ad(W,ne)}return null}function oe(W,K,ne,me,Fe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return W=W.get(ne)||null,P(K,W,""+me,Fe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case E:return W=W.get(me.key===null?ne:me.key)||null,F(K,W,me,Fe);case I:return W=W.get(me.key===null?ne:me.key)||null,ie(K,W,me,Fe);case N:return me=oo(me),oe(W,K,ne,me,Fe)}if(Me(me)||B(me))return W=W.get(ne)||null,fe(K,W,me,Fe,null);if(typeof me.then=="function")return oe(W,K,ne,id(me),Fe);if(me.$$typeof===z)return oe(W,K,ne,ed(K,me),Fe);ad(K,me)}return null}function Ve(W,K,ne,me){for(var Fe=null,Nt=null,ze=K,ut=K=0,xt=null;ze!==null&&ut<ne.length;ut++){ze.index>ut?(xt=ze,ze=null):xt=ze.sibling;var At=ae(W,ze,ne[ut],me);if(At===null){ze===null&&(ze=xt);break}i&&ze&&At.alternate===null&&r(W,ze),K=v(At,K,ut),Nt===null?Fe=At:Nt.sibling=At,Nt=At,ze=xt}if(ut===ne.length)return c(W,ze),_t&&ra(W,ut),Fe;if(ze===null){for(;ut<ne.length;ut++)ze=ge(W,ne[ut],me),ze!==null&&(K=v(ze,K,ut),Nt===null?Fe=ze:Nt.sibling=ze,Nt=ze);return _t&&ra(W,ut),Fe}for(ze=d(ze);ut<ne.length;ut++)xt=oe(ze,W,ut,ne[ut],me),xt!==null&&(i&&xt.alternate!==null&&ze.delete(xt.key===null?ut:xt.key),K=v(xt,K,ut),Nt===null?Fe=xt:Nt.sibling=xt,Nt=xt);return i&&ze.forEach(function(pr){return r(W,pr)}),_t&&ra(W,ut),Fe}function Ye(W,K,ne,me){if(ne==null)throw Error(s(151));for(var Fe=null,Nt=null,ze=K,ut=K=0,xt=null,At=ne.next();ze!==null&&!At.done;ut++,At=ne.next()){ze.index>ut?(xt=ze,ze=null):xt=ze.sibling;var pr=ae(W,ze,At.value,me);if(pr===null){ze===null&&(ze=xt);break}i&&ze&&pr.alternate===null&&r(W,ze),K=v(pr,K,ut),Nt===null?Fe=pr:Nt.sibling=pr,Nt=pr,ze=xt}if(At.done)return c(W,ze),_t&&ra(W,ut),Fe;if(ze===null){for(;!At.done;ut++,At=ne.next())At=ge(W,At.value,me),At!==null&&(K=v(At,K,ut),Nt===null?Fe=At:Nt.sibling=At,Nt=At);return _t&&ra(W,ut),Fe}for(ze=d(ze);!At.done;ut++,At=ne.next())At=oe(ze,W,ut,At.value,me),At!==null&&(i&&At.alternate!==null&&ze.delete(At.key===null?ut:At.key),K=v(At,K,ut),Nt===null?Fe=At:Nt.sibling=At,Nt=At);return i&&ze.forEach(function(s2){return r(W,s2)}),_t&&ra(W,ut),Fe}function Vt(W,K,ne,me){if(typeof ne=="object"&&ne!==null&&ne.type===C&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case E:e:{for(var Fe=ne.key;K!==null;){if(K.key===Fe){if(Fe=ne.type,Fe===C){if(K.tag===7){c(W,K.sibling),me=y(K,ne.props.children),me.return=W,W=me;break e}}else if(K.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===N&&oo(Fe)===K.type){c(W,K.sibling),me=y(K,ne.props),Tc(me,ne),me.return=W,W=me;break e}c(W,K);break}else r(W,K);K=K.sibling}ne.type===C?(me=no(ne.props.children,W.mode,me,ne.key),me.return=W,W=me):(me=Wu(ne.type,ne.key,ne.props,null,W.mode,me),Tc(me,ne),me.return=W,W=me)}return w(W);case I:e:{for(Fe=ne.key;K!==null;){if(K.key===Fe)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){c(W,K.sibling),me=y(K,ne.children||[]),me.return=W,W=me;break e}else{c(W,K);break}else r(W,K);K=K.sibling}me=em(ne,W.mode,me),me.return=W,W=me}return w(W);case N:return ne=oo(ne),Vt(W,K,ne,me)}if(Me(ne))return Ve(W,K,ne,me);if(B(ne)){if(Fe=B(ne),typeof Fe!="function")throw Error(s(150));return ne=Fe.call(ne),Ye(W,K,ne,me)}if(typeof ne.then=="function")return Vt(W,K,id(ne),me);if(ne.$$typeof===z)return Vt(W,K,ed(W,ne),me);ad(W,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(c(W,K.sibling),me=y(K,ne),me.return=W,W=me):(c(W,K),me=Zf(ne,W.mode,me),me.return=W,W=me),w(W)):c(W,K)}return function(W,K,ne,me){try{_c=0;var Fe=Vt(W,K,ne,me);return al=null,Fe}catch(ze){if(ze===il||ze===nd)throw ze;var Nt=As(29,ze,null,W.mode);return Nt.lanes=me,Nt.return=W,Nt}finally{}}}var co=Wx(!0),Xx=Wx(!1),Xa=!1;function hm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Za(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function er(i,r,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Rt&2)!==0){var y=d.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),d.pending=r,r=Qu(i),jx(i,null,c),r}return Ju(i,d,r,c),Qu(i)}function Sc(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,Or(i,c)}}function mm(i,r){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?y=v=w:v=v.next=w,c=c.next}while(c!==null);v===null?y=v=r:v=v.next=r}else y=v=r;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var pm=!1;function Ec(){if(pm){var i=sl;if(i!==null)throw i}}function wc(i,r,c,d){pm=!1;var y=i.updateQueue;Xa=!1;var v=y.firstBaseUpdate,w=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var F=P,ie=F.next;F.next=null,w===null?v=ie:w.next=ie,w=F;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,P=fe.lastBaseUpdate,P!==w&&(P===null?fe.firstBaseUpdate=ie:P.next=ie,fe.lastBaseUpdate=F))}if(v!==null){var ge=y.baseState;w=0,fe=ie=F=null,P=v;do{var ae=P.lane&-536870913,oe=ae!==P.lane;if(oe?(gt&ae)===ae:(d&ae)===ae){ae!==0&&ae===nl&&(pm=!0),fe!==null&&(fe=fe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ve=i,Ye=P;ae=r;var Vt=c;switch(Ye.tag){case 1:if(Ve=Ye.payload,typeof Ve=="function"){ge=Ve.call(Vt,ge,ae);break e}ge=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ye.payload,ae=typeof Ve=="function"?Ve.call(Vt,ge,ae):Ve,ae==null)break e;ge=_({},ge,ae);break e;case 2:Xa=!0}}ae=P.callback,ae!==null&&(i.flags|=64,oe&&(i.flags|=8192),oe=y.callbacks,oe===null?y.callbacks=[ae]:oe.push(ae))}else oe={lane:ae,tag:P.tag,payload:P.payload,callback:P.callback,next:null},fe===null?(ie=fe=oe,F=ge):fe=fe.next=oe,w|=ae;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;oe=P,P=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);fe===null&&(F=ge),y.baseState=F,y.firstBaseUpdate=ie,y.lastBaseUpdate=fe,v===null&&(y.shared.lanes=0),ar|=w,i.lanes=w,i.memoizedState=ge}}function Zx(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function ey(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Zx(c[i],r)}var rl=H(null),rd=H(0);function ty(i,r){i=xa,he(rd,i),he(rl,r),xa=i|r.baseLanes}function gm(){he(rd,xa),he(rl,rl.current)}function xm(){xa=rd.current,Q(rl),Q(rd)}var ks=H(null),Zs=null;function tr(i){var r=i.alternate;he(fn,fn.current&1),he(ks,i),Zs===null&&(r===null||rl.current!==null||r.memoizedState!==null)&&(Zs=i)}function ym(i){he(fn,fn.current),he(ks,i),Zs===null&&(Zs=i)}function ny(i){i.tag===22?(he(fn,fn.current),he(ks,i),Zs===null&&(Zs=i)):nr()}function nr(){he(fn,fn.current),he(ks,ks.current)}function Cs(i){Q(ks),Zs===i&&(Zs=null),Q(fn)}var fn=H(0);function od(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||E0(c)||w0(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ca=0,ct=null,Ut=null,_n=null,ld=!1,ol=!1,uo=!1,cd=0,Nc=0,ll=null,$A=0;function an(){throw Error(s(321))}function bm(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!Ns(i[c],r[c]))return!1;return!0}function vm(i,r,c,d,y,v){return ca=v,ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=i===null||i.memoizedState===null?Vy:jm,uo=!1,v=c(d,y),uo=!1,ol&&(v=iy(r,c,d,y)),sy(i),v}function sy(i){J.H=Cc;var r=Ut!==null&&Ut.next!==null;if(ca=0,_n=Ut=ct=null,ld=!1,Nc=0,ll=null,r)throw Error(s(300));i===null||Tn||(i=i.dependencies,i!==null&&Zu(i)&&(Tn=!0))}function iy(i,r,c,d){ct=i;var y=0;do{if(ol&&(ll=null),Nc=0,ol=!1,25<=y)throw Error(s(301));if(y+=1,_n=Ut=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}J.H=By,v=r(c,d)}while(ol);return v}function YA(){var i=J.H,r=i.useState()[0];return r=typeof r.then=="function"?Ac(r):r,i=i.useState()[0],(Ut!==null?Ut.memoizedState:null)!==i&&(ct.flags|=1024),r}function _m(){var i=cd!==0;return cd=0,i}function Tm(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function Sm(i){if(ld){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ld=!1}ca=0,_n=Ut=ct=null,ol=!1,Nc=cd=0,ll=null}function as(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?ct.memoizedState=_n=i:_n=_n.next=i,_n}function mn(){if(Ut===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Ut.next;var r=_n===null?ct.memoizedState:_n.next;if(r!==null)_n=r,Ut=i;else{if(i===null)throw ct.alternate===null?Error(s(467)):Error(s(310));Ut=i,i={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},_n===null?ct.memoizedState=_n=i:_n=_n.next=i}return _n}function ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(i){var r=Nc;return Nc+=1,ll===null&&(ll=[]),i=Yx(ll,i,r),r=ct,(_n===null?r.memoizedState:_n.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?Vy:jm),i}function dd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ac(i);if(i.$$typeof===z)return Gn(i)}throw Error(s(438,String(i)))}function Em(i){var r=null,c=ct.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=ct.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=ud(),ct.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),d=0;d<i;d++)c[d]=L;return r.index++,c}function ua(i,r){return typeof r=="function"?r(i):r}function hd(i){var r=mn();return wm(r,Ut,i)}function wm(i,r,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var y=i.baseQueue,v=d.pending;if(v!==null){if(y!==null){var w=y.next;y.next=v.next,v.next=w}r.baseQueue=y=v,d.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{r=y.next;var P=w=null,F=null,ie=r,fe=!1;do{var ge=ie.lane&-536870913;if(ge!==ie.lane?(gt&ge)===ge:(ca&ge)===ge){var ae=ie.revertLane;if(ae===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ge===nl&&(fe=!0);else if((ca&ae)===ae){ie=ie.next,ae===nl&&(fe=!0);continue}else ge={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},F===null?(P=F=ge,w=v):F=F.next=ge,ct.lanes|=ae,ar|=ae;ge=ie.action,uo&&c(v,ge),v=ie.hasEagerState?ie.eagerState:c(v,ge)}else ae={lane:ge,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},F===null?(P=F=ae,w=v):F=F.next=ae,ct.lanes|=ge,ar|=ge;ie=ie.next}while(ie!==null&&ie!==r);if(F===null?w=v:F.next=P,!Ns(v,i.memoizedState)&&(Tn=!0,fe&&(c=sl,c!==null)))throw c;i.memoizedState=v,i.baseState=w,i.baseQueue=F,d.lastRenderedState=v}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Nm(i){var r=mn(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,y=c.pending,v=r.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do v=i(v,w.action),w=w.next;while(w!==y);Ns(v,r.memoizedState)||(Tn=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),c.lastRenderedState=v}return[v,d]}function ay(i,r,c){var d=ct,y=mn(),v=_t;if(v){if(c===void 0)throw Error(s(407));c=c()}else c=r();var w=!Ns((Ut||y).memoizedState,c);if(w&&(y.memoizedState=c,Tn=!0),y=y.queue,Cm(ly.bind(null,d,y,i),[i]),y.getSnapshot!==r||w||_n!==null&&_n.memoizedState.tag&1){if(d.flags|=2048,cl(9,{destroy:void 0},oy.bind(null,d,y,c,r),null),zt===null)throw Error(s(349));v||(ca&127)!==0||ry(d,r,c)}return c}function ry(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=ct.updateQueue,r===null?(r=ud(),ct.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function oy(i,r,c,d){r.value=c,r.getSnapshot=d,cy(r)&&uy(i)}function ly(i,r,c){return c(function(){cy(r)&&uy(i)})}function cy(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!Ns(i,c)}catch{return!0}}function uy(i){var r=to(i,2);r!==null&&ps(r,i,2)}function Am(i){var r=as();if(typeof i=="function"){var c=i;if(i=c(),uo){Qn(!0);try{c()}finally{Qn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:i},r}function dy(i,r,c,d){return i.baseState=c,wm(i,Ut,typeof d=="function"?d:ua)}function JA(i,r,c,d,y){if(pd(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){v.listeners.push(w)}};J.T!==null?c(!0):v.isTransition=!1,d(v),c=r.pending,c===null?(v.next=r.pending=v,hy(r,v)):(v.next=c.next,r.pending=c.next=v)}}function hy(i,r){var c=r.action,d=r.payload,y=i.state;if(r.isTransition){var v=J.T,w={};J.T=w;try{var P=c(y,d),F=J.S;F!==null&&F(w,P),fy(i,r,P)}catch(ie){km(i,r,ie)}finally{v!==null&&w.types!==null&&(v.types=w.types),J.T=v}}else try{v=c(y,d),fy(i,r,v)}catch(ie){km(i,r,ie)}}function fy(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){my(i,r,d)},function(d){return km(i,r,d)}):my(i,r,c)}function my(i,r,c){r.status="fulfilled",r.value=c,py(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,hy(i,c)))}function km(i,r,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,py(r),r=r.next;while(r!==d)}i.action=null}function py(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function gy(i,r){return r}function xy(i,r){if(_t){var c=zt.formState;if(c!==null){e:{var d=ct;if(_t){if(Kt){t:{for(var y=Kt,v=Xs;y.nodeType!==8;){if(!v){y=null;break t}if(y=ei(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Kt=ei(y.nextSibling),d=y.data==="F!";break e}}Qa(d)}d=!1}d&&(r=c[0])}}return c=as(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gy,lastRenderedState:r},c.queue=d,c=Ly.bind(null,ct,d),d.dispatch=c,d=Am(!1),v=Pm.bind(null,ct,!1,d.queue),d=as(),y={state:r,dispatch:null,action:i,pending:null},d.queue=y,c=JA.bind(null,ct,y,v,c),y.dispatch=c,d.memoizedState=i,[r,c,!1]}function yy(i){var r=mn();return by(r,Ut,i)}function by(i,r,c){if(r=wm(i,r,gy)[0],i=hd(ua)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Ac(r)}catch(w){throw w===il?nd:w}else d=r;r=mn();var y=r.queue,v=y.dispatch;return c!==r.memoizedState&&(ct.flags|=2048,cl(9,{destroy:void 0},QA.bind(null,y,c),null)),[d,v,i]}function QA(i,r){i.action=r}function vy(i){var r=mn(),c=Ut;if(c!==null)return by(r,c,i);mn(),r=r.memoizedState,c=mn();var d=c.queue.dispatch;return c.memoizedState=i,[r,d,!1]}function cl(i,r,c,d){return i={tag:i,create:c,deps:d,inst:r,next:null},r=ct.updateQueue,r===null&&(r=ud(),ct.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,r.lastEffect=i),i}function _y(){return mn().memoizedState}function fd(i,r,c,d){var y=as();ct.flags|=i,y.memoizedState=cl(1|r,{destroy:void 0},c,d===void 0?null:d)}function md(i,r,c,d){var y=mn();d=d===void 0?null:d;var v=y.memoizedState.inst;Ut!==null&&d!==null&&bm(d,Ut.memoizedState.deps)?y.memoizedState=cl(r,v,c,d):(ct.flags|=i,y.memoizedState=cl(1|r,v,c,d))}function Ty(i,r){fd(8390656,8,i,r)}function Cm(i,r){md(2048,8,i,r)}function WA(i){ct.flags|=4;var r=ct.updateQueue;if(r===null)r=ud(),ct.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function Sy(i){var r=mn().memoizedState;return WA({ref:r,nextImpl:i}),function(){if((Rt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ey(i,r){return md(4,2,i,r)}function wy(i,r){return md(4,4,i,r)}function Ny(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Ay(i,r,c){c=c!=null?c.concat([i]):null,md(4,4,Ny.bind(null,r,i),c)}function Im(){}function ky(i,r){var c=mn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&bm(r,d[1])?d[0]:(c.memoizedState=[i,r],i)}function Cy(i,r){var c=mn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&bm(r,d[1]))return d[0];if(d=i(),uo){Qn(!0);try{i()}finally{Qn(!1)}}return c.memoizedState=[d,r],d}function Rm(i,r,c){return c===void 0||(ca&1073741824)!==0&&(gt&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=Ib(),ct.lanes|=i,ar|=i,c)}function Iy(i,r,c,d){return Ns(c,r)?c:rl.current!==null?(i=Rm(i,c,d),Ns(i,r)||(Tn=!0),i):(ca&42)===0||(ca&1073741824)!==0&&(gt&261930)===0?(Tn=!0,i.memoizedState=c):(i=Ib(),ct.lanes|=i,ar|=i,r)}function Ry(i,r,c,d,y){var v=le.p;le.p=v!==0&&8>v?v:8;var w=J.T,P={};J.T=P,Pm(i,!1,r,c);try{var F=y(),ie=J.S;if(ie!==null&&ie(P,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var fe=KA(F,d);kc(i,r,fe,Ms(i))}else kc(i,r,d,Ms(i))}catch(ge){kc(i,r,{then:function(){},status:"rejected",reason:ge},Ms())}finally{le.p=v,w!==null&&P.types!==null&&(w.types=P.types),J.T=w}}function XA(){}function Mm(i,r,c,d){if(i.tag!==5)throw Error(s(476));var y=My(i).queue;Ry(i,y,r,ye,c===null?XA:function(){return Dy(i),c(d)})}function My(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:ye},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Dy(i){var r=My(i);r.next===null&&(r=i.alternate.memoizedState),kc(i,r.next.queue,{},Ms())}function Dm(){return Gn(qc)}function Py(){return mn().memoizedState}function jy(){return mn().memoizedState}function ZA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Ms();i=Za(c);var d=er(r,i,c);d!==null&&(ps(d,r,c),Sc(d,r,c)),r={cache:lm()},i.payload=r;return}r=r.return}}function ek(i,r,c){var d=Ms();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},pd(i)?Uy(r,c):(c=Wf(i,r,c,d),c!==null&&(ps(c,i,d),Oy(c,r,d)))}function Ly(i,r,c){var d=Ms();kc(i,r,c,d)}function kc(i,r,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(pd(i))Uy(r,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var w=r.lastRenderedState,P=v(w,c);if(y.hasEagerState=!0,y.eagerState=P,Ns(P,w))return Ju(i,r,y,0),zt===null&&Yu(),!1}catch{}finally{}if(c=Wf(i,r,y,d),c!==null)return ps(c,i,d),Oy(c,r,d),!0}return!1}function Pm(i,r,c,d){if(d={lane:2,revertLane:h0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},pd(i)){if(r)throw Error(s(479))}else r=Wf(i,c,d,2),r!==null&&ps(r,i,2)}function pd(i){var r=i.alternate;return i===ct||r!==null&&r===ct}function Uy(i,r){ol=ld=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function Oy(i,r,c){if((c&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,Or(i,c)}}var Cc={readContext:Gn,use:dd,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};Cc.useEffectEvent=an;var Vy={readContext:Gn,use:dd,useCallback:function(i,r){return as().memoizedState=[i,r===void 0?null:r],i},useContext:Gn,useEffect:Ty,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,fd(4194308,4,Ny.bind(null,r,i),c)},useLayoutEffect:function(i,r){return fd(4194308,4,i,r)},useInsertionEffect:function(i,r){fd(4,2,i,r)},useMemo:function(i,r){var c=as();r=r===void 0?null:r;var d=i();if(uo){Qn(!0);try{i()}finally{Qn(!1)}}return c.memoizedState=[d,r],d},useReducer:function(i,r,c){var d=as();if(c!==void 0){var y=c(r);if(uo){Qn(!0);try{c(r)}finally{Qn(!1)}}}else y=r;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=ek.bind(null,ct,i),[d.memoizedState,i]},useRef:function(i){var r=as();return i={current:i},r.memoizedState=i},useState:function(i){i=Am(i);var r=i.queue,c=Ly.bind(null,ct,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:Im,useDeferredValue:function(i,r){var c=as();return Rm(c,i,r)},useTransition:function(){var i=Am(!1);return i=Ry.bind(null,ct,i.queue,!0,!1),as().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var d=ct,y=as();if(_t){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),zt===null)throw Error(s(349));(gt&127)!==0||ry(d,r,c)}y.memoizedState=c;var v={value:c,getSnapshot:r};return y.queue=v,Ty(ly.bind(null,d,v,i),[i]),d.flags|=2048,cl(9,{destroy:void 0},oy.bind(null,d,v,c,r),null),c},useId:function(){var i=as(),r=zt.identifierPrefix;if(_t){var c=Ui,d=Li;c=(d&~(1<<32-Ft(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=cd++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=$A++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Dm,useFormState:xy,useActionState:xy,useOptimistic:function(i){var r=as();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Pm.bind(null,ct,!0,c),c.dispatch=r,[i,r]},useMemoCache:Em,useCacheRefresh:function(){return as().memoizedState=ZA.bind(null,ct)},useEffectEvent:function(i){var r=as(),c={impl:i};return r.memoizedState=c,function(){if((Rt&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},jm={readContext:Gn,use:dd,useCallback:ky,useContext:Gn,useEffect:Cm,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Cy,useReducer:hd,useRef:_y,useState:function(){return hd(ua)},useDebugValue:Im,useDeferredValue:function(i,r){var c=mn();return Iy(c,Ut.memoizedState,i,r)},useTransition:function(){var i=hd(ua)[0],r=mn().memoizedState;return[typeof i=="boolean"?i:Ac(i),r]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:Dm,useFormState:yy,useActionState:yy,useOptimistic:function(i,r){var c=mn();return dy(c,Ut,i,r)},useMemoCache:Em,useCacheRefresh:jy};jm.useEffectEvent=Sy;var By={readContext:Gn,use:dd,useCallback:ky,useContext:Gn,useEffect:Cm,useImperativeHandle:Ay,useInsertionEffect:Ey,useLayoutEffect:wy,useMemo:Cy,useReducer:Nm,useRef:_y,useState:function(){return Nm(ua)},useDebugValue:Im,useDeferredValue:function(i,r){var c=mn();return Ut===null?Rm(c,i,r):Iy(c,Ut.memoizedState,i,r)},useTransition:function(){var i=Nm(ua)[0],r=mn().memoizedState;return[typeof i=="boolean"?i:Ac(i),r]},useSyncExternalStore:ay,useId:Py,useHostTransitionStatus:Dm,useFormState:vy,useActionState:vy,useOptimistic:function(i,r){var c=mn();return Ut!==null?dy(c,Ut,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Em,useCacheRefresh:jy};By.useEffectEvent=Sy;function Lm(i,r,c,d){r=i.memoizedState,c=c(d,r),c=c==null?r:_({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Um={enqueueSetState:function(i,r,c){i=i._reactInternals;var d=Ms(),y=Za(d);y.payload=r,c!=null&&(y.callback=c),r=er(i,y,d),r!==null&&(ps(r,i,d),Sc(r,i,d))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var d=Ms(),y=Za(d);y.tag=1,y.payload=r,c!=null&&(y.callback=c),r=er(i,y,d),r!==null&&(ps(r,i,d),Sc(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Ms(),d=Za(c);d.tag=2,r!=null&&(d.callback=r),r=er(i,d,c),r!==null&&(ps(r,i,c),Sc(r,i,c))}};function Gy(i,r,c,d,y,v,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,w):r.prototype&&r.prototype.isPureReactComponent?!pc(c,d)||!pc(y,v):!0}function zy(i,r,c,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==i&&Um.enqueueReplaceState(r,r.state,null)}function ho(i,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(i=i.defaultProps){c===r&&(c=_({},c));for(var y in i)c[y]===void 0&&(c[y]=i[y])}return c}function Hy(i){$u(i)}function Fy(i){console.error(i)}function qy(i){$u(i)}function gd(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Ky(i,r,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Om(i,r,c){return c=Za(c),c.tag=3,c.payload={element:null},c.callback=function(){gd(i,r)},c}function $y(i){return i=Za(i),i.tag=3,i}function Yy(i,r,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var v=d.value;i.payload=function(){return y(v)},i.callback=function(){Ky(r,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){Ky(r,c,d),typeof y!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})})}function tk(i,r,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&tl(r,c,y,!0),c=ks.current,c!==null){switch(c.tag){case 31:case 13:return Zs===null?kd():c.alternate===null&&rn===0&&(rn=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===sd?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),c0(i,d,y)),!1;case 22:return c.flags|=65536,d===sd?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),c0(i,d,y)),!1}throw Error(s(435,c.tag))}return c0(i,d,y),kd(),!1}if(_t)return r=ks.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,d!==sm&&(i=Error(s(422),{cause:d}),yc(Js(i,c)))):(d!==sm&&(r=Error(s(423),{cause:d}),yc(Js(r,c))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=Js(d,c),y=Om(i.stateNode,d,y),mm(i,y),rn!==4&&(rn=2)),!1;var v=Error(s(520),{cause:d});if(v=Js(v,c),Uc===null?Uc=[v]:Uc.push(v),rn!==4&&(rn=2),r===null)return!0;d=Js(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=y&-y,c.lanes|=i,i=Om(c.stateNode,d,i),mm(c,i),!1;case 1:if(r=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(rr===null||!rr.has(v))))return c.flags|=65536,y&=-y,c.lanes|=y,y=$y(y),Yy(y,i,c,d),mm(c,y),!1}c=c.return}while(c!==null);return!1}var Vm=Error(s(461)),Tn=!1;function zn(i,r,c,d){r.child=i===null?Xx(r,null,c,d):co(r,i.child,c,d)}function Jy(i,r,c,d,y){c=c.render;var v=r.ref;if("ref"in d){var w={};for(var P in d)P!=="ref"&&(w[P]=d[P])}else w=d;return ao(r),d=vm(i,r,c,w,v,y),P=_m(),i!==null&&!Tn?(Tm(i,r,y),da(i,r,y)):(_t&&P&&tm(r),r.flags|=1,zn(i,r,d,y),r.child)}function Qy(i,r,c,d,y){if(i===null){var v=c.type;return typeof v=="function"&&!Xf(v)&&v.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=v,Wy(i,r,v,d,y)):(i=Wu(c.type,null,d,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!$m(i,y)){var w=v.memoizedProps;if(c=c.compare,c=c!==null?c:pc,c(w,d)&&i.ref===r.ref)return da(i,r,y)}return r.flags|=1,i=aa(v,d),i.ref=r.ref,i.return=r,r.child=i}function Wy(i,r,c,d,y){if(i!==null){var v=i.memoizedProps;if(pc(v,d)&&i.ref===r.ref)if(Tn=!1,r.pendingProps=d=v,$m(i,y))(i.flags&131072)!==0&&(Tn=!0);else return r.lanes=i.lanes,da(i,r,y)}return Bm(i,r,c,d,y)}function Xy(i,r,c,d){var y=d.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|c:c,i!==null){for(d=r.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~v}else d=0,r.child=null;return Zy(i,r,v,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&td(r,v!==null?v.cachePool:null),v!==null?ty(r,v):gm(),ny(r);else return d=r.lanes=536870912,Zy(i,r,v!==null?v.baseLanes|c:c,c,d)}else v!==null?(td(r,v.cachePool),ty(r,v),nr(),r.memoizedState=null):(i!==null&&td(r,null),gm(),nr());return zn(i,r,y,c),r.child}function Ic(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Zy(i,r,c,d,y){var v=um();return v=v===null?null:{parent:vn._currentValue,pool:v},r.memoizedState={baseLanes:c,cachePool:v},i!==null&&td(r,null),gm(),ny(r),i!==null&&tl(i,r,d,!0),r.childLanes=y,null}function xd(i,r){return r=bd({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function eb(i,r,c){return co(r,i.child,null,c),i=xd(r,r.pendingProps),i.flags|=2,Cs(r),r.memoizedState=null,i}function nk(i,r,c){var d=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(_t){if(d.mode==="hidden")return i=xd(r,d),r.lanes=536870912,Ic(null,i);if(ym(r),(i=Kt)?(i=hv(i,Xs),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ya!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},c=Ux(i),c.return=r,r.child=c,Bn=r,Kt=null)):i=null,i===null)throw Qa(r);return r.lanes=536870912,null}return xd(r,d)}var v=i.memoizedState;if(v!==null){var w=v.dehydrated;if(ym(r),y)if(r.flags&256)r.flags&=-257,r=eb(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Tn||tl(i,r,c,!1),y=(c&i.childLanes)!==0,Tn||y){if(d=zt,d!==null&&(w=Va(d,c),w!==0&&w!==v.retryLane))throw v.retryLane=w,to(i,w),ps(d,i,w),Vm;kd(),r=eb(i,r,c)}else i=v.treeContext,Kt=ei(w.nextSibling),Bn=r,_t=!0,Ja=null,Xs=!1,i!==null&&Bx(r,i),r=xd(r,d),r.flags|=4096;return r}return i=aa(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function yd(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function Bm(i,r,c,d,y){return ao(r),c=vm(i,r,c,d,void 0,y),d=_m(),i!==null&&!Tn?(Tm(i,r,y),da(i,r,y)):(_t&&d&&tm(r),r.flags|=1,zn(i,r,c,y),r.child)}function tb(i,r,c,d,y,v){return ao(r),r.updateQueue=null,c=iy(r,d,c,y),sy(i),d=_m(),i!==null&&!Tn?(Tm(i,r,v),da(i,r,v)):(_t&&d&&tm(r),r.flags|=1,zn(i,r,c,v),r.child)}function nb(i,r,c,d,y){if(ao(r),r.stateNode===null){var v=Wo,w=c.contextType;typeof w=="object"&&w!==null&&(v=Gn(w)),v=new c(d,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Um,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=d,v.state=r.memoizedState,v.refs={},hm(r),w=c.contextType,v.context=typeof w=="object"&&w!==null?Gn(w):Wo,v.state=r.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Lm(r,c,w,d),v.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(w=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),w!==v.state&&Um.enqueueReplaceState(v,v.state,null),wc(r,d,v,y),Ec(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){v=r.stateNode;var P=r.memoizedProps,F=ho(c,P);v.props=F;var ie=v.context,fe=c.contextType;w=Wo,typeof fe=="object"&&fe!==null&&(w=Gn(fe));var ge=c.getDerivedStateFromProps;fe=typeof ge=="function"||typeof v.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,fe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(P||ie!==w)&&zy(r,v,d,w),Xa=!1;var ae=r.memoizedState;v.state=ae,wc(r,d,v,y),Ec(),ie=r.memoizedState,P||ae!==ie||Xa?(typeof ge=="function"&&(Lm(r,c,ge,d),ie=r.memoizedState),(F=Xa||Gy(r,c,F,d,ae,ie,w))?(fe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ie),v.props=d,v.state=ie,v.context=w,d=F):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{v=r.stateNode,fm(i,r),w=r.memoizedProps,fe=ho(c,w),v.props=fe,ge=r.pendingProps,ae=v.context,ie=c.contextType,F=Wo,typeof ie=="object"&&ie!==null&&(F=Gn(ie)),P=c.getDerivedStateFromProps,(ie=typeof P=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==ge||ae!==F)&&zy(r,v,d,F),Xa=!1,ae=r.memoizedState,v.state=ae,wc(r,d,v,y),Ec();var oe=r.memoizedState;w!==ge||ae!==oe||Xa||i!==null&&i.dependencies!==null&&Zu(i.dependencies)?(typeof P=="function"&&(Lm(r,c,P,d),oe=r.memoizedState),(fe=Xa||Gy(r,c,fe,d,ae,oe,F)||i!==null&&i.dependencies!==null&&Zu(i.dependencies))?(ie||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,oe,F),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,oe,F)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=oe),v.props=d,v.state=oe,v.context=F,d=fe):(typeof v.componentDidUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&ae===i.memoizedState||(r.flags|=1024),d=!1)}return v=d,yd(i,r),d=(r.flags&128)!==0,v||d?(v=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&d?(r.child=co(r,i.child,null,y),r.child=co(r,null,c,y)):zn(i,r,c,y),r.memoizedState=v.state,i=r.child):i=da(i,r,y),i}function sb(i,r,c,d){return so(),r.flags|=256,zn(i,r,c,d),r.child}var Gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zm(i){return{baseLanes:i,cachePool:Kx()}}function Hm(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=Rs),i}function ib(i,r,c){var d=r.pendingProps,y=!1,v=(r.flags&128)!==0,w;if((w=v)||(w=i!==null&&i.memoizedState===null?!1:(fn.current&2)!==0),w&&(y=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,i===null){if(_t){if(y?tr(r):nr(),(i=Kt)?(i=hv(i,Xs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ya!==null?{id:Li,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},c=Ux(i),c.return=r,r.child=c,Bn=r,Kt=null)):i=null,i===null)throw Qa(r);return w0(i)?r.lanes=32:r.lanes=536870912,null}var P=d.children;return d=d.fallback,y?(nr(),y=r.mode,P=bd({mode:"hidden",children:P},y),d=no(d,y,c,null),P.return=r,d.return=r,P.sibling=d,r.child=P,d=r.child,d.memoizedState=zm(c),d.childLanes=Hm(i,w,c),r.memoizedState=Gm,Ic(null,d)):(tr(r),Fm(r,P))}var F=i.memoizedState;if(F!==null&&(P=F.dehydrated,P!==null)){if(v)r.flags&256?(tr(r),r.flags&=-257,r=qm(i,r,c)):r.memoizedState!==null?(nr(),r.child=i.child,r.flags|=128,r=null):(nr(),P=d.fallback,y=r.mode,d=bd({mode:"visible",children:d.children},y),P=no(P,y,c,null),P.flags|=2,d.return=r,P.return=r,d.sibling=P,r.child=d,co(r,i.child,null,c),d=r.child,d.memoizedState=zm(c),d.childLanes=Hm(i,w,c),r.memoizedState=Gm,r=Ic(null,d));else if(tr(r),w0(P)){if(w=P.nextSibling&&P.nextSibling.dataset,w)var ie=w.dgst;w=ie,d=Error(s(419)),d.stack="",d.digest=w,yc({value:d,source:null,stack:null}),r=qm(i,r,c)}else if(Tn||tl(i,r,c,!1),w=(c&i.childLanes)!==0,Tn||w){if(w=zt,w!==null&&(d=Va(w,c),d!==0&&d!==F.retryLane))throw F.retryLane=d,to(i,d),ps(w,i,d),Vm;E0(P)||kd(),r=qm(i,r,c)}else E0(P)?(r.flags|=192,r.child=i.child,r=null):(i=F.treeContext,Kt=ei(P.nextSibling),Bn=r,_t=!0,Ja=null,Xs=!1,i!==null&&Bx(r,i),r=Fm(r,d.children),r.flags|=4096);return r}return y?(nr(),P=d.fallback,y=r.mode,F=i.child,ie=F.sibling,d=aa(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,ie!==null?P=aa(ie,P):(P=no(P,y,c,null),P.flags|=2),P.return=r,d.return=r,d.sibling=P,r.child=d,Ic(null,d),d=r.child,P=i.child.memoizedState,P===null?P=zm(c):(y=P.cachePool,y!==null?(F=vn._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=Kx(),P={baseLanes:P.baseLanes|c,cachePool:y}),d.memoizedState=P,d.childLanes=Hm(i,w,c),r.memoizedState=Gm,Ic(i.child,d)):(tr(r),c=i.child,i=c.sibling,c=aa(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,i!==null&&(w=r.deletions,w===null?(r.deletions=[i],r.flags|=16):w.push(i)),r.child=c,r.memoizedState=null,c)}function Fm(i,r){return r=bd({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function bd(i,r){return i=As(22,i,null,r),i.lanes=0,i}function qm(i,r,c){return co(r,i.child,null,c),i=Fm(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function ab(i,r,c){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),rm(i.return,r,c)}function Km(i,r,c,d,y,v){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:v}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=y,w.treeForkCount=v)}function rb(i,r,c){var d=r.pendingProps,y=d.revealOrder,v=d.tail;d=d.children;var w=fn.current,P=(w&2)!==0;if(P?(w=w&1|2,r.flags|=128):w&=1,he(fn,w),zn(i,r,d,c),d=_t?xc:0,!P&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ab(i,c,r);else if(i.tag===19)ab(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(c=r.child,y=null;c!==null;)i=c.alternate,i!==null&&od(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=r.child,r.child=null):(y=c.sibling,c.sibling=null),Km(r,!1,y,c,v,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&od(i)===null){r.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}Km(r,!0,c,null,v,d);break;case"together":Km(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function da(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),ar|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(tl(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,c=aa(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=aa(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function $m(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Zu(i)))}function sk(i,r,c){switch(r.tag){case 3:ht(r,r.stateNode.containerInfo),Wa(r,vn,i.memoizedState.cache),so();break;case 27:case 5:wt(r);break;case 4:ht(r,r.stateNode.containerInfo);break;case 10:Wa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ym(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(tr(r),r.flags|=128,null):(c&r.child.childLanes)!==0?ib(i,r,c):(tr(r),i=da(i,r,c),i!==null?i.sibling:null);tr(r);break;case 19:var y=(i.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(tl(i,r,c,!1),d=(c&r.childLanes)!==0),y){if(d)return rb(i,r,c);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(fn,fn.current),d)break;return null;case 22:return r.lanes=0,Xy(i,r,c,r.pendingProps);case 24:Wa(r,vn,i.memoizedState.cache)}return da(i,r,c)}function ob(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)Tn=!0;else{if(!$m(i,c)&&(r.flags&128)===0)return Tn=!1,sk(i,r,c);Tn=(i.flags&131072)!==0}else Tn=!1,_t&&(r.flags&1048576)!==0&&Vx(r,xc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=oo(r.elementType),r.type=i,typeof i=="function")Xf(i)?(d=ho(i,d),r.tag=1,r=nb(null,r,i,d,c)):(r.tag=0,r=Bm(null,r,i,d,c));else{if(i!=null){var y=i.$$typeof;if(y===q){r.tag=11,r=Jy(null,r,i,d,c);break e}else if(y===D){r.tag=14,r=Qy(null,r,i,d,c);break e}}throw r=Te(i)||i,Error(s(306,r,""))}}return r;case 0:return Bm(i,r,r.type,r.pendingProps,c);case 1:return d=r.type,y=ho(d,r.pendingProps),nb(i,r,d,y,c);case 3:e:{if(ht(r,r.stateNode.containerInfo),i===null)throw Error(s(387));d=r.pendingProps;var v=r.memoizedState;y=v.element,fm(i,r),wc(r,d,null,c);var w=r.memoizedState;if(d=w.cache,Wa(r,vn,d),d!==v.cache&&om(r,[vn],c,!0),Ec(),d=w.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=sb(i,r,d,c);break e}else if(d!==y){y=Js(Error(s(424)),r),yc(y),r=sb(i,r,d,c);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Kt=ei(i.firstChild),Bn=r,_t=!0,Ja=null,Xs=!0,c=Xx(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(so(),d===y){r=da(i,r,c);break e}zn(i,r,d,c)}r=r.child}return r;case 26:return yd(i,r),i===null?(c=yv(r.type,null,r.pendingProps,null))?r.memoizedState=c:_t||(c=r.type,i=r.pendingProps,d=jd(de.current).createElement(c),d[nn]=r,d[yn]=i,Hn(d,c,i),sn(d),r.stateNode=d):r.memoizedState=yv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return wt(r),i===null&&_t&&(d=r.stateNode=pv(r.type,r.pendingProps,de.current),Bn=r,Xs=!0,y=Kt,ur(r.type)?(N0=y,Kt=ei(d.firstChild)):Kt=y),zn(i,r,r.pendingProps.children,c),yd(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&_t&&((y=d=Kt)&&(d=Dk(d,r.type,r.pendingProps,Xs),d!==null?(r.stateNode=d,Bn=r,Kt=ei(d.firstChild),Xs=!1,y=!0):y=!1),y||Qa(r)),wt(r),y=r.type,v=r.pendingProps,w=i!==null?i.memoizedProps:null,d=v.children,_0(y,v)?d=null:w!==null&&_0(y,w)&&(r.flags|=32),r.memoizedState!==null&&(y=vm(i,r,YA,null,null,c),qc._currentValue=y),yd(i,r),zn(i,r,d,c),r.child;case 6:return i===null&&_t&&((i=c=Kt)&&(c=Pk(c,r.pendingProps,Xs),c!==null?(r.stateNode=c,Bn=r,Kt=null,i=!0):i=!1),i||Qa(r)),null;case 13:return ib(i,r,c);case 4:return ht(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=co(r,null,d,c):zn(i,r,d,c),r.child;case 11:return Jy(i,r,r.type,r.pendingProps,c);case 7:return zn(i,r,r.pendingProps,c),r.child;case 8:return zn(i,r,r.pendingProps.children,c),r.child;case 12:return zn(i,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,Wa(r,r.type,d.value),zn(i,r,d.children,c),r.child;case 9:return y=r.type._context,d=r.pendingProps.children,ao(r),y=Gn(y),d=d(y),r.flags|=1,zn(i,r,d,c),r.child;case 14:return Qy(i,r,r.type,r.pendingProps,c);case 15:return Wy(i,r,r.type,r.pendingProps,c);case 19:return rb(i,r,c);case 31:return nk(i,r,c);case 22:return Xy(i,r,c,r.pendingProps);case 24:return ao(r),d=Gn(vn),i===null?(y=um(),y===null&&(y=zt,v=lm(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=c),y=v),r.memoizedState={parent:d,cache:y},hm(r),Wa(r,vn,y)):((i.lanes&c)!==0&&(fm(i,r),wc(r,null,null,c),Ec()),y=i.memoizedState,v=r.memoizedState,y.parent!==d?(y={parent:d,cache:d},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Wa(r,vn,d)):(d=v.cache,Wa(r,vn,d),d!==y.cache&&om(r,[vn],c,!0))),zn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ha(i){i.flags|=4}function Ym(i,r,c,d,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Pb())i.flags|=8192;else throw lo=sd,dm}else i.flags&=-16777217}function lb(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Sv(r))if(Pb())i.flags|=8192;else throw lo=sd,dm}function vd(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?oi():536870912,i.lanes|=r,fl|=r)}function Rc(i,r){if(!_t)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function $t(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(r)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=c,r}function ik(i,r,c){var d=r.pendingProps;switch(nm(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(r),null;case 1:return $t(r),null;case 3:return c=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),la(vn),Xe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(el(r)?ha(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,im())),$t(r),null;case 26:var y=r.type,v=r.memoizedState;return i===null?(ha(r),v!==null?($t(r),lb(r,v)):($t(r),Ym(r,y,null,d,c))):v?v!==i.memoizedState?(ha(r),$t(r),lb(r,v)):($t(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&ha(r),$t(r),Ym(r,y,i,d,c)),null;case 27:if(Dt(r),c=de.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&ha(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return $t(r),null}i=se.current,el(r)?Gx(r):(i=pv(y,d,c),r.stateNode=i,ha(r))}return $t(r),null;case 5:if(Dt(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&ha(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return $t(r),null}if(v=se.current,el(r))Gx(r);else{var w=jd(de.current);switch(v){case 1:v=w.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=w.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=w.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?w.createElement(y,{is:d.is}):w.createElement(y)}}v[nn]=r,v[yn]=d;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)v.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=v;e:switch(Hn(v,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&ha(r)}}return $t(r),Ym(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&ha(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(i=de.current,el(r)){if(i=r.stateNode,c=r.memoizedProps,d=null,y=Bn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[nn]=r,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||iv(i.nodeValue,c)),i||Qa(r,!0)}else i=jd(i).createTextNode(d),i[nn]=r,r.stateNode=i}return $t(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(d=el(r),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[nn]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),i=!1}else c=im(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(Cs(r),r):(Cs(r),null);if((r.flags&128)!==0)throw Error(s(558))}return $t(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=el(r),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[nn]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;$t(r),y=!1}else y=im(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Cs(r),r):(Cs(r),null)}return Cs(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=r.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==y&&(d.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),vd(r,r.updateQueue),$t(r),null);case 4:return Xe(),i===null&&g0(r.stateNode.containerInfo),$t(r),null;case 10:return la(r.type),$t(r),null;case 19:if(Q(fn),d=r.memoizedState,d===null)return $t(r),null;if(y=(r.flags&128)!==0,v=d.rendering,v===null)if(y)Rc(d,!1);else{if(rn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=od(i),v!==null){for(r.flags|=128,Rc(d,!1),i=v.updateQueue,r.updateQueue=i,vd(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)Lx(c,i),c=c.sibling;return he(fn,fn.current&1|2),_t&&ra(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&Ct()>wd&&(r.flags|=128,y=!0,Rc(d,!1),r.lanes=4194304)}else{if(!y)if(i=od(v),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,vd(r,i),Rc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!_t)return $t(r),null}else 2*Ct()-d.renderingStartTime>wd&&c!==536870912&&(r.flags|=128,y=!0,Rc(d,!1),r.lanes=4194304);d.isBackwards?(v.sibling=r.child,r.child=v):(i=d.last,i!==null?i.sibling=v:r.child=v,d.last=v)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Ct(),i.sibling=null,c=fn.current,he(fn,y?c&1|2:c&1),_t&&ra(r,d.treeForkCount),i):($t(r),null);case 22:case 23:return Cs(r),xm(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&($t(r),r.subtreeFlags&6&&(r.flags|=8192)):$t(r),c=r.updateQueue,c!==null&&vd(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),i!==null&&Q(ro),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),la(vn),$t(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function ak(i,r){switch(nm(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return la(vn),Xe(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Dt(r),null;case 31:if(r.memoizedState!==null){if(Cs(r),r.alternate===null)throw Error(s(340));so()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Cs(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));so()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Q(fn),null;case 4:return Xe(),null;case 10:return la(r.type),null;case 22:case 23:return Cs(r),xm(),i!==null&&Q(ro),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return la(vn),null;case 25:return null;default:return null}}function cb(i,r){switch(nm(r),r.tag){case 3:la(vn),Xe();break;case 26:case 27:case 5:Dt(r);break;case 4:Xe();break;case 31:r.memoizedState!==null&&Cs(r);break;case 13:Cs(r);break;case 19:Q(fn);break;case 10:la(r.type);break;case 22:case 23:Cs(r),xm(),i!==null&&Q(ro);break;case 24:la(vn)}}function Mc(i,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&i)===i){d=void 0;var v=c.create,w=c.inst;d=v(),w.destroy=d}c=c.next}while(c!==y)}}catch(P){jt(r,r.return,P)}}function sr(i,r,c){try{var d=r.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var v=y.next;d=v;do{if((d.tag&i)===i){var w=d.inst,P=w.destroy;if(P!==void 0){w.destroy=void 0,y=r;var F=c,ie=P;try{ie()}catch(fe){jt(y,F,fe)}}}d=d.next}while(d!==v)}}catch(fe){jt(r,r.return,fe)}}function ub(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{ey(r,c)}catch(d){jt(i,i.return,d)}}}function db(i,r,c){c.props=ho(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){jt(i,r,d)}}function Dc(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(y){jt(i,r,y)}}function Oi(i,r){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){jt(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){jt(i,r,y)}else c.current=null}function hb(i){var r=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){jt(i,i.return,y)}}function Jm(i,r,c){try{var d=i.stateNode;Ak(d,i.type,c,r),d[yn]=r}catch(y){jt(i,i.return,y)}}function fb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ur(i.type)||i.tag===4}function Qm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||fb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ur(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wm(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=ui));else if(d!==4&&(d===27&&ur(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(Wm(i,r,c),i=i.sibling;i!==null;)Wm(i,r,c),i=i.sibling}function _d(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(d!==4&&(d===27&&ur(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(_d(i,r,c),i=i.sibling;i!==null;)_d(i,r,c),i=i.sibling}function mb(i){var r=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Hn(r,d,c),r[nn]=i,r[yn]=c}catch(v){jt(i,i.return,v)}}var fa=!1,Sn=!1,Xm=!1,pb=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function rk(i,r){if(i=i.containerInfo,b0=zd,i=Ax(i),qf(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var w=0,P=-1,F=-1,ie=0,fe=0,ge=i,ae=null;t:for(;;){for(var oe;ge!==c||y!==0&&ge.nodeType!==3||(P=w+y),ge!==v||d!==0&&ge.nodeType!==3||(F=w+d),ge.nodeType===3&&(w+=ge.nodeValue.length),(oe=ge.firstChild)!==null;)ae=ge,ge=oe;for(;;){if(ge===i)break t;if(ae===c&&++ie===y&&(P=w),ae===v&&++fe===d&&(F=w),(oe=ge.nextSibling)!==null)break;ge=ae,ae=ge.parentNode}ge=oe}c=P===-1||F===-1?null:{start:P,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(v0={focusedElem:i,selectionRange:c},zd=!1,Dn=r;Dn!==null;)if(r=Dn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Dn=i;else for(;Dn!==null;){switch(r=Dn,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)y=i[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,c=r,y=v.memoizedProps,v=v.memoizedState,d=c.stateNode;try{var Ve=ho(c.type,y);i=d.getSnapshotBeforeUpdate(Ve,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ye){jt(c,c.return,Ye)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)S0(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":S0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Dn=i;break}Dn=r.return}}function gb(i,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:pa(i,c),d&4&&Mc(5,c);break;case 1:if(pa(i,c),d&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(w){jt(c,c.return,w)}else{var y=ho(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(w){jt(c,c.return,w)}}d&64&&ub(c),d&512&&Dc(c,c.return);break;case 3:if(pa(i,c),d&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{ey(i,r)}catch(w){jt(c,c.return,w)}}break;case 27:r===null&&d&4&&mb(c);case 26:case 5:pa(i,c),r===null&&d&4&&hb(c),d&512&&Dc(c,c.return);break;case 12:pa(i,c);break;case 31:pa(i,c),d&4&&bb(i,c);break;case 13:pa(i,c),d&4&&vb(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=pk.bind(null,c),jk(i,c))));break;case 22:if(d=c.memoizedState!==null||fa,!d){r=r!==null&&r.memoizedState!==null||Sn,y=fa;var v=Sn;fa=d,(Sn=r)&&!v?ga(i,c,(c.subtreeFlags&8772)!==0):pa(i,c),fa=y,Sn=v}break;case 30:break;default:pa(i,c)}}function xb(i){var r=i.alternate;r!==null&&(i.alternate=null,xb(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Ga(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Wt=null,ds=!1;function ma(i,r,c){for(c=c.child;c!==null;)yb(i,r,c),c=c.sibling}function yb(i,r,c){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Jn,c)}catch{}switch(c.tag){case 26:Sn||Oi(c,r),ma(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Sn||Oi(c,r);var d=Wt,y=ds;ur(c.type)&&(Wt=c.stateNode,ds=!1),ma(i,r,c),zc(c.stateNode),Wt=d,ds=y;break;case 5:Sn||Oi(c,r);case 6:if(d=Wt,y=ds,Wt=null,ma(i,r,c),Wt=d,ds=y,Wt!==null)if(ds)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(c.stateNode)}catch(v){jt(c,r,v)}else try{Wt.removeChild(c.stateNode)}catch(v){jt(c,r,v)}break;case 18:Wt!==null&&(ds?(i=Wt,uv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),_l(i)):uv(Wt,c.stateNode));break;case 4:d=Wt,y=ds,Wt=c.stateNode.containerInfo,ds=!0,ma(i,r,c),Wt=d,ds=y;break;case 0:case 11:case 14:case 15:sr(2,c,r),Sn||sr(4,c,r),ma(i,r,c);break;case 1:Sn||(Oi(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&db(c,r,d)),ma(i,r,c);break;case 21:ma(i,r,c);break;case 22:Sn=(d=Sn)||c.memoizedState!==null,ma(i,r,c),Sn=d;break;default:ma(i,r,c)}}function bb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{_l(i)}catch(c){jt(r,r.return,c)}}}function vb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{_l(i)}catch(c){jt(r,r.return,c)}}function ok(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new pb),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new pb),r;default:throw Error(s(435,i.tag))}}function Td(i,r){var c=ok(i);r.forEach(function(d){if(!c.has(d)){c.add(d);var y=gk.bind(null,i,d);d.then(y,y)}})}function hs(i,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],v=i,w=r,P=w;e:for(;P!==null;){switch(P.tag){case 27:if(ur(P.type)){Wt=P.stateNode,ds=!1;break e}break;case 5:Wt=P.stateNode,ds=!1;break e;case 3:case 4:Wt=P.stateNode.containerInfo,ds=!0;break e}P=P.return}if(Wt===null)throw Error(s(160));yb(v,w,y),Wt=null,ds=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)_b(r,i),r=r.sibling}var gi=null;function _b(i,r){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:hs(r,i),fs(i),d&4&&(sr(3,i,i.return),Mc(3,i),sr(5,i,i.return));break;case 1:hs(r,i),fs(i),d&512&&(Sn||c===null||Oi(c,c.return)),d&64&&fa&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=gi;if(hs(r,i),fs(i),d&512&&(Sn||c===null||Oi(c,c.return)),d&4){var v=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Gs]||v[nn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(d),y.head.insertBefore(v,y.querySelector("head > title"))),Hn(v,d,c),v[nn]=i,sn(v),d=v;break e;case"link":var w=_v("link","href",y).get(d+(c.href||""));if(w){for(var P=0;P<w.length;P++)if(v=w[P],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(P,1);break t}}v=y.createElement(d),Hn(v,d,c),y.head.appendChild(v);break;case"meta":if(w=_v("meta","content",y).get(d+(c.content||""))){for(P=0;P<w.length;P++)if(v=w[P],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(P,1);break t}}v=y.createElement(d),Hn(v,d,c),y.head.appendChild(v);break;default:throw Error(s(468,d))}v[nn]=i,sn(v),d=v}i.stateNode=d}else Tv(y,i.type,i.stateNode);else i.stateNode=vv(y,d,i.memoizedProps);else v!==d?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,d===null?Tv(y,i.type,i.stateNode):vv(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Jm(i,i.memoizedProps,c.memoizedProps)}break;case 27:hs(r,i),fs(i),d&512&&(Sn||c===null||Oi(c,c.return)),c!==null&&d&4&&Jm(i,i.memoizedProps,c.memoizedProps);break;case 5:if(hs(r,i),fs(i),d&512&&(Sn||c===null||Oi(c,c.return)),i.flags&32){y=i.stateNode;try{bn(y,"")}catch(Ve){jt(i,i.return,Ve)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,Jm(i,y,c!==null?c.memoizedProps:y)),d&1024&&(Xm=!0);break;case 6:if(hs(r,i),fs(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Ve){jt(i,i.return,Ve)}}break;case 3:if(Od=null,y=gi,gi=Ld(r.containerInfo),hs(r,i),gi=y,fs(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{_l(r.containerInfo)}catch(Ve){jt(i,i.return,Ve)}Xm&&(Xm=!1,Tb(i));break;case 4:d=gi,gi=Ld(i.stateNode.containerInfo),hs(r,i),fs(i),gi=d;break;case 12:hs(r,i),fs(i);break;case 31:hs(r,i),fs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Td(i,d)));break;case 13:hs(r,i),fs(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ed=Ct()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Td(i,d)));break;case 22:y=i.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,ie=fa,fe=Sn;if(fa=ie||y,Sn=fe||F,hs(r,i),Sn=fe,fa=ie,fs(i),d&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(c===null||F||fa||Sn||fo(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){F=c=r;try{if(v=F.stateNode,y)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{P=F.stateNode;var ge=F.memoizedProps.style,ae=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;P.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ve){jt(F,F.return,Ve)}}}else if(r.tag===6){if(c===null){F=r;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(Ve){jt(F,F.return,Ve)}}}else if(r.tag===18){if(c===null){F=r;try{var oe=F.stateNode;y?dv(oe,!0):dv(F.stateNode,!1)}catch(Ve){jt(F,F.return,Ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Td(i,c))));break;case 19:hs(r,i),fs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Td(i,d)));break;case 30:break;case 21:break;default:hs(r,i),fs(i)}}function fs(i){var r=i.flags;if(r&2){try{for(var c,d=i.return;d!==null;){if(fb(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var y=c.stateNode,v=Qm(i);_d(i,v,y);break;case 5:var w=c.stateNode;c.flags&32&&(bn(w,""),c.flags&=-33);var P=Qm(i);_d(i,P,w);break;case 3:case 4:var F=c.stateNode.containerInfo,ie=Qm(i);Wm(i,ie,F);break;default:throw Error(s(161))}}catch(fe){jt(i,i.return,fe)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Tb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Tb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function pa(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)gb(i,r.alternate,r),r=r.sibling}function fo(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:sr(4,r,r.return),fo(r);break;case 1:Oi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&db(r,r.return,c),fo(r);break;case 27:zc(r.stateNode);case 26:case 5:Oi(r,r.return),fo(r);break;case 22:r.memoizedState===null&&fo(r);break;case 30:fo(r);break;default:fo(r)}i=i.sibling}}function ga(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,y=i,v=r,w=v.flags;switch(v.tag){case 0:case 11:case 15:ga(y,v,c),Mc(4,v);break;case 1:if(ga(y,v,c),d=v,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ie){jt(d,d.return,ie)}if(d=v,y=d.updateQueue,y!==null){var P=d.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)Zx(F[y],P)}catch(ie){jt(d,d.return,ie)}}c&&w&64&&ub(v),Dc(v,v.return);break;case 27:mb(v);case 26:case 5:ga(y,v,c),c&&d===null&&w&4&&hb(v),Dc(v,v.return);break;case 12:ga(y,v,c);break;case 31:ga(y,v,c),c&&w&4&&bb(y,v);break;case 13:ga(y,v,c),c&&w&4&&vb(y,v);break;case 22:v.memoizedState===null&&ga(y,v,c),Dc(v,v.return);break;case 30:break;default:ga(y,v,c)}r=r.sibling}}function Zm(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&bc(c))}function e0(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&bc(i))}function xi(i,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Sb(i,r,c,d),r=r.sibling}function Sb(i,r,c,d){var y=r.flags;switch(r.tag){case 0:case 11:case 15:xi(i,r,c,d),y&2048&&Mc(9,r);break;case 1:xi(i,r,c,d);break;case 3:xi(i,r,c,d),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&bc(i)));break;case 12:if(y&2048){xi(i,r,c,d),i=r.stateNode;try{var v=r.memoizedProps,w=v.id,P=v.onPostCommit;typeof P=="function"&&P(w,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){jt(r,r.return,F)}}else xi(i,r,c,d);break;case 31:xi(i,r,c,d);break;case 13:xi(i,r,c,d);break;case 23:break;case 22:v=r.stateNode,w=r.alternate,r.memoizedState!==null?v._visibility&2?xi(i,r,c,d):Pc(i,r):v._visibility&2?xi(i,r,c,d):(v._visibility|=2,ul(i,r,c,d,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Zm(w,r);break;case 24:xi(i,r,c,d),y&2048&&e0(r.alternate,r);break;default:xi(i,r,c,d)}}function ul(i,r,c,d,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,w=r,P=c,F=d,ie=w.flags;switch(w.tag){case 0:case 11:case 15:ul(v,w,P,F,y),Mc(8,w);break;case 23:break;case 22:var fe=w.stateNode;w.memoizedState!==null?fe._visibility&2?ul(v,w,P,F,y):Pc(v,w):(fe._visibility|=2,ul(v,w,P,F,y)),y&&ie&2048&&Zm(w.alternate,w);break;case 24:ul(v,w,P,F,y),y&&ie&2048&&e0(w.alternate,w);break;default:ul(v,w,P,F,y)}r=r.sibling}}function Pc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,d=r,y=d.flags;switch(d.tag){case 22:Pc(c,d),y&2048&&Zm(d.alternate,d);break;case 24:Pc(c,d),y&2048&&e0(d.alternate,d);break;default:Pc(c,d)}r=r.sibling}}var jc=8192;function dl(i,r,c){if(i.subtreeFlags&jc)for(i=i.child;i!==null;)Eb(i,r,c),i=i.sibling}function Eb(i,r,c){switch(i.tag){case 26:dl(i,r,c),i.flags&jc&&i.memoizedState!==null&&$k(c,gi,i.memoizedState,i.memoizedProps);break;case 5:dl(i,r,c);break;case 3:case 4:var d=gi;gi=Ld(i.stateNode.containerInfo),dl(i,r,c),gi=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=jc,jc=16777216,dl(i,r,c),jc=d):dl(i,r,c));break;default:dl(i,r,c)}}function wb(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Lc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];Dn=d,Ab(d,i)}wb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Nb(i),i=i.sibling}function Nb(i){switch(i.tag){case 0:case 11:case 15:Lc(i),i.flags&2048&&sr(9,i,i.return);break;case 3:Lc(i);break;case 12:Lc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Sd(i)):Lc(i);break;default:Lc(i)}}function Sd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];Dn=d,Ab(d,i)}wb(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:sr(8,r,r.return),Sd(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Sd(r));break;default:Sd(r)}i=i.sibling}}function Ab(i,r){for(;Dn!==null;){var c=Dn;switch(c.tag){case 0:case 11:case 15:sr(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:bc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Dn=d;else e:for(c=i;Dn!==null;){d=Dn;var y=d.sibling,v=d.return;if(xb(d),d===c){Dn=null;break e}if(y!==null){y.return=v,Dn=y;break e}Dn=v}}}var lk={getCacheForType:function(i){var r=Gn(vn),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return Gn(vn).controller.signal}},ck=typeof WeakMap=="function"?WeakMap:Map,Rt=0,zt=null,mt=null,gt=0,Pt=0,Is=null,ir=!1,hl=!1,t0=!1,xa=0,rn=0,ar=0,mo=0,n0=0,Rs=0,fl=0,Uc=null,ms=null,s0=!1,Ed=0,kb=0,wd=1/0,Nd=null,rr=null,Cn=0,or=null,ml=null,ya=0,i0=0,a0=null,Cb=null,Oc=0,r0=null;function Ms(){return(Rt&2)!==0&&gt!==0?gt&-gt:J.T!==null?h0():Uo()}function Ib(){if(Rs===0)if((gt&536870912)===0||_t){var i=On;On<<=1,(On&3932160)===0&&(On=262144),Rs=i}else Rs=536870912;return i=ks.current,i!==null&&(i.flags|=32),Rs}function ps(i,r,c){(i===zt&&(Pt===2||Pt===9)||i.cancelPendingCommit!==null)&&(pl(i,0),lr(i,gt,Rs,!1)),Ai(i,c),((Rt&2)===0||i!==zt)&&(i===zt&&((Rt&2)===0&&(mo|=c),rn===4&&lr(i,gt,Rs,!1)),Vi(i))}function Rb(i,r,c){if((Rt&6)!==0)throw Error(s(327));var d=!c&&(r&127)===0&&(r&i.expiredLanes)===0||us(i,r),y=d?hk(i,r):l0(i,r,!0),v=d;do{if(y===0){hl&&!d&&lr(i,r,0,!1);break}else{if(c=i.current.alternate,v&&!uk(c)){y=l0(i,r,!1),v=!1;continue}if(y===2){if(v=r,i.errorRecoveryDisabledLanes&v)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var P=i;y=Uc;var F=P.current.memoizedState.isDehydrated;if(F&&(pl(P,w).flags|=256),w=l0(P,w,!1),w!==2){if(t0&&!F){P.errorRecoveryDisabledLanes|=v,mo|=v,y=4;break e}v=ms,ms=y,v!==null&&(ms===null?ms=v:ms.push.apply(ms,v))}y=w}if(v=!1,y!==2)continue}}if(y===1){pl(i,0),lr(i,r,0,!0);break}e:{switch(d=i,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:lr(d,r,Rs,!ir);break e;case 2:ms=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Ed+300-Ct(),10<y)){if(lr(d,r,Rs,!ir),cs(d,0,!0)!==0)break e;ya=r,d.timeoutHandle=lv(Mb.bind(null,d,c,ms,Nd,s0,r,Rs,mo,fl,ir,v,"Throttled",-0,0),y);break e}Mb(d,c,ms,Nd,s0,r,Rs,mo,fl,ir,v,null,-0,0)}}break}while(!0);Vi(i)}function Mb(i,r,c,d,y,v,w,P,F,ie,fe,ge,ae,oe){if(i.timeoutHandle=-1,ge=r.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},Eb(r,v,ge);var Ve=(v&62914560)===v?Ed-Ct():(v&4194048)===v?kb-Ct():0;if(Ve=Yk(ge,Ve),Ve!==null){ya=v,i.cancelPendingCommit=Ve(Bb.bind(null,i,r,v,c,d,y,w,P,F,fe,ge,null,ae,oe)),lr(i,v,w,!ie);return}}Bb(i,r,v,c,d,y,w,P,F)}function uk(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],v=y.getSnapshot;y=y.value;try{if(!Ns(v(),y))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function lr(i,r,c,d){r&=~n0,r&=~mo,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var y=r;0<y;){var v=31-Ft(y),w=1<<v;d[v]=-1,y&=~w}c!==0&&ea(i,c,r)}function Ad(){return(Rt&6)===0?(Vc(0),!1):!0}function o0(){if(mt!==null){if(Pt===0)var i=mt.return;else i=mt,oa=io=null,Sm(i),al=null,_c=0,i=mt;for(;i!==null;)cb(i.alternate,i),i=i.return;mt=null}}function pl(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Ik(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),ya=0,o0(),zt=i,mt=c=aa(i.current,null),gt=r,Pt=0,Is=null,ir=!1,hl=us(i,r),t0=!1,fl=Rs=n0=mo=ar=rn=0,ms=Uc=null,s0=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var y=31-Ft(d),v=1<<y;r|=i[y],d&=~v}return xa=r,Yu(),c}function Db(i,r){ct=null,J.H=Cc,r===il||r===nd?(r=Jx(),Pt=3):r===dm?(r=Jx(),Pt=4):Pt=r===Vm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Is=r,mt===null&&(rn=1,gd(i,Js(r,i.current)))}function Pb(){var i=ks.current;return i===null?!0:(gt&4194048)===gt?Zs===null:(gt&62914560)===gt||(gt&536870912)!==0?i===Zs:!1}function jb(){var i=J.H;return J.H=Cc,i===null?Cc:i}function Lb(){var i=J.A;return J.A=lk,i}function kd(){rn=4,ir||(gt&4194048)!==gt&&ks.current!==null||(hl=!0),(ar&134217727)===0&&(mo&134217727)===0||zt===null||lr(zt,gt,Rs,!1)}function l0(i,r,c){var d=Rt;Rt|=2;var y=jb(),v=Lb();(zt!==i||gt!==r)&&(Nd=null,pl(i,r)),r=!1;var w=rn;e:do try{if(Pt!==0&&mt!==null){var P=mt,F=Is;switch(Pt){case 8:o0(),w=6;break e;case 3:case 2:case 9:case 6:ks.current===null&&(r=!0);var ie=Pt;if(Pt=0,Is=null,gl(i,P,F,ie),c&&hl){w=0;break e}break;default:ie=Pt,Pt=0,Is=null,gl(i,P,F,ie)}}dk(),w=rn;break}catch(fe){Db(i,fe)}while(!0);return r&&i.shellSuspendCounter++,oa=io=null,Rt=d,J.H=y,J.A=v,mt===null&&(zt=null,gt=0,Yu()),w}function dk(){for(;mt!==null;)Ub(mt)}function hk(i,r){var c=Rt;Rt|=2;var d=jb(),y=Lb();zt!==i||gt!==r?(Nd=null,wd=Ct()+500,pl(i,r)):hl=us(i,r);e:do try{if(Pt!==0&&mt!==null){r=mt;var v=Is;t:switch(Pt){case 1:Pt=0,Is=null,gl(i,r,v,1);break;case 2:case 9:if($x(v)){Pt=0,Is=null,Ob(r);break}r=function(){Pt!==2&&Pt!==9||zt!==i||(Pt=7),Vi(i)},v.then(r,r);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:$x(v)?(Pt=0,Is=null,Ob(r)):(Pt=0,Is=null,gl(i,r,v,7));break;case 5:var w=null;switch(mt.tag){case 26:w=mt.memoizedState;case 5:case 27:var P=mt;if(w?Sv(w):P.stateNode.complete){Pt=0,Is=null;var F=P.sibling;if(F!==null)mt=F;else{var ie=P.return;ie!==null?(mt=ie,Cd(ie)):mt=null}break t}}Pt=0,Is=null,gl(i,r,v,5);break;case 6:Pt=0,Is=null,gl(i,r,v,6);break;case 8:o0(),rn=6;break e;default:throw Error(s(462))}}fk();break}catch(fe){Db(i,fe)}while(!0);return oa=io=null,J.H=d,J.A=y,Rt=c,mt!==null?0:(zt=null,gt=0,Yu(),rn)}function fk(){for(;mt!==null&&!xn();)Ub(mt)}function Ub(i){var r=ob(i.alternate,i,xa);i.memoizedProps=i.pendingProps,r===null?Cd(i):mt=r}function Ob(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=tb(c,r,r.pendingProps,r.type,void 0,gt);break;case 11:r=tb(c,r,r.pendingProps,r.type.render,r.ref,gt);break;case 5:Sm(r);default:cb(c,r),r=mt=Lx(r,xa),r=ob(c,r,xa)}i.memoizedProps=i.pendingProps,r===null?Cd(i):mt=r}function gl(i,r,c,d){oa=io=null,Sm(r),al=null,_c=0;var y=r.return;try{if(tk(i,y,r,c,gt)){rn=1,gd(i,Js(c,i.current)),mt=null;return}}catch(v){if(y!==null)throw mt=y,v;rn=1,gd(i,Js(c,i.current)),mt=null;return}r.flags&32768?(_t||d===1?i=!0:hl||(gt&536870912)!==0?i=!1:(ir=i=!0,(d===2||d===9||d===3||d===6)&&(d=ks.current,d!==null&&d.tag===13&&(d.flags|=16384))),Vb(r,i)):Cd(r)}function Cd(i){var r=i;do{if((r.flags&32768)!==0){Vb(r,ir);return}i=r.return;var c=ik(r.alternate,r,xa);if(c!==null){mt=c;return}if(r=r.sibling,r!==null){mt=r;return}mt=r=i}while(r!==null);rn===0&&(rn=5)}function Vb(i,r){do{var c=ak(i.alternate,i);if(c!==null){c.flags&=32767,mt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){mt=i;return}mt=i=c}while(i!==null);rn=6,mt=null}function Bb(i,r,c,d,y,v,w,P,F){i.cancelPendingCommit=null;do Id();while(Cn!==0);if((Rt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=Qf,rc(i,c,v,w,P,F),i===zt&&(mt=zt=null,gt=0),ml=r,or=i,ya=c,i0=v,a0=y,Cb=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,xk(_s,function(){return qb(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=J.T,J.T=null,y=le.p,le.p=2,w=Rt,Rt|=4;try{rk(i,r,c)}finally{Rt=w,le.p=y,J.T=d}}Cn=1,Gb(),zb(),Hb()}}function Gb(){if(Cn===1){Cn=0;var i=or,r=ml,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=J.T,J.T=null;var d=le.p;le.p=2;var y=Rt;Rt|=4;try{_b(r,i);var v=v0,w=Ax(i.containerInfo),P=v.focusedElem,F=v.selectionRange;if(w!==P&&P&&P.ownerDocument&&Nx(P.ownerDocument.documentElement,P)){if(F!==null&&qf(P)){var ie=F.start,fe=F.end;if(fe===void 0&&(fe=ie),"selectionStart"in P)P.selectionStart=ie,P.selectionEnd=Math.min(fe,P.value.length);else{var ge=P.ownerDocument||document,ae=ge&&ge.defaultView||window;if(ae.getSelection){var oe=ae.getSelection(),Ve=P.textContent.length,Ye=Math.min(F.start,Ve),Vt=F.end===void 0?Ye:Math.min(F.end,Ve);!oe.extend&&Ye>Vt&&(w=Vt,Vt=Ye,Ye=w);var W=wx(P,Ye),K=wx(P,Vt);if(W&&K&&(oe.rangeCount!==1||oe.anchorNode!==W.node||oe.anchorOffset!==W.offset||oe.focusNode!==K.node||oe.focusOffset!==K.offset)){var ne=ge.createRange();ne.setStart(W.node,W.offset),oe.removeAllRanges(),Ye>Vt?(oe.addRange(ne),oe.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),oe.addRange(ne))}}}}for(ge=[],oe=P;oe=oe.parentNode;)oe.nodeType===1&&ge.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ge.length;P++){var me=ge[P];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}zd=!!b0,v0=b0=null}finally{Rt=y,le.p=d,J.T=c}}i.current=r,Cn=2}}function zb(){if(Cn===2){Cn=0;var i=or,r=ml,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=J.T,J.T=null;var d=le.p;le.p=2;var y=Rt;Rt|=4;try{gb(i,r.alternate,r)}finally{Rt=y,le.p=d,J.T=c}}Cn=3}}function Hb(){if(Cn===4||Cn===3){Cn=0,Bt();var i=or,r=ml,c=ya,d=Cb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Cn=5:(Cn=0,ml=or=null,Fb(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(rr=null),li(c),r=r.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Jn,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=J.T,y=le.p,le.p=2,J.T=null;try{for(var v=i.onRecoverableError,w=0;w<d.length;w++){var P=d[w];v(P.value,{componentStack:P.stack})}}finally{J.T=r,le.p=y}}(ya&3)!==0&&Id(),Vi(i),y=i.pendingLanes,(c&261930)!==0&&(y&42)!==0?i===r0?Oc++:(Oc=0,r0=i):Oc=0,Vc(0)}}function Fb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,bc(r)))}function Id(){return Gb(),zb(),Hb(),qb()}function qb(){if(Cn!==5)return!1;var i=or,r=i0;i0=0;var c=li(ya),d=J.T,y=le.p;try{le.p=32>c?32:c,J.T=null,c=a0,a0=null;var v=or,w=ya;if(Cn=0,ml=or=null,ya=0,(Rt&6)!==0)throw Error(s(331));var P=Rt;if(Rt|=4,Nb(v.current),Sb(v,v.current,w,c),Rt=P,Vc(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Jn,v)}catch{}return!0}finally{le.p=y,J.T=d,Fb(i,r)}}function Kb(i,r,c){r=Js(c,r),r=Om(i.stateNode,r,2),i=er(i,r,2),i!==null&&(Ai(i,2),Vi(i))}function jt(i,r,c){if(i.tag===3)Kb(i,i,c);else for(;r!==null;){if(r.tag===3){Kb(r,i,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(rr===null||!rr.has(d))){i=Js(c,i),c=$y(2),d=er(r,c,2),d!==null&&(Yy(c,d,r,i),Ai(d,2),Vi(d));break}}r=r.return}}function c0(i,r,c){var d=i.pingCache;if(d===null){d=i.pingCache=new ck;var y=new Set;d.set(r,y)}else y=d.get(r),y===void 0&&(y=new Set,d.set(r,y));y.has(c)||(t0=!0,y.add(c),i=mk.bind(null,i,r,c),r.then(i,i))}function mk(i,r,c){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,zt===i&&(gt&c)===c&&(rn===4||rn===3&&(gt&62914560)===gt&&300>Ct()-Ed?(Rt&2)===0&&pl(i,0):n0|=c,fl===gt&&(fl=0)),Vi(i)}function $b(i,r){r===0&&(r=oi()),i=to(i,r),i!==null&&(Ai(i,r),Vi(i))}function pk(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),$b(i,c)}function gk(i,r){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),$b(i,c)}function xk(i,r){return Oe(i,r)}var Rd=null,xl=null,u0=!1,Md=!1,d0=!1,cr=0;function Vi(i){i!==xl&&i.next===null&&(xl===null?Rd=xl=i:xl=xl.next=i),Md=!0,u0||(u0=!0,bk())}function Vc(i,r){if(!d0&&Md){d0=!0;do for(var c=!1,d=Rd;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var v=0;else{var w=d.suspendedLanes,P=d.pingedLanes;v=(1<<31-Ft(42|i)+1)-1,v&=y&~(w&~P),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,Wb(d,v))}else v=gt,v=cs(d,d===zt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||us(d,v)||(c=!0,Wb(d,v));d=d.next}while(c);d0=!1}}function yk(){Yb()}function Yb(){Md=u0=!1;var i=0;cr!==0&&Ck()&&(i=cr);for(var r=Ct(),c=null,d=Rd;d!==null;){var y=d.next,v=Jb(d,r);v===0?(d.next=null,c===null?Rd=y:c.next=y,y===null&&(xl=c)):(c=d,(i!==0||(v&3)!==0)&&(Md=!0)),d=y}Cn!==0&&Cn!==5||Vc(i),cr!==0&&(cr=0)}function Jb(i,r){for(var c=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var w=31-Ft(v),P=1<<w,F=y[w];F===-1?((P&c)===0||(P&d)!==0)&&(y[w]=st(P,r)):F<=r&&(i.expiredLanes|=P),v&=~P}if(r=zt,c=gt,c=cs(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===r&&(Pt===2||Pt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&He(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||us(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(d!==null&&He(d),li(c)){case 2:case 8:c=Un;break;case 32:c=_s;break;case 268435456:c=Zi;break;default:c=_s}return d=Qb.bind(null,i),c=Oe(c,d),i.callbackPriority=r,i.callbackNode=c,r}return d!==null&&d!==null&&He(d),i.callbackPriority=2,i.callbackNode=null,2}function Qb(i,r){if(Cn!==0&&Cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Id()&&i.callbackNode!==c)return null;var d=gt;return d=cs(i,i===zt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Rb(i,d,r),Jb(i,Ct()),i.callbackNode!=null&&i.callbackNode===c?Qb.bind(null,i):null)}function Wb(i,r){if(Id())return null;Rb(i,r,!0)}function bk(){Rk(function(){(Rt&6)!==0?Oe(js,yk):Yb()})}function h0(){if(cr===0){var i=nl;i===0&&(i=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),cr=i}return cr}function Xb(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Go(""+i)}function Zb(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function vk(i,r,c,d,y){if(r==="submit"&&c&&c.stateNode===y){var v=Xb((y[yn]||null).action),w=d.submitter;w&&(r=(r=w[yn]||null)?Xb(r.formAction):w.getAttribute("formAction"),r!==null&&(v=r,w=null));var P=new Mi("action","action",null,d,y);i.push({event:P,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(cr!==0){var F=w?Zb(y,w):new FormData(y);Mm(c,{pending:!0,data:F,method:y.method,action:v},null,F)}}else typeof v=="function"&&(P.preventDefault(),F=w?Zb(y,w):new FormData(y),Mm(c,{pending:!0,data:F,method:y.method,action:v},v,F))},currentTarget:y}]})}}for(var f0=0;f0<Jf.length;f0++){var m0=Jf[f0],_k=m0.toLowerCase(),Tk=m0[0].toUpperCase()+m0.slice(1);pi(_k,"on"+Tk)}pi(Ix,"onAnimationEnd"),pi(Rx,"onAnimationIteration"),pi(Mx,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(OA,"onTransitionRun"),pi(VA,"onTransitionStart"),pi(BA,"onTransitionCancel"),pi(Dx,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bc));function ev(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],y=d.event;d=d.listeners;e:{var v=void 0;if(r)for(var w=d.length-1;0<=w;w--){var P=d[w],F=P.instance,ie=P.currentTarget;if(P=P.listener,F!==v&&y.isPropagationStopped())break e;v=P,y.currentTarget=ie;try{v(y)}catch(fe){$u(fe)}y.currentTarget=null,v=F}else for(w=0;w<d.length;w++){if(P=d[w],F=P.instance,ie=P.currentTarget,P=P.listener,F!==v&&y.isPropagationStopped())break e;v=P,y.currentTarget=ie;try{v(y)}catch(fe){$u(fe)}y.currentTarget=null,v=F}}}}function pt(i,r){var c=r[Ba];c===void 0&&(c=r[Ba]=new Set);var d=i+"__bubble";c.has(d)||(tv(r,i,2,!1),c.add(d))}function p0(i,r,c){var d=0;r&&(d|=4),tv(c,i,d,r)}var Dd="_reactListening"+Math.random().toString(36).slice(2);function g0(i){if(!i[Dd]){i[Dd]=!0,Vr.forEach(function(c){c!=="selectionchange"&&(Sk.has(c)||p0(c,!1,i),p0(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Dd]||(r[Dd]=!0,p0("selectionchange",!1,r))}}function tv(i,r,c,d){switch(Iv(r)){case 2:var y=Wk;break;case 8:y=Xk;break;default:y=R0}c=y.bind(null,r,c,i),y=void 0,!$r||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(r,c,{capture:!0,passive:y}):i.addEventListener(r,c,!0):y!==void 0?i.addEventListener(r,c,{passive:y}):i.addEventListener(r,c,!1)}function x0(i,r,c,d,y){var v=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var P=d.stateNode.containerInfo;if(P===y)break;if(w===4)for(w=d.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;P!==null;){if(w=Es(P),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){d=v=w;continue e}P=P.parentNode}}d=d.return}Fa(function(){var ie=v,fe=qs(c),ge=[];e:{var ae=Px.get(i);if(ae!==void 0){var oe=Mi,Ve=i;switch(i){case"keypress":if(Jr(c)===0)break e;case"keydown":case"keyup":oe=Fu;break;case"focusin":Ve="focus",oe=Wr;break;case"focusout":Ve="blur",oe=Wr;break;case"beforeblur":case"afterblur":oe=Wr;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=S;break;case Ix:case Rx:case Mx:oe=Uu;break;case Dx:oe=V;break;case"scroll":case"scrollend":oe=uc;break;case"wheel":oe=re;break;case"copy":case"cut":case"paste":oe=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ia;break;case"toggle":case"beforetoggle":oe=lt}var Ye=(r&4)!==0,Vt=!Ye&&(i==="scroll"||i==="scrollend"),W=Ye?ae!==null?ae+"Capture":null:ae;Ye=[];for(var K=ie,ne;K!==null;){var me=K;if(ne=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ne===null||W===null||(me=di(K,W),me!=null&&Ye.push(Gc(K,me,ne))),Vt)break;K=K.return}0<Ye.length&&(ae=new oe(ae,Ve,null,c,fe),ge.push({event:ae,listeners:Ye}))}}if((r&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",oe=i==="mouseout"||i==="pointerout",ae&&c!==oc&&(Ve=c.relatedTarget||c.fromElement)&&(Es(Ve)||Ve[Bs]))break e;if((oe||ae)&&(ae=fe.window===fe?fe:(ae=fe.ownerDocument)?ae.defaultView||ae.parentWindow:window,oe?(Ve=c.relatedTarget||c.toElement,oe=ie,Ve=Ve?Es(Ve):null,Ve!==null&&(Vt=l(Ve),Ye=Ve.tag,Ve!==Vt||Ye!==5&&Ye!==27&&Ye!==6)&&(Ve=null)):(oe=null,Ve=ie),oe!==Ve)){if(Ye=dc,me="onMouseLeave",W="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&(Ye=ia,me="onPointerLeave",W="onPointerEnter",K="pointer"),Vt=oe==null?ae:Mn(oe),ne=Ve==null?ae:Mn(Ve),ae=new Ye(me,K+"leave",oe,c,fe),ae.target=Vt,ae.relatedTarget=ne,me=null,Es(fe)===ie&&(Ye=new Ye(W,K+"enter",Ve,c,fe),Ye.target=ne,Ye.relatedTarget=Vt,me=Ye),Vt=me,oe&&Ve)t:{for(Ye=Ek,W=oe,K=Ve,ne=0,me=W;me;me=Ye(me))ne++;me=0;for(var Fe=K;Fe;Fe=Ye(Fe))me++;for(;0<ne-me;)W=Ye(W),ne--;for(;0<me-ne;)K=Ye(K),me--;for(;ne--;){if(W===K||K!==null&&W===K.alternate){Ye=W;break t}W=Ye(W),K=Ye(K)}Ye=null}else Ye=null;oe!==null&&nv(ge,ae,oe,Ye,!1),Ve!==null&&Vt!==null&&nv(ge,Vt,Ve,Ye,!0)}}e:{if(ae=ie?Mn(ie):window,oe=ae.nodeName&&ae.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ae.type==="file")var Nt=bx;else if(xx(ae))if(vx)Nt=jA;else{Nt=DA;var ze=MA}else oe=ae.nodeName,!oe||oe.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ie&&Fs(ie.elementType)&&(Nt=bx):Nt=PA;if(Nt&&(Nt=Nt(i,ie))){yx(ge,Nt,c,fe);break e}ze&&ze(i,ae,ie),i==="focusout"&&ie&&ae.type==="number"&&ie.memoizedProps.value!=null&&Gt(ae,"number",ae.value)}switch(ze=ie?Mn(ie):window,i){case"focusin":(xx(ze)||ze.contentEditable==="true")&&(Yo=ze,Kf=ie,gc=null);break;case"focusout":gc=Kf=Yo=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,kx(ge,c,fe);break;case"selectionchange":if(UA)break;case"keydown":case"keyup":kx(ge,c,fe)}var ut;if(It)e:{switch(i){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else $o?Xr(i,c)&&(xt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(xt="onCompositionStart");xt&&(ji&&c.locale!=="ko"&&($o||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&$o&&(ut=cc()):(Ri=fe,lc="value"in Ri?Ri.value:Ri.textContent,$o=!0)),ze=Pd(ie,xt),0<ze.length&&(xt=new Pi(xt,i,null,c,fe),ge.push({event:xt,listeners:ze}),ut?xt.data=ut:(ut=Ko(c),ut!==null&&(xt.data=ut)))),(ut=$s?kA(i,c):CA(i,c))&&(xt=Pd(ie,"onBeforeInput"),0<xt.length&&(ze=new Pi("onBeforeInput","beforeinput",null,c,fe),ge.push({event:ze,listeners:xt}),ze.data=ut)),vk(ge,i,ie,c,fe)}ev(ge,r)})}function Gc(i,r,c){return{instance:i,listener:r,currentTarget:c}}function Pd(i,r){for(var c=r+"Capture",d=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=di(i,c),y!=null&&d.unshift(Gc(i,y,v)),y=di(i,r),y!=null&&d.push(Gc(i,y,v))),i.tag===3)return d;i=i.return}return[]}function Ek(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function nv(i,r,c,d,y){for(var v=r._reactName,w=[];c!==null&&c!==d;){var P=c,F=P.alternate,ie=P.stateNode;if(P=P.tag,F!==null&&F===d)break;P!==5&&P!==26&&P!==27||ie===null||(F=ie,y?(ie=di(c,v),ie!=null&&w.unshift(Gc(c,ie,F))):y||(ie=di(c,v),ie!=null&&w.push(Gc(c,ie,F)))),c=c.return}w.length!==0&&i.push({event:r,listeners:w})}var wk=/\r\n?/g,Nk=/\u0000|\uFFFD/g;function sv(i){return(typeof i=="string"?i:""+i).replace(wk,`
`).replace(Nk,"")}function iv(i,r){return r=sv(r),sv(i)===r}function Ot(i,r,c,d,y,v){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||bn(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&bn(i,""+d);break;case"className":be(i,"class",d);break;case"tabIndex":be(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":be(i,c,d);break;case"style":ci(i,d,v);break;case"data":if(r!=="object"){be(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Go(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(r!=="input"&&Ot(i,r,"name",y.name,y,null),Ot(i,r,"formEncType",y.formEncType,y,null),Ot(i,r,"formMethod",y.formMethod,y,null),Ot(i,r,"formTarget",y.formTarget,y,null)):(Ot(i,r,"encType",y.encType,y,null),Ot(i,r,"method",y.method,y,null),Ot(i,r,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Go(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=ui);break;case"onScroll":d!=null&&pt("scroll",i);break;case"onScrollEnd":d!=null&&pt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=Go(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":pt("beforetoggle",i),pt("toggle",i),Y(i,"popover",d);break;case"xlinkActuate":_e(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":_e(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":_e(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":_e(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":_e(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":_e(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":_e(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":_e(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":_e(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Y(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=qr.get(c)||c,Y(i,c,d))}}function y0(i,r,c,d,y,v){switch(c){case"style":ci(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?bn(i,d):(typeof d=="number"||typeof d=="bigint")&&bn(i,""+d);break;case"onScroll":d!=null&&pt("scroll",i);break;case"onScrollEnd":d!=null&&pt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Br.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),r=c.slice(2,y?c.length-7:void 0),v=i[yn]||null,v=v!=null?v[c]:null,typeof v=="function"&&i.removeEventListener(r,v,y),typeof d=="function")){typeof v!="function"&&v!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,d,y);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):Y(i,c,d)}}}function Hn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",i),pt("load",i);var d=!1,y=!1,v;for(v in c)if(c.hasOwnProperty(v)){var w=c[v];if(w!=null)switch(v){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ot(i,r,v,w,c,null)}}y&&Ot(i,r,"srcSet",c.srcSet,c,null),d&&Ot(i,r,"src",c.src,c,null);return;case"input":pt("invalid",i);var P=v=w=y=null,F=null,ie=null;for(d in c)if(c.hasOwnProperty(d)){var fe=c[d];if(fe!=null)switch(d){case"name":y=fe;break;case"type":w=fe;break;case"checked":F=fe;break;case"defaultChecked":ie=fe;break;case"value":v=fe;break;case"defaultValue":P=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,r));break;default:Ot(i,r,d,fe,c,null)}}Tt(i,v,P,F,ie,w,y,!1);return;case"select":pt("invalid",i),d=w=v=null;for(y in c)if(c.hasOwnProperty(y)&&(P=c[y],P!=null))switch(y){case"value":v=P;break;case"defaultValue":w=P;break;case"multiple":d=P;default:Ot(i,r,y,P,c,null)}r=v,c=w,i.multiple=!!d,r!=null?qt(i,!!d,r,!1):c!=null&&qt(i,!!d,c,!0);return;case"textarea":pt("invalid",i),v=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(P=c[w],P!=null))switch(w){case"value":d=P;break;case"defaultValue":y=P;break;case"children":v=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:Ot(i,r,w,P,c,null)}kn(i,d,y,v);return;case"option":for(F in c)if(c.hasOwnProperty(F)&&(d=c[F],d!=null))switch(F){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ot(i,r,F,d,c,null)}return;case"dialog":pt("beforetoggle",i),pt("toggle",i),pt("cancel",i),pt("close",i);break;case"iframe":case"object":pt("load",i);break;case"video":case"audio":for(d=0;d<Bc.length;d++)pt(Bc[d],i);break;case"image":pt("error",i),pt("load",i);break;case"details":pt("toggle",i);break;case"embed":case"source":case"link":pt("error",i),pt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in c)if(c.hasOwnProperty(ie)&&(d=c[ie],d!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ot(i,r,ie,d,c,null)}return;default:if(Fs(r)){for(fe in c)c.hasOwnProperty(fe)&&(d=c[fe],d!==void 0&&y0(i,r,fe,d,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(d=c[P],d!=null&&Ot(i,r,P,d,c,null))}function Ak(i,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,w=null,P=null,F=null,ie=null,fe=null;for(oe in c){var ge=c[oe];if(c.hasOwnProperty(oe)&&ge!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":F=ge;default:d.hasOwnProperty(oe)||Ot(i,r,oe,null,d,ge)}}for(var ae in d){var oe=d[ae];if(ge=c[ae],d.hasOwnProperty(ae)&&(oe!=null||ge!=null))switch(ae){case"type":v=oe;break;case"name":y=oe;break;case"checked":ie=oe;break;case"defaultChecked":fe=oe;break;case"value":w=oe;break;case"defaultValue":P=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,r));break;default:oe!==ge&&Ot(i,r,ae,oe,d,ge)}}dt(i,w,P,F,ie,fe,v,y);return;case"select":oe=w=P=ae=null;for(v in c)if(F=c[v],c.hasOwnProperty(v)&&F!=null)switch(v){case"value":break;case"multiple":oe=F;default:d.hasOwnProperty(v)||Ot(i,r,v,null,d,F)}for(y in d)if(v=d[y],F=c[y],d.hasOwnProperty(y)&&(v!=null||F!=null))switch(y){case"value":ae=v;break;case"defaultValue":P=v;break;case"multiple":w=v;default:v!==F&&Ot(i,r,y,v,d,F)}r=P,c=w,d=oe,ae!=null?qt(i,!!c,ae,!1):!!d!=!!c&&(r!=null?qt(i,!!c,r,!0):qt(i,!!c,c?[]:"",!1));return;case"textarea":oe=ae=null;for(P in c)if(y=c[P],c.hasOwnProperty(P)&&y!=null&&!d.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ot(i,r,P,null,d,y)}for(w in d)if(y=d[w],v=c[w],d.hasOwnProperty(w)&&(y!=null||v!=null))switch(w){case"value":ae=y;break;case"defaultValue":oe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&Ot(i,r,w,y,d,v)}dn(i,ae,oe);return;case"option":for(var Ve in c)if(ae=c[Ve],c.hasOwnProperty(Ve)&&ae!=null&&!d.hasOwnProperty(Ve))switch(Ve){case"selected":i.selected=!1;break;default:Ot(i,r,Ve,null,d,ae)}for(F in d)if(ae=d[F],oe=c[F],d.hasOwnProperty(F)&&ae!==oe&&(ae!=null||oe!=null))switch(F){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Ot(i,r,F,ae,d,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in c)ae=c[Ye],c.hasOwnProperty(Ye)&&ae!=null&&!d.hasOwnProperty(Ye)&&Ot(i,r,Ye,null,d,ae);for(ie in d)if(ae=d[ie],oe=c[ie],d.hasOwnProperty(ie)&&ae!==oe&&(ae!=null||oe!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:Ot(i,r,ie,ae,d,oe)}return;default:if(Fs(r)){for(var Vt in c)ae=c[Vt],c.hasOwnProperty(Vt)&&ae!==void 0&&!d.hasOwnProperty(Vt)&&y0(i,r,Vt,void 0,d,ae);for(fe in d)ae=d[fe],oe=c[fe],!d.hasOwnProperty(fe)||ae===oe||ae===void 0&&oe===void 0||y0(i,r,fe,ae,d,oe);return}}for(var W in c)ae=c[W],c.hasOwnProperty(W)&&ae!=null&&!d.hasOwnProperty(W)&&Ot(i,r,W,null,d,ae);for(ge in d)ae=d[ge],oe=c[ge],!d.hasOwnProperty(ge)||ae===oe||ae==null&&oe==null||Ot(i,r,ge,ae,d,oe)}function av(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],v=y.transferSize,w=y.initiatorType,P=y.duration;if(v&&P&&av(w)){for(w=0,P=y.responseEnd,d+=1;d<c.length;d++){var F=c[d],ie=F.startTime;if(ie>P)break;var fe=F.transferSize,ge=F.initiatorType;fe&&av(ge)&&(F=F.responseEnd,w+=fe*(F<P?1:(P-ie)/(F-ie)))}if(--d,r+=8*(v+w)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var b0=null,v0=null;function jd(i){return i.nodeType===9?i:i.ownerDocument}function rv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ov(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function _0(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var T0=null;function Ck(){var i=window.event;return i&&i.type==="popstate"?i===T0?!1:(T0=i,!0):(T0=null,!1)}var lv=typeof setTimeout=="function"?setTimeout:void 0,Ik=typeof clearTimeout=="function"?clearTimeout:void 0,cv=typeof Promise=="function"?Promise:void 0,Rk=typeof queueMicrotask=="function"?queueMicrotask:typeof cv<"u"?function(i){return cv.resolve(null).then(i).catch(Mk)}:lv;function Mk(i){setTimeout(function(){throw i})}function ur(i){return i==="head"}function uv(i,r){var c=r,d=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(y),_l(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")zc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,zc(c);for(var v=c.firstChild;v;){var w=v.nextSibling,P=v.nodeName;v[Gs]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=w}}else c==="body"&&zc(i.ownerDocument.body);c=y}while(c);_l(r)}function dv(i,r){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function S0(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":S0(c),Ga(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Dk(i,r,c,d){for(;i.nodeType===1;){var y=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Gs])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=ei(i.nextSibling),i===null)break}return null}function Pk(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=ei(i.nextSibling),i===null))return null;return i}function hv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ei(i.nextSibling),i===null))return null;return i}function E0(i){return i.data==="$?"||i.data==="$~"}function w0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jk(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function ei(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var N0=null;function fv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return ei(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function mv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function pv(i,r,c){switch(r=jd(c),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function zc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Ga(i)}var ti=new Map,gv=new Set;function Ld(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ba=le.d;le.d={f:Lk,r:Uk,D:Ok,C:Vk,L:Bk,m:Gk,X:Hk,S:zk,M:Fk};function Lk(){var i=ba.f(),r=Ad();return i||r}function Uk(i){var r=An(i);r!==null&&r.tag===5&&r.type==="form"?Dy(r):ba.r(i)}var yl=typeof document>"u"?null:document;function xv(i,r,c){var d=yl;if(d&&typeof r=="string"&&r){var y=Ge(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),gv.has(y)||(gv.add(y),i={rel:i,crossOrigin:c,href:r},d.querySelector(y)===null&&(r=d.createElement("link"),Hn(r,"link",i),sn(r),d.head.appendChild(r)))}}function Ok(i){ba.D(i),xv("dns-prefetch",i,null)}function Vk(i,r){ba.C(i,r),xv("preconnect",i,r)}function Bk(i,r,c){ba.L(i,r,c);var d=yl;if(d&&i&&r){var y='link[rel="preload"][as="'+Ge(r)+'"]';r==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Ge(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Ge(c.imageSizes)+'"]')):y+='[href="'+Ge(i)+'"]';var v=y;switch(r){case"style":v=bl(i);break;case"script":v=vl(i)}ti.has(v)||(i=_({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),ti.set(v,i),d.querySelector(y)!==null||r==="style"&&d.querySelector(Hc(v))||r==="script"&&d.querySelector(Fc(v))||(r=d.createElement("link"),Hn(r,"link",i),sn(r),d.head.appendChild(r)))}}function Gk(i,r){ba.m(i,r);var c=yl;if(c&&i){var d=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ge(d)+'"][href="'+Ge(i)+'"]',v=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=vl(i)}if(!ti.has(v)&&(i=_({rel:"modulepreload",href:i},r),ti.set(v,i),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Fc(v)))return}d=c.createElement("link"),Hn(d,"link",i),sn(d),c.head.appendChild(d)}}}function zk(i,r,c){ba.S(i,r,c);var d=yl;if(d&&i){var y=ws(d).hoistableStyles,v=bl(i);r=r||"default";var w=y.get(v);if(!w){var P={loading:0,preload:null};if(w=d.querySelector(Hc(v)))P.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":r},c),(c=ti.get(v))&&A0(i,c);var F=w=d.createElement("link");sn(F),Hn(F,"link",i),F._p=new Promise(function(ie,fe){F.onload=ie,F.onerror=fe}),F.addEventListener("load",function(){P.loading|=1}),F.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Ud(w,r,d)}w={type:"stylesheet",instance:w,count:1,state:P},y.set(v,w)}}}function Hk(i,r){ba.X(i,r);var c=yl;if(c&&i){var d=ws(c).hoistableScripts,y=vl(i),v=d.get(y);v||(v=c.querySelector(Fc(y)),v||(i=_({src:i,async:!0},r),(r=ti.get(y))&&k0(i,r),v=c.createElement("script"),sn(v),Hn(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function Fk(i,r){ba.M(i,r);var c=yl;if(c&&i){var d=ws(c).hoistableScripts,y=vl(i),v=d.get(y);v||(v=c.querySelector(Fc(y)),v||(i=_({src:i,async:!0,type:"module"},r),(r=ti.get(y))&&k0(i,r),v=c.createElement("script"),sn(v),Hn(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function yv(i,r,c,d){var y=(y=de.current)?Ld(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=bl(c.href),c=ws(y).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=bl(c.href);var v=ws(y).hoistableStyles,w=v.get(i);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,w),(v=y.querySelector(Hc(i)))&&!v._p&&(w.instance=v,w.state.loading=5),ti.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ti.set(i,c),v||qk(y,i,c,w.state))),r&&d===null)throw Error(s(528,""));return w}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=vl(c),c=ws(y).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function bl(i){return'href="'+Ge(i)+'"'}function Hc(i){return'link[rel="stylesheet"]['+i+"]"}function bv(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function qk(i,r,c,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Hn(r,"link",c),sn(r),i.head.appendChild(r))}function vl(i){return'[src="'+Ge(i)+'"]'}function Fc(i){return"script[async]"+i}function vv(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+Ge(c.href)+'"]');if(d)return r.instance=d,sn(d),d;var y=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),sn(d),Hn(d,"style",y),Ud(d,c.precedence,i),r.instance=d;case"stylesheet":y=bl(c.href);var v=i.querySelector(Hc(y));if(v)return r.state.loading|=4,r.instance=v,sn(v),v;d=bv(c),(y=ti.get(y))&&A0(d,y),v=(i.ownerDocument||i).createElement("link"),sn(v);var w=v;return w._p=new Promise(function(P,F){w.onload=P,w.onerror=F}),Hn(v,"link",d),r.state.loading|=4,Ud(v,c.precedence,i),r.instance=v;case"script":return v=vl(c.src),(y=i.querySelector(Fc(v)))?(r.instance=y,sn(y),y):(d=c,(y=ti.get(v))&&(d=_({},c),k0(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),sn(y),Hn(y,"link",d),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Ud(d,c.precedence,i));return r.instance}function Ud(i,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,v=y,w=0;w<d.length;w++){var P=d[w];if(P.dataset.precedence===r)v=P;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function A0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function k0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Od=null;function _v(i,r,c){if(Od===null){var d=new Map,y=Od=new Map;y.set(c,d)}else y=Od,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),y=0;y<c.length;y++){var v=c[y];if(!(v[Gs]||v[nn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var w=v.getAttribute(r)||"";w=i+w;var P=d.get(w);P?P.push(v):d.set(w,[v])}}return d}function Tv(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function Kk(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Sv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $k(i,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=bl(d.href),v=r.querySelector(Hc(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Vd.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=v,sn(v);return}v=r.ownerDocument||r,d=bv(d),(y=ti.get(y))&&A0(d,y),v=v.createElement("link"),sn(v);var w=v;w._p=new Promise(function(P,F){w.onload=P,w.onerror=F}),Hn(v,"link",d),c.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Vd.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var C0=0;function Yk(i,r){return i.stylesheets&&i.count===0&&Gd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Gd(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&C0===0&&(C0=62500*kk());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gd(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>C0?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function Vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bd=null;function Gd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bd=new Map,r.forEach(Jk,i),Bd=null,Vd.call(i))}function Jk(i,r){if(!(r.state.loading&4)){var c=Bd.get(i);if(c)var d=c.get(null);else{c=new Map,Bd.set(i,c);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var w=y[v];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=r.instance,w=y.getAttribute("data-precedence"),v=c.get(w)||d,v===d&&c.set(null,y),c.set(w,y),this.count++,d=Vd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var qc={$$typeof:z,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Qk(i,r,c,d,y,v,w,P,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rn(0),this.hiddenUpdates=Rn(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Ev(i,r,c,d,y,v,w,P,F,ie,fe,ge){return i=new Qk(i,r,c,w,F,ie,fe,ge,P),r=1,v===!0&&(r|=24),v=As(3,null,null,r),i.current=v,v.stateNode=i,r=lm(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:d,isDehydrated:c,cache:r},hm(v),i}function wv(i){return i?(i=Wo,i):Wo}function Nv(i,r,c,d,y,v){y=wv(y),d.context===null?d.context=y:d.pendingContext=y,d=Za(r),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=er(i,d,r),c!==null&&(ps(c,i,r),Sc(c,i,r))}function Av(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function I0(i,r){Av(i,r),(i=i.alternate)&&Av(i,r)}function kv(i){if(i.tag===13||i.tag===31){var r=to(i,67108864);r!==null&&ps(r,i,67108864),I0(i,67108864)}}function Cv(i){if(i.tag===13||i.tag===31){var r=Ms();r=ta(r);var c=to(i,r);c!==null&&ps(c,i,r),I0(i,r)}}var zd=!0;function Wk(i,r,c,d){var y=J.T;J.T=null;var v=le.p;try{le.p=2,R0(i,r,c,d)}finally{le.p=v,J.T=y}}function Xk(i,r,c,d){var y=J.T;J.T=null;var v=le.p;try{le.p=8,R0(i,r,c,d)}finally{le.p=v,J.T=y}}function R0(i,r,c,d){if(zd){var y=M0(d);if(y===null)x0(i,r,d,Hd,c),Rv(i,d);else if(e2(y,i,r,c,d))d.stopPropagation();else if(Rv(i,d),r&4&&-1<Zk.indexOf(i)){for(;y!==null;){var v=An(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var w=Vs(v.pendingLanes);if(w!==0){var P=v;for(P.pendingLanes|=2,P.entangledLanes|=2;w;){var F=1<<31-Ft(w);P.entanglements[1]|=F,w&=~F}Vi(v),(Rt&6)===0&&(wd=Ct()+500,Vc(0))}}break;case 31:case 13:P=to(v,2),P!==null&&ps(P,v,2),Ad(),I0(v,2)}if(v=M0(d),v===null&&x0(i,r,d,Hd,c),v===y)break;y=v}y!==null&&d.stopPropagation()}else x0(i,r,d,null,c)}}function M0(i){return i=qs(i),D0(i)}var Hd=null;function D0(i){if(Hd=null,i=Es(i),i!==null){var r=l(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=u(r),i!==null)return i;i=null}else if(c===31){if(i=h(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Hd=i,null}function Iv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cn()){case js:return 2;case Un:return 8;case _s:case Ls:return 32;case Zi:return 268435456;default:return 32}default:return 32}}var P0=!1,dr=null,hr=null,fr=null,Kc=new Map,$c=new Map,mr=[],Zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(i,r){switch(i){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Kc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(r.pointerId)}}function Yc(i,r,c,d,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[y]},r!==null&&(r=An(r),r!==null&&kv(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function e2(i,r,c,d,y){switch(r){case"focusin":return dr=Yc(dr,i,r,c,d,y),!0;case"dragenter":return hr=Yc(hr,i,r,c,d,y),!0;case"mouseover":return fr=Yc(fr,i,r,c,d,y),!0;case"pointerover":var v=y.pointerId;return Kc.set(v,Yc(Kc.get(v)||null,i,r,c,d,y)),!0;case"gotpointercapture":return v=y.pointerId,$c.set(v,Yc($c.get(v)||null,i,r,c,d,y)),!0}return!1}function Mv(i){var r=Es(i.target);if(r!==null){var c=l(r);if(c!==null){if(r=c.tag,r===13){if(r=u(c),r!==null){i.blockedOn=r,Ts(i.priority,function(){Cv(c)});return}}else if(r===31){if(r=h(c),r!==null){i.blockedOn=r,Ts(i.priority,function(){Cv(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Fd(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=M0(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);oc=d,c.target.dispatchEvent(d),oc=null}else return r=An(c),r!==null&&kv(r),i.blockedOn=c,!1;r.shift()}return!0}function Dv(i,r,c){Fd(i)&&c.delete(r)}function t2(){P0=!1,dr!==null&&Fd(dr)&&(dr=null),hr!==null&&Fd(hr)&&(hr=null),fr!==null&&Fd(fr)&&(fr=null),Kc.forEach(Dv),$c.forEach(Dv)}function qd(i,r){i.blockedOn===r&&(i.blockedOn=null,P0||(P0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,t2)))}var Kd=null;function Pv(i){Kd!==i&&(Kd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kd===i&&(Kd=null);for(var r=0;r<i.length;r+=3){var c=i[r],d=i[r+1],y=i[r+2];if(typeof d!="function"){if(D0(d||c)===null)continue;break}var v=An(c);v!==null&&(i.splice(r,3),r-=3,Mm(v,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function _l(i){function r(F){return qd(F,i)}dr!==null&&qd(dr,i),hr!==null&&qd(hr,i),fr!==null&&qd(fr,i),Kc.forEach(r),$c.forEach(r);for(var c=0;c<mr.length;c++){var d=mr[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<mr.length&&(c=mr[0],c.blockedOn===null);)Mv(c),c.blockedOn===null&&mr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],v=c[d+1],w=y[yn]||null;if(typeof v=="function")w||Pv(c);else if(w){var P=null;if(v&&v.hasAttribute("formAction")){if(y=v,w=v[yn]||null)P=w.formAction;else if(D0(y)!==null)continue}else P=w.action;typeof P=="function"?c[d+1]=P:(c.splice(d,3),d-=3),Pv(c)}}}function jv(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(w){return y=w})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function j0(i){this._internalRoot=i}$d.prototype.render=j0.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,d=Ms();Nv(c,d,i,r,null,null)},$d.prototype.unmount=j0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Nv(i.current,2,null,i,null,null),Ad(),r[Bs]=null}};function $d(i){this._internalRoot=i}$d.prototype.unstable_scheduleHydration=function(i){if(i){var r=Uo();i={blockedOn:null,target:i,priority:r};for(var c=0;c<mr.length&&r!==0&&r<mr[c].priority;c++);mr.splice(c,0,i),c===0&&Mv(i)}};var Lv=e.version;if(Lv!=="19.2.3")throw Error(s(527,Lv,"19.2.3"));le.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?b(i):null,i=i===null?null:i.stateNode,i};var n2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{Jn=Yd.inject(n2),un=Yd}catch{}}return Qc.createRoot=function(i,r){if(!a(i))throw Error(s(299));var c=!1,d="",y=Hy,v=Fy,w=qy;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Ev(i,1,!1,null,null,c,d,null,y,v,w,jv),i[Bs]=r.current,g0(i),new j0(r)},Qc.hydrateRoot=function(i,r,c){if(!a(i))throw Error(s(299));var d=!1,y="",v=Hy,w=Fy,P=qy,F=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),r=Ev(i,1,!0,r,c??null,d,y,F,v,w,P,jv),r.context=wv(null),c=r.current,d=Ms(),d=ta(d),y=Za(d),y.callback=null,er(c,y,d),c=d,r.current.lanes=c,Ai(r,c),Vi(r),i[Bs]=r.current,g0(i),new $d(r)},Qc.version="19.2.3",Qc}var Kv;function h2(){if(Kv)return O0.exports;Kv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),O0.exports=d2(),O0.exports}var f2=h2();const m2=BE(f2);var $e=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))($e||{});const Th="https://files.catbox.moe/02xqjo.png",$v={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3",levelUp:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pucker.mp3"},Yv=[{level:1,title:"Pemula"},{level:5,title:"Pelajar Tekun"},{level:10,title:"Pejuang UTBK"},{level:20,title:"Ahli Strategi"},{level:30,title:"Master SKD"},{level:50,title:"Grandmaster"},{level:75,title:"Warlord"},{level:100,title:"Legenda Abadi"}],Ji=(n,e,t,s="ASC",a="")=>{const l=["Bronze","Silver","Gold","Platinum","Diamond","Master","Grandmaster","Legend","Godlike","Impossible"];return t.map((u,h)=>h>=l.length?null:{id:`bench_${n.toLowerCase()}_${h+1}`,title:`${n}: ${l[h]}`,description:s==="DESC"?`Capai skor < ${u} ${a}`:`Capai skor > ${u} ${a}`,icon:e,xpReward:(h+1)*100,condition:p=>{var f,b,_,T,E;return((f=p[0])==null?void 0:f.category)==="BENCHMARK"&&((_=(b=p[0])==null?void 0:b.details)==null?void 0:_.game)===n&&(s==="DESC"?((T=p[0])==null?void 0:T.score)<=u:((E=p[0])==null?void 0:E.score)>=u)}}).filter(u=>u!==null)},p2=(n,e,t="Star")=>({id:`level_${n}`,title:`Level ${n}`,description:`Mencapai Level ${n}`,icon:t,xpReward:e,condition:(s,a)=>a.level>=n}),g2=(n,e)=>({id:`streak_${n}`,title:`Konsisten ${n} Hari`,description:`Login ${n} hari berturut-turut.`,icon:"Flame",xpReward:e,condition:(t,s)=>s.streak>=n}),x2=(n,e)=>({id:`total_tests_${n}`,title:`Veteran ${n}`,description:`Menyelesaikan total ${n} tes.`,icon:"Layers",xpReward:e,condition:t=>t.length>=n}),Qi=(n,e,t,s,a="Award",l)=>({id:`${n}_${t}`,title:`${l?l.toUpperCase():e} ${t}+`,description:`Mencapai skor ${l?l.toUpperCase():"Total"} > ${t} di ${e}.`,icon:a,xpReward:s,condition:u=>{var h,p,f,b;return((h=u[0])==null?void 0:h.category)===e&&(l?((f=(p=u[0])==null?void 0:p.details)==null?void 0:f[l])>=t:((b=u[0])==null?void 0:b.score)>=t)}}),y2=Ji("REACTION","Zap",[400,350,300,275,250,225,200,180,160,150],"DESC","ms"),b2=Ji("AIM","Target",[600,550,500,450,400,350,300,250,220,200],"DESC","ms"),v2=Ji("SEQUENCE","Grid",[5,8,10,12,15,18,20,25,30,40],"ASC"),_2=Ji("CHIMP","Brain",[7,9,11,13,15,18,21,25,30,40],"ASC"),T2=Ji("VISUAL","Eye",[5,7,9,11,13,15,17,20,25,30],"ASC"),S2=Ji("NUMBER","Hash",[5,7,9,11,13,15,18,22,30,50],"ASC"),E2=Ji("VERBAL","Book",[10,20,30,40,50,70,100,150,200,300],"ASC"),w2=Ji("TYPING","FileText",[30,40,50,60,70,80,90,100,120,140],"ASC","WPM"),N2=Ji("BRIDGE","Map",[5,8,12,15,20,25,30,40,50,60],"ASC"),A2=Ji("MATCH","Copy",[3,5,8,10,15,20,25,30,40,50],"ASC"),k2=[300,350,375,400,425,450,475,500,525].map(n=>Qi("skd_tot","SKD",n,n,"Briefcase")),C2=Qi("skd_max","SKD",550,5e3,"Crown"),I2=[100,110,120,130,140,150].map(n=>Qi("skd_twk","SKD",n,n,"Book","twk")),R2=[100,120,130,140,150,160,175].map(n=>Qi("skd_tiu","SKD",n,n,"Brain","tiu")),M2=[180,190,200,210,220,225].map(n=>Qi("skd_tkp","SKD",n,n,"Users","tkp")),D2=[500,600,650,700,750,800,850,900].map(n=>Qi("utbk_avg","UTBK",n,n,"GraduationCap","average")),P2=Qi("utbk_max","UTBK",1e3,5e3,"Crown","average"),j2=["pu","ppu","pbm","pk","lbi","lbe","pm"],L2=j2.flatMap(n=>[700,800,900,1e3].map(e=>Qi(`utbk_${n}`,"UTBK",e,Math.round(e/2),"FileText",n))),U2=[150,200,220,240,260].map(n=>Qi("tpa_tot","TPA",n,n,"Zap")),O2=Qi("tpa_max","TPA",280,2500,"Crown"),V2=Array.from({length:20},(n,e)=>(e+1)*5),B2=V2.map(n=>p2(n,n*50)),G2=[3,7,14,21,30,60,90,100,150,200,365],z2=G2.map(n=>g2(n,n*20)),H2=[1,5,10,25,50,75,100,150,200,300,400,500,1e3],F2=H2.map(n=>x2(n,n*10)),q2=[{id:"pauli_speed_30",title:"Pauli Speed 30",description:"Kecepatan > 30/menit.",icon:"Activity",xpReward:100,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=30}},{id:"pauli_speed_40",title:"Pauli Speed 40",description:"Kecepatan > 40/menit.",icon:"Activity",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=40}},{id:"pauli_speed_50",title:"Pauli Speed 50",description:"Kecepatan > 50/menit.",icon:"Activity",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=50}},{id:"pauli_speed_60",title:"Human Calculator",description:"Pauli Speed > 60/menit.",icon:"Activity",xpReward:1e3,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=60}},{id:"pauli_perfect",title:"Teliti Banget",description:"Akurasi 100% di Tes Koran.",icon:"CheckCircle",xpReward:500,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_acc_100",title:"Mata Elang",description:"Akurasi 100% Kecermatan.",icon:"Eye",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_speed_40",title:"Cepat & Tepat",description:"Speed > 40 & Akurasi > 95%.",icon:"Zap",xpReward:300,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.averageSpeed)>=40&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.accuracy)>=95}},{id:"kecer_god",title:"Mata Dewa",description:"Kecermatan Akurasi 100% & Speed > 50.",icon:"Eye",xpReward:1e3,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.averageSpeed)>=50}},{id:"night_owl",title:"Night Owl",description:"Belajar di atas jam 10 malam.",icon:"Moon",xpReward:50,condition:n=>n.length>0&&(new Date(n[0].date).getHours()>=22||new Date(n[0].date).getHours()<4)},{id:"early_bird",title:"Early Bird",description:"Belajar sebelum jam 6 pagi.",icon:"Sun",xpReward:50,condition:n=>n.length>0&&new Date(n[0].date).getHours()>=4&&new Date(n[0].date).getHours()<6},{id:"weekend_warrior",title:"Weekend Warrior",description:"Belajar di hari Sabtu/Minggu.",icon:"Coffee",xpReward:100,condition:n=>{const e=new Date,t=e.getDay();return(t===0||t===6)&&n.length>0&&new Date(n[0].date).getDate()===e.getDate()}},{id:"lunch_break",title:"Lunch Break",description:"Belajar jam 12:00-13:00.",icon:"Sun",xpReward:100,condition:n=>new Date().getHours()===12&&n.length>0},{id:"first_step",title:"Langkah Pertama",description:"Menyelesaikan tes pertama Anda.",icon:"Footprints",xpReward:50,condition:n=>n.length>=1},{id:"skd_pass",title:"Lulus SKD",description:"Lulus Passing Grade SKD.",icon:"Briefcase",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="SKD"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.passed)}}],ap=[...y2,...b2,...v2,..._2,...T2,...S2,...E2,...w2,...N2,...A2,...k2,C2,...I2,...R2,...M2,...D2,P2,...L2,...U2,O2,...B2,...z2,...F2,...q2],Jv=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],rp=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"Seleksi Lanjutan I",desc:"TPA, TBI, & Psikotes Kedinasan"},{id:"PSIKOTEST",name:"Tes Koran & IQ",desc:"IQ, Koran/Pauli, & Kognitif"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],K2=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],$2=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],Y2=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],J2=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],Q2=["TIU - Verbal & Numerik","TIU - Logika (Silogisme/Analitis)","Tes Logika Gambar (Abstrak)","Tes Kepribadian (EPPS/Sikap Kerja)"],W2=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],X2=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],Qv=[],Wv=[],Xv=[],Zv=[],e_=[],t_=[],n_=[],s_=[],va=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var Z2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eC,tC;function nC(){return{geminiUrl:eC,vertexUrl:tC}}function sC(n,e,t,s){var a,l;if(!(n!=null&&n.baseUrl)){const u=nC();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Da{}function Re(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let f=0;f<p.length;f++){const b=p[f];g(b,e.slice(l+1),t[f])}else for(const f of p)g(f,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];g(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function m(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>m(h,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function iC(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),u=new Set;let h=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){h=p;break}if(h!==-1&&l.length>h)for(let p=h;p<l.length;p++){const f=l[p];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}op(n,a,l,0,u)}}function op(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const p of h[u])op(p,e,t,s+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(f=>!f.startsWith("_")&&!a.has(f)),p={};for(const f of h)p[f]=u[f];for(const[f,b]of Object.entries(p)){const _=[];for(const T of t.slice(s))T==="*"?_.push(f):_.push(T);g(u,_,b)}for(const f of h)delete u[f]}}else{const u=n;l in u&&op(u[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aC(n){const e={},t=m(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=m(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function rC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],lC(u)),e}function oC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],cC(u)),e}function lC(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>uC(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function cC(n){const e={},t=m(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>dC(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function uC(n){const e={},t=m(n,["video"]);return t!=null&&g(e,["video"],xC(t)),e}function dC(n){const e={},t=m(n,["_self"]);return t!=null&&g(e,["video"],yC(t)),e}function hC(n){const e={},t=m(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function fC(n){const e={},t=m(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function mC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],pC(u)),e}function pC(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function zE(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],gC(u)),e}function gC(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function xC(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],eg(s));const a=m(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function yC(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],eg(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var i_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(i_||(i_={}));var a_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(a_||(a_={}));var r_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(r_||(r_={}));var Ce;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ce||(Ce={}));var o_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(o_||(o_={}));var l_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(l_||(l_={}));var c_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(c_||(c_={}));var u_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(u_||(u_={}));var d_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(d_||(d_={}));var h_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(h_||(h_={}));var f_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(f_||(f_={}));var m_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(m_||(m_={}));var p_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(p_||(p_={}));var g_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(g_||(g_={}));var x_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(x_||(x_={}));var y_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(y_||(y_={}));var b_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(b_||(b_={}));var v_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(v_||(v_={}));var __;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(__||(__={}));var T_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(T_||(T_={}));var S_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(S_||(S_={}));var Sh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Sh||(Sh={}));var E_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(E_||(E_={}));var w_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(w_||(w_={}));var N_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(N_||(N_={}));var lp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(lp||(lp={}));var A_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(A_||(A_={}));var k_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(k_||(k_={}));var C_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(C_||(C_={}));var I_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(I_||(I_={}));var R_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(R_||(R_={}));var M_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(M_||(M_={}));var D_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(D_||(D_={}));var P_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(P_||(P_={}));var j_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(j_||(j_={}));var L_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(L_||(L_={}));var U_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(U_||(U_={}));var O_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(O_||(O_={}));var V_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(V_||(V_={}));var B_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(B_||(B_={}));var G_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(G_||(G_={}));var z_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(z_||(z_={}));var H_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(H_||(H_={}));var F_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(F_||(F_={}));var q_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(q_||(q_={}));var K_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(K_||(K_={}));var $_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})($_||($_={}));var Y_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Y_||(Y_={}));var J_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(J_||(J_={}));var Q_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Q_||(Q_={}));var W_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(W_||(W_={}));var X_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(X_||(X_={}));var Z_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Z_||(Z_={}));var eT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(eT||(eT={}));var kl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(kl||(kl={}));class cp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wc{get text(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",b=!1;const _=[];for(const T of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[E,I]of Object.entries(T))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(I!==null||I!==void 0)&&_.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;b=!0,f+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),b?f:void 0}get data(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const b=[];for(const _ of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[T,E]of Object.entries(_))T!=="inlineData"&&(E!==null||E!==void 0)&&b.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(f+=atob(_.inlineData.data))}return b.length>0&&console.warn(`there are non-data parts ${b} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(b=>b.functionCall).map(b=>b.functionCall).filter(b=>b!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,s,a,l,u,h,p,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const b=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((b==null?void 0:b.length)!==0)return(f=b==null?void 0:b[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,s,a,l,u,h,p,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const b=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((b==null?void 0:b.length)!==0)return(f=b==null?void 0:b[0])===null||f===void 0?void 0:f.output}}class tT{}class nT{}class bC{}class vC{}class _C{}class TC{}class sT{}class iT{}class aT{}class SC{}class Eh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Eh;let a;const l=e;return t?a=oC(l):a=rC(l),Object.assign(s,a),s}}class rT{}class oT{}class lT{}class cT{}class EC{}class wC{}class NC{}class tg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new tg,l=mC(e);return Object.assign(s,l),s}}class AC{}class kC{}class CC{}class uT{}class IC{get text(){var e,t,s;let a="",l=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,f]of Object.entries(h))p!=="text"&&p!=="thought"&&f!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class RC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ng{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new ng,l=zE(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HE(n,e){const t=kt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function FE(n){return Array.isArray(n)?n.map(e=>wh(e)):[wh(n)]}function wh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function qE(n){const e=wh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function KE(n){const e=wh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function $E(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>dT(e)):[dT(n)]}function up(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function hT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function fT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ts(n){if(n==null)throw new Error("ContentUnion is required");return up(n)?n:{role:"user",parts:$E(n)}}function sg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=ts(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=ts(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ts(t)):[ts(e)]}function si(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(hT(n)||fT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ts(n)]}const e=[],t=[],s=up(n[0]);for(const a of n){const l=up(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(hT(a)||fT(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:$E(t)}),e}function MC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Ce).includes(t[0].toUpperCase())?t[0].toUpperCase():Ce.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Ce).includes(s.toUpperCase())?s.toUpperCase():Ce.TYPE_UNSPECIFIED})}}function Il(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&MC(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ce).includes(h.toUpperCase())?h.toUpperCase():Ce.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Il(h);else if(s.includes(u)){const p=[];for(const f of h){if(f.type=="null"){e.nullable=!0;continue}p.push(Il(f))}e[u]=p}else if(a.includes(u)){const p={};for(const[f,b]of Object.entries(h))p[f]=Il(b);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function ig(n){return Il(n)}function ag(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function rg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Kl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Il(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Il(e.response));return n}function $l(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function DC(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function Pa(n,e){if(typeof e!="string")throw new Error("name must be a string");return DC(n,e,"cachedContents")}function YE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function jr(n){return eg(n)}function PC(n){return n!=null&&typeof n=="object"&&"name"in n}function jC(n){return n!=null&&typeof n=="object"&&"video"in n}function LC(n){return n!=null&&typeof n=="object"&&"uri"in n}function JE(n){var e;let t;if(PC(n)&&(t=n.name),!(LC(n)&&(t=n.uri,t===void 0))&&!(jC(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function QE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function WE(n){for(const e of["models","tunedModels","publisherModels"])if(UC(n,e))return n[e];return[]}function UC(n,e){return n!==null&&typeof n=="object"&&e in n}function OC(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function VC(n,e={}){const t=[],s=new Set;for(const a of n){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=OC(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function XE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function BC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Yl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function e1(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GC(n){const e={},t=m(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=m(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>_I(u))),g(e,["inlinedResponses"],l)}const a=m(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function zC(n){const e={},t=m(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=m(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=m(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function HC(n){const e={},t=m(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=m(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=m(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ch(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["metadata","state"]);a!=null&&g(e,["state"],e1(a));const l=m(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=m(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=m(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const p=m(n,["metadata","model"]);p!=null&&g(e,["model"],p);const f=m(n,["metadata","output"]);return f!=null&&g(e,["dest"],GC(ZE(f))),e}function dp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["state"]);a!=null&&g(e,["state"],e1(a));const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=m(n,["startTime"]);h!=null&&g(e,["startTime"],h);const p=m(n,["endTime"]);p!=null&&g(e,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(e,["updateTime"],f);const b=m(n,["model"]);b!=null&&g(e,["model"],b);const _=m(n,["inputConfig"]);_!=null&&g(e,["src"],FC(_));const T=m(n,["outputConfig"]);T!=null&&g(e,["dest"],zC(ZE(T)));const E=m(n,["completionStats"]);return E!=null&&g(e,["completionStats"],E),e}function FC(n){const e={},t=m(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=m(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=m(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function qC(n,e){const t={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=m(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=m(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>vI(n,u))),g(t,["requests","requests"],l)}return t}function KC(n){const e={},t=m(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=m(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=m(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $C(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function YC(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Yl(n,s)),t}function JC(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Yl(n,s)),t}function QC(n){const e={},t=m(n,["content"]);t!=null&&g(e,["content"],t);const s=m(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],WC(s));const a=m(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=m(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=m(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=m(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=m(n,["index"]);p!=null&&g(e,["index"],p);const f=m(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const b=m(n,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=m(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function WC(n){const e={},t=m(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function t1(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>kI(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function XC(n,e){const t={},s=m(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),m(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function ZC(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],HC(BC(a))),t}function mT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["src"]);a!=null&&g(t,["batch","inputConfig"],qC(n,XE(n,a)));const l=m(e,["config"]);return l!=null&&XC(l,t),t}function eI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],kt(n,s));const a=m(e,["src"]);a!=null&&g(t,["inputConfig"],KC(XE(n,a)));const l=m(e,["config"]);return l!=null&&ZC(l,t),t}function tI(n,e){const t={},s=m(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function nI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["src"]);a!=null&&g(t,["batch","inputConfig"],cI(n,a));const l=m(e,["config"]);return l!=null&&tI(l,t),t}function sI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Yl(n,s)),t}function iI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Yl(n,s)),t}function aI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);return l!=null&&g(e,["error"],l),e}function rI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);return l!=null&&g(e,["error"],l),e}function oI(n,e){const t={},s=m(e,["contents"]);if(s!=null){let l=sg(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const a=m(e,["config"]);return a!=null&&(g(t,["_self"],lI(a,t)),iC(t,{"requests[].*":"requests[].request.*"})),t}function lI(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=m(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function cI(n,e){const t={},s=m(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=m(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],oI(n,a)),t}function uI(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function dI(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hI(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fI(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],t1(ts(a)));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const b=m(e,["stopSequences"]);b!=null&&g(s,["stopSequences"],b);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const I=m(e,["frequencyPenalty"]);I!=null&&g(s,["frequencyPenalty"],I);const C=m(e,["seed"]);C!=null&&g(s,["seed"],C);const k=m(e,["responseMimeType"]);k!=null&&g(s,["responseMimeType"],k);const j=m(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],ig(j));const M=m(e,["responseJsonSchema"]);if(M!=null&&g(s,["responseJsonSchema"],M),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=m(e,["safetySettings"]);if(t!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(Te=>CI(Te))),g(t,["safetySettings"],U)}const q=m(e,["tools"]);if(t!==void 0&&q!=null){let U=$l(q);Array.isArray(U)&&(U=U.map(Te=>RI(Kl(Te)))),g(t,["tools"],U)}const X=m(e,["toolConfig"]);if(t!==void 0&&X!=null&&g(t,["toolConfig"],II(X)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=m(e,["cachedContent"]);t!==void 0&&$!=null&&g(t,["cachedContent"],Pa(n,$));const D=m(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],ag(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=m(e,["thinkingConfig"]);L!=null&&g(s,["thinkingConfig"],L);const O=m(e,["imageConfig"]);O!=null&&g(s,["imageConfig"],bI(O));const B=m(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function mI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>QC(f))),g(e,["candidates"],p)}const a=m(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=m(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=m(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=m(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function pI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Yl(n,s)),t}function gI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Yl(n,s)),t}function xI(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function yI(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function bI(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["request","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let h=si(a);Array.isArray(h)&&(h=h.map(p=>t1(p))),g(t,["request","contents"],h)}const l=m(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=m(e,["config"]);return u!=null&&g(t,["request","generationConfig"],fI(n,u,m(t,["request"],{}))),t}function _I(n){const e={},t=m(n,["response"]);t!=null&&g(e,["response"],mI(t));const s=m(n,["error"]);return s!=null&&g(e,["error"],s),e}function TI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),m(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function SI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=m(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function EI(n){const e={},t=m(n,["config"]);return t!=null&&TI(t,e),e}function wI(n){const e={},t=m(n,["config"]);return t!=null&&SI(t,e),e}function NI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>ch(u))),g(e,["batchJobs"],l)}return e}function AI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>dp(u))),g(e,["batchJobs"],l)}return e}function kI(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],uI(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],dI(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],$C(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function CI(n){const e={},t=m(n,["category"]);if(t!=null&&g(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function II(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],hI(s)),e}function RI(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],xI(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],yI(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wa;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(wa||(wa={}));class Mo{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MI extends Da{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(wa.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=mT(this.apiClient,e),s=t._url,a=Re("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,p=h.requests,f=[];for(const b of p){const _=Object.assign({},b);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=T,_.request=E}f.push(_)}return h.requests=f,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=eI(this.apiClient,e);return h=Re("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>dp(b))}else{const f=mT(this.apiClient,e);return h=Re("{model}:batchGenerateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>ch(b))}}async createEmbeddingsInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nI(this.apiClient,e);return l=Re("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>ch(p))}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=gI(this.apiClient,e);return h=Re("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>dp(b))}else{const f=pI(this.apiClient,e);return h=Re("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>ch(b))}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=JC(this.apiClient,e);u=Re("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=YC(this.apiClient,e);u=Re("batches/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=wI(e);return h=Re("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=AI(b),T=new uT;return Object.assign(T,_),T})}else{const f=EI(e);return h=Re("batches",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=NI(b),T=new uT;return Object.assign(T,_),T})}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=iI(this.apiClient,e);return h=Re("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>rI(b))}else{const f=sI(this.apiClient,e);return h=Re("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>aI(b))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function pT(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>nR(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function PI(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=m(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=m(n,["contents"]);if(e!==void 0&&u!=null){let b=si(u);Array.isArray(b)&&(b=b.map(_=>pT(_))),g(e,["contents"],b)}const h=m(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],pT(ts(h)));const p=m(n,["tools"]);if(e!==void 0&&p!=null){let b=p;Array.isArray(b)&&(b=b.map(_=>iR(_))),g(e,["tools"],b)}const f=m(n,["toolConfig"]);if(e!==void 0&&f!=null&&g(e,["toolConfig"],sR(f)),m(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function jI(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=m(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=m(n,["contents"]);if(e!==void 0&&u!=null){let _=si(u);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const h=m(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],ts(h));const p=m(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>aR(T))),g(e,["tools"],_)}const f=m(n,["toolConfig"]);e!==void 0&&f!=null&&g(e,["toolConfig"],f);const b=m(n,["kmsKeyName"]);return e!==void 0&&b!=null&&g(e,["encryption_spec","kmsKeyName"],b),t}function LI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],HE(n,s));const a=m(e,["config"]);return a!=null&&PI(a,t),t}function UI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],HE(n,s));const a=m(e,["config"]);return a!=null&&jI(a,t),t}function OI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Pa(n,s)),t}function VI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Pa(n,s)),t}function BI(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function GI(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function zI(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function HI(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FI(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qI(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function KI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Pa(n,s)),t}function $I(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Pa(n,s)),t}function YI(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function JI(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function QI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function WI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function XI(n){const e={},t=m(n,["config"]);return t!=null&&QI(t,e),e}function ZI(n){const e={},t=m(n,["config"]);return t!=null&&WI(t,e),e}function eR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function tR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function nR(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],zI(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],HI(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],DI(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function sR(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],FI(s)),e}function iR(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],YI(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],JI(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function aR(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>qI(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const b=m(n,["urlContext"]);return b!=null&&g(e,["urlContext"],b),e}function rR(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function oR(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function lR(n,e){const t={},s=m(e,["name"]);s!=null&&g(t,["_url","name"],Pa(n,s));const a=m(e,["config"]);return a!=null&&rR(a,t),t}function cR(n,e){const t={},s=m(e,["name"]);s!=null&&g(t,["_url","name"],Pa(n,s));const a=m(e,["config"]);return a!=null&&oR(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uR extends Da{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(wa.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=UI(this.apiClient,e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const f=LI(this.apiClient,e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=$I(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const f=KI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=VI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=GI(b),T=new lT;return Object.assign(T,_),T})}else{const f=OI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=BI(b),T=new lT;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=cR(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>b)}else{const f=lR(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>b)}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=ZI(e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=tR(b),T=new cT;return Object.assign(T,_),T})}else{const f=XI(e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=eR(b),T=new cT;return Object.assign(T,_),T})}}}function Nh(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function gT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function it(n){return this instanceof it?(this.v=n,this):new it(n)}function _i(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(E){return function(I){return Promise.resolve(I).then(E,_)}}function h(E,I){s[E]&&(a[E]=function(C){return new Promise(function(k,j){l.push([E,C,k,j])>1||p(E,C)})},I&&(a[E]=I(a[E])))}function p(E,I){try{f(s[E](I))}catch(C){T(l[0][3],C)}}function f(E){E.value instanceof it?Promise.resolve(E.value.v).then(b,_):T(l[0][2],E)}function b(E){p("next",E)}function _(E){p("throw",E)}function T(E,I){E(I),l.shift(),l.length&&p(l[0][0],l[0][1])}}function Ti(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gT=="function"?gT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(h,p){u=n[l](u),a(h,p,u.done,u.value)})}}function a(l,u,h,p){Promise.resolve(p).then(function(f){l({value:f,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:n1(t)}function n1(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function hR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function xT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let l=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),l&&!n1(n[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class fR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new mR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class mR{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),hR(l)}async sendMessage(e){var t;await this.sendPromise;const s=ts(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const p=await a,f=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,b=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];b!=null&&(T=(h=b.slice(_))!==null&&h!==void 0?h:[]);const E=f?[f]:[];this.recordHistory(s,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=ts(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?xT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return _i(this,arguments,function*(){var a,l,u,h,p,f;const b=[];try{for(var _=!0,T=Ti(e),E;E=yield it(T.next()),a=E.done,!a;_=!0){h=E.value,_=!1;const I=h;if(dR(I)){const C=(f=(p=I.candidates)===null||p===void 0?void 0:p[0])===null||f===void 0?void 0:f.content;C!==void 0&&b.push(C)}yield yield it(I)}}catch(I){l={error:I}}finally{try{!_&&!a&&(u=T.return)&&(yield it(u.call(T)))}finally{if(l)throw l.error}}this.recordHistory(t,b)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...xT(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pR(n){const e={},t=m(n,["file"]);return t!=null&&g(e,["file"],t),e}function gR(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xR(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","file"],JE(t)),e}function yR(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function bR(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","file"],JE(t)),e}function vR(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function _R(n){const e={},t=m(n,["config"]);return t!=null&&vR(t,e),e}function TR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SR extends Da{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(wa.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_R(e);return l=Re("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=TR(p),b=new AC;return Object.assign(b,f),b})}}async createInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pR(e);return l=Re("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=gR(p),b=new kC;return Object.assign(b,f),b})}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bR(e);return l=Re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xR(e);return l=Re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=yR(p),b=new CC;return Object.assign(b,f),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uh(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ER(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>BR(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function wR(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function NR(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AR(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function kR(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=m(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=m(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=m(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=m(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=m(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=m(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const f=m(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const b=m(n,["mediaResolution"]);b!=null&&g(e,["mediaResolution"],b);const _=m(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=m(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=m(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const I=m(n,["responseModalities"]);I!=null&&g(e,["responseModalities"],I);const C=m(n,["responseSchema"]);C!=null&&g(e,["responseSchema"],C);const k=m(n,["routingConfig"]);k!=null&&g(e,["routingConfig"],k);const j=m(n,["seed"]);j!=null&&g(e,["seed"],j);const M=m(n,["speechConfig"]);M!=null&&g(e,["speechConfig"],M);const z=m(n,["stopSequences"]);z!=null&&g(e,["stopSequences"],z);const q=m(n,["temperature"]);q!=null&&g(e,["temperature"],q);const X=m(n,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const $=m(n,["topK"]);$!=null&&g(e,["topK"],$);const D=m(n,["topP"]);if(D!=null&&g(e,["topP"],D),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function CR(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function IR(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function RR(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const b=m(n,["seed"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","seed"],b);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],rg(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=m(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],ER(ts(I)));const C=m(n,["tools"]);if(e!==void 0&&C!=null){let $=$l(C);Array.isArray($)&&($=$.map(D=>zR(Kl(D)))),g(e,["setup","tools"],$)}const k=m(n,["sessionResumption"]);e!==void 0&&k!=null&&g(e,["setup","sessionResumption"],GR(k));const j=m(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const M=m(n,["outputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","outputAudioTranscription"],M);const z=m(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&g(e,["setup","realtimeInputConfig"],z);const q=m(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=m(n,["proactivity"]);if(e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function MR(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],kR(s));const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const b=m(n,["seed"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","seed"],b);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],rg(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=m(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],ts(I));const C=m(n,["tools"]);if(e!==void 0&&C!=null){let D=$l(C);Array.isArray(D)&&(D=D.map(N=>HR(Kl(N)))),g(e,["setup","tools"],D)}const k=m(n,["sessionResumption"]);e!==void 0&&k!=null&&g(e,["setup","sessionResumption"],k);const j=m(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const M=m(n,["outputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","outputAudioTranscription"],M);const z=m(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&g(e,["setup","realtimeInputConfig"],z);const q=m(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=m(n,["proactivity"]);e!==void 0&&X!=null&&g(e,["setup","proactivity"],X);const $=m(n,["explicitVadSignal"]);return e!==void 0&&$!=null&&g(e,["setup","explicitVadSignal"],$),t}function DR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],kt(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],RR(a,t)),t}function PR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],kt(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],MR(a,t)),t}function jR(n){const e={},t=m(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function LR(n){const e={},t=m(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function UR(n){const e={},t=m(n,["media"]);if(t!=null){let f=FE(t);Array.isArray(f)&&(f=f.map(b=>uh(b))),g(e,["mediaChunks"],f)}const s=m(n,["audio"]);s!=null&&g(e,["audio"],uh(KE(s)));const a=m(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=m(n,["video"]);l!=null&&g(e,["video"],uh(qE(l)));const u=m(n,["text"]);u!=null&&g(e,["text"],u);const h=m(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=m(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function OR(n){const e={},t=m(n,["media"]);if(t!=null){let f=FE(t);Array.isArray(f)&&(f=f.map(b=>b)),g(e,["mediaChunks"],f)}const s=m(n,["audio"]);s!=null&&g(e,["audio"],KE(s));const a=m(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=m(n,["video"]);l!=null&&g(e,["video"],qE(l));const u=m(n,["text"]);u!=null&&g(e,["text"],u);const h=m(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=m(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function VR(n){const e={},t=m(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=m(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=m(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=m(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=m(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],FR(u));const h=m(n,["goAway"]);h!=null&&g(e,["goAway"],h);const p=m(n,["sessionResumptionUpdate"]);p!=null&&g(e,["sessionResumptionUpdate"],p);const f=m(n,["voiceActivityDetectionSignal"]);return f!=null&&g(e,["voiceActivityDetectionSignal"],f),e}function BR(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],wR(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],NR(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],uh(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function GR(n){const e={},t=m(n,["handle"]);if(t!=null&&g(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zR(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],CR(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],IR(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function HR(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>AR(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const b=m(n,["urlContext"]);return b!=null&&g(e,["urlContext"],b),e}function FR(n){const e={},t=m(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=m(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=m(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=m(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=m(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=m(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const p=m(n,["promptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["promptTokensDetails"],E)}const f=m(n,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["cacheTokensDetails"],E)}const b=m(n,["candidatesTokensDetails"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["responseTokensDetails"],E)}const _=m(n,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["toolUsePromptTokensDetails"],E)}const T=m(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qR(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function KR(n){const e={},t=m(n,["content"]);t!=null&&g(e,["content"],t);const s=m(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],$R(s));const a=m(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=m(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=m(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=m(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=m(n,["index"]);p!=null&&g(e,["index"],p);const f=m(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const b=m(n,["safetyRatings"]);if(b!=null){let T=b;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=m(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function $R(n){const e={},t=m(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function YR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let l=si(a);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function JR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function QR(n){const e={},t=m(n,["values"]);t!=null&&g(e,["values"],t);const s=m(n,["statistics"]);return s!=null&&g(e,["statistics"],WR(s)),e}function WR(n){const e={},t=m(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=m(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function sf(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>r4(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function XR(n){const e={},t=m(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=m(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function ZR(n){const e={};if(m(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function eM(n,e){const t={},s=m(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],ts(s));const a=m(n,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>r1(h))),g(e,["tools"],u)}const l=m(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],qM(l)),t}function tM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let u=si(a);Array.isArray(u)&&(u=u.map(h=>sf(h))),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&ZR(l),t}function nM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let u=si(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&eM(l,t),t}function sM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=m(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function iM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function aM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],kt(n,s)),t}function rM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],kt(n,s)),t}function oM(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function lM(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function cM(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=m(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=m(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const f=m(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const _=m(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=m(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=m(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const I=m(n,["outputMimeType"]);e!==void 0&&I!=null&&g(e,["parameters","outputOptions","mimeType"],I);const C=m(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","compressionQuality"],C);const k=m(n,["addWatermark"]);e!==void 0&&k!=null&&g(e,["parameters","addWatermark"],k);const j=m(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const M=m(n,["editMode"]);e!==void 0&&M!=null&&g(e,["parameters","editMode"],M);const z=m(n,["baseSteps"]);return e!==void 0&&z!=null&&g(e,["parameters","editConfig","baseSteps"],z),t}function uM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>h4(p))),g(t,["instances[0]","referenceImages"],h)}const u=m(e,["config"]);return u!=null&&cM(u,t),t}function dM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>af(l))),g(e,["generatedImages"],a)}return e}function hM(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=m(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function fM(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=m(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=m(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=m(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function mM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let h=sg(n,a);Array.isArray(h)&&(h=h.map(p=>p)),g(t,["requests[]","content"],h)}const l=m(e,["config"]);l!=null&&hM(l,t);const u=m(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],kt(n,u)),t}function pM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let u=sg(n,a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const l=m(e,["config"]);return l!=null&&fM(l,t),t}function gM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=m(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function xM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>QR(u))),g(e,["embeddings"],l)}const a=m(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function yM(n){const e={},t=m(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=m(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function bM(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function vM(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _M(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function TM(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function SM(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],sf(ts(a)));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const b=m(e,["stopSequences"]);b!=null&&g(s,["stopSequences"],b);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const I=m(e,["frequencyPenalty"]);I!=null&&g(s,["frequencyPenalty"],I);const C=m(e,["seed"]);C!=null&&g(s,["seed"],C);const k=m(e,["responseMimeType"]);k!=null&&g(s,["responseMimeType"],k);const j=m(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],ig(j));const M=m(e,["responseJsonSchema"]);if(M!=null&&g(s,["responseJsonSchema"],M),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=m(e,["safetySettings"]);if(t!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(Te=>f4(Te))),g(t,["safetySettings"],U)}const q=m(e,["tools"]);if(t!==void 0&&q!=null){let U=$l(q);Array.isArray(U)&&(U=U.map(Te=>v4(Kl(Te)))),g(t,["tools"],U)}const X=m(e,["toolConfig"]);if(t!==void 0&&X!=null&&g(t,["toolConfig"],b4(X)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=m(e,["cachedContent"]);t!==void 0&&$!=null&&g(t,["cachedContent"],Pa(n,$));const D=m(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const R=m(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],ag(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=m(e,["thinkingConfig"]);L!=null&&g(s,["thinkingConfig"],L);const O=m(e,["imageConfig"]);O!=null&&g(s,["imageConfig"],QM(O));const B=m(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function EM(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],ts(a));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const b=m(e,["stopSequences"]);b!=null&&g(s,["stopSequences"],b);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const I=m(e,["frequencyPenalty"]);I!=null&&g(s,["frequencyPenalty"],I);const C=m(e,["seed"]);C!=null&&g(s,["seed"],C);const k=m(e,["responseMimeType"]);k!=null&&g(s,["responseMimeType"],k);const j=m(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],ig(j));const M=m(e,["responseJsonSchema"]);M!=null&&g(s,["responseJsonSchema"],M);const z=m(e,["routingConfig"]);z!=null&&g(s,["routingConfig"],z);const q=m(e,["modelSelectionConfig"]);q!=null&&g(s,["modelConfig"],q);const X=m(e,["safetySettings"]);if(t!==void 0&&X!=null){let J=X;Array.isArray(J)&&(J=J.map(le=>le)),g(t,["safetySettings"],J)}const $=m(e,["tools"]);if(t!==void 0&&$!=null){let J=$l($);Array.isArray(J)&&(J=J.map(le=>r1(Kl(le)))),g(t,["tools"],J)}const D=m(e,["toolConfig"]);t!==void 0&&D!=null&&g(t,["toolConfig"],D);const N=m(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const R=m(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],Pa(n,R));const L=m(e,["responseModalities"]);L!=null&&g(s,["responseModalities"],L);const O=m(e,["mediaResolution"]);O!=null&&g(s,["mediaResolution"],O);const B=m(e,["speechConfig"]);B!=null&&g(s,["speechConfig"],ag(B));const U=m(e,["audioTimestamp"]);U!=null&&g(s,["audioTimestamp"],U);const Te=m(e,["thinkingConfig"]);Te!=null&&g(s,["thinkingConfig"],Te);const Me=m(e,["imageConfig"]);if(Me!=null&&g(s,["imageConfig"],WM(Me)),m(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function yT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let u=si(a);Array.isArray(u)&&(u=u.map(h=>sf(h))),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&g(t,["generationConfig"],SM(n,l,t)),t}function bT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["contents"]);if(a!=null){let u=si(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&g(t,["generationConfig"],EM(n,l,t)),t}function vT(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>KR(f))),g(e,["candidates"],p)}const a=m(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=m(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=m(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=m(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function _T(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(b=>b)),g(e,["candidates"],f)}const a=m(n,["createTime"]);a!=null&&g(e,["createTime"],a);const l=m(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=m(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=m(n,["responseId"]);h!=null&&g(e,["responseId"],h);const p=m(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function wM(n,e){const t={};if(m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=m(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=m(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=m(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=m(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const p=m(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const f=m(n,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);const b=m(n,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const _=m(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=m(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),m(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=m(n,["imageSize"]);if(e!==void 0&&E!=null&&g(e,["parameters","sampleImageSize"],E),m(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function NM(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=m(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=m(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const f=m(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const _=m(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=m(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=m(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const I=m(n,["outputMimeType"]);e!==void 0&&I!=null&&g(e,["parameters","outputOptions","mimeType"],I);const C=m(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","compressionQuality"],C);const k=m(n,["addWatermark"]);e!==void 0&&k!=null&&g(e,["parameters","addWatermark"],k);const j=m(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const M=m(n,["imageSize"]);e!==void 0&&M!=null&&g(e,["parameters","sampleImageSize"],M);const z=m(n,["enhancePrompt"]);return e!==void 0&&z!=null&&g(e,["parameters","enhancePrompt"],z),t}function AM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["config"]);return l!=null&&wM(l,t),t}function kM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["config"]);return l!=null&&NM(l,t),t}function CM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>GM(u))),g(e,["generatedImages"],l)}const a=m(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],i1(a)),e}function IM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>af(u))),g(e,["generatedImages"],l)}const a=m(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],a1(a)),e}function RM(n,e){const t={},s=m(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=m(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=m(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=m(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),m(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=m(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const f=m(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&g(e,["parameters","enhancePrompt"],f),m(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=m(n,["lastFrame"]);e!==void 0&&b!=null&&g(e,["instances[0]","lastFrame"],rf(b));const _=m(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>D4(E))),g(e,["instances[0]","referenceImages"],T)}if(m(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function MM(n,e){const t={},s=m(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=m(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=m(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=m(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=m(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const f=m(n,["resolution"]);e!==void 0&&f!=null&&g(e,["parameters","resolution"],f);const b=m(n,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const _=m(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=m(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const E=m(n,["enhancePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","enhancePrompt"],E);const I=m(n,["generateAudio"]);e!==void 0&&I!=null&&g(e,["parameters","generateAudio"],I);const C=m(n,["lastFrame"]);e!==void 0&&C!=null&&g(e,["instances[0]","lastFrame"],Ni(C));const k=m(n,["referenceImages"]);if(e!==void 0&&k!=null){let z=k;Array.isArray(z)&&(z=z.map(q=>P4(q))),g(e,["instances[0]","referenceImages"],z)}const j=m(n,["mask"]);e!==void 0&&j!=null&&g(e,["instances[0]","mask"],M4(j));const M=m(n,["compressionQuality"]);return e!==void 0&&M!=null&&g(e,["parameters","compressionQuality"],M),t}function DM(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],UM(u)),e}function PM(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],OM(u)),e}function jM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["image"]);l!=null&&g(t,["instances[0]","image"],rf(l));const u=m(e,["video"]);u!=null&&g(t,["instances[0]","video"],o1(u));const h=m(e,["source"]);h!=null&&VM(h,t);const p=m(e,["config"]);return p!=null&&RM(p,t),t}function LM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["image"]);l!=null&&g(t,["instances[0]","image"],Ni(l));const u=m(e,["video"]);u!=null&&g(t,["instances[0]","video"],l1(u));const h=m(e,["source"]);h!=null&&BM(h,t);const p=m(e,["config"]);return p!=null&&MM(p,t),t}function UM(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>HM(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function OM(n){const e={},t=m(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>FM(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function VM(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],rf(a));const l=m(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],o1(l)),t}function BM(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Ni(a));const l=m(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],l1(l)),t}function GM(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["image"],XM(t));const s=m(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=m(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],i1(a)),e}function af(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["image"],s1(t));const s=m(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=m(n,["_self"]);a!=null&&g(e,["safetyAttributes"],a1(a));const l=m(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function zM(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["mask"],s1(t));const s=m(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function HM(n){const e={},t=m(n,["video"]);return t!=null&&g(e,["video"],I4(t)),e}function FM(n){const e={},t=m(n,["_self"]);return t!=null&&g(e,["video"],R4(t)),e}function qM(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=m(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=m(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=m(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=m(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=m(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=m(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const f=m(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const b=m(n,["mediaResolution"]);b!=null&&g(e,["mediaResolution"],b);const _=m(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=m(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=m(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const I=m(n,["responseModalities"]);I!=null&&g(e,["responseModalities"],I);const C=m(n,["responseSchema"]);C!=null&&g(e,["responseSchema"],C);const k=m(n,["routingConfig"]);k!=null&&g(e,["routingConfig"],k);const j=m(n,["seed"]);j!=null&&g(e,["seed"],j);const M=m(n,["speechConfig"]);M!=null&&g(e,["speechConfig"],M);const z=m(n,["stopSequences"]);z!=null&&g(e,["stopSequences"],z);const q=m(n,["temperature"]);q!=null&&g(e,["temperature"],q);const X=m(n,["thinkingConfig"]);X!=null&&g(e,["thinkingConfig"],X);const $=m(n,["topK"]);$!=null&&g(e,["topK"],$);const D=m(n,["topP"]);if(D!=null&&g(e,["topP"],D),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function KM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],kt(n,s)),t}function $M(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],kt(n,s)),t}function YM(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function JM(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function QM(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WM(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=m(n,["personGeneration"]);a!=null&&g(e,["personGeneration"],a);const l=m(n,["outputMimeType"]);l!=null&&g(e,["imageOutputOptions","mimeType"],l);const u=m(n,["outputCompressionQuality"]);return u!=null&&g(e,["imageOutputOptions","compressionQuality"],u),e}function XM(n){const e={},t=m(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],jr(t));const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function s1(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function rf(n){const e={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=m(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],jr(t));const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Ni(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function ZM(n,e,t){const s={},a=m(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=m(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],QE(n,h)),s}function e4(n,e,t){const s={},a=m(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=m(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],QE(n,h)),s}function t4(n,e){const t={},s=m(e,["config"]);return s!=null&&ZM(n,s,t),t}function n4(n,e){const t={},s=m(e,["config"]);return s!=null&&e4(n,s,t),t}function s4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["_self"]);if(a!=null){let l=WE(a);Array.isArray(l)&&(l=l.map(u=>hp(u))),g(e,["models"],l)}return e}function i4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["_self"]);if(a!=null){let l=WE(a);Array.isArray(l)&&(l=l.map(u=>fp(u))),g(e,["models"],l)}return e}function a4(n){const e={},t=m(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=m(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=m(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function hp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);a!=null&&g(e,["description"],a);const l=m(n,["version"]);l!=null&&g(e,["version"],l);const u=m(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],_4(u));const h=m(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const p=m(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const f=m(n,["supportedGenerationMethods"]);f!=null&&g(e,["supportedActions"],f);const b=m(n,["temperature"]);b!=null&&g(e,["temperature"],b);const _=m(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=m(n,["topP"]);T!=null&&g(e,["topP"],T);const E=m(n,["topK"]);E!=null&&g(e,["topK"],E);const I=m(n,["thinking"]);return I!=null&&g(e,["thinking"],I),e}function fp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);a!=null&&g(e,["description"],a);const l=m(n,["versionId"]);l!=null&&g(e,["version"],l);const u=m(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>yM(T))),g(e,["endpoints"],_)}const h=m(n,["labels"]);h!=null&&g(e,["labels"],h);const p=m(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],T4(p));const f=m(n,["defaultCheckpointId"]);f!=null&&g(e,["defaultCheckpointId"],f);const b=m(n,["checkpoints"]);if(b!=null){let _=b;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function r4(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],bM(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],vM(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],qR(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function o4(n){const e={},t=m(n,["productImage"]);return t!=null&&g(e,["image"],Ni(t)),e}function l4(n,e){const t={},s=m(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=m(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=m(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=m(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const p=m(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const f=m(n,["addWatermark"]);e!==void 0&&f!=null&&g(e,["parameters","addWatermark"],f);const b=m(n,["outputMimeType"]);e!==void 0&&b!=null&&g(e,["parameters","outputOptions","mimeType"],b);const _=m(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=m(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const E=m(n,["labels"]);return e!==void 0&&E!=null&&g(e,["labels"],E),t}function c4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["source"]);a!=null&&d4(a,t);const l=m(e,["config"]);return l!=null&&l4(l,t),t}function u4(n){const e={},t=m(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>af(a))),g(e,["generatedImages"],s)}return e}function d4(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Ni(a));const l=m(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>o4(h))),g(e,["instances[0]","productImages"],u)}return t}function h4(n){const e={},t=m(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Ni(t));const s=m(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=m(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=m(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],a4(l));const u=m(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],XR(u));const h=m(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const p=m(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function i1(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=m(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=m(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function a1(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=m(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=m(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function f4(n){const e={},t=m(n,["category"]);if(t!=null&&g(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function m4(n){const e={},t=m(n,["image"]);return t!=null&&g(e,["image"],Ni(t)),e}function p4(n,e){const t={},s=m(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=m(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=m(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=m(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=m(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const p=m(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function g4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["source"]);a!=null&&y4(a,t);const l=m(e,["config"]);return l!=null&&p4(l,t),t}function x4(n){const e={},t=m(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>zM(a))),g(e,["generatedMasks"],s)}return e}function y4(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Ni(a));const l=m(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],m4(l)),t}function b4(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],_M(s)),e}function v4(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],YM(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],JM(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function r1(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>TM(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const b=m(n,["urlContext"]);return b!=null&&g(e,["urlContext"],b),e}function _4(n){const e={},t=m(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=m(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=m(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function T4(n){const e={},t=m(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=m(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=m(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function S4(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function E4(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function w4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","name"],kt(n,s));const a=m(e,["config"]);return a!=null&&S4(a,t),t}function N4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["config"]);return a!=null&&E4(a,t),t}function A4(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=m(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=m(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=m(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const p=m(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const f=m(n,["enhanceInputImage"]);e!==void 0&&f!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],f);const b=m(n,["imagePreservationFactor"]);e!==void 0&&b!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const _=m(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=m(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const E=m(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function k4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],kt(n,s));const a=m(e,["image"]);a!=null&&g(t,["instances[0]","image"],Ni(a));const l=m(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=m(e,["config"]);return u!=null&&A4(u,t),t}function C4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>af(l))),g(e,["generatedImages"],a)}return e}function I4(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],jr(s));const a=m(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function R4(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function M4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["_self"],Ni(t));const s=m(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function D4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["image"],rf(t));const s=m(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function P4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["image"],Ni(t));const s=m(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function o1(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function l1(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],jr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j4(n,e){const t={},s=m(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function L4(n){const e={},t=m(n,["config"]);return t!=null&&j4(t,e),e}function U4(n,e){const t={},s=m(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function O4(n){const e={},t=m(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=m(n,["config"]);return s!=null&&U4(s,e),e}function V4(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function B4(n,e){const t={},s=m(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=m(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function G4(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],H4(u)),e}function z4(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=m(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=m(n,["config"]);return a!=null&&B4(a,e),e}function H4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function F4(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function q4(n){const e={},t=m(n,["config"]);return t!=null&&F4(t,e),e}function K4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function c1(n,e){const t={},s=m(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=m(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=m(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>p)),g(e,["customMetadata"],h)}const u=m(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function $4(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=m(n,["config"]);return s!=null&&c1(s,e),e}function Y4(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J4="Content-Type",Q4="X-Server-Timeout",W4="User-Agent",mp="x-goog-api-client",X4="1.35.0",Z4=`google-genai-sdk/${X4}`,eD="v1beta1",tD="v1beta";class nD{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:eD,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:tD,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&sD(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await TT(a),new cp(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await TT(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return _i(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";const h="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:b}=yield it(a.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(b,{stream:!0});try{const I=JSON.parse(_);if("error"in I){const C=JSON.parse(JSON.stringify(I.error)),k=C.status,j=C.code,M=`got status: ${k}. ${JSON.stringify(I)}`;if(j>=400&&j<600)throw new nf({message:M,status:j})}}catch(I){if(I.name==="ApiError")throw I}u+=_;let T=-1,E=0;for(;;){T=-1,E=0;for(const k of p){const j=u.indexOf(k);j!==-1&&(T===-1||j<T)&&(T=j,E=k.length)}if(T===-1)break;const I=u.substring(0,T);u=u.substring(T+E);const C=I.trim();if(C.startsWith(h)){const k=C.substring(h.length).trim();try{const j=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield it(new cp(j))}catch(j){throw new Error(`exception parsing stream chunk ${k}. ${j}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=Z4+" "+this.clientOptions.userAgentExtra;return e[W4]=t,e[mp]=t,e[J4]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(Q4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const p={file:a},f=this.getFileName(e),b=Re("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(b,a.sizeBytes,a.mimeType,f,p,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,b=this.getFileName(t),_={};s!=null&&c1(s,_);const T=await this.fetchUploadUrl(f,h,p,b,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,u){var h;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const f=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const b=(h=f==null?void 0:f.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(b===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return b}}async function TT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new nf({message:a,status:t}):new Error(a)}}function sD(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const f=u[p],b=h[p];f&&typeof f=="object"&&!Array.isArray(f)&&b&&typeof b=="object"&&!Array.isArray(b)?h[p]=s(b,f):(b&&f&&typeof b!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof b}, New type: ${typeof f}. Overwriting.`),h[p]=f)}return h}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iD="mcp_used/unknown";let aD=!1;function u1(n){for(const e of n)if(rD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return aD}function d1(n){var e;const t=(e=n[mp])!==null&&e!==void 0?e:"";n[mp]=(t+` ${iD}`).trimStart()}function rD(n){return n!==null&&typeof n=="object"&&n instanceof og}function oD(n){return _i(this,arguments,function*(t,s=100){let a,l=0;for(;l<s;){const u=yield it(t.listTools({cursor:a}));for(const h of u.tools)yield yield it(h),l++;if(!u.nextCursor)break;a=u.nextCursor}})}class og{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new og(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const b of this.mcpClients)try{for(var h=!0,p=(t=void 0,Ti(oD(b))),f;f=await p.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const _=a;u.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=b}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),VC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function lD(n,e,t){const s=new RC;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class cD{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=hD(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let f=()=>{};const b=new Promise(z=>{f=z}),_=e.callbacks,T=function(){f({})},E=this.apiClient,I={onopen:T,onmessage:z=>{lD(E,_.onmessage,z)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(z){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(z){}},C=this.webSocketFactory.create(p,dD(u),I);C.connect(),await b;const M={setup:{model:kt(this.apiClient,e.model)}};return C.send(JSON.stringify(M)),new uD(C,this.apiClient)}}class uD{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=LR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=jR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(kl.PLAY)}pause(){this.sendPlaybackControl(kl.PAUSE)}stop(){this.sendPlaybackControl(kl.STOP)}resetContext(){this.sendPlaybackControl(kl.RESET_CONTEXT)}close(){this.conn.close()}}function dD(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function hD(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mD(n,e,t){const s=new IC;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(n.isVertexAI()){const u=VR(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class pD{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new cD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let b;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&u1(e.config.tools)&&d1(_);const T=bD(_);if(this.apiClient.isVertexAI())b=`${p}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,b);else{const R=this.apiClient.getApiKey();let L="BidiGenerateContent",O="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",O="access_token"),b=`${p}/ws/google.ai.generativelanguage.${f}.GenerativeService.${L}?${O}=${R}`}let E=()=>{};const I=new Promise(R=>{E=R}),C=e.callbacks,k=function(){var R;(R=C==null?void 0:C.onopen)===null||R===void 0||R.call(C),E({})},j=this.apiClient,M={onopen:k,onmessage:R=>{mD(j,C.onmessage,R)},onerror:(t=C==null?void 0:C.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=C==null?void 0:C.onclose)!==null&&s!==void 0?s:function(R){}},z=this.webSocketFactory.create(b,yD(T),M);z.connect(),await I;let q=kt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const R=this.apiClient.getProject(),L=this.apiClient.getLocation();q=`projects/${R}/locations/${L}/`+q}let X={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sh.AUDIO]}:e.config.responseModalities=[Sh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],D=[];for(const R of $)if(this.isCallableTool(R)){const L=R;D.push(await L.tool())}else D.push(R);D.length>0&&(e.config.tools=D);const N={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=PR(this.apiClient,N):X=DR(this.apiClient,N),delete X.config,z.send(JSON.stringify(X)),new xD(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const gD={turnComplete:!0};class xD{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=si(t.turns),e.isVertexAI()||(s=s.map(a=>sf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(fD)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},gD),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:OR(e)}:t={realtimeInput:UR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function yD(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function bD(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ST=10;function ET(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Rl(u)){a=!0;break}if(!a)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Rl(n){return"callTool"in n&&typeof n.callTool=="function"}function vD(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>Rl(a)))!==null&&s!==void 0?s:!1}function wT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(Rl(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function NT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _D extends Da{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,u,h;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!vD(t)||ET(t.config))return await this.generateContentInternal(p);const f=wT(t);if(f.length>0){const C=f.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let b,_;const T=si(p.contents),E=(l=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:ST;let I=0;for(;I<E&&(b=await this.generateContentInternal(p),!(!b.functionCalls||b.functionCalls.length===0));){const C=b.candidates[0].content,k=[];for(const j of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Rl(j)){const z=await j.callTool(b.functionCalls);k.push(...z)}I++,_={role:"user",parts:k},p.contents=si(p.contents),p.contents.push(C),p.contents.push(_),NT(p.config)&&(T.push(C),T.push(_))}return NT(p.config)&&(b.automaticFunctionCallingHistory=T),b},this.generateContentStream=async t=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),ET(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=wT(t);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,b=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(f&&!b)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Mo(wa.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,u,h,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(h=t.source)===null||h===void 0?void 0:h.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>Rl(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&u1(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let f=Object.assign({},p);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),d1(f),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return h}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Rl(u)){const h=u,p=await h.tool();for(const f of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,h)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:ST;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return(function(f,b,_){return _i(this,arguments,function*(){for(var T,E,I,C,k,j;h<l;){u&&(h++,u=!1);const X=yield it(f.processParamsMaybeAddMcpUsage(_)),$=yield it(f.generateContentStreamInternal(X)),D=[],N=[];try{for(var M=!0,z=(E=void 0,Ti($)),q;q=yield it(z.next()),T=q.done,!T;M=!0){C=q.value,M=!1;const R=C;if(yield yield it(R),R.candidates&&(!((k=R.candidates[0])===null||k===void 0)&&k.content)){N.push(R.candidates[0].content);for(const L of(j=R.candidates[0].content.parts)!==null&&j!==void 0?j:[])if(h<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(b.has(L.functionCall.name)){const O=yield it(b.get(L.functionCall.name).callTool([L.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(R){E={error:R}}finally{try{!M&&!T&&(I=z.return)&&(yield it(I.call(z)))}finally{if(E)throw E.error}}if(D.length>0){u=!0;const R=new Wc;R.candidates=[{content:{role:"user",parts:D}}],yield yield it(R);const L=[];L.push(...N),L.push({role:"user",parts:D});const O=si(_.contents).concat(L);_.contents=O}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=bT(this.apiClient,e);return h=Re("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=_T(b),T=new Wc;return Object.assign(T,_),T})}else{const f=yT(this.apiClient,e);return h=Re("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=vT(b),T=new Wc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=bT(this.apiClient,e);return h=Re("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return _i(this,arguments,function*(){var T,E,I,C;try{for(var k=!0,j=Ti(_),M;M=yield it(j.next()),T=M.done,!T;k=!0){C=M.value,k=!1;const z=C,q=_T(yield it(z.json()));q.sdkHttpResponse={headers:z.headers};const X=new Wc;Object.assign(X,q),yield yield it(X)}}catch(z){E={error:z}}finally{try{!k&&!T&&(I=j.return)&&(yield it(I.call(j)))}finally{if(E)throw E.error}}})})}else{const f=yT(this.apiClient,e);return h=Re("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return _i(this,arguments,function*(){var T,E,I,C;try{for(var k=!0,j=Ti(_),M;M=yield it(j.next()),T=M.done,!T;k=!0){C=M.value,k=!1;const z=C,q=vT(yield it(z.json()));q.sdkHttpResponse={headers:z.headers};const X=new Wc;Object.assign(X,q),yield yield it(X)}}catch(z){E={error:z}}finally{try{!k&&!T&&(I=j.return)&&(yield it(I.call(j)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=pM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=xM(b),T=new tT;return Object.assign(T,_),T})}else{const f=mM(this.apiClient,e);return h=Re("{model}:batchEmbedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=gM(b),T=new tT;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=kM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=IM(b),T=new nT;return Object.assign(T,_),T})}else{const f=AM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=CM(b),T=new nT;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=uM(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=dM(p),b=new bC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=k4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=C4(p),b=new vC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=c4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=u4(p),b=new _C;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=g4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=x4(p),b=new TC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=$M(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>fp(b))}else{const f=KM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>hp(b))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=n4(this.apiClient,e);return h=Re("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=i4(b),T=new sT;return Object.assign(T,_),T})}else{const f=t4(this.apiClient,e);return h=Re("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=s4(b),T=new sT;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=N4(this.apiClient,e);return h=Re("{model}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>fp(b))}else{const f=w4(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>hp(b))}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=rM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=lM(b),T=new iT;return Object.assign(T,_),T})}else{const f=aM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=oM(b),T=new iT;return Object.assign(T,_),T})}}async countTokens(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=nM(this.apiClient,e);return h=Re("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=iM(b),T=new aT;return Object.assign(T,_),T})}else{const f=tM(this.apiClient,e);return h=Re("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=sM(b),T=new aT;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=YR(this.apiClient,e);return l=Re("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>{const f=JR(p),b=new SC;return Object.assign(b,f),b})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=LM(this.apiClient,e);return h=Re("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u.then(b=>{const _=PM(b),T=new Eh;return Object.assign(T,_),T})}else{const f=jM(this.apiClient,e);return h=Re("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u.then(b=>{const _=DM(b),T=new Eh;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TD extends Da{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=fC(e);return h=Re("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json()),u}else{const f=hC(e);return h=Re("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=aC(e);return l=Re("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SD(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ED(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>DD(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function wD(n,e,t){const s={},a=m(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const l=m(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=m(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=m(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],MD(n,h));const p=m(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function ND(n,e){const t={},s=m(e,["config"]);return s!=null&&g(t,["config"],wD(n,s,t)),t}function AD(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function kD(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CD(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function ID(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function RD(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const b=m(n,["seed"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","seed"],b);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],rg(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=m(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],ED(ts(I)));const C=m(n,["tools"]);if(e!==void 0&&C!=null){let $=$l(C);Array.isArray($)&&($=$.map(D=>jD(Kl(D)))),g(e,["setup","tools"],$)}const k=m(n,["sessionResumption"]);e!==void 0&&k!=null&&g(e,["setup","sessionResumption"],PD(k));const j=m(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const M=m(n,["outputAudioTranscription"]);e!==void 0&&M!=null&&g(e,["setup","outputAudioTranscription"],M);const z=m(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&g(e,["setup","realtimeInputConfig"],z);const q=m(n,["contextWindowCompression"]);e!==void 0&&q!=null&&g(e,["setup","contextWindowCompression"],q);const X=m(n,["proactivity"]);if(e!==void 0&&X!=null&&g(e,["setup","proactivity"],X),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function MD(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],kt(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],RD(a,t)),t}function DD(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],AD(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],kD(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],SD(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const b=m(n,["thought"]);b!=null&&g(e,["thought"],b);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function PD(n){const e={},t=m(n,["handle"]);if(t!=null&&g(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jD(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(_=>_)),g(e,["functionDeclarations"],b)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],CD(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],ID(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LD(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function UD(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const l=LD(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(f=>u.includes(f)?`generationConfig.${f}`:f));const p=[];l&&p.push(l),h.length>0&&p.push(...h),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class OD extends Da{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=ND(this.apiClient,e);l=Re("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=UD(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VD(n,e){const t={},s=m(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function BD(n){const e={},t=m(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=m(n,["config"]);return s!=null&&VD(s,e),e}function GD(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function zD(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function HD(n){const e={},t=m(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=m(n,["config"]);return s!=null&&zD(s,e),e}function FD(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qD extends Da{constructor(e){super(),this.apiClient=e,this.list=async t=>new Mo(wa.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=GD(e);return l=Re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BD(e);a=Re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HD(e);return l=Re("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=FD(p),b=new EC;return Object.assign(b,f),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KD extends Da{constructor(e,t=new qD(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Mo(wa.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=L4(e);return l=Re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=V4(e);return l=Re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=O4(e);a=Re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=q4(e);return l=Re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=K4(p),b=new wC;return Object.assign(b,f),b})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$4(e);return l=Re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=Y4(p),b=new NC;return Object.assign(b,f),b})}}async importFile(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=z4(e);return l=Re("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=G4(p),b=new tg;return Object.assign(b,f),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let h1=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return h1=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const $D=()=>h1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const gp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ai extends Error{}class ls extends ai{constructor(e,t,s,a){super(`${ls.makeMessage(e,t,s)}`),this.status=e,this.headers=a,this.error=t}static makeMessage(e,t,s){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,s,a){if(!e||!a)return new of({message:s,cause:gp(t)});const l=t;return e===400?new m1(e,l,s,a):e===401?new p1(e,l,s,a):e===403?new g1(e,l,s,a):e===404?new x1(e,l,s,a):e===409?new y1(e,l,s,a):e===422?new b1(e,l,s,a):e===429?new v1(e,l,s,a):e>=500?new _1(e,l,s,a):new ls(e,l,s,a)}}class xp extends ls{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class of extends ls{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class f1 extends of{constructor({message:e}={}){super({message:e??"Request timed out."})}}class m1 extends ls{}class p1 extends ls{}class g1 extends ls{}class x1 extends ls{}class y1 extends ls{}class b1 extends ls{}class v1 extends ls{}class _1 extends ls{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YD=/^[a-z][a-z0-9+.-]*:/i,JD=n=>YD.test(n);let yp=n=>(yp=Array.isArray,yp(n));const QD=yp;let WD=QD;const AT=WD;function XD(n){if(!n)return!0;for(const e in n)return!1;return!0}function ZD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const e5=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ai(`${n} must be an integer`);if(e<0)throw new ai(`${n} must be a positive integer`);return e},t5=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n5=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s5(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const i5=()=>{var n,e,t,s,a;const l=s5();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":CT(Deno.build.os),"X-Stainless-Arch":kT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":CT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":kT((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const u=a5();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function a5(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const kT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",CT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Jd;const r5=()=>Jd??(Jd=i5());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function T1(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function l5(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return T1({start(){},async pull(t){const{done:s,value:a}=await e.next();s?t.close():t.enqueue(a)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function S1(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function c5(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u5=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E1=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function z0(n,e,t){return E1(),new File(n,e??"unknown_file",t)}function d5(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const h5=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w1=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",f5=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&w1(n),m5=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function p5(n,e,t){if(E1(),n=await n,f5(n))return n instanceof File?n:z0([await n.arrayBuffer()],n.name);if(m5(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),z0(await bp(a),e,t)}const s=await bp(n);if(e||(e=d5(n)),!(t!=null&&t.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(t=Object.assign(Object.assign({},t),{type:a}))}return z0(s,e,t)}async function bp(n){var e,t,s,a,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(w1(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(h5(n))try{for(var h=!0,p=Ti(n),f;f=await p.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const b=a;u.push(...await bp(b))}}catch(b){t={error:b}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}else{const b=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${b?`; constructor: ${b}`:""}${g5(n)}`)}return u}function g5(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N1{constructor(e){this._client=e}}N1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A1(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const IT=Object.freeze(Object.create(null)),x5=(n=A1)=>(function(t,...s){if(t.length===1)return t[0];let a=!1;const l=[],u=t.reduce((b,_,T)=>{var E,I,C;/[?#]/.test(_)&&(a=!0);const k=s[T];let j=(a?encodeURIComponent:n)(""+k);return T!==s.length&&(k==null||typeof k=="object"&&k.toString===((C=Object.getPrototypeOf((I=Object.getPrototypeOf((E=k.hasOwnProperty)!==null&&E!==void 0?E:IT))!==null&&I!==void 0?I:IT))===null||C===void 0?void 0:C.toString))&&(j=k+"",l.push({start:b.length+_.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),b+_+(T===s.length?"":j)},""),h=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=p.exec(h))!==null;)l.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(l.sort((b,_)=>b.start-_.start),l.length>0){let b=0;const _=l.reduce((T,E)=>{const I=" ".repeat(E.start-b),C="^".repeat(E.length);return b=E.start+E.length,T+I+C},"");throw new ai(`Path parameters result in path with invalid segments:
${l.map(T=>T.error).join(`
`)}
${u}
${_}`)}return u}),Qd=x5(A1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k1 extends N1{create(e,t){var s;const{api_version:a=this._client.apiVersion}=e,l=Nh(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ai("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ai("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Qd`/${a}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.delete(Qd`/${a}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.post(Qd`/${a}/interactions/${e}/cancel`,s)}get(e,t={},s){var a;const l=t??{},{api_version:u=this._client.apiVersion}=l,h=Nh(l,["api_version"]);return this._client.get(Qd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=t==null?void 0:t.stream)!==null&&a!==void 0?a:!1}))}}k1._key=Object.freeze(["interactions"]);class C1 extends k1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y5(n){let e=0;for(const a of n)e+=a.length;const t=new Uint8Array(e);let s=0;for(const a of n)t.set(a,s),s+=a.length;return t}let Wd;function lg(n){let e;return(Wd??(e=new globalThis.TextEncoder,Wd=e.encode.bind(e)))(n)}let Xd;function RT(n){let e;return(Xd??(e=new globalThis.TextDecoder,Xd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?lg(e):e;this.buffer=y5([this.buffer,t]);const s=[];let a;for(;(a=b5(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(RT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,u=RT(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}lf.NEWLINE_CHARS=new Set([`
`,"\r"]);lf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function b5(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function v5(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ah={off:0,error:200,warn:300,info:400,debug:500},MT=(n,e,t)=>{if(n){if(ZD(Ah,n))return n;rs(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ah))}`)}};function Zc(){}function Zd(n,e,t){return!e||Ah[n]>Ah[t]?Zc:e[n].bind(e)}const _5={error:Zc,warn:Zc,info:Zc,debug:Zc};let DT=new WeakMap;function rs(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return _5;const a=DT.get(t);if(a&&a[0]===s)return a[1];const l={error:Zd("error",t,s),warn:Zd("warn",t,s),info:Zd("info",t,s),debug:Zd("debug",t,s)};return DT.set(t,[s,l]),l}const po=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cl{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let a=!1;const l=s?rs(s):console;function u(){return _i(this,arguments,function*(){var p,f,b,_;if(a)throw new ai("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,I=Ti(T5(e,t)),C;C=yield it(I.next()),p=C.done,!p;E=!0){_=C.value,E=!1;const k=_;if(!T)if(k.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield it(JSON.parse(k.data))}catch(j){throw l.error("Could not parse message into JSON:",k.data),l.error("From chunk:",k.raw),j}}}catch(k){f={error:k}}finally{try{!E&&!p&&(b=I.return)&&(yield it(b.call(I)))}finally{if(f)throw f.error}}T=!0}catch(k){if(pp(k))return yield it(void 0);throw k}finally{T||t.abort()}})}return new Cl(u,t,s)}static fromReadableStream(e,t,s){let a=!1;function l(){return _i(this,arguments,function*(){var p,f,b,_;const T=new lf,E=S1(e);try{for(var I=!0,C=Ti(E),k;k=yield it(C.next()),p=k.done,!p;I=!0){_=k.value,I=!1;const j=_;for(const M of T.decode(j))yield yield it(M)}}catch(j){f={error:j}}finally{try{!I&&!p&&(b=C.return)&&(yield it(b.call(C)))}finally{if(f)throw f.error}}for(const j of T.flush())yield yield it(j)})}function u(){return _i(this,arguments,function*(){var p,f,b,_;if(a)throw new ai("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,I=Ti(l()),C;C=yield it(I.next()),p=C.done,!p;E=!0){_=C.value,E=!1;const k=_;T||k&&(yield yield it(JSON.parse(k)))}}catch(k){f={error:k}}finally{try{!E&&!p&&(b=I.return)&&(yield it(b.call(I)))}finally{if(f)throw f.error}}T=!0}catch(k){if(pp(k))return yield it(void 0);throw k}finally{T||t.abort()}})}return new Cl(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),t.push(u)}return l.shift()}});return[new Cl(()=>a(e),this.controller,this.client),new Cl(()=>a(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return T1({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await t.next();if(l)return s.close();const u=lg(JSON.stringify(a)+`
`);s.enqueue(u)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function T5(n,e){return _i(this,arguments,function*(){var s,a,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ai("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ai("Attempted to iterate over a response with no body");const h=new E5,p=new lf,f=S1(n.body);try{for(var b=!0,_=Ti(S5(f)),T;T=yield it(_.next()),s=T.done,!s;b=!0){u=T.value,b=!1;const E=u;for(const I of p.decode(E)){const C=h.decode(I);C&&(yield yield it(C))}}}catch(E){a={error:E}}finally{try{!b&&!s&&(l=_.return)&&(yield it(l.call(_)))}finally{if(a)throw a.error}}for(const E of p.flush()){const I=h.decode(E);I&&(yield yield it(I))}})}function S5(n){return _i(this,arguments,function*(){var t,s,a,l;let u=new Uint8Array;try{for(var h=!0,p=Ti(n),f;f=yield it(p.next()),t=f.done,!t;h=!0){l=f.value,h=!1;const b=l;if(b==null)continue;const _=b instanceof ArrayBuffer?new Uint8Array(b):typeof b=="string"?lg(b):b;let T=new Uint8Array(u.length+_.length);T.set(u),T.set(_,u.length),u=T;let E;for(;(E=v5(u))!==-1;)yield yield it(u.slice(0,E)),u=u.slice(E)}}catch(b){s={error:b}}finally{try{!h&&!t&&(a=p.return)&&(yield it(a.call(p)))}finally{if(s)throw s.error}}u.length>0&&(yield yield it(u))})}class E5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,a]=w5(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function w5(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function N5(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,u=await(async()=>{var h;if(e.options.stream)return rs(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Cl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),f=(h=p==null?void 0:p.split(";")[0])===null||h===void 0?void 0:h.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await t.json():await t.text()})();return rs(n).debug(`[${s}] response parsed`,po({retryOfRequestLogID:a,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cg extends Promise{constructor(e,t,s=N5){super(a=>{a(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new cg(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I1=Symbol("brand.privateNullableHeaders");function*A5(n){if(!n)return;if(I1 in n){const{values:s,nulls:a}=n;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():AT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=AT(s[1])?s[1]:[s[1]];let u=!1;for(const h of l)h!==void 0&&(e&&!u&&(u=!0,yield[a,null]),yield[a,h])}}const Xc=n=>{const e=new Headers,t=new Set;for(const s of n){const a=new Set;for(const[l,u]of A5(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),u===null?(e.delete(l),t.add(h)):(e.append(l,u),t.delete(h))}}return{[I1]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H0=n=>{var e,t,s,a,l,u;if(typeof globalThis.process<"u")return(s=(t=(e=Z2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var R1;class cf{constructor(e){var t,s,a,l,u,h,p,{baseURL:f=H0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:b=(t=H0("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=Nh(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:b,apiVersion:_},T),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(s=E.timeout)!==null&&s!==void 0?s:cf.DEFAULT_TIMEOUT,this.logger=(a=E.logger)!==null&&a!==void 0?a:console;const I="warn";this.logLevel=I,this.logLevel=(u=(l=MT(E.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:MT(H0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:I,this.fetchOptions=E.fetchOptions,this.maxRetries=(h=E.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(p=E.fetch)!==null&&p!==void 0?p:o5(),this.encoder=u5,this._options=E,this.apiKey=b,this.apiVersion=_,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Xc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Xc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new ai(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sl}`}defaultIdempotencyKey(){return`stainless-node-retry-${$D()}`}makeStatusError(e,t,s,a){return ls.generate(e,t,s,a)}buildURL(e,t,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=JD(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return XD(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:t},a)))}request(e,t=null){return new cg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var a,l,u;const h=await e,p=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;t==null&&(t=p),await this.prepareOptions(h);const{req:f,url:b,timeout:_}=await this.buildRequest(h,{retryCount:p-t});await this.prepareRequest(f,{url:b,options:h});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=s===void 0?"":`, retryOf: ${s}`,I=Date.now();if(rs(this).debug(`[${T}] sending request`,po({retryOfRequestLogID:s,method:h.method,url:b,options:h,headers:f.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new xp;const C=new AbortController,k=await this.fetchWithTimeout(b,f,_,C).catch(gp),j=Date.now();if(k instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new xp;const q=pp(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(t)return rs(this).info(`[${T}] connection ${q?"timed out":"failed"} - ${z}`),rs(this).debug(`[${T}] connection ${q?"timed out":"failed"} (${z})`,po({retryOfRequestLogID:s,url:b,durationMs:j-I,message:k.message})),this.retryRequest(h,t,s??T);throw rs(this).info(`[${T}] connection ${q?"timed out":"failed"} - error; no more retries left`),rs(this).debug(`[${T}] connection ${q?"timed out":"failed"} (error; no more retries left)`,po({retryOfRequestLogID:s,url:b,durationMs:j-I,message:k.message})),q?new f1:new of({cause:k})}const M=`[${T}${E}] ${f.method} ${b} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${j-I}ms`;if(!k.ok){const z=await this.shouldRetry(k);if(t&&z){const R=`retrying, ${t} attempts remaining`;return await c5(k.body),rs(this).info(`${M} - ${R}`),rs(this).debug(`[${T}] response error (${R})`,po({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,durationMs:j-I})),this.retryRequest(h,t,s??T,k.headers)}const q=z?"error; no more retries left":"error; not retryable";rs(this).info(`${M} - ${q}`);const X=await k.text().catch(R=>gp(R).message),$=t5(X),D=$?void 0:X;throw rs(this).debug(`[${T}] response error (${q})`,po({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,message:D,durationMs:Date.now()-I})),this.makeStatusError(k.status,$,D,k.headers)}return rs(this).info(M),rs(this).debug(`[${T}] response start`,po({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,durationMs:j-I})),{response:k,options:h,controller:C,requestLogID:T,retryOfRequestLogID:s,startTime:I}}async fetchWithTimeout(e,t,s,a){const l=t||{},{signal:u,method:h}=l,p=Nh(l,["signal","method"]);u&&u.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),b=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},b?{duplex:"half"}:{}),{method:"GET"}),p);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(f)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,a){var l;let u;const h=a==null?void 0:a.get("retry-after-ms");if(h){const f=parseFloat(h);Number.isNaN(f)||(u=f)}const p=a==null?void 0:a.get("retry-after");if(p&&!u){const f=parseFloat(p);Number.isNaN(f)?u=Date.parse(p)-Date.now():u=f*1e3}if(!(u&&0<=u&&u<60*1e3)){const f=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,f)}return await n5(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,a,l;const u=Object.assign({},e),{method:h,path:p,query:f,defaultBaseURL:b}=u,_=this.buildURL(p,f,b);"timeout"in u&&e5("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:E}=this.buildBody({options:u}),I=await this.buildHeaders({options:e,method:h,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:I},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=Xc([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),r5()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Xc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:l5(e)}:this.encoder({body:e,headers:s})}}cf.DEFAULT_TIMEOUT=6e4;class Ln extends cf{constructor(){super(...arguments),this.interactions=new C1(this)}}R1=Ln;Ln.GeminiNextGenAPIClient=R1;Ln.GeminiNextGenAPIClientError=ai;Ln.APIError=ls;Ln.APIConnectionError=of;Ln.APIConnectionTimeoutError=f1;Ln.APIUserAbortError=xp;Ln.NotFoundError=x1;Ln.ConflictError=y1;Ln.RateLimitError=v1;Ln.BadRequestError=m1;Ln.AuthenticationError=p1;Ln.InternalServerError=_1;Ln.PermissionDeniedError=g1;Ln.UnprocessableEntityError=b1;Ln.toFile=p5;Ln.Interactions=C1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function C5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function I5(n,e){const t={},s=m(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function R5(n,e){const t={},s=m(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function M5(n,e,t){const s={};if(m(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=m(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),m(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=m(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=m(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),m(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=m(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const p=m(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function D5(n,e,t){const s={};let a=m(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const E=m(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec"],PT(E))}else if(a==="PREFERENCE_TUNING"){const E=m(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec"],PT(E))}const l=m(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=m(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=m(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=m(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(h==="PREFERENCE_TUNING"){const E=m(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let p=m(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=m(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="PREFERENCE_TUNING"){const E=m(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let f=m(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=m(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(f==="PREFERENCE_TUNING"){const E=m(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let b=m(t,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const E=m(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(b==="PREFERENCE_TUNING"){const E=m(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(m(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=m(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=m(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function P5(n,e){const t={},s=m(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=m(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=m(n,["trainingDataset"]);l!=null&&q5(l);const u=m(n,["config"]);return u!=null&&M5(u,t),t}function j5(n,e){const t={},s=m(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=m(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=m(n,["trainingDataset"]);l!=null&&K5(l,t,e);const u=m(n,["config"]);return u!=null&&D5(u,t,e),t}function L5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function U5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function O5(n,e,t){const s={},a=m(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=m(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=m(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function V5(n,e,t){const s={},a=m(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=m(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=m(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function B5(n,e){const t={},s=m(n,["config"]);return s!=null&&O5(s,t),t}function G5(n,e){const t={},s=m(n,["config"]);return s!=null&&V5(s,t),t}function z5(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=m(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>M1(h))),g(t,["tuningJobs"],u)}return t}function H5(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=m(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>vp(h))),g(t,["tuningJobs"],u)}return t}function F5(n,e){const t={},s=m(n,["name"]);s!=null&&g(t,["model"],s);const a=m(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function q5(n,e){const t={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=m(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(t,["examples","examples"],a)}return t}function K5(n,e,t){const s={};let a=m(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=m(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=m(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=m(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=m(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=m(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(m(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function M1(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["state"]);l!=null&&g(t,["state"],YE(l));const u=m(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=m(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const p=m(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const b=m(n,["description"]);b!=null&&g(t,["description"],b);const _=m(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=m(n,["_self"]);return T!=null&&g(t,["tunedModel"],F5(T)),t}function vp(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["state"]);l!=null&&g(t,["state"],YE(l));const u=m(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=m(n,["startTime"]);h!=null&&g(t,["startTime"],h);const p=m(n,["endTime"]);p!=null&&g(t,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const b=m(n,["error"]);b!=null&&g(t,["error"],b);const _=m(n,["description"]);_!=null&&g(t,["description"],_);const T=m(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const E=m(n,["tunedModel"]);E!=null&&g(t,["tunedModel"],E);const I=m(n,["preTunedModel"]);I!=null&&g(t,["preTunedModel"],I);const C=m(n,["supervisedTuningSpec"]);C!=null&&g(t,["supervisedTuningSpec"],C);const k=m(n,["preferenceOptimizationSpec"]);k!=null&&g(t,["preferenceOptimizationSpec"],k);const j=m(n,["tuningDataStats"]);j!=null&&g(t,["tuningDataStats"],j);const M=m(n,["encryptionSpec"]);M!=null&&g(t,["encryptionSpec"],M);const z=m(n,["partnerModelTuningSpec"]);z!=null&&g(t,["partnerModelTuningSpec"],z);const q=m(n,["customBaseModel"]);q!=null&&g(t,["customBaseModel"],q);const X=m(n,["experiment"]);X!=null&&g(t,["experiment"],X);const $=m(n,["labels"]);$!=null&&g(t,["labels"],$);const D=m(n,["outputUri"]);D!=null&&g(t,["outputUri"],D);const N=m(n,["pipelineJob"]);N!=null&&g(t,["pipelineJob"],N);const R=m(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const L=m(n,["tunedModelDisplayName"]);L!=null&&g(t,["tunedModelDisplayName"],L);const O=m(n,["veoTuningSpec"]);return O!=null&&g(t,["veoTuningSpec"],O),t}function $5(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=m(n,["done"]);u!=null&&g(t,["done"],u);const h=m(n,["error"]);return h!=null&&g(t,["error"],h),t}function PT(n,e){const t={},s=m(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=m(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y5 extends Da{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(wa.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:lp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=U5(e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>vp(b))}else{const f=L5(e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>M1(b))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=G5(e);return h=Re("tuningJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=H5(b),T=new rT;return Object.assign(T,_),T})}else{const f=B5(e);return h=Re("tunedModels",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=z5(b),T=new rT;return Object.assign(T,_),T})}}async cancel(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=C5(e);return h=Re("{name}:cancel",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=R5(b),T=new oT;return Object.assign(T,_),T})}else{const f=k5(e);return h=Re("{name}:cancel",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(b=>b.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:b.headers},T})),u.then(b=>{const _=I5(b),T=new oT;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=j5(e,e);return l=Re("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>vp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=P5(e);return l=Re("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const b=f;return b.sdkHttpResponse={headers:p.headers},b})),a.then(p=>$5(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J5{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Q5=1024*1024*8,W5=3,X5=1e3,Z5=2,kh="x-goog-upload-status";async function eP(n,e,t){var s;const a=await D1(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[kh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function tP(n,e,t){var s;const a=await D1(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[kh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=zE(l),h=new ng;return Object.assign(h,u),h}async function D1(n,e,t){var s,a;let l=0,u=0,h=new cp(new Response),p="upload";for(l=n.size;u<l;){const f=Math.min(Q5,l-u),b=n.slice(u,u+f);u+f>=l&&(p+=", finalize");let _=0,T=X5;for(;_<W5&&(h=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(f)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[kh]));)_++,await sP(T),T=T*Z5;if(u+=f,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[kh])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function nP(n){return{size:n.size,type:n.type}}function sP(n){return new Promise(e=>setTimeout(e,n))}class iP{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eP(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tP(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aP{create(e,t,s){return new rP(e,t,s)}}class rP{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jT="x-goog-api-key";class oP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(jT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(jT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lP="gl-node/";class cP{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Ln({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=sC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new oP(this.apiKey);this.apiClient=new nD({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:lP+"web",uploader:new iP,downloader:new J5}),this.models=new _D(this.apiClient),this.live=new pD(this.apiClient,a,new aP),this.batches=new MI(this.apiClient),this.chats=new fR(this.models,this.apiClient),this.caches=new uR(this.apiClient),this.files=new SR(this.apiClient),this.operations=new TD(this.apiClient),this.authTokens=new OD(this.apiClient),this.tunings=new Y5(this.apiClient),this.fileSearchStores=new KD(this.apiClient)}}const uP=new cP({apiKey:"AIzaSyBm_oApA7D89kWU7QLCTfoeHn9WaZgHJpI"});function LT(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const P1={type:Ce.OBJECT,properties:{id:{type:Ce.STRING},type:{type:Ce.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:Ce.STRING},options:{type:Ce.ARRAY,items:{type:Ce.STRING}},correctAnswer:{type:Ce.STRING},tkpPoints:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{option:{type:Ce.STRING},points:{type:Ce.INTEGER}}}},explanation:{type:Ce.STRING},shortcut:{type:Ce.STRING},metadata:{type:Ce.OBJECT,properties:{difficulty:{type:Ce.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:Ce.INTEGER},topic:{type:Ce.STRING},subtest:{type:Ce.STRING},trapPattern:{type:Ce.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},dP={type:Ce.OBJECT,properties:{questions:{type:Ce.ARRAY,items:P1}},required:["questions"]};async function Wi(n,e,t){const s="gemini-3-flash-preview",a={temperature:.9,topP:.95,topK:40};e&&(a.responseMimeType="application/json",a.responseSchema=e);const l=[];t&&l.push({inlineData:{mimeType:"application/pdf",data:t}}),l.push({text:n});try{const h=(await uP.models.generateContent({model:s,contents:{role:"user",parts:l},config:a})).text;if(!h)throw new Error("Empty response from AI");if(e)try{let p=h.trim();return p.startsWith("```json")?p=p.replace(/^```json\n?/,"").replace(/\n?```$/,""):p.startsWith("```")&&(p=p.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(p)}catch(p){console.error("JSON Parse Error",p);const f=h.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return f?JSON.parse(f[0]):h}return h}catch(u){throw console.error("Gemini API Error:",u),u}}function hP(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0&&(n.options.includes("Sangat Setuju")||n.options.includes("Sangat Tidak Setuju"))||(n.options=LT(n.options))),n}const on=async(n,e,t,s=5,a=[],l,u,h)=>{let p="",f;const b=`
  IMPORTANT VISUAL RULES:
  - ONLY use Unicode Emojis/Shapes if the question is SPATIAL, FIGURAL, or LOGIC PATTERN (TPA/Psikotes).
  - For 3D Spatial / Block Counting, use: , , , .
  - For 2D Patterns/Series, use: , , , , , , , , , , , , .
  - DO NOT use emojis for standard text questions (History, Law, TKP, etc). Keep them professional.
  `,_=`
  CRITICAL MATH & FORMATTING RULES:
  - Exponents: MUST USE UNICODE SUPERSCRIPTS (            ). DO NOT use caret (^).
  - Fractions: STRICTLY use UNICODE FRACTION CHARACTERS (, , , , , , , , , , , , , , ).
  - If a specific glyph doesn't exist, use the Fraction Slash () (e.g. 710, 35). Avoid standard slash (/).
  `,T="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let E=dP;const I=e==="TPA"&&typeof t=="string"&&(t.includes("Psikotes")||t.includes("Kepribadian")||t.includes("Logika Gambar"));if(e==="GENERAL"&&u){const j=t,M=j.type==="topic"?`Topic: ${j.content}`:"Material Content";j.type==="pdf"&&(f=j.content);const z=j.difficultyPreference||"MEDIUM",q=`DIFFICULTY LEVEL: ${z}. ${z==="HARD"?"Use complex analysis/HOTS.":z==="EASY"?"Use straightforward recall.":""}`;u==="ACTIVE_RECALL"?p=`Create ${s} Active Recall questions (Short Answer format) based on this: ${M}. 
          ${T} ${q} ${_}
          Questions must be specific and require recall of key facts/concepts.`:u==="PBL"?p=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${T} ${q} ${_}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${M}.`:p=`Create ${s} practice questions based on: ${M}. ${T} ${q} ${_}`,j.type==="text"&&(p+=`

CONTENT: ${j.content}`)}else if(I){const j=t;p=`GENERATE QUESTIONS FOR PSIKOTEST KEDINASAN (PKN STAN) V3.
      Subtest Context: ${j}.
      Count: ${s}.
      ${b}
      ${_}
      
      RULES:
      `,j.includes("Kepribadian")?p+=`
          TYPE: PERSONALITY TEST.
          Format: Statement with Likert Scale options (Sangat Setuju - Sangat Tidak Setuju).
          SCORING (tkpPoints): Assign points 1-5 based on positive ASN traits.
          `:j.includes("Gambar")?p+=`
          TYPE: TES LOGIKA GAMBAR (Abstract Reasoning/Spatial) V3.
          Requirement: MUST USE THE 3D/2D UNICODE SYMBOLS listed above. 
          Create visual analogies or 3D block counting problems.
          Example: "Jika [  ] diputar 45 derajat menjadi [  ], maka [  ] diputar..."
          `:p+=`
          TYPE: TIU (Tes Intelegensi Umum).
          Focus: Verbal (Sinonim/Analogi), Numerik, Logika.
          Use Unicode math symbols for Numerik questions.
          `,p+=`
Language: Bahasa Indonesia.`}else{let j="";const M=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&h==="TKP";if(M?j=`CONTEXT: SKD TKP (Tes Karakteristik Pribadi).
           
           CRITICAL TKP RULES:
           1. DIFFICULTY: Options must be VERY SIMILAR in length, tone, and logic. Avoid obvious outliers.
           2. NO LENGTH BIAS: Do not make the correct answer significantly longer than others.
           3. AMBIGUITY: The difference between 5 points and 4 points should be subtle (e.g., direct action vs. procedural action).
           4. VISUALS: DO NOT use emojis or icons in TKP questions. Use professional text only.
           `:j=`DIFFICULTY DISTRIBUTION:
           - 70% of questions MUST be HOTS (Higher Order Thinking Skills).
           - 30% of questions MUST be Difficult to Very Difficult.
           - ABSOLUTELY NO Easy or simple recall questions.`,e==="INTERVIEW")p=`Roleplay Task: Act as a professional HR Interviewer. Context: ${t}. Generate ${s} interview questions.`,E={type:Ce.OBJECT,properties:{questions:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{id:{type:Ce.STRING},type:{type:Ce.STRING,enum:["long_text"]},content:{type:Ce.STRING},explanation:{type:Ce.STRING},metadata:{type:Ce.OBJECT,properties:{topic:{type:Ce.STRING}}}},required:["content","type"]}}}};else{const z=`Generate ${s} distinct questions. ${j}. Provide DETAILED explanation. ${b} ${_}`;M?p=`SKD TKP MODE. ${z} SCORING: 1-5 points via 'tkpPoints'. Ensure high ambiguity between top choices.`:p=`TRY OUT / PRACTICE V3. Category: ${e}. Context: ${JSON.stringify(t)}. ${z}. If TPA or Spatial, utilize 3D symbols (, ) or geometric shapes heavily.`}}return((await Wi(p,E,f)).questions||[]).filter(j=>!!j).map(j=>{const M=hP(j);return e==="INTERVIEW"&&(M.type="long_text",M.options=[]),M})},fP=async(n,e,t)=>{const s={type:Ce.OBJECT,properties:{score:{type:Ce.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:Ce.BOOLEAN,description:"True if score > 70"},feedback:{type:Ce.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},a=`Evaluate answer. Q: ${n}. Key: ${e}. User: ${t}. Score (0-100), correct?, feedback.`;return Wi(a,s)},mP=async n=>{const e=`User weak in: ${n.join(", ")}. Provide concise study plan (3 paragraphs).`;return Wi(e)},pP=async(n,e)=>{const t={type:Ce.OBJECT,properties:{score:{type:Ce.INTEGER},feedback:{type:Ce.STRING},improvedAnswer:{type:Ce.STRING},keyPointsCovered:{type:Ce.ARRAY,items:{type:Ce.STRING}},toneAnalysis:{type:Ce.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate interview answer. Q: ${n}. A: ${e}. Act as HR.`;return Wi(s,t)},gP=async(n,e)=>{const t={type:Ce.OBJECT,properties:{understandingScore:{type:Ce.INTEGER},simplificationQuality:{type:Ce.STRING},missingConcepts:{type:Ce.ARRAY,items:{type:Ce.STRING}},correction:{type:Ce.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate Feynman Technique for "${n}". Explanation: ${e}`;return Wi(s,t)},xP=async n=>n.type==="pdf"&&n.content?await Wi("Extract/summarize main text from PDF. Ignore footers.",void 0,n.content):n.content,yP=async(n,e)=>{const t=`Context: University Thesis. Topic: ${n}. Task: ${e}.`;return Wi(t)},bP=async n=>{const e={type:Ce.OBJECT,properties:{flashcards:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{id:{type:Ce.STRING},title:{type:Ce.STRING},front:{type:Ce.STRING},back:{type:Ce.STRING}},required:["front","back","title"]}}}},t=`Create 10 flashcards based on: ${n.extractedText||n.content}.`;return(await Wi(t,e)).flashcards},vP=async n=>{const e={type:Ce.OBJECT,properties:{label:{type:Ce.STRING},children:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{label:{type:Ce.STRING},children:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{label:{type:Ce.STRING}}}}}}}}},t=`Create hierarchical mind map (JSON) for: ${n.title||n.content.substring(0,50)}.`;return Wi(t,e)},_P=async(n,e,t)=>{const s={type:Ce.OBJECT,properties:{topic:{type:Ce.STRING},summary:{type:Ce.STRING},keyPoints:{type:Ce.ARRAY,items:{type:Ce.STRING}},question:P1},required:["topic","summary","keyPoints","question"]},a=`Create Drill Card (Mini Lesson + 1 Question) for ${n} - ${e}. ${t?"("+t+")":""}. Use Unicode superscripts for any math. FRACTIONS: use Unicode characters (, , ) or Fraction Slash ().`;return Wi(a,s)},UT=async n=>{const e=on($e.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK)",30,[],n,void 0,"HOTS"),t=on($e.SIMULATION,"SKD","Tes Intelegensia Umum (TIU)",35,[],n,void 0,"HOTS"),s=on($e.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP)",45,[],n,void 0,"TKP"),[a,l,u]=await Promise.all([e,t,s]);return a.forEach(h=>h.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),l.forEach(h=>h.metadata.subtest="Tes Intelegensia Umum (TIU)"),u.forEach(h=>h.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...a,...l,...u]},OT=async()=>{const n=on($e.SIMULATION,"UTBK","Penalaran Umum",30,[],void 0,void 0,"HOTS"),e=on($e.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=on($e.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=on($e.SIMULATION,"UTBK","Pengetahuan Kuantitatif",20,[],void 0,void 0,"HOTS"),a=on($e.SIMULATION,"UTBK","Literasi Bahasa Indonesia",25,[],void 0,void 0,"HOTS"),l=on($e.SIMULATION,"UTBK","Literasi Bahasa Inggris",25,[],void 0,void 0,"HOTS"),u=on($e.SIMULATION,"UTBK","Penalaran Matematika",20,[],void 0,void 0,"HOTS"),[h,p,f,b,_,T,E]=await Promise.all([n,e,t,s,a,l,u]);return h.forEach(I=>I.metadata.subtest="Penalaran Umum"),p.forEach(I=>I.metadata.subtest="Pengetahuan dan Pemahaman Umum"),f.forEach(I=>I.metadata.subtest="Pemahaman Bacaan dan Menulis"),b.forEach(I=>I.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(I=>I.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(I=>I.metadata.subtest="Literasi Bahasa Inggris"),E.forEach(I=>I.metadata.subtest="Penalaran Matematika"),[...h,...p,...f,...b,..._,...T,...E]},VT=async()=>{const n=on($e.SIMULATION,"TPA","TPA - Verbal (HOTS)",15,[],void 0,void 0,"HOTS"),e=on($e.SIMULATION,"TPA","TPA - Kuantitatif (HOTS)",15,[],void 0,void 0,"HOTS"),t=on($e.SIMULATION,"TPA","TPA - Penalaran (HOTS)",15,[],void 0,void 0,"HOTS"),s=on($e.SIMULATION,"TPA","TBI - Bahasa Inggris (TOEFL Style)",20,[],void 0,void 0,"HOTS"),[a,l,u,h]=await Promise.all([n,e,t,s]);return a.forEach(p=>p.metadata.subtest="TPA - Kemampuan Verbal"),l.forEach(p=>p.metadata.subtest="TPA - Kemampuan Kuantitatif"),u.forEach(p=>p.metadata.subtest="TPA - Kemampuan Penalaran"),h.forEach(p=>p.metadata.subtest="TBI - Bahasa Inggris"),[...a,...l,...u,...h]},BT=async()=>{const n=on($e.SIMULATION,"TPA","PSIKOTEST KEDINASAN (TIU V3)",30,[],void 0,void 0,"HOTS"),e=on($e.SIMULATION,"TPA","PSIKOTEST KEDINASAN (LOGIKA GAMBAR V3). Use 3D UNICODE SHAPES (, , ) or geometric (, ) for spatial/pattern series.",15,[],void 0,void 0,"HOTS"),t=on($e.SIMULATION,"TPA","PSIKOTEST KEDINASAN (KEPRIBADIAN)",20,[],void 0,void 0,"TKP"),[s,a,l]=await Promise.all([n,e,t]);return s.forEach(u=>u.metadata.subtest="TIU - Verbal & Numerik"),a.forEach(u=>u.metadata.subtest="Tes Logika Gambar (Abstrak)"),l.forEach(u=>u.metadata.subtest="Tes Kepribadian"),[...s,...a,...l]},GT=async()=>on($e.SIMULATION,"PSIKOTEST","SIMULATION (IQ & LOGIC V3). Focus on spatial logic with 3D Unicode symbols (, ) where applicable.",40,[],void 0,void 0,"HOTS"),TP=()=>{};var zT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},SP=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},L1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,f=p?n[a+2]:0,b=l>>2,_=(l&3)<<4|h>>4;let T=(h&15)<<2|f>>6,E=f&63;p||(E=64,u||(T=64)),s.push(t[b],t[_],t[T],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(j1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const f=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||f==null||_==null)throw new EP;const T=l<<2|h>>4;if(s.push(T),f!==64){const E=h<<4&240|f>>2;if(s.push(E),_!==64){const I=f<<6&192|_;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class EP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wP=function(n){const e=j1(n);return L1.encodeByteArray(e,!0)},Ch=function(n){return wP(n).replace(/\./g,"")},U1=function(n){try{return L1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=()=>NP().__FIREBASE_DEFAULTS__,kP=()=>{if(typeof process>"u"||typeof zT>"u")return;const n=zT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&U1(n[1]);return e&&JSON.parse(e)},uf=()=>{try{return TP()||AP()||kP()||CP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},O1=n=>{var e,t;return(t=(e=uf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},IP=n=>{const e=O1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},V1=()=>{var n;return(n=uf())==null?void 0:n.config},B1=n=>{var e;return(e=uf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ch(JSON.stringify(t)),Ch(JSON.stringify(u)),""].join(".")}const iu={};function DP(){const n={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?n.emulator.push(e):n.prod.push(e);return n}function PP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let HT=!1;function z1(n,e){if(typeof window>"u"||typeof document>"u"||!Jl(window.location.host)||iu[n]===e||iu[n]||HT)return;iu[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=DP().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,E){T.setAttribute("width","24"),T.setAttribute("id",E),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{HT=!0,u()},T}function b(T,E){T.setAttribute("id",E),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=PP(s),E=t("text"),I=document.getElementById(E)||document.createElement("span"),C=t("learnmore"),k=document.getElementById(C)||document.createElement("a"),j=t("preprendIcon"),M=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const z=T.element;h(z),b(k,C);const q=f();p(M,j),z.append(M,I,k,q),document.body.appendChild(z)}l?(I.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ns())}function LP(){var e;const n=(e=uf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BP(){const n=ns();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GP(){return!LP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zP(){try{return typeof indexedDB=="object"}catch{return!1}}function HP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="FirebaseError";class ja extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=FP,Object.setPrototypeOf(this,ja.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?qP(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new ja(a,h,s)}}function qP(n,e){return n.replace(KP,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const KP=/\{\$([^}]+)}/g;function $P(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Eo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(FT(l)&&FT(u)){if(!Eo(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function FT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function YP(n,e){const t=new JP(n,e);return t.subscribe.bind(t)}class JP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");QP(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=F0),a.error===void 0&&(a.error=F0),a.complete===void 0&&(a.complete=F0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function F0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(n){return n&&n._delegate?n._delegate:n}class wo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new RP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZP(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XP(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XP(n){return n===go?void 0:n}function ZP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(yt||(yt={}));const tj={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},nj=yt.INFO,sj={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},ij=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=sj[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=nj,this._logHandler=ij,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const aj=(n,e)=>e.some(t=>n instanceof t);let qT,KT;function rj(){return qT||(qT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oj(){return KT||(KT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H1=new WeakMap,_p=new WeakMap,F1=new WeakMap,q0=new WeakMap,dg=new WeakMap;function lj(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Tr(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&H1.set(t,n)}).catch(()=>{}),dg.set(e,n),e}function cj(n){if(_p.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});_p.set(n,e)}let Tp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||F1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uj(n){Tp=n(Tp)}function dj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(K0(this),e,...t);return F1.set(s,e.sort?e.sort():[e]),Tr(s)}:oj().includes(n)?function(...e){return n.apply(K0(this),e),Tr(H1.get(this))}:function(...e){return Tr(n.apply(K0(this),e))}}function hj(n){return typeof n=="function"?dj(n):(n instanceof IDBTransaction&&cj(n),aj(n,rj())?new Proxy(n,Tp):n)}function Tr(n){if(n instanceof IDBRequest)return lj(n);if(q0.has(n))return q0.get(n);const e=hj(n);return e!==n&&(q0.set(n,e),dg.set(e,n)),e}const K0=n=>dg.get(n);function fj(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=Tr(u);return s&&u.addEventListener("upgradeneeded",p=>{s(Tr(u.result),p.oldVersion,p.newVersion,Tr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const mj=["get","getKey","getAll","getAllKeys","count"],pj=["put","add","delete","clear"],$0=new Map;function $T(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($0.get(e))return $0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=pj.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||mj.includes(t)))return;const l=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let f=p.store;return s&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),a&&p.done]))[0]};return $0.set(e,l),l}uj(n=>({...n,get:(e,t,s)=>$T(e,t)||n.get(e,t,s),has:(e,t)=>!!$T(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xj(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function xj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sp="@firebase/app",YT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new ug("@firebase/app"),yj="@firebase/app-compat",bj="@firebase/analytics-compat",vj="@firebase/analytics",_j="@firebase/app-check-compat",Tj="@firebase/app-check",Sj="@firebase/auth",Ej="@firebase/auth-compat",wj="@firebase/database",Nj="@firebase/data-connect",Aj="@firebase/database-compat",kj="@firebase/functions",Cj="@firebase/functions-compat",Ij="@firebase/installations",Rj="@firebase/installations-compat",Mj="@firebase/messaging",Dj="@firebase/messaging-compat",Pj="@firebase/performance",jj="@firebase/performance-compat",Lj="@firebase/remote-config",Uj="@firebase/remote-config-compat",Oj="@firebase/storage",Vj="@firebase/storage-compat",Bj="@firebase/firestore",Gj="@firebase/ai",zj="@firebase/firestore-compat",Hj="firebase",Fj="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",qj={[Sp]:"fire-core",[yj]:"fire-core-compat",[vj]:"fire-analytics",[bj]:"fire-analytics-compat",[Tj]:"fire-app-check",[_j]:"fire-app-check-compat",[Sj]:"fire-auth",[Ej]:"fire-auth-compat",[wj]:"fire-rtdb",[Nj]:"fire-data-connect",[Aj]:"fire-rtdb-compat",[kj]:"fire-fn",[Cj]:"fire-fn-compat",[Ij]:"fire-iid",[Rj]:"fire-iid-compat",[Mj]:"fire-fcm",[Dj]:"fire-fcm-compat",[Pj]:"fire-perf",[jj]:"fire-perf-compat",[Lj]:"fire-rc",[Uj]:"fire-rc-compat",[Oj]:"fire-gcs",[Vj]:"fire-gcs-compat",[Bj]:"fire-fst",[zj]:"fire-fst-compat",[Gj]:"fire-vertex","fire-js":"fire-js",[Hj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,Kj=new Map,wp=new Map;function JT(n,e){try{n.container.addComponent(e)}catch(t){Na.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ll(n){const e=n.name;if(wp.has(e))return Na.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,n);for(const t of Ih.values())JT(t,n);for(const t of Kj.values())JT(t,n);return!0}function hg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new Tu("app","Firebase",$j);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=Fj;function q1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Ep,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Sr.create("bad-app-name",{appName:String(a)});if(t||(t=V1()),!t)throw Sr.create("no-options");const l=Ih.get(a);if(l){if(Eo(t,l.options)&&Eo(s,l.config))return l;throw Sr.create("duplicate-app",{appName:a})}const u=new ej(a);for(const p of wp.values())u.addComponent(p);const h=new Yj(t,s,u);return Ih.set(a,h),h}function K1(n=Ep){const e=Ih.get(n);if(!e&&n===Ep&&V1())return q1();if(!e)throw Sr.create("no-app",{appName:n});return e}function Er(n,e,t){let s=qj[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Na.warn(u.join(" "));return}Ll(new wo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="firebase-heartbeat-database",Qj=1,du="firebase-heartbeat-store";let Y0=null;function $1(){return Y0||(Y0=fj(Jj,Qj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(du)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sr.create("idb-open",{originalErrorMessage:n.message})})),Y0}async function Wj(n){try{const t=(await $1()).transaction(du),s=await t.objectStore(du).get(Y1(n));return await t.done,s}catch(e){if(e instanceof ja)Na.warn(e.message);else{const t=Sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Na.warn(t.message)}}}async function QT(n,e){try{const s=(await $1()).transaction(du,"readwrite");await s.objectStore(du).put(e,Y1(n)),await s.done}catch(t){if(t instanceof ja)Na.warn(t.message);else{const s=Sr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Na.warn(s.message)}}}function Y1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=1024,Zj=30;class e6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new n6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=WT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>Zj){const u=s6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Na.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=WT(),{heartbeatsToSend:s,unsentEntries:a}=t6(this._heartbeatsCache.heartbeats),l=Ch(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Na.warn(t),""}}}function WT(){return new Date().toISOString().substring(0,10)}function t6(n,e=Xj){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),XT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),XT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class n6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zP()?HP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Wj(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return QT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return QT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function XT(n){return Ch(JSON.stringify({version:2,heartbeats:n})).length}function s6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(n){Ll(new wo("platform-logger",e=>new gj(e),"PRIVATE")),Ll(new wo("heartbeat",e=>new e6(e),"PRIVATE")),Er(Sp,YT,n),Er(Sp,YT,"esm2020"),Er("fire-js","")}i6("");var a6="firebase",r6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(a6,r6,"app");var ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,J1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function R(){}R.prototype=N.prototype,D.F=N.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(L,O,B){for(var U=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)U[Te-2]=arguments[Te];return N.prototype[O].apply(L,U)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,N,R){R||(R=0);const L=Array(16);if(typeof N=="string")for(var O=0;O<16;++O)L[O]=N.charCodeAt(R++)|N.charCodeAt(R++)<<8|N.charCodeAt(R++)<<16|N.charCodeAt(R++)<<24;else for(O=0;O<16;++O)L[O]=N[R++]|N[R++]<<8|N[R++]<<16|N[R++]<<24;N=D.g[0],R=D.g[1],O=D.g[2];let B=D.g[3],U;U=N+(B^R&(O^B))+L[0]+3614090360&4294967295,N=R+(U<<7&4294967295|U>>>25),U=B+(O^N&(R^O))+L[1]+3905402710&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(R^B&(N^R))+L[2]+606105819&4294967295,O=B+(U<<17&4294967295|U>>>15),U=R+(N^O&(B^N))+L[3]+3250441966&4294967295,R=O+(U<<22&4294967295|U>>>10),U=N+(B^R&(O^B))+L[4]+4118548399&4294967295,N=R+(U<<7&4294967295|U>>>25),U=B+(O^N&(R^O))+L[5]+1200080426&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(R^B&(N^R))+L[6]+2821735955&4294967295,O=B+(U<<17&4294967295|U>>>15),U=R+(N^O&(B^N))+L[7]+4249261313&4294967295,R=O+(U<<22&4294967295|U>>>10),U=N+(B^R&(O^B))+L[8]+1770035416&4294967295,N=R+(U<<7&4294967295|U>>>25),U=B+(O^N&(R^O))+L[9]+2336552879&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(R^B&(N^R))+L[10]+4294925233&4294967295,O=B+(U<<17&4294967295|U>>>15),U=R+(N^O&(B^N))+L[11]+2304563134&4294967295,R=O+(U<<22&4294967295|U>>>10),U=N+(B^R&(O^B))+L[12]+1804603682&4294967295,N=R+(U<<7&4294967295|U>>>25),U=B+(O^N&(R^O))+L[13]+4254626195&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(R^B&(N^R))+L[14]+2792965006&4294967295,O=B+(U<<17&4294967295|U>>>15),U=R+(N^O&(B^N))+L[15]+1236535329&4294967295,R=O+(U<<22&4294967295|U>>>10),U=N+(O^B&(R^O))+L[1]+4129170786&4294967295,N=R+(U<<5&4294967295|U>>>27),U=B+(R^O&(N^R))+L[6]+3225465664&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^R&(B^N))+L[11]+643717713&4294967295,O=B+(U<<14&4294967295|U>>>18),U=R+(B^N&(O^B))+L[0]+3921069994&4294967295,R=O+(U<<20&4294967295|U>>>12),U=N+(O^B&(R^O))+L[5]+3593408605&4294967295,N=R+(U<<5&4294967295|U>>>27),U=B+(R^O&(N^R))+L[10]+38016083&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^R&(B^N))+L[15]+3634488961&4294967295,O=B+(U<<14&4294967295|U>>>18),U=R+(B^N&(O^B))+L[4]+3889429448&4294967295,R=O+(U<<20&4294967295|U>>>12),U=N+(O^B&(R^O))+L[9]+568446438&4294967295,N=R+(U<<5&4294967295|U>>>27),U=B+(R^O&(N^R))+L[14]+3275163606&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^R&(B^N))+L[3]+4107603335&4294967295,O=B+(U<<14&4294967295|U>>>18),U=R+(B^N&(O^B))+L[8]+1163531501&4294967295,R=O+(U<<20&4294967295|U>>>12),U=N+(O^B&(R^O))+L[13]+2850285829&4294967295,N=R+(U<<5&4294967295|U>>>27),U=B+(R^O&(N^R))+L[2]+4243563512&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^R&(B^N))+L[7]+1735328473&4294967295,O=B+(U<<14&4294967295|U>>>18),U=R+(B^N&(O^B))+L[12]+2368359562&4294967295,R=O+(U<<20&4294967295|U>>>12),U=N+(R^O^B)+L[5]+4294588738&4294967295,N=R+(U<<4&4294967295|U>>>28),U=B+(N^R^O)+L[8]+2272392833&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^R)+L[11]+1839030562&4294967295,O=B+(U<<16&4294967295|U>>>16),U=R+(O^B^N)+L[14]+4259657740&4294967295,R=O+(U<<23&4294967295|U>>>9),U=N+(R^O^B)+L[1]+2763975236&4294967295,N=R+(U<<4&4294967295|U>>>28),U=B+(N^R^O)+L[4]+1272893353&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^R)+L[7]+4139469664&4294967295,O=B+(U<<16&4294967295|U>>>16),U=R+(O^B^N)+L[10]+3200236656&4294967295,R=O+(U<<23&4294967295|U>>>9),U=N+(R^O^B)+L[13]+681279174&4294967295,N=R+(U<<4&4294967295|U>>>28),U=B+(N^R^O)+L[0]+3936430074&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^R)+L[3]+3572445317&4294967295,O=B+(U<<16&4294967295|U>>>16),U=R+(O^B^N)+L[6]+76029189&4294967295,R=O+(U<<23&4294967295|U>>>9),U=N+(R^O^B)+L[9]+3654602809&4294967295,N=R+(U<<4&4294967295|U>>>28),U=B+(N^R^O)+L[12]+3873151461&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^R)+L[15]+530742520&4294967295,O=B+(U<<16&4294967295|U>>>16),U=R+(O^B^N)+L[2]+3299628645&4294967295,R=O+(U<<23&4294967295|U>>>9),U=N+(O^(R|~B))+L[0]+4096336452&4294967295,N=R+(U<<6&4294967295|U>>>26),U=B+(R^(N|~O))+L[7]+1126891415&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~R))+L[14]+2878612391&4294967295,O=B+(U<<15&4294967295|U>>>17),U=R+(B^(O|~N))+L[5]+4237533241&4294967295,R=O+(U<<21&4294967295|U>>>11),U=N+(O^(R|~B))+L[12]+1700485571&4294967295,N=R+(U<<6&4294967295|U>>>26),U=B+(R^(N|~O))+L[3]+2399980690&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~R))+L[10]+4293915773&4294967295,O=B+(U<<15&4294967295|U>>>17),U=R+(B^(O|~N))+L[1]+2240044497&4294967295,R=O+(U<<21&4294967295|U>>>11),U=N+(O^(R|~B))+L[8]+1873313359&4294967295,N=R+(U<<6&4294967295|U>>>26),U=B+(R^(N|~O))+L[15]+4264355552&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~R))+L[6]+2734768916&4294967295,O=B+(U<<15&4294967295|U>>>17),U=R+(B^(O|~N))+L[13]+1309151649&4294967295,R=O+(U<<21&4294967295|U>>>11),U=N+(O^(R|~B))+L[4]+4149444226&4294967295,N=R+(U<<6&4294967295|U>>>26),U=B+(R^(N|~O))+L[11]+3174756917&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~R))+L[2]+718787259&4294967295,O=B+(U<<15&4294967295|U>>>17),U=R+(B^(O|~N))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(O+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+B&4294967295}s.prototype.v=function(D,N){N===void 0&&(N=D.length);const R=N-this.blockSize,L=this.C;let O=this.h,B=0;for(;B<N;){if(O==0)for(;B<=R;)a(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<N;)if(L[O++]=D.charCodeAt(B++),O==this.blockSize){a(this,L),O=0;break}}else for(;B<N;)if(L[O++]=D[B++],O==this.blockSize){a(this,L),O=0;break}}this.h=O,this.o+=N},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,R=0;R<4;++R)for(let L=0;L<32;L+=8)D[N++]=this.g[R]>>>L&255;return D};function l(D,N){var R=h;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=N(D)}function u(D,N){this.h=N;const R=[];let L=!0;for(let O=D.length-1;O>=0;O--){const B=D[O]|0;L&&B==N||(R[O]=B,L=!1)}this.g=R}var h={};function p(D){return-128<=D&&D<128?l(D,function(N){return new u([N|0],N<0?-1:0)}):new u([D|0],D<0?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return _;if(D<0)return k(f(-D));const N=[];let R=1;for(let L=0;D>=R;L++)N[L]=D/R|0,R*=4294967296;return new u(N,0)}function b(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return k(b(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=f(Math.pow(N,8));let L=_;for(let B=0;B<D.length;B+=8){var O=Math.min(8,D.length-B);const U=parseInt(D.substring(B,B+O),N);O<8?(O=f(Math.pow(N,O)),L=L.j(O).add(f(U))):(L=L.j(R),L=L.add(f(U)))}return L}var _=p(0),T=p(1),E=p(16777216);n=u.prototype,n.m=function(){if(C(this))return-k(this).m();let D=0,N=1;for(let R=0;R<this.g.length;R++){const L=this.i(R);D+=(L>=0?L:4294967296+L)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(C(this))return"-"+k(this).toString(D);const N=f(Math.pow(D,6));var R=this;let L="";for(;;){const O=q(R,N).g;R=j(R,O.j(N));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=O,I(R))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function C(D){return D.h==-1}n.l=function(D){return D=j(this,D),C(D)?-1:I(D)?0:1};function k(D){const N=D.g.length,R=[];for(let L=0;L<N;L++)R[L]=~D.g[L];return new u(R,~D.h).add(T)}n.abs=function(){return C(this)?k(this):this},n.add=function(D){const N=Math.max(this.g.length,D.g.length),R=[];let L=0;for(let O=0;O<=N;O++){let B=L+(this.i(O)&65535)+(D.i(O)&65535),U=(B>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);L=U>>>16,B&=65535,U&=65535,R[O]=U<<16|B}return new u(R,R[R.length-1]&-2147483648?-1:0)};function j(D,N){return D.add(k(N))}n.j=function(D){if(I(this)||I(D))return _;if(C(this))return C(D)?k(this).j(k(D)):k(k(this).j(D));if(C(D))return k(this.j(k(D)));if(this.l(E)<0&&D.l(E)<0)return f(this.m()*D.m());const N=this.g.length+D.g.length,R=[];for(var L=0;L<2*N;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<D.g.length;O++){const B=this.i(L)>>>16,U=this.i(L)&65535,Te=D.i(O)>>>16,Me=D.i(O)&65535;R[2*L+2*O]+=U*Me,M(R,2*L+2*O),R[2*L+2*O+1]+=B*Me,M(R,2*L+2*O+1),R[2*L+2*O+1]+=U*Te,M(R,2*L+2*O+1),R[2*L+2*O+2]+=B*Te,M(R,2*L+2*O+2)}for(D=0;D<N;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=N;D<2*N;D++)R[D]=0;return new u(R,0)};function M(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function z(D,N){this.g=D,this.h=N}function q(D,N){if(I(N))throw Error("division by zero");if(I(D))return new z(_,_);if(C(D))return N=q(k(D),N),new z(k(N.g),k(N.h));if(C(N))return N=q(D,k(N)),new z(k(N.g),N.h);if(D.g.length>30){if(C(D)||C(N))throw Error("slowDivide_ only works with positive integers.");for(var R=T,L=N;L.l(D)<=0;)R=X(R),L=X(L);var O=$(R,1),B=$(L,1);for(L=$(L,2),R=$(R,2);!I(L);){var U=B.add(L);U.l(D)<=0&&(O=O.add(R),B=U),L=$(L,1),R=$(R,1)}return N=j(D,O.j(N)),new z(O,N)}for(O=_;D.l(N)>=0;){for(R=Math.max(1,Math.floor(D.m()/N.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=f(R),U=B.j(N);C(U)||U.l(D)>0;)R-=L,B=f(R),U=B.j(N);I(B)&&(B=T),O=O.add(B),D=j(D,U)}return new z(O,D)}n.B=function(D){return q(this,D).h},n.and=function(D){const N=Math.max(this.g.length,D.g.length),R=[];for(let L=0;L<N;L++)R[L]=this.i(L)&D.i(L);return new u(R,this.h&D.h)},n.or=function(D){const N=Math.max(this.g.length,D.g.length),R=[];for(let L=0;L<N;L++)R[L]=this.i(L)|D.i(L);return new u(R,this.h|D.h)},n.xor=function(D){const N=Math.max(this.g.length,D.g.length),R=[];for(let L=0;L<N;L++)R[L]=this.i(L)^D.i(L);return new u(R,this.h^D.h)};function X(D){const N=D.g.length+1,R=[];for(let L=0;L<N;L++)R[L]=D.i(L)<<1|D.i(L-1)>>>31;return new u(R,D.h)}function $(D,N){const R=N>>5;N%=32;const L=D.g.length-R,O=[];for(let B=0;B<L;B++)O[B]=N>0?D.i(B+R)>>>N|D.i(B+R+1)<<32-N:D.i(B+R);return new u(O,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,J1=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=b,wr=u}).apply(typeof ZT<"u"?ZT:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q1,eu,W1,dh,Np,X1,Z1,ew;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var S=0;S<x.length;++S){var A=x[S];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=t(this);function a(x,S){if(S)e:{var A=s;x=x.split(".");for(var V=0;V<x.length-1;V++){var ee=x[V];if(!(ee in A))break e;A=A[ee]}x=x[x.length-1],V=A[x],S=S(V),S!=V&&S!=null&&e(A,x,{configurable:!0,writable:!0,value:S})}}a("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(x){return x||function(S){var A=[],V;for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&A.push([V,S[V]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(x){var S=typeof x;return S=="object"&&x!=null||S=="function"}function p(x,S,A){return x.call.apply(x.bind,arguments)}function f(x,S,A){return f=p,f.apply(null,arguments)}function b(x,S){var A=Array.prototype.slice.call(arguments,1);return function(){var V=A.slice();return V.push.apply(V,arguments),x.apply(this,V)}}function _(x,S){function A(){}A.prototype=S.prototype,x.Z=S.prototype,x.prototype=new A,x.prototype.constructor=x,x.Ob=function(V,ee,re){for(var Se=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)Se[lt-2]=arguments[lt];return S.prototype[ee].apply(V,Se)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function E(x){const S=x.length;if(S>0){const A=Array(S);for(let V=0;V<S;V++)A[V]=x[V];return A}return[]}function I(x,S){for(let V=1;V<arguments.length;V++){const ee=arguments[V];var A=typeof ee;if(A=A!="object"?A:ee?Array.isArray(ee)?"array":A:"null",A=="array"||A=="object"&&typeof ee.length=="number"){A=x.length||0;const re=ee.length||0;x.length=A+re;for(let Se=0;Se<re;Se++)x[A+Se]=ee[Se]}else x.push(ee)}}class C{constructor(S,A){this.i=S,this.j=A,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function k(x){u.setTimeout(()=>{throw x},0)}function j(){var x=D;let S=null;return x.g&&(S=x.g,x.g=x.g.next,x.g||(x.h=null),S.next=null),S}class M{constructor(){this.h=this.g=null}add(S,A){const V=z.get();V.set(S,A),this.h?this.h.next=V:this.g=V,this.h=V}}var z=new C(()=>new q,x=>x.reset());class q{constructor(){this.next=this.g=this.h=null}set(S,A){this.h=S,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let X,$=!1,D=new M,N=()=>{const x=Promise.resolve(void 0);X=()=>{x.then(R)}};function R(){for(var x;x=j();){try{x.h.call(x.g)}catch(A){k(A)}var S=z;S.j(x),S.h<100&&(S.h++,x.next=S.g,S.g=x)}$=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(x,S){this.type=x,this.g=this.target=S,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,S=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const A=()=>{};u.addEventListener("test",A,S),u.removeEventListener("test",A,S)}catch{}return x})();function U(x){return/^[\s\xa0]*$/.test(x)}function Te(x,S){O.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,S)}_(Te,O),Te.prototype.init=function(x,S){const A=this.type=x.type,V=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=S,S=x.relatedTarget,S||(A=="mouseover"?S=x.fromElement:A=="mouseout"&&(S=x.toElement)),this.relatedTarget=S,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),J=0;function le(x,S,A,V,ee){this.listener=x,this.proxy=null,this.src=S,this.type=A,this.capture=!!V,this.ha=ee,this.key=++J,this.da=this.fa=!1}function ye(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ue(x,S,A){for(const V in x)S.call(A,x[V],V,x)}function Z(x,S){for(const A in x)S.call(void 0,x[A],A,x)}function H(x){const S={};for(const A in x)S[A]=x[A];return S}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(x,S){let A,V;for(let ee=1;ee<arguments.length;ee++){V=arguments[ee];for(A in V)x[A]=V[A];for(let re=0;re<Q.length;re++)A=Q[re],Object.prototype.hasOwnProperty.call(V,A)&&(x[A]=V[A])}}function se(x){this.src=x,this.g={},this.h=0}se.prototype.add=function(x,S,A,V,ee){const re=x.toString();x=this.g[re],x||(x=this.g[re]=[],this.h++);const Se=de(x,S,V,ee);return Se>-1?(S=x[Se],A||(S.fa=!1)):(S=new le(S,this.src,re,!!V,ee),S.fa=A,x.push(S)),S};function ue(x,S){const A=S.type;if(A in x.g){var V=x.g[A],ee=Array.prototype.indexOf.call(V,S,void 0),re;(re=ee>=0)&&Array.prototype.splice.call(V,ee,1),re&&(ye(S),x.g[A].length==0&&(delete x.g[A],x.h--))}}function de(x,S,A,V){for(let ee=0;ee<x.length;++ee){const re=x[ee];if(!re.da&&re.listener==S&&re.capture==!!A&&re.ha==V)return ee}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),ht={};function Xe(x,S,A,V,ee){if(Array.isArray(S)){for(let re=0;re<S.length;re++)Xe(x,S[re],A,V,ee);return null}return A=Le(A),x&&x[Me]?x.J(S,A,h(V)?!!V.capture:!1,ee):wt(x,S,A,!1,V,ee)}function wt(x,S,A,V,ee,re){if(!S)throw Error("Invalid event type");const Se=h(ee)?!!ee.capture:!!ee;let lt=Je(x);if(lt||(x[Ee]=lt=new se(x)),A=lt.add(S,A,V,Se,re),A.proxy)return A;if(V=Dt(),A.proxy=V,V.src=x,V.listener=A,x.addEventListener)B||(ee=Se),ee===void 0&&(ee=!1),x.addEventListener(S.toString(),V,ee);else if(x.attachEvent)x.attachEvent(ce(S.toString()),V);else if(x.addListener&&x.removeListener)x.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Dt(){function x(A){return S.call(x.src,x.listener,A)}const S=Be;return x}function nt(x,S,A,V,ee){if(Array.isArray(S))for(var re=0;re<S.length;re++)nt(x,S[re],A,V,ee);else V=h(V)?!!V.capture:!!V,A=Le(A),x&&x[Me]?(x=x.i,re=String(S).toString(),re in x.g&&(S=x.g[re],A=de(S,A,V,ee),A>-1&&(ye(S[A]),Array.prototype.splice.call(S,A,1),S.length==0&&(delete x.g[re],x.h--)))):x&&(x=Je(x))&&(S=x.g[S.toString()],x=-1,S&&(x=de(S,A,V,ee)),(A=x>-1?S[x]:null)&&et(A))}function et(x){if(typeof x!="number"&&x&&!x.da){var S=x.src;if(S&&S[Me])ue(S.i,x);else{var A=x.type,V=x.proxy;S.removeEventListener?S.removeEventListener(A,V,x.capture):S.detachEvent?S.detachEvent(ce(A),V):S.addListener&&S.removeListener&&S.removeListener(V),(A=Je(S))?(ue(A,x),A.h==0&&(A.src=null,S[Ee]=null)):ye(x)}}}function ce(x){return x in ht?ht[x]:ht[x]="on"+x}function Be(x,S){if(x.da)x=!0;else{S=new Te(S,this);const A=x.listener,V=x.ha||x.src;x.fa&&et(x),x=A.call(V,S)}return x}function Je(x){return x=x[Ee],x instanceof se?x:null}var Qe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Le(x){return typeof x=="function"?x:(x[Qe]||(x[Qe]=function(S){return x.handleEvent(S)}),x[Qe])}function we(){L.call(this),this.i=new se(this),this.M=this,this.G=null}_(we,L),we.prototype[Me]=!0,we.prototype.removeEventListener=function(x,S,A,V){nt(this,x,S,A,V)};function Oe(x,S){var A,V=x.G;if(V)for(A=[];V;V=V.G)A.push(V);if(x=x.M,V=S.type||S,typeof S=="string")S=new O(S,x);else if(S instanceof O)S.target=S.target||x;else{var ee=S;S=new O(V,x),he(S,ee)}ee=!0;let re,Se;if(A)for(Se=A.length-1;Se>=0;Se--)re=S.g=A[Se],ee=He(re,V,!0,S)&&ee;if(re=S.g=x,ee=He(re,V,!0,S)&&ee,ee=He(re,V,!1,S)&&ee,A)for(Se=0;Se<A.length;Se++)re=S.g=A[Se],ee=He(re,V,!1,S)&&ee}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var x=this.i;for(const S in x.g){const A=x.g[S];for(let V=0;V<A.length;V++)ye(A[V]);delete x.g[S],x.h--}}this.G=null},we.prototype.J=function(x,S,A,V){return this.i.add(String(x),S,!1,A,V)},we.prototype.K=function(x,S,A,V){return this.i.add(String(x),S,!0,A,V)};function He(x,S,A,V){if(S=x.i.g[String(S)],!S)return!0;S=S.concat();let ee=!0;for(let re=0;re<S.length;++re){const Se=S[re];if(Se&&!Se.da&&Se.capture==A){const lt=Se.listener,hn=Se.ha||Se.src;Se.fa&&ue(x.i,Se),ee=lt.call(hn,V)!==!1&&ee}}return ee&&!V.defaultPrevented}function xn(x,S){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(x,S||0)}function Bt(x){x.g=xn(()=>{x.g=null,x.i&&(x.i=!1,Bt(x))},x.l);const S=x.h;x.h=null,x.m.apply(null,S)}class Ct extends L{constructor(S,A){super(),this.m=S,this.l=A,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Bt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(x){L.call(this),this.h=x,this.g={}}_(cn,L);var js=[];function Un(x){Ue(x.g,function(S,A){this.g.hasOwnProperty(A)&&et(S)},x),x.g={}}cn.prototype.N=function(){cn.Z.N.call(this),Un(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _s=u.JSON.stringify,Ls=u.JSON.parse,Zi=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function Zt(){}function Us(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function un(){O.call(this,"d")}_(un,O);function Qn(){O.call(this,"c")}_(Qn,O);var Ft={},ri=null;function Oa(){return ri=ri||new we}Ft.Ia="serverreachability";function Os(x){O.call(this,Ft.Ia,x)}_(Os,O);function Jt(x){const S=Oa();Oe(S,new Os(S))}Ft.STAT_EVENT="statevent";function On(x,S){O.call(this,Ft.STAT_EVENT,x),this.stat=S}_(On,O);function tn(x){const S=Oa();Oe(S,new On(S,x))}Ft.Ja="timingevent";function Vs(x,S){O.call(this,Ft.Ja,x),this.size=S}_(Vs,O);function cs(x,S){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},S)}function us(){this.g=!0}us.prototype.ua=function(){this.g=!1};function st(x,S,A,V,ee,re){x.info(function(){if(x.g)if(re){var Se="",lt=re.split("&");for(let It=0;It<lt.length;It++){var hn=lt[It].split("=");if(hn.length>1){const Qt=hn[0];hn=hn[1];const $s=Qt.split("_");Se=$s.length>=2&&$s[1]=="type"?Se+(Qt+"="+hn+"&"):Se+(Qt+"=redacted&")}}}else Se=null;else Se=re;return"XMLHTTP REQ ("+V+") [attempt "+ee+"]: "+S+`
`+A+`
`+Se})}function oi(x,S,A,V,ee,re,Se){x.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ee+"]: "+S+`
`+A+`
`+re+" "+Se})}function Rn(x,S,A,V){x.info(function(){return"XMLHTTP TEXT ("+S+"): "+rc(x,A)+(V?" "+V:"")})}function Ai(x,S){x.info(function(){return"TIMEOUT: "+S})}us.prototype.info=function(){};function rc(x,S){if(!x.g)return S;if(!S)return null;try{const re=JSON.parse(S);if(re){for(x=0;x<re.length;x++)if(Array.isArray(re[x])){var A=re[x];if(!(A.length<2)){var V=A[1];if(Array.isArray(V)&&!(V.length<1)){var ee=V[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let Se=1;Se<V.length;Se++)V[Se]=""}}}}return _s(re)}catch{return S}}var ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Or={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Va;function ta(){}_(ta,Zt),ta.prototype.g=function(){return new XMLHttpRequest},Va=new ta;function li(x){return encodeURIComponent(String(x))}function Uo(x){var S=1;x=x.split(":");const A=[];for(;S>0&&x.length;)A.push(x.shift()),S--;return x.length&&A.push(x.join(":")),A}function Ts(x,S,A,V){this.j=x,this.i=S,this.l=A,this.S=V||1,this.V=new cn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ss}function Ss(){this.i=null,this.g="",this.h=!1}var nn={},yn={};function Bs(x,S,A){x.M=1,x.A=je(_e(S)),x.u=A,x.R=!0,Ba(x,null)}function Ba(x,S){x.F=Date.now(),Gs(x),x.B=_e(x.A);var A=x.B,V=x.S;Array.isArray(V)||(V=[String(V)]),Fs(A.i,"t",V),x.C=0,A=x.j.L,x.h=new Ss,x.g=zu(x.j,A?S:null,!x.u),x.P>0&&(x.O=new Ct(f(x.Y,x,x.g),x.P)),S=x.V,A=x.g,V=x.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(js[0]=ee.toString()),ee=js);for(let re=0;re<ee.length;re++){const Se=Xe(A,ee[re],V||S.handleEvent,!1,S.h||S);if(!Se)break;S.g[Se.key]=Se}S=x.J?H(x.J):{},x.u?(x.v||(x.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,S)):(x.v="GET",x.g.ea(x.B,x.v,null,S)),Jt(),st(x.i,x.v,x.B,x.l,x.S,x.u)}Ts.prototype.ba=function(x){x=x.target;const S=this.O;S&&hi(x)==3?S.j():this.Y(x)},Ts.prototype.Y=function(x){try{if(x==this.g)e:{const lt=hi(this.g),hn=this.g.ya(),It=this.g.ca();if(!(lt<3)&&(lt!=3||this.g&&(this.h.h||this.g.la()||Vn(this.g)))){this.K||lt!=4||hn==7||(hn==8||It<=0?Jt(3):Jt(2)),Es(this);var S=this.g.ca();this.X=S;var A=Oo(this);if(this.o=S==200,oi(this.i,this.v,this.B,this.l,this.S,lt,S),this.o){if(this.U&&!this.L){t:{if(this.g){var V,ee=this.g;if((V=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(V)){var re=V;break t}}re=null}if(x=re)Rn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ws(this,x);else{this.o=!1,this.m=3,tn(12),Mn(this),An(this);break e}}if(this.R){x=!0;let Qt;for(;!this.K&&this.C<A.length;)if(Qt=Bo(this,A),Qt==yn){lt==4&&(this.m=4,tn(14),x=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==nn){this.m=4,tn(15),Rn(this.i,this.l,A,"[Invalid Chunk]"),x=!1;break}else Rn(this.i,this.l,Qt,null),ws(this,Qt);if(Vo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||A.length!=0||this.h.h||(this.m=1,tn(16),x=!1),this.o=this.o&&x,!x)Rn(this.i,this.l,A,"[Invalid Chunked Response]"),Mn(this),An(this);else if(A.length>0&&!this.W){this.W=!0;var Se=this.j;Se.g==this&&Se.aa&&!Se.P&&(Se.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),hc(Se),Se.P=!0,tn(11))}}else Rn(this.i,this.l,A,null),ws(this,A);lt==4&&Mn(this),this.o&&!this.K&&(lt==4?Ou(this.j,this):(this.o=!1,Gs(this)))}else sa(this.g),S==400&&A.indexOf("Unknown SID")>0?(this.m=3,tn(12)):(this.m=0,tn(13)),Mn(this),An(this)}}}catch{}finally{}};function Oo(x){if(!Vo(x))return x.g.la();const S=Vn(x.g);if(S==="")return"";let A="";const V=S.length,ee=hi(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Mn(x),An(x),"";x.h.i=new u.TextDecoder}for(let re=0;re<V;re++)x.h.h=!0,A+=x.h.i.decode(S[re],{stream:!(ee&&re==V-1)});return S.length=0,x.h.g+=A,x.C=0,x.h.g}function Vo(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Bo(x,S){var A=x.C,V=S.indexOf(`
`,A);return V==-1?yn:(A=Number(S.substring(A,V)),isNaN(A)?nn:(V+=1,V+A>S.length?yn:(S=S.slice(V,V+A),x.C=V+A,S)))}Ts.prototype.cancel=function(){this.K=!0,Mn(this)};function Gs(x){x.T=Date.now()+x.H,Ga(x,x.H)}function Ga(x,S){if(x.D!=null)throw Error("WatchDog timer not null");x.D=cs(f(x.aa,x),S)}function Es(x){x.D&&(u.clearTimeout(x.D),x.D=null)}Ts.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Ai(this.i,this.B),this.M!=2&&(Jt(),tn(17)),Mn(this),this.m=2,An(this)):Ga(this,this.T-x)};function An(x){x.j.I==0||x.K||Ou(x.j,x)}function Mn(x){Es(x);var S=x.O;S&&typeof S.dispose=="function"&&S.dispose(),x.O=null,Un(x.V),x.g&&(S=x.g,x.g=null,S.abort(),S.dispose())}function ws(x,S){try{var A=x.j;if(A.I!=0&&(A.g==x||Hs(A.h,x))){if(!x.L&&Hs(A.h,x)&&A.I==3){try{var V=A.Ba.g.parse(S)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ee=V;if(ee[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<x.F)qo(A),Ka(A);else break e;Wr(A),tn(18)}}else A.xa=ee[1],0<A.xa-A.K&&ee[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=cs(f(A.Va,A),6e3));zs(A.h)<=1&&A.ta&&(A.ta=void 0)}else Pi(A,11)}else if((x.L||A.g==x)&&qo(A),!U(S))for(ee=A.Ba.g.parse(S),S=0;S<ee.length;S++){let It=ee[S];const Qt=It[0];if(!(Qt<=A.K))if(A.K=Qt,It=It[1],A.I==2)if(It[0]=="c"){A.M=It[1],A.ba=It[2];const $s=It[3];$s!=null&&(A.ka=$s,A.j.info("VER="+A.ka));const ji=It[4];ji!=null&&(A.za=ji,A.j.info("SVER="+A.za));const fi=It[5];fi!=null&&typeof fi=="number"&&fi>0&&(V=1.5*fi,A.O=V,A.j.info("backChannelRequestTimeoutMs_="+V)),V=A;const mi=x.g;if(mi){const Xr=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var re=V.h;re.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Gr(re,re.h),re.h=null))}if(V.G){const Ko=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(V.wa=Ko,Ae(V.J,V.G,Ko))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-x.F,A.j.info("Handshake RTT: "+A.T+"ms")),V=A;var Se=x;if(V.na=Gu(V,V.L?V.ba:null,V.W),Se.L){zr(V.h,Se);var lt=Se,hn=V.O;hn&&(lt.H=hn),lt.D&&(Es(lt),Gs(lt)),V.g=Se}else Lu(V);A.i.length>0&&Di(A)}else It[0]!="stop"&&It[0]!="close"||Pi(A,7);else A.I==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?Pi(A,7):uc(A):It[0]!="noop"&&A.l&&A.l.qa(It),A.A=0)}}Jt(4)}catch{}}var sn=class{constructor(x,S){this.g=x,this.map=S}};function Vr(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Br(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function zs(x){return x.h?1:x.g?x.g.size:0}function Hs(x,S){return x.h?x.h==S:x.g?x.g.has(S):!1}function Gr(x,S){x.g?x.g.add(S):x.h=S}function zr(x,S){x.h&&x.h==S?x.h=null:x.g&&x.g.has(S)&&x.g.delete(S)}Vr.prototype.cancel=function(){if(this.i=Hr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Hr(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let S=x.i;for(const A of x.g.values())S=S.concat(A.G);return S}return E(x.i)}var Fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y(x,S){if(x){x=x.split("&");for(let A=0;A<x.length;A++){const V=x[A].indexOf("=");let ee,re=null;V>=0?(ee=x[A].substring(0,V),re=x[A].substring(V+1)):ee=x[A],S(ee,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function be(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;x instanceof be?(this.l=x.l,ke(this,x.j),this.o=x.o,this.g=x.g,Ne(this,x.u),this.h=x.h,De(this,qr(x.i)),this.m=x.m):x&&(S=String(x).match(Fr))?(this.l=!1,ke(this,S[1]||"",!0),this.o=Ke(S[2]||""),this.g=Ke(S[3]||"",!0),Ne(this,S[4]),this.h=Ke(S[5]||"",!0),De(this,S[6]||"",!0),this.m=Ke(S[7]||"")):(this.l=!1,this.i=new kn(null,this.l))}be.prototype.toString=function(){const x=[];var S=this.j;S&&x.push(Ze(S,dt,!0),":");var A=this.g;return(A||S=="file")&&(x.push("//"),(S=this.o)&&x.push(Ze(S,dt,!0),"@"),x.push(li(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&x.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&x.push("/"),x.push(Ze(A,A.charAt(0)=="/"?Gt:Tt,!0))),(A=this.i.toString())&&x.push("?",A),(A=this.m)&&x.push("#",Ze(A,dn)),x.join("")},be.prototype.resolve=function(x){const S=_e(this);let A=!!x.j;A?ke(S,x.j):A=!!x.o,A?S.o=x.o:A=!!x.g,A?S.g=x.g:A=x.u!=null;var V=x.h;if(A)Ne(S,x.u);else if(A=!!x.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var ee=S.h.lastIndexOf("/");ee!=-1&&(V=S.h.slice(0,ee+1)+V)}if(ee=V,ee==".."||ee==".")V="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){V=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const re=[];for(let Se=0;Se<ee.length;){const lt=ee[Se++];lt=="."?V&&Se==ee.length&&re.push(""):lt==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),V&&Se==ee.length&&re.push("")):(re.push(lt),V=!0)}V=re.join("/")}else V=ee}return A?S.h=V:A=x.i.toString()!=="",A?De(S,qr(x.i)):A=!!x.m,A&&(S.m=x.m),S};function _e(x){return new be(x)}function ke(x,S,A){x.j=A?Ke(S,!0):S,x.j&&(x.j=x.j.replace(/:$/,""))}function Ne(x,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);x.u=S}else x.u=null}function De(x,S,A){S instanceof kn?(x.i=S,Go(x.i,x.l)):(A||(S=Ze(S,qt)),x.i=new kn(S,x.l))}function Ae(x,S,A){x.i.set(S,A)}function je(x){return Ae(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Ke(x,S){return x?S?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Ze(x,S,A){return typeof x=="string"?(x=encodeURI(x).replace(S,Ge),A&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ge(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var dt=/[#\/\?@]/g,Tt=/[#\?:]/g,Gt=/[#\?]/g,qt=/[#\?@]/g,dn=/#/g;function kn(x,S){this.h=this.g=null,this.i=x||null,this.j=!!S}function bn(x){x.g||(x.g=new Map,x.h=0,x.i&&Y(x.i,function(S,A){x.add(decodeURIComponent(S.replace(/\+/g," ")),A)}))}n=kn.prototype,n.add=function(x,S){bn(this),this.i=null,x=Ci(this,x);let A=this.g.get(x);return A||this.g.set(x,A=[]),A.push(S),this.h+=1,this};function za(x,S){bn(x),S=Ci(x,S),x.g.has(S)&&(x.i=null,x.h-=x.g.get(S).length,x.g.delete(S))}function ki(x,S){return bn(x),S=Ci(x,S),x.g.has(S)}n.forEach=function(x,S){bn(this),this.g.forEach(function(A,V){A.forEach(function(ee){x.call(S,ee,V,this)},this)},this)};function ci(x,S){bn(x);let A=[];if(typeof S=="string")ki(x,S)&&(A=A.concat(x.g.get(Ci(x,S))));else for(x=Array.from(x.g.values()),S=0;S<x.length;S++)A=A.concat(x[S]);return A}n.set=function(x,S){return bn(this),this.i=null,x=Ci(this,x),ki(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[S]),this.h+=1,this},n.get=function(x,S){return x?(x=ci(this,x),x.length>0?String(x[0]):S):S};function Fs(x,S,A){za(x,S),A.length>0&&(x.i=null,x.g.set(Ci(x,S),E(A)),x.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],S=Array.from(this.g.keys());for(let V=0;V<S.length;V++){var A=S[V];const ee=li(A);A=ci(this,A);for(let re=0;re<A.length;re++){let Se=ee;A[re]!==""&&(Se+="="+li(A[re])),x.push(Se)}}return this.i=x.join("&")};function qr(x){const S=new kn;return S.i=x.i,x.g&&(S.g=new Map(x.g),S.h=x.h),S}function Ci(x,S){return S=String(S),x.j&&(S=S.toLowerCase()),S}function Go(x,S){S&&!x.j&&(bn(x),x.i=null,x.g.forEach(function(A,V){const ee=V.toLowerCase();V!=ee&&(za(this,V),Fs(this,ee,A))},x)),x.j=S}function ui(x,S){const A=new us;if(u.Image){const V=new Image;V.onload=b(qs,A,"TestLoadImage: loaded",!0,S,V),V.onerror=b(qs,A,"TestLoadImage: error",!1,S,V),V.onabort=b(qs,A,"TestLoadImage: abort",!1,S,V),V.ontimeout=b(qs,A,"TestLoadImage: timeout",!1,S,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=x}else S(!1)}function oc(x,S){const A=new us,V=new AbortController,ee=setTimeout(()=>{V.abort(),qs(A,"TestPingServer: timeout",!1,S)},1e4);fetch(x,{signal:V.signal}).then(re=>{clearTimeout(ee),re.ok?qs(A,"TestPingServer: ok",!0,S):qs(A,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ee),qs(A,"TestPingServer: error",!1,S)})}function qs(x,S,A,V,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),V(A)}catch{}}function Ha(){this.g=new Zi}function Ii(x){this.i=x.Sb||null,this.h=x.ab||!1}_(Ii,Zt),Ii.prototype.g=function(){return new Kr(this.i,this.h)};function Kr(x,S){we.call(this),this.H=x,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Kr,we),n=Kr.prototype,n.open=function(x,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=S,this.readyState=1,di(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(S.body=x),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zo(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function zo(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var S=x.value?x.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!x.done}))&&(this.response=this.responseText+=S)}x.done?Fa(this):di(this),this.readyState==3&&zo(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Fa(this))},n.Na=function(x){this.g&&(this.response=x,Fa(this))},n.ga=function(){this.g&&Fa(this)};function Fa(x){x.readyState=4,x.l=null,x.j=null,x.B=null,di(x)}n.setRequestHeader=function(x,S){this.A.append(x,S)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],S=this.h.entries();for(var A=S.next();!A.done;)A=A.value,x.push(A[0]+": "+A[1]),A=S.next();return x.join(`\r
`)};function di(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Ks(x){let S="";return Ue(x,function(A,V){S+=V,S+=":",S+=A,S+=`\r
`}),S}function $r(x,S,A){e:{for(V in A){var V=!1;break e}V=!0}V||(A=Ks(A),typeof x=="string"?A!=null&&li(A):Ae(x,S,A))}function Lt(x){we.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Lt,we);var Ri=/^https?$/i,lc=["POST","PUT"];n=Lt.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,S,A,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);S=S?S.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Va.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(S,String(x),!0),this.B=!1}catch(re){Yr(this,re);return}if(x=A||"",A=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ee in V)A.set(ee,V[ee]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const re of V.keys())A.set(re,V.get(re));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(A.keys()).find(re=>re.toLowerCase()=="content-type"),ee=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(lc,S,void 0)>=0)||V||ee||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Se]of A)this.g.setRequestHeader(re,Se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(re){Yr(this,re)}};function Yr(x,S){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=S,x.o=5,cc(x),na(x)}function cc(x){x.A||(x.A=!0,Oe(x,"complete"),Oe(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Oe(this,"complete"),Oe(this,"abort"),na(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),na(this,!0)),Lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Jr(this):this.Xa())},n.Xa=function(){Jr(this)};function Jr(x){if(x.h&&typeof l<"u"){if(x.v&&hi(x)==4)setTimeout(x.Ca.bind(x),0);else if(Oe(x,"readystatechange"),hi(x)==4){x.h=!1;try{const re=x.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var A;if(!(A=S)){var V;if(V=re===0){let Se=String(x.D).match(Fr)[1]||null;!Se&&u.self&&u.self.location&&(Se=u.self.location.protocol.slice(0,-1)),V=!Ri.test(Se?Se.toLowerCase():"")}A=V}if(A)Oe(x,"complete"),Oe(x,"success");else{x.o=6;try{var ee=hi(x)>2?x.g.statusText:""}catch{ee=""}x.l=ee+" ["+x.ca()+"]",cc(x)}}finally{na(x)}}}}function na(x,S){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const A=x.g;x.g=null,S||Oe(x,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function hi(x){return x.g?x.g.readyState:0}n.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var S=this.g.responseText;return x&&S.indexOf(x)==0&&(S=S.substring(x.length)),Ls(S)}};function Vn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function sa(x){const S={};x=(x.g&&hi(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<x.length;V++){if(U(x[V]))continue;var A=Uo(x[V]);const ee=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const re=S[ee]||[];S[ee]=re,re.push(A)}Z(S,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(x,S,A){return A&&A.internalChannelParams&&A.internalChannelParams[x]||S}function qa(x){this.za=0,this.i=[],this.j=new us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,x),this.Za=Mi("retryDelaySeedMs",1e4,x),this.Ta=Mi("forwardChannelMaxRetries",2,x),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Vr(x&&x.concurrentRequestLimit),this.Ba=new Ha,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=qa.prototype,n.ka=8,n.I=1,n.connect=function(x,S,A,V){tn(0),this.W=x,this.H=S||{},A&&V!==void 0&&(this.H.OSID=A,this.H.OAID=V),this.F=this.X,this.J=Gu(this,null,this.W),Di(this)};function uc(x){if(Ho(x),x.I==3){var S=x.V++,A=_e(x.J);if(Ae(A,"SID",x.M),Ae(A,"RID",S),Ae(A,"TYPE","terminate"),Qr(x,A),S=new Ts(x,x.j,S),S.M=2,S.A=je(_e(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!A&&u.Image&&(new Image().src=S.A,A=!0),A||(S.g=zu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Gs(S)}Bu(x)}function Ka(x){x.g&&(hc(x),x.g.cancel(),x.g=null)}function Ho(x){Ka(x),x.v&&(u.clearTimeout(x.v),x.v=null),qo(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function Di(x){if(!Br(x.h)&&!x.m){x.m=!0;var S=x.Ea;X||N(),$||(X(),$=!0),D.add(S,x),x.D=0}}function Fo(x,S){return zs(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=S.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=cs(f(x.Ea,x,S),Vu(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const ee=new Ts(this,this.j,x);let re=this.o;if(this.U&&(re?(re=H(re),he(re,this.U)):re=this.U),this.u!==null||this.R||(ee.J=re,re=null),this.S)e:{for(var S=0,A=0;A<this.i.length;A++){t:{var V=this.i[A];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(S+=V,S>4096){S=A;break e}if(S===4096||A===this.i.length-1){S=A+1;break e}}S=1e3}else S=1e3;S=ju(this,ee,S),A=_e(this.J),Ae(A,"RID",x),Ae(A,"CVER",22),this.G&&Ae(A,"X-HTTP-Session-Id",this.G),Qr(this,A),re&&(this.R?S="headers="+li(Ks(re))+"&"+S:this.u&&$r(A,this.u,re)),Gr(this.h,ee),this.Ra&&Ae(A,"TYPE","init"),this.S?(Ae(A,"$req",S),Ae(A,"SID","null"),ee.U=!0,Bs(ee,A,null)):Bs(ee,A,S),this.I=2}}else this.I==3&&(x?dc(this,x):this.i.length==0||Br(this.h)||dc(this))};function dc(x,S){var A;S?A=S.l:A=x.V++;const V=_e(x.J);Ae(V,"SID",x.M),Ae(V,"RID",A),Ae(V,"AID",x.K),Qr(x,V),x.u&&x.o&&$r(V,x.u,x.o),A=new Ts(x,x.j,A,x.D+1),x.u===null&&(A.J=x.o),S&&(x.i=S.G.concat(x.i)),S=ju(x,A,1e3),A.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),Gr(x.h,A),Bs(A,V,S)}function Qr(x,S){x.H&&Ue(x.H,function(A,V){Ae(S,V,A)}),x.l&&Ue({},function(A,V){Ae(S,V,A)})}function ju(x,S,A){A=Math.min(x.i.length,A);const V=x.l?f(x.l.Ka,x.l,x):null;e:{var ee=x.i;let lt=-1;for(;;){const hn=["count="+A];lt==-1?A>0?(lt=ee[0].g,hn.push("ofs="+lt)):lt=0:hn.push("ofs="+lt);let It=!0;for(let Qt=0;Qt<A;Qt++){var re=ee[Qt].g;const $s=ee[Qt].map;if(re-=lt,re<0)lt=Math.max(0,ee[Qt].g-100),It=!1;else try{re="req"+re+"_"||"";try{var Se=$s instanceof Map?$s:Object.entries($s);for(const[ji,fi]of Se){let mi=fi;h(fi)&&(mi=_s(fi)),hn.push(re+ji+"="+encodeURIComponent(mi))}}catch(ji){throw hn.push(re+"type="+encodeURIComponent("_badmap")),ji}}catch{V&&V($s)}}if(It){Se=hn.join("&");break e}}Se=void 0}return x=x.i.splice(0,A),S.G=x,Se}function Lu(x){if(!x.g&&!x.v){x.Y=1;var S=x.Da;X||N(),$||(X(),$=!0),D.add(S,x),x.A=0}}function Wr(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=cs(f(x.Da,x),Vu(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,Uu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=cs(f(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tn(10),Ka(this),Uu(this))};function hc(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function Uu(x){x.g=new Ts(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var S=_e(x.na);Ae(S,"RID","rpc"),Ae(S,"SID",x.M),Ae(S,"AID",x.K),Ae(S,"CI",x.F?"0":"1"),!x.F&&x.ia&&Ae(S,"TO",x.ia),Ae(S,"TYPE","xmlhttp"),Qr(x,S),x.u&&x.o&&$r(S,x.u,x.o),x.O&&(x.g.H=x.O);var A=x.g;x=x.ba,A.M=1,A.A=je(_e(S)),A.u=null,A.R=!0,Ba(A,x)}n.Va=function(){this.C!=null&&(this.C=null,Ka(this),Wr(this),tn(19))};function qo(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function Ou(x,S){var A=null;if(x.g==S){qo(x),hc(x),x.g=null;var V=2}else if(Hs(x.h,S))A=S.G,zr(x.h,S),V=1;else return;if(x.I!=0){if(S.o)if(V==1){A=S.u?S.u.length:0,S=Date.now()-S.F;var ee=x.D;V=Oa(),Oe(V,new Vs(V,A)),Di(x)}else Lu(x);else if(ee=S.m,ee==3||ee==0&&S.X>0||!(V==1&&Fo(x,S)||V==2&&Wr(x)))switch(A&&A.length>0&&(S=x.h,S.i=S.i.concat(A)),ee){case 1:Pi(x,5);break;case 4:Pi(x,10);break;case 3:Pi(x,6);break;default:Pi(x,2)}}}function Vu(x,S){let A=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(A*=2),A*S}function Pi(x,S){if(x.j.info("Error code "+S),S==2){var A=f(x.bb,x),V=x.Ua;const ee=!V;V=new be(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ke(V,"https"),je(V),ee?ui(V.toString(),A):oc(V.toString(),A)}else tn(2);x.I=0,x.l&&x.l.pa(S),Bu(x),Ho(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Bu(x){if(x.I=0,x.ja=[],x.l){const S=Hr(x.h);(S.length!=0||x.i.length!=0)&&(I(x.ja,S),I(x.ja,x.i),x.h.i.length=0,E(x.i),x.i.length=0),x.l.oa()}}function Gu(x,S,A){var V=A instanceof be?_e(A):new be(A);if(V.g!="")S&&(V.g=S+"."+V.g),Ne(V,V.u);else{var ee=u.location;V=ee.protocol,S=S?S+"."+ee.hostname:ee.hostname,ee=+ee.port;const re=new be(null);V&&ke(re,V),S&&(re.g=S),ee&&Ne(re,ee),A&&(re.h=A),V=re}return A=x.G,S=x.wa,A&&S&&Ae(V,A,S),Ae(V,"VER",x.ka),Qr(x,V),V}function zu(x,S,A){if(S&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=x.Aa&&!x.ma?new Lt(new Ii({ab:A})):new Lt(x.ma),S.Fa(x.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}n=Hu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $a(){}$a.prototype.g=function(x,S){return new is(x,S)};function is(x,S){we.call(this),this.g=new qa(S),this.l=x,this.h=S&&S.messageUrlParams||null,x=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(x?x["X-WebChannel-Content-Type"]=S.messageContentType:x={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(x?x["X-WebChannel-Client-Profile"]=S.sa:x={"X-WebChannel-Client-Profile":S.sa}),this.g.U=x,(x=S&&S.Qb)&&!U(x)&&(this.g.u=x),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!U(S)&&(this.g.G=S,x=this.h,x!==null&&S in x&&(x=this.h,S in x&&delete x[S])),this.j=new ia(this)}_(is,we),is.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},is.prototype.close=function(){uc(this.g)},is.prototype.o=function(x){var S=this.g;if(typeof x=="string"){var A={};A.__data__=x,x=A}else this.v&&(A={},A.__data__=_s(x),x=A);S.i.push(new sn(S.Ya++,x)),S.I==3&&Di(S)},is.prototype.N=function(){this.g.l=null,delete this.j,uc(this.g),delete this.g,is.Z.N.call(this)};function Fu(x){un.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var S=x.__sm__;if(S){e:{for(const A in S){x=A;break e}x=void 0}(this.i=x)&&(x=this.i,S=S!==null&&x in S?S[x]:void 0),this.data=S}else this.data=x}_(Fu,un);function qu(){Qn.call(this),this.status=1}_(qu,Qn);function ia(x){this.g=x}_(ia,Hu),ia.prototype.ra=function(){Oe(this.g,"a")},ia.prototype.qa=function(x){Oe(this.g,new Fu(x))},ia.prototype.pa=function(x){Oe(this.g,new qu)},ia.prototype.oa=function(){Oe(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,is.prototype.send=is.prototype.o,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,ew=function(){return new $a},Z1=function(){return Oa()},X1=Ft,Np={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,dh=ea,Or.COMPLETE="complete",W1=Or,Us.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",we.prototype.listen=we.prototype.J,eu=Us,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,Q1=Lt}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const eS="@firebase/firestore",tS="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new ug("@firebase/firestore");function El(){return No.logLevel}function Pe(n,...e){if(No.logLevel<=yt.DEBUG){const t=e.map(fg);No.debug(`Firestore (${Wl}): ${n}`,...t)}}function Aa(n,...e){if(No.logLevel<=yt.ERROR){const t=e.map(fg);No.error(`Firestore (${Wl}): ${n}`,...t)}}function Ul(n,...e){if(No.logLevel<=yt.WARN){const t=e.map(fg);No.warn(`Firestore (${Wl}): ${n}`,...t)}}function fg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,tw(n,s,t)}function tw(n,e,t){let s=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Aa(s),new Error(s)}function Mt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||tw(e,a,s)}function ot(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends ja{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zn.UNAUTHENTICATED)))}shutdown(){}}class l6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class c6{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mt(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Ea;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ea,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ea)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Mt(typeof s.accessToken=="string",31837,{l:s}),new nw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class u6{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class d6{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new u6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mt(this.o===void 0,3512);const s=l=>{l.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=f6(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function bt(n,e){return n<e?-1:n>e?1:0}function Ap(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return J0(a)===J0(l)?bt(a,l):J0(a)?1:-1}return bt(n.length,e.length)}const m6=55296,p6=57343;function J0(n){const e=n.charCodeAt(0);return e>=m6&&e<=p6}function Ol(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="__name__";class Bi{constructor(e,t,s){t===void 0?t=0:t>e.length&&We(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&We(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Bi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return bt(e.length,t.length)}static compareSegments(e,t){const s=Bi.isNumericId(e),a=Bi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):Ap(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class Ht extends Bi{construct(e,t,s){return new Ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Ht(t)}static emptyPath(){return new Ht([])}}const g6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends Bi{construct(e,t,s){return new qn(e,t,s)}static isValidIdentifier(e){return g6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sS}static keyField(){return new qn([sS])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Ie(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ie(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new Ie(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(t)}static emptyPath(){return new qn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Ht.fromString(e))}static fromName(e){return new qe(Ht.fromString(e).popFirst(5))}static empty(){return new qe(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(n,e,t){if(!t)throw new Ie(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x6(n,e,t,s){if(e===!0&&s===!0)throw new Ie(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iS(n){if(!qe.isDocumentKey(n))throw new Ie(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aS(n){if(qe.isDocumentKey(n))throw new Ie(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function df(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":We(12329,{type:typeof n})}function bs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=df(n);throw new Ie(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function y6(n,e){if(e<=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Eu(n,e){if(!iw(n))throw new Ie(pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new Ie(pe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=-62135596800,oS=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*oS);return new Yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rS)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oS}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,Yt._jsonSchema))return new Yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Nn("string",Yt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new Yt(0,0))}static max(){return new at(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=-1;function b6(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=at.fromTimestamp(s===1e9?new Yt(t+1,0):new Yt(t,s));return new kr(a,qe.empty(),e)}function v6(n){return new kr(n.readTime,n.key,hu)}class kr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new kr(at.min(),qe.empty(),hu)}static max(){return new kr(at.max(),qe.empty(),hu)}}function _6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(n.documentKey,e.documentKey),t!==0?t:bt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==T6)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.reject(t)}static resolve(e){return new xe(((t,s)=>{t(e)}))}static reject(e){return new xe(((t,s)=>{s(e)}))}static waitFor(e){return new xe(((t,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(p=>s(p)))})),u=!0,l===a&&t()}))}static or(e){let t=xe.resolve(!1);for(const s of e)t=t.next((a=>a?xe.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new xe(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const f=p;t(e[f]).next((b=>{u[f]=b,++h,h===l&&s(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new xe(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function E6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=-1;function ff(n){return n==null}function Rh(n){return n===0&&1/n==-1/0}function w6(n){return typeof n=="number"&&Number.isInteger(n)&&!Rh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="";function N6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lS(e)),e=A6(n.get(t),e);return lS(e)}function A6(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case aw:t+="";break;default:t+=l}}return t}function lS(n){return n+aw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.comparator=e,this.root=t||Fn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Fn.RED,this.left=a??Fn.EMPTY,this.right=l??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Fn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Fn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uS(this.data.getIterator())}getIteratorFrom(e){return new uS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class uS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new Ds([])}unionWith(e){let t=new In(qn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ow("Invalid base64 string: "+l):l}})(e);return new $n(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new $n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const k6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(n){if(Mt(!!n,39018),typeof n=="string"){let e=0;const t=k6.exec(n);if(Mt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:pn(n.seconds),nanos:pn(n.nanos)}}function pn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ir(n){return typeof n=="string"?$n.fromBase64String(n):$n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="server_timestamp",cw="__type__",uw="__previous_value__",dw="__local_write_time__";function gg(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cw])==null?void 0:s.stringValue)===lw}function mf(n){const e=n.mapValue.fields[uw];return gg(e)?mf(e):e}function fu(n){const e=Cr(n.mapValue.fields[dw].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,t,s,a,l,u,h,p,f,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=f,this.isUsingEmulator=b}}const Mh="(default)";class mu{constructor(e,t){this.projectId=e,this.database=t||Mh}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="__type__",I6="__max__",nh={mapValue:{}},fw="__vector__",Dh="value";function Rr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gg(n)?4:M6(n)?9007199254740991:R6(n)?10:11:We(28295,{value:n})}function $i(n,e){if(n===e)return!0;const t=Rr(n);if(t!==Rr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fu(n).isEqual(fu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Cr(a.timestampValue),h=Cr(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Ir(a.bytesValue).isEqual(Ir(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return pn(a.geoPointValue.latitude)===pn(l.geoPointValue.latitude)&&pn(a.geoPointValue.longitude)===pn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return pn(a.integerValue)===pn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=pn(a.doubleValue),h=pn(l.doubleValue);return u===h?Rh(u)===Rh(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Ol(n.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(cS(u)!==cS(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!$i(u[p],h[p])))return!1;return!0})(n,e);default:return We(52216,{left:n})}}function pu(n,e){return(n.values||[]).find((t=>$i(t,e)))!==void 0}function Vl(n,e){if(n===e)return 0;const t=Rr(n),s=Rr(e);if(t!==s)return bt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=pn(l.integerValue||l.doubleValue),p=pn(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return dS(n.timestampValue,e.timestampValue);case 4:return dS(fu(n),fu(e));case 5:return Ap(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=Ir(l),p=Ir(u);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),p=u.split("/");for(let f=0;f<h.length&&f<p.length;f++){const b=bt(h[f],p[f]);if(b!==0)return b}return bt(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=bt(pn(l.latitude),pn(u.latitude));return h!==0?h:bt(pn(l.longitude),pn(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return hS(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,E,I,C;const h=l.fields||{},p=u.fields||{},f=(T=h[Dh])==null?void 0:T.arrayValue,b=(E=p[Dh])==null?void 0:E.arrayValue,_=bt(((I=f==null?void 0:f.values)==null?void 0:I.length)||0,((C=b==null?void 0:b.values)==null?void 0:C.length)||0);return _!==0?_:hS(f,b)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===nh.mapValue&&u===nh.mapValue)return 0;if(l===nh.mapValue)return 1;if(u===nh.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),f=u.fields||{},b=Object.keys(f);p.sort(),b.sort();for(let _=0;_<p.length&&_<b.length;++_){const T=Ap(p[_],b[_]);if(T!==0)return T;const E=Vl(h[p[_]],f[b[_]]);if(E!==0)return E}return bt(p.length,b.length)})(n.mapValue,e.mapValue);default:throw We(23264,{he:t})}}function dS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return bt(n,e);const t=Cr(n),s=Cr(e),a=bt(t.seconds,s.seconds);return a!==0?a:bt(t.nanos,s.nanos)}function hS(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Vl(t[a],s[a]);if(l)return l}return bt(t.length,s.length)}function Bl(n){return kp(n)}function kp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Cr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ir(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return qe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=kp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${kp(t.fields[u])}`;return a+"}"})(n.mapValue):We(61005,{value:n})}function hh(n){switch(Rr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mf(n);return e?16+hh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+hh(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Lr(s.fields,((l,u)=>{a+=l.length+hh(u)})),a})(n.mapValue);default:throw We(13486,{value:n})}}function fS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cp(n){return!!n&&"integerValue"in n}function xg(n){return!!n&&"arrayValue"in n}function mS(n){return!!n&&"nullValue"in n}function pS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fh(n){return!!n&&"mapValue"in n}function R6(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[hw])==null?void 0:s.stringValue)===fw}function au(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Lr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=au(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(n.arrayValue.values[t]);return e}return{...n}}function M6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===I6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.value=e}static empty(){return new ys({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!fh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=qn.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=au(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());fh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];fh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Lr(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new ys(au(this.value))}}function mw(n){const e=[];return Lr(n.fields,((t,s)=>{const a=new qn([t]);if(fh(s)){const l=mw(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new es(e,0,at.min(),at.min(),at.min(),ys.empty(),0)}static newFoundDocument(e,t,s,a){return new es(e,1,t,at.min(),s,a,0)}static newNoDocument(e,t){return new es(e,2,t,at.min(),at.min(),ys.empty(),0)}static newUnknownDocument(e,t){return new es(e,3,t,at.min(),at.min(),ys.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ys.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof es&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.position=e,this.inclusive=t}}function gS(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=qe.comparator(qe.fromName(u.referenceValue),t.key):s=Vl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function xS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t="asc"){this.field=e,this.dir=t}}function D6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{}class wn extends pw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new j6(e,t,s):t==="array-contains"?new O6(e,s):t==="in"?new V6(e,s):t==="not-in"?new B6(e,s):t==="array-contains-any"?new G6(e,s):new wn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new L6(e,s):new U6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vl(t,this.value)):t!==null&&Rr(this.value)===Rr(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends pw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wi(e,t)}matches(e){return gw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gw(n){return n.op==="and"}function xw(n){return P6(n)&&gw(n)}function P6(n){for(const e of n.filters)if(e instanceof wi)return!1;return!0}function Ip(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+Bl(n.value);if(xw(n))return n.filters.map((e=>Ip(e))).join(",");{const e=n.filters.map((t=>Ip(t))).join(",");return`${n.op}(${e})`}}function yw(n,e){return n instanceof wn?(function(s,a){return a instanceof wn&&s.op===a.op&&s.field.isEqual(a.field)&&$i(s.value,a.value)})(n,e):n instanceof wi?(function(s,a){return a instanceof wi&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&yw(u,a.filters[h])),!0):!1})(n,e):void We(19439)}function bw(n){return n instanceof wn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bl(t.value)}`})(n):n instanceof wi?(function(t){return t.op.toString()+" {"+t.getFilters().map(bw).join(" ,")+"}"})(n):"Filter"}class j6 extends wn{constructor(e,t,s){super(e,t,s),this.key=qe.fromName(s.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class L6 extends wn{constructor(e,t){super(e,"in",t),this.keys=vw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class U6 extends wn{constructor(e,t){super(e,"not-in",t),this.keys=vw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function vw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>qe.fromName(s.referenceValue)))}class O6 extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xg(t)&&pu(t.arrayValue,this.value)}}class V6 extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pu(this.value.arrayValue,t)}}class B6 extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pu(this.value.arrayValue,t)}}class G6 extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>pu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function yS(n,e=null,t=[],s=[],a=null,l=null,u=null){return new z6(n,e,t,s,a,l,u)}function yg(n){const e=ot(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ip(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Bl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Bl(s))).join(",")),e.Te=t}return e.Te}function bg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!D6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xS(n.startAt,e.startAt)&&xS(n.endAt,e.endAt)}function Rp(n){return qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H6(n,e,t,s,a,l,u,h){return new ec(n,e,t,s,a,l,u,h)}function pf(n){return new ec(n)}function bS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _w(n){return n.collectionGroup!==null}function ru(n){const e=ot(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new In(qn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new gu(l,s))})),t.has(qn.keyField().canonicalString())||e.Ie.push(new gu(qn.keyField(),s))}return e.Ie}function zi(n){const e=ot(n);return e.Ee||(e.Ee=F6(e,ru(n))),e.Ee}function F6(n,e){if(n.limitType==="F")return yS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new gu(a.field,l)}));const t=n.endAt?new Ph(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ph(n.startAt.position,n.startAt.inclusive):null;return yS(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Mp(n,e){const t=n.filters.concat([e]);return new ec(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jh(n,e,t){return new ec(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gf(n,e){return bg(zi(n),zi(e))&&n.limitType===e.limitType}function Tw(n){return`${yg(zi(n))}|lt:${n.limitType}`}function wl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>bw(a))).join(", ")}]`),ff(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Bl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Bl(a))).join(",")),`Target(${s})`})(zi(n))}; limitType=${n.limitType})`}function xf(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):qe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of ru(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,p){const f=gS(u,h,p);return u.inclusive?f<=0:f<0})(s.startAt,ru(s),a)||s.endAt&&!(function(u,h,p){const f=gS(u,h,p);return u.inclusive?f>=0:f>0})(s.endAt,ru(s),a))})(n,e)}function q6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Sw(n){return(e,t)=>{let s=!1;for(const a of ru(n)){const l=K6(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function K6(n,e,t){const s=n.field.isKeyField()?qe.comparator(e.key,t.key):(function(l,u,h){const p=u.data.field(l),f=h.data.field(l);return p!==null&&f!==null?Vl(p,f):We(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return We(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=new en(qe.comparator);function ka(){return $6}const Ew=new en(qe.comparator);function tu(...n){let e=Ew;for(const t of n)e=e.insert(t.key,t);return e}function ww(n){let e=Ew;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function yo(){return ou()}function Nw(){return ou()}function ou(){return new Do((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Y6=new en(qe.comparator),J6=new In(qe.comparator);function vt(...n){let e=J6;for(const t of n)e=e.add(t);return e}const Q6=new In(bt);function W6(){return Q6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function Aw(n){return{integerValue:""+n}}function X6(n,e){return w6(e)?Aw(e):vg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function Z6(n,e,t){return n instanceof Lh?(function(a,l){const u={fields:{[cw]:{stringValue:lw},[dw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&gg(l)&&(l=mf(l)),l&&(u.fields[uw]=l),{mapValue:u}})(t,e):n instanceof xu?Cw(n,e):n instanceof yu?Iw(n,e):(function(a,l){const u=kw(a,l),h=vS(u)+vS(a.Ae);return Cp(u)&&Cp(a.Ae)?Aw(h):vg(a.serializer,h)})(n,e)}function e3(n,e,t){return n instanceof xu?Cw(n,e):n instanceof yu?Iw(n,e):t}function kw(n,e){return n instanceof Uh?(function(s){return Cp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Lh extends yf{}class xu extends yf{constructor(e){super(),this.elements=e}}function Cw(n,e){const t=Rw(e);for(const s of n.elements)t.some((a=>$i(a,s)))||t.push(s);return{arrayValue:{values:t}}}class yu extends yf{constructor(e){super(),this.elements=e}}function Iw(n,e){let t=Rw(e);for(const s of n.elements)t=t.filter((a=>!$i(a,s)));return{arrayValue:{values:t}}}class Uh extends yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vS(n){return pn(n.integerValue||n.doubleValue)}function Rw(n){return xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function t3(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof xu&&a instanceof xu||s instanceof yu&&a instanceof yu?Ol(s.elements,a.elements,$i):s instanceof Uh&&a instanceof Uh?$i(s.Ae,a.Ae):s instanceof Lh&&a instanceof Lh})(n.transform,e.transform)}class n3{constructor(e,t){this.version=e,this.transformResults=t}}class ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bf{}function Mw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _g(n.key,ii.none()):new wu(n.key,n.data,ii.none());{const t=n.data,s=ys.empty();let a=new In(qn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Ur(n.key,s,new Ds(a.toArray()),ii.none())}}function s3(n,e,t){n instanceof wu?(function(a,l,u){const h=a.value.clone(),p=TS(a.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Ur?(function(a,l,u){if(!mh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=TS(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(Dw(a)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function lu(n,e,t,s){return n instanceof wu?(function(l,u,h,p){if(!mh(l.precondition,u))return h;const f=l.value.clone(),b=SS(l.fieldTransforms,p,u);return f.setAll(b),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(n,e,t,s):n instanceof Ur?(function(l,u,h,p){if(!mh(l.precondition,u))return h;const f=SS(l.fieldTransforms,p,u),b=u.data;return b.setAll(Dw(l)),b.setAll(f),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,u,h){return mh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function i3(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=kw(s.transform,a||null);l!=null&&(t===null&&(t=ys.empty()),t.set(s.field,l))}return t||null}function _S(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ol(s,a,((l,u)=>t3(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wu extends bf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ur extends bf{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Dw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function TS(n,e,t){const s=new Map;Mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,e3(u,h,t[a]))}return s}function SS(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,Z6(l,u,e))}return s}class _g extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a3 extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&s3(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Nw();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const p=Mw(u,h);p!==null&&s.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(at.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),vt())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,((t,s)=>_S(t,s)))&&Ol(this.baseMutations,e.baseMutations,((t,s)=>_S(t,s)))}}class Tg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Mt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return Y6})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new Tg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En,St;function c3(n){switch(n){case pe.OK:return We(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return We(15467,{code:n})}}function Pw(n){if(n===void 0)return Aa("GRPC error has no .code"),pe.UNKNOWN;switch(n){case En.OK:return pe.OK;case En.CANCELLED:return pe.CANCELLED;case En.UNKNOWN:return pe.UNKNOWN;case En.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case En.INTERNAL:return pe.INTERNAL;case En.UNAVAILABLE:return pe.UNAVAILABLE;case En.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case En.NOT_FOUND:return pe.NOT_FOUND;case En.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case En.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case En.ABORTED:return pe.ABORTED;case En.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case En.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case En.DATA_LOSS:return pe.DATA_LOSS;default:return We(39323,{code:n})}}(St=En||(En={}))[St.OK=0]="OK",St[St.CANCELLED=1]="CANCELLED",St[St.UNKNOWN=2]="UNKNOWN",St[St.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",St[St.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",St[St.NOT_FOUND=5]="NOT_FOUND",St[St.ALREADY_EXISTS=6]="ALREADY_EXISTS",St[St.PERMISSION_DENIED=7]="PERMISSION_DENIED",St[St.UNAUTHENTICATED=16]="UNAUTHENTICATED",St[St.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",St[St.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",St[St.ABORTED=10]="ABORTED",St[St.OUT_OF_RANGE=11]="OUT_OF_RANGE",St[St.UNIMPLEMENTED=12]="UNIMPLEMENTED",St[St.INTERNAL=13]="INTERNAL",St[St.UNAVAILABLE=14]="UNAVAILABLE",St[St.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new wr([4294967295,4294967295],0);function ES(n){const e=u3().encode(n),t=new J1;return t.update(e),new Uint8Array(t.digest())}function wS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wr([t,s],0),new wr([a,l],0)]}class Sg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new nu(`Invalid padding: ${t}`);if(s<0)throw new nu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new nu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(wr.fromNumber(s)));return a.compare(d3)===1&&(a=new wr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ES(e),[s,a]=wS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Sg(l,a,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=ES(e),[s,a]=wS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new vf(at.min(),a,new en(bt),ka(),vt())}}class Nu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Nu(s,t,vt(),vt(),vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class jw{constructor(e,t){this.targetId=e,this.Ce=t}}class Lw{constructor(e,t,s=$n.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class NS{constructor(){this.ve=0,this.Fe=AS(),this.Me=$n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=vt(),t=vt(),s=vt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:We(38017,{changeType:l})}})),new Nu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=AS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class h3{constructor(e){this.Ge=e,this.ze=new Map,this.je=ka(),this.Je=sh(),this.He=sh(),this.Ye=new en(bt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Rp(l))if(s===0){const u=new qe(l.path);this.et(t,u,es.newNoDocument(u,at.min()))}else Mt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),p=h?this.ct(h,e,u):1;if(p!==0){this.it(t);const f=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=Ir(s).toUint8Array()}catch(p){if(p instanceof ow)return Ul("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Sg(u,a,l)}catch(p){return Ul(p instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&Rp(h.target)){const p=new qe(h.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,es.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=vt();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((p=>{const f=this.ot(p);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new vf(e,t,this.Ye,this.je,s);return this.je=ka(),this.Je=sh(),this.He=sh(),this.Ye=new en(bt),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new NS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new In(bt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new In(bt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sh(){return new en(qe.comparator)}function AS(){return new en(qe.comparator)}const f3={asc:"ASCENDING",desc:"DESCENDING"},m3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p3={and:"AND",or:"OR"};class g3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dp(n,e){return n.useProto3Json||ff(e)?e:{value:e}}function Oh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function x3(n,e){return Oh(n,e.toTimestamp())}function Hi(n){return Mt(!!n,49232),at.fromTimestamp((function(t){const s=Cr(t);return new Yt(s.seconds,s.nanos)})(n))}function Eg(n,e){return Pp(n,e).canonicalString()}function Pp(n,e){const t=(function(a){return new Ht(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Ow(n){const e=Ht.fromString(n);return Mt(Hw(e),10190,{key:e.toString()}),e}function jp(n,e){return Eg(n.databaseId,e.path)}function Q0(n,e){const t=Ow(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Bw(t))}function Vw(n,e){return Eg(n.databaseId,e)}function y3(n){const e=Ow(n);return e.length===4?Ht.emptyPath():Bw(e)}function Lp(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bw(n){return Mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kS(n,e,t){return{name:jp(n,e),fields:t.value.mapValue.fields}}function b3(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:We(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(f,b){return f.useProto3Json?(Mt(b===void 0||typeof b=="string",58123),$n.fromBase64String(b||"")):(Mt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),$n.fromUint8Array(b||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(f){const b=f.code===void 0?pe.UNKNOWN:Pw(f.code);return new Ie(b,f.message||"")})(u);t=new Lw(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Q0(n,s.document.name),l=Hi(s.document.updateTime),u=s.document.createTime?Hi(s.document.createTime):at.min(),h=new ys({mapValue:{fields:s.document.fields}}),p=es.newFoundDocument(a,l,u,h),f=s.targetIds||[],b=s.removedTargetIds||[];t=new ph(f,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Q0(n,s.document),l=s.readTime?Hi(s.readTime):at.min(),u=es.newNoDocument(a,l),h=s.removedTargetIds||[];t=new ph([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Q0(n,s.document),l=s.removedTargetIds||[];t=new ph([],l,a,null)}else{if(!("filter"in e))return We(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new l3(a,l),h=s.targetId;t=new jw(h,u)}}return t}function v3(n,e){let t;if(e instanceof wu)t={update:kS(n,e.key,e.value)};else if(e instanceof _g)t={delete:jp(n,e.key)};else if(e instanceof Ur)t={update:kS(n,e.key,e.data),updateMask:C3(e.fieldMask)};else{if(!(e instanceof a3))return We(16599,{Vt:e.type});t={verify:jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof Lh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof xu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof yu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Uh)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw We(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:x3(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:We(27497)})(n,e.precondition)),t}function _3(n,e){return n&&n.length>0?(Mt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Hi(a.updateTime):Hi(l);return u.isEqual(at.min())&&(u=Hi(l)),new n3(u,a.transformResults||[])})(t,e)))):[]}function T3(n,e){return{documents:[Vw(n,e.path)]}}function S3(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Vw(n,a);const l=(function(f){if(f.length!==0)return zw(wi.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(f){if(f.length!==0)return f.map((b=>(function(T){return{field:Nl(T.field),direction:N3(T.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Dp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:a}}function E3(n){let e=y3(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Mt(s===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(_){const T=Gw(_);return T instanceof wi&&xw(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(I){return new gu(Al(I.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,ff(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(_){const T=!!_.before,E=_.values||[];return new Ph(E,T)})(t.startAt));let f=null;return t.endAt&&(f=(function(_){const T=!_.before,E=_.values||[];return new Ph(E,T)})(t.endAt)),H6(e,a,u,l,h,"F",p,f)}function w3(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Gw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Al(t.unaryFilter.field);return wn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Al(t.unaryFilter.field);return wn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Al(t.unaryFilter.field);return wn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Al(t.unaryFilter.field);return wn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wn.create(Al(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return wi.create(t.compositeFilter.filters.map((s=>Gw(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(t.compositeFilter.op))})(n):We(30097,{filter:n})}function N3(n){return f3[n]}function A3(n){return m3[n]}function k3(n){return p3[n]}function Nl(n){return{fieldPath:n.canonicalString()}}function Al(n){return qn.fromServerFormat(n.fieldPath)}function zw(n){return n instanceof wn?(function(t){if(t.op==="=="){if(pS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NAN"}};if(mS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NAN"}};if(mS(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(t.field),op:A3(t.op),value:t.value}}})(n):n instanceof wi?(function(t){const s=t.getFilters().map((a=>zw(a)));return s.length===1?s[0]:{compositeFilter:{op:k3(t.op),filters:s}}})(n):We(54877,{filter:n})}function C3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Hw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t,s,a,l=at.min(),u=at.min(),h=$n.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.yt=e}}function R3(n){const e=E3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.Cn=new D3}addToCollectionParentIndex(e,t){return this.Cn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(kr.min())}updateCollectionGroup(e,t,s){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class D3{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new In(Ht.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new In(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fw=41943040;class gs{static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(Fw,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gl(0)}static cr(){return new Gl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="LruGarbageCollector",P3=1048576;function RS([n,e],[t,s]){const a=bt(n,t);return a===0?bt(e,s):a}class j3{constructor(e){this.Ir=e,this.buffer=new In(RS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();RS(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class L3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(IS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zl(t)?Pe(IS,"Ignoring IndexedDB error during garbage collection: ",t):await Xl(t)}await this.Vr(3e5)}))}}class U3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return xe.resolve(hf.ce);const s=new j3(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(CS)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,h,p,f;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(f=Date.now(),El()<=yt.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(f-p)+`ms
Total Duration: ${f-b}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function O3(n,e){return new U3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.changes=new Do((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,es.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?xe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&lu(s.mutation,a,Ds.empty(),Yt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,vt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=vt()){const a=yo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=tu();return l.forEach(((h,p)=>{u=u.insert(h,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=yo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,vt())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,a){let l=ka();const u=ou(),h=(function(){return ou()})();return t.forEach(((p,f)=>{const b=s.get(f.key);a.has(f.key)&&(b===void 0||b.mutation instanceof Ur)?l=l.insert(f.key,f):b!==void 0?(u.set(f.key,b.mutation.getFieldMask()),lu(b.mutation,f,b.mutation.getFieldMask(),Yt.now())):u.set(f.key,Ds.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((f,b)=>u.set(f,b))),t.forEach(((f,b)=>h.set(f,new B3(b,u.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=ou();let a=new en(((u,h)=>u-h)),l=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((p=>{const f=t.get(p);if(f===null)return;let b=s.get(p)||Ds.empty();b=h.applyToLocalView(f,b),s.set(p,b);const _=(a.get(h.batchId)||vt()).add(p);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),f=p.key,b=p.value,_=Nw();b.forEach((T=>{if(!l.has(T)){const E=Mw(t.get(T),s.get(T));E!==null&&_.set(T,E),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,_))}return xe.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return qe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_w(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):xe.resolve(yo());let h=hu,p=l;return u.next((f=>xe.forEach(f,((b,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(b)?xe.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{p=p.insert(b,T)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,p,f,vt()))).next((b=>({batchId:h,changes:ww(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next((s=>{let a=tu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=tu();return this.indexManager.getCollectionParents(e,l).next((h=>xe.forEach(h,(p=>{const f=(function(_,T){return new ec(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,s,a).next((b=>{b.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((p,f)=>{const b=f.getKey();u.get(b)===null&&(u=u.insert(b,es.newInvalidDocument(b)))}));let h=tu();return u.forEach(((p,f)=>{const b=l.get(p);b!==void 0&&lu(b.mutation,f,Ds.empty(),Yt.now()),xf(t,f)&&(h=h.insert(p,f))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return xe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Hi(a.createTime)}})(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:R3(a.bundledQuery),readTime:Hi(a.readTime)}})(t)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.overlays=new en(qe.comparator),this.qr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=yo();return xe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),xe.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),xe.resolve()}getOverlaysForCollection(e,t,s){const a=yo(),l=t.length+1,u=new qe(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,f=p.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return xe.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new en(((f,b)=>f-b));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>s){let b=l.get(f.largestBatchId);b===null&&(b=yo(),l=l.insert(f.largestBatchId,b)),b.set(f.getKey(),f)}}const h=yo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((f,b)=>h.set(f,b))),!(h.size()>=a)););return xe.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new o3(t,s));let l=this.qr.get(t);l===void 0&&(l=vt(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Qr=new In(Pn.$r),this.Ur=new In(Pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Pn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Pn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new qe(new Ht([])),s=new Pn(t,e),a=new Pn(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new qe(new Ht([])),s=new Pn(t,e),a=new Pn(t,e+1);let l=vt();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Pn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return qe.comparator(e.key,t.key)||bt(e.Yr,t.Yr)}static Kr(e,t){return bt(e.Yr,t.Yr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new In(Pn.$r)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new r3(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new Pn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return xe.resolve(u)}lookupMutationBatch(e,t){return xe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return xe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?pg:this.tr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Pn(t,0),a=new Pn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),xe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new In(bt);return t.forEach((a=>{const l=new Pn(a,0),u=new Pn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),xe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;qe.isDocumentKey(l)||(l=l.child(""));const u=new Pn(new qe(l),0);let h=new In(bt);return this.Zr.forEachWhile((p=>{const f=p.key.path;return!!s.isPrefixOf(f)&&(f.length===a&&(h=h.add(p.Yr)),!0)}),u),xe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return xe.forEach(t.mutations,(a=>{const l=new Pn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Pn(t,0),a=this.Zr.firstAfterOrEqual(s);return xe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.ri=e,this.docs=(function(){return new en(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return xe.resolve(s?s.document.mutableCopy():es.newInvalidDocument(t))}getEntries(e,t){let s=ka();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():es.newInvalidDocument(a))})),xe.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ka();const u=t.path,h=new qe(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:f,value:{document:b}}=p.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||_6(v6(b),s)<=0||(a.has(b.key)||xf(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return xe.resolve(l)}getAllFromCollectionGroup(e,t,s,a){We(9500)}ii(e,t){return xe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new $3(this)}getSize(e){return xe.resolve(this.size)}}class $3 extends V3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),xe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.persistence=e,this.si=new Do((t=>yg(t)),bg),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.oi=0,this._i=new wg,this.targetCount=0,this.ai=Gl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),xe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Gl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Pr(t),xe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),xe.waitFor(l).next((()=>a))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return xe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),xe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),xe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return xe.resolve(s)}containsKey(e,t){return xe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t){this.ui={},this.overlays={},this.ci=new hf(0),this.li=!1,this.li=!0,this.hi=new F3,this.referenceDelegate=e(this),this.Pi=new Y3(this),this.indexManager=new M3,this.remoteDocumentCache=(function(a){return new K3(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new I3(t),this.Ii=new z3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new H3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new q3(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Pe("MemoryPersistence","Starting transaction:",e);const a=new J3(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return xe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class J3 extends S6{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.Ri=new wg,this.Vi=null}static mi(e){return new Ng(e)}get fi(){if(this.Vi)return this.Vi;throw We(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),xe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.fi,(s=>{const a=qe.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,at.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return xe.or([()=>xe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Vh{constructor(e,t){this.persistence=e,this.pi=new Do((s=>N6(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=O3(this,t)}static mi(e,t){return new Vh(e,t)}Ei(){}di(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return xe.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?xe.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,l.removeEntry(u,at.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),xe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hh(e.data.value)),t}br(e,t,s){return xe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return xe.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=vt(),a=vt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ag(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GP()?8:E6(ns())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new Q3;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(El()<=yt.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",wl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xe.resolve()):(El()<=yt.DEBUG&&Pe("QueryEngine","Query:",wl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(El()<=yt.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",wl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):xe.resolve())}ys(e,t){if(bS(t))return xe.resolve(null);let s=zi(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=jh(t,null,"F"),s=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=vt(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((p=>{const f=this.Ds(t,h);return this.Cs(t,f,u,p.readTime)?this.ys(e,jh(t,null,"F")):this.vs(e,f,t,p)}))))})))))}ws(e,t,s,a){return bS(t)||a.isEqual(at.min())?xe.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?xe.resolve(null):(El()<=yt.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),wl(t)),this.vs(e,u,t,b6(a,hu)).next((h=>h)))}))}Ds(e,t){let s=new In(Sw(e));return t.forEach(((a,l)=>{xf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return El()<=yt.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",wl(t)),this.ps.getDocumentsMatchingQuery(e,t,kr.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="LocalStore",X3=3e8;class Z3{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new en(bt),this.xs=new Do((l=>yg(l)),bg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eL(n,e,t,s){return new Z3(n,e,t,s)}async function Kw(n,e){const t=ot(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let p=vt();for(const f of a){u.push(f.batchId);for(const b of f.mutations)p=p.add(b.key)}for(const f of l){h.push(f.batchId);for(const b of f.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(s,p).next((f=>({Ls:f,removedBatchIds:u,addedBatchIds:h})))}))}))}function tL(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,f,b){const _=f.batch,T=_.keys();let E=xe.resolve();return T.forEach((I=>{E=E.next((()=>b.getEntry(p,I))).next((C=>{const k=f.docVersions.get(I);Mt(k!==null,48541),C.version.compareTo(k)<0&&(_.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),b.addEntry(C)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let p=vt();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(p=p.add(h.batch.mutations[f].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function $w(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function nL(n,e){const t=ot(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((b,_)=>{const T=a.get(_);if(!T)return;h.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,_))));let E=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken($n.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):b.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(b.resumeToken,s)),a=a.insert(_,E),(function(C,k,j){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=X3?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(T,E,b)&&h.push(t.Pi.updateTargetData(l,E))}));let p=ka(),f=vt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),h.push(sL(l,u,e.documentUpdates).next((b=>{p=b.ks,f=b.qs}))),!s.isEqual(at.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(b)}return xe.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,f))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function sL(n,e,t){let s=vt(),a=vt();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=ka();return t.forEach(((h,p)=>{const f=l.get(h);p.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(at.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!f.isValidDocument()||p.version.compareTo(f.version)>0||p.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):Pe(kg,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function iL(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=pg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function aL(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,xe.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new _r(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Up(n,e,t){const s=ot(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Zl(u))throw u;Pe(kg,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function MS(n,e,t){const s=ot(n);let a=at.min(),l=vt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,f,b){const _=ot(p),T=_.xs.get(b);return T!==void 0?xe.resolve(_.Ms.get(T)):_.Pi.getTargetData(f,b)})(s,u,zi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:at.min(),t?l:vt()))).next((h=>(rL(s,q6(e),h),{documents:h,Qs:l})))))}function rL(n,e,t){let s=n.Os.get(e)||at.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class DS{constructor(){this.activeTargetIds=W6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oL{constructor(){this.Mo=new DS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new DS,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="ConnectivityMonitor";class jS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(PS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(PS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function Op(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="RestConnection",cL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Mh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Op(),h=this.zo(e,t.toUriEncodedString());Pe(W0,`Sending RPC '${e}' ${u}:`,h,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:f}=new URL(h),b=Jl(f);return this.Jo(e,h,p,s,b).then((_=>(Pe(W0,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Ul(W0,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=cL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class hL extends uL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Op();return new Promise(((h,p)=>{const f=new Q1;f.setWithCredentials(!0),f.listenOnce(W1.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case dh.NO_ERROR:const _=f.getResponseJson();Pe(Xn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case dh.TIMEOUT:Pe(Xn,`RPC '${e}' ${u} timed out`),p(new Ie(pe.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const T=f.getStatus();if(Pe(Xn,`RPC '${e}' ${u} failed with status:`,T,"response text:",f.getResponseText()),T>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E==null?void 0:E.error;if(I&&I.status&&I.message){const C=(function(j){const M=j.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(M)>=0?M:pe.UNKNOWN})(I.status);p(new Ie(C,I.message))}else p(new Ie(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else p(new Ie(pe.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:u,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Pe(Xn,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);Pe(Xn,`RPC '${e}' ${u} sending request:`,a),f.send(t,"POST",b,s,15)}))}T_(e,t,s){const a=Op(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ew(),h=Z1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(p.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const b=l.join("");Pe(Xn,`Creating RPC '${e}' stream ${a}: ${b}`,p);const _=u.createWebChannel(b,p);this.I_(_);let T=!1,E=!1;const I=new dL({Yo:k=>{E?Pe(Xn,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(T||(Pe(Xn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),T=!0),Pe(Xn,`RPC '${e}' stream ${a} sending:`,k),_.send(k))},Zo:()=>_.close()}),C=(k,j,M)=>{k.listen(j,(z=>{try{M(z)}catch(q){setTimeout((()=>{throw q}),0)}}))};return C(_,eu.EventType.OPEN,(()=>{E||(Pe(Xn,`RPC '${e}' stream ${a} transport opened.`),I.o_())})),C(_,eu.EventType.CLOSE,(()=>{E||(E=!0,Pe(Xn,`RPC '${e}' stream ${a} transport closed`),I.a_(),this.E_(_))})),C(_,eu.EventType.ERROR,(k=>{E||(E=!0,Ul(Xn,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),I.a_(new Ie(pe.UNAVAILABLE,"The operation could not be completed")))})),C(_,eu.EventType.MESSAGE,(k=>{var j;if(!E){const M=k.data[0];Mt(!!M,16349);const z=M,q=(z==null?void 0:z.error)||((j=z[0])==null?void 0:j.error);if(q){Pe(Xn,`RPC '${e}' stream ${a} received error:`,q);const X=q.status;let $=(function(R){const L=En[R];if(L!==void 0)return Pw(L)})(X),D=q.message;$===void 0&&($=pe.INTERNAL,D="Unknown error status: "+X+" with message "+q.message),E=!0,I.a_(new Ie($,D)),_.close()}else Pe(Xn,`RPC '${e}' stream ${a} received:`,M),I.u_(M)}})),C(h,X1.STAT_EVENT,(k=>{k.stat===Np.PROXY?Pe(Xn,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===Np.NOPROXY&&Pe(Xn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function X0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){return new g3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="PersistentStream";class Jw{constructor(e,t,s,a,l,u,h,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Aa(t.toString()),Aa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Ie(pe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(LS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Pe(LS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fL extends Jw{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=b3(this.serializer,e),s=(function(l){if(!("targetChange"in l))return at.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?at.min():u.readTime?Hi(u.readTime):at.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Lp(this.serializer),t.addTarget=(function(l,u){let h;const p=u.target;if(h=Rp(p)?{documents:T3(l,p)}:{query:S3(l,p).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=Uw(l,u.resumeToken);const f=Dp(l,u.expectedCount);f!==null&&(h.expectedCount=f)}else if(u.snapshotVersion.compareTo(at.min())>0){h.readTime=Oh(l,u.snapshotVersion.toTimestamp());const f=Dp(l,u.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const s=w3(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Lp(this.serializer),t.removeTarget=e,this.q_(t)}}class mL extends Jw{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_3(e.writeResults,e.commitTime),s=Hi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Lp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>v3(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{}class gL extends pL{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Pp(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ie(pe.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Pp(t,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(pe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Aa(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class yL{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Po(this)&&(Pe(Ao,"Restarting streams for network reachability change."),await(async function(p){const f=ot(p);f.Ea.add(4),await Au(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Tf(f)})(this))}))})),this.Ra=new xL(s,a)}}async function Tf(n){if(Po(n))for(const e of n.da)await e(!0)}async function Au(n){for(const e of n.da)await e(!1)}function Qw(n,e){const t=ot(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mg(t)?Rg(t):tc(t).O_()&&Ig(t,e))}function Cg(n,e){const t=ot(n),s=tc(t);t.Ia.delete(e),s.O_()&&Ww(t,e),t.Ia.size===0&&(s.O_()?s.L_():Po(t)&&t.Ra.set("Unknown"))}function Ig(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}tc(n).Y_(e)}function Ww(n,e){n.Va.Ue(e),tc(n).Z_(e)}function Rg(n){n.Va=new h3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),tc(n).start(),n.Ra.ua()}function Mg(n){return Po(n)&&!tc(n).x_()&&n.Ia.size>0}function Po(n){return ot(n).Ea.size===0}function Xw(n){n.Va=void 0}async function bL(n){n.Ra.set("Online")}async function vL(n){n.Ia.forEach(((e,t)=>{Ig(n,e)}))}async function _L(n,e){Xw(n),Mg(n)?(n.Ra.ha(e),Rg(n)):n.Ra.set("Unknown")}async function TL(n,e,t){if(n.Ra.set("Online"),e instanceof Lw&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){Pe(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Bh(n,s)}else if(e instanceof ph?n.Va.Ze(e):e instanceof jw?n.Va.st(e):n.Va.tt(e),!t.isEqual(at.min()))try{const s=await $w(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((p,f)=>{if(p.resumeToken.approximateByteSize()>0){const b=l.Ia.get(f);b&&l.Ia.set(f,b.withResumeToken(p.resumeToken,u))}})),h.targetMismatches.forEach(((p,f)=>{const b=l.Ia.get(p);if(!b)return;l.Ia.set(p,b.withResumeToken($n.EMPTY_BYTE_STRING,b.snapshotVersion)),Ww(l,p);const _=new _r(b.target,p,f,b.sequenceNumber);Ig(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){Pe(Ao,"Failed to raise snapshot:",s),await Bh(n,s)}}async function Bh(n,e,t){if(!Zl(e))throw e;n.Ea.add(1),await Au(n),n.Ra.set("Offline"),t||(t=()=>$w(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Pe(Ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Tf(n)}))}function Zw(n,e){return e().catch((t=>Bh(n,t,e)))}async function Sf(n){const e=ot(n),t=Mr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pg;for(;SL(e);)try{const a=await iL(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,EL(e,a)}catch(a){await Bh(e,a)}eN(e)&&tN(e)}function SL(n){return Po(n)&&n.Ta.length<10}function EL(n,e){n.Ta.push(e);const t=Mr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function eN(n){return Po(n)&&!Mr(n).x_()&&n.Ta.length>0}function tN(n){Mr(n).start()}async function wL(n){Mr(n).ra()}async function NL(n){const e=Mr(n);for(const t of n.Ta)e.ea(t.mutations)}async function AL(n,e,t){const s=n.Ta.shift(),a=Tg.from(s,e,t);await Zw(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Sf(n)}async function kL(n,e){e&&Mr(n).X_&&await(async function(s,a){if((function(u){return c3(u)&&u!==pe.ABORTED})(a.code)){const l=s.Ta.shift();Mr(s).B_(),await Zw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Sf(s)}})(n,e),eN(n)&&tN(n)}async function US(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),Pe(Ao,"RemoteStore received new credentials");const s=Po(t);t.Ea.add(3),await Au(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Tf(t)}async function CL(n,e){const t=ot(n);e?(t.Ea.delete(2),await Tf(t)):e||(t.Ea.add(2),await Au(t),t.Ra.set("Unknown"))}function tc(n){return n.ma||(n.ma=(function(t,s,a){const l=ot(t);return l.sa(),new fL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:bL.bind(null,n),t_:vL.bind(null,n),r_:_L.bind(null,n),H_:TL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Mg(n)?Rg(n):n.Ra.set("Unknown")):(await n.ma.stop(),Xw(n))}))),n.ma}function Mr(n){return n.fa||(n.fa=(function(t,s,a){const l=ot(t);return l.sa(),new mL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:wL.bind(null,n),r_:kL.bind(null,n),ta:NL.bind(null,n),na:AL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Sf(n)):(await n.fa.stop(),n.Ta.length>0&&(Pe(Ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new Dg(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pg(n,e){if(Aa("AsyncQueue",`${e}: ${n}`),Zl(n))return new Ie(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||qe.comparator(t.key,s.key):(t,s)=>qe.comparator(t.key,s.key),this.keyedMap=tu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ml;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.ga=new en(qe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):We(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class zl{constructor(e,t,s,a,l,u,h,p,f){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=f}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new zl(e,t,Ml.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class RL{constructor(){this.queries=VS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=ot(t),l=a.queries;a.queries=VS(),l.forEach(((u,h)=>{for(const p of h.Sa)p.onError(s)}))})(this,new Ie(pe.ABORTED,"Firestore shutting down"))}}function VS(){return new Do((n=>Tw(n)),gf)}async function jg(n,e){const t=ot(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new IL,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=Pg(u,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ug(t)}async function Lg(n,e){const t=ot(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function ML(n,e){const t=ot(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&Ug(t)}function DL(n,e,t){const s=ot(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function Ug(n){n.Ca.forEach((e=>{e.next()}))}var Vp,BS;(BS=Vp||(Vp={})).Ma="default",BS.Cache="cache";class Og{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new zl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.key=e}}class sN{constructor(e){this.key=e}}class PL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=vt(),this.mutatedKeys=vt(),this.eu=Sw(e),this.tu=new Ml(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new OS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,_)=>{const T=a.get(b),E=xf(this.query,_)?_:null,I=!!T&&this.mutatedKeys.has(T.key),C=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;T&&E?T.data.isEqual(E.data)?I!==C&&(s.track({type:3,doc:E}),k=!0):this.su(T,E)||(s.track({type:2,doc:E}),k=!0,(p&&this.eu(E,p)>0||f&&this.eu(E,f)<0)&&(h=!0)):!T&&E?(s.track({type:0,doc:E}),k=!0):T&&!E&&(s.track({type:1,doc:T}),k=!0,(p||f)&&(h=!0)),k&&(E?(u=u.add(E),l=C?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,_)=>(function(E,I){const C=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Rt:k})}};return C(E)-C(I)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,f=p!==this.Za;return this.Za=p,u.length!==0||f?{snapshot:new zl(this.query,e.tu,l,u,e.mutatedKeys,p===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=vt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new sN(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new nN(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=vt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vg="SyncEngine";class jL{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class LL{constructor(e){this.key=e,this.hu=!1}}class UL{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Do((h=>Tw(h)),gf),this.Iu=new Map,this.Eu=new Set,this.du=new en(qe.comparator),this.Au=new Map,this.Ru=new wg,this.Vu={},this.mu=new Map,this.fu=Gl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OL(n,e,t=!0){const s=cN(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await iN(s,e,t,!0),a}async function VL(n,e){const t=cN(n);await iN(t,e,!0,!1)}async function iN(n,e,t,s){const a=await aL(n.localStore,zi(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await BL(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Qw(n.remoteStore,a),h}async function BL(n,e,t,s,a){n.pu=(_,T,E)=>(async function(C,k,j,M){let z=k.view.ru(j);z.Cs&&(z=await MS(C.localStore,k.query,!1).then((({documents:D})=>k.view.ru(D,z))));const q=M&&M.targetChanges.get(k.targetId),X=M&&M.targetMismatches.get(k.targetId)!=null,$=k.view.applyChanges(z,C.isPrimaryClient,q,X);return zS(C,k.targetId,$.au),$.snapshot})(n,_,T,E);const l=await MS(n.localStore,e,!0),u=new PL(e,l.Qs),h=u.ru(l.documents),p=Nu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),f=u.applyChanges(h,n.isPrimaryClient,p);zS(n,t,f.au);const b=new jL(e,t,u);return n.Tu.set(e,b),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function GL(n,e,t){const s=ot(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!gf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Up(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Cg(s.remoteStore,a.targetId),Bp(s,a.targetId)})).catch(Xl)):(Bp(s,a.targetId),await Up(s.localStore,a.targetId,!0))}async function zL(n,e){const t=ot(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Cg(t.remoteStore,s.targetId))}async function HL(n,e,t){const s=QL(n);try{const a=await(function(u,h){const p=ot(u),f=Yt.now(),b=h.reduce(((E,I)=>E.add(I.key)),vt());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let I=ka(),C=vt();return p.Ns.getEntries(E,b).next((k=>{I=k,I.forEach(((j,M)=>{M.isValidDocument()||(C=C.add(j))}))})).next((()=>p.localDocuments.getOverlayedDocuments(E,I))).next((k=>{_=k;const j=[];for(const M of h){const z=i3(M,_.get(M.key).overlayedDocument);z!=null&&j.push(new Ur(M.key,z,mw(z.value.mapValue),ii.exists(!0)))}return p.mutationQueue.addMutationBatch(E,f,j,h)})).next((k=>{T=k;const j=k.applyToLocalDocumentSet(_,C);return p.documentOverlayCache.saveOverlays(E,k.batchId,j)}))})).then((()=>({batchId:T.batchId,changes:ww(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,p){let f=u.Vu[u.currentUser.toKey()];f||(f=new en(bt)),f=f.insert(h,p),u.Vu[u.currentUser.toKey()]=f})(s,a.batchId,t),await ku(s,a.changes),await Sf(s.remoteStore)}catch(a){const l=Pg(a,"Failed to persist write");t.reject(l)}}async function aN(n,e){const t=ot(n);try{const s=await nL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Mt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Mt(u.hu,14607):a.removedDocuments.size>0&&(Mt(u.hu,42227),u.hu=!1))})),await ku(t,s,e)}catch(s){await Xl(s)}}function GS(n,e,t){const s=ot(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const p=ot(u);p.onlineState=h;let f=!1;p.queries.forEach(((b,_)=>{for(const T of _.Sa)T.va(h)&&(f=!0)})),f&&Ug(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function FL(n,e,t){const s=ot(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new en(qe.comparator);u=u.insert(l,es.newNoDocument(l,at.min()));const h=vt().add(l),p=new vf(at.min(),new Map,new en(bt),u,h);await aN(s,p),s.du=s.du.remove(l),s.Au.delete(e),Bg(s)}else await Up(s.localStore,e,!1).then((()=>Bp(s,e,t))).catch(Xl)}async function qL(n,e){const t=ot(n),s=e.batch.batchId;try{const a=await tL(t.localStore,e);oN(t,s,null),rN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ku(t,a)}catch(a){await Xl(a)}}async function KL(n,e,t){const s=ot(n);try{const a=await(function(u,h){const p=ot(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let b;return p.mutationQueue.lookupMutationBatch(f,h).next((_=>(Mt(_!==null,37113),b=_.keys(),p.mutationQueue.removeMutationBatch(f,_)))).next((()=>p.mutationQueue.performConsistencyCheck(f))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(f,b,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,b))).next((()=>p.localDocuments.getDocuments(f,b)))}))})(s.localStore,e);oN(s,e,t),rN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ku(s,a)}catch(a){await Xl(a)}}function rN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function oN(n,e,t){const s=ot(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Bp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||lN(n,s)}))}function lN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Cg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Bg(n))}function zS(n,e,t){for(const s of t)s instanceof nN?(n.Ru.addReference(s.key,e),$L(n,s)):s instanceof sN?(Pe(Vg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||lN(n,s.key)):We(19791,{wu:s})}function $L(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Pe(Vg,"New document in limbo: "+t),n.Eu.add(s),Bg(n))}function Bg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new qe(Ht.fromString(e)),s=n.fu.next();n.Au.set(s,new LL(t)),n.du=n.du.insert(t,s),Qw(n.remoteStore,new _r(zi(pf(t.path)),s,"TargetPurposeLimboResolution",hf.ce))}}async function ku(n,e,t){const s=ot(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,p)=>{u.push(s.pu(p,e,t).then((f=>{var b;if((f||t)&&s.isPrimaryClient){const _=f?!f.fromCache:(b=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(f){a.push(f);const _=Ag.As(p.targetId,f);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(p,f){const b=ot(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>xe.forEach(f,(T=>xe.forEach(T.Es,(E=>b.persistence.referenceDelegate.addReference(_,T.targetId,E))).next((()=>xe.forEach(T.ds,(E=>b.persistence.referenceDelegate.removeReference(_,T.targetId,E)))))))))}catch(_){if(!Zl(_))throw _;Pe(kg,"Failed to update sequence numbers: "+_)}for(const _ of f){const T=_.targetId;if(!_.fromCache){const E=b.Ms.get(T),I=E.snapshotVersion,C=E.withLastLimboFreeSnapshotVersion(I);b.Ms=b.Ms.insert(T,C)}}})(s.localStore,l))}async function YL(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){Pe(Vg,"User change. New user:",e.toKey());const s=await Kw(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new Ie(pe.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ku(t,s.Ls)}}function JL(n,e){const t=ot(n),s=t.Au.get(e);if(s&&s.hu)return vt().add(s.key);{let a=vt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function cN(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FL.bind(null,e),e.Pu.H_=ML.bind(null,e.eventManager),e.Pu.yu=DL.bind(null,e.eventManager),e}function QL(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KL.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eL(this.persistence,new W3,e.initialUser,this.serializer)}Cu(e){return new qw(Ng.mi,this.serializer)}Du(e){return new oL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class WL extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Mt(this.persistence.referenceDelegate instanceof Vh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new L3(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new qw((s=>Vh.mi(s,t)),this.serializer)}}class Gp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>GS(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=YL.bind(null,this.syncEngine),await CL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new RL})()}createDatastore(e){const t=_f(e.databaseInfo.databaseId),s=(function(l){return new hL(l)})(e.databaseInfo);return(function(l,u,h,p){return new gL(l,u,h,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,h){return new yL(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>GS(this.syncEngine,t,0)),(function(){return jS.v()?new jS:new lL})())}createSyncEngine(e,t){return(function(a,l,u,h,p,f,b){const _=new UL(a,l,u,h,p,f);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=ot(a);Pe(Ao,"RemoteStore shutting down."),l.Ea.add(5),await Au(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Gp.provider={build:()=>new Gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Aa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class XL{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Zn.UNAUTHENTICATED,this.clientId=mg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{Pe(Dr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Pe(Dr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Pg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Z0(n,e){n.asyncQueue.verifyOperationInProgress(),Pe(Dr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Kw(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function HS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZL(n);Pe(Dr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>US(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>US(e.remoteStore,a))),n._onlineComponents=e}async function ZL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe(Dr,"Using user provided OfflineComponentProvider");try{await Z0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===pe.FAILED_PRECONDITION||a.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ul("Error using user provided cache. Falling back to memory cache: "+t),await Z0(n,new Gh)}}else Pe(Dr,"Using default OfflineComponentProvider"),await Z0(n,new WL(void 0));return n._offlineComponents}async function uN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe(Dr,"Using user provided OnlineComponentProvider"),await HS(n,n._uninitializedComponentsProvider._online)):(Pe(Dr,"Using default OnlineComponentProvider"),await HS(n,new Gp))),n._onlineComponents}function eU(n){return uN(n).then((e=>e.syncEngine))}async function zh(n){const e=await uN(n),t=e.eventManager;return t.onListen=OL.bind(null,e.syncEngine),t.onUnlisten=GL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zL.bind(null,e.syncEngine),t}function tU(n,e,t={}){const s=new Ea;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,f){const b=new Gg({next:T=>{b.Nu(),u.enqueueAndForget((()=>Lg(l,_)));const E=T.docs.has(h);!E&&T.fromCache?f.reject(new Ie(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&T.fromCache&&p&&p.source==="server"?f.reject(new Ie(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new Og(pf(h.path),b,{includeMetadataChanges:!0,qa:!0});return jg(l,_)})(await zh(n),n.asyncQueue,e,t,s))),s.promise}function nU(n,e,t={}){const s=new Ea;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,f){const b=new Gg({next:T=>{b.Nu(),u.enqueueAndForget((()=>Lg(l,_))),T.fromCache&&p.source==="server"?f.reject(new Ie(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new Og(h,b,{includeMetadataChanges:!0,qa:!0});return jg(l,_)})(await zh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firestore.googleapis.com",qS=!0;class KS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hN,this.ssl=qS}else this.host=e.host,this.ssl=e.ssl??qS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P3)throw new Ie(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new o6;switch(s.type){case"firstParty":return new d6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ie(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=FS.get(t);s&&(Pe("ComponentProvider","Removing Datastore"),FS.delete(t),s.terminate())})(this),Promise.resolve()}}function sU(n,e,t,s={}){var f;n=bs(n,Ef);const a=Jl(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(G1(`https://${h}`),z1("Firestore",!0)),l.host!==hN&&l.host!==h&&Ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:s};if(!Eo(p,u)&&(n._setSettings(p),s.mockUserToken)){let b,_;if(typeof s.mockUserToken=="string")b=s.mockUserToken,_=Zn.MOCK_USER;else{b=MP(s.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ie(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Zn(T)}n._authCredentials=new l6(new nw(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class ln{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Eu(t,ln._jsonSchema))return new ln(e,s||null,new qe(Ht.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:Nn("string",ln._jsonSchemaVersion),referencePath:Nn("string")};class Nr extends La{constructor(e,t,s){super(e,t,pf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new qe(e))}withConverter(e){return new Nr(this.firestore,e,this._path)}}function Xi(n,e,...t){if(n=jn(n),sw("collection","path",e),n instanceof Ef){const s=Ht.fromString(e,...t);return aS(s),new Nr(n,null,s)}{if(!(n instanceof ln||n instanceof Nr))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ht.fromString(e,...t));return aS(s),new Nr(n.firestore,null,s)}}function Xt(n,e,...t){if(n=jn(n),arguments.length===1&&(e=mg.newId()),sw("doc","path",e),n instanceof Ef){const s=Ht.fromString(e,...t);return iS(s),new ln(n,null,new qe(s))}{if(!(n instanceof ln||n instanceof Nr))throw new Ie(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ht.fromString(e,...t));return iS(s),new ln(n.firestore,n instanceof Nr?n.converter:null,new qe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="AsyncQueue";class YS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yw(this,"async_queue_retry"),this._c=()=>{const s=X0();s&&Pe($S,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=X0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=X0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zl(e))throw e;Pe($S,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Aa("INTERNAL UNHANDLED ERROR: ",JS(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Dg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&We(47125,{Pc:JS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function JS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ca extends Ef{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new YS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YS(e),this._firestoreClient=void 0,await e}}}function iU(n,e){const t=typeof n=="object"?n:K1(),s=typeof n=="string"?n:Mh,a=hg(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=IP("firestore");l&&sU(a,...l)}return a}function wf(n){if(n._terminated)throw new Ie(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aU(n),n._firestoreClient}function aU(n){var s,a,l;const e=n._freezeSettings(),t=(function(h,p,f,b){return new C6(h,p,f,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,dN(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new XL(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ni($n.fromBase64String(e))}catch(t){throw new Ie(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ni($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,ni._jsonSchema))return ni.fromBase64String(e.bytes)}}ni._jsonSchemaVersion="firestore/bytes/1.0",ni._jsonSchema={type:Nn("string",ni._jsonSchemaVersion),bytes:Nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Nn("string",Fi._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new qi(e.vectorValues);throw new Ie(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qi._jsonSchemaVersion="firestore/vectorValue/1.0",qi._jsonSchema={type:Nn("string",qi._jsonSchemaVersion),vectorValues:Nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=/^__.*__$/;class oU{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,t,this.fieldTransforms):new wu(e,this.data,t,this.fieldTransforms)}}class fN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ur(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{Ac:n})}}class Hg{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mN(this.Ac)&&rU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lU{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||_f(e)}Cc(e,t,s,a=!1){return new Hg({Ac:e,methodName:t,Dc:s,path:qn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Af(n){const e=n._freezeSettings(),t=_f(n._databaseId);return new lU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pN(n,e,t,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Fg("Data must be an object, but it was:",u,s);const h=gN(s,u);let p,f;if(l.merge)p=new Ds(u.fieldMask),f=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const _ of l.mergeFields){const T=zp(e,_,t);if(!u.contains(T))throw new Ie(pe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);yN(b,T)||b.push(T)}p=new Ds(b),f=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,f=u.fieldTransforms;return new oU(new ys(h),p,f)}class kf extends zg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kf}}function cU(n,e,t,s){const a=n.Cc(1,e,t);Fg("Data must be an object, but it was:",a,s);const l=[],u=ys.empty();Lr(s,((p,f)=>{const b=qg(e,p,t);f=jn(f);const _=a.yc(b);if(f instanceof kf)l.push(b);else{const T=Cu(f,_);T!=null&&(l.push(b),u.set(b,T))}}));const h=new Ds(l);return new fN(u,h,a.fieldTransforms)}function uU(n,e,t,s,a,l){const u=n.Cc(1,e,t),h=[zp(e,s,t)],p=[a];if(l.length%2!=0)throw new Ie(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)h.push(zp(e,l[T])),p.push(l[T+1]);const f=[],b=ys.empty();for(let T=h.length-1;T>=0;--T)if(!yN(f,h[T])){const E=h[T];let I=p[T];I=jn(I);const C=u.yc(E);if(I instanceof kf)f.push(E);else{const k=Cu(I,C);k!=null&&(f.push(E),b.set(E,k))}}const _=new Ds(f);return new fN(b,_,u.fieldTransforms)}function dU(n,e,t,s=!1){return Cu(t,n.Cc(s?4:3,e))}function Cu(n,e){if(xN(n=jn(n)))return Fg("Unsupported field value:",e,n),gN(n,e);if(n instanceof zg)return(function(s,a){if(!mN(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let p=Cu(h,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=jn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return X6(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Yt.fromDate(s);return{timestampValue:Oh(a.serializer,l)}}if(s instanceof Yt){const l=new Yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(a.serializer,l)}}if(s instanceof Fi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ni)return{bytesValue:Uw(a.serializer,s._byteString)};if(s instanceof ln){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Eg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof qi)return(function(u,h){return{mapValue:{fields:{[hw]:{stringValue:fw},[Dh]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return vg(h.serializer,f)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${df(s)}`)})(n,e)}function gN(n,e){const t={};return rw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(n,((s,a)=>{const l=Cu(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function xN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof Fi||n instanceof ni||n instanceof ln||n instanceof zg||n instanceof qi)}function Fg(n,e,t){if(!xN(t)||!iw(t)){const s=df(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function zp(n,e,t){if((e=jn(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return qg(n,e);throw Hh("Field path arguments must be of type string or ",n,!1,void 0,t)}const hU=new RegExp("[~\\*/\\[\\]]");function qg(n,e,t){if(e.search(hU)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nf(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hh(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${s}`),u&&(p+=` in document ${a}`),p+=")"),new Ie(pe.INVALID_ARGUMENT,h+n+p)}function yN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fU extends bN{data(){return super.data()}}function Cf(n,e){return typeof e=="string"?qg(n,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ie(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class $g extends Kg{}function nc(n,e,...t){let s=[];e instanceof Kg&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((p=>p instanceof Yg)).length,h=l.filter((p=>p instanceof If)).length;if(u>1||u>0&&h>0)throw new Ie(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class If extends $g{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new If(e,t,s)}_apply(e){const t=this._parse(e);return SN(e._query,t),new La(e.firestore,e.converter,Mp(e._query,t))}_parse(e){const t=Af(e.firestore);return(function(l,u,h,p,f,b,_){let T;if(f.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){XS(_,b);const I=[];for(const C of _)I.push(WS(p,l,C));T={arrayValue:{values:I}}}else T=WS(p,l,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||XS(_,b),T=dU(h,u,_,b==="in"||b==="not-in");return wn.create(f,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Hl(n,e,t){const s=e,a=Cf("where",n);return If._create(a,s,t)}class Yg extends Kg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:wi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const p of h)SN(u,p),u=Mp(u,p)})(e._query,t),new La(e.firestore,e.converter,Mp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jg extends $g{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Jg(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gu(l,u)})(e._query,this._field,this._direction);return new La(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new ec(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function _N(n,e="asc"){const t=e,s=Cf("orderBy",n);return Jg._create(s,t)}class Qg extends $g{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Qg(e,t,s)}_apply(e){return new La(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}function TN(n){return y6("limit",n),Qg._create("limit",n,"F")}function WS(n,e,t){if(typeof(t=jn(t))=="string"){if(t==="")throw new Ie(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_w(e)&&t.indexOf("/")!==-1)throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ht.fromString(t));if(!qe.isDocumentKey(s))throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return fS(n,new qe(s))}if(t instanceof ln)return fS(n,t._key);throw new Ie(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(t)}.`)}function XS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ie(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SN(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ie(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class mU{convertValue(e,t="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Lr(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[Dh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>pn(u.doubleValue)));return new qi(t)}convertGeoPoint(e){return new Fi(pn(e.latitude),pn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=mf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const t=Cr(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ht.fromString(e);Mt(Hw(s),9688,{name:e});const a=new mu(s.get(1),s.get(3)),l=new qe(s.popFirst(5));return a.isEqual(t)||Aa(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vo extends bN{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Cf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vo._jsonSchemaVersion="firestore/documentSnapshot/1.0",vo._jsonSchema={type:Nn("string",vo._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class gh extends vo{data(e={}){return super.data(e)}}class _o{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new su(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new gh(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const p=new gh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new su(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new gh(a._firestore,a._userDataWriter,h.doc.key,h.doc,new su(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,b=-1;return h.type!==0&&(f=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),b=u.indexOf(h.doc.key)),{type:pU(h.type),doc:p,oldIndex:f,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n){n=bs(n,ln);const e=bs(n.firestore,Ca);return tU(wf(e),n._key).then((t=>wN(e,n,t)))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:Nn("string",_o._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class Wg extends mU{constructor(e){super(),this.firestore=e}convertBytes(e){return new ni(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function Ua(n){n=bs(n,La);const e=bs(n.firestore,Ca),t=wf(e),s=new Wg(e);return vN(n._query),nU(t,n._query).then((a=>new _o(e,s,n,a)))}function Ia(n,e,t){n=bs(n,ln);const s=bs(n.firestore,Ca),a=EN(n.converter,e,t);return Mf(s,[pN(Af(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ii.none())])}function jo(n,e,t,...s){n=bs(n,ln);const a=bs(n.firestore,Ca),l=Af(a);let u;return u=typeof(e=jn(e))=="string"||e instanceof Nf?uU(l,"updateDoc",n._key,e,t,s):cU(l,"updateDoc",n._key,e),Mf(a,[u.toMutation(n._key,ii.exists(!0))])}function ko(n){return Mf(bs(n.firestore,Ca),[new _g(n._key,ii.none())])}function gU(n,e){const t=bs(n.firestore,Ca),s=Xt(n),a=EN(n.converter,e);return Mf(t,[pN(Af(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,ii.exists(!1))]).then((()=>s))}function xU(n,...e){var p,f,b;n=jn(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||QS(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(QS(e[s])){const _=e[s];e[s]=(p=_.next)==null?void 0:p.bind(_),e[s+1]=(f=_.error)==null?void 0:f.bind(_),e[s+2]=(b=_.complete)==null?void 0:b.bind(_)}let l,u,h;if(n instanceof ln)u=bs(n.firestore,Ca),h=pf(n._key.path),l={next:_=>{e[s]&&e[s](wN(u,n,_))},error:e[s+1],complete:e[s+2]};else{const _=bs(n,La);u=bs(_.firestore,Ca),h=_._query;const T=new Wg(u);l={next:E=>{e[s]&&e[s](new _o(u,T,_,E))},error:e[s+1],complete:e[s+2]},vN(n._query)}return(function(T,E,I,C){const k=new Gg(C),j=new Og(E,k,I);return T.asyncQueue.enqueueAndForget((async()=>jg(await zh(T),j))),()=>{k.Nu(),T.asyncQueue.enqueueAndForget((async()=>Lg(await zh(T),j)))}})(wf(u),h,a,l)}function Mf(n,e){return(function(s,a){const l=new Ea;return s.asyncQueue.enqueueAndForget((async()=>HL(await eU(s),a,l))),l.promise})(wf(n),e)}function wN(n,e,t){const s=t.docs.get(e._key),a=new Wg(n);return new vo(n,a,e._key,s,new su(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Wl=a})(Ql),Ll(new wo("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new Ca(new c6(s.getProvider("auth-internal")),new h6(u,s.getProvider("app-check-internal")),(function(f,b){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ie(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(f.options.projectId,b)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Er(eS,tS,e),Er(eS,tS,"esm2020")})();function NN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yU=NN,AN=new Tu("auth","Firebase",NN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new ug("@firebase/auth");function bU(n,...e){Fh.logLevel<=yt.WARN&&Fh.warn(`Auth (${Ql}): ${n}`,...e)}function xh(n,...e){Fh.logLevel<=yt.ERROR&&Fh.error(`Auth (${Ql}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,...e){throw Zg(n,...e)}function Si(n,...e){return Zg(n,...e)}function Xg(n,e,t){const s={...yU(),[e]:t};return new Tu("auth","Firebase",s).create(e,{appName:n.name})}function To(n){return Xg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vU(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Yi(n,"argument-error"),Xg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return AN.create(n,...e)}function tt(n,e,...t){if(!n)throw Zg(e,...t)}function Ta(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xh(e),new Error(e)}function Ra(n,e){n||Ta(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function _U(){return ZS()==="http:"||ZS()==="https:"}function ZS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_U()||OP()||"connection"in navigator)?navigator.onLine:!0}function SU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ra(t>e,"Short delay should be less than long delay!"),this.isMobile=jP()||VP()}get(){return TU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n,e){Ra(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NU=new Iu(3e4,6e4);function tx(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function sc(n,e,t,s,a={}){return CN(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=Su({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:p,...l};return UP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Jl(n.emulatorConfig.host)&&(f.credentials="include"),kN.fetch()(await IN(n,n.config.apiHost,t,h),f)})}async function CN(n,e,t){n._canInitEmulator=!1;const s={...EU,...e};try{const a=new kU(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ah(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,f]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw ah(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw ah(n,"user-disabled",u);const b=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Xg(n,b,f);Yi(n,b)}}catch(a){if(a instanceof ja)throw a;Yi(n,"network-request-failed",{message:String(a)})}}async function AU(n,e,t,s,a={}){const l=await sc(n,e,t,s,a);return"mfaPendingCredential"in l&&Yi(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function IN(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?ex(n.config,a):`${n.config.apiScheme}://${a}`;return wU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class kU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Si(this.auth,"network-request-failed")),NU.get())})}}function ah(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Si(n,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(n,e){return sc(n,"POST","/v1/accounts:delete",e)}async function qh(n,e){return sc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IU(n,e=!1){const t=jn(n),s=await t.getIdToken(e),a=nx(s);tt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:cu(ep(a.auth_time)),issuedAtTime:cu(ep(a.iat)),expirationTime:cu(ep(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function ep(n){return Number(n)*1e3}function nx(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const a=U1(t);return a?JSON.parse(a):(xh("Failed to decode base64 JWT payload"),null)}catch(a){return xh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function eE(n){const e=nx(n);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ja&&RU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function RU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(n){var _;const e=n.auth,t=await n.getIdToken(),s=await bu(n,qh(e,{idToken:t}));tt(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?RN(a.providerUserInfo):[],u=PU(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),f=h?p:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Fp(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,b)}async function DU(n){const e=jn(n);await Kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PU(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function RN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jU(n,e){const t=await CN(n,{},async()=>{const s=Su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await IN(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:s};return n.emulatorConfig&&Jl(n.emulatorConfig.host)&&(p.credentials="include"),kN.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LU(n,e){return sc(n,"POST","/v2/accounts:revokeToken",tx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const t=eE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await jU(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new Dl;return s&&(tt(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(tt(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(tt(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,e){tt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new MU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Fp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await bu(this,this.stsTokenManager.getToken(this.auth,e));return tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return IU(this,e)}reload(){return DU(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Kh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(To(this.auth));const e=await this.getIdToken();return await bu(this,CU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,f=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:E,providerData:I,stsTokenManager:C}=t;tt(_&&C,e,"internal-error");const k=Dl.fromJSON(this.name,C);tt(typeof _=="string",e,"internal-error"),gr(s,e.name),gr(a,e.name),tt(typeof T=="boolean",e,"internal-error"),tt(typeof E=="boolean",e,"internal-error"),gr(l,e.name),gr(u,e.name),gr(h,e.name),gr(p,e.name),gr(f,e.name),gr(b,e.name);const j=new vi({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:E,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:k,createdAt:f,lastLoginAt:b});return I&&Array.isArray(I)&&(j.providerData=I.map(M=>({...M}))),p&&(j._redirectEventId=p),j}static async _fromIdTokenResponse(e,t,s=!1){const a=new Dl;a.updateFromServerResponse(t);const l=new vi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Kh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];tt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?RN(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new Dl;h.updateFromIdToken(s);const p=new vi({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Fp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,f),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;function Sa(n){Ra(n instanceof Function,"Expected a class definition");let e=tE.get(n);return e?(Ra(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MN.type="NONE";const nE=MN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(n,e,t){return`firebase:${n}:${e}:${t}`}class Pl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=yh(this.userKey,a.apiKey,l),this.fullPersistenceKey=yh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qh(this.auth,{idToken:e}).catch(()=>{});return t?vi._fromGetAccountInfoResponse(this.auth,t,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Pl(Sa(nE),e,s);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||Sa(nE);const u=yh(s,e.config.apiKey,e.name);let h=null;for(const f of t)try{const b=await f._get(u);if(b){let _;if(typeof b=="string"){const T=await qh(e,{idToken:b}).catch(()=>{});if(!T)break;_=await vi._fromGetAccountInfoResponse(e,T,b)}else _=vi._fromJSON(e,b);f!==l&&(h=_),l=f;break}}catch{}const p=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Pl(l,e,s):(l=p[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(u)}catch{}})),new Pl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ON(e))return"Blackberry";if(VN(e))return"Webos";if(PN(e))return"Safari";if((e.includes("chrome/")||jN(e))&&!e.includes("edge/"))return"Chrome";if(UN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function DN(n=ns()){return/firefox\//i.test(n)}function PN(n=ns()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jN(n=ns()){return/crios\//i.test(n)}function LN(n=ns()){return/iemobile/i.test(n)}function UN(n=ns()){return/android/i.test(n)}function ON(n=ns()){return/blackberry/i.test(n)}function VN(n=ns()){return/webos/i.test(n)}function sx(n=ns()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UU(n=ns()){var e;return sx(n)&&!!((e=window.navigator)!=null&&e.standalone)}function OU(){return BP()&&document.documentMode===10}function BN(n=ns()){return sx(n)||UN(n)||VN(n)||ON(n)||/windows phone/i.test(n)||LN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(n,e=[]){let t;switch(n){case"Browser":t=sE(ns());break;case"Worker":t=`${sE(ns())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ql}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const p=e(l);u(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(n,e={}){return sc(n,"GET","/v2/passwordPolicy",tx(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=6;class zU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??GU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iE(this),this.idTokenSubscription=new iE(this),this.beforeStateQueue=new VU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sa(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qh(this,{idToken:e}),s=await vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(bi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(To(this));const t=e?jn(e):null;return t&&tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BU(this),t=new zU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await LU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sa(e)||this._popupRedirectResolver;tt(t,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[Sa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&bU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Df(n){return jn(n)}class iE{constructor(e){this.auth=e,this.observer=null,this.addObserver=YP(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ix={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FU(n){ix=n}function qU(n){return ix.loadJS(n)}function KU(){return ix.gapiScript}function $U(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n,e){const t=hg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Eo(l,e??{}))return a;Yi(a,"already-initialized")}return t.initialize({options:e})}function JU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Sa);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function QU(n,e,t){const s=Df(n);tt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=zN(e),{host:u,port:h}=WU(e),p=h===null?"":`:${h}`,f={url:`${l}//${u}${p}/`},b=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),tt(Eo(f,s.config.emulator)&&Eo(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,Jl(u)?(G1(`${l}//${u}${p}`),z1("Auth",!0)):XU()}function zN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function WU(n){const e=zN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:aE(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:aE(u)}}}function aE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ta("not implemented")}_getIdTokenResponse(e){return Ta("not implemented")}_linkToIdToken(e,t){return Ta("not implemented")}_getReauthenticationResolver(e){return Ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(n,e){return AU(n,"POST","/v1/accounts:signInWithIdp",tx(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="http://localhost";class Co extends HN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new Co(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return jl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,jl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jl(e,t)}buildRequest(){const e={requestUri:ZU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Su(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends ax{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ru{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return _a.credential(t,s)}catch{return null}}}_a.GOOGLE_SIGN_IN_METHOD="google.com";_a.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Ru{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Ru{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return br.credential(t,s)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await vi._fromIdTokenResponse(e,s,a),u=rE(s);return new Fl({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=rE(s);return new Fl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function rE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends ja{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new $h(e,t,s,a)}}function FN(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(n,l,e,s):l})}async function eO(n,e,t=!1){const s=await bu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Fl._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(n,e,t=!1){const{auth:s}=n;if(bi(s.app))return Promise.reject(To(s));const a="reauthenticate";try{const l=await bu(n,FN(s,a,e,n),t);tt(l.idToken,s,"internal-error");const u=nx(l.idToken);tt(u,s,"internal-error");const{sub:h}=u;return tt(n.uid===h,s,"user-mismatch"),Fl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Yi(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(n,e,t=!1){if(bi(n.app))return Promise.reject(To(n));const s="signIn",a=await FN(n,s,e),l=await Fl._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}function sO(n,e,t,s){return jn(n).onIdTokenChanged(e,t,s)}function iO(n,e,t){return jn(n).beforeAuthStateChanged(e,t)}function aO(n,e,t,s){return jn(n).onAuthStateChanged(e,t,s)}function rO(n){return jn(n).signOut()}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=1e3,lO=10;class KN extends qN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);OU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,lO):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},oO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KN.type="LOCAL";const cO=KN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N extends qN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$N.type="SESSION";const YN=$N;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Pf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async f=>f(t.origin,l)),p=await uO(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,p)=>{const f=rx("",20);a.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(b),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function hO(n){Ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function fO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function pO(){return JN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="firebaseLocalStorageDb",gO=1,Jh="firebaseLocalStorage",WN="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jf(n,e){return n.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function xO(){const n=indexedDB.deleteDatabase(QN);return new Mu(n).toPromise()}function qp(){const n=indexedDB.open(QN,gO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Jh,{keyPath:WN})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Jh)?e(s):(s.close(),await xO(),e(await qp()))})})}async function oE(n,e,t){const s=jf(n,!0).put({[WN]:e,value:t});return new Mu(s).toPromise()}async function yO(n,e){const t=jf(n,!1).get(e),s=await new Mu(t).toPromise();return s===void 0?null:s.value}function lE(n,e){const t=jf(n,!0).delete(e);return new Mu(t).toPromise()}const bO=800,vO=3;class XN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>vO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(pO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await fO(),!this.activeServiceWorker)return;this.sender=new dO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qp();return await oE(e,Yh,"1"),await lE(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>oE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>yO(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=jf(a,!1).getAll();return new Mu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XN.type="LOCAL";const _O=XN;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(n,e){return e?Sa(e):(tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends HN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TO(n){return nO(n.auth,new ox(n),n.bypassAuthState)}function SO(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),tO(t,new ox(n),n.bypassAuthState)}async function EO(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),eO(t,new ox(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TO;case"linkViaPopup":case"linkViaRedirect":return EO;case"reauthViaPopup":case"reauthViaRedirect":return SO;default:Yi(this.auth,"internal-error")}}resolve(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new Iu(2e3,1e4);async function NO(n,e,t){if(bi(n.app))return Promise.reject(Si(n,"operation-not-supported-in-this-environment"));const s=Df(n);vU(n,e,ax);const a=ZN(s,t);return new bo(s,"signInViaPopup",e,a).executeNotNull()}class bo extends eA{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Ra(this.filter.length===1,"Popup operations only handle one event");const e=rx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wO.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="pendingRedirect",bh=new Map;class kO extends eA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const s=await CO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CO(n,e){const t=MO(e),s=RO(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function IO(n,e){bh.set(n._key(),e)}function RO(n){return Sa(n._redirectPersistence)}function MO(n){return yh(AO,n.config.apiKey,n.name)}async function DO(n,e,t=!1){if(bi(n.app))return Promise.reject(To(n));const s=Df(n),a=ZN(s,e),u=await new kO(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=600*1e3;class jO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!tA(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Si(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PO&&this.cachedEventUids.clear(),this.cachedEventUids.has(cE(e))}saveEventToCache(e){this.cachedEventUids.add(cE(e)),this.lastProcessedEventTime=Date.now()}}function cE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(n,e={}){return sc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VO=/^https?/;async function BO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await UO(n);for(const t of e)try{if(GO(t))return}catch{}Yi(n,"unauthorized-domain")}function GO(n){const e=Hp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!VO.test(t))return!1;if(OO.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new Iu(3e4,6e4);function uE(){const n=Ki().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function HO(n){return new Promise((e,t)=>{var a,l,u;function s(){uE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uE(),t(Si(n,"network-request-failed"))},timeout:zO.get()})}if((l=(a=Ki().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Ki().gapi)!=null&&u.load)s();else{const h=$U("iframefcb");return Ki()[h]=()=>{gapi.load?s():t(Si(n,"network-request-failed"))},qU(`${KU()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw vh=null,e})}let vh=null;function FO(n){return vh=vh||HO(n),vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new Iu(5e3,15e3),KO="__/auth/iframe",$O="emulator/auth/iframe",YO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QO(n){const e=n.config;tt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ex(e,$O):`https://${n.config.authDomain}/${KO}`,s={apiKey:e.apiKey,appName:n.name,v:Ql},a=JO.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Su(s).slice(1)}`}async function WO(n){const e=await FO(n),t=Ki().gapi;return tt(t,n,"internal-error"),e.open({where:document.body,url:QO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YO,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Si(n,"network-request-failed"),h=Ki().setTimeout(()=>{l(u)},qO.get());function p(){Ki().clearTimeout(h),a(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZO=500,eV=600,tV="_blank",nV="http://localhost";class dE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sV(n,e,t,s=ZO,a=eV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p={...XO,width:s.toString(),height:a.toString(),top:l,left:u},f=ns().toLowerCase();t&&(h=jN(f)?tV:t),DN(f)&&(e=e||nV,p.scrollbars="yes");const b=Object.entries(p).reduce((T,[E,I])=>`${T}${E}=${I},`,"");if(UU(f)&&h!=="_self")return iV(e||"",h),new dE(null);const _=window.open(e||"",h,b);tt(_,n,"popup-blocked");try{_.focus()}catch{}return new dE(_)}function iV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="__/auth/handler",rV="emulator/auth/handler",oV=encodeURIComponent("fac");async function hE(n,e,t,s,a,l){tt(n.config.authDomain,n,"auth-domain-config-required"),tt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Ql,eventId:a};if(e instanceof ax){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",$P(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))u[b]=_}if(e instanceof Ru){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(u.scopes=b.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const b of Object.keys(h))h[b]===void 0&&delete h[b];const p=await n._getAppCheckToken(),f=p?`#${oV}=${encodeURIComponent(p)}`:"";return`${lV(n)}?${Su(h).slice(1)}${f}`}function lV({config:n}){return n.emulator?ex(n,rV):`https://${n.authDomain}/${aV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="webStorageSupport";class cV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YN,this._completeRedirectFn=DO,this._overrideRedirectResult=IO}async _openPopup(e,t,s,a){var u;Ra((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await hE(e,t,s,Hp(),a);return sV(e,l,rx())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await hE(e,t,s,Hp(),a);return hO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ra(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await WO(e),s=new jO(e);return t.register("authEvent",a=>(tt(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tp,{type:tp},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[tp];l!==void 0&&t(!!l),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BN()||PN()||sx()}}const uV=cV;var fE="@firebase/auth",mE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fV(n){Ll(new wo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;tt(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GN(n)},f=new HU(s,a,l,p);return JU(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ll(new wo("auth-internal",e=>{const t=Df(e.getProvider("auth").getImmediate());return(s=>new dV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(fE,mE,hV(n)),Er(fE,mE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=300,pV=B1("authIdTokenMaxAge")||mV;let pE=null;const gV=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>pV)return;const a=t==null?void 0:t.token;pE!==a&&(pE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function xV(n=K1()){const e=hg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YU(n,{popupRedirectResolver:uV,persistence:[_O,cO,YN]}),s=B1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=gV(l.toString());iO(t,u,()=>u(t.currentUser)),sO(t,h=>u(h))}}const a=O1("auth");return a&&QU(t,`http://${a}`),t}function yV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}FU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Si("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",yV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fV("Browser");const Qh={xp:0,level:1,streak:0,lastActiveDate:"",unlockedAchievements:[]},bV=(n,e,t,s)=>{let a=0;const l=e.filter(u=>u.isCorrect).length;return a+=l*10,e.length>0&&l===e.length&&(a+=50),t&&(a+=100,s==="SKD"&&n>=350&&(a+=100),s==="UTBK"&&n>=600&&(a+=100)),a},gE=n=>Math.floor(Math.sqrt(n/100))+1,Wh=n=>100*Math.pow(n,2),nA=n=>{const e=[...Yv].reverse().find(t=>n>=t.level);return e?e.title:Yv[0].title},vV=n=>{const e=new Date().toISOString().split("T")[0],t=n.lastActiveDate;if(t===e)return n;const s=new Date;s.setDate(s.getDate()-1);const a=s.toISOString().split("T")[0];let l=n.streak;return t===a?l+=1:l=1,{...n,streak:l,lastActiveDate:e}},_V=(n,e)=>{const t=new Set(n.unlockedAchievements),s=[];return ap.forEach(a=>{t.has(a.id)||a.condition&&a.condition(e,n)&&s.push(a)}),s},TV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},sA=q1(TV),Et=iU(sA),lx=xV(sA),SV=new _a;console.log("Firebase Service Initialized for: fajmuls-learning");const iA="benchmark_scores",aA="global_leaderboard",cx="test_packages",gn="users",Du="battles",EV=n=>aO(lx,n),wV=async()=>{try{return(await NO(lx,SV)).user}catch(n){throw console.error("Error signing in with Google",n),n}},NV=async()=>{try{await rO(lx)}catch(n){console.error("Error signing out",n)}},AV=async n=>{const e=nc(Xi(Et,gn),Hl("username_lowercase","==",n.toLowerCase()));return(await Ua(e)).empty},Kp=async n=>{const e=Xt(Et,gn,n),t=await Rf(e);if(t.exists()){const s=t.data();return s.gamification?s:{...s,gamification:Qh}}else return null},kV=async(n,e)=>{const t=Xt(Et,gn,n);await Ia(t,{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0});const s=await Rf(t);s.exists()&&!s.data().gamification&&await jo(t,{gamification:Qh})},xE=async(n,e)=>{try{await jo(Xt(Et,gn,n),{gamification:e})}catch(t){console.error("Error updating gamification",t)}},CV=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await jo(Xt(Et,gn,n),t)},Lf=n=>{const e=new WeakSet;return JSON.parse(JSON.stringify(n,(t,s)=>{if(typeof s=="object"&&s!==null){if(e.has(s))return;e.add(s)}if(s!==void 0)return s}))},IV=async(n,e)=>{try{const t=e.timestamp?`sess-${e.timestamp}`:`sess-${Date.now()}`,s=Lf(e);await Ia(Xt(Et,gn,n,"sessions",t),{...s,id:t}),console.log(`Session ${t} saved to cloud`)}catch(t){throw console.error("Error saving session to cloud",t),t}},RV=async n=>{try{const e=nc(Xi(Et,gn,n,"sessions"),_N("timestamp","desc")),t=await Ua(e),s=[];return t.forEach(a=>{s.push({...a.data(),id:a.id})}),s}catch(e){return console.error("Error fetching all saved sessions",e),[]}},yE=async(n,e)=>{try{await ko(Xt(Et,gn,n,"sessions",e)),console.log(`Cloud session ${e} deleted`)}catch(t){console.error("Error deleting session from cloud",t)}},MV=async n=>{console.log("clearSessionFromCloud called - Use deleteSavedSession for specific items")},bE=async(n,e)=>{try{const t=Lf(e);await Ia(Xt(Et,gn,n,"history",e.id),t),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},rA=async n=>{try{const e=nc(Xi(Et,gn,n,"history")),t=await Ua(e),s=[];return t.forEach(a=>{s.push(a.data())}),s.sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},DV=async(n,e)=>{try{await ko(Xt(Et,gn,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},vE=async(n,e,t,s,a,l)=>{if(!a||a.startsWith("guest-"))return;const u=`${n}_${e}_${a}`,h=Xt(Et,aA,u);try{const p=await Rf(h);if(p.exists()){const f=p.data();t>f.score&&await jo(h,{score:t,packageName:l||f.packageName,timestamp:Date.now(),username:s})}else{const f={uid:a,username:s,category:n,subCategory:e,score:t,packageName:l,timestamp:Date.now()};await Ia(h,f)}}catch(p){console.error("Error saving to global leaderboard",p)}},Tl=async(n,e,t=50)=>{try{const s=nc(Xi(Et,aA),Hl("category","==",n),Hl("subCategory","==",e),_N("score","desc"),TN(t)),a=await Ua(s),l=[];return a.forEach(u=>l.push(u.data())),l}catch(s){return console.error(`Error fetching leaderboard for ${n}/${e}:`,s),[]}},PV=async(n,e,t,s)=>{try{await gU(Xi(Et,iA),{game:n,score:e,username:t,unit:s,timestamp:Date.now()})}catch(a){console.error("Error saving score to Firebase:",a)}},jV=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=nc(Xi(Et,iA),Hl("game","==",n)),a=await Ua(s),l=[];a.forEach(p=>{l.push({id:p.id,...p.data()})}),l.sort((p,f)=>t?p.score-f.score:f.score-p.score);const u=[],h=new Set;for(const p of l){const f=p.username.toLowerCase().trim();if(h.has(f)||(u.push(p),h.add(f)),u.length>=e)break}return u}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},rh=async n=>{try{const e=Lf(n);await Ia(Xt(Et,cx,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},LV=async()=>{try{const n=await Ua(Xi(Et,cx)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},UV=async n=>{try{await ko(Xt(Et,cx,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}},OV=async n=>{if(!n||n.length<3)return[];try{const e=nc(Xi(Et,gn),Hl("username_lowercase",">=",n.toLowerCase()),Hl("username_lowercase","<=",n.toLowerCase()+""),TN(10));return(await Ua(e)).docs.map(s=>{var l;const a=s.data();return{uid:s.id,username:a.username,photoURL:a.photoURL,level:((l=a.gamification)==null?void 0:l.level)||1,lastActive:a.lastLogin}})}catch(e){return console.error("Error searching users",e),[]}},VV=async(n,e)=>{const t={id:`${n.uid}_${Date.now()}`,fromUid:n.uid,fromUsername:n.username,fromPhotoURL:n.photoURL,fromLevel:n.level,timestamp:Date.now()};await Ia(Xt(Et,gn,e,"friend_requests",n.uid),t)},BV=async n=>(await Ua(Xi(Et,gn,n,"friend_requests"))).docs.map(t=>t.data()),GV=async(n,e,t)=>{const s={uid:t.fromUid,username:t.fromUsername,photoURL:t.fromPhotoURL,level:t.fromLevel,lastActive:new Date().toISOString()};await Ia(Xt(Et,gn,n,"friends",t.fromUid),s),await Ia(Xt(Et,gn,t.fromUid,"friends",n),e),await ko(Xt(Et,gn,n,"friend_requests",t.fromUid))},zV=async(n,e)=>{await ko(Xt(Et,gn,n,"friend_requests",e))},HV=async(n,e)=>{try{await ko(Xt(Et,gn,n,"friends",e)),await ko(Xt(Et,gn,e,"friends",n))}catch(t){throw console.error("Error removing friend",t),t}},FV=async n=>{var e;try{const t=await Ua(Xi(Et,gn,n,"friends")),s=[];for(const a of t.docs){const l=a.data(),u=await Kp(l.uid);u?s.push({uid:l.uid,username:u.username,photoURL:u.photoURL,level:((e=u.gamification)==null?void 0:e.level)||1,lastActive:u.lastLogin}):s.push(l)}return s}catch(t){return console.error("Error getting friends",t),[]}},qV=async(n,e,t,s)=>{const a=Math.random().toString(36).substring(2,8).toUpperCase(),l={id:a,hostUid:n,hostName:e,guestUid:null,guestName:null,status:"WAITING",category:t,questions:Lf(s),scores:{[n]:0},progress:{[n]:0},winner:null,createdAt:Date.now()};return await Ia(Xt(Et,Du,a),l),a},KV=async(n,e,t)=>{const s=Xt(Et,Du,n),a=await Rf(s);if(!a.exists())throw new Error("Room not found");const l=a.data();if(l.status!=="WAITING")throw new Error("Game already started or finished");if(l.guestUid)throw new Error("Room is full");return await jo(s,{guestUid:e,guestName:t,status:"STARTING",[`scores.${e}`]:0,[`progress.${e}`]:0}),!0},$V=(n,e)=>xU(Xt(Et,Du,n),t=>{t.exists()&&e(t.data())}),YV=async(n,e,t,s)=>{const a=Xt(Et,Du,n);await jo(a,{[`scores.${e}`]:t,[`progress.${e}`]:s})},JV=async(n,e)=>{const t=Xt(Et,Du,n);await jo(t,{status:"FINISHED",winner:e})};class QV{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio($v[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const a=this.audioCache[e];a.currentTime=0;const l=a.play();l!==void 0&&l.catch(()=>{});return}const t=$v[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const te=new QV;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),_E=n=>{const e=XV(n);return e.charAt(0).toUpperCase()+e.slice(1)},oA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),ZV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=G.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},p)=>G.createElement("svg",{ref:p,...e8,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:oA("lucide",a),...!l&&!ZV(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,b])=>G.createElement(f,b)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,e)=>{const t=G.forwardRef(({className:s,...a},l)=>G.createElement(t8,{ref:l,iconNode:e,className:oA(`lucide-${WV(_E(n))}`,`lucide-${n}`,s),...a}));return t.displayName=_E(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Kn=ve("activity",n8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ft=ve("arrow-left",s8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],a8=ve("arrow-up",i8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],lA=ve("award",r8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],l8=ve("bell-off",o8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],$p=ve("bell",c8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Yp=ve("book-open",u8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Uf=ve("book",d8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],f8=ve("box",h8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],xs=ve("brain",m8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Of=ve("briefcase",p8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],x8=ve("building-2",g8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],b8=ve("calculator",y8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_8=ve("calendar",v8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],S8=ve("camera",T8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],So=ve("chart-no-axes-column",E8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],N8=ve("chevron-down",w8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vr=ve("chevron-right",A8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],C8=ve("circle-alert",k8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ss=ve("circle-check-big",I8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M8=ve("circle-play",R8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ic=ve("circle-x",D8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ar=ve("clock",P8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],L8=ve("cloud-upload",j8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],vu=ve("copy",U8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],V8=ve("crosshair",O8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],G8=ve("crown",B8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cA=ve("download",z8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],F8=ve("eraser",H8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],K8=ve("external-link",q8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Io=ve("eye",$8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],J8=ve("file-search",Y8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ei=ve("file-text",Q8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],X8=ve("flag",W8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],uA=ve("flame",Z8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],t9=ve("footprints",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],s9=ve("funnel",n9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],TE=ve("git-compare",i9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],r9=ve("git-merge",a9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],l9=ve("globe",o9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],ac=ve("graduation-cap",c9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ma=ve("grid-3x3",u9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Xh=ve("hash",d9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Vf=ve("heart",h9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Pu=ve("history",f9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],p9=ve("info",m9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],x9=ve("landmark",g9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ux=ve("layers",y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],v9=ve("layout-grid",b9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],dA=ve("lightbulb",_9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],S9=ve("list-ordered",T9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yn=ve("loader-circle",E9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hA=ve("lock",w9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],A9=ve("log-out",N9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Zh=ve("map",k9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],SE=ve("medal",C9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],R9=ve("menu",I9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],D9=ve("message-circle",M9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Bf=ve("message-square",P9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],dx=ve("moon",j9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],fA=ve("mouse-pointer-2",L9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],O9=ve("music",U9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],mA=ve("package",V9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_u=ve("palette",B9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],z9=ve("panels-top-left",G9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Gf=ve("pause",H9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Jp=ve("pen-tool",F9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],K9=ve("pen",q9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Lo=ve("play",$9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],J9=ve("plus",Y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],EE=ve("refresh-cw",Q9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],X9=ve("repeat",W9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],e7=ve("rocket",Z9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Qp=ve("rotate-ccw",t7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hx=ve("save",n7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],uu=ve("search",s7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pA=ve("settings",i7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],r7=ve("shapes",a7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],l7=ve("share-2",o7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],u7=ve("shield-check",c7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wE=ve("shield",d7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],f7=ve("sparkles",h7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],p7=ve("star",m7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gA=ve("sun",g7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],xA=ve("swords",x7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Pr=ve("target",y7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Wp=ve("timer",b7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ro=ve("trash-2",v7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],T7=ve("trending-up",_7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zf=ve("triangle-alert",S7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],vs=ve("trophy",E7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],ef=ve("type",w7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fx=ve("upload",N7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],k7=ve("user-plus",A7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yA=ve("user",C7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ql=ve("users",I7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],M7=ve("volume-2",R7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],P7=ve("volume-x",D7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mx=ve("x",j7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],px=ve("youtube",L7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ps=ve("zap",U7),O7=()=>{const[n,e]=G.useState(!1),[t,s]=G.useState(1500),[a,l]=G.useState(!1),[u,h]=G.useState("focus");G.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),G.useEffect(()=>{let E=null;return a&&t>0?E=setInterval(()=>{s(t-1)},1e3):t===0&&(l(!1),p()),()=>clearInterval(E)},[a,t]);const p=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(I=>console.log("Audio play failed",I)),"Notification"in window&&Notification.permission==="granted"&&new Notification(u==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:u==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},f=()=>l(!a),b=()=>{l(!1),s(u==="focus"?1500:300)},_=()=>{const E=u==="focus"?"break":"focus";h(E),s(E==="focus"?1500:300),l(!1)},T=E=>{const I=Math.floor(E/60),C=E%60;return`${I.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`};return n?o.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[o.jsxs("div",{className:`p-4 ${u==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wp,{size:20}),o.jsx("span",{className:"font-bold",children:u==="focus"?"Fokus":"Istirahat"})]}),o.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:o.jsx(mx,{size:18})})]}),o.jsxs("div",{className:"p-6 flex flex-col items-center",children:[o.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsx("button",{onClick:f,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:a?o.jsx(Gf,{size:24}):o.jsx(Lo,{size:24})}),o.jsx("button",{onClick:b,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:o.jsx(Qp,{size:24})})]}),o.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",u==="focus"?"Istirahat":"Fokus"]})]})]}):o.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[o.jsx(Wp,{size:24}),o.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},V7=({data:n,onNext:e})=>{const[t,s]=G.useState(!1);return o.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[o.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[o.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:o.jsxs("div",{className:"text-center",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-2 border-b border-slate-100 pb-2",children:n.title}),o.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),o.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),o.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),o.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:o.jsxs("div",{className:"text-center text-white",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-widest mb-2 border-b border-white/20 pb-2",children:n.title}),o.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),o.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&o.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[o.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),o.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),o.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},bA=({node:n,depth:e=0})=>o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),o.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>o.jsxs("div",{className:"flex flex-col items-center relative",children:[o.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),o.jsx(bA,{node:t,depth:e+1})]},s))]})]}),B7=({data:n})=>{const e=n.root||n;return o.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:o.jsx(bA,{node:e})})},xo=({className:n="",height:e="h-4",width:t="w-full"})=>o.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),G7=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx(xo,{height:"h-12",width:"w-12",className:"rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(xo,{height:"h-4",width:"w-1/3"}),o.jsx(xo,{height:"h-3",width:"w-1/2"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(xo,{height:"h-4"}),o.jsx(xo,{height:"h-4"}),o.jsx(xo,{height:"h-4",width:"w-2/3"})]})]}),z7=({onComplete:n})=>{const e=()=>{te.play("click"),n()};return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[o.jsxs("div",{className:"relative mb-8 group",children:[o.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),o.jsx("img",{src:Th,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",o.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),o.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),o.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[o.jsx(e7,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},H7=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:a})=>{var p,f;if(!n)return null;const l=b=>{te.play("tap"),s({...t,[b]:!t[b]})},u=b=>{te.play("click"),s({...t,theme:b,darkMode:b==="dark"})},h=b=>{s({...t,volume:parseFloat(b.target.value)})};return o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide relative",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(pA,{size:24,className:"text-slate-400"})," Pengaturan"]}),o.jsx("button",{onClick:()=>{te.play("back"),e()},children:o.jsx(ic,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-lg overflow-hidden",children:a.photoURL?o.jsx("img",{src:a.photoURL,alt:"Prof",className:"w-full h-full object-cover"}):(f=(p=a.username)==null?void 0:p[0])==null?void 0:f.toUpperCase()}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:a.username}),o.jsx("div",{className:"text-xs text-slate-500",children:a.isGuest?"Mode Tamu":"Akun Terhubung"})]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 text-slate-700 dark:text-slate-200 font-bold",children:[o.jsx(z9,{size:18})," Tema Aplikasi"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("button",{onClick:()=>u("light"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.theme==="light"?"bg-white border-indigo-500 text-indigo-600 shadow-md":"bg-slate-100 border-transparent text-slate-500 hover:bg-white"}`,children:[o.jsx(gA,{size:20,className:"mb-1"}),o.jsx("span",{className:"text-xs font-bold",children:"Light"})]}),o.jsxs("button",{onClick:()=>u("dark"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all ${t.theme==="dark"?"bg-slate-900 border-indigo-500 text-indigo-400 shadow-md":"bg-slate-100 dark:bg-slate-600 border-transparent text-slate-500 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-500"}`,children:[o.jsx(dx,{size:20,className:"mb-1"}),o.jsx("span",{className:"text-xs font-bold",children:"Dark"})]}),o.jsxs("button",{onClick:()=>u("fajmuls"),className:`flex flex-col items-center justify-center p-3 rounded-xl border-2 transition-all relative overflow-hidden ${t.theme==="fajmuls"?"bg-gradient-to-br from-cyan-50 to-blue-50 border-indigo-500 text-indigo-600 shadow-md":"bg-slate-100 border-transparent text-slate-500 hover:bg-white"}`,children:[o.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm z-0"}),o.jsx(f7,{size:20,className:"mb-1 relative z-10"}),o.jsx("span",{className:"text-xs font-bold relative z-10",children:"Fajmuls"})]})]})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?o.jsx(M7,{size:20}):o.jsx(P7,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>l("soundEnabled")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:o.jsx(O9,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Musik Latar"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Musik santai saat belajar."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.musicEnabled,onChange:()=>l("musicEnabled")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),o.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:h,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?o.jsx($p,{size:20}):o.jsx(l8,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>l("funnyNotifications")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:o.jsx(ss,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>l("confirmActions")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},F7="Fajmuls22",q7=({category:n,skdStream:e,tpaStream:t,availablePackages:s,history:a,onSelectPackage:l,onGenerateNew:u,onImportPackage:h,onDeletePackage:p,onFixDuplicates:f,onFixGaps:b,onBack:_,showToast:T,confirmEnabled:E,onRefresh:I,isLoading:C})=>{G.useEffect(()=>{I()},[]);const[k,j]=G.useState(""),[M,z]=G.useState(!1),[q,X]=G.useState(null),[$,D]=G.useState(!1),N=G.useRef(null),R=(Z,H)=>{const Q=a.filter(se=>se.packageId===Z||se.packageTitle&&se.packageTitle.trim()===H.trim());if(Q.length===0)return{attempts:0,highScore:0,avgScore:0,lastAttemptDate:""};const he=Q.map(se=>se.score);return{attempts:Q.length,highScore:Math.max(...he),avgScore:Math.round(he.reduce((se,ue)=>se+ue,0)/he.length),lastAttemptDate:Q[0].date}},L=(Z,H)=>{te.play("click"),X({type:Z,payload:H}),j(""),z(!0)},O=()=>{var Z;if(!k){T("Masukkan token akses!","error");return}k===F7?(z(!1),te.play("success"),(q==null?void 0:q.type)==="GENERATE"?B():(q==null?void 0:q.type)==="IMPORT"?(Z=N.current)==null||Z.click():(q==null?void 0:q.type)==="DELETE"?U(q.payload):(q==null?void 0:q.type)==="FIX_DUPLICATES"?f&&f():(q==null?void 0:q.type)==="FIX_GAPS"&&b&&b()):(te.play("error"),T("Token salah! Akses ditolak.","error"))},B=async()=>{D(!0);try{await u("verified_client")}catch(Z){console.error(Z)}finally{D(!1)}},U=Z=>{p(Z)},Te=(Z,H)=>{Z.stopPropagation();const Q=JSON.stringify(H,null,2),he=new Blob([Q],{type:"application/json"}),se=URL.createObjectURL(he),ue=document.createElement("a");ue.href=se,ue.download=`${H.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(se),T("Paket Soal berhasil didownload","success")},Me=()=>{te.play("click"),I()},J=s.filter(Z=>Z.category!==n?!1:n==="SKD"&&e?Z.skdStream===e:n==="TPA"?t==="PSIKOTEST_KEDINASAN"?Z.tpaStream==="PSIKOTEST_KEDINASAN"||Z.title&&Z.title.toLowerCase().includes("psikotes"):Z.tpaStream==="TPA_TBI"||!Z.tpaStream&&!Z.title.toLowerCase().includes("psikotes"):!0).sort((Z,H)=>Z.title.localeCompare(H.title,void 0,{numeric:!0,sensitivity:"base"})),le=G.useMemo(()=>{const Z=new Map;J.forEach(Q=>{Z.set(Q.title,(Z.get(Q.title)||0)+1)});let H=0;return Z.forEach(Q=>{Q>1&&H++}),H},[J]),ye=G.useMemo(()=>{if(J.length<2)return 0;const Z=[...J].sort((Q,he)=>new Date(Q.createdAt).getTime()-new Date(he.createdAt).getTime());let H=!1;for(let Q=0;Q<Z.length;Q++){const se=Z[Q].title.match(/(\d+)$/);if(se&&parseInt(se[1])!==Q+1){H=!0;break}}return H?1:0},[J]);let Ue=`Pilih Paket Soal ${n}`;return n==="SKD"&&e&&(Ue=`Paket Soal SKD ${e==="CPNS"?"CPNS Umum":"Kedinasan"}`),n==="TPA"&&t==="PSIKOTEST_KEDINASAN"&&(Ue="Paket Psikotes Kedinasan (STAN)"),n==="TPA"&&t==="TPA_TBI"&&(Ue="Paket Soal TPA & TBI"),o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[M&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:o.jsx(u7,{size:32})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),o.jsx("input",{type:"password",placeholder:"Token Akses...",value:k,onChange:Z=>j(Z.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:Z=>Z.key==="Enter"&&O()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>z(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),o.jsx("button",{onClick:O,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),o.jsxs("div",{className:"max-w-4xl w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:_,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[o.jsx(ft,{size:20})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:Ue}),o.jsx("button",{onClick:Me,disabled:C,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:o.jsx(EE,{size:20,className:C?"animate-spin":""})})]})]}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:Ue}),le>0&&f&&o.jsxs("div",{className:"mb-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 p-4 rounded-xl flex items-center justify-between animate-fade-in-down shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-800 rounded-lg text-amber-600 dark:text-amber-400",children:o.jsx(zf,{size:24})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:"Terdeteksi Nama Paket Ganda"}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 hidden sm:block",children:["Ditemukan ",le," judul yang sama. Sistem dapat memperbaikinya secara otomatis."]})]})]}),o.jsxs("button",{onClick:()=>L("FIX_DUPLICATES"),className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-bold text-sm transition shadow-sm flex items-center gap-2 whitespace-nowrap",children:[o.jsx(Jp,{size:16}),"Perbaiki"]})]}),ye>0&&b&&o.jsxs("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-4 rounded-xl flex items-center justify-between animate-fade-in-down shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg text-blue-600 dark:text-blue-400",children:o.jsx(S9,{size:24})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:"Terdeteksi Lompatan Nomor"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 hidden sm:block",children:"Urutan paket soal tidak kontinu (ada nomor yang hilang)."})]})]}),o.jsxs("button",{onClick:()=>L("FIX_GAPS"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold text-sm transition shadow-sm flex items-center gap-2 whitespace-nowrap",children:[o.jsx(EE,{size:16}),"Urutkan Ulang"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(hA,{size:18,className:"text-slate-400"})," Admin Zone"]}),o.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[o.jsxs("button",{onClick:()=>L("GENERATE"),disabled:$,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[$?o.jsx(Yn,{className:"animate-spin",size:18}):o.jsx(J9,{size:18}),o.jsx("span",{children:"Buat Paket AI"})]}),o.jsxs("button",{onClick:()=>L("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[o.jsx(fx,{size:18}),o.jsx("span",{children:"Import"})]})]})]}),o.jsx("input",{type:"file",ref:N,className:"hidden",accept:".json",multiple:!0,onChange:Z=>{Z.target.files&&Z.target.files.length>0&&h(Z.target.files),N.current&&(N.current.value="")}})]}),C&&J.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500",children:[o.jsx(Yn,{className:"animate-spin mx-auto mb-2"}),o.jsx("p",{children:"Memuat paket soal terbaru..."})]}):J.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsx(Ei,{className:"mx-auto mb-4 opacity-20",size:48}),o.jsx("p",{children:"Belum ada paket soal untuk kategori ini."}),o.jsx("p",{className:"text-xs mt-2",children:'Gunakan tombol "Buat Paket AI" untuk generate soal baru.'})]}):o.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:J.map(Z=>{const H=R(Z.id,Z.title);return o.jsxs("button",{onClick:()=>l(Z),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[Z.isAiGenerated&&o.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:Z.title}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{onClick:Q=>Te(Q,Z),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:o.jsx(cA,{size:18})}),o.jsx("div",{onClick:Q=>{Q.stopPropagation(),L("DELETE",Z.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:o.jsx(Ro,{size:18})})]})]}),o.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ar,{size:12})," ",Z.durationMinutes," Menit"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ei,{size:12})," ",Z.questions.length," Soal"]}),Z.version==="v2"&&o.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"}),Z.version==="v3"&&o.jsxs("span",{className:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-amber-200 dark:border-amber-800 flex items-center gap-1",children:[o.jsx(f8,{size:10})," v3 (3D)"]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),o.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[H.attempts,"x"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),o.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:H.highScore})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),o.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:H.avgScore})]})]})]},Z.id)})})]})]})},K7=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},$7=({answers:n,questions:e,onHome:t,onRetry:s,category:a,details:l})=>{const u=n.filter(C=>C.isCorrect).length;let h=(l==null?void 0:l.total)||(l==null?void 0:l.average)||(l==null?void 0:l.iqScore)||Math.round(u/e.length*100);if(a==="GENERAL"&&!l){const C=n.reduce((k,j)=>k+(j.scoreEarned||0),0);h=Math.round(C/(e.length||1))}const[p,f]=G.useState(""),[b,_]=G.useState(!1),T=n.filter(C=>!C.isCorrect),E=Array.from(new Set(T.map(C=>{var j,M;const k=e.find(z=>z.id===C.questionId);return((j=k==null?void 0:k.metadata)==null?void 0:j.subtest)||((M=k==null?void 0:k.metadata)==null?void 0:M.topic)||"General"}))),I=async()=>{_(!0);try{const C=await mP(E);f(C)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return o.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:o.jsxs("div",{className:"max-w-2xl w-full text-center",children:[o.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:h>=(a==="UTBK"?600:70)?o.jsx(lA,{size:48,className:"text-emerald-500"}):o.jsx(Kn,{size:48,className:"text-amber-500"})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),o.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:h})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:a==="GENERAL"?"Poin":"Akurasi"}),o.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:a==="GENERAL"?h:`${Math.round(u/e.length*100)}%`})]})]}),a==="UTBK"&&l&&o.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Umum:"})," ",o.jsx("b",{children:l.pu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PPU:"})," ",o.jsx("b",{children:l.ppu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PBM:"})," ",o.jsx("b",{children:l.pbm})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Kuantitatif:"})," ",o.jsx("b",{children:l.pk})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Indo:"})," ",o.jsx("b",{children:l.lbi})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Inggris:"})," ",o.jsx("b",{children:l.lbe})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Math:"})," ",o.jsx("b",{children:l.pm})]})]})]}),E.length>0&&o.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[o.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[o.jsx(Pr,{size:20})," Topik Perlu Perbaikan"]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:E.slice(0,5).map(C=>o.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:C},C))}),p?o.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[o.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),o.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:o.jsx(K7,{text:p})})]}):o.jsxs("button",{onClick:I,disabled:b,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[b?o.jsx(Yn,{className:"animate-spin",size:14}):o.jsx(dA,{size:14}),"Minta Saran Perbaikan AI"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[o.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map((C,k)=>{const j=n.find(q=>q.questionId===C.id),M=j==null?void 0:j.isCorrect,z=encodeURIComponent(`Pembahasan Soal ${a} ${C.metadata.subtest||C.metadata.topic}`);return o.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",k+1]}),M?o.jsx(ss,{size:16,className:"text-emerald-500"}):o.jsx(ic,{size:16,className:"text-rose-500"})]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2 mb-2",children:C.content}),o.jsxs("div",{className:"flex justify-between items-center",children:[!M&&C.type==="multiple_choice"&&o.jsxs("p",{className:"text-xs text-rose-500",children:["Jawaban: ",(j==null?void 0:j.selectedAnswer)||"-"," (Kunci: ",C.correctAnswer,")"]}),o.jsxs("a",{href:`https://www.youtube.com/results?search_query=${z}`,target:"_blank",rel:"noreferrer",className:"ml-auto text-[10px] flex items-center gap-1 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 px-2 py-1 rounded-full font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition",children:[o.jsx(px,{size:12})," Tonton Pembahasan"]})]})]},k)})})]}),o.jsxs("div",{className:"flex gap-4 w-full",children:[o.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),o.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},NE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},tf=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,vA=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,_h=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,_A=n=>n.category==="BUTAWRNA",Y7=n=>{switch(n){case"UTBK":return{icon:ac,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Of,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:xs,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Ps,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Io,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:Bf,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:_u,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:Uf,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:Ei,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},Gi=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},AE=(n,e)=>{const t=e>0?n/e*100:0;return Gi(t,"PERCENT").color},kE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},TA=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,J7=({history:n,onBack:e,onReview:t,username:s,onExport:a,onImport:l,onDelete:u})=>{const[h,p]=G.useState("ALL"),[f,b]=G.useState(null),_=G.useRef(null),T=n.filter(M=>h==="ALL"||M.category===h),E=T.length,I=E>0?Math.round(T.reduce((M,z)=>M+z.score,0)/E):0,C=E>0?Math.max(...T.map(M=>M.score)):0,k=(M,z)=>{M.stopPropagation(),te.play("click"),b(z)},j=()=>{f&&(u(f),b(null))};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[f&&o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:o.jsx(Ro,{size:24})}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),o.jsxs("div",{className:"flex gap-3 w-full",children:[o.jsx("button",{onClick:()=>b(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),o.jsx("button",{onClick:j,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(ft,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),o.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(yA,{size:12})," ",s]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[o.jsx(cA,{size:14})," Backup"]}),o.jsxs("button",{onClick:()=>{var M;return(M=_.current)==null?void 0:M.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[o.jsx(fx,{size:14})," Restore"]}),o.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:M=>{var z;(z=M.target.files)!=null&&z[0]&&l(M.target.files[0]),_.current&&(_.current.value="")}})]})]}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[o.jsx("button",{onClick:()=>p("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),rp.map(M=>o.jsx("button",{onClick:()=>p(M.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h===M.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:M.name},M.id))]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(s9,{size:14})," Total Tes"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:E})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(T7,{size:14})," Avg Skor"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:I})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(lA,{size:14})," Tertinggi"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:C})]})]}),o.jsx("div",{className:"space-y-4",children:T.length===0?o.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[o.jsx(Pu,{size:48,className:"mx-auto mb-4 opacity-20"}),o.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(M=>{const z=Y7(M.category),q=z.icon,X=M.questions?M.questions.length:0,$=M.answers?M.answers.length:0,D=M.answers?M.answers.filter(de=>de.isCorrect).length:0,N=$-D,R=M.answers?M.answers.reduce((de,Ee)=>de+(Ee.timeTakenSeconds||0),0):0,L=kE(R),O=tf(M),B=vA(M),U=_h(M),Te=_A(M);let Me=M.category;M.category==="TPA"?Me="Seleksi Lanjutan I":M.category==="PSIKOTEST"&&tf(M)?Me="Tes Koran / Pauli":M.category==="PSIKOTEST"&&_h(M)?Me="Psikotes (IQ & Logika)":M.category==="KECERMATAN"?Me="Tes Kecermatan":Te&&(Me="Tes Buta Warna & Visual"),M.packageTitle&&(Me=M.packageTitle);let J=M.score.toString(),le="SKOR",ye={text:"-",color:"text-slate-500"};if(B){const de=M.details;J=de.accuracy+"%",le="AKURASI",ye=Gi(de.accuracy,"PERCENT")}else if(O){const de=M.details;J=de.accuracy+"%",le="AKURASI",ye=Gi(de.accuracy,"PERCENT")}else if(U){const de=M.details.iqScore||M.score;J=de.toString(),le="IQ SCORE",ye=Gi(de,"IQ")}else if(Te){const de=M.details;de.type==="Ishihara Simulation"?(J=de.passed?"NORMAL":"DEFECT",le="STATUS",ye={text:de.diagnosis,color:de.passed?"text-emerald-500":"text-rose-500"}):(J=M.score.toString(),le="SKOR",ye=Gi(M.score,"PERCENT"))}else{const de=M.maxScore>0?M.score/M.maxScore*100:0;ye=Gi(de,"PERCENT")}const Ue=ye.color;let Z=D,H=N,Q=0,he=0,se={val:0,index:0},ue=[];if(B){const de=M.details;Z=de.totalCorrect,H=de.totalWrong,Q=de.averageSpeed,he=de.stability,ue=de.sectionData.map(Ee=>Ee.correct)}else if(O){const de=M.details;Z=de.totalCorrect,H=de.totalWrong,Q=de.speedPerMinute,he=de.consistencyScore,ue=de.intervalData}if(ue&&ue.length>0){const de=Math.max(...ue),Ee=ue.indexOf(de);se={val:de,index:Ee+1}}return o.jsxs("div",{onClick:()=>t(M),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[o.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[M.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),M.details&&M.details.passed!==void 0&&o.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${M.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:M.details.passed?"LULUS":"TIDAK LULUS"})]}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${z.bg} ${z.color} border ${z.border}`,children:o.jsx(q,{size:24})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:Me}),M.packageTitle&&M.packageTitle!==Me&&o.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[o.jsx(mA,{size:10})," ",M.packageTitle]}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(_8,{size:12})," ",new Date(M.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),M.skdStream&&o.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:M.skdStream}),B&&M.details.mode&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:TA(M.details.mode)}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(Ar,{size:10})," ",L]})]}),Te&&M.details.type&&o.jsx("span",{className:"bg-pink-100 dark:bg-pink-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-pink-700 dark:text-pink-400 uppercase",children:M.details.type.replace(" Simulation","").replace("Discrimination","")}),O&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(Ar,{size:10})," ",L]})]}),_h(M)&&o.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("div",{className:`text-xl sm:text-2xl font-black ${Ue}`,children:J}),o.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:le})]})]}),o.jsxs("div",{className:"mt-3",children:[B||O?o.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),o.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:Z+H})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),o.jsxs("span",{className:"font-bold",children:[o.jsx("span",{className:"text-emerald-500",children:Z})," / ",o.jsx("span",{className:"text-rose-500",children:H})]})]}),o.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),o.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:Q})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),o.jsx("span",{className:"font-black text-amber-500",children:he})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),o.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${se.val} at Interval ${se.index}`,children:[se.val,o.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",se.index]})]})]}),o.jsxs("div",{className:"flex flex-col text-center",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),o.jsx("span",{className:`font-black text-[10px] leading-tight ${ye.color}`,children:ye.text})]})]}):o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[$," ",o.jsxs("span",{className:"text-slate-400",children:["/ ",X]})]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),o.jsxs("span",{className:"font-bold text-emerald-600",children:[D," ",o.jsx("span",{className:"text-slate-400",children:"/"})," ",o.jsx("span",{className:"text-rose-500",children:N})]})]}),Te&&M.details.breakdown&&o.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Analisis"}),o.jsx("span",{className:"font-bold text-[10px] text-slate-700 dark:text-slate-200 uppercase",children:M.details.diagnosis})]}),!Te&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:kE(R)})]}),M.category==="SKD"&&M.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),o.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[o.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",M.details.twk]}),o.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",M.details.tiu]}),o.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",M.details.tkp]})]})]}),M.category==="UTBK"&&M.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:M.details.average})]})]}),(O||B)&&ue.length>0&&o.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:ue.map((de,Ee)=>{const ht=Math.max(...ue,1),Xe=de/ht*100;return o.jsx("div",{className:`flex-1 rounded-t-sm ${Ee+1===se.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${Xe}%`}},Ee)})})]})]})]}),o.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:de=>k(de,M.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:o.jsx(Ro,{size:14})}),o.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:o.jsx(vr,{size:14})})]})]},M.id)})})]})]})},Q7=({item:n,onBack:e})=>{if(tf(n)||vA(n)){const t=tf(n),s=n.details;let a=[],l=0,u=0,h=0,p=0,f=0,b="",_={text:"-",color:"text-slate-500"};if(t){const I=s;a=I.intervalData||[],l=I.totalCorrect,u=I.totalWrong,h=I.speedPerMinute,p=I.accuracy,f=I.consistencyScore,b="PAULI / KORAN",_=Gi(I.accuracy,"PERCENT")}else{const I=s;a=I.sectionData.map(C=>C.correct),l=I.totalCorrect,u=I.totalWrong,h=I.averageSpeed,p=I.accuracy,f=I.stability,b=TA(I.mode),_=Gi(I.accuracy,"PERCENT")}let T=0,E=0;return a.length>0&&(T=Math.max(...a),E=a.indexOf(T)+1),o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(ft,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:o.jsx(Kn,{size:32})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",b]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",o.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:l}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),o.jsx("div",{className:"text-3xl font-black text-rose-500",children:u}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:h}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),o.jsxs("div",{className:`text-3xl font-black ${Gi(p,"PERCENT").color}`,children:[p,"%"]}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:f}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),o.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",E]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),o.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:a.map((I,C)=>{const k=Math.max(...a,10),j=I/k*100,M=I===T;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[o.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${M?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${j}%`}}),o.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:C+1}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",C+1,": ",I]})]},C)})}),o.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",o.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}if(_A(n)){const t=n.details,s=t.type,a=t.passed,l=n.score;return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsxs("button",{onClick:e,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600",children:[o.jsx(ft,{size:16,className:"mr-1"})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${a?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:a?o.jsx(ss,{size:40}):o.jsx(Kn,{size:40})}),o.jsxs("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:[s," Result"]}),o.jsxs("div",{className:`text-4xl font-black mb-2 ${a?"text-emerald-500":"text-rose-500"}`,children:[l," / 100"]}),o.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-300 mb-8",children:t.diagnosis}),s==="Ishihara Simulation"&&t.breakdown&&o.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl text-left",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Red-Green Errors"}),o.jsx("div",{className:"text-2xl font-bold text-rose-500",children:t.breakdown.TOTAL_RG}),o.jsx("p",{className:"text-xs text-slate-500",children:"Protan/Deutan plates missed"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Blue-Yellow Errors"}),o.jsx("div",{className:"text-2xl font-bold text-indigo-500",children:t.breakdown.TOTAL_BY}),o.jsx("p",{className:"text-xs text-slate-500",children:"Tritan plates missed"})]})]}),s!=="Ishihara Simulation"&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl text-sm text-slate-600 dark:text-slate-300 text-left",children:[s==="Hue Discrimination"&&o.jsx("p",{children:"Tes ini mengukur kemampuan Anda membedakan gradasi warna halus. Skor tinggi menunjukkan kemampuan diskriminasi warna yang sangat baik."}),s==="Depth Perception"&&o.jsx("p",{children:"Tes ini mengukur kemampuan Anda memperkirakan jarak objek relatif dalam ruang 3D simulasi. Skor tinggi menunjukkan persepsi kedalaman yang akurat."})]})]})]})})}return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(ft,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),o.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),o.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),o.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),o.jsx("div",{className:`text-3xl font-black ${AE(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),o.jsx("div",{className:`text-3xl font-black ${n.details.tpaScore>=67?"text-emerald-600":"text-rose-500"}`,children:n.details.tpaScore}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 67"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),o.jsx("div",{className:`text-3xl font-black ${n.details.tbiScore>=30?"text-emerald-600":"text-rose-500"}`,children:n.details.tbiScore}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 30"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),o.jsx("div",{className:`text-xl font-black ${n.details.passed?"text-emerald-600":"text-rose-500"}`,children:n.details.passed?"LULUS":"GAGAL"})]})]}),n.category==="UTBK"&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),o.jsxs("div",{className:`text-xl font-black ${AE(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>o.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),o.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),_h(n)&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),o.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${Gi(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),o.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),o.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Ps,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),o.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var f;const a=n.answers.find(b=>b.questionId===t.id),l=a==null?void 0:a.isCorrect,u=(a==null?void 0:a.scoreEarned)||0,h=encodeURIComponent(`Pembahasan Soal ${n.category} ${t.metadata.subtest||t.metadata.topic}`);let p="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return u>0?t.tkpPoints?u===5?p="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":p="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":p="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":p="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),o.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(f=t.metadata)==null?void 0:f.subtest})]}),o.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${p}`,children:[u>0?o.jsx(ss,{size:12}):o.jsx(ic,{size:12}),u," Poin"]})]}),o.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:o.jsx(NE,{text:t.content})}),o.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[o.jsxs("div",{className:`p-3 rounded-lg border ${l?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[o.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(a==null?void 0:a.selectedAnswer)||"Tidak dijawab"]}),!l&&!t.tkpPoints&&o.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[o.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&o.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[o.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),o.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((b,_)=>_.points-b.points).map((b,_)=>o.jsxs("li",{className:b.option===(a==null?void 0:a.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[b.points," Poin: ",b.option]},_))})]})]}),o.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block",children:"Pembahasan:"}),o.jsxs("a",{href:`https://www.youtube.com/results?search_query=${h}`,target:"_blank",rel:"noreferrer",className:"text-[10px] flex items-center gap-1 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 px-2 py-1 rounded-full font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition",children:[o.jsx(px,{size:12})," Video"]})]}),o.jsx(NE,{text:t.explanation})]})]},s)})})]})]})})},np=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},W7=({timeLeft:n,onFinish:e})=>(G.useEffect(()=>{n<=0&&e()},[n,e]),o.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[o.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:o.jsx(Wp,{size:48,className:"text-white"})}),o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),o.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),o.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),o.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),X7=({isOpen:n,onCancel:e,onConfirm:t,stats:s})=>{if(!n)return null;const a=s.unanswered>0||s.doubtful>0;return o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${a?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`,children:a?o.jsx(zf,{size:32}):o.jsx(ss,{size:32})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:a?"Yakin Selesai?":"Selesaikan Ujian?"}),a?o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left space-y-2 border border-slate-200 dark:border-slate-600",children:[o.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Periksa kembali jawaban Anda:"}),s.unanswered>0&&o.jsxs("div",{className:"flex items-center justify-between text-rose-600 dark:text-rose-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(ic,{size:14})," Belum Diisi"]}),o.jsxs("span",{className:"font-bold",children:[s.unanswered," Soal"]})]}),s.doubtful>0&&o.jsxs("div",{className:"flex items-center justify-between text-amber-600 dark:text-amber-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(X8,{size:14})," Ragu-ragu"]}),o.jsxs("span",{className:"font-bold",children:[s.doubtful," Soal"]})]})]}):o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Semua ",s.total," soal telah dijawab. Waktu akan dihentikan dan skor akan dihitung."]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition",children:"Ya, Selesai"}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Kembali Mengerjakan"})]})]})})},Z7=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},eB=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:a,isUtbkSimulation:l,category:u,showToast:h,initialState:p,userId:f,skdStream:b,tpaStream:_,packageTitle:T,onSaveAndExit:E})=>{var Be,Je,Qe;const[I,C]=G.useState((p==null?void 0:p.utbkSubtestIndex)||0),[k,j]=G.useState(!1),[M,z]=G.useState(0),[q,X]=G.useState((p==null?void 0:p.currentIndex)||0),[$,D]=G.useState((p==null?void 0:p.answerMap)||{}),[N,R]=G.useState(!1),[L,O]=G.useState(!1),[B,U]=G.useState(!1),[Te,Me]=G.useState(!1),[J,le]=G.useState({unanswered:0,doubtful:0,total:0}),ye=G.useRef(Date.now()),Ue=()=>p!=null&&p.timeLeft?p.timeLeft:l&&va[0]?va[0].duration*60:a?6e3:n===$e.SIMULATION?u==="PSIKOTEST"?2400:u==="TPA"?6e3:3600:0,[Z,H]=G.useState(Ue);G.useEffect(()=>{if(!f)return;let Le=b;typeof b=="object"&&b!==null&&(Le=null);let we=_;typeof _=="object"&&_!==null&&(we=null);const Oe={uid:f,mode:n,category:u,questions:e,answerMap:$,timeLeft:Z,currentIndex:q,utbkSubtestIndex:I,drillContent:t,skdStream:Le,tpaStream:we,packageTitle:T,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(Oe,Z7()))}catch(He){He instanceof TypeError&&He.message.includes("circular")||console.warn("Failed to save session state",He)}},[Z,$,q,I,f,b,_]);const Q=()=>{localStorage.removeItem("fajmuls_active_session")},he=G.useMemo(()=>{if(l){const Le=va[I].name;return e.filter(we=>{var Oe,He;return(He=(Oe=we.metadata)==null?void 0:Oe.subtest)==null?void 0:He.includes(Le)})}return e},[e,l,I]);G.useEffect(()=>{let Le=null;return k&&M>0?Le=setInterval(()=>z(we=>we-1),1e3):k&&M===0?j(!1):Z>0&&!N&&n===$e.SIMULATION?Le=setInterval(()=>{H(we=>(we<=11&&we>1&&te.play("tick"),we-1))},1e3):Z===0&&n===$e.SIMULATION&&(l?se():Ee()),()=>clearInterval(Le)},[Z,N,k,M,n]);const se=()=>{if(l)if(I<va.length-1){te.play("success");const Le=I+1;C(Le);const we=va[Le].duration;H(we*60),X(0),z(30),j(!0)}else Ee();else Ee()},ue=()=>{te.play("click");const Le=l&&I<va.length-1?he:e;let we=0,Oe=0;Le.forEach(He=>{const xn=$[He.id];!xn||!xn.selectedAnswer?we++:xn.isDoubtful&&Oe++}),le({unanswered:we,doubtful:Oe,total:Le.length}),Me(!0)},de=()=>{Me(!1),l&&I<va.length-1?se():Ee()},Ee=async()=>{if(f&&!f.startsWith("guest-"))try{await MV(f)}catch{}Q(),te.play("finish"),s(Object.values($))},ht=()=>{s(Object.values($),void 0,!0)},Xe=async()=>{if(!f||f.startsWith("guest-")){h("Fitur simpan ke cloud hanya untuk pengguna login.","error");return}U(!0);let Le=b;typeof b=="object"&&b!==null&&(Le=null);let we=_;typeof _=="object"&&_!==null&&(we=null);const Oe={uid:f,mode:n,category:u,questions:e,answerMap:$,timeLeft:Z,currentIndex:q,utbkSubtestIndex:I,drillContent:t,skdStream:Le,tpaStream:we,packageTitle:T,timestamp:Date.now()};try{await IV(f,Oe),Q(),h("Progres tersimpan di cloud! Anda bisa melanjutkannya nanti.","success"),E?E():s(Object.values($),void 0,!0)}catch(He){console.error(He),h("Gagal menyimpan ke cloud. Cek koneksi internet.","error")}finally{U(!1)}},wt=async Le=>{var js,Un,_s,Ls,Zi;const we=he[q];if(!we)return;te.play("click");let Oe=0,He=!1;if(u==="SKD")if(we.tkpPoints&&we.tkpPoints.length>0){const Zt=we.tkpPoints.find(Us=>Us.option===Le);Oe=Zt?Zt.points:0,He=Oe===5}else He=Le===we.correctAnswer,Oe=He?5:0;else if(u==="UTBK"){He=Le===we.correctAnswer;const Zt=((js=we.metadata)==null?void 0:js.difficulty)||"Medium";Oe=He?Zt==="HOTS"||Zt==="Hard"?3:Zt==="Medium"?2:1:0}else if(u==="TPA"){const Zt=((_s=(Un=we.metadata)==null?void 0:Un.subtest)==null?void 0:_s.includes("TBI"))||((Zi=(Ls=we.metadata)==null?void 0:Ls.subtest)==null?void 0:Zi.includes("Inggris"));if(_==="PSIKOTEST_KEDINASAN")if(we.tkpPoints&&we.tkpPoints.length>0){const Us=we.tkpPoints.find(Jn=>Jn.option===Le);Oe=Us?Us.points:0,He=Oe===5}else He=Le===we.correctAnswer,Oe=He?5:0;else He=Le===we.correctAnswer,Zt?Oe=He?5:0:Oe=He?4:-1}else He=Le===we.correctAnswer,Oe=He?10:0;let xn="";if(we.type!=="multiple_choice"&&u==="GENERAL")try{const Zt=await fP(we.content,we.correctAnswer,Le);Oe=Zt.score,He=Zt.isCorrect,xn=Zt.feedback}catch{console.error("Grading failed")}const Bt=$[we.id],Ct=(Date.now()-ye.current)/1e3,cn={questionId:we.id,selectedAnswer:Le,isCorrect:He,scoreEarned:Oe,timeTakenSeconds:((Bt==null?void 0:Bt.timeTakenSeconds)||0)+Ct,isOverthinking:!1,isGuessing:Ct<5,aiEvaluation:xn,isDoubtful:(Bt==null?void 0:Bt.isDoubtful)||!1};D(Zt=>({...Zt,[we.id]:cn})),ye.current=Date.now()},Dt=()=>{const Le=he[q];D(we=>{const Oe=we[Le.id];return Oe?{...we,[Le.id]:{...Oe,isDoubtful:!Oe.isDoubtful}}:{...we,[Le.id]:{questionId:Le.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},nt=Le=>{const we=Math.floor(Le/3600),Oe=Math.floor(Le%3600/60),He=Math.floor(Le%60);return`${we>0?we+":":""}${Oe.toString().padStart(2,"0")}:${He.toString().padStart(2,"0")}`};if(k)return o.jsx(W7,{timeLeft:M,onFinish:()=>{j(!1)}});if(he.length===0)return o.jsxs("div",{className:"p-10 text-center",children:[o.jsx(Yn,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const et=he[q],ce=$[et.id];return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[o.jsx(X7,{isOpen:Te,onCancel:()=>Me(!1),onConfirm:de,stats:J}),N&&o.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[o.jsx(Gf,{size:48,className:"mx-auto mb-4 text-indigo-600"}),o.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),o.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[o.jsxs("button",{onClick:()=>R(!1),className:"w-full px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[o.jsx(Lo,{size:20})," Lanjutkan"]}),!(f!=null&&f.startsWith("guest-"))&&o.jsxs("button",{onClick:Xe,disabled:B,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[B?o.jsx(Yn,{className:"animate-spin"}):o.jsx(L8,{size:20}),"Simpan & Lanjut Nanti"]}),o.jsx("button",{onClick:ht,className:"w-full px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan Lokal)"})]})]})}),o.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[o.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",q+1]}),o.jsxs("div",{className:"flex items-center gap-2",children:[n===$e.SIMULATION&&o.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:nt(Z)}),o.jsx("button",{onClick:()=>O(!L),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:o.jsx(Ma,{size:20})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:o.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===$e.DRILL&&t&&o.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[o.jsx(Ps,{size:16})," ",t.topic]}),o.jsx("p",{children:t.summary})]}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:l?va[I].name:((Be=et.metadata)==null?void 0:Be.subtest)||"General"}),((Je=et.metadata)==null?void 0:Je.difficulty)==="HOTS"&&o.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[o.jsx(Ps,{size:12})," HOTS"]})]}),o.jsx("div",{className:"prose prose-xl md:prose-2xl dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100 leading-relaxed",children:o.jsx(np,{text:et.content})}),et.type==="multiple_choice"?o.jsx("div",{className:"space-y-3",children:(Qe=et.options)==null?void 0:Qe.map((Le,we)=>{var Ct;const Oe=String.fromCharCode(65+we),He=(ce==null?void 0:ce.selectedAnswer)===Le;let xn="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",Bt="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return He&&(xn="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",Bt="bg-indigo-600 text-white"),n!==$e.SIMULATION&&ce&&((et.tkpPoints?((Ct=et.tkpPoints.find(js=>js.option===Le))==null?void 0:Ct.points)===5:Le===et.correctAnswer)?(xn="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",Bt="bg-emerald-500 text-white"):He&&(xn="border-rose-500 bg-rose-50 dark:bg-rose-900/20",Bt="bg-rose-500 text-white")),o.jsxs("button",{onClick:()=>wt(Le),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${xn}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${Bt}`,children:Oe}),o.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-lg md:text-xl font-medium",children:o.jsx(np,{text:Le})})]},we)})}):o.jsxs("div",{children:[" ",o.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:(ce==null?void 0:ce.selectedAnswer)||"",onChange:Le=>wt(Le.target.value)})," "]})]}),n!==$e.SIMULATION&&ce&&o.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[o.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[o.jsx(dA,{size:20})," Pembahasan"]}),o.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:o.jsx(np,{text:et.explanation})})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[o.jsxs("button",{onClick:()=>{X(Le=>Math.max(0,Le-1))},disabled:q===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[o.jsx(ft,{size:20})," ",o.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[p&&o.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[o.jsx(hx,{size:12})," Disimpan Otomatis"]}),o.jsxs("button",{onClick:Dt,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${ce!=null&&ce.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[o.jsx("input",{type:"checkbox",checked:(ce==null?void 0:ce.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),o.jsx("span",{children:"Ragu-ragu"})]})]}),o.jsxs("button",{onClick:()=>{te.play("click"),q<he.length-1?X(Le=>Le+1):ue()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[o.jsx("span",{className:"hidden sm:inline",children:q===he.length-1?l&&I<va.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),o.jsx(vr,{size:20})]})]})})]}),L&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>O(!1)})]})},oh=10,sp=60,tB=500,CE=50,nB=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),sB=(n,e,t,s,a)=>{let l=0;return n>=400?l+=40:n>=300?l+=30:n>=200?l+=20:l+=10,t>=99?l+=20:t>=97?l+=15:t>=95?l+=10:l+=5,s<3?l+=20:s<6?l+=15:s<9?l+=10:l+=5,a==="NAIK"?l+=20:a==="STABIL"?l+=15:l+=5,l>=90?"Sangat Disarankan (Konsisten & Tinggi)":l>=75?"Disarankan (Baik)":l>=60?"Cukup (Perlu Latihan)":a==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},iB=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),a=t.reduce((h,p)=>h+p,0)/(t.length||1),u=(s.reduce((h,p)=>h+p,0)/(s.length||1)-a)/a*100;return u>5?"NAIK":u<-10?"TURUN":"STABIL"},aB=({onBack:n,onComplete:e})=>{const[t,s]=G.useState("SETUP"),[a,l]=G.useState([]),[u,h]=G.useState(0),[p,f]=G.useState(0),[b,_]=G.useState(0),[T,E]=G.useState(0),[I,C]=G.useState([]),[k,j]=G.useState(0),[M,z]=G.useState(!1),[q,X]=G.useState(oh*60),[$,D]=G.useState(sp),N=()=>{const Z=nB(tB,CE);l(Z),h(0),f(0),_(0),E(0),C([]),j(0),X(oh*60),D(sp),s("PLAYING"),te.play("click")},R=G.useCallback(Z=>{if(t!=="PLAYING")return;const H=a[u][p],Q=a[u][p+1];if(Q===void 0){h(de=>de+1),f(0);return}const se=(H+Q)%10;Z===se?(_(de=>de+1),j(de=>de+1)):(E(de=>de+1),te.play("error")),p<CE-2?f(de=>de+1):(h(de=>de+1),f(0))},[a,u,p,t]);G.useEffect(()=>{const Z=H=>{t==="PLAYING"&&H.key>="0"&&H.key<="9"&&R(parseInt(H.key))};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[t,R]),G.useEffect(()=>{if(t!=="PLAYING")return;const Z=setInterval(()=>{X(H=>H<=1?(B(),0):H-1),D(H=>(H<=6&&H>1&&te.play("tick"),H<=1?(te.play("success"),O(),sp):H-1))},1e3);return()=>clearInterval(Z)},[t,k]);const L=G.useRef(0);G.useEffect(()=>{L.current=k},[k]);const O=()=>{const Z=L.current;C(H=>[...H,Z]),j(0),z(!0),setTimeout(()=>z(!1),2e3)},B=(Z=!1)=>{const H=L.current;H>0&&C(Q=>[...Q,H]),s("FINISHED"),Z||te.play("finish")},U=()=>{const Z=b+T,H=(oh*60-q)/60,Q=H<.1?.1:H,he=Q>0?Math.round(b/Q):0,se=Z>0?b/Z*100:0;let ue=0;if(I.length>0){const ht=I.reduce((wt,Dt)=>wt+Dt,0)/I.length,Xe=I.reduce((wt,Dt)=>wt+Math.pow(Dt-ht,2),0)/I.length;ue=Math.sqrt(Xe)}const de=iB(I),Ee=sB(b,he,se,ue,de);return{totalCorrect:b,totalWrong:T,totalAttempts:Z,totalColumns:u,speedPerMinute:he,consistencyScore:parseFloat(ue.toFixed(2)),accuracy:Math.round(se),intervalData:I,interpretation:{verdict:Ee,speedDesc:he>50?"Sangat Cepat":he>35?"Cepat":"Sedang",accDesc:se>98?"Sangat Teliti":se>92?"Teliti":"Kurang Teliti",stabDesc:de==="TURUN"?"Menurun (Lelah)":ue<4?"Stabil":"Fluktuatif",trend:de}}},Te=Z=>{const H=Math.floor(Z/60),Q=Z%60;return`${H}:${Q.toString().padStart(2,"0")}`},Me=()=>{const Z=U(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:Z.totalCorrect,maxScore:0,details:Z,questions:[],answers:[],isAborted:!0};e(H)};if(t==="SETUP")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[o.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[o.jsx(Kn,{size:64,className:"mx-auto mb-4 relative z-10"}),o.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),o.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(Ar,{size:18,className:"text-indigo-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Durasi:"})," ",oh," Menit"]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(Kn,{size:18,className:"text-emerald-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(So,{size:18,className:"text-amber-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),o.jsxs("button",{onClick:N,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[o.jsx(Lo,{size:24,fill:"currentColor"})," Mulai Tes"]}),o.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const Z=U(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:Z.totalCorrect,maxScore:0,details:Z,questions:[],answers:[]};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),o.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:Z.interpretation.verdict})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(Kn,{size:14})," Prestasi (Total)"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:Z.totalCorrect}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(Ar,{size:14})," Tempo"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:Z.speedPerMinute}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(ss,{size:14})," Ketelitian"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:Z.totalWrong}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",Z.interpretation.accDesc,")"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(So,{size:14})," Stabilitas"]}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:Z.consistencyScore}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",Z.interpretation.trend,")"]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[o.jsx(So,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),o.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:Z.intervalData.map((Q,he)=>{const se=Math.max(...Z.intervalData,1),ue=Q/se*100;return o.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${ue}%`},children:[o.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:he+1}),o.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:Q})]},he)})}),o.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),o.jsxs("button",{onClick:()=>e(H),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsx(hx,{size:20})," Simpan & Keluar"]})]})]})})}const J=a[u]||[],le=J[p],ye=J[p+1],Ue=[1,2,3,4,5,6,7,8,9,0];return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),o.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:Te(q)})]}),o.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),o.jsx("div",{className:"text-xl font-bold text-emerald-600",children:b})]})]}),o.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(Gf,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),M&&o.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:o.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:p>0?J[p-1]:"-"}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:le}),o.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:ye!==void 0?ye:"-"})]}),o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:J[p+2]!==void 0?J[p+2]:"-"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[o.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Ue.map(Z=>o.jsx("button",{onClick:()=>R(Z),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:Z},Z))}),o.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),o.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:Me,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},ip=10,IE=60,RE=["A","B","C","D","E"],os=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ME=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},DE=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...os].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((a,l)=>l!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},PE=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>os[Math.floor(Math.random()*os.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const a=Math.floor(Math.random()*n);let l=os[Math.floor(Math.random()*os.length)];for(;l===e[a];)l=os[Math.floor(Math.random()*os.length)];s[a]=l}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=os.find(u=>u!==s[0])||"X"));return{left:e,right:s,isSame:t}},jE=()=>{const e=[...os].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},LE=()=>{const n=os[Math.floor(Math.random()*os.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=os[Math.floor(Math.random()*os.length)];for(;s===n;)s=os[Math.floor(Math.random()*os.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},rB=({initialMode:n,onBack:e,onComplete:t})=>{var he;const[s,a]=G.useState(n||"ANGKA"),[l,u]=G.useState(1),[h,p]=G.useState(IE),[f,b]=G.useState(!1),[_,T]=G.useState("PLAYING"),[E,I]=G.useState(null),[C,k]=G.useState(null),[j,M]=G.useState(null),[z,q]=G.useState(null),[X,$]=G.useState([]),[D,N]=G.useState([]),[R,L]=G.useState(0),[O,B]=G.useState(0),[U,Te]=G.useState(null),Me=G.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(E){const se=Math.floor(Math.random()*5),ue=E.reference.filter((de,Ee)=>Ee!==se).sort(()=>.5-Math.random());I({...E,question:ue,answer:se})}else{const se=DE(s);I(se)}else if(s==="SAMA_BEDA")k(PE());else if(s==="MATCHING")if(!j)M(jE());else{const se=Math.floor(Math.random()*5);M({...j,target:j.map[se],answer:se})}else s==="GROUPING"&&(q(LE()),$([]))},[s,E,j]),J=G.useCallback(()=>{I(null),M(null),k(null),q(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?I(DE(s)):s==="SAMA_BEDA"?k(PE()):s==="MATCHING"?M(jE()):s==="GROUPING"&&(q(LE()),$([])),p(IE),L(0),B(0)},[s]);G.useEffect(()=>{_==="PLAYING"&&J()},[l,s,_]);const le=se=>{if(f)return;let ue=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?ue=se===(E==null?void 0:E.answer):s==="SAMA_BEDA"?ue=se===(C==null?void 0:C.isSame):s==="MATCHING"&&(ue=se===(j==null?void 0:j.answer)),ue?(L(de=>de+1),Te("CORRECT")):(B(de=>de+1),Te("WRONG"),te.play("error")),setTimeout(()=>Te(null),150),Me()},ye=()=>{if(!z)return;let se=0,ue=0;X.forEach(Ee=>{z.grid[Ee]===z.target?se++:ue++});const de=z.totalCorrect-se;L(Ee=>Ee+se),B(Ee=>Ee+ue+de),ue===0&&de===0?(Te("CORRECT"),te.play("success")):(Te("WRONG"),te.play("error")),setTimeout(()=>Te(null),200),Me()},Ue=se=>{te.play("click"),$(ue=>ue.includes(se)?ue.filter(de=>de!==se):[...ue,se])};G.useEffect(()=>{if(f||_==="FINISHED")return;const se=setInterval(()=>{p(ue=>(ue<=6&&ue>1&&te.play("tick"),ue<=1?(Z(),0):ue-1))},1e3);return()=>clearInterval(se)},[f,l,_,R,O]);const Z=()=>{N(se=>{if(se.find(Ee=>Ee.section===l))return se;const ue={section:l,correct:R,wrong:O},de=[...se,ue];return l>=ip?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{u(Ee=>Ee+1),te.play("success")},0),de})},H=()=>{const se=D.length,ue=D.reduce((Je,Qe)=>Je+Qe.correct,0),de=D.reduce((Je,Qe)=>Je+Qe.wrong,0),Ee=se>0?ue/se:0,ht=ue+de,Xe=ht>0?ue/ht*100:0,wt=Ee,Dt=D.reduce((Je,Qe)=>Je+Math.pow(Qe.correct-wt,2),0)/(se||1),nt=Math.sqrt(Dt),et=ME(Xe,Ee,nt),ce={mode:s,totalCorrect:ue,totalWrong:de,averageSpeed:parseFloat(Ee.toFixed(1)),accuracy:parseFloat(Xe.toFixed(1)),sectionData:D,stability:parseFloat(nt.toFixed(2)),verdict:et},Be={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Xe),maxScore:100,details:ce,questions:[],answers:[]};te.play("finish"),t(Be)},Q=()=>{const se={section:l,correct:R,wrong:O},ue=[...D];ue.find(Be=>Be.section===l)||ue.push(se);const de=ue.reduce((Be,Je)=>Be+Je.correct,0),Ee=ue.reduce((Be,Je)=>Be+Je.wrong,0),ht=de/(ue.length||1),Xe=de+Ee,wt=Xe>0?de/Xe*100:0,et={mode:s,totalCorrect:de,totalWrong:Ee,averageSpeed:parseFloat(ht.toFixed(1)),accuracy:parseFloat(wt.toFixed(1)),sectionData:ue,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},ce={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(wt),maxScore:100,details:et,questions:[],answers:[],isAborted:!0};t(ce)};if(_==="FINISHED"){const se=D.reduce((nt,et)=>nt+et.correct,0),ue=D.reduce((nt,et)=>nt+et.wrong,0),de=se/D.length,Ee=se/(se+ue)*100,ht=de,Xe=D.reduce((nt,et)=>nt+Math.pow(et.correct-ht,2),0)/D.length,wt=Math.sqrt(Xe),Dt=ME(Ee,de,wt);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:Dt})}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:de.toFixed(1)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),o.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[Ee.toFixed(1),"%"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),o.jsx("div",{className:"text-2xl font-black text-amber-500",children:wt.toFixed(2)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),o.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:ip}).map((nt,et)=>{const ce=D.find(Le=>Le.section===et+1),Be=ce?ce.correct:0,Je=Math.max(...D.map(Le=>Le.correct),10),Qe=Be/Je*100;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[o.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${Qe}%`},children:o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",et+1,": ",Be]})}),o.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:et+1})]},et)})})]}),o.jsxs("button",{onClick:H,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[o.jsx(hx,{size:20})," Simpan Hasil"]})]})})}return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),o.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[l,"/",ip]})]}),o.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),o.jsxs("span",{className:`text-lg font-mono font-black ${h<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[h,"s"]})]}),o.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),o.jsx("span",{className:"text-lg font-black text-emerald-600",children:R})]})]}),o.jsx("button",{onClick:()=>b(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(Gf,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[U&&o.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${U==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:o.jsx("div",{className:`p-4 rounded-full ${U==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:U==="CORRECT"?o.jsx(ss,{size:64}):o.jsx(Qp,{size:64})})}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[o.jsx("div",{className:"grid grid-cols-5 gap-1",children:(he=s==="MATCHING"?j==null?void 0:j.map:E==null?void 0:E.reference)==null?void 0:he.map((se,ue)=>o.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:o.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:se})},ue))}),o.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:RE.map((se,ue)=>o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:se},ue))})]}),o.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?o.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:o.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:j==null?void 0:j.target})}):o.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:E==null?void 0:E.question.map((se,ue)=>o.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:se},ue))})]})]}),s==="SAMA_BEDA"&&C&&o.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:C.left.map((se,ue)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:se},ue))})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:C.right.map((se,ue)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:se},ue))})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[o.jsxs("button",{onClick:()=>le(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(ss,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),o.jsxs("button",{onClick:()=>le(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(Qp,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),o.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&z&&o.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[o.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",o.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:z.target})]}),o.jsx("button",{onClick:ye,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),o.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:z.grid.map((se,ue)=>{const de=X.includes(ue);return o.jsx("button",{onClick:()=>Ue(ue),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${de?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:se},ue)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:RE.map((se,ue)=>o.jsx("button",{onClick:()=>le(ue),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:se})},ue))})})}),f&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),o.jsx("button",{onClick:()=>b(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:Q,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},oB={RED_GREEN:{fg:["#EA5455","#FF9F43","#E55039","#F8EFBA","#F97F51"],bg:["#2ECC71","#26C6DA","#1ABC9C","#55E6C1","#58B19F","#CAD3C8"]},BLUE_YELLOW:{fg:["#5F27CD","#341F97","#54A0FF","#2E86DE","#0ABDE3"],bg:["#FECA57","#FF9F43","#F8C291","#6AB04C","#BADC58"]},GRAYSCALE:{fg:["#2d3436","#636e72","#b2bec3"],bg:["#dfe6e9","#f5f6fa","#dcdde1"]},PROTANOPIA:{fg:["#833471","#6D214F","#B33771","#3B3B98"],bg:["#182C61","#2C3A47","#58B19F","#2C2C54"]},DEUTERANOPIA:{fg:["#D6A2E8","#82589F","#E056FD","#BE2EDD"],bg:["#95AFC0","#7ED6DF","#22A6B3","#30336B"]}},lB=()=>{const n=[];let e=1;n.push({id:e++,type:"NUMBER",palette:"RED_GREEN",target:12,difficulty:"EASY",description:"Control Plate"});for(let a=0;a<5;a++){const l=Math.floor(Math.random()*90)+10,u=Math.random();let h="RED_GREEN";u>.7?h="DEUTERANOPIA":u>.4&&(h="PROTANOPIA"),n.push({id:e++,type:"NUMBER",palette:h,target:l,difficulty:"MEDIUM",description:"Red-Green Defect Check"})}n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"MEDIUM",description:"Tritanopia Check"}),n.push({id:e++,type:"NUMBER",palette:"GRAYSCALE",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Contrast Sensitivity"}),n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Tritanopia Check"});const s=["curve_simple","snake","loop","spiral","zigzag","square","triangle","infinity"].sort(()=>.5-Math.random());for(let a=0;a<6;a++){const l=s[a%s.length],u=Math.random();let h="RED_GREEN";u>.8?h="GRAYSCALE":u>.6&&(h="BLUE_YELLOW"),n.push({id:e++,type:"PATH",palette:h,target:l,difficulty:a>3?"HARD":"MEDIUM",description:`Path Tracking (${h})`})}return n},cB=()=>o.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50 overflow-hidden",children:[[...Array(20)].map((n,e)=>o.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",backgroundColor:["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6"][Math.floor(Math.random()*5)],width:"10px",height:"10px",animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*3}s`}},e)),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"animate-bounce-slow text-6xl text-yellow-400 drop-shadow-lg",children:o.jsx(vs,{size:120,fill:"currentColor"})})})]}),uB=({config:n,onPathGenerated:e})=>{const t=G.useRef(null);return G.useEffect(()=>{const s=t.current;if(!s)return;const a=s.getContext("2d");if(!a)return;const l=document.createElement("canvas");l.width=s.width,l.height=s.height;const u=l.getContext("2d");if(!u)return;u.fillStyle="#000000",u.fillRect(0,0,s.width,s.height),u.fillStyle="#FFFFFF",u.strokeStyle="#FFFFFF";const h=[];if(n.type==="NUMBER"){u.font='bold 180px "Arial Rounded MT Bold", Arial, sans-serif',u.textAlign="center",u.textBaseline="middle";const C=(Math.random()-.5)*.2;u.save(),u.translate(s.width/2,s.height/2),u.rotate(C),u.fillText(n.target.toString(),0,15),u.restore()}else{u.lineWidth=55,u.lineCap="round",u.lineJoin="round",u.beginPath();const C=s.width,k=s.height,j=50;if(n.target==="curve_simple")u.moveTo(j,k/2),u.quadraticCurveTo(C/2,-50,C-j,k/2);else if(n.target==="snake")u.moveTo(j,k/2),u.bezierCurveTo(C/3,0,2*C/3,k,C-j,k/2);else if(n.target==="loop")u.arc(C/2,k/2,C/3,0,Math.PI*2);else if(n.target==="spiral"){const q=C/2,X=k/2;u.moveTo(q,X);for(let $=0;$<100;$++){const D=.3*$,N=2*$,R=q+N*Math.cos(D),L=X+N*Math.sin(D);if(R<j||R>C-j||L<j||L>k-j)break;u.lineTo(R,L)}}else n.target==="zigzag"?(u.moveTo(j,j),u.lineTo(C/2,k-j),u.lineTo(C-j,j)):n.target==="square"?u.rect(j,j,C-2*j,k-2*j):n.target==="triangle"?(u.moveTo(C/2,j),u.lineTo(C-j,k-j),u.lineTo(j,k-j),u.closePath()):n.target==="infinity"?(u.moveTo(j,k/2),u.bezierCurveTo(C/3,0,C/3,k,C/2,k/2),u.bezierCurveTo(2*C/3,0,2*C/3,k,C-j,k/2)):(u.moveTo(j,k-j),u.bezierCurveTo(C/2,0,C,k/2,C/2,k/2),u.bezierCurveTo(0,k/2,C/2,k,C-j,j));u.stroke();const M=u.getImageData(0,0,C,k),z=20;for(let q=0;q<k;q+=z)for(let X=0;X<C;X+=z)M.data[(q*C+X)*4]>200&&h.push({x:X,y:q});e(h)}const f=u.getImageData(0,0,s.width,s.height).data,b=oB[n.palette];a.clearRect(0,0,s.width,s.height);const _=s.width/2,T=s.height/2,E=s.width/2-2,I=3200;for(let C=0;C<I;C++){let k=Math.random()*s.width,j=Math.random()*s.height;if(Math.sqrt(Math.pow(k-_,2)+Math.pow(j-T,2))>E)continue;const z=(Math.floor(j)*s.width+Math.floor(k))*4,q=f[z]>128;let X=Math.random()*3+2;n.difficulty==="HARD"&&(X=Math.random()*2.5+1.5);let $=q?b.fg:b.bg;n.difficulty==="HARD"&&Math.random()<.08&&($=q?b.bg:b.fg);const D=$[Math.floor(Math.random()*$.length)];a.beginPath(),a.arc(k,j,X,0,Math.PI*2),a.fillStyle=D,a.fill()}},[n]),o.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-100 dark:bg-slate-800"})},dB=({isActive:n,onStroke:e,clearTrigger:t})=>{const s=G.useRef(null),[a,l]=G.useState(!1);return G.useEffect(()=>{const u=s.current;if(u){const h=u.getContext("2d");h==null||h.clearRect(0,0,u.width,u.height)}},[t]),G.useEffect(()=>{const u=s.current;if(!u||!n)return;const h=u.getContext("2d");if(!h)return;const p=T=>{const E=u.getBoundingClientRect();let I,C;return"touches"in T?(I=T.touches[0].clientX,C=T.touches[0].clientY):(I=T.clientX,C=T.clientY),{x:(I-E.left)*(u.width/E.width),y:(C-E.top)*(u.height/E.height)}},f=T=>{T.preventDefault(),l(!0);const E=p(T);h.beginPath(),h.moveTo(E.x,E.y),h.lineWidth=15,h.lineCap="round",h.lineJoin="round",h.strokeStyle="rgba(0, 0, 255, 0.7)",e(E)},b=T=>{if(!a)return;T.preventDefault();const E=p(T);h.lineTo(E.x,E.y),h.stroke(),e(E)},_=()=>{l(!1),h.closePath()};return u.addEventListener("mousedown",f),u.addEventListener("touchstart",f,{passive:!1}),window.addEventListener("mousemove",b),window.addEventListener("touchmove",b,{passive:!1}),window.addEventListener("mouseup",_),window.addEventListener("touchend",_),()=>{u.removeEventListener("mousedown",f),u.removeEventListener("touchstart",f),window.removeEventListener("mousemove",b),window.removeEventListener("touchmove",b),window.removeEventListener("mouseup",_),window.removeEventListener("touchend",_)}},[n,a,e]),o.jsx("canvas",{ref:s,width:320,height:320,className:"absolute top-0 left-0 cursor-crosshair touch-none z-10"})},hB=({onFinish:n})=>{const[e,t]=G.useState([]),[s,a]=G.useState(null),[l,u]=G.useState(!1),[h,p]=G.useState(0);G.useEffect(()=>{const T=Array.from({length:15},(I,C)=>({id:C,color:`hsl(${C*21.333333333333332}, 65%, 55%)`,correctIndex:C})),E=T.slice(1,14).sort(()=>Math.random()-.5);t([T[0],...E,T[14]])},[]);const f=_=>{if(!l){if(_===0||_===e.length-1){te.play("error");return}if(s===null)te.play("tap"),a(_);else{const T=[...e];[T[s],T[_]]=[T[_],T[s]],t(T),a(null),te.play("click")}}},b=()=>{let _=0;for(let E=0;E<e.length-1;E++){const I=Math.abs(e[E].correctIndex-e[E+1].correctIndex);I>1&&(_+=I-1)}const T=Math.max(0,100-_*3);p(T),u(!0),te.play("finish")};return l?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl",children:[o.jsx(_u,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Tes Spektrum"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:h}),o.jsx("p",{className:"text-slate-500 mb-6",children:h>=90?"Penglihatan warna sangat akurat!":h>=70?"Diskriminasi warna baik.":"Terindikasi kesulitan membedakan nuansa warna."}),o.jsx("div",{className:"flex justify-center gap-1 mb-6 h-8 rounded-lg overflow-hidden border border-slate-200",children:e.map((_,T)=>o.jsx("div",{className:"flex-1",style:{backgroundColor:_.color}},T))}),o.jsx("button",{onClick:()=>n(h),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"text-center font-bold text-lg mb-4 text-slate-800 dark:text-white flex items-center justify-center gap-2",children:[o.jsx(_u,{size:20})," Urutkan Warna"]}),o.jsxs("p",{className:"text-center text-sm text-slate-500 mb-6",children:["Klik untuk menukar posisi kotak warna agar membentuk gradasi yang halus dari kiri ke kanan.",o.jsx("br",{}),o.jsx("span",{className:"text-xs text-rose-500 font-bold",children:"Kotak pertama dan terakhir terkunci."})]}),o.jsx("div",{className:"grid grid-cols-5 sm:flex sm:flex-nowrap gap-1 mb-8",children:e.map((_,T)=>{const E=T===0||T===e.length-1,I=s===T;return o.jsx("div",{onClick:()=>f(T),className:`
                                h-16 sm:h-24 sm:flex-1 rounded-lg cursor-pointer transition-all transform
                                ${I?"scale-110 ring-4 ring-indigo-500 z-10":"hover:scale-105"}
                                ${E?"opacity-100 ring-2 ring-slate-400 z-0 cursor-default":"opacity-100"}
                            `,style:{backgroundColor:_.color},children:E&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/50",children:o.jsx(zf,{size:16})})},T)})}),o.jsxs("button",{onClick:b,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(ss,{size:20})," Selesai Mengurutkan"]})]})},fB=({onFinish:n})=>{const[e,t]=G.useState(1),[s,a]=G.useState(0),[l,u]=G.useState([]),[h,p]=G.useState({x:0,y:0}),[f,b]=G.useState(null),[_,T]=G.useState("CLOSEST"),[E,I]=G.useState(!1),C=G.useRef(null),k=10,j=[{base:"#f43f5e",light:"#fb7185",glow:"rgba(244, 63, 94, 0.6)"},{base:"#3b82f6",light:"#60a5fa",glow:"rgba(59, 130, 246, 0.6)"},{base:"#10b981",light:"#34d399",glow:"rgba(16, 185, 129, 0.6)"},{base:"#f59e0b",light:"#fbbf24",glow:"rgba(245, 158, 11, 0.6)"},{base:"#8b5cf6",light:"#a78bfa",glow:"rgba(139, 92, 246, 0.6)"}],M=()=>{b(null);const X=Math.random()>.5?"CLOSEST":"FURTHEST";T(X);const $=[],D=[-1,0,1].sort(()=>.5-Math.random());for(let N=0;N<3;N++){const R=D[N],L=-100-Math.floor(Math.random()*300),O=Math.floor(Math.random()*j.length);$.push({id:N,z:L,lane:R,color:JSON.stringify(j[O])})}u($)};G.useEffect(()=>{M()},[]);const z=X=>{if(!C.current)return;const $=C.current.getBoundingClientRect();let D,N;"touches"in X?(D=X.touches[0].clientX,N=X.touches[0].clientY):(D=X.clientX,N=X.clientY);const R=(D-$.left)/$.width*2-1,L=(N-$.top)/$.height*2-1;p({x:R,y:L})},q=(X,$)=>{if(E||f!==null)return;b(X);const D=l.map(L=>L.z),N=_==="CLOSEST"?Math.max(...D):Math.min(...D);$===N?(te.play("success"),a(L=>L+1)):te.play("error"),setTimeout(()=>{e<k?(t(L=>L+1),M()):(I(!0),te.play("finish"))},500)};return E?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl animate-fade-in",children:[o.jsx(ux,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Persepsi Kedalaman"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:s*10}),o.jsx("p",{className:"text-slate-500 mb-6",children:s>=8?"Persepsi kedalaman sangat baik!":"Perlu latihan estimasi jarak visual."}),o.jsx("button",{onClick:()=>n(s*10),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 p-6 rounded-3xl shadow-xl overflow-hidden relative select-none",children:[o.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-black/50 px-3 py-1 rounded text-white text-xs font-bold",children:["Round ",e,"/",k]}),o.jsx("h3",{className:"text-center font-bold text-lg mb-8 text-white flex items-center justify-center gap-2 z-10 relative",children:_==="CLOSEST"?"Pilih yang TERDEKAT (Paling Besar/Jelas)":"Pilih yang TERJAUH (Paling Kecil/Buram)"}),o.jsxs("div",{ref:C,className:"h-96 w-full relative flex justify-center items-center bg-gradient-to-b from-slate-800 to-slate-900 overflow-hidden rounded-xl border border-slate-700 cursor-crosshair touch-none perspective-container",onMouseMove:z,onTouchMove:z,children:[o.jsx("div",{className:"absolute bottom-0 w-[200%] h-[100%] left-[-50%] bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:40px_40px]",style:{transform:"perspective(600px) rotateX(60deg) translateY(100px) scale(2)",pointerEvents:"none"}}),l.map(X=>{const D=1e3/(1e3-X.z),N=Math.abs(X.z+100)/100,R=h.x*D*30,L=h.y*D*15,U=X.lane*100+R,Te=L,Me=1e3+Math.floor(X.z),J=100,le=JSON.parse(X.color),ye=f===X.id;return o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(calc(-50% + ${U}px), calc(-50% + ${Te}px))`,zIndex:ye?2e3:Me,width:`${J*D}px`,height:`${J*D}px`,transition:ye?"transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)":"transform 0.1s linear"},children:[o.jsx("div",{className:"absolute bg-black/50 rounded-full blur-md",style:{bottom:"-20%",left:"10%",width:"80%",height:"20%",opacity:.6*D,transform:ye?"scale(1.5)":"scale(1)",transition:"all 0.3s"}}),o.jsxs("div",{onClick:Ue=>{Ue.stopPropagation(),q(X.id,X.z)},className:"w-full h-full rounded-full cursor-pointer touch-manipulation relative",style:{background:`radial-gradient(circle at 30% 30%, ${le.light}, ${le.base})`,boxShadow:ye?`0 0 50px 20px ${le.glow}, inset -10px -10px 20px rgba(0,0,0,0.5)`:"inset -10px -10px 20px rgba(0,0,0,0.5), 0 0 10px rgba(0,0,0,0.3)",filter:ye?"blur(0px)":`blur(${N}px)`,transform:ye?"scale(1.2)":"scale(1)",transition:"all 0.3s ease-out"},children:[o.jsx("div",{className:"absolute top-[15%] left-[15%] w-[25%] h-[25%] bg-white/60 rounded-full blur-[2px] pointer-events-none"}),ye&&o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white animate-ping opacity-75"})]})]},X.id)})]}),o.jsxs("div",{className:"text-center text-slate-400 text-xs mt-4 flex items-center justify-center gap-2",children:[o.jsx(fA,{size:12})," Gerakkan mouse/jari untuk melihat efek 3D (Paralaks)."]})]})},mB=({onBack:n,onComplete:e})=>{const[t,s]=G.useState("MENU"),[a,l]=G.useState([]),[u,h]=G.useState(0),[p,f]=G.useState([]),[b,_]=G.useState(""),[T,E]=G.useState(!1),[I,C]=G.useState([]),[k,j]=G.useState([]),[M,z]=G.useState(0),q=()=>{const L=lB();l(L),f([]),h(0),E(!1),s("ISHIHARA"),te.play("click")},X=()=>{te.play("click");const L=a[u];let O=!1;if(L.type==="NUMBER")O=b.trim(),_("");else{if(I.length===0||k.length===0)O=!1;else{let U=0;const Te=30;I.forEach(J=>{k.some(ye=>Math.sqrt(Math.pow(ye.x-J.x,2)+Math.pow(ye.y-J.y,2))<Te)&&U++}),O=U/I.length>.55}j([]),C([]),z(U=>U+1)}const B=[...p,O];f(B),u<a.length-1?h(U=>U+1):(te.play("finish"),E(!0),setTimeout(()=>{$(B)},3500))},$=L=>{let O=0,B={RED_GREEN:0,BLUE_YELLOW:0,TOTAL_RG:0,TOTAL_BY:0};const U=a.map((le,ye)=>{const Ue=L[ye];let Z=!1;return le.type==="NUMBER"?Z=Ue.toString()===le.target.toString():Z=Ue===!0,Z?O++:((le.palette==="RED_GREEN"||le.palette==="PROTANOPIA"||le.palette==="DEUTERANOPIA")&&B.RED_GREEN++,le.palette==="BLUE_YELLOW"&&B.BLUE_YELLOW++),(le.palette==="RED_GREEN"||le.palette==="PROTANOPIA"||le.palette==="DEUTERANOPIA")&&B.TOTAL_RG++,le.palette==="BLUE_YELLOW"&&B.TOTAL_BY++,{question:le,answer:Ue,isCorrect:Z}}),Te=O>=12;let Me="Normal Color Vision";Te||(B.RED_GREEN>2&&B.BLUE_YELLOW<=1?Me="Possible Red-Green Deficiency (Protan/Deutan)":B.BLUE_YELLOW>1&&B.RED_GREEN<=2?Me="Possible Blue-Yellow Deficiency (Tritan)":B.RED_GREEN>2&&B.BLUE_YELLOW>1?Me="Complex/Severe Deficiency":Me="Mild Deficiency / Inconsistent");const J={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:Math.round(O/a.length*100),maxScore:100,details:{type:"Ishihara Simulation",passed:Te,correctCount:O,diagnosis:Me,breakdown:B},questions:a.map(le=>({id:`q-${le.id}`,type:"short_answer",content:`Plate ${le.id} (${le.palette})`,correctAnswer:le.target.toString(),explanation:le.description||"",metadata:{difficulty:"Medium",idealTimeSeconds:15,topic:"Color",subtest:le.palette}})),answers:U.map((le,ye)=>({questionId:`q-${le.question.id}`,selectedAnswer:le.answer.toString(),isCorrect:le.isCorrect,scoreEarned:le.isCorrect?1:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1}))};e(J)},D=L=>{const O={id:`hue-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:L,maxScore:100,details:{type:"Hue Discrimination",passed:L>70,diagnosis:L>70?"Good Discrimination":"Weak Discrimination"},questions:[],answers:[]};e(O)},N=L=>{const O={id:`depth-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:L,maxScore:100,details:{type:"Depth Perception",passed:L>70,diagnosis:L>70?"Good Depth Perception":"Poor Depth Estimation"},questions:[],answers:[]};e(O)};if(t==="MENU")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 hover:text-indigo-600 mb-8 font-bold",children:[o.jsx(ft,{size:20,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx(Io,{size:64,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400"}),o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Visual"}),o.jsx("p",{className:"text-slate-500 mb-8",children:"Pilih metode pengujian:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:q,className:"w-full p-4 bg-indigo-50 dark:bg-indigo-900/20 border-2 border-indigo-100 dark:border-indigo-800 rounded-2xl hover:border-indigo-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-indigo-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(Kn,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Simulasi Ishihara"}),o.jsx("p",{className:"text-xs text-slate-500",children:"15 Plate Angka & Jalur (Buta Warna)"})]})]}),o.jsxs("button",{onClick:()=>s("HUE_SORT"),className:"w-full p-4 bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-100 dark:border-emerald-800 rounded-2xl hover:border-emerald-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-emerald-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(_u,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Tes Spektrum Warna"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Farnsworth-Munsell D-15 (Sorting)"})]})]}),o.jsxs("button",{onClick:()=>s("DEPTH"),className:"w-full p-4 bg-sky-50 dark:bg-sky-900/20 border-2 border-sky-100 dark:border-sky-800 rounded-2xl hover:border-sky-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-sky-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(ux,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Persepsi Kedalaman"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Estimasi Jarak Objek 3D"})]})]})]})]})]})});if(t==="HUE_SORT")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(ft,{size:20,className:"mr-2"})," Batal"]}),o.jsx(hB,{onFinish:D})]});if(t==="DEPTH")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(ft,{size:20,className:"mr-2"})," Batal"]}),o.jsx(fB,{onFinish:N})]});const R=a[u];return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors relative overflow-hidden",children:[T&&o.jsx(cB,{}),o.jsxs("div",{className:`w-full max-w-md transition-all duration-500 ${T?"scale-90 opacity-0":"scale-100 opacity-100"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[o.jsx(ft,{size:18,className:"mr-2"})," Keluar"]}),o.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[u+1," / ",a.length]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center select-none relative",children:[o.jsx("div",{className:"mb-6 flex justify-center py-2 relative",children:o.jsxs("div",{className:"relative inline-block",children:[o.jsx(uB,{config:R,onPathGenerated:L=>C(L)}),R.type==="PATH"&&o.jsx(dB,{isActive:!0,onStroke:L=>j(O=>[...O,L]),clearTrigger:M})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:R.type==="NUMBER"?"Angka berapa yang terlihat?":"Ikuti jalur dengan jari/kursor!"}),o.jsx("div",{className:"flex justify-center gap-2 mt-2",children:o.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-700 text-slate-500 px-2 py-1 rounded font-bold uppercase",children:R.palette.replace("_"," ")})})]}),R.type==="NUMBER"?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:b,onChange:L=>_(L.target.value),autoFocus:!0,onKeyDown:L=>L.key==="Enter"&&b&&X()}),o.jsx("button",{onClick:X,disabled:!b,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}):o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>z(L=>L+1),className:"px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-300 transition flex items-center justify-center gap-2",children:[o.jsx(F8,{size:18})," Hapus"]}),o.jsxs("button",{onClick:X,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(ss,{size:18})," Selesai Gambar"]})]}),R.type==="NUMBER"&&o.jsx("div",{className:"mt-4 flex justify-center",children:o.jsxs("button",{onClick:()=>_("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline flex items-center gap-1",children:[o.jsx(Io,{size:12})," Tidak terlihat apa-apa (Isi 0)"]})})]}),R.type==="PATH"&&o.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-slate-500 animate-pulse",children:[o.jsx(fA,{size:12})," Tarik garis di atas gambar."]})]})]})},gx=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},pB=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",Xp=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},SA=n=>{switch(n){case"REACTION":return o.jsx(Ps,{size:20});case"SEQUENCE":return o.jsx(Ma,{size:20});case"AIM":return o.jsx(Pr,{size:20});case"CHIMP":return o.jsx(xs,{size:20});case"VISUAL":return o.jsx(Ma,{size:20});case"NUMBER":return o.jsx(Xh,{size:20});case"VERBAL":return o.jsx(ef,{size:20});case"TYPING":return o.jsx(Ei,{size:20});case"BRIDGE":return o.jsx(Zh,{size:20});case"MATCH":return o.jsx(vu,{size:20});default:return o.jsx(Kn,{size:20})}},EA=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},gB=()=>o.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:o.jsx(Kn,{size:64})}),xB=({percentile:n,score:e,unit:t,game:s})=>{const u=n/100*300;return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[o.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[o.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),o.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),o.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),o.jsx("line",{x1:u,y1:"10",x2:u,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),o.jsx("circle",{cx:u,cy:"10",r:"4",fill:"#ef4444"})]}),o.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),o.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[o.jsx("span",{children:"Bottom 1%"}),o.jsx("span",{children:"Average"}),o.jsx("span",{children:"Top 1%"})]})]})},yB=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const a=gx(t,s),l=pB(a);let u="pts";return(t==="REACTION"||t==="AIM")&&(u="ms"),t==="TYPING"&&(u="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(u="lvl"),o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(So,{className:"text-indigo-500"})," Statistik Anda"]}),o.jsx("button",{onClick:()=>{te.play("back"),e()},children:o.jsx(mx,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),o.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",o.jsx("span",{className:"text-lg font-medium text-slate-400",children:u})]}),o.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",a,"% orang"]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[o.jsx(xB,{percentile:a,score:s,unit:u,game:t}),o.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:l})]})]}):o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},bB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState("WAITING"),[a,l]=G.useState(0),[u,h]=G.useState([]),[p,f]=G.useState(0),b=G.useRef(null);G.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]);const _=()=>{s("READY");const k=Math.floor(Math.random()*3e3)+2e3;b.current=window.setTimeout(()=>{l(Date.now()),s("GO")},k)},T=()=>{if(t==="WAITING")_();else if(t==="READY")b.current&&clearTimeout(b.current),s("TOO_SOON");else if(t==="GO"){const k=Date.now()-a;f(k);const j=[...u,k];h(j),j.length>=5?(s("FINAL_SCORE"),te.play("finish")):(s("RESULT"),te.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},E=u.length>0?Math.round(u.reduce((k,j)=>k+j,0)/u.length):0;let I,C="bg-slate-900";return t==="WAITING"?(I=o.jsxs(o.Fragment,{children:[o.jsx(Ps,{size:80,className:"mx-auto mb-6 text-amber-400"}),o.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),o.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",u.length+1," dari 5"]}),o.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),C="bg-slate-800"):t==="READY"?(I=o.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),C="bg-rose-600"):t==="GO"?(I=o.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),C="bg-emerald-500"):t==="RESULT"?(I=o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[p," ms"]}),o.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),C="bg-indigo-600"):t==="FINAL_SCORE"?(I=o.jsxs(o.Fragment,{children:[o.jsx(Kn,{size:64,className:"mx-auto mb-4 text-emerald-400"}),o.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),o.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[E," ms"]}),o.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[o.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(E),children:"Simpan Skor"}),o.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{h([]),s("WAITING")},children:"Coba Lagi"})]})]}),C="bg-slate-800"):t==="TOO_SOON"&&(I=o.jsxs(o.Fragment,{children:[o.jsx(gB,{}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),o.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),C="bg-slate-800"),o.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${C}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[o.jsx("button",{onClick:k=>{k.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),I]})},vB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState([]),[a,l]=G.useState([]),[u,h]=G.useState(1),[p,f]=G.useState("START"),[b,_]=G.useState(null),T=async(I,C)=>{f("WATCHING"),l([]);const k=Math.floor(Math.random()*9),j=[...C,k];s(j),await new Promise(M=>setTimeout(M,800));for(let M=0;M<j.length;M++)_(j[M]),te.play("click"),await new Promise(z=>setTimeout(z,600)),_(null),await new Promise(z=>setTimeout(z,200));f("PLAYING")},E=async I=>{if(p!=="PLAYING")return;_(I),te.play("tap"),setTimeout(()=>_(null),200);const C=[...a,I];if(l(C),C[C.length-1]!==t[C.length-1]){f("GAMEOVER"),te.play("error");return}C.length===t.length&&(f("WATCHING"),te.play("success"),await new Promise(k=>setTimeout(k,800)),h(k=>k+1),T(u+1,t))};return p==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Ma,{size:80,className:"mx-auto mb-6 text-indigo-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),o.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Ma,{size:64,className:"mx-auto mb-6 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:u})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{h(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(1,u-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",u]}),o.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:p==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((I,C)=>o.jsx("div",{onClick:()=>E(C),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${b===C?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},C))})]})},_B=({onFinish:n,onExit:e})=>{const[t,s]=G.useState("IDLE"),[a,l]=G.useState(30),[u,h]=G.useState({top:"50%",left:"50%"}),[p,f]=G.useState([]),b=G.useRef(null),[_,T]=G.useState(0),[E,I]=G.useState(0),[C,k]=G.useState(0),[j,M]=G.useState(null),z=()=>{if(!b.current)return;const R=b.current.getBoundingClientRect(),L=96,O=50,B=R.width-L-O,U=R.height-L-O,Te=Math.max(O,Math.random()*B),Me=Math.max(O,Math.random()*U);h({top:`${Me}px`,left:`${Te}px`})},q=()=>{s("PLAYING"),l(30),f([]),T(0),I(0),z()};G.useEffect(()=>{if(t==="PLAYING"&&E>0){const R=setInterval(()=>{T(Date.now()-E)},50);return M(R),()=>clearInterval(R)}},[t,E]);const X=R=>{if(R.stopPropagation(),t!=="PLAYING")return;const L=Date.now();if(E===0){I(L),k(L),l(B=>B-1),z(),te.play("click");return}const O=L-C;f(B=>[...B,O]),k(L),te.play("click"),a<=1?(clearInterval(j),s("FINISHED"),te.play("finish")):(l(B=>B-1),z())},$=()=>{t==="PLAYING"&&E>0&&te.play("error")},D=p.length>0?Math.round(p.reduce((R,L)=>R+L,0)/p.length):0,N=p.length>0?Math.round(p.reduce((R,L)=>R+L,0)/p.length):0;return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:$,children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),t==="IDLE"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[o.jsx(Pr,{size:80,className:"mx-auto mb-6 text-orange-500"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),o.jsx("button",{onClick:q,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),o.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:a})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),o.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),o.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[N," ms"]})]})]}),o.jsx("div",{ref:b,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:o.jsxs("div",{onMouseDown:X,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:u.top,left:u.left},children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),o.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),o.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[o.jsx(Pr,{size:64,className:"mx-auto mb-4 text-orange-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),o.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),o.jsxs("h1",{className:"text-7xl font-black mb-8",children:[D," ms"]}),o.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>n(D),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),o.jsx("button",{onClick:q,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},TB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(4),[a,l]=G.useState([]),[u,h]=G.useState("IDLE"),[p,f]=G.useState(1),[b,_]=G.useState(!1),T=I=>{const k=Array.from({length:40},(M,z)=>z).sort(()=>.5-Math.random()),j=Array.from({length:I},(M,z)=>({id:z+1,pos:k[z],visible:!0}));l(j),f(1),_(!1),h("PLAYING")},E=I=>{u==="PLAYING"&&(I===p?(te.play("click"),I===1&&_(!0),l(C=>C.map(k=>k.id===I?{...k,visible:!1}:k)),I===a.length?(te.play("success"),setTimeout(()=>{s(C=>C+1),T(t+1)},500)):f(C=>C+1)):(te.play("error"),h("GAMEOVER")))};return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),u==="IDLE"&&o.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[o.jsx(xs,{size:80,className:"mx-auto mb-6 text-teal-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),o.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),u==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),o.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((I,C)=>{const k=a.find(j=>j.pos===C);return!k||!k.visible?o.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},C):o.jsx("button",{onMouseDown:()=>E(k.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${b&&k.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:b&&k.id>1?"":k.id},C)})})]}),u==="GAMEOVER"&&o.jsxs("div",{className:"text-center text-white",children:[o.jsx(xs,{size:64,className:"mx-auto mb-4 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},SB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(3),[u,h]=G.useState(3),[p,f]=G.useState([]),[b,_]=G.useState([]),[T,E]=G.useState([]),[I,C]=G.useState("START"),k=M=>{let z=3;M>2&&(z=4),M>5&&(z=5),M>10&&(z=6),M>20&&(z=7),h(z);const q=Math.min(Math.floor(z*z/2),M+2),X=[];for(;X.length<q;){const $=Math.floor(Math.random()*(z*z));X.includes($)||X.push($)}f(X),_([]),E([]),C("SHOWING"),setTimeout(()=>C("PLAYING"),1e3+M*100)},j=M=>{if(I==="PLAYING"&&!(b.includes(M)||T.includes(M)))if(p.includes(M)){te.play("tap");const z=[...b,M];_(z),z.length===p.length&&(te.play("success"),setTimeout(()=>{s(q=>q+1),k(t+1)},500))}else{te.play("error");const z=a-1;l(z),E(q=>[...q,M]),z<=0&&setTimeout(()=>C("GAMEOVER"),500)}};return I==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Ma,{size:80,className:"mx-auto mb-6 text-sky-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),o.jsx("button",{onClick:()=>{s(1),l(3),k(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):I==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[o.jsx(Ma,{size:64,className:"mx-auto mb-6 text-sky-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{s(1),l(3),k(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((M,z)=>o.jsx(Vf,{size:24,className:z<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},z))})]}),o.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:u*u}).map((M,z)=>{const q=p.includes(z),X=b.includes(z),$=T.includes(z);let D="bg-slate-700 hover:bg-slate-600";return I==="SHOWING"&&q&&(D="bg-white shadow-[0_0_15px_white] scale-95"),I==="PLAYING"&&X&&(D="bg-white"),I==="PLAYING"&&$&&(D="bg-slate-900 border-2 border-rose-900"),o.jsx("div",{onMouseDown:()=>j(z),className:`rounded-lg transition-all duration-200 cursor-pointer ${D}`},z)})})]})},EB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(""),[u,h]=G.useState(""),[p,f]=G.useState("START"),[b,_]=G.useState(0),[T,E]=G.useState(100),I=M=>{let z="";for(let q=0;q<M;q++)z+=Math.floor(Math.random()*10);return z},C=()=>{s(1),k(1)},k=M=>{const z=I(M);l(z),f("SHOWING"),E(100);const q=1e3+M*500;_(q),setTimeout(()=>{E(0)},50),setTimeout(()=>{f("INPUT")},q)},j=M=>{M==null||M.preventDefault(),u===a?(te.play("success"),f("RESULT"),setTimeout(()=>{s(z=>z+1),h(""),k(t+1)},1e3)):(te.play("error"),f("GAMEOVER"))};return p==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Xh,{size:80,className:"mx-auto mb-6 text-blue-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),o.jsx("button",{onClick:C,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Xh,{size:64,className:"mx-auto mb-6 text-blue-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),o.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[o.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),o.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:a}),o.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),o.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:u})]}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:C,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),p==="SHOWING"&&o.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[o.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:a}),o.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${b}ms`,opacity:T>0?1:.2}})})]}),p==="INPUT"&&o.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[o.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),o.jsxs("form",{onSubmit:j,children:[o.jsx("input",{type:"number",autoFocus:!0,value:u,onChange:M=>h(M.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),p==="RESULT"&&o.jsxs("div",{className:"text-center",children:[o.jsx(ss,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},wB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(0),[a,l]=G.useState(3),[u,h]=G.useState(""),[p,f]=G.useState(new Set),[b,_]=G.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],E=()=>{const k=p.size>0&&Math.random()<.4;let j="";if(k){const M=Array.from(p);j=M[Math.floor(Math.random()*M.length)]}else{let M=0;do j=T[Math.floor(Math.random()*T.length)],M++;while(p.has(j)&&M<100)}h(j)},I=k=>{const j=p.has(u);if(k==="SEEN"&&j||k==="NEW"&&!j)s(z=>z+1),k==="NEW"&&f(z=>new Set(z).add(u)),te.play("click"),E();else{const z=a-1;l(z),te.play("error"),k==="NEW"&&f(q=>new Set(q).add(u)),z<=0?_("GAMEOVER"):E()}},C=()=>{s(0),l(3),f(new Set),_("PLAYING"),E()};return b==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(ef,{size:80,className:"mx-auto mb-6 text-purple-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),o.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",o.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",o.jsx("strong",{children:"SUDAH"}),"."]}),o.jsx("button",{onClick:C,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):b==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(ef,{size:64,className:"mx-auto mb-6 text-purple-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:C,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[o.jsxs("div",{children:["Skor: ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((k,j)=>o.jsx(Vf,{size:24,className:j<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},j))})]}),o.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:u}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>I("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),o.jsx("button",{onClick:()=>I("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},NB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(""),[a,l]=G.useState(""),[u,h]=G.useState(null),[p,f]=G.useState(0),[b,_]=G.useState(0),[T,E]=G.useState("START");G.useEffect(()=>{const k=Jv,j=k.length>0?k[Math.floor(Math.random()*k.length)]:"";s(j||"")},[]),G.useEffect(()=>{let k;return T==="PLAYING"&&u&&(k=setInterval(()=>{const M=(Date.now()-u)/1e3;_(Math.floor(M));const z=a.length,q=M/60;q>0&&f(Math.round(z/5/q))},1e3)),()=>clearInterval(k)},[T,u,a]);const I=k=>{const j=k.target.value;if(T==="START"&&(h(Date.now()),E("PLAYING")),l(j),j===t){const M=(Date.now()-(u||Date.now()))/6e4,z=Math.round(t.length/5/M);f(z),E("FINISHED"),te.play("finish")}else j.length%5===0&&te.play("tap")},C=()=>{const k=Jv,j=k.length>0?k[Math.floor(Math.random()*k.length)]:"";s(j||""),l(""),h(null),f(0),_(0),E("START")};return T==="FINISHED"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Ei,{size:64,className:"mx-auto mb-6 text-slate-400"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),o.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[p," ",o.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:C,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(p),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[o.jsxs("div",{children:["WPM: ",o.jsx("span",{className:"font-bold text-emerald-400",children:p})]}),o.jsxs("div",{children:["Time: ",o.jsxs("span",{className:"font-bold text-emerald-400",children:[b,"s"]})]})]}),o.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[o.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((k,j)=>{let M="text-slate-500";return j<a.length&&(M=a[j]===k?"text-white":"text-rose-500 bg-rose-500/20"),o.jsx("span",{className:M,children:k},j)})}),o.jsx("textarea",{value:a,onChange:I,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},AB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(3),[u,h]=G.useState(5),[p,f]=G.useState(4),[b,_]=G.useState([]),[T,E]=G.useState("START"),[I,C]=G.useState(0),[k,j]=G.useState(100),[M,z]=G.useState(1500),q=D=>{const R=4+Math.floor(D/2);h(5),f(R);const L=[];let O=R-1,B=Math.floor(5/2);for(L.push({row:O,col:B});O>0;){O--;const U=[B];B>0&&U.push(B-1),B<4&&U.push(B+1),B=U[Math.floor(Math.random()*U.length)],L.push({row:O,col:B})}_(L)},X=D=>{q(D),E("SHOWING"),j(100);const N=1500;z(N),setTimeout(()=>j(0),50),setTimeout(()=>{E("PLAYING"),C(0)},N)},$=(D,N)=>{if(T!=="PLAYING")return;const R=b[I];if(D===R.row&&N===R.col){te.play("click");const L=I+1;C(L),L===b.length&&(te.play("success"),setTimeout(()=>{s(O=>O+1),X(t+1)},500))}else te.play("error"),l(L=>L-1),a<=1?E("GAMEOVER"):(E("SHOWING"),j(100),setTimeout(()=>j(0),50),setTimeout(()=>{E("PLAYING"),C(0)},M))};return T==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{te.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Zh,{size:80,className:"mx-auto mb-6 text-emerald-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),o.jsx("button",{onClick:()=>{te.play("click"),s(1),l(3),X(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Zh,{size:64,className:"mx-auto mb-6 text-emerald-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{te.play("click"),s(1),l(3),X(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{te.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[o.jsx("button",{onClick:()=>{te.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((D,N)=>o.jsx(Vf,{size:24,className:N<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},N))})]}),o.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${k}%`,transitionDuration:`${M}ms`}})}),o.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:o.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,gridTemplateRows:`repeat(${p}, 1fr)`},children:Array.from({length:p}).map((D,N)=>Array.from({length:u}).map((R,L)=>{const O=b.findIndex(Me=>Me.row===N&&Me.col===L),B=O!==-1,U=B&&O<I;let Te="bg-slate-700";return T==="SHOWING"&&B?Te="bg-emerald-400":T==="PLAYING"&&(U?Te="bg-emerald-600":B&&O===I&&(Te="bg-slate-700 active:bg-emerald-400")),o.jsx("div",{onMouseDown:()=>$(N,L),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${Te} hover:opacity-90`},`${N}-${L}`)}))})}),o.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[o.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),o.jsx(a8,{size:32})]})]})},kB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(5),[u,h]=G.useState([]),[p,f]=G.useState([]),[b,_]=G.useState("START"),[T,E]=G.useState(!1),[I,C]=G.useState(3),k=["","","","","","","","","","","","","","","",""],j=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],M=X=>{const $=X+2,D=$*2,N=Math.ceil(Math.sqrt(D));C(N);const R=[...k].sort(()=>Math.random()-.5).slice(0,$);let L=[];for(let O=0;O<$;O++){const B=R[O],U=j[O%j.length];L.push({id:O*2,icon:B,flipped:!0,matched:!1,color:U}),L.push({id:O*2+1,icon:B,flipped:!0,matched:!1,color:U})}L=L.sort(()=>Math.random()-.5).map((O,B)=>({...O,id:B})),h(L),_("PREVIEW")},z=()=>{te.play("click"),h(X=>X.map($=>({...$,flipped:!1}))),_("PLAYING")},q=X=>{if(b!=="PLAYING"||T)return;const $=u.find(R=>R.id===X);if(!$||$.flipped||$.matched)return;te.play("click");const D=u.map(R=>R.id===X?{...R,flipped:!0}:R);h(D);const N=[...p,X];if(f(N),N.length===2){E(!0);const R=D.find(O=>O.id===N[0]),L=D.find(O=>O.id===N[1]);R&&L&&R.icon===L.icon?(te.play("success"),setTimeout(()=>{h(O=>O.map(B=>N.includes(B.id)?{...B,matched:!0}:B)),f([]),E(!1),D.filter(O=>!O.matched&&!N.includes(O.id)).length===0&&setTimeout(()=>{s(O=>O+1),M(t+1)},500)},500)):setTimeout(()=>{te.play("error"),h(O=>O.map(B=>N.includes(B.id)?{...B,flipped:!1}:B)),f([]),E(!1),l(O=>{const B=O-1;return B<=0&&_("GAMEOVER"),B})},1e3)}};return b==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{te.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(vu,{size:80,className:"mx-auto mb-6 text-pink-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),o.jsx("button",{onClick:()=>{te.play("click"),s(1),l(5),M(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):b==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(vu,{size:64,className:"mx-auto mb-6 text-pink-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{te.play("click"),s(1),l(5),M(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{te.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:()=>{te.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(ft,{size:24})}),o.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((X,$)=>o.jsx(Vf,{size:24,className:$<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},$))}),b==="PREVIEW"&&o.jsx("button",{onClick:z,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),o.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${I}, minmax(0, 1fr))`},children:u.map(X=>o.jsx("div",{onClick:()=>q(X.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${X.flipped||X.matched?`${X.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:X.flipped||X.matched?X.icon:""},X.id))})]})},CB=({username:n,history:e})=>{const[t,s]=G.useState({}),[a,l]=G.useState(!0),[u,h]=G.useState(!0),p=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];G.useEffect(()=>{(async()=>{if(!u)return;l(!0);const _={};await Promise.all(p.map(async T=>{try{const E=await jV(T);_[T]=E}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),l(!1)})()},[u]);const f=b=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===b);return b==="REACTION"||b==="AIM"?_.sort((T,E)=>T.score-E.score):_.sort((T,E)=>E.score-T.score),_.slice(0,5).map(T=>{const E=T.details;return{name:n,score:T.score,unit:(E==null?void 0:E.unit)||""}})};return o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(vs,{className:"text-amber-500"})," Leaderboard"]}),o.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[o.jsxs("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[o.jsx(l9,{size:14,className:"inline mr-1"})," Global"]}),o.jsxs("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[o.jsx(ql,{size:14,className:"inline mr-1"})," Personal"]})]})]}),a&&u?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[o.jsx(Yn,{size:40,className:"animate-spin mb-4 text-indigo-500"}),o.jsx("p",{children:"Memuat Data Global Rank..."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(b=>{let _=[];u?_=t[b]||[]:_=f(b);const T=Xp(b);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[o.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:SA(b)}),o.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:EA(b)})]}),o.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((E,I)=>o.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${I===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`font-bold w-4 text-center ${I===0?"text-amber-500":I===1?"text-slate-400":I===2?"text-orange-700":"text-slate-500"}`,children:I+1}),o.jsxs("span",{className:`font-medium truncate max-w-[120px] ${E.username===n||E.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[E.name||E.username," ",E.username===n||E.name===n?"(You)":""]})]}),o.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[E.score,o.jsx("span",{className:"text-xs text-slate-400 ml-1",children:E.unit})]})]},I)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},b)})})]})},IB=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?o.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:o.jsx(Pu,{size:32,className:"text-slate-400"})}),o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Kn,{className:"text-indigo-500"})," Recent Activity"]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const a=s.game,l=t.score,u=s.unit||"",h=gx(a,l);return o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${Xp(a)}`,children:SA(a)}),o.jsx("span",{className:`font-bold text-base ${Xp(a).split(" ")[0]}`,children:EA(a)})]})}),o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),o.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),o.jsx("td",{className:"p-5 text-right",children:o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[l,u]}),o.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${h>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",h,"%"]})]})})]},t.id)})})]})})})]})},RB=({onBack:n,username:e,history:t,onComplete:s,isGuest:a,initialMode:l,initialTab:u})=>{const[h,p]=G.useState("MENU"),[f,b]=G.useState(u||"DASHBOARD");G.useEffect(()=>{l&&p(l)},[l]),G.useEffect(()=>{u&&b(u)},[u]);const[_,T]=G.useState(!1),[E,I]=G.useState("REACTION"),C=async(M,z)=>{let q="pts";(z==="REACTION"||z==="AIM")&&(q="ms"),(z==="SEQUENCE"||z==="NUMBER"||z==="CHIMP"||z==="VISUAL"||z==="BRIDGE"||z==="MATCH")&&(q="lvl"),z==="TYPING"&&(q="wpm"),a||PV(z,M,e,q).catch($=>console.error("Cloud save failed",$));const X={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:M,maxScore:0,details:{game:z,unit:q},questions:[],answers:[]};s(X),p("MENU")},k=M=>{const z=t.filter($=>$.category!=="BENCHMARK"||!$.details?!1:$.details.game===M).map($=>{const D=$.details;return{id:$.id,game:D.game,score:$.score,unit:D.unit,date:$.date}});if(z.length===0)return{best:null,percentile:0};let q;M==="REACTION"||M==="AIM"?q=Math.min(...z.map($=>$.score)):q=Math.max(...z.map($=>$.score));const X=gx(M,q);return{best:q,percentile:X}};if(h!=="MENU")switch(h){case"REACTION":return o.jsx(bB,{onFinish:M=>C(M,"REACTION"),onExit:()=>p("MENU")});case"SEQUENCE":return o.jsx(vB,{onFinish:M=>C(M,"SEQUENCE"),onExit:()=>p("MENU")});case"AIM":return o.jsx(_B,{onFinish:M=>C(M,"AIM"),onExit:()=>p("MENU")});case"CHIMP":return o.jsx(TB,{onFinish:M=>C(M,"CHIMP"),onExit:()=>p("MENU")});case"VISUAL":return o.jsx(SB,{onFinish:M=>C(M,"VISUAL"),onExit:()=>p("MENU")});case"NUMBER":return o.jsx(EB,{onFinish:M=>C(M,"NUMBER"),onExit:()=>p("MENU")});case"VERBAL":return o.jsx(wB,{onFinish:M=>C(M,"VERBAL"),onExit:()=>p("MENU")});case"TYPING":return o.jsx(NB,{onFinish:M=>C(M,"TYPING"),onExit:()=>p("MENU")});case"BRIDGE":return o.jsx(AB,{onFinish:M=>C(M,"BRIDGE"),onExit:()=>p("MENU")});case"MATCH":return o.jsx(kB,{onFinish:M=>C(M,"MATCH"),onExit:()=>p("MENU")});default:return p("MENU"),null}const j=({game:M,title:z,desc:q,icon:X,colorClass:$,btnColorClass:D})=>{const{best:N,percentile:R}=k(M);let L="pts";return(M==="REACTION"||M==="AIM")&&(L="ms"),M==="TYPING"&&(L="wpm"),(M==="SEQUENCE"||M==="NUMBER"||M==="CHIMP"||M==="VISUAL"||M==="BRIDGE"||M==="MATCH")&&(L="lvl"),o.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[o.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${$}`}),o.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[o.jsx("div",{className:`p-4 rounded-2xl ${$} bg-opacity-10 text-opacity-100 shrink-0`,children:o.jsx("div",{className:`${$.replace("bg-","text-")}`,children:X})}),o.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:z}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:q}),o.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${$}`,style:{width:`${R}%`}})}),o.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[o.jsxs("span",{children:["Best: ",N!==null?`${N} ${L}`:"-"]}),o.jsx("span",{children:R>0?`Top ${R}%`:"-"})]})]}),o.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[o.jsxs("button",{onClick:O=>{O.stopPropagation(),te.play("click"),p(M)},className:`flex-1 sm:flex-none px-6 py-2.5 ${D} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[o.jsx(Lo,{size:16,fill:"currentColor"})," MAIN"]}),o.jsxs("button",{onClick:O=>{O.stopPropagation(),te.play("click"),I(M),T(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[o.jsx(So,{size:14})," Stats"]})]})]})]})};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:o.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[o.jsx(yB,{isOpen:_,onClose:()=>T(!1),game:E,bestScore:k(E).best}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:o.jsxs("button",{onClick:()=>{te.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[o.jsx(ft,{size:20,className:"mr-2"})," Menu Utama"]})}),o.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[o.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[o.jsx(Kn,{className:"text-rose-500",size:40})," Human Benchmark"]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",o.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),a&&o.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),o.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[o.jsx("button",{onClick:()=>b("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${f==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),o.jsx("button",{onClick:()=>b("RANKING"),className:`pb-3 px-4 font-bold transition-all ${f==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),f==="DASHBOARD"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[o.jsx(j,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:o.jsx(Ps,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),o.jsx(j,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:o.jsx(Ma,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),o.jsx(j,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:o.jsx(Pr,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),o.jsx(j,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:o.jsx(xs,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),o.jsx(j,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:o.jsx(Ma,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),o.jsx(j,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:o.jsx(Xh,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),o.jsx(j,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:o.jsx(ef,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),o.jsx(j,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:o.jsx(Ei,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),o.jsx(j,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:o.jsx(Zh,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),o.jsx(j,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:o.jsx(vu,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),o.jsx(IB,{history:t})]}):o.jsx(CB,{username:e,history:t})]})})},lh=[{id:"utbk",label:"UTBK SNBT",type:"UTBK",sub:"General",mode:"SINGLE",color:"bg-rose-500",description:"Ranking berdasarkan skor IRT rata-rata."},{id:"skd_combined",label:"SKD CPNS & Kedinasan",type:"SKD",mode:"SPLIT_SKD",color:"bg-amber-500",description:"Ranking jalur CPNS Umum dan Sekolah Kedinasan."},{id:"tpa_combined",label:"Seleksi Lanjutan I",type:"TPA",mode:"SPLIT_TPA",color:"bg-blue-600",description:"Ranking TPA/TBI dan Psikotes Kedinasan."},{id:"psikotest",label:"Tes Koran & IQ",type:"PSIKOTEST",sub:"General",mode:"SINGLE",color:"bg-purple-500",description:"Ranking berdasarkan estimasi IQ & Tes Pauli."},{id:"kecermatan_combined",label:"Tes Kecermatan",type:"KECERMATAN",mode:"SPLIT_KECERMATAN",color:"bg-emerald-600",description:"Ranking ketelitian di berbagai mode tes."},{id:"benchmark",label:"Human Benchmark",type:"BENCHMARK",mode:"BENCHMARK",color:"bg-slate-800",description:"Ranking game kognitif khusus."}],MB=({rank:n})=>n===1?o.jsx(G8,{size:24,className:"text-amber-400 fill-amber-400"}):n===2?o.jsx(SE,{size:24,className:"text-slate-400 fill-slate-400"}):n===3?o.jsx(SE,{size:24,className:"text-orange-400 fill-orange-400"}):o.jsx("span",{className:"font-black text-slate-400 text-lg w-6 text-center",children:n}),yi=({title:n,data:e,currentUserId:t,colorClass:s,compact:a})=>e.length===0?o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center h-full min-h-[200px]",children:[o.jsx("div",{className:`p-3 rounded-full ${s.replace("bg-","bg-opacity-10 text-")} mb-3`,children:o.jsx(vs,{size:24})}),o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:n}),o.jsx("p",{className:"text-xs text-slate-500",children:"Belum ada data ranking."})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[o.jsx("div",{className:`p-4 border-b border-slate-100 dark:border-slate-700 ${s} bg-opacity-10`,children:o.jsxs("h3",{className:`font-bold ${s.replace("bg-","text-")} flex items-center gap-2`,children:[o.jsx(vs,{size:18})," ",n]})}),o.jsx("div",{className:"flex-1 overflow-y-auto max-h-[500px] p-2 scrollbar-hide",children:o.jsx("div",{className:"space-y-2",children:e.map((l,u)=>{const h=u+1,p=t===l.uid;return o.jsxs("div",{className:`flex items-center p-3 rounded-xl border transition-all ${p?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 shadow-sm":"bg-white dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[o.jsx("div",{className:"w-8 shrink-0 flex justify-center mr-2",children:o.jsx(MB,{rank:h})}),o.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-500 dark:text-slate-400 mr-3 text-xs shrink-0",children:l.username[0].toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[o.jsxs("div",{className:`font-bold text-sm truncate ${p?"text-indigo-700 dark:text-indigo-300":"text-slate-800 dark:text-white"}`,children:[l.username," ",p&&"(You)"]}),!a&&l.packageName&&o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-0.5",children:[o.jsx(mA,{size:10})," ",l.packageName]})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`font-black ${a?"text-sm":"text-lg"} ${h<=3?"text-slate-800 dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:l.score})})]},u)})})})]}),DB=({onBack:n,userProfile:e,onOpenHumanBenchmark:t})=>{const[s,a]=G.useState("utbk"),[l,u]=G.useState([]),[h,p]=G.useState({}),[f,b]=G.useState(!1),[_,T]=G.useState(!1),E=lh.find(j=>j.id===s)||lh[0];G.useEffect(()=>{(async()=>{if(E.mode!=="BENCHMARK"){b(!0),u([]),p({});try{if(E.mode==="SINGLE"){const M=await Tl(E.type,E.sub||"General");u(M)}else if(E.mode==="SPLIT_SKD"){const[M,z]=await Promise.all([Tl("SKD","CPNS"),Tl("SKD","KEDINASAN")]);p({CPNS:M,KEDINASAN:z})}else if(E.mode==="SPLIT_TPA"){const[M,z]=await Promise.all([Tl("TPA","TPA_TBI"),Tl("TPA","PSIKOTEST_KEDINASAN")]);p({TPA_TBI:M,PSIKOTEST_KEDINASAN:z})}else if(E.mode==="SPLIT_KECERMATAN"){const M=["ANGKA","HURUF","SIMBOL_HILANG","SAMA_BEDA","MATCHING","GROUPING"],z=M.map($=>Tl("KECERMATAN",$)),q=await Promise.all(z),X={};M.forEach(($,D)=>{X[$]=q[D]}),p(X)}}catch(M){console.error("Error fetching leaderboard",M)}finally{b(!1)}}})()},[s]);const I=j=>{te.play("click"),a(j),T(!1)},k=(()=>{if(!(e!=null&&e.uid)||E.mode!=="SINGLE")return null;const j=l.findIndex(M=>M.uid===e.uid);return j!==-1?{rank:j+1,data:l[j]}:null})();return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row transition-colors h-screen overflow-hidden",children:[o.jsxs("div",{className:"hidden md:flex w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex-col shrink-0 z-20",children:[o.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition text-slate-500 dark:text-slate-400",children:o.jsx(ft,{size:20})}),o.jsxs("h2",{className:"font-black text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(vs,{className:"text-amber-500",size:20})," Global Rank"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:lh.map(j=>o.jsxs("button",{onClick:()=>I(j.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all text-left ${s===j.id?`${j.color} text-white shadow-md`:"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${s===j.id?"bg-white":j.color}`}),j.label]},j.id))})]}),o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 z-30 sticky top-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 font-bold text-sm",children:[o.jsx(ft,{size:18,className:"mr-1"})," Menu"]}),o.jsxs("div",{className:"text-sm font-black text-slate-800 dark:text-white flex items-center gap-1",children:[o.jsx(vs,{size:16,className:"text-amber-500"})," Global Leaderboard"]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>T(!_),className:"w-full flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700 rounded-xl font-bold text-slate-700 dark:text-white",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${E.color}`}),E.label]}),o.jsx(N8,{size:18,className:`transition-transform ${_?"rotate-180":""}`})]}),_&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-down max-h-[60vh] overflow-y-auto",children:lh.map(j=>o.jsxs("button",{onClick:()=>I(j.id),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-bold transition-all text-left border-b border-slate-50 dark:border-slate-700 last:border-0 ${s===j.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${j.color}`}),j.label]},j.id))})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col h-full relative overflow-hidden bg-slate-50 dark:bg-slate-900",onClick:()=>T(!1),children:[o.jsxs("div",{className:"p-6 pb-4 hidden md:block",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.label}),o.jsx("p",{className:"text-slate-500 text-sm",children:E.description})]}),f&&o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx(Yn,{className:"animate-spin text-indigo-600 mb-4",size:40}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Memuat data ranking..."})]}),!f&&o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-24 scrollbar-hide",children:[E.mode==="BENCHMARK"&&o.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 max-w-md w-full",children:[o.jsx(Kn,{size:64,className:"mx-auto mb-6 text-indigo-500 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Human Benchmark"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Peringkat untuk game kognitif (Reaction Time, Memory, dll) tersedia di dashboard khusus."}),o.jsxs("button",{onClick:()=>{te.play("click"),t()},className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(K8,{size:20})," Buka Dashboard"]})]})}),E.mode==="SINGLE"&&o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx(yi,{title:`Ranking ${E.label}`,data:l,currentUserId:e==null?void 0:e.uid,colorClass:E.color})}),E.mode==="SPLIT_SKD"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(yi,{title:"SKD CPNS Umum",data:h.CPNS||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-amber-500"}),o.jsx(yi,{title:"SKD Kedinasan",data:h.KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-orange-500"})]}),E.mode==="SPLIT_TPA"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(yi,{title:"TPA & TBI (Standar)",data:h.TPA_TBI||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-600"}),o.jsx(yi,{title:"Psikotes Kedinasan",data:h.PSIKOTEST_KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-purple-600"})]}),E.mode==="SPLIT_KECERMATAN"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:[o.jsx(yi,{title:"Angka Hilang",data:h.ANGKA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-emerald-500",compact:!0}),o.jsx(yi,{title:"Huruf Hilang",data:h.HURUF||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-teal-500",compact:!0}),o.jsx(yi,{title:"Simbol Hilang",data:h.SIMBOL_HILANG||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-cyan-500",compact:!0}),o.jsx(yi,{title:"Sama Beda Simbol",data:h.SAMA_BEDA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-500",compact:!0}),o.jsx(yi,{title:"Matching",data:h.MATCHING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-indigo-500",compact:!0}),o.jsx(yi,{title:"Grouping",data:h.GROUPING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-violet-500",compact:!0})]})]}),k&&E.mode==="SINGLE"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 shadow-[0_-5px_20px_rgba(0,0,0,0.05)] z-30 animate-slide-up",children:o.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Rank"}),o.jsxs("div",{className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black px-3 py-1 rounded-lg",children:["#",k.rank]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Score"}),o.jsx("div",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:k.data.score})]})]})})]})]})},wA={Footprints:t9,Flame:uA,Zap:Ps,Crosshair:V8,Activity:Kn,Eye:Io,Moon:dx,Layers:ux,Trophy:vs},PB=({profile:n,onOpenAchievements:e})=>{const t=Wh(n.level),s=Wh(n.level-1),a=(n.xp-s)/(t-s)*100,l=nA(n.level);return o.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-slate-800 p-2 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm animate-fade-in-down w-full md:w-auto overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg border border-orange-100 dark:border-orange-800",children:[o.jsx(uA,{size:16,className:"fill-orange-500 animate-pulse"}),o.jsx("span",{className:"font-black text-sm",children:n.streak})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-[100px]",children:[o.jsxs("div",{className:"flex justify-between items-end mb-1",children:[o.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:["Lvl ",n.level,": ",l]}),o.jsxs("span",{className:"text-[9px] text-slate-400 font-mono",children:[n.xp," / ",t," XP"]})]}),o.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out",style:{width:`${Math.min(100,Math.max(0,a))}%`}})})]}),o.jsx("button",{onClick:e,className:"p-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 rounded-lg hover:bg-yellow-100 dark:hover:bg-yellow-900/40 transition border border-yellow-100 dark:border-yellow-800",children:o.jsx(vs,{size:18})})]})},jB=({isOpen:n,onClose:e,profile:t})=>n?o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(vs,{className:"text-yellow-500 fill-yellow-500"})," Pencapaian"]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Terkumpul: ",t.unlockedAchievements.length," / ",ap.length]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:o.jsx(mx,{size:24})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:ap.map(s=>{const a=t.unlockedAchievements.includes(s.id),l=wA[s.icon]||vs;return o.jsxs("div",{className:`p-4 rounded-2xl border-2 flex items-center gap-4 transition-all ${a?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800":"bg-slate-50 dark:bg-slate-800 border-slate-100 dark:border-slate-700 opacity-60 grayscale"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${a?"bg-white dark:bg-slate-800 text-indigo-600 shadow-md":"bg-slate-200 dark:bg-slate-700 text-slate-400"}`,children:a?o.jsx(l,{size:24}):o.jsx(hA,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold ${a?"text-slate-900 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:s.title}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight mb-1",children:s.description}),o.jsxs("span",{className:"text-[10px] font-bold bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-600 dark:text-slate-300",children:["+",s.xpReward," XP"]})]})]},s.id)})})]})}):null,LB=({newLevel:n,onClose:e})=>o.jsx("div",{className:"fixed inset-0 z-[90] bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"text-center relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-[100px] rounded-full pointer-events-none"}),o.jsx(p7,{size:120,className:"text-yellow-400 fill-yellow-400 mx-auto mb-6 animate-bounce-slow drop-shadow-[0_0_30px_rgba(250,204,21,0.6)]"}),o.jsx("h2",{className:"text-5xl font-black text-white mb-2 tracking-tight animate-scale-up",children:"LEVEL UP!"}),o.jsxs("div",{className:"text-2xl font-bold text-indigo-300 mb-8",children:["Level ",n,": ",nA(n)]}),o.jsx("button",{onClick:e,className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 transition shadow-xl",children:"Lanjut Belajar"})]})}),UB=({achievement:n,onClose:e})=>{const t=wA[n.icon]||vs;return GE.useEffect(()=>{const s=setTimeout(e,4e3);return()=>clearTimeout(s)},[]),o.jsxs("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-[100] bg-slate-900 text-white p-4 rounded-2xl shadow-2xl border border-yellow-500/30 flex items-center gap-4 animate-slide-up w-max max-w-[90vw]",children:[o.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center shrink-0 text-slate-900 animate-pulse",children:o.jsx(t,{size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-bold text-yellow-400 uppercase tracking-wider mb-0.5",children:"Achievement Unlocked!"}),o.jsx("div",{className:"font-bold text-lg",children:n.title}),o.jsxs("div",{className:"text-xs text-slate-400",children:["+",n.xpReward," XP"]})]})]})},UE={kedokteran:750,informatika:720,"ilmu komputer":710,hukum:680,manajemen:690,psikologi:670,akuntansi:685,"teknik sipil":660,"teknik mesin":665,"teknik elektro":675,komunikasi:695,farmasi:650},OB=({history:n,category:e,onBack:t,onStartSmartReview:s})=>{const[a,l]=G.useState(""),[u,h]=G.useState(""),[p,f]=G.useState(0),[b,_]=G.useState(0),[T,E]=G.useState([]);G.useEffect(()=>{const k=n.filter(M=>M.category===e);if(k.length>0){const M=k.reduce((z,q)=>z+q.score,0);_(Math.round(M/k.length))}const j={};n.forEach(M=>{M.category===e&&M.answers.forEach(z=>{if(!z.isCorrect){const q=M.questions.find(X=>X.id===z.questionId);q&&(j[q.id]=q)}})}),E(Object.values(j))},[n,e]);const I=k=>{const j=k.target.value;h(j);const M=j.toLowerCase();let z=600;Object.keys(UE).forEach(X=>{M.includes(X)&&(z=UE[X])});const q=a.toLowerCase();(q.includes("ui")||q.includes("itb")||q.includes("ugm"))&&(z+=50),f(z)},C=p>0?Math.min(100,Math.round(b/p*100)):0;return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(ft,{size:20})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(ac,{className:"text-indigo-600 dark:text-indigo-400"}),"Analisis Akademik ",e]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Target skor & perbaikan kelemahan."})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Pr,{className:"text-rose-500"})," Target Score Calculator"]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Universitas Impian"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Universitas Indonesia",value:a,onChange:k=>l(k.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Jurusan / Prodi"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Pendidikan Dokter",value:u,onChange:I})]})]}),u&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-5 rounded-2xl animate-fade-in-up border border-indigo-100 dark:border-indigo-800",children:[o.jsxs("div",{className:"flex justify-between items-end mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-bold uppercase",children:"Estimasi Target"}),o.jsx("div",{className:"text-3xl font-black text-indigo-700 dark:text-indigo-300",children:p})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold uppercase",children:"Skor Saat Ini"}),o.jsx("div",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:b})]})]}),o.jsx("div",{className:"w-full h-3 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-2",children:o.jsx("div",{className:`h-full transition-all duration-1000 ${C>=100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${C}%`}})}),o.jsx("div",{className:"text-xs text-center font-medium text-slate-600 dark:text-slate-400",children:C>=100?"Hebat! Skor rata-ratamu sudah melampaui target.":`Kamu butuh +${p-b} poin lagi untuk aman.`})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(Yp,{className:"text-emerald-500"})," Smart Review"]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center mb-6",children:[o.jsxs("div",{className:"w-24 h-24 bg-rose-50 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 relative",children:[o.jsx(C8,{size:48,className:"text-rose-500"}),o.jsx("div",{className:"absolute top-0 right-0 bg-rose-600 text-white text-xs font-bold px-2 py-1 rounded-full border-2 border-white dark:border-slate-800",children:T.length})]}),o.jsx("h4",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Bank Kesalahan"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 max-w-xs",children:["Sistem mengumpulkan ",T.length," soal yang pernah kamu jawab salah. Kerjakan ulang untuk memastikan pemahaman."]})]}),o.jsxs("button",{onClick:()=>s(T),disabled:T.length===0,className:"w-full py-4 bg-slate-900 dark:bg-indigo-600 text-white rounded-xl font-bold hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(Lo,{size:20,fill:"currentColor"}),"Kerjakan ",T.length," Soal Salah"]})]})]}),o.jsxs("div",{className:"mt-6 bg-gradient-to-r from-red-500 to-red-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-10 -mt-10 blur-2xl"}),o.jsxs("div",{className:"relative z-10 flex items-center gap-6",children:[o.jsx("div",{className:"p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:o.jsx(px,{size:40})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold mb-1",children:"Video Pembahasan Terintegrasi"}),o.jsx("p",{className:"text-red-100 text-sm max-w-lg",children:"Bingung dengan penjelasan teks? Sekarang setiap soal dilengkapi tombol pencarian otomatis ke YouTube untuk menemukan video pembahasan konsep terkait dari tutor terbaik."}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ss,{size:12})," Auto-Search Topic"]}),o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ss,{size:12})," Curated Keywords"]})]})]})]})]})]})})},VB=({userProfile:n,history:e,onBack:t,onUpdateProfile:s})=>{var Xe,wt,Dt,nt,et;const[a,l]=G.useState("PROFILE"),[u,h]=G.useState([]),[p,f]=G.useState([]),[b,_]=G.useState([]),[T,E]=G.useState(""),[I,C]=G.useState(!1),[k,j]=G.useState(null),[M,z]=G.useState(null),[q,X]=G.useState(!1),[$,D]=G.useState(n.username),[N,R]=G.useState(null),[L,O]=G.useState(!1),B=G.useRef(null);G.useEffect(()=>{(a==="FRIENDS"||a==="REQUESTS")&&U()},[a]);const U=async()=>{if(n.uid){C(!0);try{const ce=await FV(n.uid);h(ce);const Be=await BV(n.uid);f(Be)}catch(ce){console.error(ce)}finally{C(!1)}}},Te=ce=>{var Je;const Be=(Je=ce.target.files)==null?void 0:Je[0];if(Be){if(Be.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const Qe=new FileReader;Qe.onload=Le=>{var Oe;const we=new Image;we.onload=()=>{const He=document.createElement("canvas"),xn=He.getContext("2d");if(!xn)return;const Bt=200;let Ct=we.width,cn=we.height;Ct>cn?Ct>Bt&&(cn*=Bt/Ct,Ct=Bt):cn>Bt&&(Ct*=Bt/cn,cn=Bt),He.width=Ct,He.height=cn,xn.drawImage(we,0,0,Ct,cn),R(He.toDataURL("image/jpeg",.8))},we.src=(Oe=Le.target)==null?void 0:Oe.result},Qe.readAsDataURL(Be)}},Me=async()=>{O(!0);try{const ce={};$!==n.username&&(ce.username=$),N&&(ce.photoURL=N),Object.keys(ce).length>0&&await s(ce),X(!1),R(null)}catch{alert("Gagal menyimpan profil.")}finally{O(!1)}},J=async()=>{if(!(T.length<3)){C(!0);try{const ce=await OV(T),Be=new Set(u.map(Je=>Je.uid));_(ce.filter(Je=>Je.uid!==n.uid&&!Be.has(Je.uid)))}catch(ce){console.error(ce)}finally{C(!1)}}},le=async ce=>{var Be;try{await VV({uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Be=n.gamification)==null?void 0:Be.level)||1},ce.uid),alert("Permintaan pertemanan dikirim!"),_(Je=>Je.filter(Qe=>Qe.uid!==ce.uid))}catch{alert("Gagal mengirim request.")}},ye=async ce=>{var Be;try{await GV(n.uid,{uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Be=n.gamification)==null?void 0:Be.level)||1},ce),U()}catch{alert("Error accepting")}},Ue=async ce=>{try{await zV(n.uid,ce.fromUid),f(Be=>Be.filter(Je=>Je.id!==ce.id))}catch{alert("Error rejecting")}},Z=async ce=>{if(window.confirm("Hapus teman ini?"))try{await HV(n.uid,ce),h(Be=>Be.filter(Je=>Je.uid!==ce))}catch{alert("Gagal menghapus teman.")}},H=ce=>ce&&Date.now()-new Date(ce).getTime()<900*1e3?"online":"offline",Q=async ce=>{C(!0);try{const Be=await rA(ce.uid),Je={utbk:Math.max(0,...Be.filter(Qe=>Qe.category==="UTBK").map(Qe=>Qe.score)),skd:Math.max(0,...Be.filter(Qe=>Qe.category==="SKD").map(Qe=>Qe.score)),tpa:Math.max(0,...Be.filter(Qe=>Qe.category==="TPA").map(Qe=>Qe.score)),psikotest:Math.max(0,...Be.filter(Qe=>Qe.category==="PSIKOTEST").map(Qe=>Qe.score)),kecermatan:Math.max(0,...Be.filter(Qe=>Qe.category==="KECERMATAN").map(Qe=>Qe.score)),benchmark:Math.max(0,...Be.filter(Qe=>Qe.category==="BENCHMARK").map(Qe=>Qe.score))};z(Je),j(ce)}catch{alert("Gagal mengambil data teman.")}finally{C(!1)}},he=ce=>{const Be=e.filter(Je=>Je.category===ce);return Be.length===0?0:Math.max(...Be.map(Je=>Je.score))},se=((Xe=n.gamification)==null?void 0:Xe.xp)||0,ue=((wt=n.gamification)==null?void 0:wt.level)||1,de=Wh(ue),Ee=Wh(ue-1),ht=Math.min(100,Math.max(0,(se-Ee)/(de-Ee)*100));return k&&M?o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col p-6 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center mb-8",children:[o.jsx("button",{onClick:()=>j(null),className:"p-2 bg-white/10 rounded-full text-white mr-4",children:o.jsx(ft,{})}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Duel Stats"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 text-center text-white",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-indigo-500 mb-2 overflow-hidden border-4 border-indigo-400 shadow-lg shadow-indigo-500/30",children:n.photoURL?o.jsx("img",{src:n.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-3xl font-bold",children:n.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full text-lg",children:n.username})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:o.jsx(TE,{size:24,className:"text-white"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-rose-500 mb-2 overflow-hidden border-4 border-rose-400 shadow-lg shadow-rose-500/30",children:k.photoURL?o.jsx("img",{src:k.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-3xl font-bold",children:k.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full text-lg",children:k.username})]})]}),o.jsx("div",{className:"space-y-4 max-w-2xl mx-auto w-full",children:[{label:"UTBK SNBT",key:"utbk",myScore:he("UTBK"),friendScore:M.utbk},{label:"SKD CPNS",key:"skd",myScore:he("SKD"),friendScore:M.skd},{label:"TPA & TBI",key:"tpa",myScore:he("TPA"),friendScore:M.tpa},{label:"Psikotes",key:"psikotest",myScore:he("PSIKOTEST"),friendScore:M.psikotest},{label:"Kecermatan",key:"kecermatan",myScore:he("KECERMATAN"),friendScore:M.kecermatan},{label:"Benchmark",key:"benchmark",myScore:he("BENCHMARK"),friendScore:M.benchmark}].map(ce=>o.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700 backdrop-blur-sm",children:[o.jsx("div",{className:"text-center text-slate-400 text-xs font-bold uppercase mb-3 tracking-widest",children:ce.label}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-black",children:[o.jsx("span",{className:ce.myScore>ce.friendScore?"text-indigo-400":"text-slate-500",children:ce.myScore}),o.jsx("div",{className:"h-2 flex-1 mx-4 bg-slate-700 rounded-full overflow-hidden relative",children:o.jsx("div",{className:`h-full absolute left-0 top-0 bottom-0 transition-all duration-1000 ${ce.myScore>ce.friendScore?"bg-indigo-500":"bg-rose-500"}`,style:{width:`${ce.myScore/(ce.myScore+ce.friendScore||1)*100}%`}})}),o.jsx("span",{className:ce.friendScore>ce.myScore?"text-rose-400":"text-slate-500",children:ce.friendScore})]})]},ce.key))})]}):o.jsxs("div",{className:"min-h-screen bg-[#f0f4f8] dark:bg-[#0f172a] relative overflow-hidden transition-colors font-sans",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-96 bg-gradient-to-br from-indigo-200 via-purple-200 to-pink-200 dark:from-indigo-900/40 dark:via-purple-900/40 dark:to-pink-900/40 blur-3xl opacity-50 pointer-events-none"}),o.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto p-4 md:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 font-bold bg-white/50 dark:bg-slate-800/50 backdrop-blur-md px-4 py-2 rounded-full shadow-sm border border-white/20",children:[o.jsx(ft,{size:18})," Back"]}),o.jsxs("div",{className:"flex items-center gap-1 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md p-1 rounded-full shadow-sm border border-white/20",children:[o.jsx("button",{onClick:()=>l("PROFILE"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="PROFILE"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Profile"}),o.jsx("button",{onClick:()=>l("FRIENDS"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="FRIENDS"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"My Friends"}),o.jsxs("button",{onClick:()=>l("REQUESTS"),className:`px-5 py-2 rounded-full text-sm font-bold transition-all ${a==="REQUESTS"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:["Requests ",p.length>0&&o.jsx("span",{className:"ml-1 text-rose-500",children:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"p-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-full shadow-sm text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition border border-white/20",children:o.jsx($p,{size:20})}),o.jsx("button",{className:"p-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-md rounded-full shadow-sm text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition border border-white/20",children:o.jsx(R9,{size:20})})]})]}),a==="PROFILE"&&o.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[o.jsxs("div",{className:"relative w-full rounded-[2rem] overflow-hidden shadow-2xl border border-white/40 dark:border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-white/60 dark:bg-slate-800/60 backdrop-blur-xl"}),o.jsxs("div",{className:"relative p-8 md:p-10 flex flex-col md:flex-row items-center gap-8",children:[o.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var ce;return q&&((ce=B.current)==null?void 0:ce.click())},children:[o.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full p-1 bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 shadow-lg",children:o.jsxs("div",{className:"w-full h-full rounded-full overflow-hidden bg-white dark:bg-slate-900 relative",children:[N||n.photoURL?o.jsx("img",{src:N||n.photoURL,className:"w-full h-full object-cover",alt:"Avatar"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl font-bold text-slate-300",children:(Dt=n.username)==null?void 0:Dt[0]}),q&&o.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center text-white",children:o.jsx(S8,{})})]})}),o.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white px-4 py-1.5 rounded-full font-bold text-sm shadow-md border-2 border-white dark:border-slate-800",children:["Lvl ",ue]}),o.jsx("input",{type:"file",ref:B,className:"hidden",accept:"image/*",onChange:Te})]}),o.jsxs("div",{className:"flex-1 text-center md:text-left w-full",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-2",children:[q?o.jsx("input",{value:$,onChange:ce=>D(ce.target.value),className:"text-3xl font-black bg-white/50 dark:bg-slate-900/50 p-2 rounded-xl border border-slate-300 dark:border-slate-600 outline-none w-full md:w-auto",autoFocus:!0}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-black text-slate-800 dark:text-white tracking-tight",children:n.username}),o.jsx("button",{onClick:()=>X(!0),className:"p-1.5 text-slate-400 hover:text-indigo-600 transition",children:o.jsx(K9,{size:16})})]}),q&&o.jsxs("div",{className:"flex gap-2 mt-4 md:mt-0",children:[o.jsxs("button",{onClick:Me,disabled:L,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-indigo-700",children:[L&&o.jsx(Yn,{className:"animate-spin",size:14})," Save"]}),o.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-bold text-sm hover:bg-slate-300",children:"Cancel"})]})]}),o.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-slate-500 dark:text-slate-300 font-medium mb-6",children:[o.jsx(wE,{size:16,className:"text-indigo-500"}),o.jsx("span",{children:n.isGuest?"Guest Account":"Verified Student"})]}),o.jsxs("div",{className:"w-full bg-white/50 dark:bg-slate-900/50 rounded-full h-6 p-1 backdrop-blur-sm border border-white/20 dark:border-white/5 relative",children:[o.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-400 via-indigo-500 to-purple-500 relative overflow-hidden shadow-[0_0_15px_rgba(99,102,241,0.5)] transition-all duration-1000",style:{width:`${ht}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"})}),o.jsxs("div",{className:"absolute top-0 right-0 -mt-8 text-xs font-bold text-indigo-600 dark:text-indigo-300 bg-white/80 dark:bg-slate-800/80 px-2 py-1 rounded-lg backdrop-blur-md shadow-sm",children:[se," / ",de," XP"]}),o.jsxs("div",{className:"absolute top-1/2 left-3 transform -translate-y-1/2 text-[10px] font-black text-white mix-blend-overlay uppercase tracking-widest pointer-events-none",children:[Math.round(ht),"% to Lvl ",ue+1]})]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2 px-2",children:[o.jsx(So,{size:20,className:"text-indigo-500"})," Performance Stats"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"BEST UTBK",score:he("UTBK"),icon:ac,color:"text-rose-500",bg:"bg-rose-500/10"},{label:"BEST SKD",score:he("SKD"),icon:wE,color:"text-blue-500",bg:"bg-blue-500/10"},{label:"BEST TPA & TBI",score:he("TPA"),icon:Ps,color:"text-purple-500",bg:"bg-purple-500/10"},{label:"BEST PSIKOTES",score:he("PSIKOTEST"),icon:xs,color:"text-pink-500",bg:"bg-pink-500/10"},{label:"BEST KECERMATAN",score:he("KECERMATAN"),icon:Io,color:"text-emerald-500",bg:"bg-emerald-500/10"},{label:"BEST BENCHMARK",score:he("BENCHMARK"),icon:Kn,color:"text-amber-500",bg:"bg-amber-500/10"},{label:"TOTAL BATTLES",score:((nt=n.gamification)==null?void 0:nt.battlesPlayed)||0,icon:ql,color:"text-sky-500",bg:"bg-sky-500/10"},{label:"BATTLE WIN RATE",score:`${(et=n.gamification)!=null&&et.battlesPlayed?Math.round((n.gamification.battlesWon||0)/n.gamification.battlesPlayed*100):0}%`,icon:vs,color:"text-yellow-500",bg:"bg-yellow-500/10"}].map((ce,Be)=>{const Je=ce.icon;return o.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 backdrop-blur-md p-5 rounded-2xl border border-white/40 dark:border-white/5 shadow-sm hover:shadow-md transition-all hover:-translate-y-1",children:[o.jsx("div",{className:"flex items-start justify-between mb-3",children:o.jsx("div",{className:`p-2 rounded-xl ${ce.bg} ${ce.color}`,children:o.jsx(Je,{size:20})})}),o.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:ce.label}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ce.score})]},Be)})})]})]}),a==="FRIENDS"&&o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 backdrop-blur-md p-6 rounded-3xl border border-white/40 dark:border-white/5 shadow-sm mb-8",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center gap-2",children:[o.jsx(uu,{size:16})," Find Friends"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Username...",value:T,onChange:ce=>E(ce.target.value),onKeyDown:ce=>ce.key==="Enter"&&J(),className:"flex-1 p-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"}),o.jsx("button",{onClick:J,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Search"})]}),b.length>0&&o.jsx("div",{className:"mt-4 space-y-2",children:b.map(ce=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:ce.username}),o.jsxs("button",{onClick:()=>le(ce),className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-bold flex items-center gap-1 hover:bg-emerald-200 transition",children:[o.jsx(k7,{size:14})," Add"]})]},ce.uid))})]}),o.jsx("div",{className:"space-y-3",children:u.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-400 bg-white/40 dark:bg-slate-800/40 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700",children:[o.jsx(ql,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"You haven't added any friends yet."})]}):u.map(ce=>{const Be=H(ce.lastActive);return o.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-md p-4 rounded-2xl border border-white/40 dark:border-white/5 flex justify-between items-center shadow-sm hover:shadow-md transition",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center font-bold text-white overflow-hidden shadow-sm",children:ce.photoURL?o.jsx("img",{src:ce.photoURL,className:"w-full h-full object-cover"}):ce.username[0]}),o.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-slate-800 ${Be==="online"?"bg-emerald-500":"bg-slate-400"}`})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:ce.username}),o.jsxs("div",{className:"text-xs text-slate-500 font-medium flex items-center gap-2",children:[o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-600 dark:text-slate-300",children:["Lvl ",ce.level]}),o.jsx("span",{className:Be==="online"?"text-emerald-500":"text-slate-400",children:Be==="online"?"Online":"Offline"})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Q(ce),className:"p-2.5 text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 rounded-xl transition",title:"Compare Stats",children:o.jsx(TE,{size:18})}),o.jsxs("button",{disabled:Be!=="online",className:"px-4 py-2 bg-rose-50 text-rose-600 dark:bg-rose-900/20 dark:text-rose-400 rounded-xl font-bold text-xs flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-rose-100 transition",children:[o.jsx(Ps,{size:14})," Duel"]}),o.jsx("button",{onClick:()=>Z(ce.uid),className:"p-2.5 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition",children:o.jsx(Ro,{size:18})})]})]},ce.uid)})})]}),a==="REQUESTS"&&o.jsx("div",{className:"space-y-3 animate-fade-in-up",children:p.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-400 bg-white/40 dark:bg-slate-800/40 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700",children:[o.jsx($p,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No new friend requests."})]}):p.map(ce=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center font-bold text-indigo-600",children:ce.fromPhotoURL?o.jsx("img",{src:ce.fromPhotoURL,className:"w-full h-full rounded-full object-cover"}):ce.fromUsername[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:ce.fromUsername}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Level ",ce.fromLevel]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ye(ce),className:"px-4 py-2 bg-emerald-500 text-white rounded-xl text-sm font-bold hover:bg-emerald-600 transition shadow-lg shadow-emerald-200 dark:shadow-none",children:"Accept"}),o.jsx("button",{onClick:()=>Ue(ce),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl text-sm font-bold hover:bg-slate-200 transition",children:"Decline"})]})]},ce.id))})]})]})},OE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-white leading-relaxed"})},BB=({userProfile:n,onBack:e,category:t})=>{var O;const[s,a]=G.useState("LOBBY"),[l,u]=G.useState(""),[h,p]=G.useState(""),[f,b]=G.useState(null),[_,T]=G.useState(!1),[E,I]=G.useState(""),[C,k]=G.useState(0),[j,M]=G.useState(3),[z,q]=G.useState(!1),X=G.useRef(null);G.useEffect(()=>()=>{X.current&&X.current()},[]);const $=async()=>{T(!0),q(!0);try{const B=await on("DRILL",t,`1v1 Battle Mode - ${t}. Fast paced questions.`,10,[],t==="SKD"?"CPNS":void 0),U=await qV(n.uid,n.username,t,B);u(U),N(U)}catch{I("Gagal membuat room. Coba lagi.")}finally{T(!1),q(!1)}},D=async()=>{if(h){T(!0);try{await KV(h.toUpperCase(),n.uid,n.username),u(h.toUpperCase()),N(h.toUpperCase())}catch(B){I(B.message||"Gagal join room.")}finally{T(!1)}}},N=B=>{X.current&&X.current(),X.current=$V(B,U=>{b(U),U.status==="STARTING"&&s==="LOBBY"&&(a("GAME"),te.play("success")),U.status==="FINISHED"&&(a("RESULT"),te.play("finish"))})},R=async B=>{if(!f)return;const U=f.questions[C],Te=B===U.correctAnswer,Me=Te?10:-2,J=f.scores[n.uid]||0,le=Math.max(0,J+Me);Te?te.play("success"):te.play("error"),await YV(f.id,n.uid,le,C+1),C<f.questions.length-1?k(ye=>ye+1):L(le)},L=async B=>{if(!f)return;const U=f.hostUid===n.uid?f.guestUid:f.hostUid;if(!U)return;const Te=f.scores[U]||0;if((f.progress[U]||0)>=f.questions.length){const J=B>Te?n.uid:Te>B?U:"DRAW";await JV(f.id,J)}};if(s==="LOBBY")return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col p-6",children:[o.jsxs("button",{onClick:e,className:"self-start flex items-center text-slate-400 hover:text-white mb-8",children:[o.jsx(ft,{size:20,className:"mr-2"})," Quit Battle"]}),o.jsxs("div",{className:"max-w-md w-full mx-auto text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(79,70,229,0.5)] animate-pulse",children:o.jsx(xA,{size:40})}),o.jsx("h1",{className:"text-4xl font-black mb-2 uppercase italic tracking-wider",children:"Battle Arena"}),o.jsxs("p",{className:"text-slate-400 mb-8",children:[t," 1v1 Duel"]}),l?o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl border border-indigo-500/50 shadow-2xl",children:[o.jsx("h2",{className:"text-xl font-bold mb-6 text-slate-300",children:"Waiting for Opponent..."}),o.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl mb-6 border border-slate-700",children:[o.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-widest mb-2",children:"Room Code"}),o.jsxs("div",{className:"text-5xl font-mono font-black text-indigo-400 tracking-widest flex items-center justify-center gap-4",children:[l,o.jsx("button",{onClick:()=>navigator.clipboard.writeText(l),className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(vu,{size:20})})]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-4 animate-pulse",children:[o.jsx(ql,{size:24,className:"text-emerald-400"}),o.jsx("span",{className:"text-lg font-bold",children:"1/2 Players"})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Create Room"}),o.jsxs("button",{onClick:$,disabled:_,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-bold transition flex items-center justify-center gap-2",children:[_?o.jsx(Yn,{className:"animate-spin"}):o.jsx(Ps,{size:20}),"Host Match"]})]}),o.jsxs("div",{className:"relative flex py-2 items-center",children:[o.jsx("div",{className:"flex-grow border-t border-slate-700"}),o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-500 text-xs",children:"OR JOIN"}),o.jsx("div",{className:"flex-grow border-t border-slate-700"})]}),o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Join Room"}),o.jsx("input",{type:"text",placeholder:"Enter Room Code",value:h,onChange:B=>p(B.target.value.toUpperCase()),className:"w-full bg-slate-900 border border-slate-600 rounded-xl p-4 text-center font-mono text-xl tracking-widest mb-4 focus:border-indigo-500 outline-none"}),o.jsx("button",{onClick:D,disabled:!h||_,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-500 rounded-xl font-bold transition disabled:opacity-50",children:"Join Fight"})]}),E&&o.jsx("p",{className:"text-rose-500 font-bold animate-pulse",children:E})]})]})]});if(s==="GAME"&&f){const B=f.hostUid===n.uid,U=B?f.guestUid:f.hostUid,Te=B?f.guestName:f.hostName,Me=f.scores[n.uid]||0,J=U&&f.scores[U]||0,le=U&&f.progress[U]||0,ye=f.questions[C],Ue=C>=f.questions.length||f.progress[n.uid]>=f.questions.length;return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-800 p-4 shadow-md flex justify-between items-center z-10 border-b border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs text-indigo-400 font-bold",children:"YOU"}),o.jsx("span",{className:"text-2xl font-black",children:Me})]}),o.jsx("div",{className:"flex flex-col items-center",children:o.jsx("div",{className:"text-xs font-bold bg-rose-600 px-3 py-1 rounded-full animate-pulse",children:"LIVE"})}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx("span",{className:"text-xs text-rose-400 font-bold truncate max-w-[100px]",children:Te||"Opponent"}),o.jsx("span",{className:"text-2xl font-black",children:J})]})]}),o.jsxs("div",{className:"h-2 bg-slate-700 w-full flex",children:[o.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${C/f.questions.length*50}%`}}),o.jsx("div",{className:"h-full bg-rose-500 transition-all duration-500 ml-auto",style:{width:`${le/f.questions.length*50}%`}})]}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative",children:Ue?o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Waiting for results..."}),o.jsx(Yn,{size:48,className:"animate-spin text-indigo-500 mx-auto"})]}):o.jsxs("div",{className:"w-full max-w-2xl",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 mb-6 shadow-xl",children:[o.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:["Question ",C+1,"/",f.questions.length]}),o.jsx("h3",{className:"text-xl md:text-2xl font-bold leading-relaxed",children:o.jsx(OE,{text:ye.content})})]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:(O=ye.options)==null?void 0:O.map((Z,H)=>o.jsx("button",{onClick:()=>R(Z),className:"p-4 rounded-xl border-2 border-slate-700 bg-slate-800 hover:bg-indigo-600 hover:border-indigo-500 hover:scale-[1.02] transition-all text-left font-medium",children:o.jsx(OE,{text:Z})},H))})]})})]})}if(s==="RESULT"&&f){const B=f.winner===n.uid,U=f.winner==="DRAW";return o.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6 text-white text-center",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl ${B?"bg-emerald-500 shadow-emerald-500/50":"bg-rose-500 shadow-rose-500/50"}`,children:B?o.jsx(vs,{size:64}):U?o.jsx(ql,{size:64}):o.jsx(ic,{size:64})}),o.jsx("h1",{className:"text-5xl font-black mb-2 italic uppercase",children:B?"VICTORY!":U?"DRAW":"DEFEAT"}),o.jsx("p",{className:"text-slate-400 mb-8 text-lg",children:B?"+100 XP":"+20 XP"}),o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-4 mb-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"You"}),o.jsx("div",{className:"text-3xl font-black text-indigo-400",children:f.scores[n.uid]})]}),o.jsx("div",{className:"text-xl font-black text-slate-600",children:"VS"}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"Opponent"}),o.jsx("div",{className:"text-3xl font-black text-rose-400",children:f.scores[f.hostUid===n.uid?f.guestUid:f.hostUid]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white text-slate-900 font-bold rounded-xl hover:scale-105 transition",children:"Back to Menu"})]})]})})}return null},GB=({user:n})=>{var s,a;const[e,t]=G.useState(!1);return G.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?o.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):o.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:[" ",((a=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:a.toUpperCase())||"T"," "]})},NA=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},zB=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",a=e==="success"?o.jsx(ss,{size:20}):e==="error"?o.jsx(zf,{size:20}):o.jsx(p9,{size:20});return G.useEffect(()=>{const l=setTimeout(t,3e3);return()=>clearTimeout(l)},[t]),o.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[" ",a," ",o.jsx("span",{className:"font-bold text-sm",children:n})," ",o.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:o.jsx(ic,{size:18})})," "]})},HB=({session:n,onResume:e,onDiscard:t})=>{const s=Math.round(Object.keys(n.answerMap).length/n.questions.length*100);return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[" ",o.jsxs("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:[" ",o.jsx(Pu,{size:32})," "]})," ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Tes Belum Selesai"})," ",o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:[" Ditemukan sesi ",o.jsx("b",{children:n.packageTitle||n.category})," yang belum diselesaikan. Ingin melanjutkan? "]})," ",o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left",children:[" ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[s,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-200 dark:bg-slate-600 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex flex-col gap-3",children:[" ",o.jsxs("button",{onClick:e,className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" ",o.jsx(Lo,{size:20})," Lanjutkan Tes "]})," ",o.jsxs("button",{onClick:t,className:"w-full py-3.5 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition flex items-center justify-center gap-2",children:[" ",o.jsx(Ro,{size:20})," Hapus & Menu Utama "]})," "]})," "]})," "]})},FB=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[" ",o.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"})," ",o.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"})," ",o.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"})," ",o.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})," "]}),qB=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[" ",t&&o.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[" ",o.jsx(Yn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"})," ",o.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})," "]})," ",o.jsxs("div",{className:"mb-8 flex justify-center",children:[" ",o.jsx("img",{src:Th,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})," "]})," ",o.jsxs("div",{className:"text-center mb-8",children:[" ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})," "]})," ",o.jsxs("div",{className:"space-y-4",children:[" ",o.jsxs("button",{onClick:n,className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[" ",o.jsx("div",{className:"absolute left-4",children:o.jsx(FB,{})})," ",o.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})," "]})," ",o.jsxs("div",{className:"relative flex py-2 items-center",children:[" ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," ",o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"})," ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," "]})," ",o.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" Masuk sebagai Tamu ",o.jsx(vr,{size:20})," "]})," ",o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" *Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard. "})," "]})," "]})," "]}),KB=({onSubmit:n,isLoading:e})=>{const[t,s]=G.useState(""),[a,l]=G.useState(""),u=h=>{if(h.preventDefault(),t.length<3){l("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){l("Hanya huruf, angka, dan underscore (_).");return}n(t)};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[" ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."})," ",o.jsxs("form",{onSubmit:u,children:[" ",o.jsxs("div",{className:"mb-4",children:[" ",o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"})," ",o.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"Username_Unik",value:t,onChange:h=>{s(h.target.value.replace(/\s/g,"")),l("")},autoFocus:!0})," ",a&&o.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:a})," "]})," ",o.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[" ",e?o.jsx(Yn,{className:"animate-spin"}):o.jsx(ss,{size:20})," Simpan & Lanjut "]})," "]})," "]})," "]})},$B=({result:n,feature:e,onBack:t})=>o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:o.jsxs("div",{className:"max-w-3xl w-full",children:[o.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[o.jsx(ft,{size:18})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(Uf,{size:28,className:"text-indigo-600"})," Hasil ",e]}),o.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:o.jsx(NA,{text:n})})]})]})}),YB=({questions:n,onComplete:e})=>{const[t,s]=G.useState(0),[a,l]=G.useState(""),[u,h]=G.useState(null),[p,f]=G.useState(!1),[b,_]=G.useState([]),T=n[t],E=async()=>{if(a.trim()){f(!0);try{const C=await pP(T.content,a);h(C)}catch{alert("Gagal evaluasi.")}finally{f(!1)}}},I=()=>{const C={questionId:T.id,selectedAnswer:a,isCorrect:!0,scoreEarned:(u==null?void 0:u.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:u||void 0},k=[...b,C];_(k),l(""),h(null),t<n.length-1?s(t+1):e(k)};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),u?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",u.score,"/100"]}),o.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:u.toneAnalysis})]}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[o.jsx("b",{children:"Feedback:"})," ",u.feedback]}),o.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[o.jsx("b",{children:"Saran Jawaban:"})," ",u.improvedAnswer]})]}),o.jsx("button",{onClick:I,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:a,onChange:C=>l(C.target.value)}),o.jsxs("button",{onClick:E,disabled:p||!a,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[p?o.jsx(Yn,{className:"animate-spin"}):o.jsx(Bf,{size:18})," Submit Jawaban"]})]})]})})},JB=({flashcards:n,onFinish:e})=>{const[t,s]=G.useState(0),a=l=>{t<n.length-1?s(t+1):e()};return n.length===0?o.jsx("div",{children:"No Flashcards"}):o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[o.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:o.jsx(ft,{size:20})}),o.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),o.jsx(V7,{data:n[t],onNext:a})]})},QB=({topic:n,onFinish:e})=>{const[t,s]=G.useState(""),[a,l]=G.useState(null),[u,h]=G.useState(!1),p=async()=>{h(!0);try{const f=await gP(n,t);l(f)}catch{alert("Error")}finally{h(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",o.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun)."]}),a?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4",children:o.jsxs("div",{className:`text-2xl font-bold ${a.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[a.understandingScore,"/100"]})}),o.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("p",{children:[o.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",a.simplificationQuality]}),o.jsxs("p",{children:[o.jsx("b",{children:"Konsep yang Terlewat:"})," ",a.missingConcepts.join(", ")||"Tidak ada"]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[o.jsx("b",{children:"Koreksi / Saran:"})," ",a.correction]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:f=>s(f.target.value)}),o.jsx("button",{onClick:p,disabled:u||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:u?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},WB=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,a]=G.useState(0);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:"flex justify-center mb-8",children:t.map((l,u)=>o.jsxs("div",{className:`flex items-center ${u<t.length-1?"w-full":""}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${u<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:l[0]}),u<t.length-1&&o.jsx("div",{className:`h-1 flex-1 ${u<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},l))}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),o.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Lakukan tahap ",t[s],' untuk materi "',n,'".']}),o.jsx("button",{onClick:()=>{s<4?a(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},VE=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},XB=({sessions:n,onBack:e,onResume:t,onDelete:s,loading:a})=>{const l=h=>{switch(h){case"UTBK":return{icon:ac,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Of,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:xs,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Ps,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Io,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};default:return{icon:Ei,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},u=h=>{const p=Math.floor(h/3600),f=Math.floor(h%3600/60),b=Math.floor(h%60);return`${p>0?p+":":""}${f.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:[" ",o.jsxs("div",{className:"max-w-5xl mx-auto",children:[" ",o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[" ",o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(ft,{size:20})})," ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Lanjutkan Sesi Tersimpan"})," "]})," ",a?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(Yn,{className:"animate-spin text-indigo-600 w-8 h-8"})}):n.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[" ",o.jsx(Pu,{size:48,className:"mx-auto mb-4 opacity-20"})," ",o.jsx("p",{children:"Tidak ada sesi tersimpan."})," "]}):o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[" ",n.map(h=>{const p=Math.round(Object.keys(h.answerMap).length/h.questions.length*100),f=l(h.category),b=f.icon;return o.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-3xl border-2 ${f.border} shadow-sm flex flex-col gap-4 animate-fade-in-up hover:shadow-md transition-all`,children:[" ",o.jsxs("div",{className:"flex justify-between items-start",children:[" ",o.jsxs("div",{className:`p-3 rounded-xl ${f.bg} ${f.color}`,children:[" ",o.jsx(b,{size:24})," "]})," ",o.jsxs("div",{className:"text-right",children:[" ",o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1",children:"SISA WAKTU"})," ",o.jsxs("div",{className:`font-mono text-xl font-bold ${h.timeLeft<300?"text-rose-500":"text-slate-800 dark:text-white"}`,children:[" ",u(h.timeLeft)," "]})," "]})," "]})," ",o.jsxs("div",{children:[" ",o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[" ",o.jsxs("span",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",title:h.packageTitle||h.category,children:[" ",h.packageTitle||h.category," "]})," "]})," ",o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block mb-3",children:[" ",new Date(h.timestamp).toLocaleDateString(),"  ",h.questions.length," Soal "]})," ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[p,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:`h-full ${h.category==="UTBK"?"bg-rose-500":"bg-indigo-500"}`,style:{width:`${p}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex gap-2 mt-2",children:[" ",o.jsxs("button",{onClick:()=>s(h.id),className:"p-3 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition border border-rose-200 dark:border-rose-900/50",children:[" ",o.jsx(Ro,{size:20})," "]})," ",o.jsxs("button",{onClick:()=>t(h),className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[" ",o.jsx(Lo,{size:18,fill:"currentColor"})," Lanjutkan "]})," "]})," "]},h.id||h.timestamp)})," "]})," "]})," "]})},ZB=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:a,onStartTesKoran:l,onStartTesKecermatan:u,onGeneralInputSubmit:h,generalInput:p,setGeneralInput:f,isReadingMaterial:b,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:E,weakTopicsCount:I,loading:C,skdStream:k,onSkdStreamSelect:j,onHistory:M,onStartGeneralSession:z,onStartSkripsiSession:q,username:X,isDarkMode:$,onToggleDarkMode:D,tpaStream:N,onTpaStreamSelect:R,onOpenAcademicHub:L,onBattle:O}=n,[B,U]=G.useState(""),[Te,Me]=G.useState(null),[J,le]=G.useState("MEDIUM"),[ye,Ue]=G.useState("MEDIUM"),[Z,H]=G.useState(!1),Q=G.useRef(null),[he,se]=G.useState(""),[ue,de]=G.useState(5),[Ee,ht]=G.useState("Medium"),Xe=nt=>{var ce;const et=(ce=nt.target.files)==null?void 0:ce[0];if(et){if(et.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}Me(et.name),U(""),H(!0);const Be=new FileReader;Be.onload=Je=>{var Le;const Qe=((Le=Je.target)==null?void 0:Le.result).split(",")[1];setTimeout(()=>{f&&f({type:"pdf",content:Qe,title:et.name,lengthPreference:J,difficultyPreference:ye}),H(!1)},800)},Be.readAsDataURL(et)}},wt=()=>{(p==null?void 0:p.type)==="pdf"?h({...p,lengthPreference:J,difficultyPreference:ye}):B?h({type:"text",content:B,title:"Input Manual",lengthPreference:J,difficultyPreference:ye}):alert("Mohon masukkan teks atau upload PDF.")},Dt=nt=>{const et=nt.filter(ce=>ce.toLowerCase().includes(he.toLowerCase()));return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),o.jsxs("div",{className:"mb-4 relative",children:[o.jsx(uu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),o.jsx("input",{type:"text",placeholder:"Cari topik...",value:he,onChange:ce=>se(ce.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:et.length>0?et.map(ce=>o.jsx("button",{onClick:()=>{te.play("tap"),T(ce)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${E===ce?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:ce},ce)):o.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),E&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),o.jsxs("select",{value:ue,onChange:ce=>de(Number(ce.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"5",children:"5 Soal"}),o.jsx("option",{value:"10",children:"10 Soal"}),o.jsx("option",{value:"15",children:"15 Soal"}),o.jsx("option",{value:"20",children:"20 Soal"})]})]}),o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),o.jsxs("select",{value:Ee,onChange:ce=>ht(ce.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"Easy",children:"Mudah"}),o.jsx("option",{value:"Medium",children:"Sedang"}),o.jsx("option",{value:"Hard",children:"Sulit"}),o.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),o.jsxs("button",{onClick:()=>{te.play("click"),s($e.PRACTICE,Ee,ue)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(Jp,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&E&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:o.jsxs("button",{onClick:()=>{te.play("click"),s($e.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(Bf,{size:20})," Mulai Sesi Wawancara"]})})]})};return o.jsxs("div",{className:"min-h-screen bg-transparent",children:[o.jsx(O7,{}),o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>{te.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[o.jsx(ft,{size:18,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[D&&o.jsx("button",{onClick:()=>{D()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:$?o.jsx(gA,{size:16}):o.jsx(dx,{size:16})}),o.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[o.jsx(yA,{size:12})," ",X]})]})]}),o.jsx("div",{className:"flex justify-between items-end mb-8",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:e==="TPA"?"Seleksi Lanjutan":e+" Dashboard"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),C?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx(Yn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),o.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:o.jsx(G7,{})})]}):o.jsxs(o.Fragment,{children:[e==="KECERMATAN"&&o.jsx("div",{className:"animate-fade-in-up",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{te.play("click"),u("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:o.jsx(Kn,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),o.jsxs("button",{onClick:()=>{te.play("click"),u("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:o.jsx(Ei,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),o.jsxs("button",{onClick:()=>{te.play("click"),u("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:o.jsx(r7,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),o.jsxs("button",{onClick:()=>{te.play("click"),u("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:o.jsx(r9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),o.jsxs("button",{onClick:()=>{te.play("click"),u("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:o.jsx(Pr,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),o.jsxs("button",{onClick:()=>{te.play("click"),u("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:o.jsx(v9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&o.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(Uf,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:B,onChange:nt=>U(nt.target.value)}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>{te.play("click"),q&&q("TITLE_IDEAS",B)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[o.jsx(xs,{size:24})," Ide Judul"]}),o.jsxs("button",{onClick:()=>{te.play("click"),q&&q("OUTLINE",B)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[o.jsx(Ei,{size:24})," Buat Outline"]}),o.jsxs("button",{onClick:()=>{te.play("click"),q&&q("METHODOLOGY",B)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[o.jsx(uu,{size:24})," Cek Metodologi"]}),o.jsxs("button",{onClick:()=>{te.play("click"),q&&q("PARAPHRASE",B)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[o.jsx(J8,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&o.jsx("div",{className:"space-y-8 animate-fade-in-up",children:b?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(Yp,{size:20})," Materi Belajar"]}),o.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(p==null?void 0:p.type)==="pdf"&&p.content&&o.jsx("div",{className:"mb-6",children:o.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),o.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:o.jsx(NA,{text:(p==null?void 0:p.extractedText)||(p==null?void 0:p.content)||""})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:K2.map(nt=>{const ce={Brain:xs,Repeat:X9,MessageCircle:D9,Share2:l7,Search:uu,GraduationCap:ac,BookOpen:Yp,PenTool:Jp}[nt.icon]||xs;return o.jsxs("button",{onClick:()=>{te.play("click"),z(nt.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[o.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:o.jsx(ce,{size:24})}),o.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:nt.name}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:nt.desc})]},nt.id)})})]})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(fx,{size:20})," Input Materi"]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:Te?`PDF Terpilih: ${Te}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:B,disabled:!!Te,onChange:nt=>{U(nt.target.value)}}),o.jsx("input",{type:"file",ref:Q,accept:"application/pdf",className:"hidden",onChange:Xe}),o.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${Te?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var nt;return(nt=Q.current)==null?void 0:nt.click()},children:[o.jsx(Ei,{size:20}),o.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),Te&&o.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{size:16})," ",o.jsxs("span",{children:["File siap: ",o.jsx("b",{children:Te})]})]}),o.jsx("button",{onClick:()=>{Me(null),f&&f(null),Q.current&&(Q.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:o.jsx(Ro,{size:16})})]}),Z?o.jsxs("div",{className:"mb-6 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[o.jsx(Yn,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),o.jsx(xo,{height:"h-[300px]",className:"rounded-xl"})]}):(p==null?void 0:p.type)==="pdf"&&p.content&&o.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),o.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),o.jsxs("select",{value:J,onChange:nt=>le(nt.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),o.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),o.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),o.jsxs("select",{value:ye,onChange:nt=>Ue(nt.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),o.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),o.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),o.jsx("button",{onClick:()=>{te.play("click"),wt()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{te.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Ar,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),o.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),o.jsx(vr,{className:"group-hover:translate-x-2 transition-transform"})]}),Dt($2)]}),e==="TPA"&&o.jsx(o.Fragment,{children:N?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>{te.play("click"),R&&R(null)},className:"underline hover:text-indigo-600",children:"Ubah Jalur"}),o.jsx(vr,{size:14}),o.jsx("b",{className:"uppercase",children:N==="TPA_TBI"?"TPA & TBI":"Psikotes PKN STAN"})]}),o.jsxs("button",{onClick:()=>{te.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Ar,{size:24,className:"text-amber-400"}),"Simulasi ",N==="TPA_TBI"?"TPA & TBI":"Psikotes"," Full"]}),o.jsx("p",{className:"text-slate-400 text-sm mt-1",children:N==="TPA_TBI"?"65 Soal. 100 Menit.":"TIU, Logika Gambar, Kepribadian."})]}),o.jsx(vr,{className:"group-hover:translate-x-2 transition-transform"})]}),Dt(N==="TPA_TBI"?J2:Q2)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 animate-fade-in-up",children:[o.jsxs("button",{onClick:()=>{te.play("click"),R&&R("TPA_TBI")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-blue-500 dark:hover:border-blue-500 transition text-center group shadow-sm",children:[o.jsx(xs,{size:48,className:"mx-auto mb-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"TPA & TBI"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Pascasarjana & Umum"})]}),o.jsxs("button",{onClick:()=>{te.play("click"),R&&R("PSIKOTEST_KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 transition text-center group shadow-sm",children:[o.jsx(Of,{size:48,className:"mx-auto mb-4 text-purple-600 dark:text-purple-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Lanjutan I PKN STAN"})]})]})}),e==="PSIKOTEST"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{te.play("click"),l()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[o.jsx(b8,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),o.jsxs("button",{onClick:()=>{te.play("click"),a()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[o.jsx(xs,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),o.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),Dt(W2)]})]}),e==="INTERVIEW"&&Dt(X2),e==="SKD"&&(k?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>j(null),className:"underline",children:"Ubah Jalur"})," ",o.jsx(vr,{size:14})," ",o.jsx("b",{children:k})]}),o.jsxs("button",{onClick:()=>{te.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Ar,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),o.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),o.jsx(vr,{className:"group-hover:translate-x-2 transition-transform"})]}),Dt(Y2)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{te.play("click"),j("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(x9,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),o.jsxs("button",{onClick:()=>{te.play("click"),j("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(x8,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&o.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("button",{onClick:()=>{te.play("click"),s($e.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(Ps,{className:"text-amber-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),o.jsxs("button",{onClick:()=>{te.play("click"),s($e.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(xs,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),I>0&&o.jsxs("button",{onClick:()=>{te.play("click"),s($e.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[o.jsx(Pr,{className:"text-rose-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[I," Topik Lemah"]})]}),o.jsxs("button",{onClick:()=>{te.play("click"),L&&L()},className:"p-4 bg-white dark:bg-slate-800 border border-emerald-200 dark:border-emerald-900 rounded-xl hover:border-emerald-500 hover:shadow-md transition text-left",children:[o.jsx(So,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Analisis Akademik"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Target Skor & Review"})]}),o.jsxs("button",{onClick:()=>{te.play("click"),O&&O()},className:"p-4 bg-white dark:bg-slate-800 border border-indigo-200 dark:border-indigo-900 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(xA,{className:"text-indigo-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Battle Arena"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"1v1 Duel"})]})]})]})]})]})]})};function eG(){var Fr;const[n,e]=G.useState("SPLASH"),[t,s]=G.useState(null),[a,l]=G.useState(!1),[u,h]=G.useState(!0),[p,f]=G.useState("DASHBOARD"),[b,_]=G.useState(!1),[T,E]=G.useState(null),[I,C]=G.useState(null),[k,j]=G.useState(""),[M,z]=G.useState([]),[q,X]=G.useState(!1),[$,D]=G.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1,theme:"light"}),[N,R]=G.useState(null),[L,O]=G.useState(!1),[B,U]=G.useState(null),[Te,Me]=G.useState(!1),[J,le]=G.useState(""),[ye,Ue]=G.useState(null),[Z,H]=G.useState(null),[Q,he]=G.useState(null),[se,ue]=G.useState(new Set),[de,Ee]=G.useState("ANGKA"),[ht,Xe]=G.useState(null),[wt,Dt]=G.useState(null),[nt,et]=G.useState([]),[ce,Be]=G.useState(null),[Je,Qe]=G.useState(null),[Le,we]=G.useState(""),[Oe,He]=G.useState([]),[xn,Bt]=G.useState(null),[Ct,cn]=G.useState([]),[js,Un]=G.useState(!1),[_s,Ls]=G.useState(void 0),[Zi,Zt]=G.useState([]),[Us,Jn]=G.useState(!1),[un,Qn]=G.useState(null),[Ft,ri]=G.useState(void 0),[Oa,Os]=G.useState(!1),[Jt,On]=G.useState([]),[tn,Vs]=G.useState(null),[cs,us]=G.useState(null),st=(Y,be)=>us({msg:Y,type:be}),[oi,Rn]=G.useState([...Qv,...Wv,...Xv,...t_,...s_,...Zv,...e_,...n_]),Ai=async Y=>{try{const be=localStorage.getItem("fajmuls_active_session");if(be){const _e=JSON.parse(be);if(_e.uid===Y&&Date.now()-_e.timestamp<1440*60*1e3)return Qn(_e),!0;localStorage.removeItem("fajmuls_active_session")}}catch(be){console.error("Failed to parse saved session",be),localStorage.removeItem("fajmuls_active_session")}return!1},rc=Y=>{s(Y.category),Ue(Y.mode),He(Y.questions),Bt(Y.drillContent),Y.skdStream&&H(Y.skdStream),Y.tpaStream&&he(Y.tpaStream),Y.packageTitle&&ri(Y.packageTitle),Ls(Y),Qn(null),e("SESSION")},ea=()=>{localStorage.removeItem("fajmuls_active_session"),Qn(null)},Or=async()=>{if(te.play("click"),!(N!=null&&N.uid)||N.isGuest){st("Fitur ini hanya untuk pengguna login.","info");return}Jn(!0),e("RESUME_LIST");try{const Y=await RV(N.uid);Zt(Y)}catch{st("Gagal memuat sesi tersimpan.","error")}finally{Jn(!1)}},Va=async Y=>{te.play("click"),rc(Y),Y.id&&(N!=null&&N.uid)&&await yE(N.uid,Y.id)},ta=async Y=>{te.play("click"),N!=null&&N.uid&&(await yE(N.uid,Y),Zt(be=>be.filter(_e=>_e.id!==Y&&String(_e.timestamp)!==Y)),st("Sesi dihapus.","success"))};G.useEffect(()=>{const Y=localStorage.getItem("fajmuls_settings");if(Y){const _e=JSON.parse(Y);_e.theme||(_e.theme=_e.darkMode?"dark":"light"),D(_e)}else window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&D(_e=>({..._e,theme:"dark",darkMode:!0}));const be=EV(async _e=>{if(h(!0),_e)try{const ke=await Kp(_e.uid);if(ke){let Ne=ke;if(ke.gamification){const Ae=vV(ke.gamification);Ae.streak!==ke.gamification.streak&&(await xE(_e.uid,Ae),Ne={...ke,gamification:Ae})}R({uid:_e.uid,username:Ne.username,email:_e.email,photoURL:Ne.photoURL||_e.photoURL,gamification:Ne.gamification});const De=await rA(_e.uid);On(De),await Ai(_e.uid),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else R({uid:_e.uid,username:"",email:_e.email,photoURL:_e.photoURL}),e("USERNAME_SETUP")}catch(ke){console.error("Profile fetch error",ke)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const Ne=localStorage.getItem("fajmuls_guest_username"),De="guest-"+(Ne||"user");R({uid:De,username:Ne||"Tamu",email:null,isGuest:!0});const Ae=localStorage.getItem("fajmuls_guest_history");if(Ae)try{On(JSON.parse(Ae))}catch{}await Ai(De),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");h(!1),O(!1)});return()=>be()},[]),G.useEffect(()=>{if(k.trim().length===0){z([]),X(!1);return}const Y=k.toLowerCase(),be=[];rp.forEach(ke=>{(ke.name.toLowerCase().includes(Y)||ke.desc.toLowerCase().includes(Y))&&be.push({id:ke.id,label:ke.name,type:"CATEGORY"})}),[{id:"TES_KORAN",label:"Tes Koran / Pauli"},{id:"REACTION",label:"Reaction Time (Benchmark)"},{id:"AIM",label:"Aim Trainer (Benchmark)"},{id:"SEQUENCE",label:"Sequence Memory (Benchmark)"},{id:"CHIMP",label:"Chimp Test (Benchmark)"},{id:"VISUAL",label:"Visual Memory (Benchmark)"},{id:"NUMBER",label:"Number Memory (Benchmark)"},{id:"VERBAL",label:"Verbal Memory (Benchmark)"},{id:"TYPING",label:"Typing Test (Benchmark)"},{id:"BRIDGE",label:"Bridge Memory (Benchmark)"},{id:"MATCH",label:"Match Memory (Benchmark)"},{id:"KECERMATAN_ANGKA",label:"Kecermatan Angka Hilang"},{id:"KECERMATAN_HURUF",label:"Kecermatan Huruf Hilang"},{id:"KECERMATAN_SIMBOL",label:"Kecermatan Simbol Hilang"},{id:"KECERMATAN_SAMA_BEDA",label:"Kecermatan Sama Beda"},{id:"KECERMATAN_MATCHING",label:"Kecermatan Matching"},{id:"KECERMATAN_GROUPING",label:"Kecermatan Grouping"},{id:"UTBK_PU",label:"UTBK Penalaran Umum"},{id:"UTBK_PBM",label:"UTBK Pemahaman Bacaan & Menulis"},{id:"SKD_TWK",label:"SKD Tes Wawasan Kebangsaan"},{id:"SKD_TIU",label:"SKD Tes Intelegensia Umum"},{id:"SKD_TKP",label:"SKD Tes Karakteristik Pribadi"}].forEach(ke=>{ke.label.toLowerCase().includes(Y)&&be.push({id:ke.id,label:ke.label,type:"FEATURE"})}),z(be),X(be.length>0)},[k]);const li=Y=>{if(te.play("click"),j(""),X(!1),Y.type==="CATEGORY")Mn(Y.id);else if(Y.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if(Y.id.startsWith("KECERMATAN_")){s("KECERMATAN");const be=Y.id.replace("KECERMATAN_","");ws(be)}else Y.id.startsWith("UTBK_")?Mn("UTBK"):Y.id.startsWith("SKD_")?Mn("SKD"):(s("BENCHMARK"),Xe(Y.id),e("BENCHMARK"))},Uo=async()=>{Os(!0);const Y=[...Qv,...Wv,...Xv,...t_,...s_,...Zv,...e_,...n_];try{const be=await LV(),_e=new Set(Y.map(Ne=>Ne.id)),ke=be.filter(Ne=>!_e.has(Ne.id));Rn([...Y,...ke])}catch(be){console.error("Failed to load cloud packages",be),Rn(Y),st("Gagal memuat paket online. Menggunakan data offline.","error")}finally{Os(!1)}};G.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify($)),$.theme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),te.syncSettings($)},[$]);const Ts=async()=>{O(!0);try{const Y=await wV();await Kp(Y.uid)||(R({uid:Y.uid,username:"",email:Y.email,photoURL:Y.photoURL}),e("USERNAME_SETUP"))}catch{st("Gagal login dengan Google.","error"),O(!1)}},Ss=()=>{te.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),R({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const Y=localStorage.getItem("fajmuls_guest_history");if(Y)try{On(JSON.parse(Y))}catch{}else On([]);e("HOME")},nn=async Y=>{if(N!=null&&N.uid){O(!0);try{if(!await AV(Y)){st("Username sudah dipakai. Pilih yang lain.","error"),O(!1);return}await kV(N.uid,{username:Y,email:N.email||"",photoURL:N.photoURL||""}),R(_e=>_e?{..._e,username:Y,gamification:Qh}:null),On([]),te.play("success"),e("HOME")}catch{st("Gagal membuat profil.","error")}finally{O(!1)}}},yn=async()=>{te.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),N!=null&&N.isGuest||await NV(),R(null),On([]),e("LOGIN")},Bs=async Y=>{const be=[Y,...Jt];On(be),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(be,VE())):N!=null&&N.uid&&await bE(N.uid,Y)},Ba=async Y=>{const be=Jt.filter(_e=>_e.id!==Y);On(be),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(be)):N!=null&&N.uid&&await DV(N.uid,Y),st("Riwayat berhasil dihapus.","success"),te.play("click")},Oo=async Y=>{if(N!=null&&N.isGuest){Y.username&&(R(be=>be?{...be,username:Y.username}:null),localStorage.setItem("fajmuls_guest_username",Y.username),st("Nama Tamu diubah.","success"));return}if(N!=null&&N.uid)try{await CV(N.uid,Y),R(be=>be?{...be,...Y}:null),st("Profil berhasil diperbarui!","success")}catch(be){st(be.message||"Gagal memperbarui profil.","error")}},Vo=async Y=>{Un(!0);try{const be=await xP(Y);U({...Y,extractedText:be}),Me(!0)}catch{st("Gagal memproses materi. Coba lagi.","error")}finally{Un(!1)}},Bo=async(Y,be)=>{if(!be.trim()){st("Mohon isi judul atau topik.","error");return}Un(!0),Qe(Y);try{const _e=await yP(be,Y);we(_e),e("SESSION")}catch{st("Gagal generate konten skripsi.","error")}finally{Un(!1)}},Gs=async Y=>{if(!B){st("Materi hilang. Silakan input ulang.","error");return}Un(!0),Dt(Y),Ue($e.DRILL);try{if(Y==="ACTIVE_RECALL"||Y==="PBL"||Y==="PRACTICE"||Y==="TEACHING"){const be=await on($e.DRILL,"GENERAL",B,5,[],void 0,Y);He(be)}else if(Y==="SPACED_REPETITION"){const be=await bP(B);et(be)}else if(Y==="MIND_MAP"){const be=await vP(B);Be(be)}e("SESSION")}catch{st("Gagal memuat materi AI.","error")}finally{Un(!1)}},Ga=Y=>{if(Y.length===0){st("Tidak ada soal salah untuk dikerjakan.","info");return}He(Y),Ue($e.DRILL),ri("Smart Review: Weakness Attack"),Ls(void 0),e("SESSION")},Es=async(Y,be,_e)=>{if(t){if(ri(void 0),Ls(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!J&&Y!==$e.SIMULATION&&Y!==$e.WEAKNESS){st(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!Z){st("Harap pilih jalur (CPNS / Kedinasan).","error");return}Un(!0),Ue(Y),cn([]),He([]),Bt(null);try{const ke=J;if(Y===$e.DRILL){const Ne=await _P(t,ke,Z||void 0);Bt(Ne),Ne&&Ne.question&&He([Ne.question])}else if(Y===$e.SIMULATION&&t==="SKD"&&Z){const Ne=await UT(Z);He(Ne||[])}else if(Y===$e.SIMULATION&&t==="UTBK"){const Ne=await OT();He(Ne||[])}else if(Y===$e.SIMULATION&&t==="TPA")if(Q==="PSIKOTEST_KEDINASAN"){const Ne=await BT();He(Ne||[])}else{const Ne=await VT();He(Ne||[])}else if(Y===$e.SIMULATION&&t==="PSIKOTEST"){const Ne=await GT();He(Ne||[])}else{let Ne=_e||5;t==="PSIKOTEST"&&Y===$e.SIMULATION&&(Ne=40),t==="INTERVIEW"&&(Ne=3);const De=await on(Y,t,ke,Ne,Array.from(se),Z||void 0,void 0,be);He(De||[])}e("SESSION")}catch(ke){console.error(ke),st("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{Un(!1)}}},An=async(Y,be,_e=!1)=>{let ke;if(be)ke={...be,isAborted:_e};else{cn(Y);let Ne=0,De=0,Ae;if(t==="SKD"&&ye===$e.SIMULATION){let je=0,Ke=0,Ze=0;Y.forEach(Ge=>{var Tt,Gt,qt,dn,kn,bn;const dt=Oe.find(za=>za.id===Ge.questionId);dt&&((Gt=(Tt=dt.metadata)==null?void 0:Tt.subtest)!=null&&Gt.includes("TWK")&&(je+=Ge.scoreEarned),(dn=(qt=dt.metadata)==null?void 0:qt.subtest)!=null&&dn.includes("TIU")&&(Ke+=Ge.scoreEarned),(bn=(kn=dt.metadata)==null?void 0:kn.subtest)!=null&&bn.includes("TKP")&&(Ze+=Ge.scoreEarned))}),Ne=je+Ke+Ze,De=550,Ae={twk:je,tiu:Ke,tkp:Ze,total:Ne,passed:je>=65&&Ke>=80&&Ze>=166}}else if(t==="UTBK"&&ye===$e.SIMULATION){const je=kn=>{const bn=Oe.filter(ki=>{var ci,Fs;return(Fs=(ci=ki.metadata)==null?void 0:ci.subtest)==null?void 0:Fs.includes(kn)});if(!bn.length)return 0;const za=Y.filter(ki=>{var ci,Fs,qr;return ki.isCorrect&&((qr=(Fs=(ci=Oe.find(Ci=>Ci.id===ki.questionId))==null?void 0:ci.metadata)==null?void 0:Fs.subtest)==null?void 0:qr.includes(kn))}).length;return Math.round(200+za/bn.length*600)},Ke=je("Penalaran Umum"),Ze=je("PPU"),Ge=je("PBM"),dt=je("Kuantitatif"),Tt=je("Literasi B.Indo"),Gt=je("Literasi B.Inggris"),qt=je("Penalaran Matematika"),dn=Math.round((Ke+Ze+Ge+dt+Tt+Gt+qt)/7);Ne=dn,De=1e3,Ae={pu:Ke,ppu:Ze,pbm:Ge,pk:dt,lbi:Tt,lbe:Gt,pm:qt,average:dn}}else if(t==="TPA"&&ye===$e.SIMULATION)if(Q==="PSIKOTEST_KEDINASAN"){let je=0,Ke=0,Ze=0,Ge=0;Y.forEach(qt=>{const dn=Oe.find(kn=>kn.id===qt.questionId);dn&&(dn.metadata.subtest.includes("TIU")?je+=qt.scoreEarned:dn.metadata.subtest.includes("Gambar")||dn.metadata.subtest.includes("Figural")?Ke+=qt.scoreEarned:dn.metadata.subtest.includes("Kepribadian")&&(Ze+=qt.scoreEarned,Ge++))});const dt=Ge*5,Tt=dt>0?Math.round(Ze/dt*100):0;Ne=je+Ke+Tt,De=500;const Gt=Tt>=70;Ae={tiuScore:je,figuralScore:Ke,personalityScore:Tt,passed:Gt,verdict:Gt?"MEMENUHI SYARAT":"TIDAK MEMENUHI SYARAT"}}else{let je=0,Ke=0;Y.forEach(Ge=>{var Tt,Gt,qt,dn;const dt=Oe.find(kn=>kn.id===Ge.questionId);dt&&(((Gt=(Tt=dt.metadata)==null?void 0:Tt.subtest)==null?void 0:Gt.includes("TBI"))||((dn=(qt=dt.metadata)==null?void 0:qt.subtest)==null?void 0:dn.includes("Inggris"))?Ge.isCorrect&&(Ke+=5):Ge.selectedAnswer&&(Ge.isCorrect?je+=4:je-=1))});const Ze=je>=67&&Ke>=30;Ne=je+Ke,De=280,Ae={tpaScore:je,tbiScore:Ke,passed:Ze}}else if(t==="INTERVIEW"){const je=Y.map(Ke=>{var Ze;return((Ze=Ke.interviewFeedback)==null?void 0:Ze.score)||0});Ne=Math.round(je.reduce((Ke,Ze)=>Ke+Ze,0)/(je.length||1)),De=100}else if(t==="PSIKOTEST"&&ye===$e.SIMULATION){const je=Y.filter(Tt=>Tt.isCorrect).length,Ke=Oe.length,Ze=je/Ke,Ge=Math.round(70+Ze*75);let dt=Ge>=130?"Very Superior":Ge>=120?"Superior":Ge>=110?"High Average":Ge>=90?"Average":"Low Average";Ne=Ge,De=160,Ae={iqScore:Ge,classification:dt}}else if(t==="GENERAL"){const je=Y.reduce((Ke,Ze)=>Ke+(Ze.scoreEarned||0),0);Ne=Math.round(je/(Y.length||1)),De=100}else{const je=Y.filter(Ke=>Ke.isCorrect).length;Ne=Math.round(je/Oe.length*100),De=100}ke={id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:Z||void 0,tpaStream:Q||void 0,score:Ne,maxScore:De,details:Ae,questions:Oe,answers:Y,isAborted:_e,packageTitle:Ft}}if(await Bs(ke),!_e&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)&&N.gamification){const Ne=bV(ke.score,ke.answers||[],ye===$e.SIMULATION,ke.category||"");let De={...N.gamification};De.xp+=Ne;const Ae=gE(De.xp);Ae>De.level&&(De.level=Ae,te.play("levelUp"),E({level:Ae}));const je=[ke,...Jt],Ke=_V(De,je);if(Ke.length>0){const Ze=Ke.map(Tt=>Tt.id);De.unlockedAchievements=[...De.unlockedAchievements,...Ze];const Ge=Ke.reduce((Tt,Gt)=>Tt+Gt.xpReward,0);De.xp+=Ge;const dt=gE(De.xp);dt>De.level&&(De.level=dt,T||(te.play("levelUp"),E({level:dt}))),C(Ke[0]),te.play("success")}await xE(N.uid,De),R({...N,gamification:De})}if(!_e&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)){if(ke.category==="KECERMATAN"&&ke.details){const Ne=ke.details;vE("KECERMATAN",Ne.mode||"General",ke.score,N.username,N.uid)}else if(t&&ye===$e.SIMULATION){let Ne="General";t==="SKD"&&Z&&(Ne=Z),t==="TPA"&&Q&&(Ne=Q),vE(t,Ne,ke.score,N.username,N.uid,Ft)}}ri(void 0),be?(be.category!=="BENCHMARK"||_e)&&e("HOME"):e("RESULTS")},Mn=Y=>{te.play("click"),s(Y),ri(void 0),Ls(void 0),Y==="BUTAWRNA"?e("COLORBLIND"):Y==="BENCHMARK"?(Xe(null),f("DASHBOARD"),e("BENCHMARK")):(e("DASHBOARD"),U(null),Me(!1),le(""),H(null),he(null),Dt(null),Qe(null),we(""))},ws=Y=>{Ee(Y),e("TES_KECERMATAN")},sn=()=>{if(Jt.length===0){st("Belum ada riwayat untuk disimpan.","info");return}const Y=JSON.stringify(Jt,VE(),2),be=new Blob([Y],{type:"application/json"}),_e=URL.createObjectURL(be),ke=document.createElement("a");ke.href=_e,ke.download=`Fajmuls_History_${(N==null?void 0:N.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(_e),st("Export berhasil!","success")},Vr=Y=>{const be=new FileReader;be.onload=_e=>{var ke;try{const Ne=(ke=_e.target)==null?void 0:ke.result,De=JSON.parse(Ne);if(!Array.isArray(De))throw new Error("Format salah");const Ae=new Set(Jt.map(Ze=>Ze.id)),je=De.filter(Ze=>!Ae.has(Ze.id)),Ke=[...Jt,...je].sort((Ze,Ge)=>new Date(Ge.date).getTime()-new Date(Ze.date).getTime());On(Ke),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(Ke)):N!=null&&N.uid&&je.forEach(Ze=>{bE(N.uid,Ze)}),st(`Berhasil memuat ${je.length} riwayat baru.`,"success")}catch{st("Gagal membaca file JSON.","error")}},be.readAsDataURL(Y)},Br=Y=>{He(Y.questions),Ue($e.SIMULATION),ri(Y.title),Ls(void 0),e("SESSION")},zs=async Y=>{if(t)try{let be=[],_e=60;t==="SKD"?(be=await UT(Z||"CPNS"),_e=100):t==="UTBK"?(be=await OT(),_e=195):t==="TPA"?Q==="PSIKOTEST_KEDINASAN"?(be=await BT(),_e=90):(be=await VT(),_e=100):t==="PSIKOTEST"?(be=await GT(),_e=40):be=await on($e.SIMULATION,t,"SIMULATION",20,[],Z||void 0,void 0,"HOTS");const De=oi.filter(Ge=>Ge.category!==t?!1:t==="SKD"?Ge.skdStream===Z:t==="TPA"?Ge.tpaStream===Q:!0).reduce((Ge,dt)=>{const Tt=dt.title.match(/(\d+)$/);if(Tt){const Gt=parseInt(Tt[1]);return Gt>Ge?Gt:Ge}return Ge},0)+1;let Ae="",je="gen";t==="SKD"?Z==="CPNS"?(Ae=`TO SKD CPNS ${De}`,je+="-skd-cpns"):Z==="KEDINASAN"?(Ae=`TO SKD Kedinasan ${De}`,je+="-skd-kedinasan"):(Ae=`TO SKD ${De}`,je+="-skd-general"):t==="UTBK"?(Ae=`TO UTBK ${De}`,je+="-utbk"):t==="TPA"?Q==="PSIKOTEST_KEDINASAN"?(Ae=`TO Psikotes Kedinasan ${De}`,je+="-tpa-psikotest_kedinasan"):(Ae=`TO TPA TBI ${De}`,je+="-tpa-tbi"):t==="PSIKOTEST"?(Ae=`TO Psikotest ${De}`,je+="-psikotest"):(Ae=`TO ${t} ${De}`,je+=`-${t.toLowerCase()}`);const Ze={id:`${je}-${De}-${Date.now()}`,title:Ae,category:t,skdStream:Z||void 0,tpaStream:Q||void 0,questions:be,durationMinutes:_e,isAiGenerated:!0,version:"v3",createdAt:new Date().toISOString()};await rh(Ze),Rn(Ge=>[Ze,...Ge]),st(`Paket baru "${Ae}" (v3) berhasil dibuat dan disimpan!`,"success")}catch(be){console.error(be),st("Gagal membuat paket soal. Coba lagi.","error")}},Hs=async Y=>{if(Rn(be=>be.filter(_e=>_e.id!==Y)),Y.startsWith("gen-")||Y.startsWith("pkg-"))try{await UV(Y),st("Paket dihapus dari database.","success")}catch(be){console.error(be)}else st("Paket dihapus dari tampilan lokal.","success")},Gr=Y=>{Array.from(Y).forEach(be=>{const _e=new FileReader;_e.onload=async ke=>{var Ne;try{const De=(Ne=ke.target)==null?void 0:Ne.result,Ae=JSON.parse(De);Ae.id&&Ae.questions&&(await rh(Ae),Rn(je=>je.find(Ke=>Ke.id===Ae.id)?je:[Ae,...je]),st(`Paket "${Ae.title}" diimpor dan disimpan.`,"success"))}catch{st("File tidak valid.","error")}},_e.readAsDataURL(be)})},zr=async()=>{if(t){Os(!0);try{const Y=oi.filter(De=>De.category!==t?!1:t==="SKD"?De.skdStream===Z:t==="TPA"?De.tpaStream===Q:!0),be=new Map;Y.forEach(De=>{const Ae=De.title.trim();be.has(Ae)||be.set(Ae,[]),be.get(Ae).push(De)});const _e=Array.from(be.values()).filter(De=>De.length>1);if(_e.length===0){st("Tidak ditemukan duplikasi.","info"),Os(!1);return}const ke=[],Ne=[...oi];for(const De of _e){De.sort((Ge,dt)=>(Ge.createdAt||"").localeCompare(dt.createdAt||""));const Ae=De[0],je=Ae.title.match(/^(.*?)(\d+)$/),Ke=je?je[1]:Ae.title+" ";let Ze=0;Y.forEach(Ge=>{if(Ge.title.startsWith(Ke)){const dt=Ge.title.match(/(\d+)$/);if(dt){const Tt=parseInt(dt[1]);Tt>Ze&&(Ze=Tt)}}});for(let Ge=1;Ge<De.length;Ge++){const dt=De[Ge];Ze++;const Tt=`${Ke}${Ze}`,Gt={...dt,title:Tt};ke.push(rh(Gt));const qt=Ne.findIndex(dn=>dn.id===dt.id);qt!==-1&&(Ne[qt]=Gt)}}await Promise.all(ke),Rn(Ne),st(`Berhasil memperbaiki ${ke.length} duplikasi.`,"success")}catch(Y){console.error(Y),st("Gagal memperbaiki duplikasi.","error")}finally{Os(!1)}}},Hr=async()=>{if(t){Os(!0);try{const Y=oi.filter(Ne=>Ne.category!==t?!1:t==="SKD"?Ne.skdStream===Z:t==="TPA"?Ne.tpaStream===Q:!0);Y.sort((Ne,De)=>new Date(Ne.createdAt).getTime()-new Date(De.createdAt).getTime());const be=[],_e=[...oi];let ke=0;Y.forEach((Ne,De)=>{const Ae=De+1,je=Ne.title.match(/^(.*?)(\d+)$/);if(je){const Ke=je[1];if(parseInt(je[2])!==Ae){const Ge=`${Ke}${Ae}`,dt={...Ne,title:Ge};be.push(rh(dt));const Tt=_e.findIndex(Gt=>Gt.id===Ne.id);Tt!==-1&&(_e[Tt]=dt),ke++}}}),be.length>0?(await Promise.all(be),Rn(_e),st(`Berhasil mengurutkan ulang ${ke} paket.`,"success")):st("Urutan paket sudah benar.","info")}catch(Y){console.error(Y),st("Gagal mengurutkan paket.","error")}finally{Os(!1)}}};return n==="SPLASH"?o.jsx(z7,{onComplete:()=>e(N?"HOME":"LOGIN")}):u?o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:o.jsx(Yn,{className:"animate-spin text-indigo-600 w-10 h-10"})}):n==="LOGIN"?o.jsx(qB,{onGoogleLogin:Ts,onGuestLogin:Ss,isLoading:L}):n==="USERNAME_SETUP"?o.jsx(KB,{onSubmit:nn,isLoading:L}):o.jsxs(o.Fragment,{children:[cs&&o.jsx(zB,{message:cs.msg,type:cs.type,onClose:()=>us(null)}),I&&o.jsx(UB,{achievement:I,onClose:()=>C(null)}),T&&o.jsx(LB,{newLevel:T.level,onClose:()=>E(null)}),o.jsx(jB,{isOpen:b,onClose:()=>_(!1),profile:(N==null?void 0:N.gamification)||Qh}),un&&o.jsx(HB,{session:un,onResume:()=>Va(un),onDiscard:ea}),o.jsx(H7,{isOpen:a,onClose:()=>l(!1),settings:$,onUpdate:D,userProfile:N,onUpdateProfile:Oo}),$.theme==="fajmuls"&&o.jsx("div",{className:"fixed inset-0 -z-10 fajmuls-bg",children:o.jsx("div",{className:"absolute inset-0 fajmuls-overlay"})}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"&&o.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex flex-col sm:flex-row justify-between items-center animate-fade-in-down gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto cursor-pointer",onClick:()=>{te.play("click"),e("HOME")},children:[o.jsx("img",{src:Th,alt:"Logo",className:"w-8 h-8 object-contain"}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),o.jsxs("div",{className:"flex-1 max-w-lg relative w-full sm:w-auto mx-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(uu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),o.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari: UTBK, Pauli, Reaction Time...",value:k,onChange:Y=>j(Y.target.value)})]}),q&&M.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:M.map(Y=>o.jsxs("button",{onClick:()=>li(Y),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:Y.label}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${Y.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:Y.type})]},Y.id))})]}),!(N!=null&&N.isGuest)&&(N==null?void 0:N.gamification)&&o.jsx("div",{className:"w-full sm:w-auto flex justify-center",children:o.jsx(PB,{profile:N.gamification,onOpenAchievements:()=>{te.play("click"),_(!0)}})}),o.jsxs("div",{className:"flex items-center gap-3 hidden sm:flex",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-xl transition",onClick:()=>{!(N!=null&&N.uid)||N.isGuest?st("Login untuk akses Social Hub","info"):(te.play("click"),e("SOCIAL_HUB"))},children:[o.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[o.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(N==null?void 0:N.username)||"Tamu"}),o.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:N!=null&&N.isGuest?"Mode Tamu":"Online"})]}),o.jsx(GB,{user:N})]}),o.jsx("button",{onClick:()=>{te.play("click"),l(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:o.jsx(pA,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),o.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"?"pt-32 sm:pt-20":""}`,children:[n==="HOME"&&o.jsxs("div",{className:`min-h-screen p-6 flex flex-col items-center justify-center relative transition-colors duration-300 ${$.theme==="fajmuls"?"bg-transparent":"bg-slate-50 dark:bg-slate-900"}`,children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("img",{src:Th,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:rp.map(Y=>{const be=$.theme==="fajmuls"?"bg-white/60 backdrop-blur-xl border-white/50 shadow-xl hover:bg-white/80 hover:scale-[1.02] text-slate-900":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:-translate-y-1 hover:shadow-xl";return o.jsxs("button",{onClick:()=>Mn(Y.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden ${be}`,children:[Y.id==="BENCHMARK"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110 ${$.theme==="fajmuls"?"bg-orange-100":"bg-red-50 dark:bg-red-900/20"}`}),o.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mb-6 transition-colors relative z-10 ${$.theme==="fajmuls"?"bg-orange-100 text-orange-600":"bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400 group-hover:bg-red-600 group-hover:text-white"}`,children:o.jsx(Kn,{size:24})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110 ${$.theme==="fajmuls"?"bg-cyan-100":"bg-indigo-50 dark:bg-indigo-900/20"}`}),o.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mb-6 transition-colors relative z-10 ${$.theme==="fajmuls"?"bg-blue-100 text-blue-600":"bg-indigo-50 dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 group-hover:bg-indigo-600 group-hover:text-white"}`,children:Y.id==="GENERAL"?o.jsx(Ei,{}):Y.id==="SKD"?o.jsx(Of,{}):Y.id==="INTERVIEW"?o.jsx(Bf,{}):Y.id==="BUTAWRNA"?o.jsx(_u,{}):Y.id==="PSIKOTEST"?o.jsx(xs,{}):Y.id==="SKRIPSI"?o.jsx(Uf,{}):Y.id==="KECERMATAN"?o.jsx(Io,{}):o.jsx(ac,{})})]}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:Y.name}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:Y.desc})]},Y.id)})}),o.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[o.jsxs("button",{onClick:()=>{te.play("click"),e("HISTORY")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${$.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(Pu,{size:18})," Riwayat"]}),o.jsxs("button",{onClick:Or,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 dark:shadow-none border border-indigo-600 font-bold hover:bg-indigo-700 transition",children:[o.jsx(M8,{size:18})," Lanjutkan TO"]}),o.jsxs("button",{onClick:()=>{te.play("click"),e("GLOBAL_LEADERBOARD")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${$.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(vs,{size:18,className:"text-amber-500"})," Global Rank"]}),o.jsxs("button",{onClick:()=>{te.play("click"),!(N!=null&&N.uid)||N.isGuest?st("Login diperlukan untuk fitur sosial.","info"):e("SOCIAL_HUB")},className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${$.theme==="fajmuls"?"bg-white/80 backdrop-blur text-slate-700 border-white/50 hover:bg-white":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(ql,{size:18,className:"text-blue-500"})," Social"]}),o.jsxs("button",{onClick:yn,className:`flex items-center gap-2 px-6 py-3 rounded-xl shadow-sm border font-bold transition ${$.theme==="fajmuls"?"bg-white/50 border-rose-200 text-rose-600 hover:bg-rose-50":"bg-rose-50 dark:bg-rose-900/20 border-rose-100 dark:border-rose-900 text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40"}`,children:[o.jsx(A9,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&o.jsx(ZB,{category:t,onBack:()=>{te.play("back"),e("HOME")},onStartSession:Es,onOpenTOSelection:()=>{te.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{te.play("click"),e("TES_KORAN")},onStartTesKecermatan:ws,onGeneralInputSubmit:Vo,generalInput:B,setGeneralInput:U,isReadingMaterial:Te,onResetMaterial:()=>{Me(!1),U(null)},onSubtestSelect:le,selectedSubtest:J,weakTopicsCount:se.size,loading:js,skdStream:Z,onSkdStreamSelect:H,onHistory:()=>{te.play("click"),e("HISTORY")},onStartGeneralSession:Gs,onStartSkripsiSession:Bo,username:(N==null?void 0:N.username)||"Guest",isDarkMode:$.darkMode,onToggleDarkMode:()=>{D(Y=>({...Y,darkMode:!Y.darkMode,theme:Y.darkMode?"light":"dark"}))},tpaStream:Q,onTpaStreamSelect:he,onOpenAcademicHub:()=>{te.play("click"),e("ACADEMIC_HUB")},onBattle:()=>{!(N!=null&&N.uid)||N.isGuest?st("Login diperlukan untuk Battle Mode.","info"):(te.play("click"),e("BATTLE"))}}),n==="TO_SELECTION"&&o.jsx(q7,{category:t,skdStream:Z||void 0,tpaStream:Q||void 0,availablePackages:oi,history:Jt,onSelectPackage:Br,onGenerateNew:zs,onDeletePackage:Hs,onImportPackage:Gr,onFixDuplicates:zr,onFixGaps:Hr,onBack:()=>{te.play("back"),e("DASHBOARD")},showToast:st,confirmEnabled:$.confirmActions,onRefresh:Uo,isLoading:Oa}),n==="RESUME_LIST"&&o.jsx(XB,{sessions:Zi,onBack:()=>{te.play("back"),e("HOME")},onResume:Va,onDelete:ta,loading:Us}),n==="ACADEMIC_HUB"&&o.jsx(OB,{history:Jt,category:t,onBack:()=>{te.play("back"),e("DASHBOARD")},onStartSmartReview:Ga}),n==="SOCIAL_HUB"&&N&&o.jsx(VB,{userProfile:N,history:Jt,onBack:()=>{te.play("back"),e("HOME")},onUpdateProfile:Oo}),n==="BATTLE"&&N&&o.jsx(BB,{userProfile:N,category:t||"SKD",onBack:()=>{te.play("back"),e("DASHBOARD")}}),n==="SESSION"&&(t==="SKRIPSI"?o.jsx($B,{result:Le,feature:Je,onBack:()=>{te.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?o.jsx(YB,{questions:Oe,onComplete:Y=>An(Y)}):t==="GENERAL"&&wt==="SPACED_REPETITION"?o.jsx(JB,{flashcards:nt,onFinish:()=>{te.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&wt==="MIND_MAP"?o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",o.jsxs("button",{onClick:()=>{te.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[o.jsx(ft,{size:18})," Kembali"]})," ",o.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",o.jsx(B7,{data:ce})," "]}):t==="GENERAL"&&wt==="FEYNMAN"?o.jsx(QB,{topic:(B==null?void 0:B.content)||"",onFinish:()=>{te.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&wt==="SQ3R"?o.jsx(WB,{topic:(B==null?void 0:B.content)||"",onFinish:()=>{te.play("back"),e("DASHBOARD")}}):o.jsx(eB,{mode:ye,questions:Oe,drillContent:xn,onComplete:(Y,be,_e)=>An(Y,be,_e),isSkdSimulation:ye===$e.SIMULATION&&t==="SKD",isUtbkSimulation:ye===$e.SIMULATION&&t==="UTBK",category:t,showToast:st,initialState:_s,userId:N==null?void 0:N.uid,skdStream:Z,tpaStream:Q,packageTitle:Ft,onSaveAndExit:()=>e("HOME")})),n==="TES_KORAN"&&o.jsx(aB,{onBack:()=>e("DASHBOARD"),onComplete:Y=>An([],Y)}),n==="TES_KECERMATAN"&&o.jsx(rB,{initialMode:de,onBack:()=>e("DASHBOARD"),onComplete:Y=>An([],Y)}),n==="BENCHMARK"&&o.jsx(RB,{onBack:()=>e("HOME"),onComplete:Y=>An([],Y),username:(N==null?void 0:N.username)||"Guest",history:Jt,isGuest:N==null?void 0:N.isGuest,initialMode:ht||void 0,initialTab:p}),n==="GLOBAL_LEADERBOARD"&&o.jsx(DB,{onBack:()=>{te.play("back"),e("HOME")},userProfile:N,onOpenHumanBenchmark:()=>{te.play("click"),s("BENCHMARK"),Xe(null),f("RANKING"),e("BENCHMARK")}}),n==="RESULTS"&&o.jsx($7,{answers:Ct,questions:Oe,onHome:()=>{te.play("back"),e("HOME")},onRetry:()=>{te.play("click"),Es(ye)},category:t,details:(Fr=Jt[0])==null?void 0:Fr.details}),n==="HISTORY"&&o.jsx(J7,{history:Jt,onBack:()=>{te.play("back"),e("HOME")},onReview:Y=>{te.play("click"),Vs(Y),e("REVIEW")},username:(N==null?void 0:N.username)||"Guest",onExport:sn,onImport:Vr,isDarkMode:$.darkMode,onDelete:Ba}),n==="REVIEW"&&o.jsx(Q7,{item:tn,onBack:()=>{te.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&o.jsx(mB,{onBack:()=>{te.play("back"),e("HOME")},onComplete:Y=>An([],Y)})]})]})}const AA=document.getElementById("root");if(!AA)throw new Error("Could not find root element to mount to");const tG=m2.createRoot(AA);tG.render(o.jsx(GE.StrictMode,{children:o.jsx(eG,{})}));
