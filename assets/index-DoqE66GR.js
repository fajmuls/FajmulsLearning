(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function sT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var im={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function LA(){if(Rx)return Hl;Rx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return Hl.Fragment=e,Hl.jsx=t,Hl.jsxs=t,Hl}var Mx;function UA(){return Mx||(Mx=1,im.exports=LA()),im.exports}var u=UA(),am={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function jA(){if(Dx)return Fe;Dx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function N(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,C={};function O(z,se,Z){this.props=z,this.context=se,this.refs=C,this.updater=Z||w}O.prototype.isReactComponent={},O.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},O.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=O.prototype;function G(z,se,Z){this.props=z,this.context=se,this.refs=C,this.updater=Z||w}var te=G.prototype=new j;te.constructor=G,I(te,O.prototype),te.isPureReactComponent=!0;var ae=Array.isArray;function le(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function R(z,se,Z){var K=Z.ref;return{$$typeof:n,type:z,key:se,ref:K!==void 0?K:null,props:Z}}function U(z,se){return R(z.type,se,z.props)}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function B(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Z){return se[Z]})}var V=/\/+/g;function ge(z,se){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):se.toString(36)}function Me(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(le,le):(z.status="pending",z.then(function(se){z.status==="pending"&&(z.status="fulfilled",z.value=se)},function(se){z.status==="pending"&&(z.status="rejected",z.reason=se)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function J(z,se,Z,K,$){var ue=typeof z;(ue==="undefined"||ue==="boolean")&&(z=null);var ye=!1;if(z===null)ye=!0;else switch(ue){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(z.$$typeof){case n:case e:ye=!0;break;case v:return ye=z._init,J(ye(z._payload),se,Z,K,$)}}if(ye)return $=$(z),ye=K===""?"."+ge(z,0):K,ae($)?(Z="",ye!=null&&(Z=ye.replace(V,"$&/")+"/"),J($,se,Z,"",function(Xe){return Xe})):$!=null&&(L($)&&($=U($,Z+($.key==null||z&&z.key===$.key?"":(""+$.key).replace(V,"$&/")+"/")+ye)),se.push($)),1;ye=0;var Se=K===""?".":K+":";if(ae(z))for(var Ce=0;Ce<z.length;Ce++)K=z[Ce],ue=Se+ge(K,Ce),ye+=J(K,se,Z,ue,$);else if(Ce=N(z),typeof Ce=="function")for(z=Ce.call(z),Ce=0;!(K=z.next()).done;)K=K.value,ue=Se+ge(K,Ce++),ye+=J(K,se,Z,ue,$);else if(ue==="object"){if(typeof z.then=="function")return J(Me(z),se,Z,K,$);throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ye}function ce(z,se,Z){if(z==null)return z;var K=[],$=0;return J(z,K,"","",function(ue){return se.call(Z,ue,$++)}),K}function be(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(Z){(z._status===0||z._status===-1)&&(z._status=1,z._result=Z)},function(Z){(z._status===0||z._status===-1)&&(z._status=2,z._result=Z)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var Ae=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},xe={map:ce,forEach:function(z,se,Z){ce(z,function(){se.apply(this,arguments)},Z)},count:function(z){var se=0;return ce(z,function(){se++}),se},toArray:function(z){return ce(z,function(se){return se})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Fe.Activity=_,Fe.Children=xe,Fe.Component=O,Fe.Fragment=t,Fe.Profiler=r,Fe.PureComponent=G,Fe.StrictMode=s,Fe.Suspense=g,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},Fe.cache=function(z){return function(){return z.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(z,se,Z){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var K=I({},z.props),$=z.key;if(se!=null)for(ue in se.key!==void 0&&($=""+se.key),se)!D.call(se,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&se.ref===void 0||(K[ue]=se[ue]);var ue=arguments.length-2;if(ue===1)K.children=Z;else if(1<ue){for(var ye=Array(ue),Se=0;Se<ue;Se++)ye[Se]=arguments[Se+2];K.children=ye}return R(z.type,$,K)},Fe.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Fe.createElement=function(z,se,Z){var K,$={},ue=null;if(se!=null)for(K in se.key!==void 0&&(ue=""+se.key),se)D.call(se,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&($[K]=se[K]);var ye=arguments.length-2;if(ye===1)$.children=Z;else if(1<ye){for(var Se=Array(ye),Ce=0;Ce<ye;Ce++)Se[Ce]=arguments[Ce+2];$.children=Se}if(z&&z.defaultProps)for(K in ye=z.defaultProps,ye)$[K]===void 0&&($[K]=ye[K]);return R(z,ue,$)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(z){return{$$typeof:h,render:z}},Fe.isValidElement=L,Fe.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:be}},Fe.memo=function(z,se){return{$$typeof:m,type:z,compare:se===void 0?null:se}},Fe.startTransition=function(z){var se=M.T,Z={};M.T=Z;try{var K=z(),$=M.S;$!==null&&$(Z,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(le,Ae)}catch(ue){Ae(ue)}finally{se!==null&&Z.types!==null&&(se.types=Z.types),M.T=se}},Fe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Fe.use=function(z){return M.H.use(z)},Fe.useActionState=function(z,se,Z){return M.H.useActionState(z,se,Z)},Fe.useCallback=function(z,se){return M.H.useCallback(z,se)},Fe.useContext=function(z){return M.H.useContext(z)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(z,se){return M.H.useDeferredValue(z,se)},Fe.useEffect=function(z,se){return M.H.useEffect(z,se)},Fe.useEffectEvent=function(z){return M.H.useEffectEvent(z)},Fe.useId=function(){return M.H.useId()},Fe.useImperativeHandle=function(z,se,Z){return M.H.useImperativeHandle(z,se,Z)},Fe.useInsertionEffect=function(z,se){return M.H.useInsertionEffect(z,se)},Fe.useLayoutEffect=function(z,se){return M.H.useLayoutEffect(z,se)},Fe.useMemo=function(z,se){return M.H.useMemo(z,se)},Fe.useOptimistic=function(z,se){return M.H.useOptimistic(z,se)},Fe.useReducer=function(z,se,Z){return M.H.useReducer(z,se,Z)},Fe.useRef=function(z){return M.H.useRef(z)},Fe.useState=function(z){return M.H.useState(z)},Fe.useSyncExternalStore=function(z,se,Z){return M.H.useSyncExternalStore(z,se,Z)},Fe.useTransition=function(){return M.H.useTransition()},Fe.version="19.2.3",Fe}var Px;function dp(){return Px||(Px=1,am.exports=jA()),am.exports}var F=dp();const OA=sT(F);var rm={exports:{}},Fl={},om={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function GA(){return Vx||(Vx=1,(function(n){function e(J,ce){var be=J.length;J.push(ce);e:for(;0<be;){var Ae=be-1>>>1,xe=J[Ae];if(0<r(xe,ce))J[Ae]=ce,J[be]=xe,be=Ae;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ce=J[0],be=J.pop();if(be!==ce){J[0]=be;e:for(var Ae=0,xe=J.length,z=xe>>>1;Ae<z;){var se=2*(Ae+1)-1,Z=J[se],K=se+1,$=J[K];if(0>r(Z,be))K<xe&&0>r($,Z)?(J[Ae]=$,J[K]=be,Ae=K):(J[Ae]=Z,J[se]=be,Ae=se);else if(K<xe&&0>r($,be))J[Ae]=$,J[K]=be,Ae=K;else break e}}return ce}function r(J,ce){var be=J.sortIndex-ce.sortIndex;return be!==0?be:J.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var g=[],m=[],v=1,_=null,T=3,N=!1,w=!1,I=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function te(J){for(var ce=t(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=J)s(m),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(m)}}function ae(J){if(I=!1,te(J),!w)if(t(g)!==null)w=!0,le||(le=!0,B());else{var ce=t(m);ce!==null&&Me(ae,ce.startTime-J)}}var le=!1,M=-1,D=5,R=-1;function U(){return C?!0:!(n.unstable_now()-R<D)}function L(){if(C=!1,le){var J=n.unstable_now();R=J;var ce=!0;try{e:{w=!1,I&&(I=!1,j(M),M=-1),N=!0;var be=T;try{t:{for(te(J),_=t(g);_!==null&&!(_.expirationTime>J&&U());){var Ae=_.callback;if(typeof Ae=="function"){_.callback=null,T=_.priorityLevel;var xe=Ae(_.expirationTime<=J);if(J=n.unstable_now(),typeof xe=="function"){_.callback=xe,te(J),ce=!0;break t}_===t(g)&&s(g),te(J)}else s(g);_=t(g)}if(_!==null)ce=!0;else{var z=t(m);z!==null&&Me(ae,z.startTime-J),ce=!1}}break e}finally{_=null,T=be,N=!1}ce=void 0}}finally{ce?B():le=!1}}}var B;if(typeof G=="function")B=function(){G(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ge=V.port2;V.port1.onmessage=L,B=function(){ge.postMessage(null)}}else B=function(){O(L,0)};function Me(J,ce){M=O(function(){J(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(J){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var be=T;T=ce;try{return J()}finally{T=be}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(J,ce){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var be=T;T=J;try{return ce()}finally{T=be}},n.unstable_scheduleCallback=function(J,ce,be){var Ae=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ae+be:Ae):be=Ae,J){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=be+xe,J={id:v++,callback:ce,priorityLevel:J,startTime:be,expirationTime:xe,sortIndex:-1},be>Ae?(J.sortIndex=be,e(m,J),t(g)===null&&J===t(m)&&(I?(j(M),M=-1):I=!0,Me(ae,be-Ae))):(J.sortIndex=xe,e(g,J),w||N||(w=!0,le||(le=!0,B()))),J},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(J){var ce=T;return function(){var be=T;T=ce;try{return J.apply(this,arguments)}finally{T=be}}}})(lm)),lm}var Lx;function BA(){return Lx||(Lx=1,om.exports=GA()),om.exports}var cm={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function zA(){if(Ux)return kn;Ux=1;var n=dp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:g,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,kn.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},kn.flushSync=function(g){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=m,s.p=v,s.d.f()}},kn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},kn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},kn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:N}):v==="script"&&s.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},kn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},kn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);s.d.L(g,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},kn.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},kn.requestFormReset=function(g){s.d.r(g)},kn.unstable_batchedUpdates=function(g,m){return g(m)},kn.useFormState=function(g,m,v){return c.H.useFormState(g,m,v)},kn.useFormStatus=function(){return c.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var jx;function HA(){if(jx)return cm.exports;jx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cm.exports=zA(),cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function FA(){if(Ox)return Fl;Ox=1;var n=BA(),e=dp(),t=HA();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var a=i,o=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(o=a.return),i=a.return;while(i)}return a.tag===3?o:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function m(i){var a=i.alternate;if(!a){if(a=l(i),a===null)throw Error(s(188));return a!==i?null:i}for(var o=i,d=a;;){var x=o.return;if(x===null)break;var b=x.alternate;if(b===null){if(d=x.return,d!==null){o=d;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===o)return g(x),i;if(b===d)return g(x),a;b=b.sibling}throw Error(s(188))}if(o.return!==d.return)o=x,d=b;else{for(var S=!1,k=x.child;k;){if(k===o){S=!0,o=x,d=b;break}if(k===d){S=!0,d=x,o=b;break}k=k.sibling}if(!S){for(k=b.child;k;){if(k===o){S=!0,o=b,d=x;break}if(k===d){S=!0,d=b,o=x;break}k=k.sibling}if(!S)throw Error(s(189))}}if(o.alternate!==d)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),G=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function ge(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case O:return"Profiler";case C:return"StrictMode";case ae:return"Suspense";case le:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case G:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case te:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return a=i.displayName||null,a!==null?a:ge(i.type)||"Memo";case D:a=i._payload,i=i._init;try{return ge(i(a))}catch{}}return null}var Me=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Ae=[],xe=-1;function z(i){return{current:i}}function se(i){0>xe||(i.current=Ae[xe],Ae[xe]=null,xe--)}function Z(i,a){xe++,Ae[xe]=i.current,i.current=a}var K=z(null),$=z(null),ue=z(null),ye=z(null);function Se(i,a){switch(Z(ue,a),Z($,i),Z(K,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?ex(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=ex(a),i=tx(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}se(K),Z(K,i)}function Ce(){se(K),se($),se(ue)}function Xe(i){i.memoizedState!==null&&Z(ye,i);var a=K.current,o=tx(a,i.type);a!==o&&(Z($,i),Z(K,o))}function vt(i){$.current===i&&(se(K),se($)),ye.current===i&&(se(ye),Ol._currentValue=be)}var it,pt;function zt(i){if(it===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);it=a&&a[1]||"",pt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+i+pt}var sn=!1;function Ke(i,a){if(!i||sn)return"";sn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ie){var ee=ie}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ie){ee=ie}i.call(fe.prototype)}}else{try{throw Error()}catch(ie){ee=ie}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ie){if(ie&&ee&&typeof ie.stack=="string")return[ie.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],k=b[1];if(S&&k){var H=S.split(`
`),W=k.split(`
`);for(x=d=0;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(d===H.length||x===W.length)for(d=H.length-1,x=W.length-1;1<=d&&0<=x&&H[d]!==W[x];)x--;for(;1<=d&&0<=x;d--,x--)if(H[d]!==W[x]){if(d!==1||x!==1)do if(d--,x--,0>x||H[d]!==W[x]){var re=`
`+H[d].replace(" at new "," at ");return i.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",i.displayName)),re}while(1<=d&&0<=x);break}}}finally{sn=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?zt(o):""}function Nn(i,a){switch(i.tag){case 26:case 27:case 5:return zt(i.type);case 16:return zt("Lazy");case 13:return i.child!==a&&a!==null?zt("Suspense Fallback"):zt("Suspense");case 19:return zt("SuspenseList");case 0:case 15:return Ke(i.type,!1);case 11:return Ke(i.type.render,!1);case 1:return Ke(i.type,!0);case 31:return zt("Activity");default:return""}}function Pn(i){try{var a="",o=null;do a+=Nn(i,o),o=i,i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var jt=Object.prototype.hasOwnProperty,Ot=n.unstable_scheduleCallback,Fs=n.unstable_cancelCallback,Sr=n.unstable_shouldYield,Ar=n.unstable_requestPaint,mn=n.unstable_now,pi=n.unstable_getCurrentPriorityLevel,Ua=n.unstable_ImmediatePriority,Hi=n.unstable_UserBlockingPriority,Vn=n.unstable_NormalPriority,qo=n.unstable_LowPriority,Nr=n.unstable_IdlePriority,wr=n.log,Cr=n.unstable_setDisableYieldValue,Zn=null,an=null;function zn(i){if(typeof wr=="function"&&Cr(i),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Zn,i)}catch{}}var Vt=Math.clz32?Math.clz32:De,ja=Math.log,he=Math.LN2;function De(i){return i>>>=0,i===0?32:31-(ja(i)/he|0)|0}var Oe=256,Qe=262144,ke=4194304;function at(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ue(i,a,o){var d=i.pendingLanes;if(d===0)return 0;var x=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var k=d&134217727;return k!==0?(d=k&~b,d!==0?x=at(d):(S&=k,S!==0?x=at(S):o||(o=k&~i,o!==0&&(x=at(o))))):(k=d&~b,k!==0?x=at(k):S!==0?x=at(S):o||(o=d&~i,o!==0&&(x=at(o)))),x===0?0:a!==0&&a!==x&&(a&b)===0&&(b=x&-x,o=a&-a,b>=o||b===32&&(o&4194048)!==0)?a:x}function Be(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function bt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _t(){var i=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),i}function kt(i){for(var a=[],o=0;31>o;o++)a.push(i);return a}function cn(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function es(i,a,o,d,x,b){var S=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var k=i.entanglements,H=i.expirationTimes,W=i.hiddenUpdates;for(o=S&~o;0<o;){var re=31-Vt(o),fe=1<<re;k[re]=0,H[re]=-1;var ee=W[re];if(ee!==null)for(W[re]=null,re=0;re<ee.length;re++){var ie=ee[re];ie!==null&&(ie.lane&=-536870913)}o&=~fe}d!==0&&pn(i,d,0),b!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~a))}function pn(i,a,o){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Vt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|o&261930}function Hn(i,a){var o=i.entangledLanes|=a;for(i=i.entanglements;o;){var d=31-Vt(o),x=1<<d;x&a|i[d]&a&&(i[d]|=a),o&=~x}}function Fn(i,a){var o=a&-a;return o=(o&42)!==0?1:wn(o),(o&(i.suspendedLanes|a))!==0?0:o}function wn(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Cn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Cs(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:Sx(i.type))}function gn(i,a){var o=ce.p;try{return ce.p=i,a()}finally{ce.p=o}}var yn=Math.random().toString(36).slice(2),Lt="__reactFiber$"+yn,$t="__reactProps$"+yn,qs="__reactContainer$"+yn,kr="__reactEvents$"+yn,uf="__reactListeners$"+yn,_c="__reactHandles$"+yn,Tc="__reactResources$"+yn,Ks="__reactMarker$"+yn;function Ir(i){delete i[Lt],delete i[$t],delete i[kr],delete i[uf],delete i[_c]}function $s(i){var a=i[Lt];if(a)return a;for(var o=i.parentNode;o;){if(a=o[qs]||o[Lt]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(i=lx(i);i!==null;){if(o=i[Lt])return o;i=lx(i)}return a}i=o,o=i.parentNode}return null}function us(i){if(i=i[Lt]||i[qs]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ts(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function Ys(i){var a=i[Tc];return a||(a=i[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Yt(i){i[Ks]=!0}var Ko=new Set,$o={};function Js(i,a){Qs(i,a),Qs(i+"Capture",a)}function Qs(i,a){for($o[i]=a,i=0;i<a.length;i++)Ko.add(a[i])}var Yo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jo={},Qo={};function Ec(i){return jt.call(Qo,i)?!0:jt.call(Jo,i)?!1:Yo.test(i)?Qo[i]=!0:(Jo[i]=!0,!1)}function Rr(i,a,o){if(Ec(a))if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+o)}}function ns(i,a,o){if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+o)}}function Jt(i,a,o,d){if(d===null)i.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(a,o,""+d)}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fi(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Xo(i,a,o){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return x.call(this)},set:function(S){o=""+S,b.call(this,S)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return o},setValue:function(S){o=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function gt(i){if(!i._valueTracker){var a=Fi(i)?"checked":"value";i._valueTracker=Xo(i,a,""+i[a])}}function Oa(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var o=a.getValue(),d="";return i&&(d=Fi(i)?i.checked?"true":"false":i.value),i=d,i!==o?(a.setValue(i),!0):!1}function Xs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ga=/[\n"\\]/g;function qn(i){return i.replace(Ga,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Mr(i,a,o,d,x,b,S,k){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),a!=null?S==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+un(a)):i.value!==""+un(a)&&(i.value=""+un(a)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),a!=null?Wo(i,S,un(a)):o!=null?Wo(i,S,un(o)):d!=null&&i.removeAttribute("value"),x==null&&b!=null&&(i.defaultChecked=!!b),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+un(k):i.removeAttribute("name")}function Sc(i,a,o,d,x,b,S,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||o!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){gt(i);return}o=o!=null?""+un(o):"",a=a!=null?""+un(a):o,k||a===i.value||(i.value=a),i.defaultValue=a}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=k?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),gt(i)}function Wo(i,a,o){a==="number"&&Xs(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function qi(i,a,o,d){if(i=i.options,a){a={};for(var x=0;x<o.length;x++)a["$"+o[x]]=!0;for(o=0;o<i.length;o++)x=a.hasOwnProperty("$"+i[o].value),i[o].selected!==x&&(i[o].selected=x),x&&d&&(i[o].defaultSelected=!0)}else{for(o=""+un(o),a=null,x=0;x<i.length;x++){if(i[x].value===o){i[x].selected=!0,d&&(i[x].defaultSelected=!0);return}a!==null||i[x].disabled||(a=i[x])}a!==null&&(a.selected=!0)}}function Ac(i,a,o){if(a!=null&&(a=""+un(a),a!==i.value&&(i.value=a),o==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=o!=null?""+un(o):""}function Ki(i,a,o,d){if(a==null){if(d!=null){if(o!=null)throw Error(s(92));if(Me(d)){if(1<d.length)throw Error(s(93));d=d[0]}o=d}o==null&&(o=""),a=o}o=un(a),i.defaultValue=o,d=i.textContent,d===o&&d!==""&&d!==null&&(i.value=d),gt(i)}function Kn(i,a){if(a){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=a;return}}i.textContent=a}var Nc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zo(i,a,o){var d=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,o):typeof o!="number"||o===0||Nc.has(a)?a==="float"?i.cssFloat=o:i[a]=(""+o).trim():i[a]=o+"px"}function el(i,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,o!=null){for(var d in o)!o.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var x in a)d=a[x],a.hasOwnProperty(x)&&o[x]!==d&&Zo(i,x,d)}else for(var b in a)a.hasOwnProperty(b)&&Zo(i,b,a[b])}function Dr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$i=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pr(i){return $i.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ks(){}var tl=null;function ds(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Yi=null,Ws=null;function Ba(i){var a=us(i);if(a&&(i=a.stateNode)){var o=i[$t]||null;e:switch(i=a.stateNode,a.type){case"input":if(Mr(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+qn(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var d=o[a];if(d!==i&&d.form===i.form){var x=d[$t]||null;if(!x)throw Error(s(90));Mr(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(a=0;a<o.length;a++)d=o[a],d.form===i.form&&Oa(d)}break e;case"textarea":Ac(i,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&qi(i,!!o.multiple,a,!1)}}}var Vr=!1;function Ji(i,a,o){if(Vr)return i(a,o);Vr=!0;try{var d=i(a);return d}finally{if(Vr=!1,(Yi!==null||Ws!==null)&&(bu(),Yi&&(a=Yi,i=Ws,Ws=Yi=null,Ba(a),i)))for(a=0;a<i.length;a++)Ba(i[a])}}function Is(i,a){var o=i.stateNode;if(o===null)return null;var d=o[$t]||null;if(d===null)return null;o=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(fs)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){za=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{za=!1}var Zs=null,nl=null,Ha=null;function sl(){if(Ha)return Ha;var i,a=nl,o=a.length,d,x="value"in Zs?Zs.value:Zs.textContent,b=x.length;for(i=0;i<o&&a[i]===x[i];i++);var S=o-i;for(d=1;d<=S&&a[o-d]===x[b-d];d++);return Ha=x.slice(i,1<d?1-d:void 0)}function Fa(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function gi(){return!0}function Rs(){return!1}function xn(i){function a(o,d,x,b,S){this._reactName=o,this._targetInst=x,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(o=i[k],this[k]=o?o(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?gi:Rs,this.isPropagationStopped=Rs,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),a}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ei=xn(yi),Qi=_({},yi,{view:0,detail:0}),il=xn(Qi),Xi,Lr,ti,Ur=_({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ti&&(ti&&i.type==="mousemove"?(Xi=i.screenX-ti.screenX,Lr=i.screenY-ti.screenY):Lr=Xi=0,ti=i),Xi)},movementY:function(i){return"movementY"in i?i.movementY:Lr}}),al=xn(Ur),qa=_({},Ur,{dataTransfer:0}),Cc=xn(qa),kc=_({},Qi,{relatedTarget:0}),Ka=xn(kc),rl=_({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ic=xn(rl),jr=_({},yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Rc=xn(jr),Mc=_({},yi,{data:0}),ni=xn(Mc),Dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Vc[i])?!!a[i]:!1}function Wi(){return Lc}var Ln=_({},Qi,{key:function(i){if(i.key){var a=Dc[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Fa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Pc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(i){return i.type==="keypress"?Fa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Uc=xn(Ln),jc=_({},Ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xi=xn(jc),y=_({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),E=xn(y),A=_({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=xn(A),Q=_({},Ur,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=xn(Q),ve=_({},yi,{newState:0,oldState:0}),$e=xn(ve),Ht=[9,13,27,32],ft=fs&&"CompositionEvent"in window,Dt=null;fs&&"documentMode"in document&&(Dt=document.documentMode);var hs=fs&&"TextEvent"in window&&!Dt,si=fs&&(!ft||Dt&&8<Dt&&11>=Dt),Ms=" ",Ds=!1;function $a(i,a){switch(i){case"keyup":return Ht.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Or(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Gr=!1;function r1(i,a){switch(i){case"compositionend":return Or(a);case"keypress":return a.which!==32?null:(Ds=!0,Ms);case"textInput":return i=a.data,i===Ms&&Ds?null:i;default:return null}}function o1(i,a){if(Gr)return i==="compositionend"||!ft&&$a(i,a)?(i=sl(),Ha=nl=Zs=null,Gr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return si&&a.locale!=="ko"?null:a.data;default:return null}}var l1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!l1[i.type]:a==="textarea"}function f0(i,a,o,d){Yi?Ws?Ws.push(d):Ws=[d]:Yi=d,a=wu(a,"onChange"),0<a.length&&(o=new ei("onChange","change",null,o,d),i.push({event:o,listeners:a}))}var ol=null,ll=null;function c1(i){Yy(i,0)}function Oc(i){var a=ts(i);if(Oa(a))return i}function h0(i,a){if(i==="change")return a}var m0=!1;if(fs){var df;if(fs){var ff="oninput"in document;if(!ff){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),ff=typeof p0.oninput=="function"}df=ff}else df=!1;m0=df&&(!document.documentMode||9<document.documentMode)}function g0(){ol&&(ol.detachEvent("onpropertychange",y0),ll=ol=null)}function y0(i){if(i.propertyName==="value"&&Oc(ll)){var a=[];f0(a,ll,i,ds(i)),Ji(c1,a)}}function u1(i,a,o){i==="focusin"?(g0(),ol=a,ll=o,ol.attachEvent("onpropertychange",y0)):i==="focusout"&&g0()}function d1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Oc(ll)}function f1(i,a){if(i==="click")return Oc(a)}function h1(i,a){if(i==="input"||i==="change")return Oc(a)}function m1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ss=typeof Object.is=="function"?Object.is:m1;function cl(i,a){if(ss(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var o=Object.keys(i),d=Object.keys(a);if(o.length!==d.length)return!1;for(d=0;d<o.length;d++){var x=o[d];if(!jt.call(a,x)||!ss(i[x],a[x]))return!1}return!0}function x0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function v0(i,a){var o=x0(i);i=0;for(var d;o;){if(o.nodeType===3){if(d=i+o.textContent.length,i<=a&&d>=a)return{node:o,offset:a-i};i=d}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=x0(o)}}function b0(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?b0(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function _0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Xs(i.document);a instanceof i.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)i=a.contentWindow;else break;a=Xs(i.document)}return a}function hf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var p1=fs&&"documentMode"in document&&11>=document.documentMode,Br=null,mf=null,ul=null,pf=!1;function T0(i,a,o){var d=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;pf||Br==null||Br!==Xs(d)||(d=Br,"selectionStart"in d&&hf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ul&&cl(ul,d)||(ul=d,d=wu(mf,"onSelect"),0<d.length&&(a=new ei("onSelect","select",null,a,o),i.push({event:a,listeners:d}),a.target=Br)))}function Ya(i,a){var o={};return o[i.toLowerCase()]=a.toLowerCase(),o["Webkit"+i]="webkit"+a,o["Moz"+i]="moz"+a,o}var zr={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionrun:Ya("Transition","TransitionRun"),transitionstart:Ya("Transition","TransitionStart"),transitioncancel:Ya("Transition","TransitionCancel"),transitionend:Ya("Transition","TransitionEnd")},gf={},E0={};fs&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function Ja(i){if(gf[i])return gf[i];if(!zr[i])return i;var a=zr[i],o;for(o in a)if(a.hasOwnProperty(o)&&o in E0)return gf[i]=a[o];return i}var S0=Ja("animationend"),A0=Ja("animationiteration"),N0=Ja("animationstart"),g1=Ja("transitionrun"),y1=Ja("transitionstart"),x1=Ja("transitioncancel"),w0=Ja("transitionend"),C0=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function Ps(i,a){C0.set(i,a),Js(a,[i])}var Gc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ms=[],Hr=0,xf=0;function Bc(){for(var i=Hr,a=xf=Hr=0;a<i;){var o=ms[a];ms[a++]=null;var d=ms[a];ms[a++]=null;var x=ms[a];ms[a++]=null;var b=ms[a];if(ms[a++]=null,d!==null&&x!==null){var S=d.pending;S===null?x.next=x:(x.next=S.next,S.next=x),d.pending=x}b!==0&&k0(o,x,b)}}function zc(i,a,o,d){ms[Hr++]=i,ms[Hr++]=a,ms[Hr++]=o,ms[Hr++]=d,xf|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function vf(i,a,o,d){return zc(i,a,o,d),Hc(i)}function Qa(i,a){return zc(i,null,null,a),Hc(i)}function k0(i,a,o){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o);for(var x=!1,b=i.return;b!==null;)b.childLanes|=o,d=b.alternate,d!==null&&(d.childLanes|=o),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(x=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,x&&a!==null&&(x=31-Vt(o),i=b.hiddenUpdates,d=i[x],d===null?i[x]=[a]:d.push(a),a.lane=o|536870912),b):null}function Hc(i){if(50<Ml)throw Ml=0,Ch=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Fr={};function v1(i,a,o,d){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(i,a,o,d){return new v1(i,a,o,d)}function bf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function vi(i,a){var o=i.alternate;return o===null?(o=is(i.tag,a,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=a,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,a=i.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function I0(i,a){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,a=o.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Fc(i,a,o,d,x,b){var S=0;if(d=i,typeof i=="function")bf(i)&&(S=1);else if(typeof i=="string")S=SA(i,o,K.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=is(31,o,a,x),i.elementType=R,i.lanes=b,i;case I:return Xa(o.children,x,b,a);case C:S=8,x|=24;break;case O:return i=is(12,o,a,x|2),i.elementType=O,i.lanes=b,i;case ae:return i=is(13,o,a,x),i.elementType=ae,i.lanes=b,i;case le:return i=is(19,o,a,x),i.elementType=le,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:S=10;break e;case j:S=9;break e;case te:S=11;break e;case M:S=14;break e;case D:S=16,d=null;break e}S=29,o=Error(s(130,i===null?"null":typeof i,"")),d=null}return a=is(S,o,a,x),a.elementType=i,a.type=d,a.lanes=b,a}function Xa(i,a,o,d){return i=is(7,i,d,a),i.lanes=o,i}function _f(i,a,o){return i=is(6,i,null,a),i.lanes=o,i}function R0(i){var a=is(18,null,null,0);return a.stateNode=i,a}function Tf(i,a,o){return a=is(4,i.children!==null?i.children:[],i.key,a),a.lanes=o,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var M0=new WeakMap;function ps(i,a){if(typeof i=="object"&&i!==null){var o=M0.get(i);return o!==void 0?o:(a={value:i,source:a,stack:Pn(a)},M0.set(i,a),a)}return{value:i,source:a,stack:Pn(a)}}var qr=[],Kr=0,qc=null,dl=0,gs=[],ys=0,Zi=null,ii=1,ai="";function bi(i,a){qr[Kr++]=dl,qr[Kr++]=qc,qc=i,dl=a}function D0(i,a,o){gs[ys++]=ii,gs[ys++]=ai,gs[ys++]=Zi,Zi=i;var d=ii;i=ai;var x=32-Vt(d)-1;d&=~(1<<x),o+=1;var b=32-Vt(a)+x;if(30<b){var S=x-x%5;b=(d&(1<<S)-1).toString(32),d>>=S,x-=S,ii=1<<32-Vt(a)+x|o<<x|d,ai=b+i}else ii=1<<b|o<<x|d,ai=i}function Ef(i){i.return!==null&&(bi(i,1),D0(i,1,0))}function Sf(i){for(;i===qc;)qc=qr[--Kr],qr[Kr]=null,dl=qr[--Kr],qr[Kr]=null;for(;i===Zi;)Zi=gs[--ys],gs[ys]=null,ai=gs[--ys],gs[ys]=null,ii=gs[--ys],gs[ys]=null}function P0(i,a){gs[ys++]=ii,gs[ys++]=ai,gs[ys++]=Zi,ii=a.id,ai=a.overflow,Zi=i}var vn=null,It=null,rt=!1,ea=null,xs=!1,Af=Error(s(519));function ta(i){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(ps(a,i)),Af}function V0(i){var a=i.stateNode,o=i.type,d=i.memoizedProps;switch(a[Lt]=i,a[$t]=d,o){case"dialog":Ze("cancel",a),Ze("close",a);break;case"iframe":case"object":case"embed":Ze("load",a);break;case"video":case"audio":for(o=0;o<Pl.length;o++)Ze(Pl[o],a);break;case"source":Ze("error",a);break;case"img":case"image":case"link":Ze("error",a),Ze("load",a);break;case"details":Ze("toggle",a);break;case"input":Ze("invalid",a),Sc(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ze("invalid",a);break;case"textarea":Ze("invalid",a),Ki(a,d.value,d.defaultValue,d.children)}o=d.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||d.suppressHydrationWarning===!0||Wy(a.textContent,o)?(d.popover!=null&&(Ze("beforetoggle",a),Ze("toggle",a)),d.onScroll!=null&&Ze("scroll",a),d.onScrollEnd!=null&&Ze("scrollend",a),d.onClick!=null&&(a.onclick=ks),a=!0):a=!1,a||ta(i,!0)}function L0(i){for(vn=i.return;vn;)switch(vn.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:vn=vn.return}}function $r(i){if(i!==vn)return!1;if(!rt)return L0(i),rt=!0,!1;var a=i.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Hh(i.type,i.memoizedProps)),o=!o),o&&It&&ta(i),L0(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));It=ox(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));It=ox(i)}else a===27?(a=It,pa(i.type)?(i=Yh,Yh=null,It=i):It=a):It=vn?bs(i.stateNode.nextSibling):null;return!0}function Wa(){It=vn=null,rt=!1}function Nf(){var i=ea;return i!==null&&(Qn===null?Qn=i:Qn.push.apply(Qn,i),ea=null),i}function fl(i){ea===null?ea=[i]:ea.push(i)}var wf=z(null),Za=null,_i=null;function na(i,a,o){Z(wf,a._currentValue),a._currentValue=o}function Ti(i){i._currentValue=wf.current,se(wf)}function Cf(i,a,o){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===o)break;i=i.return}}function kf(i,a,o,d){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var b=x.dependencies;if(b!==null){var S=x.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=x;for(var H=0;H<a.length;H++)if(k.context===a[H]){b.lanes|=o,k=b.alternate,k!==null&&(k.lanes|=o),Cf(b.return,o,i),d||(S=null);break e}b=k.next}}else if(x.tag===18){if(S=x.return,S===null)throw Error(s(341));S.lanes|=o,b=S.alternate,b!==null&&(b.lanes|=o),Cf(S,o,i),S=null}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===i){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}}function Yr(i,a,o,d){i=null;for(var x=a,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var S=x.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var k=x.type;ss(x.pendingProps.value,S.value)||(i!==null?i.push(k):i=[k])}}else if(x===ye.current){if(S=x.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(Ol):i=[Ol])}x=x.return}i!==null&&kf(a,i,o,d),a.flags|=262144}function Kc(i){for(i=i.firstContext;i!==null;){if(!ss(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function er(i){Za=i,_i=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function bn(i){return U0(Za,i)}function $c(i,a){return Za===null&&er(i),U0(i,a)}function U0(i,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},_i===null){if(i===null)throw Error(s(308));_i=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else _i=_i.next=a;return o}var b1=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(o,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(o){return o()})}},_1=n.unstable_scheduleCallback,T1=n.unstable_NormalPriority,Qt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function If(){return{controller:new b1,data:new Map,refCount:0}}function hl(i){i.refCount--,i.refCount===0&&_1(T1,function(){i.controller.abort()})}var ml=null,Rf=0,Jr=0,Qr=null;function E1(i,a){if(ml===null){var o=ml=[];Rf=0,Jr=Ph(),Qr={status:"pending",value:void 0,then:function(d){o.push(d)}}}return Rf++,a.then(j0,j0),a}function j0(){if(--Rf===0&&ml!==null){Qr!==null&&(Qr.status="fulfilled");var i=ml;ml=null,Jr=0,Qr=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function S1(i,a){var o=[],d={status:"pending",value:null,reason:null,then:function(x){o.push(x)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var x=0;x<o.length;x++)(0,o[x])(a)},function(x){for(d.status="rejected",d.reason=x,x=0;x<o.length;x++)(0,o[x])(void 0)}),d}var O0=J.S;J.S=function(i,a){Ty=mn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&E1(i,a),O0!==null&&O0(i,a)};var tr=z(null);function Mf(){var i=tr.current;return i!==null?i:wt.pooledCache}function Yc(i,a){a===null?Z(tr,tr.current):Z(tr,a.pool)}function G0(){var i=Mf();return i===null?null:{parent:Qt._currentValue,pool:i}}var Xr=Error(s(460)),Df=Error(s(474)),Jc=Error(s(542)),Qc={then:function(){}};function B0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function z0(i,a,o){switch(o=i[o],o===void 0?i.push(a):o!==a&&(a.then(ks,ks),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,F0(i),i;default:if(typeof a.status=="string")a.then(ks,ks);else{if(i=wt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var x=a;x.status="fulfilled",x.value=d}},function(d){if(a.status==="pending"){var x=a;x.status="rejected",x.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,F0(i),i}throw sr=a,Xr}}function nr(i){try{var a=i._init;return a(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(sr=o,Xr):o}}var sr=null;function H0(){if(sr===null)throw Error(s(459));var i=sr;return sr=null,i}function F0(i){if(i===Xr||i===Jc)throw Error(s(483))}var Wr=null,pl=0;function Xc(i){var a=pl;return pl+=1,Wr===null&&(Wr=[]),z0(Wr,i,a)}function gl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Wc(i,a){throw a.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function q0(i){function a(Y,q){if(i){var X=Y.deletions;X===null?(Y.deletions=[q],Y.flags|=16):X.push(q)}}function o(Y,q){if(!i)return null;for(;q!==null;)a(Y,q),q=q.sibling;return null}function d(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function x(Y,q){return Y=vi(Y,q),Y.index=0,Y.sibling=null,Y}function b(Y,q,X){return Y.index=X,i?(X=Y.alternate,X!==null?(X=X.index,X<q?(Y.flags|=67108866,q):X):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function S(Y){return i&&Y.alternate===null&&(Y.flags|=67108866),Y}function k(Y,q,X,de){return q===null||q.tag!==6?(q=_f(X,Y.mode,de),q.return=Y,q):(q=x(q,X),q.return=Y,q)}function H(Y,q,X,de){var Pe=X.type;return Pe===I?re(Y,q,X.props.children,de,X.key):q!==null&&(q.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===D&&nr(Pe)===q.type)?(q=x(q,X.props),gl(q,X),q.return=Y,q):(q=Fc(X.type,X.key,X.props,null,Y.mode,de),gl(q,X),q.return=Y,q)}function W(Y,q,X,de){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=Tf(X,Y.mode,de),q.return=Y,q):(q=x(q,X.children||[]),q.return=Y,q)}function re(Y,q,X,de,Pe){return q===null||q.tag!==7?(q=Xa(X,Y.mode,de,Pe),q.return=Y,q):(q=x(q,X),q.return=Y,q)}function fe(Y,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=_f(""+q,Y.mode,X),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case N:return X=Fc(q.type,q.key,q.props,null,Y.mode,X),gl(X,q),X.return=Y,X;case w:return q=Tf(q,Y.mode,X),q.return=Y,q;case D:return q=nr(q),fe(Y,q,X)}if(Me(q)||B(q))return q=Xa(q,Y.mode,X,null),q.return=Y,q;if(typeof q.then=="function")return fe(Y,Xc(q),X);if(q.$$typeof===G)return fe(Y,$c(Y,q),X);Wc(Y,q)}return null}function ee(Y,q,X,de){var Pe=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Pe!==null?null:k(Y,q,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case N:return X.key===Pe?H(Y,q,X,de):null;case w:return X.key===Pe?W(Y,q,X,de):null;case D:return X=nr(X),ee(Y,q,X,de)}if(Me(X)||B(X))return Pe!==null?null:re(Y,q,X,de,null);if(typeof X.then=="function")return ee(Y,q,Xc(X),de);if(X.$$typeof===G)return ee(Y,q,$c(Y,X),de);Wc(Y,X)}return null}function ie(Y,q,X,de,Pe){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Y=Y.get(X)||null,k(q,Y,""+de,Pe);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case N:return Y=Y.get(de.key===null?X:de.key)||null,H(q,Y,de,Pe);case w:return Y=Y.get(de.key===null?X:de.key)||null,W(q,Y,de,Pe);case D:return de=nr(de),ie(Y,q,X,de,Pe)}if(Me(de)||B(de))return Y=Y.get(X)||null,re(q,Y,de,Pe,null);if(typeof de.then=="function")return ie(Y,q,X,Xc(de),Pe);if(de.$$typeof===G)return ie(Y,q,X,$c(q,de),Pe);Wc(q,de)}return null}function Ie(Y,q,X,de){for(var Pe=null,ct=null,Re=q,Je=q=0,tt=null;Re!==null&&Je<X.length;Je++){Re.index>Je?(tt=Re,Re=null):tt=Re.sibling;var ut=ee(Y,Re,X[Je],de);if(ut===null){Re===null&&(Re=tt);break}i&&Re&&ut.alternate===null&&a(Y,Re),q=b(ut,q,Je),ct===null?Pe=ut:ct.sibling=ut,ct=ut,Re=tt}if(Je===X.length)return o(Y,Re),rt&&bi(Y,Je),Pe;if(Re===null){for(;Je<X.length;Je++)Re=fe(Y,X[Je],de),Re!==null&&(q=b(Re,q,Je),ct===null?Pe=Re:ct.sibling=Re,ct=Re);return rt&&bi(Y,Je),Pe}for(Re=d(Re);Je<X.length;Je++)tt=ie(Re,Y,Je,X[Je],de),tt!==null&&(i&&tt.alternate!==null&&Re.delete(tt.key===null?Je:tt.key),q=b(tt,q,Je),ct===null?Pe=tt:ct.sibling=tt,ct=tt);return i&&Re.forEach(function(ba){return a(Y,ba)}),rt&&bi(Y,Je),Pe}function Le(Y,q,X,de){if(X==null)throw Error(s(151));for(var Pe=null,ct=null,Re=q,Je=q=0,tt=null,ut=X.next();Re!==null&&!ut.done;Je++,ut=X.next()){Re.index>Je?(tt=Re,Re=null):tt=Re.sibling;var ba=ee(Y,Re,ut.value,de);if(ba===null){Re===null&&(Re=tt);break}i&&Re&&ba.alternate===null&&a(Y,Re),q=b(ba,q,Je),ct===null?Pe=ba:ct.sibling=ba,ct=ba,Re=tt}if(ut.done)return o(Y,Re),rt&&bi(Y,Je),Pe;if(Re===null){for(;!ut.done;Je++,ut=X.next())ut=fe(Y,ut.value,de),ut!==null&&(q=b(ut,q,Je),ct===null?Pe=ut:ct.sibling=ut,ct=ut);return rt&&bi(Y,Je),Pe}for(Re=d(Re);!ut.done;Je++,ut=X.next())ut=ie(Re,Y,Je,ut.value,de),ut!==null&&(i&&ut.alternate!==null&&Re.delete(ut.key===null?Je:ut.key),q=b(ut,q,Je),ct===null?Pe=ut:ct.sibling=ut,ct=ut);return i&&Re.forEach(function(VA){return a(Y,VA)}),rt&&bi(Y,Je),Pe}function At(Y,q,X,de){if(typeof X=="object"&&X!==null&&X.type===I&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case N:e:{for(var Pe=X.key;q!==null;){if(q.key===Pe){if(Pe=X.type,Pe===I){if(q.tag===7){o(Y,q.sibling),de=x(q,X.props.children),de.return=Y,Y=de;break e}}else if(q.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===D&&nr(Pe)===q.type){o(Y,q.sibling),de=x(q,X.props),gl(de,X),de.return=Y,Y=de;break e}o(Y,q);break}else a(Y,q);q=q.sibling}X.type===I?(de=Xa(X.props.children,Y.mode,de,X.key),de.return=Y,Y=de):(de=Fc(X.type,X.key,X.props,null,Y.mode,de),gl(de,X),de.return=Y,Y=de)}return S(Y);case w:e:{for(Pe=X.key;q!==null;){if(q.key===Pe)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){o(Y,q.sibling),de=x(q,X.children||[]),de.return=Y,Y=de;break e}else{o(Y,q);break}else a(Y,q);q=q.sibling}de=Tf(X,Y.mode,de),de.return=Y,Y=de}return S(Y);case D:return X=nr(X),At(Y,q,X,de)}if(Me(X))return Ie(Y,q,X,de);if(B(X)){if(Pe=B(X),typeof Pe!="function")throw Error(s(150));return X=Pe.call(X),Le(Y,q,X,de)}if(typeof X.then=="function")return At(Y,q,Xc(X),de);if(X.$$typeof===G)return At(Y,q,$c(Y,X),de);Wc(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(o(Y,q.sibling),de=x(q,X),de.return=Y,Y=de):(o(Y,q),de=_f(X,Y.mode,de),de.return=Y,Y=de),S(Y)):o(Y,q)}return function(Y,q,X,de){try{pl=0;var Pe=At(Y,q,X,de);return Wr=null,Pe}catch(Re){if(Re===Xr||Re===Jc)throw Re;var ct=is(29,Re,null,Y.mode);return ct.lanes=de,ct.return=Y,ct}finally{}}}var ir=q0(!0),K0=q0(!1),sa=!1;function Pf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vf(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ia(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function aa(i,a,o){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ht&2)!==0){var x=d.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),d.pending=a,a=Hc(i),k0(i,null,o),a}return zc(i,d,a,o),Hc(i)}function yl(i,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,o|=d,a.lanes=o,Hn(i,o)}}function Lf(i,a){var o=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,o===d)){var x=null,b=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};b===null?x=b=S:b=b.next=S,o=o.next}while(o!==null);b===null?x=b=a:b=b.next=a}else x=b=a;o={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=a:i.next=a,o.lastBaseUpdate=a}var Uf=!1;function xl(){if(Uf){var i=Qr;if(i!==null)throw i}}function vl(i,a,o,d){Uf=!1;var x=i.updateQueue;sa=!1;var b=x.firstBaseUpdate,S=x.lastBaseUpdate,k=x.shared.pending;if(k!==null){x.shared.pending=null;var H=k,W=H.next;H.next=null,S===null?b=W:S.next=W,S=H;var re=i.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==S&&(k===null?re.firstBaseUpdate=W:k.next=W,re.lastBaseUpdate=H))}if(b!==null){var fe=x.baseState;S=0,re=W=H=null,k=b;do{var ee=k.lane&-536870913,ie=ee!==k.lane;if(ie?(et&ee)===ee:(d&ee)===ee){ee!==0&&ee===Jr&&(Uf=!0),re!==null&&(re=re.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ie=i,Le=k;ee=a;var At=o;switch(Le.tag){case 1:if(Ie=Le.payload,typeof Ie=="function"){fe=Ie.call(At,fe,ee);break e}fe=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Le.payload,ee=typeof Ie=="function"?Ie.call(At,fe,ee):Ie,ee==null)break e;fe=_({},fe,ee);break e;case 2:sa=!0}}ee=k.callback,ee!==null&&(i.flags|=64,ie&&(i.flags|=8192),ie=x.callbacks,ie===null?x.callbacks=[ee]:ie.push(ee))}else ie={lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(W=re=ie,H=fe):re=re.next=ie,S|=ee;if(k=k.next,k===null){if(k=x.shared.pending,k===null)break;ie=k,k=ie.next,ie.next=null,x.lastBaseUpdate=ie,x.shared.pending=null}}while(!0);re===null&&(H=fe),x.baseState=H,x.firstBaseUpdate=W,x.lastBaseUpdate=re,b===null&&(x.shared.lanes=0),ua|=S,i.lanes=S,i.memoizedState=fe}}function $0(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function Y0(i,a){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)$0(o[i],a)}var Zr=z(null),Zc=z(0);function J0(i,a){i=Ri,Z(Zc,i),Z(Zr,a),Ri=i|a.baseLanes}function jf(){Z(Zc,Ri),Z(Zr,Zr.current)}function Of(){Ri=Zc.current,se(Zr),se(Zc)}var as=z(null),vs=null;function ra(i){var a=i.alternate;Z(Ft,Ft.current&1),Z(as,i),vs===null&&(a===null||Zr.current!==null||a.memoizedState!==null)&&(vs=i)}function Gf(i){Z(Ft,Ft.current),Z(as,i),vs===null&&(vs=i)}function Q0(i){i.tag===22?(Z(Ft,Ft.current),Z(as,i),vs===null&&(vs=i)):oa()}function oa(){Z(Ft,Ft.current),Z(as,as.current)}function rs(i){se(as),vs===i&&(vs=null),se(Ft)}var Ft=z(0);function eu(i){for(var a=i;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Kh(o)||$h(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ei=0,Ye=null,Et=null,Xt=null,tu=!1,eo=!1,ar=!1,nu=0,bl=0,to=null,A1=0;function Gt(){throw Error(s(321))}function Bf(i,a){if(a===null)return!1;for(var o=0;o<a.length&&o<i.length;o++)if(!ss(i[o],a[o]))return!1;return!0}function zf(i,a,o,d,x,b){return Ei=b,Ye=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,J.H=i===null||i.memoizedState===null?Dg:sh,ar=!1,b=o(d,x),ar=!1,eo&&(b=W0(a,o,d,x)),X0(i),b}function X0(i){J.H=El;var a=Et!==null&&Et.next!==null;if(Ei=0,Xt=Et=Ye=null,tu=!1,bl=0,to=null,a)throw Error(s(300));i===null||Wt||(i=i.dependencies,i!==null&&Kc(i)&&(Wt=!0))}function W0(i,a,o,d){Ye=i;var x=0;do{if(eo&&(to=null),bl=0,eo=!1,25<=x)throw Error(s(301));if(x+=1,Xt=Et=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}J.H=Pg,b=a(o,d)}while(eo);return b}function N1(){var i=J.H,a=i.useState()[0];return a=typeof a.then=="function"?_l(a):a,i=i.useState()[0],(Et!==null?Et.memoizedState:null)!==i&&(Ye.flags|=1024),a}function Hf(){var i=nu!==0;return nu=0,i}function Ff(i,a,o){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~o}function qf(i){if(tu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}tu=!1}Ei=0,Xt=Et=Ye=null,eo=!1,bl=nu=0,to=null}function Un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Ye.memoizedState=Xt=i:Xt=Xt.next=i,Xt}function qt(){if(Et===null){var i=Ye.alternate;i=i!==null?i.memoizedState:null}else i=Et.next;var a=Xt===null?Ye.memoizedState:Xt.next;if(a!==null)Xt=a,Et=i;else{if(i===null)throw Ye.alternate===null?Error(s(467)):Error(s(310));Et=i,i={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Xt===null?Ye.memoizedState=Xt=i:Xt=Xt.next=i}return Xt}function su(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(i){var a=bl;return bl+=1,to===null&&(to=[]),i=z0(to,i,a),a=Ye,(Xt===null?a.memoizedState:Xt.next)===null&&(a=a.alternate,J.H=a===null||a.memoizedState===null?Dg:sh),i}function iu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return _l(i);if(i.$$typeof===G)return bn(i)}throw Error(s(438,String(i)))}function Kf(i){var a=null,o=Ye.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var d=Ye.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(x){return x.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=su(),Ye.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(i),d=0;d<i;d++)o[d]=U;return a.index++,o}function Si(i,a){return typeof a=="function"?a(i):a}function au(i){var a=qt();return $f(a,Et,i)}function $f(i,a,o){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=o;var x=i.baseQueue,b=d.pending;if(b!==null){if(x!==null){var S=x.next;x.next=b.next,b.next=S}a.baseQueue=x=b,d.pending=null}if(b=i.baseState,x===null)i.memoizedState=b;else{a=x.next;var k=S=null,H=null,W=a,re=!1;do{var fe=W.lane&-536870913;if(fe!==W.lane?(et&fe)===fe:(Ei&fe)===fe){var ee=W.revertLane;if(ee===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),fe===Jr&&(re=!0);else if((Ei&ee)===ee){W=W.next,ee===Jr&&(re=!0);continue}else fe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},H===null?(k=H=fe,S=b):H=H.next=fe,Ye.lanes|=ee,ua|=ee;fe=W.action,ar&&o(b,fe),b=W.hasEagerState?W.eagerState:o(b,fe)}else ee={lane:fe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},H===null?(k=H=ee,S=b):H=H.next=ee,Ye.lanes|=fe,ua|=fe;W=W.next}while(W!==null&&W!==a);if(H===null?S=b:H.next=k,!ss(b,i.memoizedState)&&(Wt=!0,re&&(o=Qr,o!==null)))throw o;i.memoizedState=b,i.baseState=S,i.baseQueue=H,d.lastRenderedState=b}return x===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Yf(i){var a=qt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var d=o.dispatch,x=o.pending,b=a.memoizedState;if(x!==null){o.pending=null;var S=x=x.next;do b=i(b,S.action),S=S.next;while(S!==x);ss(b,a.memoizedState)||(Wt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),o.lastRenderedState=b}return[b,d]}function Z0(i,a,o){var d=Ye,x=qt(),b=rt;if(b){if(o===void 0)throw Error(s(407));o=o()}else o=a();var S=!ss((Et||x).memoizedState,o);if(S&&(x.memoizedState=o,Wt=!0),x=x.queue,Xf(ng.bind(null,d,x,i),[i]),x.getSnapshot!==a||S||Xt!==null&&Xt.memoizedState.tag&1){if(d.flags|=2048,no(9,{destroy:void 0},tg.bind(null,d,x,o,a),null),wt===null)throw Error(s(349));b||(Ei&127)!==0||eg(d,a,o)}return o}function eg(i,a,o){i.flags|=16384,i={getSnapshot:a,value:o},a=Ye.updateQueue,a===null?(a=su(),Ye.updateQueue=a,a.stores=[i]):(o=a.stores,o===null?a.stores=[i]:o.push(i))}function tg(i,a,o,d){a.value=o,a.getSnapshot=d,sg(a)&&ig(i)}function ng(i,a,o){return o(function(){sg(a)&&ig(i)})}function sg(i){var a=i.getSnapshot;i=i.value;try{var o=a();return!ss(i,o)}catch{return!0}}function ig(i){var a=Qa(i,2);a!==null&&Xn(a,i,2)}function Jf(i){var a=Un();if(typeof i=="function"){var o=i;if(i=o(),ar){zn(!0);try{o()}finally{zn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:i},a}function ag(i,a,o,d){return i.baseState=o,$f(i,Et,typeof d=="function"?d:Si)}function w1(i,a,o,d,x){if(lu(i))throw Error(s(485));if(i=a.action,i!==null){var b={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};J.T!==null?o(!0):b.isTransition=!1,d(b),o=a.pending,o===null?(b.next=a.pending=b,rg(a,b)):(b.next=o.next,a.pending=o.next=b)}}function rg(i,a){var o=a.action,d=a.payload,x=i.state;if(a.isTransition){var b=J.T,S={};J.T=S;try{var k=o(x,d),H=J.S;H!==null&&H(S,k),og(i,a,k)}catch(W){Qf(i,a,W)}finally{b!==null&&S.types!==null&&(b.types=S.types),J.T=b}}else try{b=o(x,d),og(i,a,b)}catch(W){Qf(i,a,W)}}function og(i,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(d){lg(i,a,d)},function(d){return Qf(i,a,d)}):lg(i,a,o)}function lg(i,a,o){a.status="fulfilled",a.value=o,cg(a),i.state=o,a=i.pending,a!==null&&(o=a.next,o===a?i.pending=null:(o=o.next,a.next=o,rg(i,o)))}function Qf(i,a,o){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=o,cg(a),a=a.next;while(a!==d)}i.action=null}function cg(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function ug(i,a){return a}function dg(i,a){if(rt){var o=wt.formState;if(o!==null){e:{var d=Ye;if(rt){if(It){t:{for(var x=It,b=xs;x.nodeType!==8;){if(!b){x=null;break t}if(x=bs(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){It=bs(x.nextSibling),d=x.data==="F!";break e}}ta(d)}d=!1}d&&(a=o[0])}}return o=Un(),o.memoizedState=o.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ug,lastRenderedState:a},o.queue=d,o=Ig.bind(null,Ye,d),d.dispatch=o,d=Jf(!1),b=nh.bind(null,Ye,!1,d.queue),d=Un(),x={state:a,dispatch:null,action:i,pending:null},d.queue=x,o=w1.bind(null,Ye,x,b,o),x.dispatch=o,d.memoizedState=i,[a,o,!1]}function fg(i){var a=qt();return hg(a,Et,i)}function hg(i,a,o){if(a=$f(i,a,ug)[0],i=au(Si)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=_l(a)}catch(S){throw S===Xr?Jc:S}else d=a;a=qt();var x=a.queue,b=x.dispatch;return o!==a.memoizedState&&(Ye.flags|=2048,no(9,{destroy:void 0},C1.bind(null,x,o),null)),[d,b,i]}function C1(i,a){i.action=a}function mg(i){var a=qt(),o=Et;if(o!==null)return hg(a,o,i);qt(),a=a.memoizedState,o=qt();var d=o.queue.dispatch;return o.memoizedState=i,[a,d,!1]}function no(i,a,o,d){return i={tag:i,create:o,deps:d,inst:a,next:null},a=Ye.updateQueue,a===null&&(a=su(),Ye.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=i.next=i:(d=o.next,o.next=i,i.next=d,a.lastEffect=i),i}function pg(){return qt().memoizedState}function ru(i,a,o,d){var x=Un();Ye.flags|=i,x.memoizedState=no(1|a,{destroy:void 0},o,d===void 0?null:d)}function ou(i,a,o,d){var x=qt();d=d===void 0?null:d;var b=x.memoizedState.inst;Et!==null&&d!==null&&Bf(d,Et.memoizedState.deps)?x.memoizedState=no(a,b,o,d):(Ye.flags|=i,x.memoizedState=no(1|a,b,o,d))}function gg(i,a){ru(8390656,8,i,a)}function Xf(i,a){ou(2048,8,i,a)}function k1(i){Ye.flags|=4;var a=Ye.updateQueue;if(a===null)a=su(),Ye.updateQueue=a,a.events=[i];else{var o=a.events;o===null?a.events=[i]:o.push(i)}}function yg(i){var a=qt().memoizedState;return k1({ref:a,nextImpl:i}),function(){if((ht&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function xg(i,a){return ou(4,2,i,a)}function vg(i,a){return ou(4,4,i,a)}function bg(i,a){if(typeof a=="function"){i=i();var o=a(i);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function _g(i,a,o){o=o!=null?o.concat([i]):null,ou(4,4,bg.bind(null,a,i),o)}function Wf(){}function Tg(i,a){var o=qt();a=a===void 0?null:a;var d=o.memoizedState;return a!==null&&Bf(a,d[1])?d[0]:(o.memoizedState=[i,a],i)}function Eg(i,a){var o=qt();a=a===void 0?null:a;var d=o.memoizedState;if(a!==null&&Bf(a,d[1]))return d[0];if(d=i(),ar){zn(!0);try{i()}finally{zn(!1)}}return o.memoizedState=[d,a],d}function Zf(i,a,o){return o===void 0||(Ei&1073741824)!==0&&(et&261930)===0?i.memoizedState=a:(i.memoizedState=o,i=Sy(),Ye.lanes|=i,ua|=i,o)}function Sg(i,a,o,d){return ss(o,a)?o:Zr.current!==null?(i=Zf(i,o,d),ss(i,a)||(Wt=!0),i):(Ei&42)===0||(Ei&1073741824)!==0&&(et&261930)===0?(Wt=!0,i.memoizedState=o):(i=Sy(),Ye.lanes|=i,ua|=i,a)}function Ag(i,a,o,d,x){var b=ce.p;ce.p=b!==0&&8>b?b:8;var S=J.T,k={};J.T=k,nh(i,!1,a,o);try{var H=x(),W=J.S;if(W!==null&&W(k,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var re=S1(H,d);Tl(i,a,re,cs(i))}else Tl(i,a,d,cs(i))}catch(fe){Tl(i,a,{then:function(){},status:"rejected",reason:fe},cs())}finally{ce.p=b,S!==null&&k.types!==null&&(S.types=k.types),J.T=S}}function I1(){}function eh(i,a,o,d){if(i.tag!==5)throw Error(s(476));var x=Ng(i).queue;Ag(i,x,a,be,o===null?I1:function(){return wg(i),o(d)})}function Ng(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:be},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:o},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function wg(i){var a=Ng(i);a.next===null&&(a=i.alternate.memoizedState),Tl(i,a.next.queue,{},cs())}function th(){return bn(Ol)}function Cg(){return qt().memoizedState}function kg(){return qt().memoizedState}function R1(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var o=cs();i=ia(o);var d=aa(a,i,o);d!==null&&(Xn(d,a,o),yl(d,a,o)),a={cache:If()},i.payload=a;return}a=a.return}}function M1(i,a,o){var d=cs();o={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},lu(i)?Rg(a,o):(o=vf(i,a,o,d),o!==null&&(Xn(o,i,d),Mg(o,a,d)))}function Ig(i,a,o){var d=cs();Tl(i,a,o,d)}function Tl(i,a,o,d){var x={lane:d,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(lu(i))Rg(a,x);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,k=b(S,o);if(x.hasEagerState=!0,x.eagerState=k,ss(k,S))return zc(i,a,x,0),wt===null&&Bc(),!1}catch{}finally{}if(o=vf(i,a,x,d),o!==null)return Xn(o,i,d),Mg(o,a,d),!0}return!1}function nh(i,a,o,d){if(d={lane:2,revertLane:Ph(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},lu(i)){if(a)throw Error(s(479))}else a=vf(i,o,d,2),a!==null&&Xn(a,i,2)}function lu(i){var a=i.alternate;return i===Ye||a!==null&&a===Ye}function Rg(i,a){eo=tu=!0;var o=i.pending;o===null?a.next=a:(a.next=o.next,o.next=a),i.pending=a}function Mg(i,a,o){if((o&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,o|=d,a.lanes=o,Hn(i,o)}}var El={readContext:bn,use:iu,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};El.useEffectEvent=Gt;var Dg={readContext:bn,use:iu,useCallback:function(i,a){return Un().memoizedState=[i,a===void 0?null:a],i},useContext:bn,useEffect:gg,useImperativeHandle:function(i,a,o){o=o!=null?o.concat([i]):null,ru(4194308,4,bg.bind(null,a,i),o)},useLayoutEffect:function(i,a){return ru(4194308,4,i,a)},useInsertionEffect:function(i,a){ru(4,2,i,a)},useMemo:function(i,a){var o=Un();a=a===void 0?null:a;var d=i();if(ar){zn(!0);try{i()}finally{zn(!1)}}return o.memoizedState=[d,a],d},useReducer:function(i,a,o){var d=Un();if(o!==void 0){var x=o(a);if(ar){zn(!0);try{o(a)}finally{zn(!1)}}}else x=a;return d.memoizedState=d.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},d.queue=i,i=i.dispatch=M1.bind(null,Ye,i),[d.memoizedState,i]},useRef:function(i){var a=Un();return i={current:i},a.memoizedState=i},useState:function(i){i=Jf(i);var a=i.queue,o=Ig.bind(null,Ye,a);return a.dispatch=o,[i.memoizedState,o]},useDebugValue:Wf,useDeferredValue:function(i,a){var o=Un();return Zf(o,i,a)},useTransition:function(){var i=Jf(!1);return i=Ag.bind(null,Ye,i.queue,!0,!1),Un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,o){var d=Ye,x=Un();if(rt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),wt===null)throw Error(s(349));(et&127)!==0||eg(d,a,o)}x.memoizedState=o;var b={value:o,getSnapshot:a};return x.queue=b,gg(ng.bind(null,d,b,i),[i]),d.flags|=2048,no(9,{destroy:void 0},tg.bind(null,d,b,o,a),null),o},useId:function(){var i=Un(),a=wt.identifierPrefix;if(rt){var o=ai,d=ii;o=(d&~(1<<32-Vt(d)-1)).toString(32)+o,a="_"+a+"R_"+o,o=nu++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=A1++,a="_"+a+"r_"+o.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:th,useFormState:dg,useActionState:dg,useOptimistic:function(i){var a=Un();a.memoizedState=a.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=nh.bind(null,Ye,!0,o),o.dispatch=a,[i,a]},useMemoCache:Kf,useCacheRefresh:function(){return Un().memoizedState=R1.bind(null,Ye)},useEffectEvent:function(i){var a=Un(),o={impl:i};return a.memoizedState=o,function(){if((ht&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},sh={readContext:bn,use:iu,useCallback:Tg,useContext:bn,useEffect:Xf,useImperativeHandle:_g,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Eg,useReducer:au,useRef:pg,useState:function(){return au(Si)},useDebugValue:Wf,useDeferredValue:function(i,a){var o=qt();return Sg(o,Et.memoizedState,i,a)},useTransition:function(){var i=au(Si)[0],a=qt().memoizedState;return[typeof i=="boolean"?i:_l(i),a]},useSyncExternalStore:Z0,useId:Cg,useHostTransitionStatus:th,useFormState:fg,useActionState:fg,useOptimistic:function(i,a){var o=qt();return ag(o,Et,i,a)},useMemoCache:Kf,useCacheRefresh:kg};sh.useEffectEvent=yg;var Pg={readContext:bn,use:iu,useCallback:Tg,useContext:bn,useEffect:Xf,useImperativeHandle:_g,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Eg,useReducer:Yf,useRef:pg,useState:function(){return Yf(Si)},useDebugValue:Wf,useDeferredValue:function(i,a){var o=qt();return Et===null?Zf(o,i,a):Sg(o,Et.memoizedState,i,a)},useTransition:function(){var i=Yf(Si)[0],a=qt().memoizedState;return[typeof i=="boolean"?i:_l(i),a]},useSyncExternalStore:Z0,useId:Cg,useHostTransitionStatus:th,useFormState:mg,useActionState:mg,useOptimistic:function(i,a){var o=qt();return Et!==null?ag(o,Et,i,a):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:kg};Pg.useEffectEvent=yg;function ih(i,a,o,d){a=i.memoizedState,o=o(d,a),o=o==null?a:_({},a,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var ah={enqueueSetState:function(i,a,o){i=i._reactInternals;var d=cs(),x=ia(d);x.payload=a,o!=null&&(x.callback=o),a=aa(i,x,d),a!==null&&(Xn(a,i,d),yl(a,i,d))},enqueueReplaceState:function(i,a,o){i=i._reactInternals;var d=cs(),x=ia(d);x.tag=1,x.payload=a,o!=null&&(x.callback=o),a=aa(i,x,d),a!==null&&(Xn(a,i,d),yl(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var o=cs(),d=ia(o);d.tag=2,a!=null&&(d.callback=a),a=aa(i,d,o),a!==null&&(Xn(a,i,o),yl(a,i,o))}};function Vg(i,a,o,d,x,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,S):a.prototype&&a.prototype.isPureReactComponent?!cl(o,d)||!cl(x,b):!0}function Lg(i,a,o,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,d),a.state!==i&&ah.enqueueReplaceState(a,a.state,null)}function rr(i,a){var o=a;if("ref"in a){o={};for(var d in a)d!=="ref"&&(o[d]=a[d])}if(i=i.defaultProps){o===a&&(o=_({},o));for(var x in i)o[x]===void 0&&(o[x]=i[x])}return o}function Ug(i){Gc(i)}function jg(i){console.error(i)}function Og(i){Gc(i)}function cu(i,a){try{var o=i.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Gg(i,a,o){try{var d=i.onCaughtError;d(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function rh(i,a,o){return o=ia(o),o.tag=3,o.payload={element:null},o.callback=function(){cu(i,a)},o}function Bg(i){return i=ia(i),i.tag=3,i}function zg(i,a,o,d){var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var b=d.value;i.payload=function(){return x(b)},i.callback=function(){Gg(a,o,d)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Gg(a,o,d),typeof x!="function"&&(da===null?da=new Set([this]):da.add(this));var k=d.stack;this.componentDidCatch(d.value,{componentStack:k!==null?k:""})})}function D1(i,a,o,d,x){if(o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=o.alternate,a!==null&&Yr(a,o,x,!0),o=as.current,o!==null){switch(o.tag){case 31:case 13:return vs===null?_u():o.alternate===null&&Bt===0&&(Bt=3),o.flags&=-257,o.flags|=65536,o.lanes=x,d===Qc?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([d]):a.add(d),Rh(i,d,x)),!1;case 22:return o.flags|=65536,d===Qc?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([d]):o.add(d)),Rh(i,d,x)),!1}throw Error(s(435,o.tag))}return Rh(i,d,x),_u(),!1}if(rt)return a=as.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=x,d!==Af&&(i=Error(s(422),{cause:d}),fl(ps(i,o)))):(d!==Af&&(a=Error(s(423),{cause:d}),fl(ps(a,o))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,d=ps(d,o),x=rh(i.stateNode,d,x),Lf(i,x),Bt!==4&&(Bt=2)),!1;var b=Error(s(520),{cause:d});if(b=ps(b,o),Rl===null?Rl=[b]:Rl.push(b),Bt!==4&&(Bt=2),a===null)return!0;d=ps(d,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,i=x&-x,o.lanes|=i,i=rh(o.stateNode,d,i),Lf(o,i),!1;case 1:if(a=o.type,b=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(da===null||!da.has(b))))return o.flags|=65536,x&=-x,o.lanes|=x,x=Bg(x),zg(x,i,o,d),Lf(o,x),!1}o=o.return}while(o!==null);return!1}var oh=Error(s(461)),Wt=!1;function _n(i,a,o,d){a.child=i===null?K0(a,null,o,d):ir(a,i.child,o,d)}function Hg(i,a,o,d,x){o=o.render;var b=a.ref;if("ref"in d){var S={};for(var k in d)k!=="ref"&&(S[k]=d[k])}else S=d;return er(a),d=zf(i,a,o,S,b,x),k=Hf(),i!==null&&!Wt?(Ff(i,a,x),Ai(i,a,x)):(rt&&k&&Ef(a),a.flags|=1,_n(i,a,d,x),a.child)}function Fg(i,a,o,d,x){if(i===null){var b=o.type;return typeof b=="function"&&!bf(b)&&b.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=b,qg(i,a,b,d,x)):(i=Fc(o.type,null,d,a,a.mode,x),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!ph(i,x)){var S=b.memoizedProps;if(o=o.compare,o=o!==null?o:cl,o(S,d)&&i.ref===a.ref)return Ai(i,a,x)}return a.flags|=1,i=vi(b,d),i.ref=a.ref,i.return=a,a.child=i}function qg(i,a,o,d,x){if(i!==null){var b=i.memoizedProps;if(cl(b,d)&&i.ref===a.ref)if(Wt=!1,a.pendingProps=d=b,ph(i,x))(i.flags&131072)!==0&&(Wt=!0);else return a.lanes=i.lanes,Ai(i,a,x)}return lh(i,a,o,d,x)}function Kg(i,a,o,d){var x=d.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|o:o,i!==null){for(d=a.child=i.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~b}else d=0,a.child=null;return $g(i,a,b,o,d)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Yc(a,b!==null?b.cachePool:null),b!==null?J0(a,b):jf(),Q0(a);else return d=a.lanes=536870912,$g(i,a,b!==null?b.baseLanes|o:o,o,d)}else b!==null?(Yc(a,b.cachePool),J0(a,b),oa(),a.memoizedState=null):(i!==null&&Yc(a,null),jf(),oa());return _n(i,a,x,o),a.child}function Sl(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function $g(i,a,o,d,x){var b=Mf();return b=b===null?null:{parent:Qt._currentValue,pool:b},a.memoizedState={baseLanes:o,cachePool:b},i!==null&&Yc(a,null),jf(),Q0(a),i!==null&&Yr(i,a,d,!0),a.childLanes=x,null}function uu(i,a){return a=fu({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Yg(i,a,o){return ir(a,i.child,null,o),i=uu(a,a.pendingProps),i.flags|=2,rs(a),a.memoizedState=null,i}function P1(i,a,o){var d=a.pendingProps,x=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(rt){if(d.mode==="hidden")return i=uu(a,d),a.lanes=536870912,Sl(null,i);if(Gf(a),(i=It)?(i=rx(i,xs),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Zi!==null?{id:ii,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},o=R0(i),o.return=a,a.child=o,vn=a,It=null)):i=null,i===null)throw ta(a);return a.lanes=536870912,null}return uu(a,d)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if(Gf(a),x)if(a.flags&256)a.flags&=-257,a=Yg(i,a,o);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(s(558));else if(Wt||Yr(i,a,o,!1),x=(o&i.childLanes)!==0,Wt||x){if(d=wt,d!==null&&(S=Fn(d,o),S!==0&&S!==b.retryLane))throw b.retryLane=S,Qa(i,S),Xn(d,i,S),oh;_u(),a=Yg(i,a,o)}else i=b.treeContext,It=bs(S.nextSibling),vn=a,rt=!0,ea=null,xs=!1,i!==null&&P0(a,i),a=uu(a,d),a.flags|=4096;return a}return i=vi(i.child,{mode:d.mode,children:d.children}),i.ref=a.ref,a.child=i,i.return=a,i}function du(i,a){var o=a.ref;if(o===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(a.flags|=4194816)}}function lh(i,a,o,d,x){return er(a),o=zf(i,a,o,d,void 0,x),d=Hf(),i!==null&&!Wt?(Ff(i,a,x),Ai(i,a,x)):(rt&&d&&Ef(a),a.flags|=1,_n(i,a,o,x),a.child)}function Jg(i,a,o,d,x,b){return er(a),a.updateQueue=null,o=W0(a,d,o,x),X0(i),d=Hf(),i!==null&&!Wt?(Ff(i,a,b),Ai(i,a,b)):(rt&&d&&Ef(a),a.flags|=1,_n(i,a,o,b),a.child)}function Qg(i,a,o,d,x){if(er(a),a.stateNode===null){var b=Fr,S=o.contextType;typeof S=="object"&&S!==null&&(b=bn(S)),b=new o(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=ah,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},Pf(a),S=o.contextType,b.context=typeof S=="object"&&S!==null?bn(S):Fr,b.state=a.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(ih(a,o,S,d),b.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&ah.enqueueReplaceState(b,b.state,null),vl(a,d,b,x),xl(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){b=a.stateNode;var k=a.memoizedProps,H=rr(o,k);b.props=H;var W=b.context,re=o.contextType;S=Fr,typeof re=="object"&&re!==null&&(S=bn(re));var fe=o.getDerivedStateFromProps;re=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,re||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||W!==S)&&Lg(a,b,d,S),sa=!1;var ee=a.memoizedState;b.state=ee,vl(a,d,b,x),xl(),W=a.memoizedState,k||ee!==W||sa?(typeof fe=="function"&&(ih(a,o,fe,d),W=a.memoizedState),(H=sa||Vg(a,o,H,d,ee,W,S))?(re||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=W),b.props=d,b.state=W,b.context=S,d=H):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,Vf(i,a),S=a.memoizedProps,re=rr(o,S),b.props=re,fe=a.pendingProps,ee=b.context,W=o.contextType,H=Fr,typeof W=="object"&&W!==null&&(H=bn(W)),k=o.getDerivedStateFromProps,(W=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==fe||ee!==H)&&Lg(a,b,d,H),sa=!1,ee=a.memoizedState,b.state=ee,vl(a,d,b,x),xl();var ie=a.memoizedState;S!==fe||ee!==ie||sa||i!==null&&i.dependencies!==null&&Kc(i.dependencies)?(typeof k=="function"&&(ih(a,o,k,d),ie=a.memoizedState),(re=sa||Vg(a,o,re,d,ee,ie,H)||i!==null&&i.dependencies!==null&&Kc(i.dependencies))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ie,H),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ie,H)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ie),b.props=d,b.state=ie,b.context=H,d=re):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),d=!1)}return b=d,du(i,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,o=d&&typeof o.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&d?(a.child=ir(a,i.child,null,x),a.child=ir(a,null,o,x)):_n(i,a,o,x),a.memoizedState=b.state,i=a.child):i=Ai(i,a,x),i}function Xg(i,a,o,d){return Wa(),a.flags|=256,_n(i,a,o,d),a.child}var ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uh(i){return{baseLanes:i,cachePool:G0()}}function dh(i,a,o){return i=i!==null?i.childLanes&~o:0,a&&(i|=ls),i}function Wg(i,a,o){var d=a.pendingProps,x=!1,b=(a.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(Ft.current&2)!==0),S&&(x=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,i===null){if(rt){if(x?ra(a):oa(),(i=It)?(i=rx(i,xs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Zi!==null?{id:ii,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},o=R0(i),o.return=a,a.child=o,vn=a,It=null)):i=null,i===null)throw ta(a);return $h(i)?a.lanes=32:a.lanes=536870912,null}var k=d.children;return d=d.fallback,x?(oa(),x=a.mode,k=fu({mode:"hidden",children:k},x),d=Xa(d,x,o,null),k.return=a,d.return=a,k.sibling=d,a.child=k,d=a.child,d.memoizedState=uh(o),d.childLanes=dh(i,S,o),a.memoizedState=ch,Sl(null,d)):(ra(a),fh(a,k))}var H=i.memoizedState;if(H!==null&&(k=H.dehydrated,k!==null)){if(b)a.flags&256?(ra(a),a.flags&=-257,a=hh(i,a,o)):a.memoizedState!==null?(oa(),a.child=i.child,a.flags|=128,a=null):(oa(),k=d.fallback,x=a.mode,d=fu({mode:"visible",children:d.children},x),k=Xa(k,x,o,null),k.flags|=2,d.return=a,k.return=a,d.sibling=k,a.child=d,ir(a,i.child,null,o),d=a.child,d.memoizedState=uh(o),d.childLanes=dh(i,S,o),a.memoizedState=ch,a=Sl(null,d));else if(ra(a),$h(k)){if(S=k.nextSibling&&k.nextSibling.dataset,S)var W=S.dgst;S=W,d=Error(s(419)),d.stack="",d.digest=S,fl({value:d,source:null,stack:null}),a=hh(i,a,o)}else if(Wt||Yr(i,a,o,!1),S=(o&i.childLanes)!==0,Wt||S){if(S=wt,S!==null&&(d=Fn(S,o),d!==0&&d!==H.retryLane))throw H.retryLane=d,Qa(i,d),Xn(S,i,d),oh;Kh(k)||_u(),a=hh(i,a,o)}else Kh(k)?(a.flags|=192,a.child=i.child,a=null):(i=H.treeContext,It=bs(k.nextSibling),vn=a,rt=!0,ea=null,xs=!1,i!==null&&P0(a,i),a=fh(a,d.children),a.flags|=4096);return a}return x?(oa(),k=d.fallback,x=a.mode,H=i.child,W=H.sibling,d=vi(H,{mode:"hidden",children:d.children}),d.subtreeFlags=H.subtreeFlags&65011712,W!==null?k=vi(W,k):(k=Xa(k,x,o,null),k.flags|=2),k.return=a,d.return=a,d.sibling=k,a.child=d,Sl(null,d),d=a.child,k=i.child.memoizedState,k===null?k=uh(o):(x=k.cachePool,x!==null?(H=Qt._currentValue,x=x.parent!==H?{parent:H,pool:H}:x):x=G0(),k={baseLanes:k.baseLanes|o,cachePool:x}),d.memoizedState=k,d.childLanes=dh(i,S,o),a.memoizedState=ch,Sl(i.child,d)):(ra(a),o=i.child,i=o.sibling,o=vi(o,{mode:"visible",children:d.children}),o.return=a,o.sibling=null,i!==null&&(S=a.deletions,S===null?(a.deletions=[i],a.flags|=16):S.push(i)),a.child=o,a.memoizedState=null,o)}function fh(i,a){return a=fu({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function fu(i,a){return i=is(22,i,null,a),i.lanes=0,i}function hh(i,a,o){return ir(a,i.child,null,o),i=fh(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Zg(i,a,o){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),Cf(i.return,a,o)}function mh(i,a,o,d,x,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:o,tailMode:x,treeForkCount:b}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=o,S.tailMode=x,S.treeForkCount=b)}function ey(i,a,o){var d=a.pendingProps,x=d.revealOrder,b=d.tail;d=d.children;var S=Ft.current,k=(S&2)!==0;if(k?(S=S&1|2,a.flags|=128):S&=1,Z(Ft,S),_n(i,a,d,o),d=rt?dl:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Zg(i,o,a);else if(i.tag===19)Zg(i,o,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(o=a.child,x=null;o!==null;)i=o.alternate,i!==null&&eu(i)===null&&(x=o),o=o.sibling;o=x,o===null?(x=a.child,a.child=null):(x=o.sibling,o.sibling=null),mh(a,!1,x,o,b,d);break;case"backwards":case"unstable_legacy-backwards":for(o=null,x=a.child,a.child=null;x!==null;){if(i=x.alternate,i!==null&&eu(i)===null){a.child=x;break}i=x.sibling,x.sibling=o,o=x,x=i}mh(a,!0,o,null,b,d);break;case"together":mh(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Ai(i,a,o){if(i!==null&&(a.dependencies=i.dependencies),ua|=a.lanes,(o&a.childLanes)===0)if(i!==null){if(Yr(i,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,o=vi(i,i.pendingProps),a.child=o,o.return=a;i.sibling!==null;)i=i.sibling,o=o.sibling=vi(i,i.pendingProps),o.return=a;o.sibling=null}return a.child}function ph(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Kc(i)))}function V1(i,a,o){switch(a.tag){case 3:Se(a,a.stateNode.containerInfo),na(a,Qt,i.memoizedState.cache),Wa();break;case 27:case 5:Xe(a);break;case 4:Se(a,a.stateNode.containerInfo);break;case 10:na(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Gf(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(ra(a),a.flags|=128,null):(o&a.child.childLanes)!==0?Wg(i,a,o):(ra(a),i=Ai(i,a,o),i!==null?i.sibling:null);ra(a);break;case 19:var x=(i.flags&128)!==0;if(d=(o&a.childLanes)!==0,d||(Yr(i,a,o,!1),d=(o&a.childLanes)!==0),x){if(d)return ey(i,a,o);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Z(Ft,Ft.current),d)break;return null;case 22:return a.lanes=0,Kg(i,a,o,a.pendingProps);case 24:na(a,Qt,i.memoizedState.cache)}return Ai(i,a,o)}function ty(i,a,o){if(i!==null)if(i.memoizedProps!==a.pendingProps)Wt=!0;else{if(!ph(i,o)&&(a.flags&128)===0)return Wt=!1,V1(i,a,o);Wt=(i.flags&131072)!==0}else Wt=!1,rt&&(a.flags&1048576)!==0&&D0(a,dl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(i=nr(a.elementType),a.type=i,typeof i=="function")bf(i)?(d=rr(i,d),a.tag=1,a=Qg(null,a,i,d,o)):(a.tag=0,a=lh(null,a,i,d,o));else{if(i!=null){var x=i.$$typeof;if(x===te){a.tag=11,a=Hg(null,a,i,d,o);break e}else if(x===M){a.tag=14,a=Fg(null,a,i,d,o);break e}}throw a=ge(i)||i,Error(s(306,a,""))}}return a;case 0:return lh(i,a,a.type,a.pendingProps,o);case 1:return d=a.type,x=rr(d,a.pendingProps),Qg(i,a,d,x,o);case 3:e:{if(Se(a,a.stateNode.containerInfo),i===null)throw Error(s(387));d=a.pendingProps;var b=a.memoizedState;x=b.element,Vf(i,a),vl(a,d,null,o);var S=a.memoizedState;if(d=S.cache,na(a,Qt,d),d!==b.cache&&kf(a,[Qt],o,!0),xl(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Xg(i,a,d,o);break e}else if(d!==x){x=ps(Error(s(424)),a),fl(x),a=Xg(i,a,d,o);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(It=bs(i.firstChild),vn=a,rt=!0,ea=null,xs=!0,o=K0(a,null,d,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Wa(),d===x){a=Ai(i,a,o);break e}_n(i,a,d,o)}a=a.child}return a;case 26:return du(i,a),i===null?(o=fx(a.type,null,a.pendingProps,null))?a.memoizedState=o:rt||(o=a.type,i=a.pendingProps,d=Cu(ue.current).createElement(o),d[Lt]=a,d[$t]=i,Tn(d,o,i),Yt(d),a.stateNode=d):a.memoizedState=fx(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Xe(a),i===null&&rt&&(d=a.stateNode=cx(a.type,a.pendingProps,ue.current),vn=a,xs=!0,x=It,pa(a.type)?(Yh=x,It=bs(d.firstChild)):It=x),_n(i,a,a.pendingProps.children,o),du(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&rt&&((x=d=It)&&(d=dA(d,a.type,a.pendingProps,xs),d!==null?(a.stateNode=d,vn=a,It=bs(d.firstChild),xs=!1,x=!0):x=!1),x||ta(a)),Xe(a),x=a.type,b=a.pendingProps,S=i!==null?i.memoizedProps:null,d=b.children,Hh(x,b)?d=null:S!==null&&Hh(x,S)&&(a.flags|=32),a.memoizedState!==null&&(x=zf(i,a,N1,null,null,o),Ol._currentValue=x),du(i,a),_n(i,a,d,o),a.child;case 6:return i===null&&rt&&((i=o=It)&&(o=fA(o,a.pendingProps,xs),o!==null?(a.stateNode=o,vn=a,It=null,i=!0):i=!1),i||ta(a)),null;case 13:return Wg(i,a,o);case 4:return Se(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=ir(a,null,d,o):_n(i,a,d,o),a.child;case 11:return Hg(i,a,a.type,a.pendingProps,o);case 7:return _n(i,a,a.pendingProps,o),a.child;case 8:return _n(i,a,a.pendingProps.children,o),a.child;case 12:return _n(i,a,a.pendingProps.children,o),a.child;case 10:return d=a.pendingProps,na(a,a.type,d.value),_n(i,a,d.children,o),a.child;case 9:return x=a.type._context,d=a.pendingProps.children,er(a),x=bn(x),d=d(x),a.flags|=1,_n(i,a,d,o),a.child;case 14:return Fg(i,a,a.type,a.pendingProps,o);case 15:return qg(i,a,a.type,a.pendingProps,o);case 19:return ey(i,a,o);case 31:return P1(i,a,o);case 22:return Kg(i,a,o,a.pendingProps);case 24:return er(a),d=bn(Qt),i===null?(x=Mf(),x===null&&(x=wt,b=If(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=o),x=b),a.memoizedState={parent:d,cache:x},Pf(a),na(a,Qt,x)):((i.lanes&o)!==0&&(Vf(i,a),vl(a,null,null,o),xl()),x=i.memoizedState,b=a.memoizedState,x.parent!==d?(x={parent:d,cache:d},a.memoizedState=x,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=x),na(a,Qt,d)):(d=b.cache,na(a,Qt,d),d!==x.cache&&kf(a,[Qt],o,!0))),_n(i,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Ni(i){i.flags|=4}function gh(i,a,o,d,x){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(Cy())i.flags|=8192;else throw sr=Qc,Df}else i.flags&=-16777217}function ny(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!yx(a))if(Cy())i.flags|=8192;else throw sr=Qc,Df}function hu(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?_t():536870912,i.lanes|=a,ro|=a)}function Al(i,a){if(!rt)switch(i.tailMode){case"hidden":a=i.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Rt(i){var a=i.alternate!==null&&i.alternate.child===i.child,o=0,d=0;if(a)for(var x=i.child;x!==null;)o|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)o|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=d,i.childLanes=o,a}function L1(i,a,o){var d=a.pendingProps;switch(Sf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(a),null;case 1:return Rt(a),null;case 3:return o=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Ti(Qt),Ce(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&($r(a)?Ni(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Nf())),Rt(a),null;case 26:var x=a.type,b=a.memoizedState;return i===null?(Ni(a),b!==null?(Rt(a),ny(a,b)):(Rt(a),gh(a,x,null,d,o))):b?b!==i.memoizedState?(Ni(a),Rt(a),ny(a,b)):(Rt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==d&&Ni(a),Rt(a),gh(a,x,i,d,o)),null;case 27:if(vt(a),o=ue.current,x=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&Ni(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Rt(a),null}i=K.current,$r(a)?V0(a):(i=cx(x,d,o),a.stateNode=i,Ni(a))}return Rt(a),null;case 5:if(vt(a),x=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&Ni(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Rt(a),null}if(b=K.current,$r(a))V0(a);else{var S=Cu(ue.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?S.createElement(x,{is:d.is}):S.createElement(x)}}b[Lt]=a,b[$t]=d;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=b;e:switch(Tn(b,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ni(a)}}return Rt(a),gh(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,o),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&Ni(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(s(166));if(i=ue.current,$r(a)){if(i=a.stateNode,o=a.memoizedProps,d=null,x=vn,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}i[Lt]=a,i=!!(i.nodeValue===o||d!==null&&d.suppressHydrationWarning===!0||Wy(i.nodeValue,o)),i||ta(a,!0)}else i=Cu(i).createTextNode(d),i[Lt]=a,a.stateNode=i}return Rt(a),null;case 31:if(o=a.memoizedState,i===null||i.memoizedState!==null){if(d=$r(a),o!==null){if(i===null){if(!d)throw Error(s(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Lt]=a}else Wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),i=!1}else o=Nf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return a.flags&256?(rs(a),a):(rs(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Rt(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=$r(a),d!==null&&d.dehydrated!==null){if(i===null){if(!x)throw Error(s(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[Lt]=a}else Wa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),x=!1}else x=Nf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return a.flags&256?(rs(a),a):(rs(a),null)}return rs(a),(a.flags&128)!==0?(a.lanes=o,a):(o=d!==null,i=i!==null&&i.memoizedState!==null,o&&(d=a.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048)),o!==i&&o&&(a.child.flags|=8192),hu(a,a.updateQueue),Rt(a),null);case 4:return Ce(),i===null&&jh(a.stateNode.containerInfo),Rt(a),null;case 10:return Ti(a.type),Rt(a),null;case 19:if(se(Ft),d=a.memoizedState,d===null)return Rt(a),null;if(x=(a.flags&128)!==0,b=d.rendering,b===null)if(x)Al(d,!1);else{if(Bt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=eu(i),b!==null){for(a.flags|=128,Al(d,!1),i=b.updateQueue,a.updateQueue=i,hu(a,i),a.subtreeFlags=0,i=o,o=a.child;o!==null;)I0(o,i),o=o.sibling;return Z(Ft,Ft.current&1|2),rt&&bi(a,d.treeForkCount),a.child}i=i.sibling}d.tail!==null&&mn()>xu&&(a.flags|=128,x=!0,Al(d,!1),a.lanes=4194304)}else{if(!x)if(i=eu(b),i!==null){if(a.flags|=128,x=!0,i=i.updateQueue,a.updateQueue=i,hu(a,i),Al(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!rt)return Rt(a),null}else 2*mn()-d.renderingStartTime>xu&&o!==536870912&&(a.flags|=128,x=!0,Al(d,!1),a.lanes=4194304);d.isBackwards?(b.sibling=a.child,a.child=b):(i=d.last,i!==null?i.sibling=b:a.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=mn(),i.sibling=null,o=Ft.current,Z(Ft,x?o&1|2:o&1),rt&&bi(a,d.treeForkCount),i):(Rt(a),null);case 22:case 23:return rs(a),Of(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(o&536870912)!==0&&(a.flags&128)===0&&(Rt(a),a.subtreeFlags&6&&(a.flags|=8192)):Rt(a),o=a.updateQueue,o!==null&&hu(a,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==o&&(a.flags|=2048),i!==null&&se(tr),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Ti(Qt),Rt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function U1(i,a){switch(Sf(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ti(Qt),Ce(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return vt(a),null;case 31:if(a.memoizedState!==null){if(rs(a),a.alternate===null)throw Error(s(340));Wa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(rs(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Wa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return se(Ft),null;case 4:return Ce(),null;case 10:return Ti(a.type),null;case 22:case 23:return rs(a),Of(),i!==null&&se(tr),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Ti(Qt),null;case 25:return null;default:return null}}function sy(i,a){switch(Sf(a),a.tag){case 3:Ti(Qt),Ce();break;case 26:case 27:case 5:vt(a);break;case 4:Ce();break;case 31:a.memoizedState!==null&&rs(a);break;case 13:rs(a);break;case 19:se(Ft);break;case 10:Ti(a.type);break;case 22:case 23:rs(a),Of(),i!==null&&se(tr);break;case 24:Ti(Qt)}}function Nl(i,a){try{var o=a.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var x=d.next;o=x;do{if((o.tag&i)===i){d=void 0;var b=o.create,S=o.inst;d=b(),S.destroy=d}o=o.next}while(o!==x)}}catch(k){xt(a,a.return,k)}}function la(i,a,o){try{var d=a.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var b=x.next;d=b;do{if((d.tag&i)===i){var S=d.inst,k=S.destroy;if(k!==void 0){S.destroy=void 0,x=a;var H=o,W=k;try{W()}catch(re){xt(x,H,re)}}}d=d.next}while(d!==b)}}catch(re){xt(a,a.return,re)}}function iy(i){var a=i.updateQueue;if(a!==null){var o=i.stateNode;try{Y0(a,o)}catch(d){xt(i,i.return,d)}}}function ay(i,a,o){o.props=rr(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(d){xt(i,a,d)}}function wl(i,a){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof o=="function"?i.refCleanup=o(d):o.current=d}}catch(x){xt(i,a,x)}}function ri(i,a){var o=i.ref,d=i.refCleanup;if(o!==null)if(typeof d=="function")try{d()}catch(x){xt(i,a,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(x){xt(i,a,x)}else o.current=null}function ry(i){var a=i.type,o=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&d.focus();break e;case"img":o.src?d.src=o.src:o.srcSet&&(d.srcset=o.srcSet)}}catch(x){xt(i,i.return,x)}}function yh(i,a,o){try{var d=i.stateNode;aA(d,i.type,o,a),d[$t]=a}catch(x){xt(i,i.return,x)}}function oy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&pa(i.type)||i.tag===4}function xh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||oy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&pa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vh(i,a,o){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(i),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=ks));else if(d!==4&&(d===27&&pa(i.type)&&(o=i.stateNode,a=null),i=i.child,i!==null))for(vh(i,a,o),i=i.sibling;i!==null;)vh(i,a,o),i=i.sibling}function mu(i,a,o){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?o.insertBefore(i,a):o.appendChild(i);else if(d!==4&&(d===27&&pa(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(mu(i,a,o),i=i.sibling;i!==null;)mu(i,a,o),i=i.sibling}function ly(i){var a=i.stateNode,o=i.memoizedProps;try{for(var d=i.type,x=a.attributes;x.length;)a.removeAttributeNode(x[0]);Tn(a,d,o),a[Lt]=i,a[$t]=o}catch(b){xt(i,i.return,b)}}var wi=!1,Zt=!1,bh=!1,cy=typeof WeakSet=="function"?WeakSet:Set,dn=null;function j1(i,a){if(i=i.containerInfo,Bh=Vu,i=_0(i),hf(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var d=o.getSelection&&o.getSelection();if(d&&d.rangeCount!==0){o=d.anchorNode;var x=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{o.nodeType,b.nodeType}catch{o=null;break e}var S=0,k=-1,H=-1,W=0,re=0,fe=i,ee=null;t:for(;;){for(var ie;fe!==o||x!==0&&fe.nodeType!==3||(k=S+x),fe!==b||d!==0&&fe.nodeType!==3||(H=S+d),fe.nodeType===3&&(S+=fe.nodeValue.length),(ie=fe.firstChild)!==null;)ee=fe,fe=ie;for(;;){if(fe===i)break t;if(ee===o&&++W===x&&(k=S),ee===b&&++re===d&&(H=S),(ie=fe.nextSibling)!==null)break;fe=ee,ee=fe.parentNode}fe=ie}o=k===-1||H===-1?null:{start:k,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(zh={focusedElem:i,selectionRange:o},Vu=!1,dn=a;dn!==null;)if(a=dn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,dn=i;else for(;dn!==null;){switch(a=dn,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)x=i[o],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,o=a,x=b.memoizedProps,b=b.memoizedState,d=o.stateNode;try{var Ie=rr(o.type,x);i=d.getSnapshotBeforeUpdate(Ie,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Le){xt(o,o.return,Le)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,o=i.nodeType,o===9)qh(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":qh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,dn=i;break}dn=a.return}}function uy(i,a,o){var d=o.flags;switch(o.tag){case 0:case 11:case 15:ki(i,o),d&4&&Nl(5,o);break;case 1:if(ki(i,o),d&4)if(i=o.stateNode,a===null)try{i.componentDidMount()}catch(S){xt(o,o.return,S)}else{var x=rr(o.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(x,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){xt(o,o.return,S)}}d&64&&iy(o),d&512&&wl(o,o.return);break;case 3:if(ki(i,o),d&64&&(i=o.updateQueue,i!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{Y0(i,a)}catch(S){xt(o,o.return,S)}}break;case 27:a===null&&d&4&&ly(o);case 26:case 5:ki(i,o),a===null&&d&4&&ry(o),d&512&&wl(o,o.return);break;case 12:ki(i,o);break;case 31:ki(i,o),d&4&&hy(i,o);break;case 13:ki(i,o),d&4&&my(i,o),d&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=$1.bind(null,o),hA(i,o))));break;case 22:if(d=o.memoizedState!==null||wi,!d){a=a!==null&&a.memoizedState!==null||Zt,x=wi;var b=Zt;wi=d,(Zt=a)&&!b?Ii(i,o,(o.subtreeFlags&8772)!==0):ki(i,o),wi=x,Zt=b}break;case 30:break;default:ki(i,o)}}function dy(i){var a=i.alternate;a!==null&&(i.alternate=null,dy(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Ir(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Pt=null,$n=!1;function Ci(i,a,o){for(o=o.child;o!==null;)fy(i,a,o),o=o.sibling}function fy(i,a,o){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Zn,o)}catch{}switch(o.tag){case 26:Zt||ri(o,a),Ci(i,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Zt||ri(o,a);var d=Pt,x=$n;pa(o.type)&&(Pt=o.stateNode,$n=!1),Ci(i,a,o),Ll(o.stateNode),Pt=d,$n=x;break;case 5:Zt||ri(o,a);case 6:if(d=Pt,x=$n,Pt=null,Ci(i,a,o),Pt=d,$n=x,Pt!==null)if($n)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(o.stateNode)}catch(b){xt(o,a,b)}else try{Pt.removeChild(o.stateNode)}catch(b){xt(o,a,b)}break;case 18:Pt!==null&&($n?(i=Pt,ix(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),po(i)):ix(Pt,o.stateNode));break;case 4:d=Pt,x=$n,Pt=o.stateNode.containerInfo,$n=!0,Ci(i,a,o),Pt=d,$n=x;break;case 0:case 11:case 14:case 15:la(2,o,a),Zt||la(4,o,a),Ci(i,a,o);break;case 1:Zt||(ri(o,a),d=o.stateNode,typeof d.componentWillUnmount=="function"&&ay(o,a,d)),Ci(i,a,o);break;case 21:Ci(i,a,o);break;case 22:Zt=(d=Zt)||o.memoizedState!==null,Ci(i,a,o),Zt=d;break;default:Ci(i,a,o)}}function hy(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{po(i)}catch(o){xt(a,a.return,o)}}}function my(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{po(i)}catch(o){xt(a,a.return,o)}}function O1(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new cy),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new cy),a;default:throw Error(s(435,i.tag))}}function pu(i,a){var o=O1(i);a.forEach(function(d){if(!o.has(d)){o.add(d);var x=Y1.bind(null,i,d);d.then(x,x)}})}function Yn(i,a){var o=a.deletions;if(o!==null)for(var d=0;d<o.length;d++){var x=o[d],b=i,S=a,k=S;e:for(;k!==null;){switch(k.tag){case 27:if(pa(k.type)){Pt=k.stateNode,$n=!1;break e}break;case 5:Pt=k.stateNode,$n=!1;break e;case 3:case 4:Pt=k.stateNode.containerInfo,$n=!0;break e}k=k.return}if(Pt===null)throw Error(s(160));fy(b,S,x),Pt=null,$n=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)py(a,i),a=a.sibling}var Vs=null;function py(i,a){var o=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Yn(a,i),Jn(i),d&4&&(la(3,i,i.return),Nl(3,i),la(5,i,i.return));break;case 1:Yn(a,i),Jn(i),d&512&&(Zt||o===null||ri(o,o.return)),d&64&&wi&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?d:o.concat(d))));break;case 26:var x=Vs;if(Yn(a,i),Jn(i),d&512&&(Zt||o===null||ri(o,o.return)),d&4){var b=o!==null?o.memoizedState:null;if(d=i.memoizedState,o===null)if(d===null)if(i.stateNode===null){e:{d=i.type,o=i.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":b=x.getElementsByTagName("title")[0],(!b||b[Ks]||b[Lt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(d),x.head.insertBefore(b,x.querySelector("head > title"))),Tn(b,d,o),b[Lt]=i,Yt(b),d=b;break e;case"link":var S=px("link","href",x).get(d+(o.href||""));if(S){for(var k=0;k<S.length;k++)if(b=S[k],b.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&b.getAttribute("rel")===(o.rel==null?null:o.rel)&&b.getAttribute("title")===(o.title==null?null:o.title)&&b.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(k,1);break t}}b=x.createElement(d),Tn(b,d,o),x.head.appendChild(b);break;case"meta":if(S=px("meta","content",x).get(d+(o.content||""))){for(k=0;k<S.length;k++)if(b=S[k],b.getAttribute("content")===(o.content==null?null:""+o.content)&&b.getAttribute("name")===(o.name==null?null:o.name)&&b.getAttribute("property")===(o.property==null?null:o.property)&&b.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&b.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(k,1);break t}}b=x.createElement(d),Tn(b,d,o),x.head.appendChild(b);break;default:throw Error(s(468,d))}b[Lt]=i,Yt(b),d=b}i.stateNode=d}else gx(x,i.type,i.stateNode);else i.stateNode=mx(x,d,i.memoizedProps);else b!==d?(b===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):b.count--,d===null?gx(x,i.type,i.stateNode):mx(x,d,i.memoizedProps)):d===null&&i.stateNode!==null&&yh(i,i.memoizedProps,o.memoizedProps)}break;case 27:Yn(a,i),Jn(i),d&512&&(Zt||o===null||ri(o,o.return)),o!==null&&d&4&&yh(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Yn(a,i),Jn(i),d&512&&(Zt||o===null||ri(o,o.return)),i.flags&32){x=i.stateNode;try{Kn(x,"")}catch(Ie){xt(i,i.return,Ie)}}d&4&&i.stateNode!=null&&(x=i.memoizedProps,yh(i,x,o!==null?o.memoizedProps:x)),d&1024&&(bh=!0);break;case 6:if(Yn(a,i),Jn(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,o=i.stateNode;try{o.nodeValue=d}catch(Ie){xt(i,i.return,Ie)}}break;case 3:if(Ru=null,x=Vs,Vs=ku(a.containerInfo),Yn(a,i),Vs=x,Jn(i),d&4&&o!==null&&o.memoizedState.isDehydrated)try{po(a.containerInfo)}catch(Ie){xt(i,i.return,Ie)}bh&&(bh=!1,gy(i));break;case 4:d=Vs,Vs=ku(i.stateNode.containerInfo),Yn(a,i),Jn(i),Vs=d;break;case 12:Yn(a,i),Jn(i);break;case 31:Yn(a,i),Jn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,pu(i,d)));break;case 13:Yn(a,i),Jn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(yu=mn()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,pu(i,d)));break;case 22:x=i.memoizedState!==null;var H=o!==null&&o.memoizedState!==null,W=wi,re=Zt;if(wi=W||x,Zt=re||H,Yn(a,i),Zt=re,wi=W,Jn(i),d&8192)e:for(a=i.stateNode,a._visibility=x?a._visibility&-2:a._visibility|1,x&&(o===null||H||wi||Zt||or(i)),o=null,a=i;;){if(a.tag===5||a.tag===26){if(o===null){H=o=a;try{if(b=H.stateNode,x)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{k=H.stateNode;var fe=H.memoizedProps.style,ee=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;k.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ie){xt(H,H.return,Ie)}}}else if(a.tag===6){if(o===null){H=a;try{H.stateNode.nodeValue=x?"":H.memoizedProps}catch(Ie){xt(H,H.return,Ie)}}}else if(a.tag===18){if(o===null){H=a;try{var ie=H.stateNode;x?ax(ie,!0):ax(H.stateNode,!1)}catch(Ie){xt(H,H.return,Ie)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(o=d.retryQueue,o!==null&&(d.retryQueue=null,pu(i,o))));break;case 19:Yn(a,i),Jn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,pu(i,d)));break;case 30:break;case 21:break;default:Yn(a,i),Jn(i)}}function Jn(i){var a=i.flags;if(a&2){try{for(var o,d=i.return;d!==null;){if(oy(d)){o=d;break}d=d.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var x=o.stateNode,b=xh(i);mu(i,b,x);break;case 5:var S=o.stateNode;o.flags&32&&(Kn(S,""),o.flags&=-33);var k=xh(i);mu(i,k,S);break;case 3:case 4:var H=o.stateNode.containerInfo,W=xh(i);vh(i,W,H);break;default:throw Error(s(161))}}catch(re){xt(i,i.return,re)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function gy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;gy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function ki(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)uy(i,a.alternate,a),a=a.sibling}function or(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:la(4,a,a.return),or(a);break;case 1:ri(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&ay(a,a.return,o),or(a);break;case 27:Ll(a.stateNode);case 26:case 5:ri(a,a.return),or(a);break;case 22:a.memoizedState===null&&or(a);break;case 30:or(a);break;default:or(a)}i=i.sibling}}function Ii(i,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,x=i,b=a,S=b.flags;switch(b.tag){case 0:case 11:case 15:Ii(x,b,o),Nl(4,b);break;case 1:if(Ii(x,b,o),d=b,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){xt(d,d.return,W)}if(d=b,x=d.updateQueue,x!==null){var k=d.stateNode;try{var H=x.shared.hiddenCallbacks;if(H!==null)for(x.shared.hiddenCallbacks=null,x=0;x<H.length;x++)$0(H[x],k)}catch(W){xt(d,d.return,W)}}o&&S&64&&iy(b),wl(b,b.return);break;case 27:ly(b);case 26:case 5:Ii(x,b,o),o&&d===null&&S&4&&ry(b),wl(b,b.return);break;case 12:Ii(x,b,o);break;case 31:Ii(x,b,o),o&&S&4&&hy(x,b);break;case 13:Ii(x,b,o),o&&S&4&&my(x,b);break;case 22:b.memoizedState===null&&Ii(x,b,o),wl(b,b.return);break;case 30:break;default:Ii(x,b,o)}a=a.sibling}}function _h(i,a){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&hl(o))}function Th(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&hl(i))}function Ls(i,a,o,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)yy(i,a,o,d),a=a.sibling}function yy(i,a,o,d){var x=a.flags;switch(a.tag){case 0:case 11:case 15:Ls(i,a,o,d),x&2048&&Nl(9,a);break;case 1:Ls(i,a,o,d);break;case 3:Ls(i,a,o,d),x&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&hl(i)));break;case 12:if(x&2048){Ls(i,a,o,d),i=a.stateNode;try{var b=a.memoizedProps,S=b.id,k=b.onPostCommit;typeof k=="function"&&k(S,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){xt(a,a.return,H)}}else Ls(i,a,o,d);break;case 31:Ls(i,a,o,d);break;case 13:Ls(i,a,o,d);break;case 23:break;case 22:b=a.stateNode,S=a.alternate,a.memoizedState!==null?b._visibility&2?Ls(i,a,o,d):Cl(i,a):b._visibility&2?Ls(i,a,o,d):(b._visibility|=2,so(i,a,o,d,(a.subtreeFlags&10256)!==0||!1)),x&2048&&_h(S,a);break;case 24:Ls(i,a,o,d),x&2048&&Th(a.alternate,a);break;default:Ls(i,a,o,d)}}function so(i,a,o,d,x){for(x=x&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,S=a,k=o,H=d,W=S.flags;switch(S.tag){case 0:case 11:case 15:so(b,S,k,H,x),Nl(8,S);break;case 23:break;case 22:var re=S.stateNode;S.memoizedState!==null?re._visibility&2?so(b,S,k,H,x):Cl(b,S):(re._visibility|=2,so(b,S,k,H,x)),x&&W&2048&&_h(S.alternate,S);break;case 24:so(b,S,k,H,x),x&&W&2048&&Th(S.alternate,S);break;default:so(b,S,k,H,x)}a=a.sibling}}function Cl(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=i,d=a,x=d.flags;switch(d.tag){case 22:Cl(o,d),x&2048&&_h(d.alternate,d);break;case 24:Cl(o,d),x&2048&&Th(d.alternate,d);break;default:Cl(o,d)}a=a.sibling}}var kl=8192;function io(i,a,o){if(i.subtreeFlags&kl)for(i=i.child;i!==null;)xy(i,a,o),i=i.sibling}function xy(i,a,o){switch(i.tag){case 26:io(i,a,o),i.flags&kl&&i.memoizedState!==null&&AA(o,Vs,i.memoizedState,i.memoizedProps);break;case 5:io(i,a,o);break;case 3:case 4:var d=Vs;Vs=ku(i.stateNode.containerInfo),io(i,a,o),Vs=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=kl,kl=16777216,io(i,a,o),kl=d):io(i,a,o));break;default:io(i,a,o)}}function vy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Il(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var d=a[o];dn=d,_y(d,i)}vy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)by(i),i=i.sibling}function by(i){switch(i.tag){case 0:case 11:case 15:Il(i),i.flags&2048&&la(9,i,i.return);break;case 3:Il(i);break;case 12:Il(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,gu(i)):Il(i);break;default:Il(i)}}function gu(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var d=a[o];dn=d,_y(d,i)}vy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:la(8,a,a.return),gu(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,gu(a));break;default:gu(a)}i=i.sibling}}function _y(i,a){for(;dn!==null;){var o=dn;switch(o.tag){case 0:case 11:case 15:la(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var d=o.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:hl(o.memoizedState.cache)}if(d=o.child,d!==null)d.return=o,dn=d;else e:for(o=i;dn!==null;){d=dn;var x=d.sibling,b=d.return;if(dy(d),d===o){dn=null;break e}if(x!==null){x.return=b,dn=x;break e}dn=b}}}var G1={getCacheForType:function(i){var a=bn(Qt),o=a.data.get(i);return o===void 0&&(o=i(),a.data.set(i,o)),o},cacheSignal:function(){return bn(Qt).controller.signal}},B1=typeof WeakMap=="function"?WeakMap:Map,ht=0,wt=null,We=null,et=0,yt=0,os=null,ca=!1,ao=!1,Eh=!1,Ri=0,Bt=0,ua=0,lr=0,Sh=0,ls=0,ro=0,Rl=null,Qn=null,Ah=!1,yu=0,Ty=0,xu=1/0,vu=null,da=null,rn=0,fa=null,oo=null,Mi=0,Nh=0,wh=null,Ey=null,Ml=0,Ch=null;function cs(){return(ht&2)!==0&&et!==0?et&-et:J.T!==null?Ph():Cs()}function Sy(){if(ls===0)if((et&536870912)===0||rt){var i=Qe;Qe<<=1,(Qe&3932160)===0&&(Qe=262144),ls=i}else ls=536870912;return i=as.current,i!==null&&(i.flags|=32),ls}function Xn(i,a,o){(i===wt&&(yt===2||yt===9)||i.cancelPendingCommit!==null)&&(lo(i,0),ha(i,et,ls,!1)),cn(i,o),((ht&2)===0||i!==wt)&&(i===wt&&((ht&2)===0&&(lr|=o),Bt===4&&ha(i,et,ls,!1)),oi(i))}function Ay(i,a,o){if((ht&6)!==0)throw Error(s(327));var d=!o&&(a&127)===0&&(a&i.expiredLanes)===0||Be(i,a),x=d?F1(i,a):Ih(i,a,!0),b=d;do{if(x===0){ao&&!d&&ha(i,a,0,!1);break}else{if(o=i.current.alternate,b&&!z1(o)){x=Ih(i,a,!1),b=!1;continue}if(x===2){if(b=a,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var k=i;x=Rl;var H=k.current.memoizedState.isDehydrated;if(H&&(lo(k,S).flags|=256),S=Ih(k,S,!1),S!==2){if(Eh&&!H){k.errorRecoveryDisabledLanes|=b,lr|=b,x=4;break e}b=Qn,Qn=x,b!==null&&(Qn===null?Qn=b:Qn.push.apply(Qn,b))}x=S}if(b=!1,x!==2)continue}}if(x===1){lo(i,0),ha(i,a,0,!0);break}e:{switch(d=i,b=x,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ha(d,a,ls,!ca);break e;case 2:Qn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(x=yu+300-mn(),10<x)){if(ha(d,a,ls,!ca),Ue(d,0,!0)!==0)break e;Mi=a,d.timeoutHandle=nx(Ny.bind(null,d,o,Qn,vu,Ah,a,ls,lr,ro,ca,b,"Throttled",-0,0),x);break e}Ny(d,o,Qn,vu,Ah,a,ls,lr,ro,ca,b,null,-0,0)}}break}while(!0);oi(i)}function Ny(i,a,o,d,x,b,S,k,H,W,re,fe,ee,ie){if(i.timeoutHandle=-1,fe=a.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},xy(a,b,fe);var Ie=(b&62914560)===b?yu-mn():(b&4194048)===b?Ty-mn():0;if(Ie=NA(fe,Ie),Ie!==null){Mi=b,i.cancelPendingCommit=Ie(Py.bind(null,i,a,b,o,d,x,S,k,H,re,fe,null,ee,ie)),ha(i,b,S,!W);return}}Py(i,a,b,o,d,x,S,k,H)}function z1(i){for(var a=i;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var d=0;d<o.length;d++){var x=o[d],b=x.getSnapshot;x=x.value;try{if(!ss(b(),x))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ha(i,a,o,d){a&=~Sh,a&=~lr,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var x=a;0<x;){var b=31-Vt(x),S=1<<b;d[b]=-1,x&=~S}o!==0&&pn(i,o,a)}function bu(){return(ht&6)===0?(Dl(0),!1):!0}function kh(){if(We!==null){if(yt===0)var i=We.return;else i=We,_i=Za=null,qf(i),Wr=null,pl=0,i=We;for(;i!==null;)sy(i.alternate,i),i=i.return;We=null}}function lo(i,a){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,lA(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Mi=0,kh(),wt=i,We=o=vi(i.current,null),et=a,yt=0,os=null,ca=!1,ao=Be(i,a),Eh=!1,ro=ls=Sh=lr=ua=Bt=0,Qn=Rl=null,Ah=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var x=31-Vt(d),b=1<<x;a|=i[x],d&=~b}return Ri=a,Bc(),o}function wy(i,a){Ye=null,J.H=El,a===Xr||a===Jc?(a=H0(),yt=3):a===Df?(a=H0(),yt=4):yt=a===oh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,os=a,We===null&&(Bt=1,cu(i,ps(a,i.current)))}function Cy(){var i=as.current;return i===null?!0:(et&4194048)===et?vs===null:(et&62914560)===et||(et&536870912)!==0?i===vs:!1}function ky(){var i=J.H;return J.H=El,i===null?El:i}function Iy(){var i=J.A;return J.A=G1,i}function _u(){Bt=4,ca||(et&4194048)!==et&&as.current!==null||(ao=!0),(ua&134217727)===0&&(lr&134217727)===0||wt===null||ha(wt,et,ls,!1)}function Ih(i,a,o){var d=ht;ht|=2;var x=ky(),b=Iy();(wt!==i||et!==a)&&(vu=null,lo(i,a)),a=!1;var S=Bt;e:do try{if(yt!==0&&We!==null){var k=We,H=os;switch(yt){case 8:kh(),S=6;break e;case 3:case 2:case 9:case 6:as.current===null&&(a=!0);var W=yt;if(yt=0,os=null,co(i,k,H,W),o&&ao){S=0;break e}break;default:W=yt,yt=0,os=null,co(i,k,H,W)}}H1(),S=Bt;break}catch(re){wy(i,re)}while(!0);return a&&i.shellSuspendCounter++,_i=Za=null,ht=d,J.H=x,J.A=b,We===null&&(wt=null,et=0,Bc()),S}function H1(){for(;We!==null;)Ry(We)}function F1(i,a){var o=ht;ht|=2;var d=ky(),x=Iy();wt!==i||et!==a?(vu=null,xu=mn()+500,lo(i,a)):ao=Be(i,a);e:do try{if(yt!==0&&We!==null){a=We;var b=os;t:switch(yt){case 1:yt=0,os=null,co(i,a,b,1);break;case 2:case 9:if(B0(b)){yt=0,os=null,My(a);break}a=function(){yt!==2&&yt!==9||wt!==i||(yt=7),oi(i)},b.then(a,a);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:B0(b)?(yt=0,os=null,My(a)):(yt=0,os=null,co(i,a,b,7));break;case 5:var S=null;switch(We.tag){case 26:S=We.memoizedState;case 5:case 27:var k=We;if(S?yx(S):k.stateNode.complete){yt=0,os=null;var H=k.sibling;if(H!==null)We=H;else{var W=k.return;W!==null?(We=W,Tu(W)):We=null}break t}}yt=0,os=null,co(i,a,b,5);break;case 6:yt=0,os=null,co(i,a,b,6);break;case 8:kh(),Bt=6;break e;default:throw Error(s(462))}}q1();break}catch(re){wy(i,re)}while(!0);return _i=Za=null,J.H=d,J.A=x,ht=o,We!==null?0:(wt=null,et=0,Bc(),Bt)}function q1(){for(;We!==null&&!Sr();)Ry(We)}function Ry(i){var a=ty(i.alternate,i,Ri);i.memoizedProps=i.pendingProps,a===null?Tu(i):We=a}function My(i){var a=i,o=a.alternate;switch(a.tag){case 15:case 0:a=Jg(o,a,a.pendingProps,a.type,void 0,et);break;case 11:a=Jg(o,a,a.pendingProps,a.type.render,a.ref,et);break;case 5:qf(a);default:sy(o,a),a=We=I0(a,Ri),a=ty(o,a,Ri)}i.memoizedProps=i.pendingProps,a===null?Tu(i):We=a}function co(i,a,o,d){_i=Za=null,qf(a),Wr=null,pl=0;var x=a.return;try{if(D1(i,x,a,o,et)){Bt=1,cu(i,ps(o,i.current)),We=null;return}}catch(b){if(x!==null)throw We=x,b;Bt=1,cu(i,ps(o,i.current)),We=null;return}a.flags&32768?(rt||d===1?i=!0:ao||(et&536870912)!==0?i=!1:(ca=i=!0,(d===2||d===9||d===3||d===6)&&(d=as.current,d!==null&&d.tag===13&&(d.flags|=16384))),Dy(a,i)):Tu(a)}function Tu(i){var a=i;do{if((a.flags&32768)!==0){Dy(a,ca);return}i=a.return;var o=L1(a.alternate,a,Ri);if(o!==null){We=o;return}if(a=a.sibling,a!==null){We=a;return}We=a=i}while(a!==null);Bt===0&&(Bt=5)}function Dy(i,a){do{var o=U1(i.alternate,i);if(o!==null){o.flags&=32767,We=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(i=i.sibling,i!==null)){We=i;return}We=i=o}while(i!==null);Bt=6,We=null}function Py(i,a,o,d,x,b,S,k,H){i.cancelPendingCommit=null;do Eu();while(rn!==0);if((ht&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=xf,es(i,o,b,S,k,H),i===wt&&(We=wt=null,et=0),oo=a,fa=i,Mi=o,Nh=b,wh=x,Ey=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,J1(Vn,function(){return Oy(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=J.T,J.T=null,x=ce.p,ce.p=2,S=ht,ht|=4;try{j1(i,a,o)}finally{ht=S,ce.p=x,J.T=d}}rn=1,Vy(),Ly(),Uy()}}function Vy(){if(rn===1){rn=0;var i=fa,a=oo,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var d=ce.p;ce.p=2;var x=ht;ht|=4;try{py(a,i);var b=zh,S=_0(i.containerInfo),k=b.focusedElem,H=b.selectionRange;if(S!==k&&k&&k.ownerDocument&&b0(k.ownerDocument.documentElement,k)){if(H!==null&&hf(k)){var W=H.start,re=H.end;if(re===void 0&&(re=W),"selectionStart"in k)k.selectionStart=W,k.selectionEnd=Math.min(re,k.value.length);else{var fe=k.ownerDocument||document,ee=fe&&fe.defaultView||window;if(ee.getSelection){var ie=ee.getSelection(),Ie=k.textContent.length,Le=Math.min(H.start,Ie),At=H.end===void 0?Le:Math.min(H.end,Ie);!ie.extend&&Le>At&&(S=At,At=Le,Le=S);var Y=v0(k,Le),q=v0(k,At);if(Y&&q&&(ie.rangeCount!==1||ie.anchorNode!==Y.node||ie.anchorOffset!==Y.offset||ie.focusNode!==q.node||ie.focusOffset!==q.offset)){var X=fe.createRange();X.setStart(Y.node,Y.offset),ie.removeAllRanges(),Le>At?(ie.addRange(X),ie.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ie.addRange(X))}}}}for(fe=[],ie=k;ie=ie.parentNode;)ie.nodeType===1&&fe.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<fe.length;k++){var de=fe[k];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Vu=!!Bh,zh=Bh=null}finally{ht=x,ce.p=d,J.T=o}}i.current=a,rn=2}}function Ly(){if(rn===2){rn=0;var i=fa,a=oo,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var d=ce.p;ce.p=2;var x=ht;ht|=4;try{uy(i,a.alternate,a)}finally{ht=x,ce.p=d,J.T=o}}rn=3}}function Uy(){if(rn===4||rn===3){rn=0,Ar();var i=fa,a=oo,o=Mi,d=Ey;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?rn=5:(rn=0,oo=fa=null,jy(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(da=null),Cn(o),a=a.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Zn,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=J.T,x=ce.p,ce.p=2,J.T=null;try{for(var b=i.onRecoverableError,S=0;S<d.length;S++){var k=d[S];b(k.value,{componentStack:k.stack})}}finally{J.T=a,ce.p=x}}(Mi&3)!==0&&Eu(),oi(i),x=i.pendingLanes,(o&261930)!==0&&(x&42)!==0?i===Ch?Ml++:(Ml=0,Ch=i):Ml=0,Dl(0)}}function jy(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,hl(a)))}function Eu(){return Vy(),Ly(),Uy(),Oy()}function Oy(){if(rn!==5)return!1;var i=fa,a=Nh;Nh=0;var o=Cn(Mi),d=J.T,x=ce.p;try{ce.p=32>o?32:o,J.T=null,o=wh,wh=null;var b=fa,S=Mi;if(rn=0,oo=fa=null,Mi=0,(ht&6)!==0)throw Error(s(331));var k=ht;if(ht|=4,by(b.current),yy(b,b.current,S,o),ht=k,Dl(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Zn,b)}catch{}return!0}finally{ce.p=x,J.T=d,jy(i,a)}}function Gy(i,a,o){a=ps(o,a),a=rh(i.stateNode,a,2),i=aa(i,a,2),i!==null&&(cn(i,2),oi(i))}function xt(i,a,o){if(i.tag===3)Gy(i,i,o);else for(;a!==null;){if(a.tag===3){Gy(a,i,o);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(da===null||!da.has(d))){i=ps(o,i),o=Bg(2),d=aa(a,o,2),d!==null&&(zg(o,d,a,i),cn(d,2),oi(d));break}}a=a.return}}function Rh(i,a,o){var d=i.pingCache;if(d===null){d=i.pingCache=new B1;var x=new Set;d.set(a,x)}else x=d.get(a),x===void 0&&(x=new Set,d.set(a,x));x.has(o)||(Eh=!0,x.add(o),i=K1.bind(null,i,a,o),a.then(i,i))}function K1(i,a,o){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,wt===i&&(et&o)===o&&(Bt===4||Bt===3&&(et&62914560)===et&&300>mn()-yu?(ht&2)===0&&lo(i,0):Sh|=o,ro===et&&(ro=0)),oi(i)}function By(i,a){a===0&&(a=_t()),i=Qa(i,a),i!==null&&(cn(i,a),oi(i))}function $1(i){var a=i.memoizedState,o=0;a!==null&&(o=a.retryLane),By(i,o)}function Y1(i,a){var o=0;switch(i.tag){case 31:case 13:var d=i.stateNode,x=i.memoizedState;x!==null&&(o=x.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(a),By(i,o)}function J1(i,a){return Ot(i,a)}var Su=null,uo=null,Mh=!1,Au=!1,Dh=!1,ma=0;function oi(i){i!==uo&&i.next===null&&(uo===null?Su=uo=i:uo=uo.next=i),Au=!0,Mh||(Mh=!0,X1())}function Dl(i,a){if(!Dh&&Au){Dh=!0;do for(var o=!1,d=Su;d!==null;){if(i!==0){var x=d.pendingLanes;if(x===0)var b=0;else{var S=d.suspendedLanes,k=d.pingedLanes;b=(1<<31-Vt(42|i)+1)-1,b&=x&~(S&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(o=!0,qy(d,b))}else b=et,b=Ue(d,d===wt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Be(d,b)||(o=!0,qy(d,b));d=d.next}while(o);Dh=!1}}function Q1(){zy()}function zy(){Au=Mh=!1;var i=0;ma!==0&&oA()&&(i=ma);for(var a=mn(),o=null,d=Su;d!==null;){var x=d.next,b=Hy(d,a);b===0?(d.next=null,o===null?Su=x:o.next=x,x===null&&(uo=o)):(o=d,(i!==0||(b&3)!==0)&&(Au=!0)),d=x}rn!==0&&rn!==5||Dl(i),ma!==0&&(ma=0)}function Hy(i,a){for(var o=i.suspendedLanes,d=i.pingedLanes,x=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-Vt(b),k=1<<S,H=x[S];H===-1?((k&o)===0||(k&d)!==0)&&(x[S]=bt(k,a)):H<=a&&(i.expiredLanes|=k),b&=~k}if(a=wt,o=et,o=Ue(i,i===a?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,o===0||i===a&&(yt===2||yt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Fs(d),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Be(i,o)){if(a=o&-o,a===i.callbackPriority)return a;switch(d!==null&&Fs(d),Cn(o)){case 2:case 8:o=Hi;break;case 32:o=Vn;break;case 268435456:o=Nr;break;default:o=Vn}return d=Fy.bind(null,i),o=Ot(o,d),i.callbackPriority=a,i.callbackNode=o,a}return d!==null&&d!==null&&Fs(d),i.callbackPriority=2,i.callbackNode=null,2}function Fy(i,a){if(rn!==0&&rn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Eu()&&i.callbackNode!==o)return null;var d=et;return d=Ue(i,i===wt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Ay(i,d,a),Hy(i,mn()),i.callbackNode!=null&&i.callbackNode===o?Fy.bind(null,i):null)}function qy(i,a){if(Eu())return null;Ay(i,a,!0)}function X1(){cA(function(){(ht&6)!==0?Ot(Ua,Q1):zy()})}function Ph(){if(ma===0){var i=Jr;i===0&&(i=Oe,Oe<<=1,(Oe&261888)===0&&(Oe=256)),ma=i}return ma}function Ky(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Pr(""+i)}function $y(i,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,i.id&&o.setAttribute("form",i.id),a.parentNode.insertBefore(o,a),i=new FormData(i),o.parentNode.removeChild(o),i}function W1(i,a,o,d,x){if(a==="submit"&&o&&o.stateNode===x){var b=Ky((x[$t]||null).action),S=d.submitter;S&&(a=(a=S[$t]||null)?Ky(a.formAction):S.getAttribute("formAction"),a!==null&&(b=a,S=null));var k=new ei("action","action",null,d,x);i.push({event:k,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ma!==0){var H=S?$y(x,S):new FormData(x);eh(o,{pending:!0,data:H,method:x.method,action:b},null,H)}}else typeof b=="function"&&(k.preventDefault(),H=S?$y(x,S):new FormData(x),eh(o,{pending:!0,data:H,method:x.method,action:b},b,H))},currentTarget:x}]})}}for(var Vh=0;Vh<yf.length;Vh++){var Lh=yf[Vh],Z1=Lh.toLowerCase(),eA=Lh[0].toUpperCase()+Lh.slice(1);Ps(Z1,"on"+eA)}Ps(S0,"onAnimationEnd"),Ps(A0,"onAnimationIteration"),Ps(N0,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(g1,"onTransitionRun"),Ps(y1,"onTransitionStart"),Ps(x1,"onTransitionCancel"),Ps(w0,"onTransitionEnd"),Qs("onMouseEnter",["mouseout","mouseover"]),Qs("onMouseLeave",["mouseout","mouseover"]),Qs("onPointerEnter",["pointerout","pointerover"]),Qs("onPointerLeave",["pointerout","pointerover"]),Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Js("onBeforeInput",["compositionend","keypress","textInput","paste"]),Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function Yy(i,a){a=(a&4)!==0;for(var o=0;o<i.length;o++){var d=i[o],x=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var S=d.length-1;0<=S;S--){var k=d[S],H=k.instance,W=k.currentTarget;if(k=k.listener,H!==b&&x.isPropagationStopped())break e;b=k,x.currentTarget=W;try{b(x)}catch(re){Gc(re)}x.currentTarget=null,b=H}else for(S=0;S<d.length;S++){if(k=d[S],H=k.instance,W=k.currentTarget,k=k.listener,H!==b&&x.isPropagationStopped())break e;b=k,x.currentTarget=W;try{b(x)}catch(re){Gc(re)}x.currentTarget=null,b=H}}}}function Ze(i,a){var o=a[kr];o===void 0&&(o=a[kr]=new Set);var d=i+"__bubble";o.has(d)||(Jy(a,i,2,!1),o.add(d))}function Uh(i,a,o){var d=0;a&&(d|=4),Jy(o,i,d,a)}var Nu="_reactListening"+Math.random().toString(36).slice(2);function jh(i){if(!i[Nu]){i[Nu]=!0,Ko.forEach(function(o){o!=="selectionchange"&&(tA.has(o)||Uh(o,!1,i),Uh(o,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Nu]||(a[Nu]=!0,Uh("selectionchange",!1,a))}}function Jy(i,a,o,d){switch(Sx(a)){case 2:var x=kA;break;case 8:x=IA;break;default:x=Zh}o=x.bind(null,a,o,i),x=void 0,!za||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),d?x!==void 0?i.addEventListener(a,o,{capture:!0,passive:x}):i.addEventListener(a,o,!0):x!==void 0?i.addEventListener(a,o,{passive:x}):i.addEventListener(a,o,!1)}function Oh(i,a,o,d,x){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var k=d.stateNode.containerInfo;if(k===x)break;if(S===4)for(S=d.return;S!==null;){var H=S.tag;if((H===3||H===4)&&S.stateNode.containerInfo===x)return;S=S.return}for(;k!==null;){if(S=$s(k),S===null)return;if(H=S.tag,H===5||H===6||H===26||H===27){d=b=S;continue e}k=k.parentNode}}d=d.return}Ji(function(){var W=b,re=ds(o),fe=[];e:{var ee=C0.get(i);if(ee!==void 0){var ie=ei,Ie=i;switch(i){case"keypress":if(Fa(o)===0)break e;case"keydown":case"keyup":ie=Uc;break;case"focusin":Ie="focus",ie=Ka;break;case"focusout":Ie="blur",ie=Ka;break;case"beforeblur":case"afterblur":ie=Ka;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=E;break;case S0:case A0:case N0:ie=Ic;break;case w0:ie=P;break;case"scroll":case"scrollend":ie=il;break;case"wheel":ie=ne;break;case"copy":case"cut":case"paste":ie=Rc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=xi;break;case"toggle":case"beforetoggle":ie=$e}var Le=(a&4)!==0,At=!Le&&(i==="scroll"||i==="scrollend"),Y=Le?ee!==null?ee+"Capture":null:ee;Le=[];for(var q=W,X;q!==null;){var de=q;if(X=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||X===null||Y===null||(de=Is(q,Y),de!=null&&Le.push(Vl(q,de,X))),At)break;q=q.return}0<Le.length&&(ee=new ie(ee,Ie,null,o,re),fe.push({event:ee,listeners:Le}))}}if((a&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ie=i==="mouseout"||i==="pointerout",ee&&o!==tl&&(Ie=o.relatedTarget||o.fromElement)&&($s(Ie)||Ie[qs]))break e;if((ie||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,ie?(Ie=o.relatedTarget||o.toElement,ie=W,Ie=Ie?$s(Ie):null,Ie!==null&&(At=l(Ie),Le=Ie.tag,Ie!==At||Le!==5&&Le!==27&&Le!==6)&&(Ie=null)):(ie=null,Ie=W),ie!==Ie)){if(Le=al,de="onMouseLeave",Y="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Le=xi,de="onPointerLeave",Y="onPointerEnter",q="pointer"),At=ie==null?ee:ts(ie),X=Ie==null?ee:ts(Ie),ee=new Le(de,q+"leave",ie,o,re),ee.target=At,ee.relatedTarget=X,de=null,$s(re)===W&&(Le=new Le(Y,q+"enter",Ie,o,re),Le.target=X,Le.relatedTarget=At,de=Le),At=de,ie&&Ie)t:{for(Le=nA,Y=ie,q=Ie,X=0,de=Y;de;de=Le(de))X++;de=0;for(var Pe=q;Pe;Pe=Le(Pe))de++;for(;0<X-de;)Y=Le(Y),X--;for(;0<de-X;)q=Le(q),de--;for(;X--;){if(Y===q||q!==null&&Y===q.alternate){Le=Y;break t}Y=Le(Y),q=Le(q)}Le=null}else Le=null;ie!==null&&Qy(fe,ee,ie,Le,!1),Ie!==null&&At!==null&&Qy(fe,At,Ie,Le,!0)}}e:{if(ee=W?ts(W):window,ie=ee.nodeName&&ee.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ee.type==="file")var ct=h0;else if(d0(ee))if(m0)ct=h1;else{ct=d1;var Re=u1}else ie=ee.nodeName,!ie||ie.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?W&&Dr(W.elementType)&&(ct=h0):ct=f1;if(ct&&(ct=ct(i,W))){f0(fe,ct,o,re);break e}Re&&Re(i,ee,W),i==="focusout"&&W&&ee.type==="number"&&W.memoizedProps.value!=null&&Wo(ee,"number",ee.value)}switch(Re=W?ts(W):window,i){case"focusin":(d0(Re)||Re.contentEditable==="true")&&(Br=Re,mf=W,ul=null);break;case"focusout":ul=mf=Br=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,T0(fe,o,re);break;case"selectionchange":if(p1)break;case"keydown":case"keyup":T0(fe,o,re)}var Je;if(ft)e:{switch(i){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Gr?$a(i,o)&&(tt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(tt="onCompositionStart");tt&&(si&&o.locale!=="ko"&&(Gr||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Gr&&(Je=sl()):(Zs=re,nl="value"in Zs?Zs.value:Zs.textContent,Gr=!0)),Re=wu(W,tt),0<Re.length&&(tt=new ni(tt,i,null,o,re),fe.push({event:tt,listeners:Re}),Je?tt.data=Je:(Je=Or(o),Je!==null&&(tt.data=Je)))),(Je=hs?r1(i,o):o1(i,o))&&(tt=wu(W,"onBeforeInput"),0<tt.length&&(Re=new ni("onBeforeInput","beforeinput",null,o,re),fe.push({event:Re,listeners:tt}),Re.data=Je)),W1(fe,i,W,o,re)}Yy(fe,a)})}function Vl(i,a,o){return{instance:i,listener:a,currentTarget:o}}function wu(i,a){for(var o=a+"Capture",d=[];i!==null;){var x=i,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=Is(i,o),x!=null&&d.unshift(Vl(i,x,b)),x=Is(i,a),x!=null&&d.push(Vl(i,x,b))),i.tag===3)return d;i=i.return}return[]}function nA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Qy(i,a,o,d,x){for(var b=a._reactName,S=[];o!==null&&o!==d;){var k=o,H=k.alternate,W=k.stateNode;if(k=k.tag,H!==null&&H===d)break;k!==5&&k!==26&&k!==27||W===null||(H=W,x?(W=Is(o,b),W!=null&&S.unshift(Vl(o,W,H))):x||(W=Is(o,b),W!=null&&S.push(Vl(o,W,H)))),o=o.return}S.length!==0&&i.push({event:a,listeners:S})}var sA=/\r\n?/g,iA=/\u0000|\uFFFD/g;function Xy(i){return(typeof i=="string"?i:""+i).replace(sA,`
`).replace(iA,"")}function Wy(i,a){return a=Xy(a),Xy(i)===a}function St(i,a,o,d,x,b){switch(o){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Kn(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Kn(i,""+d);break;case"className":ns(i,"class",d);break;case"tabIndex":ns(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(i,o,d);break;case"style":el(i,d,b);break;case"data":if(a!=="object"){ns(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||o!=="href")){i.removeAttribute(o);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(o);break}d=Pr(""+d),i.setAttribute(o,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(o==="formAction"?(a!=="input"&&St(i,a,"name",x.name,x,null),St(i,a,"formEncType",x.formEncType,x,null),St(i,a,"formMethod",x.formMethod,x,null),St(i,a,"formTarget",x.formTarget,x,null)):(St(i,a,"encType",x.encType,x,null),St(i,a,"method",x.method,x,null),St(i,a,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(o);break}d=Pr(""+d),i.setAttribute(o,d);break;case"onClick":d!=null&&(i.onclick=ks);break;case"onScroll":d!=null&&Ze("scroll",i);break;case"onScrollEnd":d!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(o=d.__html,o!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}o=Pr(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(o,""+d):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":d===!0?i.setAttribute(o,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(o,d):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(o,d):i.removeAttribute(o);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(o):i.setAttribute(o,d);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),Rr(i,"popover",d);break;case"xlinkActuate":Jt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Jt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Jt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Jt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Jt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Jt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Rr(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=wc.get(o)||o,Rr(i,o,d))}}function Gh(i,a,o,d,x,b){switch(o){case"style":el(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(o=d.__html,o!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof d=="string"?Kn(i,d):(typeof d=="number"||typeof d=="bigint")&&Kn(i,""+d);break;case"onScroll":d!=null&&Ze("scroll",i);break;case"onScrollEnd":d!=null&&Ze("scrollend",i);break;case"onClick":d!=null&&(i.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(x=o.endsWith("Capture"),a=o.slice(2,x?o.length-7:void 0),b=i[$t]||null,b=b!=null?b[o]:null,typeof b=="function"&&i.removeEventListener(a,b,x),typeof d=="function")){typeof b!="function"&&b!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(a,d,x);break e}o in i?i[o]=d:d===!0?i.setAttribute(o,""):Rr(i,o,d)}}}function Tn(i,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var d=!1,x=!1,b;for(b in o)if(o.hasOwnProperty(b)){var S=o[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(i,a,b,S,o,null)}}x&&St(i,a,"srcSet",o.srcSet,o,null),d&&St(i,a,"src",o.src,o,null);return;case"input":Ze("invalid",i);var k=b=S=x=null,H=null,W=null;for(d in o)if(o.hasOwnProperty(d)){var re=o[d];if(re!=null)switch(d){case"name":x=re;break;case"type":S=re;break;case"checked":H=re;break;case"defaultChecked":W=re;break;case"value":b=re;break;case"defaultValue":k=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,a));break;default:St(i,a,d,re,o,null)}}Sc(i,b,k,H,W,S,x,!1);return;case"select":Ze("invalid",i),d=S=b=null;for(x in o)if(o.hasOwnProperty(x)&&(k=o[x],k!=null))switch(x){case"value":b=k;break;case"defaultValue":S=k;break;case"multiple":d=k;default:St(i,a,x,k,o,null)}a=b,o=S,i.multiple=!!d,a!=null?qi(i,!!d,a,!1):o!=null&&qi(i,!!d,o,!0);return;case"textarea":Ze("invalid",i),b=x=d=null;for(S in o)if(o.hasOwnProperty(S)&&(k=o[S],k!=null))switch(S){case"value":d=k;break;case"defaultValue":x=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:St(i,a,S,k,o,null)}Ki(i,d,x,b);return;case"option":for(H in o)if(o.hasOwnProperty(H)&&(d=o[H],d!=null))switch(H){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:St(i,a,H,d,o,null)}return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(d=0;d<Pl.length;d++)Ze(Pl[d],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(d=o[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:St(i,a,W,d,o,null)}return;default:if(Dr(a)){for(re in o)o.hasOwnProperty(re)&&(d=o[re],d!==void 0&&Gh(i,a,re,d,o,void 0));return}}for(k in o)o.hasOwnProperty(k)&&(d=o[k],d!=null&&St(i,a,k,d,o,null))}function aA(i,a,o,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,S=null,k=null,H=null,W=null,re=null;for(ie in o){var fe=o[ie];if(o.hasOwnProperty(ie)&&fe!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=fe;default:d.hasOwnProperty(ie)||St(i,a,ie,null,d,fe)}}for(var ee in d){var ie=d[ee];if(fe=o[ee],d.hasOwnProperty(ee)&&(ie!=null||fe!=null))switch(ee){case"type":b=ie;break;case"name":x=ie;break;case"checked":W=ie;break;case"defaultChecked":re=ie;break;case"value":S=ie;break;case"defaultValue":k=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,a));break;default:ie!==fe&&St(i,a,ee,ie,d,fe)}}Mr(i,S,k,H,W,re,b,x);return;case"select":ie=S=k=ee=null;for(b in o)if(H=o[b],o.hasOwnProperty(b)&&H!=null)switch(b){case"value":break;case"multiple":ie=H;default:d.hasOwnProperty(b)||St(i,a,b,null,d,H)}for(x in d)if(b=d[x],H=o[x],d.hasOwnProperty(x)&&(b!=null||H!=null))switch(x){case"value":ee=b;break;case"defaultValue":k=b;break;case"multiple":S=b;default:b!==H&&St(i,a,x,b,d,H)}a=k,o=S,d=ie,ee!=null?qi(i,!!o,ee,!1):!!d!=!!o&&(a!=null?qi(i,!!o,a,!0):qi(i,!!o,o?[]:"",!1));return;case"textarea":ie=ee=null;for(k in o)if(x=o[k],o.hasOwnProperty(k)&&x!=null&&!d.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:St(i,a,k,null,d,x)}for(S in d)if(x=d[S],b=o[S],d.hasOwnProperty(S)&&(x!=null||b!=null))switch(S){case"value":ee=x;break;case"defaultValue":ie=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==b&&St(i,a,S,x,d,b)}Ac(i,ee,ie);return;case"option":for(var Ie in o)if(ee=o[Ie],o.hasOwnProperty(Ie)&&ee!=null&&!d.hasOwnProperty(Ie))switch(Ie){case"selected":i.selected=!1;break;default:St(i,a,Ie,null,d,ee)}for(H in d)if(ee=d[H],ie=o[H],d.hasOwnProperty(H)&&ee!==ie&&(ee!=null||ie!=null))switch(H){case"selected":i.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:St(i,a,H,ee,d,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in o)ee=o[Le],o.hasOwnProperty(Le)&&ee!=null&&!d.hasOwnProperty(Le)&&St(i,a,Le,null,d,ee);for(W in d)if(ee=d[W],ie=o[W],d.hasOwnProperty(W)&&ee!==ie&&(ee!=null||ie!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,a));break;default:St(i,a,W,ee,d,ie)}return;default:if(Dr(a)){for(var At in o)ee=o[At],o.hasOwnProperty(At)&&ee!==void 0&&!d.hasOwnProperty(At)&&Gh(i,a,At,void 0,d,ee);for(re in d)ee=d[re],ie=o[re],!d.hasOwnProperty(re)||ee===ie||ee===void 0&&ie===void 0||Gh(i,a,re,ee,d,ie);return}}for(var Y in o)ee=o[Y],o.hasOwnProperty(Y)&&ee!=null&&!d.hasOwnProperty(Y)&&St(i,a,Y,null,d,ee);for(fe in d)ee=d[fe],ie=o[fe],!d.hasOwnProperty(fe)||ee===ie||ee==null&&ie==null||St(i,a,fe,ee,d,ie)}function Zy(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,o=performance.getEntriesByType("resource"),d=0;d<o.length;d++){var x=o[d],b=x.transferSize,S=x.initiatorType,k=x.duration;if(b&&k&&Zy(S)){for(S=0,k=x.responseEnd,d+=1;d<o.length;d++){var H=o[d],W=H.startTime;if(W>k)break;var re=H.transferSize,fe=H.initiatorType;re&&Zy(fe)&&(H=H.responseEnd,S+=re*(H<k?1:(k-W)/(H-W)))}if(--d,a+=8*(b+S)/(x.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Bh=null,zh=null;function Cu(i){return i.nodeType===9?i:i.ownerDocument}function ex(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tx(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Hh(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fh=null;function oA(){var i=window.event;return i&&i.type==="popstate"?i===Fh?!1:(Fh=i,!0):(Fh=null,!1)}var nx=typeof setTimeout=="function"?setTimeout:void 0,lA=typeof clearTimeout=="function"?clearTimeout:void 0,sx=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof sx<"u"?function(i){return sx.resolve(null).then(i).catch(uA)}:nx;function uA(i){setTimeout(function(){throw i})}function pa(i){return i==="head"}function ix(i,a){var o=a,d=0;do{var x=o.nextSibling;if(i.removeChild(o),x&&x.nodeType===8)if(o=x.data,o==="/$"||o==="/&"){if(d===0){i.removeChild(x),po(a);return}d--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")d++;else if(o==="html")Ll(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Ll(o);for(var b=o.firstChild;b;){var S=b.nextSibling,k=b.nodeName;b[Ks]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||o.removeChild(b),b=S}}else o==="body"&&Ll(i.ownerDocument.body);o=x}while(o);po(a)}function ax(i,a){var o=i;i=0;do{var d=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=d}while(o)}function qh(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":qh(o),Ir(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function dA(i,a,o,d){for(;i.nodeType===1;){var x=o;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ks])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=bs(i.nextSibling),i===null)break}return null}function fA(i,a,o){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=bs(i.nextSibling),i===null))return null;return i}function rx(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=bs(i.nextSibling),i===null))return null;return i}function Kh(i){return i.data==="$?"||i.data==="$~"}function $h(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function hA(i,a){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||o.readyState!=="loading")a();else{var d=function(){a(),o.removeEventListener("DOMContentLoaded",d)};o.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function bs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Yh=null;function ox(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(a===0)return bs(i.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}i=i.nextSibling}return null}function lx(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return i;a--}else o!=="/$"&&o!=="/&"||a++}i=i.previousSibling}return null}function cx(i,a,o){switch(a=Cu(o),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ll(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Ir(i)}var _s=new Map,ux=new Set;function ku(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Di=ce.d;ce.d={f:mA,r:pA,D:gA,C:yA,L:xA,m:vA,X:_A,S:bA,M:TA};function mA(){var i=Di.f(),a=bu();return i||a}function pA(i){var a=us(i);a!==null&&a.tag===5&&a.type==="form"?wg(a):Di.r(i)}var fo=typeof document>"u"?null:document;function dx(i,a,o){var d=fo;if(d&&typeof a=="string"&&a){var x=qn(a);x='link[rel="'+i+'"][href="'+x+'"]',typeof o=="string"&&(x+='[crossorigin="'+o+'"]'),ux.has(x)||(ux.add(x),i={rel:i,crossOrigin:o,href:a},d.querySelector(x)===null&&(a=d.createElement("link"),Tn(a,"link",i),Yt(a),d.head.appendChild(a)))}}function gA(i){Di.D(i),dx("dns-prefetch",i,null)}function yA(i,a){Di.C(i,a),dx("preconnect",i,a)}function xA(i,a,o){Di.L(i,a,o);var d=fo;if(d&&i&&a){var x='link[rel="preload"][as="'+qn(a)+'"]';a==="image"&&o&&o.imageSrcSet?(x+='[imagesrcset="'+qn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(x+='[imagesizes="'+qn(o.imageSizes)+'"]')):x+='[href="'+qn(i)+'"]';var b=x;switch(a){case"style":b=ho(i);break;case"script":b=mo(i)}_s.has(b)||(i=_({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:i,as:a},o),_s.set(b,i),d.querySelector(x)!==null||a==="style"&&d.querySelector(Ul(b))||a==="script"&&d.querySelector(jl(b))||(a=d.createElement("link"),Tn(a,"link",i),Yt(a),d.head.appendChild(a)))}}function vA(i,a){Di.m(i,a);var o=fo;if(o&&i){var d=a&&typeof a.as=="string"?a.as:"script",x='link[rel="modulepreload"][as="'+qn(d)+'"][href="'+qn(i)+'"]',b=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=mo(i)}if(!_s.has(b)&&(i=_({rel:"modulepreload",href:i},a),_s.set(b,i),o.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(jl(b)))return}d=o.createElement("link"),Tn(d,"link",i),Yt(d),o.head.appendChild(d)}}}function bA(i,a,o){Di.S(i,a,o);var d=fo;if(d&&i){var x=Ys(d).hoistableStyles,b=ho(i);a=a||"default";var S=x.get(b);if(!S){var k={loading:0,preload:null};if(S=d.querySelector(Ul(b)))k.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":a},o),(o=_s.get(b))&&Jh(i,o);var H=S=d.createElement("link");Yt(H),Tn(H,"link",i),H._p=new Promise(function(W,re){H.onload=W,H.onerror=re}),H.addEventListener("load",function(){k.loading|=1}),H.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Iu(S,a,d)}S={type:"stylesheet",instance:S,count:1,state:k},x.set(b,S)}}}function _A(i,a){Di.X(i,a);var o=fo;if(o&&i){var d=Ys(o).hoistableScripts,x=mo(i),b=d.get(x);b||(b=o.querySelector(jl(x)),b||(i=_({src:i,async:!0},a),(a=_s.get(x))&&Qh(i,a),b=o.createElement("script"),Yt(b),Tn(b,"link",i),o.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function TA(i,a){Di.M(i,a);var o=fo;if(o&&i){var d=Ys(o).hoistableScripts,x=mo(i),b=d.get(x);b||(b=o.querySelector(jl(x)),b||(i=_({src:i,async:!0,type:"module"},a),(a=_s.get(x))&&Qh(i,a),b=o.createElement("script"),Yt(b),Tn(b,"link",i),o.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function fx(i,a,o,d){var x=(x=ue.current)?ku(x):null;if(!x)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=ho(o.href),o=Ys(x).hoistableStyles,d=o.get(a),d||(d={type:"style",instance:null,count:0,state:null},o.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=ho(o.href);var b=Ys(x).hoistableStyles,S=b.get(i);if(S||(x=x.ownerDocument||x,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=x.querySelector(Ul(i)))&&!b._p&&(S.instance=b,S.state.loading=5),_s.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},_s.set(i,o),b||EA(x,i,o,S.state))),a&&d===null)throw Error(s(528,""));return S}if(a&&d!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=mo(o),o=Ys(x).hoistableScripts,d=o.get(a),d||(d={type:"script",instance:null,count:0,state:null},o.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function ho(i){return'href="'+qn(i)+'"'}function Ul(i){return'link[rel="stylesheet"]['+i+"]"}function hx(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function EA(i,a,o,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Tn(a,"link",o),Yt(a),i.head.appendChild(a))}function mo(i){return'[src="'+qn(i)+'"]'}function jl(i){return"script[async]"+i}function mx(i,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+qn(o.href)+'"]');if(d)return a.instance=d,Yt(d),d;var x=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Yt(d),Tn(d,"style",x),Iu(d,o.precedence,i),a.instance=d;case"stylesheet":x=ho(o.href);var b=i.querySelector(Ul(x));if(b)return a.state.loading|=4,a.instance=b,Yt(b),b;d=hx(o),(x=_s.get(x))&&Jh(d,x),b=(i.ownerDocument||i).createElement("link"),Yt(b);var S=b;return S._p=new Promise(function(k,H){S.onload=k,S.onerror=H}),Tn(b,"link",d),a.state.loading|=4,Iu(b,o.precedence,i),a.instance=b;case"script":return b=mo(o.src),(x=i.querySelector(jl(b)))?(a.instance=x,Yt(x),x):(d=o,(x=_s.get(b))&&(d=_({},o),Qh(d,x)),i=i.ownerDocument||i,x=i.createElement("script"),Yt(x),Tn(x,"link",d),i.head.appendChild(x),a.instance=x);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Iu(d,o.precedence,i));return a.instance}function Iu(i,a,o){for(var d=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,b=x,S=0;S<d.length;S++){var k=d[S];if(k.dataset.precedence===a)b=k;else if(b!==x)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(i,a.firstChild))}function Jh(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Qh(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Ru=null;function px(i,a,o){if(Ru===null){var d=new Map,x=Ru=new Map;x.set(o,d)}else x=Ru,d=x.get(o),d||(d=new Map,x.set(o,d));if(d.has(i))return d;for(d.set(i,null),o=o.getElementsByTagName(i),x=0;x<o.length;x++){var b=o[x];if(!(b[Ks]||b[Lt]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(a)||"";S=i+S;var k=d.get(S);k?k.push(b):d.set(S,[b])}}return d}function gx(i,a,o){i=i.ownerDocument||i,i.head.insertBefore(o,a==="title"?i.querySelector("head > title"):null)}function SA(i,a,o){if(o===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function yx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function AA(i,a,o,d){if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var x=ho(d.href),b=a.querySelector(Ul(x));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Mu.bind(i),a.then(i,i)),o.state.loading|=4,o.instance=b,Yt(b);return}b=a.ownerDocument||a,d=hx(d),(x=_s.get(x))&&Jh(d,x),b=b.createElement("link"),Yt(b);var S=b;S._p=new Promise(function(k,H){S.onload=k,S.onerror=H}),Tn(b,"link",d),o.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Mu.bind(i),a.addEventListener("load",o),a.addEventListener("error",o))}}var Xh=0;function NA(i,a){return i.stylesheets&&i.count===0&&Pu(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var d=setTimeout(function(){if(i.stylesheets&&Pu(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&Xh===0&&(Xh=62500*rA());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Pu(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Xh?50:800)+a);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function Mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Du=null;function Pu(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Du=new Map,a.forEach(wA,i),Du=null,Mu.call(i))}function wA(i,a){if(!(a.state.loading&4)){var o=Du.get(i);if(o)var d=o.get(null);else{o=new Map,Du.set(i,o);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var S=x[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),d=S)}d&&o.set(null,d)}x=a.instance,S=x.getAttribute("data-precedence"),b=o.get(S)||d,b===d&&o.set(null,x),o.set(S,x),this.count++,d=Mu.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),b?b.parentNode.insertBefore(x,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),a.state.loading|=4}}var Ol={$$typeof:G,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function CA(i,a,o,d,x,b,S,k,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function xx(i,a,o,d,x,b,S,k,H,W,re,fe){return i=new CA(i,a,o,S,H,W,re,fe,k),a=1,b===!0&&(a|=24),b=is(3,null,null,a),i.current=b,b.stateNode=i,a=If(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:o,cache:a},Pf(b),i}function vx(i){return i?(i=Fr,i):Fr}function bx(i,a,o,d,x,b){x=vx(x),d.context===null?d.context=x:d.pendingContext=x,d=ia(a),d.payload={element:o},b=b===void 0?null:b,b!==null&&(d.callback=b),o=aa(i,d,a),o!==null&&(Xn(o,i,a),yl(o,i,a))}function _x(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<a?o:a}}function Wh(i,a){_x(i,a),(i=i.alternate)&&_x(i,a)}function Tx(i){if(i.tag===13||i.tag===31){var a=Qa(i,67108864);a!==null&&Xn(a,i,67108864),Wh(i,67108864)}}function Ex(i){if(i.tag===13||i.tag===31){var a=cs();a=wn(a);var o=Qa(i,a);o!==null&&Xn(o,i,a),Wh(i,a)}}var Vu=!0;function kA(i,a,o,d){var x=J.T;J.T=null;var b=ce.p;try{ce.p=2,Zh(i,a,o,d)}finally{ce.p=b,J.T=x}}function IA(i,a,o,d){var x=J.T;J.T=null;var b=ce.p;try{ce.p=8,Zh(i,a,o,d)}finally{ce.p=b,J.T=x}}function Zh(i,a,o,d){if(Vu){var x=em(d);if(x===null)Oh(i,a,d,Lu,o),Ax(i,d);else if(MA(x,i,a,o,d))d.stopPropagation();else if(Ax(i,d),a&4&&-1<RA.indexOf(i)){for(;x!==null;){var b=us(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=at(b.pendingLanes);if(S!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;S;){var H=1<<31-Vt(S);k.entanglements[1]|=H,S&=~H}oi(b),(ht&6)===0&&(xu=mn()+500,Dl(0))}}break;case 31:case 13:k=Qa(b,2),k!==null&&Xn(k,b,2),bu(),Wh(b,2)}if(b=em(d),b===null&&Oh(i,a,d,Lu,o),b===x)break;x=b}x!==null&&d.stopPropagation()}else Oh(i,a,d,null,o)}}function em(i){return i=ds(i),tm(i)}var Lu=null;function tm(i){if(Lu=null,i=$s(i),i!==null){var a=l(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=c(a),i!==null)return i;i=null}else if(o===31){if(i=h(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lu=i,null}function Sx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pi()){case Ua:return 2;case Hi:return 8;case Vn:case qo:return 32;case Nr:return 268435456;default:return 32}default:return 32}}var nm=!1,ga=null,ya=null,xa=null,Gl=new Map,Bl=new Map,va=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ax(i,a){switch(i){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Gl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(a.pointerId)}}function zl(i,a,o,d,x,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:o,eventSystemFlags:d,nativeEvent:b,targetContainers:[x]},a!==null&&(a=us(a),a!==null&&Tx(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),i)}function MA(i,a,o,d,x){switch(a){case"focusin":return ga=zl(ga,i,a,o,d,x),!0;case"dragenter":return ya=zl(ya,i,a,o,d,x),!0;case"mouseover":return xa=zl(xa,i,a,o,d,x),!0;case"pointerover":var b=x.pointerId;return Gl.set(b,zl(Gl.get(b)||null,i,a,o,d,x)),!0;case"gotpointercapture":return b=x.pointerId,Bl.set(b,zl(Bl.get(b)||null,i,a,o,d,x)),!0}return!1}function Nx(i){var a=$s(i.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=c(o),a!==null){i.blockedOn=a,gn(i.priority,function(){Ex(o)});return}}else if(a===31){if(a=h(o),a!==null){i.blockedOn=a,gn(i.priority,function(){Ex(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Uu(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var o=em(i.nativeEvent);if(o===null){o=i.nativeEvent;var d=new o.constructor(o.type,o);tl=d,o.target.dispatchEvent(d),tl=null}else return a=us(o),a!==null&&Tx(a),i.blockedOn=o,!1;a.shift()}return!0}function wx(i,a,o){Uu(i)&&o.delete(a)}function DA(){nm=!1,ga!==null&&Uu(ga)&&(ga=null),ya!==null&&Uu(ya)&&(ya=null),xa!==null&&Uu(xa)&&(xa=null),Gl.forEach(wx),Bl.forEach(wx)}function ju(i,a){i.blockedOn===a&&(i.blockedOn=null,nm||(nm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,DA)))}var Ou=null;function Cx(i){Ou!==i&&(Ou=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ou===i&&(Ou=null);for(var a=0;a<i.length;a+=3){var o=i[a],d=i[a+1],x=i[a+2];if(typeof d!="function"){if(tm(d||o)===null)continue;break}var b=us(o);b!==null&&(i.splice(a,3),a-=3,eh(b,{pending:!0,data:x,method:o.method,action:d},d,x))}}))}function po(i){function a(H){return ju(H,i)}ga!==null&&ju(ga,i),ya!==null&&ju(ya,i),xa!==null&&ju(xa,i),Gl.forEach(a),Bl.forEach(a);for(var o=0;o<va.length;o++){var d=va[o];d.blockedOn===i&&(d.blockedOn=null)}for(;0<va.length&&(o=va[0],o.blockedOn===null);)Nx(o),o.blockedOn===null&&va.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(d=0;d<o.length;d+=3){var x=o[d],b=o[d+1],S=x[$t]||null;if(typeof b=="function")S||Cx(o);else if(S){var k=null;if(b&&b.hasAttribute("formAction")){if(x=b,S=b[$t]||null)k=S.formAction;else if(tm(x)!==null)continue}else k=S.action;typeof k=="function"?o[d+1]=k:(o.splice(d,3),d-=3),Cx(o)}}}function kx(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return x=S})},focusReset:"manual",scroll:"manual"})}function a(){x!==null&&(x(),x=null),d||setTimeout(o,20)}function o(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),x!==null&&(x(),x=null)}}}function sm(i){this._internalRoot=i}Gu.prototype.render=sm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,d=cs();bx(o,d,i,a,null,null)},Gu.prototype.unmount=sm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;bx(i.current,2,null,i,null,null),bu(),a[qs]=null}};function Gu(i){this._internalRoot=i}Gu.prototype.unstable_scheduleHydration=function(i){if(i){var a=Cs();i={blockedOn:null,target:i,priority:a};for(var o=0;o<va.length&&a!==0&&a<va[o].priority;o++);va.splice(o,0,i),o===0&&Nx(i)}};var Ix=e.version;if(Ix!=="19.2.3")throw Error(s(527,Ix,"19.2.3"));ce.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var PA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Zn=Bu.inject(PA),an=Bu}catch{}}return Fl.createRoot=function(i,a){if(!r(i))throw Error(s(299));var o=!1,d="",x=Ug,b=jg,S=Og;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=xx(i,1,!1,null,null,o,d,null,x,b,S,kx),i[qs]=a.current,jh(i),new sm(a)},Fl.hydrateRoot=function(i,a,o){if(!r(i))throw Error(s(299));var d=!1,x="",b=Ug,S=jg,k=Og,H=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(x=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.formState!==void 0&&(H=o.formState)),a=xx(i,1,!0,a,o??null,d,x,H,b,S,k,kx),a.context=vx(null),o=a.current,d=cs(),d=wn(d),x=ia(d),x.callback=null,aa(o,x,d),o=d,a.current.lanes=o,cn(a,o),oi(a),i[qs]=a.current,jh(i),new Gu(a)},Fl.version="19.2.3",Fl}var Gx;function qA(){if(Gx)return rm.exports;Gx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rm.exports=FA(),rm.exports}var KA=qA();const $A=sT(KA);var Ge=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(Ge||{});const cd="https://files.catbox.moe/02xqjo.png",Bx={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3"},zx=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],iT=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"TPA & TBI",desc:"Tes Potensi Akademik & B.Inggris (Seleksi Lanjutan)"},{id:"PSIKOTEST",name:"Psikotes Lengkap",desc:"IQ, Koran/Pauli, Gambar, & Kepribadian"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],YA=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],JA=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],QA=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],XA=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],WA=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],ZA=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],Hx=[],Fx=[],qx=[],Kx=[],$x=[],Yx=[],Jx=[],Qx=[],_a=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var eN={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let tN,nN;function sN(){return{geminiUrl:tN,vertexUrl:nN}}function iN(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const c=sN();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bi{}function Ee(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(t))for(let m=0;m<g.length;m++){const v=g[m];p(v,e.slice(l+1),t[m])}else for(const m of g)p(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];p(g[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(h=>f(h,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function aN(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),c=new Set;let h=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Am(n,r,l,0,c)}}function Am(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Am(g,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),g={};for(const m of h)g[m]=c[m];for(const[m,v]of Object.entries(g)){const _=[];for(const T of t.slice(s))T==="*"?_.push(m):_.push(T);p(c,_,v)}for(const m of h)delete c[m]}}else{const c=n;l in c&&Am(c[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rN(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&p(e,["_url","resourceName"],s),e}function oN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(e,["response"],cN(c)),e}function lN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["response"]);return c!=null&&p(e,["response"],uN(c)),e}function cN(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>dN(c))),p(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function uN(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>fN(c))),p(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function dN(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],xN(t)),e}function fN(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],vN(t)),e}function hN(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function mN(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function pN(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["response"]);return c!=null&&p(e,["response"],gN(c)),e}function gN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&p(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function aT(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["response"]);return c!=null&&p(e,["response"],yN(c)),e}function yN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&p(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function xN(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&p(e,["videoBytes"],fp(s));const r=f(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function vN(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],fp(s));const r=f(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xx;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xx||(Xx={}));var Wx;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Wx||(Wx={}));var Zx;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Zx||(Zx={}));var _e;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(_e||(_e={}));var ev;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ev||(ev={}));var tv;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(tv||(tv={}));var nv;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(nv||(nv={}));var sv;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(sv||(sv={}));var iv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(iv||(iv={}));var av;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(av||(av={}));var rv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(rv||(rv={}));var ov;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(ov||(ov={}));var lv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(lv||(lv={}));var cv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(cv||(cv={}));var uv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(uv||(uv={}));var dv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(dv||(dv={}));var fv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(fv||(fv={}));var hv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hv||(hv={}));var mv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(mv||(mv={}));var pv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(pv||(pv={}));var gv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(gv||(gv={}));var ud;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ud||(ud={}));var yv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yv||(yv={}));var xv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(xv||(xv={}));var vv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vv||(vv={}));var Nm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Nm||(Nm={}));var bv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(bv||(bv={}));var _v;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(_v||(_v={}));var Tv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Tv||(Tv={}));var Ev;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ev||(Ev={}));var Sv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Sv||(Sv={}));var Av;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Av||(Av={}));var Nv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Nv||(Nv={}));var wv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wv||(wv={}));var Cv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Cv||(Cv={}));var kv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kv||(kv={}));var Iv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Iv||(Iv={}));var Rv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Rv||(Rv={}));var Mv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Mv||(Mv={}));var Dv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Dv||(Dv={}));var Pv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Pv||(Pv={}));var Vv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Vv||(Vv={}));var Lv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Lv||(Lv={}));var Uv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Uv||(Uv={}));var jv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(jv||(jv={}));var Ov;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ov||(Ov={}));var Gv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Gv||(Gv={}));var Bv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Bv||(Bv={}));var zv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zv||(zv={}));var Hv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Hv||(Hv={}));var Fv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Fv||(Fv={}));var qv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(qv||(qv={}));var Kv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Kv||(Kv={}));var $v;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})($v||($v={}));var _o;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(_o||(_o={}));class wm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ql{get text(){var e,t,s,r,l,c,h,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[N,w]of Object.entries(T))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(w!==null||w!==void 0)&&_.push(N);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,r,l,c,h,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,N]of Object.entries(_))T!=="inlineData"&&(N!==null||N!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,r,l,c,h,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,r,l,c,h,g,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,r,l,c,h,g,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Yv{}class Jv{}class bN{}class _N{}class TN{}class EN{}class Qv{}class Xv{}class Wv{}class SN{}class dd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new dd;let r;const l=e;return t?r=lN(l):r=oN(l),Object.assign(s,r),s}}class Zv{}class eb{}class tb{}class nb{}class AN{}class NN{}class wN{}class hp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new hp,l=pN(e);return Object.assign(s,l),s}}class CN{}class kN{}class IN{}class sb{}class RN{get text(){var e,t,s;let r="",l=!1;const c=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class MN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class mp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new mp,l=aT(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function rT(n,e){const t=dt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function oT(n){return Array.isArray(n)?n.map(e=>fd(e)):[fd(n)]}function fd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function lT(n){const e=fd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cT(n){const e=fd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ib(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function uT(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>ib(e)):[ib(n)]}function Cm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function ab(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function rb(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Dn(n){if(n==null)throw new Error("ContentUnion is required");return Cm(n)?n:{role:"user",parts:uT(n)}}function pp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Dn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=Dn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Dn(t)):[Dn(e)]}function As(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(ab(n)||rb(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Dn(n)]}const e=[],t=[],s=Cm(n[0]);for(const r of n){const l=Cm(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(ab(r)||rb(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:uT(t)}),e}function DN(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(_e).includes(t[0].toUpperCase())?t[0].toUpperCase():_e.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(_e).includes(s.toUpperCase())?s.toUpperCase():_e.TYPE_UNSPECIFIED})}}function Eo(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&DN(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(_e).includes(h.toUpperCase())?h.toUpperCase():_e.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Eo(h);else if(s.includes(c)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push(Eo(m))}e[c]=g}else if(r.includes(c)){const g={};for(const[m,v]of Object.entries(h))g[m]=Eo(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function gp(n){return Eo(n)}function yp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function xp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Lo(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Eo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Eo(e.response));return n}function Uo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function PN(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function zi(n,e){if(typeof e!="string")throw new Error("name must be a string");return PN(n,e,"cachedContents")}function dT(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function La(n){return fp(n)}function VN(n){return n!=null&&typeof n=="object"&&"name"in n}function LN(n){return n!=null&&typeof n=="object"&&"video"in n}function UN(n){return n!=null&&typeof n=="object"&&"uri"in n}function fT(n){var e;let t;if(VN(n)&&(t=n.name),!(UN(n)&&(t=n.uri,t===void 0))&&!(LN(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function hT(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function mT(n){for(const e of["models","tunedModels","publisherModels"])if(jN(n,e))return n[e];return[]}function jN(n,e){return n!==null&&typeof n=="object"&&e in n}function ON(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function GN(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=ON(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function pT(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function BN(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gT(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function jo(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function yT(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zN(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Tw(c))),p(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["inlinedEmbedContentResponses"],l)}return e}function HN(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function FN(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ed(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&p(e,["state"],yT(r));const l=f(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&p(e,["endTime"],c);const h=f(n,["metadata","updateTime"]);h!=null&&p(e,["updateTime"],h);const g=f(n,["metadata","model"]);g!=null&&p(e,["model"],g);const m=f(n,["metadata","output"]);return m!=null&&p(e,["dest"],zN(gT(m))),e}function km(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=f(n,["state"]);r!=null&&p(e,["state"],yT(r));const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["createTime"]);c!=null&&p(e,["createTime"],c);const h=f(n,["startTime"]);h!=null&&p(e,["startTime"],h);const g=f(n,["endTime"]);g!=null&&p(e,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&p(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&p(e,["model"],v);const _=f(n,["inputConfig"]);_!=null&&p(e,["src"],qN(_));const T=f(n,["outputConfig"]);T!=null&&p(e,["dest"],HN(gT(T)));const N=f(n,["completionStats"]);return N!=null&&p(e,["completionStats"],N),e}function qN(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function KN(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&p(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>_w(n,c))),p(t,["requests","requests"],l)}return t}function $N(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function YN(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function JN(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],jo(n,s)),t}function QN(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],jo(n,s)),t}function XN(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],WN(s));const r=f(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&p(e,["avgLogprobs"],c);const h=f(n,["groundingMetadata"]);h!=null&&p(e,["groundingMetadata"],h);const g=f(n,["index"]);g!=null&&p(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&p(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(N=>N)),p(e,["safetyRatings"],T)}const _=f(n,["urlContextMetadata"]);return _!=null&&p(e,["urlContextMetadata"],_),e}function WN(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function xT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>kw(l))),p(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&p(e,["role"],s),e}function ZN(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function ew(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],FN(BN(r))),t}function ob(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["src"]);r!=null&&p(t,["batch","inputConfig"],KN(n,pT(n,r)));const l=f(e,["config"]);return l!=null&&ZN(l,t),t}function tw(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["model"],dt(n,s));const r=f(e,["src"]);r!=null&&p(t,["inputConfig"],$N(pT(n,r)));const l=f(e,["config"]);return l!=null&&ew(l,t),t}function nw(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&p(e,["batch","displayName"],s),t}function sw(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["src"]);r!=null&&p(t,["batch","inputConfig"],uw(n,r));const l=f(e,["config"]);return l!=null&&nw(l,t),t}function iw(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],jo(n,s)),t}function aw(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],jo(n,s)),t}function rw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&p(e,["name"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);return l!=null&&p(e,["error"],l),e}function ow(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&p(e,["name"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);return l!=null&&p(e,["error"],l),e}function lw(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=pp(n,s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(p(t,["_self"],cw(r,t)),aN(t,{"requests[].*":"requests[].request.*"})),t}function cw(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function uw(n,e){const t={},s=f(e,["fileName"]);s!=null&&p(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],lw(n,r)),t}function dw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function fw(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const s=f(n,["args"]);s!=null&&p(e,["args"],s);const r=f(n,["name"]);if(r!=null&&p(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hw(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const s=f(n,["mode"]);if(s!=null&&p(e,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mw(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],xT(Dn(r)));const l=f(e,["temperature"]);l!=null&&p(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&p(s,["topP"],c);const h=f(e,["topK"]);h!=null&&p(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&p(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&p(s,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const N=f(e,["presencePenalty"]);N!=null&&p(s,["presencePenalty"],N);const w=f(e,["frequencyPenalty"]);w!=null&&p(s,["frequencyPenalty"],w);const I=f(e,["seed"]);I!=null&&p(s,["seed"],I);const C=f(e,["responseMimeType"]);C!=null&&p(s,["responseMimeType"],C);const O=f(e,["responseSchema"]);O!=null&&p(s,["responseSchema"],gp(O));const j=f(e,["responseJsonSchema"]);if(j!=null&&p(s,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=f(e,["safetySettings"]);if(t!==void 0&&G!=null){let V=G;Array.isArray(V)&&(V=V.map(ge=>Iw(ge))),p(t,["safetySettings"],V)}const te=f(e,["tools"]);if(t!==void 0&&te!=null){let V=Uo(te);Array.isArray(V)&&(V=V.map(ge=>Mw(Lo(ge)))),p(t,["tools"],V)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&p(t,["toolConfig"],Rw(ae)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&p(t,["cachedContent"],zi(n,le));const M=f(e,["responseModalities"]);M!=null&&p(s,["responseModalities"],M);const D=f(e,["mediaResolution"]);D!=null&&p(s,["mediaResolution"],D);const R=f(e,["speechConfig"]);if(R!=null&&p(s,["speechConfig"],yp(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&p(s,["thinkingConfig"],U);const L=f(e,["imageConfig"]);L!=null&&p(s,["imageConfig"],bw(L));const B=f(e,["enableEnhancedCivicAnswers"]);return B!=null&&p(s,["enableEnhancedCivicAnswers"],B),s}function pw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>XN(m))),p(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&p(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&p(e,["usageMetadata"],h),e}function gw(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],jo(n,s)),t}function yw(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],jo(n,s)),t}function xw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function vw(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function bw(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _w(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["request","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let h=As(r);Array.isArray(h)&&(h=h.map(g=>xT(g))),p(t,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&p(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&p(t,["request","generationConfig"],mw(n,c,f(t,["request"],{}))),t}function Tw(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],pw(t));const s=f(n,["error"]);return s!=null&&p(e,["error"],s),e}function Ew(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Sw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function Aw(n){const e={},t=f(n,["config"]);return t!=null&&Ew(t,e),e}function Nw(n){const e={},t=f(n,["config"]);return t!=null&&Sw(t,e),e}function ww(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>ed(c))),p(e,["batchJobs"],l)}return e}function Cw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>km(c))),p(e,["batchJobs"],l)}return e}function kw(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],dw(l));const c=f(n,["functionCall"]);c!=null&&p(e,["functionCall"],fw(c));const h=f(n,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],YN(g));const m=f(n,["text"]);m!=null&&p(e,["text"],m);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&p(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function Iw(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function Rw(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const s=f(n,["functionCallingConfig"]);return s!=null&&p(e,["functionCallingConfig"],hw(s)),e}function Mw(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),p(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],xw(c));const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],vw(h));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Li;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Li||(Li={}));class vr{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dw extends Bi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vr(Li.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=ob(this.apiClient,e),s=t._url,r=Ee("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,g=h.requests,m=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const N=_.request;N.systemInstruction=T,_.request=N}m.push(_)}return h.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=tw(this.apiClient,e);return h=Ee("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>km(v))}else{const m=ob(this.apiClient,e);return h=Ee("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>ed(v))}}async createEmbeddingsInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sw(this.apiClient,e);return l=Ee("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>ed(g))}}async get(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=yw(this.apiClient,e);return h=Ee("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>km(v))}else{const m=gw(this.apiClient,e);return h=Ee("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>ed(v))}}async cancel(e){var t,s,r,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=QN(this.apiClient,e);c=Ee("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=JN(this.apiClient,e);c=Ee("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Nw(e);return h=Ee("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Cw(v),T=new sb;return Object.assign(T,_),T})}else{const m=Aw(e);return h=Ee("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ww(v),T=new sb;return Object.assign(T,_),T})}}async delete(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=aw(this.apiClient,e);return h=Ee("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>ow(v))}else{const m=iw(this.apiClient,e);return h=Ee("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>rw(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pw(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function lb(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>sC(l))),p(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&p(e,["role"],s),e}function Vw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=As(c);Array.isArray(v)&&(v=v.map(_=>lb(_))),p(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&p(e,["systemInstruction"],lb(Dn(h)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>aC(_))),p(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&p(e,["toolConfig"],iC(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Lw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let _=As(c);Array.isArray(_)&&(_=_.map(T=>T)),p(e,["contents"],_)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&p(e,["systemInstruction"],Dn(h));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>rC(T))),p(e,["tools"],_)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&p(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),t}function Uw(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["model"],rT(n,s));const r=f(e,["config"]);return r!=null&&Vw(r,t),t}function jw(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["model"],rT(n,s));const r=f(e,["config"]);return r!=null&&Lw(r,t),t}function Ow(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],zi(n,s)),t}function Gw(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],zi(n,s)),t}function Bw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function zw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Hw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Fw(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const s=f(n,["args"]);s!=null&&p(e,["args"],s);const r=f(n,["name"]);if(r!=null&&p(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qw(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const s=f(n,["mode"]);if(s!=null&&p(e,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Kw(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const s=f(n,["name"]);s!=null&&p(e,["name"],s);const r=f(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&p(e,["response"],c);const h=f(n,["responseJsonSchema"]);if(h!=null&&p(e,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function $w(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],zi(n,s)),t}function Yw(n,e){const t={},s=f(e,["name"]);return s!=null&&p(t,["_url","name"],zi(n,s)),t}function Jw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Qw(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Xw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function Ww(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function Zw(n){const e={},t=f(n,["config"]);return t!=null&&Xw(t,e),e}function eC(n){const e={},t=f(n,["config"]);return t!=null&&Ww(t,e),e}function tC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["cachedContents"],l)}return e}function nC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["cachedContents"],l)}return e}function sC(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],Hw(l));const c=f(n,["functionCall"]);c!=null&&p(e,["functionCall"],Fw(c));const h=f(n,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],Pw(g));const m=f(n,["text"]);m!=null&&p(e,["text"],m);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&p(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function iC(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const s=f(n,["functionCallingConfig"]);return s!=null&&p(e,["functionCallingConfig"],qw(s)),e}function aC(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),p(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],Jw(c));const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],Qw(h));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function rC(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const s=f(n,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>Kw(T))),p(e,["functionDeclarations"],_)}const h=f(n,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const g=f(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function oC(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function lC(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function cC(n,e){const t={},s=f(e,["name"]);s!=null&&p(t,["_url","name"],zi(n,s));const r=f(e,["config"]);return r!=null&&oC(r,t),t}function uC(n,e){const t={},s=f(e,["name"]);s!=null&&p(t,["_url","name"],zi(n,s));const r=f(e,["config"]);return r!=null&&lC(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dC extends Bi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vr(Li.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=jw(this.apiClient,e);return h=Ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Uw(this.apiClient,e);return h=Ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Yw(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=$w(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Gw(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=zw(v),T=new tb;return Object.assign(T,_),T})}else{const m=Ow(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Bw(v),T=new tb;return Object.assign(T,_),T})}}async update(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=uC(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=cC(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=eC(e);return h=Ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=nC(v),T=new nb;return Object.assign(T,_),T})}else{const m=Zw(e);return h=Ee("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=tC(v),T=new nb;return Object.assign(T,_),T})}}}function hd(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function cb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(n){return this instanceof ze?(this.v=n,this):new ze(n)}function js(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(N){return function(w){return Promise.resolve(w).then(N,_)}}function h(N,w){s[N]&&(r[N]=function(I){return new Promise(function(C,O){l.push([N,I,C,O])>1||g(N,I)})},w&&(r[N]=w(r[N])))}function g(N,w){try{m(s[N](w))}catch(I){T(l[0][3],I)}}function m(N){N.value instanceof ze?Promise.resolve(N.value.v).then(v,_):T(l[0][2],N)}function v(N){g("next",N)}function _(N){g("throw",N)}function T(N,w){N(w),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Os(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof cb=="function"?cb(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(h,g){c=n[l](c),r(h,g,c.done,c.value)})}}function r(l,c,h,g){Promise.resolve(g).then(function(m){l({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fC(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:vT(t)}function vT(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function hC(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ub(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!vT(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class mC{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new pC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pC{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),hC(l)}async sendMessage(e){var t;await this.sendPromise;const s=Dn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await r,m=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(h=v.slice(_))!==null&&h!==void 0?h:[]);const N=m?[m]:[];this.recordHistory(s,N,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=Dn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?ub(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return js(this,arguments,function*(){var r,l,c,h,g,m;const v=[];try{for(var _=!0,T=Os(e),N;N=yield ze(T.next()),r=N.done,!r;_=!0){h=N.value,_=!1;const w=h;if(fC(w)){const I=(m=(g=w.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;I!==void 0&&v.push(I)}yield yield ze(w)}}catch(w){l={error:w}}finally{try{!_&&!r&&(c=T.return)&&(yield ze(c.call(T)))}finally{if(l)throw l.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...ub(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,jd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gC(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function yC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function xC(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],fT(t)),e}function vC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function bC(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],fT(t)),e}function _C(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function TC(n){const e={},t=f(n,["config"]);return t!=null&&_C(t,e),e}function EC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC extends Bi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vr(Li.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=TC(e);return l=Ee("files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=EC(g),v=new CN;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gC(e);return l=Ee("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=yC(g),v=new kN;return Object.assign(v,m),v})}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bC(e);return l=Ee("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xC(e);return l=Ee("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=vC(g),v=new IN;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function td(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function AC(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>BC(l))),p(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&p(e,["role"],s),e}function NC(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function wC(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const s=f(n,["args"]);s!=null&&p(e,["args"],s);const r=f(n,["name"]);if(r!=null&&p(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CC(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const s=f(n,["name"]);s!=null&&p(e,["name"],s);const r=f(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&p(e,["response"],c);const h=f(n,["responseJsonSchema"]);if(h!=null&&p(e,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function kC(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&p(e,["enableAffectiveDialog"],c);const h=f(n,["frequencyPenalty"]);h!=null&&p(e,["frequencyPenalty"],h);const g=f(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&p(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&p(e,["presencePenalty"],_);const T=f(n,["responseLogprobs"]);T!=null&&p(e,["responseLogprobs"],T);const N=f(n,["responseMimeType"]);N!=null&&p(e,["responseMimeType"],N);const w=f(n,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const I=f(n,["responseSchema"]);I!=null&&p(e,["responseSchema"],I);const C=f(n,["routingConfig"]);C!=null&&p(e,["routingConfig"],C);const O=f(n,["seed"]);O!=null&&p(e,["seed"],O);const j=f(n,["speechConfig"]);j!=null&&p(e,["speechConfig"],j);const G=f(n,["stopSequences"]);G!=null&&p(e,["stopSequences"],G);const te=f(n,["temperature"]);te!=null&&p(e,["temperature"],te);const ae=f(n,["thinkingConfig"]);ae!=null&&p(e,["thinkingConfig"],ae);const le=f(n,["topK"]);le!=null&&p(e,["topK"],le);const M=f(n,["topP"]);if(M!=null&&p(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function IC(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function RC(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function MC(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","speechConfig"],xp(_));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const N=f(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const w=f(n,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],AC(Dn(w)));const I=f(n,["tools"]);if(e!==void 0&&I!=null){let le=Uo(I);Array.isArray(le)&&(le=le.map(M=>HC(Lo(M)))),p(e,["setup","tools"],le)}const C=f(n,["sessionResumption"]);e!==void 0&&C!=null&&p(e,["setup","sessionResumption"],zC(C));const O=f(n,["inputAudioTranscription"]);e!==void 0&&O!=null&&p(e,["setup","inputAudioTranscription"],O);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","outputAudioTranscription"],j);const G=f(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&p(e,["setup","realtimeInputConfig"],G);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const ae=f(n,["proactivity"]);if(e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function DC(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],kC(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","speechConfig"],xp(_));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const N=f(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const w=f(n,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],Dn(w));const I=f(n,["tools"]);if(e!==void 0&&I!=null){let M=Uo(I);Array.isArray(M)&&(M=M.map(D=>FC(Lo(D)))),p(e,["setup","tools"],M)}const C=f(n,["sessionResumption"]);e!==void 0&&C!=null&&p(e,["setup","sessionResumption"],C);const O=f(n,["inputAudioTranscription"]);e!==void 0&&O!=null&&p(e,["setup","inputAudioTranscription"],O);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","outputAudioTranscription"],j);const G=f(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&p(e,["setup","realtimeInputConfig"],G);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const ae=f(n,["proactivity"]);e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae);const le=f(n,["explicitVadSignal"]);return e!==void 0&&le!=null&&p(e,["setup","explicitVadSignal"],le),t}function PC(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["setup","model"],dt(n,s));const r=f(e,["config"]);return r!=null&&p(t,["config"],MC(r,t)),t}function VC(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["setup","model"],dt(n,s));const r=f(e,["config"]);return r!=null&&p(t,["config"],DC(r,t)),t}function LC(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function UC(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["weightedPrompts"],s)}return e}function jC(n){const e={},t=f(n,["media"]);if(t!=null){let m=oT(t);Array.isArray(m)&&(m=m.map(v=>td(v))),p(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&p(e,["audio"],td(cT(s)));const r=f(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&p(e,["video"],td(lT(l)));const c=f(n,["text"]);c!=null&&p(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&p(e,["activityStart"],h);const g=f(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function OC(n){const e={},t=f(n,["media"]);if(t!=null){let m=oT(t);Array.isArray(m)&&(m=m.map(v=>v)),p(e,["mediaChunks"],m)}const s=f(n,["audio"]);s!=null&&p(e,["audio"],cT(s));const r=f(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&p(e,["video"],lT(l));const c=f(n,["text"]);c!=null&&p(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&p(e,["activityStart"],h);const g=f(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function GC(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&p(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&p(e,["usageMetadata"],qC(c));const h=f(n,["goAway"]);h!=null&&p(e,["goAway"],h);const g=f(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const m=f(n,["voiceActivityDetectionSignal"]);return m!=null&&p(e,["voiceActivityDetectionSignal"],m),e}function BC(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],NC(l));const c=f(n,["functionCall"]);c!=null&&p(e,["functionCall"],wC(c));const h=f(n,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],td(g));const m=f(n,["text"]);m!=null&&p(e,["text"],m);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&p(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function zC(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function HC(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),p(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],IC(c));const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],RC(h));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function FC(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const s=f(n,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>CC(T))),p(e,["functionDeclarations"],_)}const h=f(n,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const g=f(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function qC(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&p(e,["thoughtsTokenCount"],c);const h=f(n,["totalTokenCount"]);h!=null&&p(e,["totalTokenCount"],h);const g=f(n,["promptTokensDetails"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(w=>w)),p(e,["promptTokensDetails"],N)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(w=>w)),p(e,["cacheTokensDetails"],N)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(w=>w)),p(e,["responseTokensDetails"],N)}const _=f(n,["toolUsePromptTokensDetails"]);if(_!=null){let N=_;Array.isArray(N)&&(N=N.map(w=>w)),p(e,["toolUsePromptTokensDetails"],N)}const T=f(n,["trafficType"]);return T!=null&&p(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KC(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function $C(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],YC(s));const r=f(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&p(e,["avgLogprobs"],c);const h=f(n,["groundingMetadata"]);h!=null&&p(e,["groundingMetadata"],h);const g=f(n,["index"]);g!=null&&p(e,["index"],g);const m=f(n,["logprobsResult"]);m!=null&&p(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(N=>N)),p(e,["safetyRatings"],T)}const _=f(n,["urlContextMetadata"]);return _!=null&&p(e,["urlContextMetadata"],_),e}function YC(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function JC(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let l=As(r);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["contents"],l)}return t}function QC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["tokensInfo"],r)}return e}function XC(n){const e={},t=f(n,["values"]);t!=null&&p(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&p(e,["statistics"],WC(s)),e}function WC(n){const e={},t=f(n,["truncated"]);t!=null&&p(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&p(e,["tokenCount"],s),e}function Od(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>oI(l))),p(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&p(e,["role"],s),e}function ZC(n){const e={},t=f(n,["controlType"]);t!=null&&p(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&p(e,["computeControl"],s),e}function ek(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function tk(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Dn(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>ET(h))),p(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],Kk(l)),t}function nk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let c=As(r);Array.isArray(c)&&(c=c.map(h=>Od(h))),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&ek(l),t}function sk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let c=As(r);Array.isArray(c)&&(c=c.map(h=>h)),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&tk(l,t),t}function ik(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&p(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function ak(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&p(e,["totalTokens"],s),e}function rk(n,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],dt(n,s)),t}function ok(n,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],dt(n,s)),t}function lk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function ck(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function uk(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const g=f(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&p(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&p(e,["parameters","includeSafetyAttributes"],_);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&p(e,["parameters","includeRaiReason"],T);const N=f(n,["language"]);e!==void 0&&N!=null&&p(e,["parameters","language"],N);const w=f(n,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const I=f(n,["outputCompressionQuality"]);e!==void 0&&I!=null&&p(e,["parameters","outputOptions","compressionQuality"],I);const C=f(n,["addWatermark"]);e!==void 0&&C!=null&&p(e,["parameters","addWatermark"],C);const O=f(n,["labels"]);e!==void 0&&O!=null&&p(e,["labels"],O);const j=f(n,["editMode"]);e!==void 0&&j!=null&&p(e,["parameters","editMode"],j);const G=f(n,["baseSteps"]);return e!==void 0&&G!=null&&p(e,["parameters","editConfig","baseSteps"],G),t}function dk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>hI(g))),p(t,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&uk(c,t),t}function fk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Gd(l))),p(e,["generatedImages"],r)}return e}function hk(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function mk(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&p(e,["instances[]","mimeType"],c);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&p(e,["parameters","autoTruncate"],h),t}function pk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let h=pp(n,r);Array.isArray(h)&&(h=h.map(g=>g)),p(t,["requests[]","content"],h)}const l=f(e,["config"]);l!=null&&hk(l,t);const c=f(e,["model"]);return c!==void 0&&p(t,["requests[]","model"],dt(n,c)),t}function gk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let c=pp(n,r);Array.isArray(c)&&(c=c.map(h=>h)),p(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&mk(l,t),t}function yk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function xk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>XC(c))),p(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function vk(n){const e={},t=f(n,["endpoint"]);t!=null&&p(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&p(e,["deployedModelId"],s),e}function bk(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function _k(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const s=f(n,["args"]);s!=null&&p(e,["args"],s);const r=f(n,["name"]);if(r!=null&&p(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tk(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const s=f(n,["mode"]);if(s!=null&&p(e,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ek(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const s=f(n,["name"]);s!=null&&p(e,["name"],s);const r=f(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&p(e,["response"],c);const h=f(n,["responseJsonSchema"]);if(h!=null&&p(e,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Sk(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],Od(Dn(r)));const l=f(e,["temperature"]);l!=null&&p(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&p(s,["topP"],c);const h=f(e,["topK"]);h!=null&&p(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&p(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&p(s,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const N=f(e,["presencePenalty"]);N!=null&&p(s,["presencePenalty"],N);const w=f(e,["frequencyPenalty"]);w!=null&&p(s,["frequencyPenalty"],w);const I=f(e,["seed"]);I!=null&&p(s,["seed"],I);const C=f(e,["responseMimeType"]);C!=null&&p(s,["responseMimeType"],C);const O=f(e,["responseSchema"]);O!=null&&p(s,["responseSchema"],gp(O));const j=f(e,["responseJsonSchema"]);if(j!=null&&p(s,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=f(e,["safetySettings"]);if(t!==void 0&&G!=null){let V=G;Array.isArray(V)&&(V=V.map(ge=>mI(ge))),p(t,["safetySettings"],V)}const te=f(e,["tools"]);if(t!==void 0&&te!=null){let V=Uo(te);Array.isArray(V)&&(V=V.map(ge=>_I(Lo(ge)))),p(t,["tools"],V)}const ae=f(e,["toolConfig"]);if(t!==void 0&&ae!=null&&p(t,["toolConfig"],bI(ae)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&p(t,["cachedContent"],zi(n,le));const M=f(e,["responseModalities"]);M!=null&&p(s,["responseModalities"],M);const D=f(e,["mediaResolution"]);D!=null&&p(s,["mediaResolution"],D);const R=f(e,["speechConfig"]);if(R!=null&&p(s,["speechConfig"],yp(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&p(s,["thinkingConfig"],U);const L=f(e,["imageConfig"]);L!=null&&p(s,["imageConfig"],Xk(L));const B=f(e,["enableEnhancedCivicAnswers"]);return B!=null&&p(s,["enableEnhancedCivicAnswers"],B),s}function Ak(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],Dn(r));const l=f(e,["temperature"]);l!=null&&p(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&p(s,["topP"],c);const h=f(e,["topK"]);h!=null&&p(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const m=f(e,["maxOutputTokens"]);m!=null&&p(s,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&p(s,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&p(s,["logprobs"],T);const N=f(e,["presencePenalty"]);N!=null&&p(s,["presencePenalty"],N);const w=f(e,["frequencyPenalty"]);w!=null&&p(s,["frequencyPenalty"],w);const I=f(e,["seed"]);I!=null&&p(s,["seed"],I);const C=f(e,["responseMimeType"]);C!=null&&p(s,["responseMimeType"],C);const O=f(e,["responseSchema"]);O!=null&&p(s,["responseSchema"],gp(O));const j=f(e,["responseJsonSchema"]);j!=null&&p(s,["responseJsonSchema"],j);const G=f(e,["routingConfig"]);G!=null&&p(s,["routingConfig"],G);const te=f(e,["modelSelectionConfig"]);te!=null&&p(s,["modelConfig"],te);const ae=f(e,["safetySettings"]);if(t!==void 0&&ae!=null){let J=ae;Array.isArray(J)&&(J=J.map(ce=>ce)),p(t,["safetySettings"],J)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let J=Uo(le);Array.isArray(J)&&(J=J.map(ce=>ET(Lo(ce)))),p(t,["tools"],J)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const D=f(e,["labels"]);t!==void 0&&D!=null&&p(t,["labels"],D);const R=f(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],zi(n,R));const U=f(e,["responseModalities"]);U!=null&&p(s,["responseModalities"],U);const L=f(e,["mediaResolution"]);L!=null&&p(s,["mediaResolution"],L);const B=f(e,["speechConfig"]);B!=null&&p(s,["speechConfig"],yp(B));const V=f(e,["audioTimestamp"]);V!=null&&p(s,["audioTimestamp"],V);const ge=f(e,["thinkingConfig"]);ge!=null&&p(s,["thinkingConfig"],ge);const Me=f(e,["imageConfig"]);if(Me!=null&&p(s,["imageConfig"],Wk(Me)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function db(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let c=As(r);Array.isArray(c)&&(c=c.map(h=>Od(h))),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&p(t,["generationConfig"],Sk(n,l,t)),t}function fb(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["contents"]);if(r!=null){let c=As(r);Array.isArray(c)&&(c=c.map(h=>h)),p(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&p(t,["generationConfig"],Ak(n,l,t)),t}function hb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>$C(m))),p(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&p(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&p(e,["usageMetadata"],h),e}function mb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),p(e,["candidates"],m)}const r=f(n,["createTime"]);r!=null&&p(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&p(e,["promptFeedback"],c);const h=f(n,["responseId"]);h!=null&&p(e,["responseId"],h);const g=f(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function Nk(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&p(e,["parameters","language"],v);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=f(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(n,["imageSize"]);if(e!==void 0&&N!=null&&p(e,["parameters","sampleImageSize"],N),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function wk(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&p(e,["parameters","guidanceScale"],h);const g=f(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&p(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&p(e,["parameters","includeSafetyAttributes"],_);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&p(e,["parameters","includeRaiReason"],T);const N=f(n,["language"]);e!==void 0&&N!=null&&p(e,["parameters","language"],N);const w=f(n,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const I=f(n,["outputCompressionQuality"]);e!==void 0&&I!=null&&p(e,["parameters","outputOptions","compressionQuality"],I);const C=f(n,["addWatermark"]);e!==void 0&&C!=null&&p(e,["parameters","addWatermark"],C);const O=f(n,["labels"]);e!==void 0&&O!=null&&p(e,["labels"],O);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&p(e,["parameters","sampleImageSize"],j);const G=f(n,["enhancePrompt"]);return e!==void 0&&G!=null&&p(e,["parameters","enhancePrompt"],G),t}function Ck(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&Nk(l,t),t}function kk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&wk(l,t),t}function Ik(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>zk(c))),p(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],_T(r)),e}function Rk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Gd(c))),p(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],TT(r)),e}function Mk(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&p(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],Bd(v));const _=f(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(N=>PI(N))),p(e,["instances[0]","referenceImages"],T)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Dk(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&p(e,["parameters","durationSeconds"],c);const h=f(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const m=f(n,["resolution"]);e!==void 0&&m!=null&&p(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const _=f(n,["pubsubTopic"]);e!==void 0&&_!=null&&p(e,["parameters","pubsubTopic"],_);const T=f(n,["negativePrompt"]);e!==void 0&&T!=null&&p(e,["parameters","negativePrompt"],T);const N=f(n,["enhancePrompt"]);e!==void 0&&N!=null&&p(e,["parameters","enhancePrompt"],N);const w=f(n,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const I=f(n,["lastFrame"]);e!==void 0&&I!=null&&p(e,["instances[0]","lastFrame"],Hs(I));const C=f(n,["referenceImages"]);if(e!==void 0&&C!=null){let G=C;Array.isArray(G)&&(G=G.map(te=>VI(te))),p(e,["instances[0]","referenceImages"],G)}const O=f(n,["mask"]);e!==void 0&&O!=null&&p(e,["instances[0]","mask"],DI(O));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&p(e,["parameters","compressionQuality"],j),t}function Pk(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(e,["response"],jk(c)),e}function Vk(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["response"]);return c!=null&&p(e,["response"],Ok(c)),e}function Lk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&p(t,["instances[0]","image"],Bd(l));const c=f(e,["video"]);c!=null&&p(t,["instances[0]","video"],ST(c));const h=f(e,["source"]);h!=null&&Gk(h,t);const g=f(e,["config"]);return g!=null&&Mk(g,t),t}function Uk(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&p(t,["instances[0]","image"],Hs(l));const c=f(e,["video"]);c!=null&&p(t,["instances[0]","video"],AT(c));const h=f(e,["source"]);h!=null&&Bk(h,t);const g=f(e,["config"]);return g!=null&&Dk(g,t),t}function jk(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Fk(c))),p(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Ok(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>qk(c))),p(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Gk(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Bd(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],ST(l)),t}function Bk(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Hs(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],AT(l)),t}function zk(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],Zk(t));const s=f(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],_T(r)),e}function Gd(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],bT(t));const s=f(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&p(e,["safetyAttributes"],TT(r));const l=f(n,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function Hk(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["mask"],bT(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["labels"],r)}return e}function Fk(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],RI(t)),e}function qk(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],MI(t)),e}function Kk(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&p(e,["enableAffectiveDialog"],c);const h=f(n,["frequencyPenalty"]);h!=null&&p(e,["frequencyPenalty"],h);const g=f(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const m=f(n,["maxOutputTokens"]);m!=null&&p(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&p(e,["presencePenalty"],_);const T=f(n,["responseLogprobs"]);T!=null&&p(e,["responseLogprobs"],T);const N=f(n,["responseMimeType"]);N!=null&&p(e,["responseMimeType"],N);const w=f(n,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const I=f(n,["responseSchema"]);I!=null&&p(e,["responseSchema"],I);const C=f(n,["routingConfig"]);C!=null&&p(e,["routingConfig"],C);const O=f(n,["seed"]);O!=null&&p(e,["seed"],O);const j=f(n,["speechConfig"]);j!=null&&p(e,["speechConfig"],j);const G=f(n,["stopSequences"]);G!=null&&p(e,["stopSequences"],G);const te=f(n,["temperature"]);te!=null&&p(e,["temperature"],te);const ae=f(n,["thinkingConfig"]);ae!=null&&p(e,["thinkingConfig"],ae);const le=f(n,["topK"]);le!=null&&p(e,["topK"],le);const M=f(n,["topP"]);if(M!=null&&p(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $k(n,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],dt(n,s)),t}function Yk(n,e){const t={},s=f(e,["model"]);return s!=null&&p(t,["_url","name"],dt(n,s)),t}function Jk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Qk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Xk(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Wk(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&p(e,["imageSize"],s);const r=f(n,["personGeneration"]);r!=null&&p(e,["personGeneration"],r);const l=f(n,["outputMimeType"]);l!=null&&p(e,["imageOutputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);return c!=null&&p(e,["imageOutputOptions","compressionQuality"],c),e}function Zk(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],La(t));const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function bT(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&p(e,["imageBytes"],La(s));const r=f(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Bd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],La(t));const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Hs(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&p(e,["bytesBase64Encoded"],La(s));const r=f(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function eI(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&p(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],hT(n,h)),s}function tI(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&p(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&p(t,["_url","models_url"],hT(n,h)),s}function nI(n,e){const t={},s=f(e,["config"]);return s!=null&&eI(n,s,t),t}function sI(n,e){const t={},s=f(e,["config"]);return s!=null&&tI(n,s,t),t}function iI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=mT(r);Array.isArray(l)&&(l=l.map(c=>Im(c))),p(e,["models"],l)}return e}function aI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=mT(r);Array.isArray(l)&&(l=l.map(c=>Rm(c))),p(e,["models"],l)}return e}function rI(n){const e={},t=f(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&p(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function Im(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=f(n,["description"]);r!=null&&p(e,["description"],r);const l=f(n,["version"]);l!=null&&p(e,["version"],l);const c=f(n,["_self"]);c!=null&&p(e,["tunedModelInfo"],TI(c));const h=f(n,["inputTokenLimit"]);h!=null&&p(e,["inputTokenLimit"],h);const g=f(n,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const m=f(n,["supportedGenerationMethods"]);m!=null&&p(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&p(e,["temperature"],v);const _=f(n,["maxTemperature"]);_!=null&&p(e,["maxTemperature"],_);const T=f(n,["topP"]);T!=null&&p(e,["topP"],T);const N=f(n,["topK"]);N!=null&&p(e,["topK"],N);const w=f(n,["thinking"]);return w!=null&&p(e,["thinking"],w),e}function Rm(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=f(n,["description"]);r!=null&&p(e,["description"],r);const l=f(n,["versionId"]);l!=null&&p(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>vk(T))),p(e,["endpoints"],_)}const h=f(n,["labels"]);h!=null&&p(e,["labels"],h);const g=f(n,["_self"]);g!=null&&p(e,["tunedModelInfo"],EI(g));const m=f(n,["defaultCheckpointId"]);m!=null&&p(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["checkpoints"],_)}return e}function oI(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],bk(l));const c=f(n,["functionCall"]);c!=null&&p(e,["functionCall"],_k(c));const h=f(n,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],KC(g));const m=f(n,["text"]);m!=null&&p(e,["text"],m);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&p(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function lI(n){const e={},t=f(n,["productImage"]);return t!=null&&p(e,["image"],Hs(t)),e}function cI(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&p(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const _=f(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","compressionQuality"],_);const T=f(n,["enhancePrompt"]);e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T);const N=f(n,["labels"]);return e!==void 0&&N!=null&&p(e,["labels"],N),t}function uI(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["source"]);r!=null&&fI(r,t);const l=f(e,["config"]);return l!=null&&cI(l,t),t}function dI(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Gd(r))),p(e,["generatedImages"],s)}return e}function fI(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Hs(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>lI(h))),p(e,["instances[0]","productImages"],c)}return t}function hI(n){const e={},t=f(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Hs(t));const s=f(n,["referenceId"]);s!=null&&p(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],rI(l));const c=f(n,["controlImageConfig"]);c!=null&&p(e,["controlImageConfig"],ZC(c));const h=f(n,["styleImageConfig"]);h!=null&&p(e,["styleImageConfig"],h);const g=f(n,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function _T(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function TT(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function mI(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function pI(n){const e={},t=f(n,["image"]);return t!=null&&p(e,["image"],Hs(t)),e}function gI(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&p(e,["parameters","maskDilation"],c);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&p(e,["parameters","binaryColorThreshold"],h);const g=f(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),t}function yI(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["source"]);r!=null&&vI(r,t);const l=f(e,["config"]);return l!=null&&gI(l,t),t}function xI(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Hk(r))),p(e,["generatedMasks"],s)}return e}function vI(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Hs(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],pI(l)),t}function bI(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const s=f(n,["functionCallingConfig"]);return s!=null&&p(e,["functionCallingConfig"],Tk(s)),e}function _I(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),p(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],Jk(c));const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],Qk(h));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}function ET(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const s=f(n,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>Ek(T))),p(e,["functionDeclarations"],_)}const h=f(n,["googleMaps"]);h!=null&&p(e,["googleMaps"],h);const g=f(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],g);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function TI(n){const e={},t=f(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function EI(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function SI(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function AI(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function NI(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","name"],dt(n,s));const r=f(e,["config"]);return r!=null&&SI(r,t),t}function wI(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["config"]);return r!=null&&AI(r,t),t}function CI(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","mimeType"],h);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=f(n,["labels"]);e!==void 0&&_!=null&&p(e,["labels"],_);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&p(e,["parameters","sampleCount"],T);const N=f(n,["mode"]);return e!==void 0&&N!=null&&p(e,["parameters","mode"],N),t}function kI(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["_url","model"],dt(n,s));const r=f(e,["image"]);r!=null&&p(t,["instances[0]","image"],Hs(r));const l=f(e,["upscaleFactor"]);l!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&CI(c,t),t}function II(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Gd(l))),p(e,["generatedImages"],r)}return e}function RI(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&p(e,["videoBytes"],La(s));const r=f(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function MI(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],La(s));const r=f(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function DI(n){const e={},t=f(n,["image"]);t!=null&&p(e,["_self"],Hs(t));const s=f(n,["maskMode"]);return s!=null&&p(e,["maskMode"],s),e}function PI(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],Bd(t));const s=f(n,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function VI(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],Hs(t));const s=f(n,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function ST(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&p(e,["encodedVideo"],La(s));const r=f(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function AT(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&p(e,["bytesBase64Encoded"],La(s));const r=f(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LI(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&p(e,["displayName"],s),t}function UI(n){const e={},t=f(n,["config"]);return t!=null&&LI(t,e),e}function jI(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),t}function OI(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&jI(s,e),e}function GI(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function BI(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function zI(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const s=f(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=f(n,["done"]);r!=null&&p(e,["done"],r);const l=f(n,["error"]);l!=null&&p(e,["error"],l);const c=f(n,["response"]);return c!=null&&p(e,["response"],FI(c)),e}function HI(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&p(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&BI(r,e),e}function FI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&p(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function qI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function KI(n){const e={},t=f(n,["config"]);return t!=null&&qI(t,e),e}function $I(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["fileSearchStores"],l)}return e}function NT(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&p(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),p(e,["customMetadata"],h)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&p(e,["chunkingConfig"],c),t}function YI(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&NT(s,e),e}function JI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QI="Content-Type",XI="X-Server-Timeout",WI="User-Agent",Mm="x-goog-api-client",ZI="1.35.0",e2=`google-genai-sdk/${ZI}`,t2="v1beta1",n2="v1beta";class s2{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:t2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:n2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&i2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await pb(r),new wm(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await pb(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return js(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield ze(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const w=JSON.parse(_);if("error"in w){const I=JSON.parse(JSON.stringify(w.error)),C=I.status,O=I.code,j=`got status: ${C}. ${JSON.stringify(w)}`;if(O>=400&&O<600)throw new jd({message:j,status:O})}}catch(w){if(w.name==="ApiError")throw w}c+=_;let T=-1,N=0;for(;;){T=-1,N=0;for(const C of g){const O=c.indexOf(C);O!==-1&&(T===-1||O<T)&&(T=O,N=C.length)}if(T===-1)break;const w=c.substring(0,T);c=c.substring(T+N);const I=w.trim();if(I.startsWith(h)){const C=I.substring(h.length).trim();try{const O=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ze(new wm(O))}catch(O){throw new Error(`exception parsing stream chunk ${C}. ${O}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=e2+" "+this.clientOptions.userAgentExtra;return e[WI]=t,e[Mm]=t,e[QI]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(XI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const g={file:r},m=this.getFileName(e),v=Ee("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,g,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,c=await l.stat(t),h=String(c.size),g=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&NT(s,_);const T=await this.fetchUploadUrl(m,h,g,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function pb(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new jd({message:r,status:t}):new Error(r)}}function i2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],v=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a2="mcp_used/unknown";let r2=!1;function wT(n){for(const e of n)if(o2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return r2}function CT(n){var e;const t=(e=n[Mm])!==null&&e!==void 0?e:"";n[Mm]=(t+` ${a2}`).trimStart()}function o2(n){return n!==null&&typeof n=="object"&&n instanceof vp}function l2(n){return js(this,arguments,function*(t,s=100){let r,l=0;for(;l<s;){const c=yield ze(t.listTools({cursor:r}));for(const h of c.tools)yield yield ze(h),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class vp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new vp(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(t=void 0,Os(l2(v))),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const _=r;c.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=v}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),GN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function c2(n,e,t){const s=new MN;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class u2{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=h2(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(G=>{m=G}),_=e.callbacks,T=function(){m({})},N=this.apiClient,w={onopen:T,onmessage:G=>{c2(N,_.onmessage,G)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(G){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(G){}},I=this.webSocketFactory.create(g,f2(c),w);I.connect(),await v;const j={setup:{model:dt(this.apiClient,e.model)}};return I.send(JSON.stringify(j)),new d2(I,this.apiClient)}}class d2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=UC(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=LC(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(_o.PLAY)}pause(){this.sendPlaybackControl(_o.PAUSE)}stop(){this.sendPlaybackControl(_o.STOP)}resetContext(){this.sendPlaybackControl(_o.RESET_CONTEXT)}close(){this.conn.close()}}function f2(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function h2(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function p2(n,e,t){const s=new RN;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=GC(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class g2{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new u2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&wT(e.config.tools)&&CT(_);const T=b2(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const R=this.apiClient.getApiKey();let U="BidiGenerateContent",L="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",L="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${U}?${L}=${R}`}let N=()=>{};const w=new Promise(R=>{N=R}),I=e.callbacks,C=function(){var R;(R=I==null?void 0:I.onopen)===null||R===void 0||R.call(I),N({})},O=this.apiClient,j={onopen:C,onmessage:R=>{p2(O,I.onmessage,R)},onerror:(t=I==null?void 0:I.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=I==null?void 0:I.onclose)!==null&&s!==void 0?s:function(R){}},G=this.webSocketFactory.create(v,v2(T),j);G.connect(),await w;let te=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&te.startsWith("publishers/")){const R=this.apiClient.getProject(),U=this.apiClient.getLocation();te=`projects/${R}/locations/${U}/`+te}let ae={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ud.AUDIO]}:e.config.responseModalities=[ud.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],M=[];for(const R of le)if(this.isCallableTool(R)){const U=R;M.push(await U.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const D={model:te,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=VC(this.apiClient,D):ae=PC(this.apiClient,D),delete ae.config,G.send(JSON.stringify(ae)),new x2(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const y2={turnComplete:!0};class x2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=As(t.turns),e.isVertexAI()||(s=s.map(r=>Od(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(m2)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},y2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:OC(e)}:t={realtimeInput:jC(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function v2(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function b2(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gb=10;function yb(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(So(c)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function So(n){return"callTool"in n&&typeof n.callTool=="function"}function _2(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>So(r)))!==null&&s!==void 0?s:!1}function xb(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(So(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function vb(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends Bi{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!_2(t)||yb(t.config))return await this.generateContentInternal(g);const m=xb(t);if(m.length>0){const I=m.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${I}.`)}let v,_;const T=As(g.contents),N=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:gb;let w=0;for(;w<N&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const I=v.candidates[0].content,C=[];for(const O of(h=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(So(O)){const G=await O.callTool(v.functionCalls);C.push(...G)}w++,_={role:"user",parts:C},g.contents=As(g.contents),g.contents.push(I),g.contents.push(_),vb(g.config)&&(T.push(I),T.push(_))}return vb(g.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var s,r,l,c,h;if(this.maybeMoveToResponseJsonSchem(t),yb(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const g=xb(t);if(g.length>0){const _=g.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new vr(Li.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,c,h,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=t.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>So(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&wT(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),CT(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(So(c)){const h=c,g=await h.tool();for(const m of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:gb;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,v,_){return js(this,arguments,function*(){for(var T,N,w,I,C,O;h<l;){c&&(h++,c=!1);const ae=yield ze(m.processParamsMaybeAddMcpUsage(_)),le=yield ze(m.generateContentStreamInternal(ae)),M=[],D=[];try{for(var j=!0,G=(N=void 0,Os(le)),te;te=yield ze(G.next()),T=te.done,!T;j=!0){I=te.value,j=!1;const R=I;if(yield yield ze(R),R.candidates&&(!((C=R.candidates[0])===null||C===void 0)&&C.content)){D.push(R.candidates[0].content);for(const U of(O=R.candidates[0].content.parts)!==null&&O!==void 0?O:[])if(h<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const L=yield ze(v.get(U.functionCall.name).callTool([U.functionCall]));M.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(R){N={error:R}}finally{try{!j&&!T&&(w=G.return)&&(yield ze(w.call(G)))}finally{if(N)throw N.error}}if(M.length>0){c=!0;const R=new ql;R.candidates=[{content:{role:"user",parts:M}}],yield yield ze(R);const U=[];U.push(...D),U.push({role:"user",parts:M});const L=As(_.contents).concat(U);_.contents=L}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=fb(this.apiClient,e);return h=Ee("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=mb(v),T=new ql;return Object.assign(T,_),T})}else{const m=db(this.apiClient,e);return h=Ee("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=hb(v),T=new ql;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=fb(this.apiClient,e);return h=Ee("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return js(this,arguments,function*(){var T,N,w,I;try{for(var C=!0,O=Os(_),j;j=yield ze(O.next()),T=j.done,!T;C=!0){I=j.value,C=!1;const G=I,te=mb(yield ze(G.json()));te.sdkHttpResponse={headers:G.headers};const ae=new ql;Object.assign(ae,te),yield yield ze(ae)}}catch(G){N={error:G}}finally{try{!C&&!T&&(w=O.return)&&(yield ze(w.call(O)))}finally{if(N)throw N.error}}})})}else{const m=db(this.apiClient,e);return h=Ee("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return js(this,arguments,function*(){var T,N,w,I;try{for(var C=!0,O=Os(_),j;j=yield ze(O.next()),T=j.done,!T;C=!0){I=j.value,C=!1;const G=I,te=hb(yield ze(G.json()));te.sdkHttpResponse={headers:G.headers};const ae=new ql;Object.assign(ae,te),yield yield ze(ae)}}catch(G){N={error:G}}finally{try{!C&&!T&&(w=O.return)&&(yield ze(w.call(O)))}finally{if(N)throw N.error}}})})}}async embedContent(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=gk(this.apiClient,e);return h=Ee("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=xk(v),T=new Yv;return Object.assign(T,_),T})}else{const m=pk(this.apiClient,e);return h=Ee("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=yk(v),T=new Yv;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=kk(this.apiClient,e);return h=Ee("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Rk(v),T=new Jv;return Object.assign(T,_),T})}else{const m=Ck(this.apiClient,e);return h=Ee("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Ik(v),T=new Jv;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=dk(this.apiClient,e);return l=Ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=fk(g),v=new bN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=kI(this.apiClient,e);return l=Ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=II(g),v=new _N;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=uI(this.apiClient,e);return l=Ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=dI(g),v=new TN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=yI(this.apiClient,e);return l=Ee("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=xI(g),v=new EN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Yk(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Rm(v))}else{const m=$k(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Im(v))}}async listInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=sI(this.apiClient,e);return h=Ee("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=aI(v),T=new Qv;return Object.assign(T,_),T})}else{const m=nI(this.apiClient,e);return h=Ee("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=iI(v),T=new Qv;return Object.assign(T,_),T})}}async update(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=wI(this.apiClient,e);return h=Ee("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Rm(v))}else{const m=NI(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Im(v))}}async delete(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ok(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ck(v),T=new Xv;return Object.assign(T,_),T})}else{const m=rk(this.apiClient,e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=lk(v),T=new Xv;return Object.assign(T,_),T})}}async countTokens(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=sk(this.apiClient,e);return h=Ee("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ak(v),T=new Wv;return Object.assign(T,_),T})}else{const m=nk(this.apiClient,e);return h=Ee("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ik(v),T=new Wv;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=JC(this.apiClient,e);return l=Ee("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>{const m=QC(g),v=new SN;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Uk(this.apiClient,e);return h=Ee("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=Vk(v),T=new dd;return Object.assign(T,_),T})}else{const m=Lk(this.apiClient,e);return h=Ee("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=Pk(v),T=new dd;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E2 extends Bi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mN(e);return h=Ee("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=hN(e);return h=Ee("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=rN(e);return l=Ee("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S2(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function A2(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>P2(l))),p(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&p(e,["role"],s),e}function N2(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&p(t,["uses"],c);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&p(t,["bidiGenerateContentSetup"],D2(n,h));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),s}function w2(n,e){const t={},s=f(e,["config"]);return s!=null&&p(t,["config"],N2(n,s,t)),t}function C2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function k2(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const s=f(n,["args"]);s!=null&&p(e,["args"],s);const r=f(n,["name"]);if(r!=null&&p(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function I2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function R2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function M2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","topK"],h);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","speechConfig"],xp(_));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","thinkingConfig"],T);const N=f(n,["enableAffectiveDialog"]);e!==void 0&&N!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],N);const w=f(n,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],A2(Dn(w)));const I=f(n,["tools"]);if(e!==void 0&&I!=null){let le=Uo(I);Array.isArray(le)&&(le=le.map(M=>L2(Lo(M)))),p(e,["setup","tools"],le)}const C=f(n,["sessionResumption"]);e!==void 0&&C!=null&&p(e,["setup","sessionResumption"],V2(C));const O=f(n,["inputAudioTranscription"]);e!==void 0&&O!=null&&p(e,["setup","inputAudioTranscription"],O);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&p(e,["setup","outputAudioTranscription"],j);const G=f(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&p(e,["setup","realtimeInputConfig"],G);const te=f(n,["contextWindowCompression"]);e!==void 0&&te!=null&&p(e,["setup","contextWindowCompression"],te);const ae=f(n,["proactivity"]);if(e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function D2(n,e){const t={},s=f(e,["model"]);s!=null&&p(t,["setup","model"],dt(n,s));const r=f(e,["config"]);return r!=null&&p(t,["config"],M2(r,t)),t}function P2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(e,["fileData"],C2(l));const c=f(n,["functionCall"]);c!=null&&p(e,["functionCall"],k2(c));const h=f(n,["functionResponse"]);h!=null&&p(e,["functionResponse"],h);const g=f(n,["inlineData"]);g!=null&&p(e,["inlineData"],S2(g));const m=f(n,["text"]);m!=null&&p(e,["text"],m);const v=f(n,["thought"]);v!=null&&p(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&p(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&p(e,["videoMetadata"],T),e}function V2(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function L2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),p(e,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],I2(c));const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],R2(h));const g=f(n,["googleSearchRetrieval"]);g!=null&&p(e,["googleSearchRetrieval"],g);const m=f(n,["urlContext"]);return m!=null&&p(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function j2(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=U2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class O2 extends Bi{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=w2(this.apiClient,e);l=Ee("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=j2(h,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G2(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),t}function B2(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&G2(s,e),e}function z2(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function H2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function F2(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&H2(s,e),e}function q2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K2 extends Bi{constructor(e){super(),this.apiClient=e,this.list=async t=>new vr(Li.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=z2(e);return l=Ee("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=B2(e);r=Ee("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=F2(e);return l=Ee("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=q2(g),v=new AN;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $2 extends Bi{constructor(e,t=new K2(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new vr(Li.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=UI(e);return l=Ee("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=GI(e);return l=Ee("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=OI(e);r=Ee("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=KI(e);return l=Ee("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=$I(g),v=new NN;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=YI(e);return l=Ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=JI(g),v=new wN;return Object.assign(v,m),v})}}async importFile(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=HI(e);return l=Ee("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const m=zI(g),v=new hp;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kT=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return kT=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const Y2=()=>kT();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Pm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws extends Error{}class Bn extends ws{constructor(e,t,s,r){super(`${Bn.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new zd({message:s,cause:Pm(t)});const l=t;return e===400?new RT(e,l,s,r):e===401?new MT(e,l,s,r):e===403?new DT(e,l,s,r):e===404?new PT(e,l,s,r):e===409?new VT(e,l,s,r):e===422?new LT(e,l,s,r):e===429?new UT(e,l,s,r):e>=500?new jT(e,l,s,r):new Bn(e,l,s,r)}}class Vm extends Bn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class zd extends Bn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class IT extends zd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class RT extends Bn{}class MT extends Bn{}class DT extends Bn{}class PT extends Bn{}class VT extends Bn{}class LT extends Bn{}class UT extends Bn{}class jT extends Bn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J2=/^[a-z][a-z0-9+.-]*:/i,Q2=n=>J2.test(n);let Lm=n=>(Lm=Array.isArray,Lm(n));const X2=Lm;let W2=X2;const bb=W2;function Z2(n){if(!n)return!0;for(const e in n)return!1;return!0}function eR(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const tR=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ws(`${n} must be an integer`);if(e<0)throw new ws(`${n} must be a positive integer`);return e},nR=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sR=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const go="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const aR=()=>{var n,e,t,s,r;const l=iR();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":go,"X-Stainless-OS":Tb(Deno.build.os),"X-Stainless-Arch":_b(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":go,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":go,"X-Stainless-OS":Tb((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":_b((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=rR();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":go,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":go,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function rR(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const _b=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Tb=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let zu;const oR=()=>zu??(zu=aR());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function OT(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function cR(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return OT({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function GT(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function uR(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dR=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BT=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function um(n,e,t){return BT(),new File(n,e??"unknown_file",t)}function fR(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const hR=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zT=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",mR=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&zT(n),pR=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function gR(n,e,t){if(BT(),n=await n,mR(n))return n instanceof File?n:um([await n.arrayBuffer()],n.name);if(pR(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),um(await Um(r),e,t)}const s=await Um(n);if(e||(e=fR(n)),!(t!=null&&t.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return um(s,e,t)}async function Um(n){var e,t,s,r,l;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(zT(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(hR(n))try{for(var h=!0,g=Os(n),m;m=await g.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const v=r;c.push(...await Um(v))}}catch(v){t={error:v}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}else{const v=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${yR(n)}`)}return c}function yR(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HT{constructor(e){this._client=e}}HT._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FT(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Eb=Object.freeze(Object.create(null)),xR=(n=FT)=>(function(t,...s){if(t.length===1)return t[0];let r=!1;const l=[],c=t.reduce((v,_,T)=>{var N,w,I;/[?#]/.test(_)&&(r=!0);const C=s[T];let O=(r?encodeURIComponent:n)(""+C);return T!==s.length&&(C==null||typeof C=="object"&&C.toString===((I=Object.getPrototypeOf((w=Object.getPrototypeOf((N=C.hasOwnProperty)!==null&&N!==void 0?N:Eb))!==null&&w!==void 0?w:Eb))===null||I===void 0?void 0:I.toString))&&(O=C+"",l.push({start:v.length+_.length,length:O.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":O)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((T,N)=>{const w=" ".repeat(N.start-v),I="^".repeat(N.length);return v=N.start+N.length,T+w+I},"");throw new ws(`Path parameters result in path with invalid segments:
${l.map(T=>T.error).join(`
`)}
${c}
${_}`)}return c}),Hu=xR(FT);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qT extends HT{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,l=hd(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ws("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ws("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Hu`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Hu`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Hu`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const l=t??{},{api_version:c=this._client.apiVersion}=l,h=hd(l,["api_version"]);return this._client.get(Hu`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}qT._key=Object.freeze(["interactions"]);class KT extends qT{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vR(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let Fu;function bp(n){let e;return(Fu??(e=new globalThis.TextEncoder,Fu=e.encode.bind(e)))(n)}let qu;function Sb(n){let e;return(qu??(e=new globalThis.TextDecoder,qu=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?bp(e):e;this.buffer=vR([this.buffer,t]);const s=[];let r;for(;(r=bR(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Sb(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=Sb(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Hd.NEWLINE_CHARS=new Set([`
`,"\r"]);Hd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bR(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function _R(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const md={off:0,error:200,warn:300,info:400,debug:500},Ab=(n,e,t)=>{if(n){if(eR(md,n))return n;jn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(md))}`)}};function $l(){}function Ku(n,e,t){return!e||md[n]>md[t]?$l:e[n].bind(e)}const TR={error:$l,warn:$l,info:$l,debug:$l};let Nb=new WeakMap;function jn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return TR;const r=Nb.get(t);if(r&&r[0]===s)return r[1];const l={error:Ku("error",t,s),warn:Ku("warn",t,s),info:Ku("info",t,s),debug:Ku("debug",t,s)};return Nb.set(t,[s,l]),l}const cr=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class To{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const l=s?jn(s):console;function c(){return js(this,arguments,function*(){var g,m,v,_;if(r)throw new ws("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var N=!0,w=Os(ER(e,t)),I;I=yield ze(w.next()),g=I.done,!g;N=!0){_=I.value,N=!1;const C=_;if(!T)if(C.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield ze(JSON.parse(C.data))}catch(O){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),O}}}catch(C){m={error:C}}finally{try{!N&&!g&&(v=w.return)&&(yield ze(v.call(w)))}finally{if(m)throw m.error}}T=!0}catch(C){if(Dm(C))return yield ze(void 0);throw C}finally{T||t.abort()}})}return new To(c,t,s)}static fromReadableStream(e,t,s){let r=!1;function l(){return js(this,arguments,function*(){var g,m,v,_;const T=new Hd,N=GT(e);try{for(var w=!0,I=Os(N),C;C=yield ze(I.next()),g=C.done,!g;w=!0){_=C.value,w=!1;const O=_;for(const j of T.decode(O))yield yield ze(j)}}catch(O){m={error:O}}finally{try{!w&&!g&&(v=I.return)&&(yield ze(v.call(I)))}finally{if(m)throw m.error}}for(const O of T.flush())yield yield ze(O)})}function c(){return js(this,arguments,function*(){var g,m,v,_;if(r)throw new ws("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var N=!0,w=Os(l()),I;I=yield ze(w.next()),g=I.done,!g;N=!0){_=I.value,N=!1;const C=_;T||C&&(yield yield ze(JSON.parse(C)))}}catch(C){m={error:C}}finally{try{!N&&!g&&(v=w.return)&&(yield ze(v.call(w)))}finally{if(m)throw m.error}}T=!0}catch(C){if(Dm(C))return yield ze(void 0);throw C}finally{T||t.abort()}})}return new To(c,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),t.push(c)}return l.shift()}});return[new To(()=>r(e),this.controller,this.client),new To(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return OT({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await t.next();if(l)return s.close();const c=bp(JSON.stringify(r)+`
`);s.enqueue(c)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function ER(n,e){return js(this,arguments,function*(){var s,r,l,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ws("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ws("Attempted to iterate over a response with no body");const h=new AR,g=new Hd,m=GT(n.body);try{for(var v=!0,_=Os(SR(m)),T;T=yield ze(_.next()),s=T.done,!s;v=!0){c=T.value,v=!1;const N=c;for(const w of g.decode(N)){const I=h.decode(w);I&&(yield yield ze(I))}}}catch(N){r={error:N}}finally{try{!v&&!s&&(l=_.return)&&(yield ze(l.call(_)))}finally{if(r)throw r.error}}for(const N of g.flush()){const w=h.decode(N);w&&(yield yield ze(w))}})}function SR(n){return js(this,arguments,function*(){var t,s,r,l;let c=new Uint8Array;try{for(var h=!0,g=Os(n),m;m=yield ze(g.next()),t=m.done,!t;h=!0){l=m.value,h=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?bp(v):v;let T=new Uint8Array(c.length+_.length);T.set(c),T.set(_,c.length),c=T;let N;for(;(N=_R(c))!==-1;)yield yield ze(c.slice(0,N)),c=c.slice(N)}}catch(v){s={error:v}}finally{try{!h&&!t&&(r=g.return)&&(yield ze(r.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield ze(c))})}class AR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=NR(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function NR(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wR(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return jn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):To.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return jn(n).debug(`[${s}] response parsed`,cr({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _p extends Promise{constructor(e,t,s=wR){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new _p(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $T=Symbol("brand.privateNullableHeaders");function*CR(n){if(!n)return;if($T in n){const{values:s,nulls:r}=n;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():bb(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=bb(s[1])?s[1]:[s[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,h])}}const Kl=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[l,c]of CR(s)){const h=l.toLowerCase();r.has(h)||(e.delete(l),r.add(h)),c===null?(e.delete(l),t.add(h)):(e.append(l,c),t.delete(h))}}return{[$T]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dm=n=>{var e,t,s,r,l,c;if(typeof globalThis.process<"u")return(s=(t=(e=eN)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var YT;class Fd{constructor(e){var t,s,r,l,c,h,g,{baseURL:m=dm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=dm("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=hd(e,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(s=N.timeout)!==null&&s!==void 0?s:Fd.DEFAULT_TIMEOUT,this.logger=(r=N.logger)!==null&&r!==void 0?r:console;const w="warn";this.logLevel=w,this.logLevel=(c=(l=Ab(N.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Ab(dm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:w,this.fetchOptions=N.fetchOptions,this.maxRetries=(h=N.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=N.fetch)!==null&&g!==void 0?g:lR(),this.encoder=dR,this._options=N,this.apiKey=v,this.apiVersion=_,this.clientAdapter=N.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Kl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Kl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Kl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new ws(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${go}`}defaultIdempotencyKey(){return`stainless-node-retry-${Y2()}`}makeStatusError(e,t,s,r){return Bn.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=Q2(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return Z2(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new _p(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,l,c;const h=await e,g=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(h);const{req:m,url:v,timeout:_}=await this.buildRequest(h,{retryCount:g-t});await this.prepareRequest(m,{url:v,options:h});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=s===void 0?"":`, retryOf: ${s}`,w=Date.now();if(jn(this).debug(`[${T}] sending request`,cr({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:m.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new Vm;const I=new AbortController,C=await this.fetchWithTimeout(v,m,_,I).catch(Pm),O=Date.now();if(C instanceof globalThis.Error){const G=`retrying, ${t} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new Vm;const te=Dm(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(t)return jn(this).info(`[${T}] connection ${te?"timed out":"failed"} - ${G}`),jn(this).debug(`[${T}] connection ${te?"timed out":"failed"} (${G})`,cr({retryOfRequestLogID:s,url:v,durationMs:O-w,message:C.message})),this.retryRequest(h,t,s??T);throw jn(this).info(`[${T}] connection ${te?"timed out":"failed"} - error; no more retries left`),jn(this).debug(`[${T}] connection ${te?"timed out":"failed"} (error; no more retries left)`,cr({retryOfRequestLogID:s,url:v,durationMs:O-w,message:C.message})),te?new IT:new zd({cause:C})}const j=`[${T}${N}] ${m.method} ${v} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${O-w}ms`;if(!C.ok){const G=await this.shouldRetry(C);if(t&&G){const R=`retrying, ${t} attempts remaining`;return await uR(C.body),jn(this).info(`${j} - ${R}`),jn(this).debug(`[${T}] response error (${R})`,cr({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:O-w})),this.retryRequest(h,t,s??T,C.headers)}const te=G?"error; no more retries left":"error; not retryable";jn(this).info(`${j} - ${te}`);const ae=await C.text().catch(R=>Pm(R).message),le=nR(ae),M=le?void 0:ae;throw jn(this).debug(`[${T}] response error (${te})`,cr({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:M,durationMs:Date.now()-w})),this.makeStatusError(C.status,le,M,C.headers)}return jn(this).info(j),jn(this).debug(`[${T}] response start`,cr({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:O-w})),{response:C,options:h,controller:I,requestLogID:T,retryOfRequestLogID:s,startTime:w}}async fetchWithTimeout(e,t,s,r){const l=t||{},{signal:c,method:h}=l,g=hd(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){var l;let c;const h=r==null?void 0:r.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const g=r==null?void 0:r.get("retry-after");if(g&&!c){const m=parseFloat(g);Number.isNaN(m)?c=Date.parse(g)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await sR(c),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,l;const c=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:v}=c,_=this.buildURL(g,m,v);"timeout"in c&&tR("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:N}=this.buildBody({options:c}),w=await this.buildHeaders({options:e,method:h,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:w},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=Kl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),oR()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Kl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:cR(e)}:this.encoder({body:e,headers:s})}}Fd.DEFAULT_TIMEOUT=6e4;class hn extends Fd{constructor(){super(...arguments),this.interactions=new KT(this)}}YT=hn;hn.GeminiNextGenAPIClient=YT;hn.GeminiNextGenAPIClientError=ws;hn.APIError=Bn;hn.APIConnectionError=zd;hn.APIConnectionTimeoutError=IT;hn.APIUserAbortError=Vm;hn.NotFoundError=PT;hn.ConflictError=VT;hn.RateLimitError=UT;hn.BadRequestError=RT;hn.AuthenticationError=MT;hn.InternalServerError=jT;hn.PermissionDeniedError=DT;hn.UnprocessableEntityError=LT;hn.toFile=gR;hn.Interactions=KT;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kR(n,e){const t={},s=f(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function IR(n,e){const t={},s=f(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function RR(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&p(t,["sdkHttpResponse"],s),t}function MR(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&p(t,["sdkHttpResponse"],s),t}function DR(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&p(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(n,["batchSize"]);e!==void 0&&h!=null&&p(e,["tuningTask","hyperparameters","batchSize"],h);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function PR(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const N=f(n,["validationDataset"]);e!==void 0&&N!=null&&p(e,["supervisedTuningSpec"],wb(N))}else if(r==="PREFERENCE_TUNING"){const N=f(n,["validationDataset"]);e!==void 0&&N!=null&&p(e,["preferenceOptimizationSpec"],wb(N))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&p(e,["description"],c);let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const N=f(n,["epochCount"]);e!==void 0&&N!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],N)}else if(h==="PREFERENCE_TUNING"){const N=f(n,["epochCount"]);e!==void 0&&N!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],N)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const N=f(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],N)}else if(g==="PREFERENCE_TUNING"){const N=f(n,["learningRateMultiplier"]);e!==void 0&&N!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],N)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const N=f(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],N)}else if(m==="PREFERENCE_TUNING"){const N=f(n,["exportLastCheckpointOnly"]);e!==void 0&&N!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],N)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const N=f(n,["adapterSize"]);e!==void 0&&N!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],N)}else if(v==="PREFERENCE_TUNING"){const N=f(n,["adapterSize"]);e!==void 0&&N!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],N)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(n,["labels"]);e!==void 0&&_!=null&&p(e,["labels"],_);const T=f(n,["beta"]);return e!==void 0&&T!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function VR(n,e){const t={},s=f(n,["baseModel"]);s!=null&&p(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&KR(l);const c=f(n,["config"]);return c!=null&&DR(c,t),t}function LR(n,e){const t={},s=f(n,["baseModel"]);s!=null&&p(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&$R(l,t,e);const c=f(n,["config"]);return c!=null&&PR(c,t,e),t}function UR(n,e){const t={},s=f(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function jR(n,e){const t={},s=f(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function OR(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&p(e,["_query","filter"],c),s}function GR(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&p(e,["_query","filter"],c),s}function BR(n,e){const t={},s=f(n,["config"]);return s!=null&&OR(s,t),t}function zR(n,e){const t={},s=f(n,["config"]);return s!=null&&GR(s,t),t}function HR(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>JT(h))),p(t,["tuningJobs"],c)}return t}function FR(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>jm(h))),p(t,["tuningJobs"],c)}return t}function qR(n,e){const t={},s=f(n,["name"]);s!=null&&p(t,["model"],s);const r=f(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function KR(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["examples","examples"],r)}return t}function $R(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function JT(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&p(t,["name"],r);const l=f(n,["state"]);l!=null&&p(t,["state"],dT(l));const c=f(n,["createTime"]);c!=null&&p(t,["createTime"],c);const h=f(n,["tuningTask","startTime"]);h!=null&&p(t,["startTime"],h);const g=f(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&p(t,["description"],v);const _=f(n,["baseModel"]);_!=null&&p(t,["baseModel"],_);const T=f(n,["_self"]);return T!=null&&p(t,["tunedModel"],qR(T)),t}function jm(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&p(t,["name"],r);const l=f(n,["state"]);l!=null&&p(t,["state"],dT(l));const c=f(n,["createTime"]);c!=null&&p(t,["createTime"],c);const h=f(n,["startTime"]);h!=null&&p(t,["startTime"],h);const g=f(n,["endTime"]);g!=null&&p(t,["endTime"],g);const m=f(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&p(t,["error"],v);const _=f(n,["description"]);_!=null&&p(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const N=f(n,["tunedModel"]);N!=null&&p(t,["tunedModel"],N);const w=f(n,["preTunedModel"]);w!=null&&p(t,["preTunedModel"],w);const I=f(n,["supervisedTuningSpec"]);I!=null&&p(t,["supervisedTuningSpec"],I);const C=f(n,["preferenceOptimizationSpec"]);C!=null&&p(t,["preferenceOptimizationSpec"],C);const O=f(n,["tuningDataStats"]);O!=null&&p(t,["tuningDataStats"],O);const j=f(n,["encryptionSpec"]);j!=null&&p(t,["encryptionSpec"],j);const G=f(n,["partnerModelTuningSpec"]);G!=null&&p(t,["partnerModelTuningSpec"],G);const te=f(n,["customBaseModel"]);te!=null&&p(t,["customBaseModel"],te);const ae=f(n,["experiment"]);ae!=null&&p(t,["experiment"],ae);const le=f(n,["labels"]);le!=null&&p(t,["labels"],le);const M=f(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const D=f(n,["pipelineJob"]);D!=null&&p(t,["pipelineJob"],D);const R=f(n,["serviceAccount"]);R!=null&&p(t,["serviceAccount"],R);const U=f(n,["tunedModelDisplayName"]);U!=null&&p(t,["tunedModelDisplayName"],U);const L=f(n,["veoTuningSpec"]);return L!=null&&p(t,["veoTuningSpec"],L),t}function YR(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&p(t,["name"],r);const l=f(n,["metadata"]);l!=null&&p(t,["metadata"],l);const c=f(n,["done"]);c!=null&&p(t,["done"],c);const h=f(n,["error"]);return h!=null&&p(t,["error"],h),t}function wb(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&p(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JR extends Bi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vr(Li.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Nm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=jR(e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>jm(v))}else{const m=UR(e);return h=Ee("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>JT(v))}}async listInternal(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=zR(e);return h=Ee("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=FR(v),T=new Zv;return Object.assign(T,_),T})}else{const m=BR(e);return h=Ee("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=HR(v),T=new Zv;return Object.assign(T,_),T})}}async cancel(e){var t,s,r,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=IR(e);return h=Ee("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=MR(v),T=new eb;return Object.assign(T,_),T})}else{const m=kR(e);return h=Ee("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=RR(v),T=new eb;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=LR(e,e);return l=Ee("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>jm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=VR(e);return l=Ee("tunedModels",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),r.then(g=>YR(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QR{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const XR=1024*1024*8,WR=3,ZR=1e3,eM=2,pd="x-goog-upload-status";async function tM(n,e,t){var s;const r=await QT(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function nM(n,e,t){var s;const r=await QT(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[pd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=aT(l),h=new mp;return Object.assign(h,c),h}async function QT(n,e,t){var s,r;let l=0,c=0,h=new wm(new Response),g="upload";for(l=n.size;c<l;){const m=Math.min(XR,l-c),v=n.slice(c,c+m);c+m>=l&&(g+=", finalize");let _=0,T=ZR;for(;_<WR&&(h=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[pd]));)_++,await iM(T),T=T*eM;if(c+=m,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[pd])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function sM(n){return{size:n.size,type:n.type}}function iM(n){return new Promise(e=>setTimeout(e,n))}class aM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tM(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rM{create(e,t,s){return new oM(e,t,s)}}class oM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cb="x-goog-api-key";class lM{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Cb)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Cb,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cM="gl-node/";class uM{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new hn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=iN(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new lM(this.apiKey);this.apiClient=new s2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cM+"web",uploader:new aM,downloader:new QR}),this.models=new T2(this.apiClient),this.live=new g2(this.apiClient,r,new rM),this.batches=new Dw(this.apiClient),this.chats=new mC(this.models,this.apiClient),this.caches=new dC(this.apiClient),this.files=new SC(this.apiClient),this.operations=new E2(this.apiClient),this.authTokens=new O2(this.apiClient),this.tunings=new JR(this.apiClient),this.fileSearchStores=new $2(this.apiClient)}}const dM=new uM({apiKey:"PLACEHOLDER_API_KEY"});function kb(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const XT={type:_e.OBJECT,properties:{id:{type:_e.STRING},type:{type:_e.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:_e.STRING},options:{type:_e.ARRAY,items:{type:_e.STRING}},correctAnswer:{type:_e.STRING},tkpPoints:{type:_e.ARRAY,items:{type:_e.OBJECT,properties:{option:{type:_e.STRING},points:{type:_e.INTEGER}}}},explanation:{type:_e.STRING},shortcut:{type:_e.STRING},metadata:{type:_e.OBJECT,properties:{difficulty:{type:_e.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:_e.INTEGER},topic:{type:_e.STRING},subtest:{type:_e.STRING},trapPattern:{type:_e.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},fM={type:_e.OBJECT,properties:{questions:{type:_e.ARRAY,items:XT}},required:["questions"]};async function mi(n,e,t){const s="gemini-3-flash-preview",r={temperature:.85,topP:.95,topK:40};e&&(r.responseMimeType="application/json",r.responseSchema=e);const l=[];t&&l.push({inlineData:{mimeType:"application/pdf",data:t}}),l.push({text:n});try{const h=(await dM.models.generateContent({model:s,contents:{role:"user",parts:l},config:r})).text;if(!h)throw new Error("Empty response from AI");if(e)try{let g=h.trim();return g.startsWith("```json")?g=g.replace(/^```json\n?/,"").replace(/\n?```$/,""):g.startsWith("```")&&(g=g.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(g)}catch(g){console.error("JSON Parse Error",g);const m=h.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return m?JSON.parse(m[0]):h}return h}catch(c){throw console.error("Gemini API Error:",c),c}}function hM(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0,n.options=kb(n.options)),n}const On=async(n,e,t,s=5,r=[],l,c,h)=>{let g="",m;const v="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let _=fM;if(e==="GENERAL"&&c){const w=t,I=w.type==="topic"?`Topic: ${w.content}`:"Material Content";w.type==="pdf"&&(m=w.content);const C=w.difficultyPreference||"MEDIUM",O=`DIFFICULTY LEVEL: ${C}. ${C==="HARD"?"Use complex analysis/HOTS.":C==="EASY"?"Use straightforward recall.":""}`;c==="ACTIVE_RECALL"?g=`Create ${s} Active Recall questions (Short Answer format) based on this: ${I}. 
          ${v} ${O}
          Questions must be specific and require recall of key facts/concepts.`:c==="PBL"?g=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${v} ${O}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${I}. 
          Each question should be a realistic scenario requiring application of the concept.`:g=`Create ${s} practice questions based on: ${I}. ${v} ${O}`,w.type==="text"&&(g+=`

CONTENT: ${w.content}`)}else{let w="";if(h?(w=`CONTEXT: ${e} - ${l||""}. DIFFICULTY: ${h}.`,h==="HOTS"&&(w+=" QUESTIONS MUST BE ADVANCED AND DIFFICULT (High Order Thinking Skills). Distractors/options must be plausible and tricky. Avoid easy questions. Questions must require analysis, evaluation, or creation.")):e==="SKD"&&l?w=`CONTEXT: SKD ${l}. DIFFICULTY: STANDARD TO HOTS.`:e==="UTBK"?w="CONTEXT: UTBK SNBT 2025. DIFFICULTY: ADAPTIVE (HOTS).":e==="TPA"?w="CONTEXT: TPA (Tes Potensi Akademik) & TBI. High Logic Requirement.":e==="PSIKOTEST"?w=`
          CONTEXT: PROFESSIONAL PSYCHOMETRIC TEST (High IQ & Logical Reasoning).
          Generate ${s} questions distributed among these 4 subtest types:

          1. **Number Series (Deret Angka)**: 
             - Create complex sequences (e.g., Fibonacci, multi-level differences, alternating patterns).
             - Example: 2, 5, 10, 17, ... (n^2 + 1).

          2. **Verbal Analogy (Analogi Verbal)**:
             - Create 'Word A : Word B = Word C : ?' questions.
             - Relationships should be subtle (e.g., degree, cause-effect, antonyms).
             - Example: "Api : Panas = Es : Dingin" (Cause-Effect/Property).
          
          3. **Formal Logic (Silogisme)**:
             - Create syllogisms with 2 or 3 premises.
             - Use 'All', 'Some', 'None' quantifiers.
             - Ensure options have logical distractors.
             - Example: "Semua A adalah B. Sebagian B adalah C. Maka..."
          
          4. **Figural/Spatial (Tes Spasial)**:
             - Since this is text-based, describe the pattern in text format.
             - E.g., "Image A rotates 90 degrees clockwise. Image B is mirror of A. Image C is..."
          
          Instruction: "Options must be tricky. Explanation must be clear step-by-step logic."
          `:e==="INTERVIEW"?(w="CONTEXT: JOB/SCHOOL ADMISSION INTERVIEW.",_={type:_e.OBJECT,properties:{questions:{type:_e.ARRAY,items:{type:_e.OBJECT,properties:{id:{type:_e.STRING},type:{type:_e.STRING,enum:["long_text"]},content:{type:_e.STRING},explanation:{type:_e.STRING},metadata:{type:_e.OBJECT,properties:{topic:{type:_e.STRING}}}},required:["content","type"]}}}}):w="Standard difficulty.",e==="INTERVIEW")g=`Roleplay Task: Act as a professional HR Interviewer.
        Context: ${t}.
        Generate ${s} distinct interview questions. 
        Style: Conversational, direct, and engaging.
        Questions should range from introduction to behavioral/situational.
        Metadata subtest: "Interview".`;else{const I=`
            Generate ${s} questions.
            ${w}
            MANDATORY: Provide a DETAILED 'explanation' for the answer.
            MANDATORY METADATA:
            - idealTimeSeconds: Realistic time (e.g. 60s for Logic, 30s for Verbal).
            - subtest: Use specific names like "Deret Angka", "Analogi Verbal", "Silogisme", "Tes Spasial".
        `,C=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&h==="TKP";let O="";C&&(O=`
           CRITICAL RULES FOR TKP (Tes Karakteristik Pribadi):
           1. **AMBIGUITY & CONFUSION**: The distinction between the 5-point and 4-point answers MUST be very subtle.
           2. **SCORING LOGIC**:
              - 5 Points: Best answer (professional, proactive, leadership).
              - 4 Points: Good answer (standard procedure).
              - 3 Points: Neutral.
              - 1-2 Points: Negative.
           5. **FORMAT**: Provide 'tkpPoints' list mapping EACH option to a score 1-5.
           `),n===Ge.WEAKNESS?g=`WEAKNESS ATTACK MODE. User weak in: ${r.join(", ")}. ${w} ${O}`:n===Ge.ACTIVE_RECALL?g=`ACTIVE RECALL. Type: "short_answer". ${w}`:g=`TRY OUT / PRACTICE.
            Context: ${e} - ${JSON.stringify(t)}.
            ${I}
            ${O}`}}return((await mi(g,_,m)).questions||[]).filter(w=>!!w).map(w=>{const I=hM(w);return e==="INTERVIEW"&&(I.type="long_text",I.options=[]),I})},mM=async(n,e,t)=>{const s={type:_e.OBJECT,properties:{score:{type:_e.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:_e.BOOLEAN,description:"True if score > 70"},feedback:{type:_e.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},r=`Evaluate this answer. 
  Question: ${n}
  Correct Answer / Key Concept: ${e}
  User Answer: ${t}
  
  Provide a score (0-100), boolean correctness, and feedback.`;return mi(r,s)},pM=async n=>{const e=`The user is weak in these topics: ${n.join(", ")}. Provide a concise, actionable study plan (3 paragraphs max) to improve.`;return mi(e)},gM=async(n,e)=>{const t={type:_e.OBJECT,properties:{score:{type:_e.INTEGER},feedback:{type:_e.STRING},improvedAnswer:{type:_e.STRING},keyPointsCovered:{type:_e.ARRAY,items:{type:_e.STRING}},toneAnalysis:{type:_e.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate this job interview answer given by a candidate.
  Question: ${n}
  Candidate Answer: ${e}
  
  Act as a senior HR manager. Critique the tone, content, and structure.
  `;return mi(s,t)},yM=async(n,e)=>{const t={type:_e.OBJECT,properties:{understandingScore:{type:_e.INTEGER},simplificationQuality:{type:_e.STRING},missingConcepts:{type:_e.ARRAY,items:{type:_e.STRING}},correction:{type:_e.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate this Feynman Technique explanation. The user is trying to explain "${n}" to a 5-year old.
  Explanation: ${e}`;return mi(s,t)},xM=async n=>n.type==="pdf"&&n.content?await mi("Extract and summarize the main text content from this PDF for study purposes. Ignore headers/footers.",void 0,n.content):n.content,vM=async(n,e)=>{const t=`Context: University Thesis (Skripsi). Topic: ${n}. Task: ${e}. Provide detailed output.`;return mi(t)},bM=async n=>{const e={type:_e.OBJECT,properties:{flashcards:{type:_e.ARRAY,items:{type:_e.OBJECT,properties:{id:{type:_e.STRING},front:{type:_e.STRING},back:{type:_e.STRING}},required:["front","back"]}}}},t=`Create 10 flashcards based on this material: ${n.extractedText||n.content}`;return(await mi(t,e)).flashcards},_M=async n=>{const e={type:_e.OBJECT,properties:{label:{type:_e.STRING},children:{type:_e.ARRAY,items:{type:_e.OBJECT,properties:{label:{type:_e.STRING},children:{type:_e.ARRAY,items:{type:_e.OBJECT,properties:{label:{type:_e.STRING}}}}}}}}},t=`Create a hierarchical mind map structure (JSON) for the topic: ${n.title||n.content.substring(0,50)}. Base it on the content.`;return mi(t,e)},TM=async(n,e,t)=>{const s={type:_e.OBJECT,properties:{topic:{type:_e.STRING},summary:{type:_e.STRING},keyPoints:{type:_e.ARRAY,items:{type:_e.STRING}},question:XT},required:["topic","summary","keyPoints","question"]},r=`Create a Drill Card (Mini Lesson + 1 Question) for ${n} - ${e} ${t?"("+t+")":""}.`;return mi(r,s)},Ib=async n=>{const e=On(Ge.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK)",30,[],n,void 0,"HOTS"),t=On(Ge.SIMULATION,"SKD","Tes Intelegensia Umum (TIU)",35,[],n,void 0,"HOTS"),s=On(Ge.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP)",45,[],n,void 0,"TKP"),[r,l,c]=await Promise.all([e,t,s]);return r.forEach(h=>h.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),l.forEach(h=>h.metadata.subtest="Tes Intelegensia Umum (TIU)"),c.forEach(h=>h.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...r,...l,...c]},Rb=async()=>{const n=On(Ge.SIMULATION,"UTBK","Penalaran Umum (Induktif, Deduktif, Kuantitatif)",30,[],void 0,void 0,"HOTS"),e=On(Ge.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=On(Ge.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=On(Ge.SIMULATION,"UTBK","Pengetahuan Kuantitatif",20,[],void 0,void 0,"HOTS"),r=On(Ge.SIMULATION,"UTBK","Literasi Bahasa Indonesia",25,[],void 0,void 0,"HOTS"),l=On(Ge.SIMULATION,"UTBK","Literasi Bahasa Inggris",25,[],void 0,void 0,"HOTS"),c=On(Ge.SIMULATION,"UTBK","Penalaran Matematika",20,[],void 0,void 0,"HOTS"),[h,g,m,v,_,T,N]=await Promise.all([n,e,t,s,r,l,c]);return h.forEach(w=>w.metadata.subtest="Penalaran Umum"),g.forEach(w=>w.metadata.subtest="Pengetahuan dan Pemahaman Umum"),m.forEach(w=>w.metadata.subtest="Pemahaman Bacaan dan Menulis"),v.forEach(w=>w.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(w=>w.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(w=>w.metadata.subtest="Literasi Bahasa Inggris"),N.forEach(w=>w.metadata.subtest="Penalaran Matematika"),[...h,...g,...m,...v,..._,...T,...N]},EM=async()=>On(Ge.SIMULATION,"TPA","SIMULATION",65,[],void 0,void 0,"HOTS"),SM=async()=>On(Ge.SIMULATION,"PSIKOTEST","SIMULATION",40,[],void 0,void 0,"HOTS"),AM=()=>{};var Mb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},NM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],h=n[t++],g=((r&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ZT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,h=c?n[r+1]:0,g=r+2<n.length,m=g?n[r+2]:0,v=l>>2,_=(l&3)<<4|h>>4;let T=(h&15)<<2|m>>6,N=m&63;g||(N=64,c||(T=64)),s.push(t[v],t[_],t[T],t[N])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],h=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||h==null||m==null||_==null)throw new wM;const T=l<<2|h>>4;if(s.push(T),m!==64){const N=h<<4&240|m>>2;if(s.push(N),_!==64){const w=m<<6&192|_;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CM=function(n){const e=WT(n);return ZT.encodeByteArray(e,!0)},gd=function(n){return CM(n).replace(/\./g,"")},kM=function(n){try{return ZT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=()=>IM().__FIREBASE_DEFAULTS__,MM=()=>{if(typeof process>"u"||typeof Mb>"u")return;const n=Mb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kM(n[1]);return e&&JSON.parse(e)},Tp=()=>{try{return AM()||RM()||MM()||DM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PM=n=>{var e,t;return(t=(e=Tp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},VM=n=>{const e=PM(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},eE=()=>{var n;return(n=Tp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UM(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[gd(JSON.stringify(t)),gd(JSON.stringify(c)),""].join(".")}const Xl={};function OM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Xl))Xl[e]?n.emulator.push(e):n.prod.push(e);return n}function GM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Db=!1;function BM(n,e){if(typeof window>"u"||typeof document>"u"||!Ep(window.location.host)||Xl[n]===e||Xl[n]||Db)return;Xl[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=OM().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Db=!0,c()},T}function v(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=GM(s),N=t("text"),w=document.getElementById(N)||document.createElement("span"),I=t("learnmore"),C=document.getElementById(I)||document.createElement("a"),O=t("preprendIcon"),j=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;h(G),v(C,I);const te=m();g(j,O),G.append(j,w,C,te),document.body.appendChild(G)}l?(w.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HM(){var e;const n=(e=Tp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FM(){return!HM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qM(){try{return typeof indexedDB=="object"}catch{return!1}}function KM(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="FirebaseError";class Oo extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=$M,Object.setPrototypeOf(this,Oo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tE.prototype.create)}}class tE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?YM(l,s):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new Oo(r,h,s)}}function YM(n,e){return n.replace(JM,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const JM=/\{\$([^}]+)}/g;function yd(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],c=e[r];if(Pb(l)&&Pb(c)){if(!yd(l,c))return!1}else if(l!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function Pb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(n){return n&&n._delegate?n._delegate:n}class sc{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new LM;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WM(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ur){return this.instances.has(e)}getOptions(e=ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XM(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ur){return this.component?this.component.multipleInstances?e:ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XM(n){return n===ur?void 0:n}function WM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new QM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const e4={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},t4=lt.INFO,n4={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},s4=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=n4[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nE{constructor(e){this.name=e,this._logLevel=t4,this._logHandler=s4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const i4=(n,e)=>e.some(t=>n instanceof t);let Vb,Lb;function a4(){return Vb||(Vb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r4(){return Lb||(Lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sE=new WeakMap,Om=new WeakMap,iE=new WeakMap,fm=new WeakMap,Sp=new WeakMap;function o4(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ea(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&sE.set(t,n)}).catch(()=>{}),Sp.set(e,n),e}function l4(n){if(Om.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Om.set(n,e)}let Gm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Om.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ea(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function c4(n){Gm=n(Gm)}function u4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(hm(this),e,...t);return iE.set(s,e.sort?e.sort():[e]),Ea(s)}:r4().includes(n)?function(...e){return n.apply(hm(this),e),Ea(sE.get(this))}:function(...e){return Ea(n.apply(hm(this),e))}}function d4(n){return typeof n=="function"?u4(n):(n instanceof IDBTransaction&&l4(n),i4(n,a4())?new Proxy(n,Gm):n)}function Ea(n){if(n instanceof IDBRequest)return o4(n);if(fm.has(n))return fm.get(n);const e=d4(n);return e!==n&&(fm.set(n,e),Sp.set(e,n)),e}const hm=n=>Sp.get(n);function f4(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),h=Ea(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Ea(c.result),g.oldVersion,g.newVersion,Ea(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const h4=["get","getKey","getAll","getAllKeys","count"],m4=["put","add","delete","clear"],mm=new Map;function Ub(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mm.get(e))return mm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=m4.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||h4.includes(t)))return;const l=async function(c,...h){const g=this.transaction(c,r?"readwrite":"readonly");let m=g.store;return s&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),r&&g.done]))[0]};return mm.set(e,l),l}c4(n=>({...n,get:(e,t,s)=>Ub(e,t)||n.get(e,t,s),has:(e,t)=>!!Ub(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g4(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function g4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bm="@firebase/app",jb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new nE("@firebase/app"),y4="@firebase/app-compat",x4="@firebase/analytics-compat",v4="@firebase/analytics",b4="@firebase/app-check-compat",_4="@firebase/app-check",T4="@firebase/auth",E4="@firebase/auth-compat",S4="@firebase/database",A4="@firebase/data-connect",N4="@firebase/database-compat",w4="@firebase/functions",C4="@firebase/functions-compat",k4="@firebase/installations",I4="@firebase/installations-compat",R4="@firebase/messaging",M4="@firebase/messaging-compat",D4="@firebase/performance",P4="@firebase/performance-compat",V4="@firebase/remote-config",L4="@firebase/remote-config-compat",U4="@firebase/storage",j4="@firebase/storage-compat",O4="@firebase/firestore",G4="@firebase/ai",B4="@firebase/firestore-compat",z4="firebase",H4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="[DEFAULT]",F4={[Bm]:"fire-core",[y4]:"fire-core-compat",[v4]:"fire-analytics",[x4]:"fire-analytics-compat",[_4]:"fire-app-check",[b4]:"fire-app-check-compat",[T4]:"fire-auth",[E4]:"fire-auth-compat",[S4]:"fire-rtdb",[A4]:"fire-data-connect",[N4]:"fire-rtdb-compat",[w4]:"fire-fn",[C4]:"fire-fn-compat",[k4]:"fire-iid",[I4]:"fire-iid-compat",[R4]:"fire-fcm",[M4]:"fire-fcm-compat",[D4]:"fire-perf",[P4]:"fire-perf-compat",[V4]:"fire-rc",[L4]:"fire-rc-compat",[U4]:"fire-gcs",[j4]:"fire-gcs-compat",[O4]:"fire-fst",[B4]:"fire-fst-compat",[G4]:"fire-vertex","fire-js":"fire-js",[z4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,q4=new Map,Hm=new Map;function Ob(n,e){try{n.container.addComponent(e)}catch(t){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vd(n){const e=n.name;if(Hm.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Hm.set(e,n);for(const t of xd.values())Ob(t,n);for(const t of q4.values())Ob(t,n);return!0}function K4(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $4(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sa=new tE("app","Firebase",Y4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=H4;function aE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:zm,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Sa.create("bad-app-name",{appName:String(r)});if(t||(t=eE()),!t)throw Sa.create("no-options");const l=xd.get(r);if(l){if(yd(t,l.options)&&yd(s,l.config))return l;throw Sa.create("duplicate-app",{appName:r})}const c=new ZM(r);for(const g of Hm.values())c.addComponent(g);const h=new J4(t,s,c);return xd.set(r,h),h}function X4(n=zm){const e=xd.get(n);if(!e&&n===zm&&eE())return aE();if(!e)throw Sa.create("no-app",{appName:n});return e}function Ao(n,e,t){let s=F4[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(c.join(" "));return}vd(new sc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="firebase-heartbeat-database",Z4=1,ic="firebase-heartbeat-store";let pm=null;function rE(){return pm||(pm=f4(W4,Z4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ic)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sa.create("idb-open",{originalErrorMessage:n.message})})),pm}async function eD(n){try{const t=(await rE()).transaction(ic),s=await t.objectStore(ic).get(oE(n));return await t.done,s}catch(e){if(e instanceof Oo)Ui.warn(e.message);else{const t=Sa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(t.message)}}}async function Gb(n,e){try{const s=(await rE()).transaction(ic,"readwrite");await s.objectStore(ic).put(e,oE(n)),await s.done}catch(t){if(t instanceof Oo)Ui.warn(t.message);else{const s=Sa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ui.warn(s.message)}}}function oE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1024,nD=30;class sD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aD(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>nD){const c=rD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ui.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bb(),{heartbeatsToSend:s,unsentEntries:r}=iD(this._heartbeatsCache.heartbeats),l=gd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ui.warn(t),""}}}function Bb(){return new Date().toISOString().substring(0,10)}function iD(n,e=tD){const t=[];let s=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),zb(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),zb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class aD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qM()?KM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zb(n){return gd(JSON.stringify({version:2,heartbeats:n})).length}function rD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n){vd(new sc("platform-logger",e=>new p4(e),"PRIVATE")),vd(new sc("heartbeat",e=>new sD(e),"PRIVATE")),Ao(Bm,jb,n),Ao(Bm,jb,"esm2020"),Ao("fire-js","")}oD("");var lD="firebase",cD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ao(lD,cD,"app");var Hb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Aa,lE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function R(){}R.prototype=D.prototype,M.F=D.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(U,L,B){for(var V=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)V[ge-2]=arguments[ge];return D.prototype[L].apply(U,V)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,D,R){R||(R=0);const U=Array(16);if(typeof D=="string")for(var L=0;L<16;++L)U[L]=D.charCodeAt(R++)|D.charCodeAt(R++)<<8|D.charCodeAt(R++)<<16|D.charCodeAt(R++)<<24;else for(L=0;L<16;++L)U[L]=D[R++]|D[R++]<<8|D[R++]<<16|D[R++]<<24;D=M.g[0],R=M.g[1],L=M.g[2];let B=M.g[3],V;V=D+(B^R&(L^B))+U[0]+3614090360&4294967295,D=R+(V<<7&4294967295|V>>>25),V=B+(L^D&(R^L))+U[1]+3905402710&4294967295,B=D+(V<<12&4294967295|V>>>20),V=L+(R^B&(D^R))+U[2]+606105819&4294967295,L=B+(V<<17&4294967295|V>>>15),V=R+(D^L&(B^D))+U[3]+3250441966&4294967295,R=L+(V<<22&4294967295|V>>>10),V=D+(B^R&(L^B))+U[4]+4118548399&4294967295,D=R+(V<<7&4294967295|V>>>25),V=B+(L^D&(R^L))+U[5]+1200080426&4294967295,B=D+(V<<12&4294967295|V>>>20),V=L+(R^B&(D^R))+U[6]+2821735955&4294967295,L=B+(V<<17&4294967295|V>>>15),V=R+(D^L&(B^D))+U[7]+4249261313&4294967295,R=L+(V<<22&4294967295|V>>>10),V=D+(B^R&(L^B))+U[8]+1770035416&4294967295,D=R+(V<<7&4294967295|V>>>25),V=B+(L^D&(R^L))+U[9]+2336552879&4294967295,B=D+(V<<12&4294967295|V>>>20),V=L+(R^B&(D^R))+U[10]+4294925233&4294967295,L=B+(V<<17&4294967295|V>>>15),V=R+(D^L&(B^D))+U[11]+2304563134&4294967295,R=L+(V<<22&4294967295|V>>>10),V=D+(B^R&(L^B))+U[12]+1804603682&4294967295,D=R+(V<<7&4294967295|V>>>25),V=B+(L^D&(R^L))+U[13]+4254626195&4294967295,B=D+(V<<12&4294967295|V>>>20),V=L+(R^B&(D^R))+U[14]+2792965006&4294967295,L=B+(V<<17&4294967295|V>>>15),V=R+(D^L&(B^D))+U[15]+1236535329&4294967295,R=L+(V<<22&4294967295|V>>>10),V=D+(L^B&(R^L))+U[1]+4129170786&4294967295,D=R+(V<<5&4294967295|V>>>27),V=B+(R^L&(D^R))+U[6]+3225465664&4294967295,B=D+(V<<9&4294967295|V>>>23),V=L+(D^R&(B^D))+U[11]+643717713&4294967295,L=B+(V<<14&4294967295|V>>>18),V=R+(B^D&(L^B))+U[0]+3921069994&4294967295,R=L+(V<<20&4294967295|V>>>12),V=D+(L^B&(R^L))+U[5]+3593408605&4294967295,D=R+(V<<5&4294967295|V>>>27),V=B+(R^L&(D^R))+U[10]+38016083&4294967295,B=D+(V<<9&4294967295|V>>>23),V=L+(D^R&(B^D))+U[15]+3634488961&4294967295,L=B+(V<<14&4294967295|V>>>18),V=R+(B^D&(L^B))+U[4]+3889429448&4294967295,R=L+(V<<20&4294967295|V>>>12),V=D+(L^B&(R^L))+U[9]+568446438&4294967295,D=R+(V<<5&4294967295|V>>>27),V=B+(R^L&(D^R))+U[14]+3275163606&4294967295,B=D+(V<<9&4294967295|V>>>23),V=L+(D^R&(B^D))+U[3]+4107603335&4294967295,L=B+(V<<14&4294967295|V>>>18),V=R+(B^D&(L^B))+U[8]+1163531501&4294967295,R=L+(V<<20&4294967295|V>>>12),V=D+(L^B&(R^L))+U[13]+2850285829&4294967295,D=R+(V<<5&4294967295|V>>>27),V=B+(R^L&(D^R))+U[2]+4243563512&4294967295,B=D+(V<<9&4294967295|V>>>23),V=L+(D^R&(B^D))+U[7]+1735328473&4294967295,L=B+(V<<14&4294967295|V>>>18),V=R+(B^D&(L^B))+U[12]+2368359562&4294967295,R=L+(V<<20&4294967295|V>>>12),V=D+(R^L^B)+U[5]+4294588738&4294967295,D=R+(V<<4&4294967295|V>>>28),V=B+(D^R^L)+U[8]+2272392833&4294967295,B=D+(V<<11&4294967295|V>>>21),V=L+(B^D^R)+U[11]+1839030562&4294967295,L=B+(V<<16&4294967295|V>>>16),V=R+(L^B^D)+U[14]+4259657740&4294967295,R=L+(V<<23&4294967295|V>>>9),V=D+(R^L^B)+U[1]+2763975236&4294967295,D=R+(V<<4&4294967295|V>>>28),V=B+(D^R^L)+U[4]+1272893353&4294967295,B=D+(V<<11&4294967295|V>>>21),V=L+(B^D^R)+U[7]+4139469664&4294967295,L=B+(V<<16&4294967295|V>>>16),V=R+(L^B^D)+U[10]+3200236656&4294967295,R=L+(V<<23&4294967295|V>>>9),V=D+(R^L^B)+U[13]+681279174&4294967295,D=R+(V<<4&4294967295|V>>>28),V=B+(D^R^L)+U[0]+3936430074&4294967295,B=D+(V<<11&4294967295|V>>>21),V=L+(B^D^R)+U[3]+3572445317&4294967295,L=B+(V<<16&4294967295|V>>>16),V=R+(L^B^D)+U[6]+76029189&4294967295,R=L+(V<<23&4294967295|V>>>9),V=D+(R^L^B)+U[9]+3654602809&4294967295,D=R+(V<<4&4294967295|V>>>28),V=B+(D^R^L)+U[12]+3873151461&4294967295,B=D+(V<<11&4294967295|V>>>21),V=L+(B^D^R)+U[15]+530742520&4294967295,L=B+(V<<16&4294967295|V>>>16),V=R+(L^B^D)+U[2]+3299628645&4294967295,R=L+(V<<23&4294967295|V>>>9),V=D+(L^(R|~B))+U[0]+4096336452&4294967295,D=R+(V<<6&4294967295|V>>>26),V=B+(R^(D|~L))+U[7]+1126891415&4294967295,B=D+(V<<10&4294967295|V>>>22),V=L+(D^(B|~R))+U[14]+2878612391&4294967295,L=B+(V<<15&4294967295|V>>>17),V=R+(B^(L|~D))+U[5]+4237533241&4294967295,R=L+(V<<21&4294967295|V>>>11),V=D+(L^(R|~B))+U[12]+1700485571&4294967295,D=R+(V<<6&4294967295|V>>>26),V=B+(R^(D|~L))+U[3]+2399980690&4294967295,B=D+(V<<10&4294967295|V>>>22),V=L+(D^(B|~R))+U[10]+4293915773&4294967295,L=B+(V<<15&4294967295|V>>>17),V=R+(B^(L|~D))+U[1]+2240044497&4294967295,R=L+(V<<21&4294967295|V>>>11),V=D+(L^(R|~B))+U[8]+1873313359&4294967295,D=R+(V<<6&4294967295|V>>>26),V=B+(R^(D|~L))+U[15]+4264355552&4294967295,B=D+(V<<10&4294967295|V>>>22),V=L+(D^(B|~R))+U[6]+2734768916&4294967295,L=B+(V<<15&4294967295|V>>>17),V=R+(B^(L|~D))+U[13]+1309151649&4294967295,R=L+(V<<21&4294967295|V>>>11),V=D+(L^(R|~B))+U[4]+4149444226&4294967295,D=R+(V<<6&4294967295|V>>>26),V=B+(R^(D|~L))+U[11]+3174756917&4294967295,B=D+(V<<10&4294967295|V>>>22),V=L+(D^(B|~R))+U[2]+718787259&4294967295,L=B+(V<<15&4294967295|V>>>17),V=R+(B^(L|~D))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(L+(V<<21&4294967295|V>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+B&4294967295}s.prototype.v=function(M,D){D===void 0&&(D=M.length);const R=D-this.blockSize,U=this.C;let L=this.h,B=0;for(;B<D;){if(L==0)for(;B<=R;)r(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<D;)if(U[L++]=M.charCodeAt(B++),L==this.blockSize){r(this,U),L=0;break}}else for(;B<D;)if(U[L++]=M[B++],L==this.blockSize){r(this,U),L=0;break}}this.h=L,this.o+=D},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;D=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=D&255,D/=256;for(this.v(M),M=Array(16),D=0,R=0;R<4;++R)for(let U=0;U<32;U+=8)M[D++]=this.g[R]>>>U&255;return M};function l(M,D){var R=h;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=D(M)}function c(M,D){this.h=D;const R=[];let U=!0;for(let L=M.length-1;L>=0;L--){const B=M[L]|0;U&&B==D||(R[L]=B,U=!1)}this.g=R}var h={};function g(M){return-128<=M&&M<128?l(M,function(D){return new c([D|0],D<0?-1:0)}):new c([M|0],M<0?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return _;if(M<0)return C(m(-M));const D=[];let R=1;for(let U=0;M>=R;U++)D[U]=M/R|0,R*=4294967296;return new c(D,0)}function v(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return C(v(M.substring(1),D));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(D,8));let U=_;for(let B=0;B<M.length;B+=8){var L=Math.min(8,M.length-B);const V=parseInt(M.substring(B,B+L),D);L<8?(L=m(Math.pow(D,L)),U=U.j(L).add(m(V))):(U=U.j(R),U=U.add(m(V)))}return U}var _=g(0),T=g(1),N=g(16777216);n=c.prototype,n.m=function(){if(I(this))return-C(this).m();let M=0,D=1;for(let R=0;R<this.g.length;R++){const U=this.i(R);M+=(U>=0?U:4294967296+U)*D,D*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(w(this))return"0";if(I(this))return"-"+C(this).toString(M);const D=m(Math.pow(M,6));var R=this;let U="";for(;;){const L=te(R,D).g;R=O(R,L.j(D));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=L,w(R))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function w(M){if(M.h!=0)return!1;for(let D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function I(M){return M.h==-1}n.l=function(M){return M=O(this,M),I(M)?-1:w(M)?0:1};function C(M){const D=M.g.length,R=[];for(let U=0;U<D;U++)R[U]=~M.g[U];return new c(R,~M.h).add(T)}n.abs=function(){return I(this)?C(this):this},n.add=function(M){const D=Math.max(this.g.length,M.g.length),R=[];let U=0;for(let L=0;L<=D;L++){let B=U+(this.i(L)&65535)+(M.i(L)&65535),V=(B>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);U=V>>>16,B&=65535,V&=65535,R[L]=V<<16|B}return new c(R,R[R.length-1]&-2147483648?-1:0)};function O(M,D){return M.add(C(D))}n.j=function(M){if(w(this)||w(M))return _;if(I(this))return I(M)?C(this).j(C(M)):C(C(this).j(M));if(I(M))return C(this.j(C(M)));if(this.l(N)<0&&M.l(N)<0)return m(this.m()*M.m());const D=this.g.length+M.g.length,R=[];for(var U=0;U<2*D;U++)R[U]=0;for(U=0;U<this.g.length;U++)for(let L=0;L<M.g.length;L++){const B=this.i(U)>>>16,V=this.i(U)&65535,ge=M.i(L)>>>16,Me=M.i(L)&65535;R[2*U+2*L]+=V*Me,j(R,2*U+2*L),R[2*U+2*L+1]+=B*Me,j(R,2*U+2*L+1),R[2*U+2*L+1]+=V*ge,j(R,2*U+2*L+1),R[2*U+2*L+2]+=B*ge,j(R,2*U+2*L+2)}for(M=0;M<D;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=D;M<2*D;M++)R[M]=0;return new c(R,0)};function j(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function G(M,D){this.g=M,this.h=D}function te(M,D){if(w(D))throw Error("division by zero");if(w(M))return new G(_,_);if(I(M))return D=te(C(M),D),new G(C(D.g),C(D.h));if(I(D))return D=te(M,C(D)),new G(C(D.g),D.h);if(M.g.length>30){if(I(M)||I(D))throw Error("slowDivide_ only works with positive integers.");for(var R=T,U=D;U.l(M)<=0;)R=ae(R),U=ae(U);var L=le(R,1),B=le(U,1);for(U=le(U,2),R=le(R,2);!w(U);){var V=B.add(U);V.l(M)<=0&&(L=L.add(R),B=V),U=le(U,1),R=le(R,1)}return D=O(M,L.j(D)),new G(L,D)}for(L=_;M.l(D)>=0;){for(R=Math.max(1,Math.floor(M.m()/D.m())),U=Math.ceil(Math.log(R)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=m(R),V=B.j(D);I(V)||V.l(M)>0;)R-=U,B=m(R),V=B.j(D);w(B)&&(B=T),L=L.add(B),M=O(M,V)}return new G(L,M)}n.B=function(M){return te(this,M).h},n.and=function(M){const D=Math.max(this.g.length,M.g.length),R=[];for(let U=0;U<D;U++)R[U]=this.i(U)&M.i(U);return new c(R,this.h&M.h)},n.or=function(M){const D=Math.max(this.g.length,M.g.length),R=[];for(let U=0;U<D;U++)R[U]=this.i(U)|M.i(U);return new c(R,this.h|M.h)},n.xor=function(M){const D=Math.max(this.g.length,M.g.length),R=[];for(let U=0;U<D;U++)R[U]=this.i(U)^M.i(U);return new c(R,this.h^M.h)};function ae(M){const D=M.g.length+1,R=[];for(let U=0;U<D;U++)R[U]=M.i(U)<<1|M.i(U-1)>>>31;return new c(R,M.h)}function le(M,D){const R=D>>5;D%=32;const U=M.g.length-R,L=[];for(let B=0;B<U;B++)L[B]=D>0?M.i(B+R)>>>D|M.i(B+R+1)<<32-D:M.i(B+R);return new c(L,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,lE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Aa=c}).apply(typeof Hb<"u"?Hb:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cE,Yl,uE,nd,Fm,dE,fE,hE;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var E=0;E<y.length;++E){var A=y[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=t(this);function r(y,E){if(E)e:{var A=s;y=y.split(".");for(var P=0;P<y.length-1;P++){var Q=y[P];if(!(Q in A))break e;A=A[Q]}y=y[y.length-1],P=A[y],E=E(P),E!=P&&E!=null&&e(A,y,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(y){return y||function(E){var A=[],P;for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&A.push([P,E[P]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function g(y,E,A){return y.call.apply(y.bind,arguments)}function m(y,E,A){return m=g,m.apply(null,arguments)}function v(y,E){var A=Array.prototype.slice.call(arguments,1);return function(){var P=A.slice();return P.push.apply(P,arguments),y.apply(this,P)}}function _(y,E){function A(){}A.prototype=E.prototype,y.Z=E.prototype,y.prototype=new A,y.prototype.constructor=y,y.Ob=function(P,Q,ne){for(var ve=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ve[$e-2]=arguments[$e];return E.prototype[Q].apply(P,ve)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function N(y){const E=y.length;if(E>0){const A=Array(E);for(let P=0;P<E;P++)A[P]=y[P];return A}return[]}function w(y,E){for(let P=1;P<arguments.length;P++){const Q=arguments[P];var A=typeof Q;if(A=A!="object"?A:Q?Array.isArray(Q)?"array":A:"null",A=="array"||A=="object"&&typeof Q.length=="number"){A=y.length||0;const ne=Q.length||0;y.length=A+ne;for(let ve=0;ve<ne;ve++)y[A+ve]=Q[ve]}else y.push(Q)}}class I{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function C(y){c.setTimeout(()=>{throw y},0)}function O(){var y=M;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class j{constructor(){this.h=this.g=null}add(E,A){const P=G.get();P.set(E,A),this.h?this.h.next=P:this.g=P,this.h=P}}var G=new I(()=>new te,y=>y.reset());class te{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,le=!1,M=new j,D=()=>{const y=Promise.resolve(void 0);ae=()=>{y.then(R)}};function R(){for(var y;y=O();){try{y.h.call(y.g)}catch(A){C(A)}var E=G;E.j(y),E.h<100&&(E.h++,y.next=E.g,E.g=y)}le=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const A=()=>{};c.addEventListener("test",A,E),c.removeEventListener("test",A,E)}catch{}return y})();function V(y){return/^[\s\xa0]*$/.test(y)}function ge(y,E){L.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,E)}_(ge,L),ge.prototype.init=function(y,E){const A=this.type=y.type,P=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget,E||(A=="mouseover"?E=y.fromElement:A=="mouseout"&&(E=y.toElement)),this.relatedTarget=E,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),J=0;function ce(y,E,A,P,Q){this.listener=y,this.proxy=null,this.src=E,this.type=A,this.capture=!!P,this.ha=Q,this.key=++J,this.da=this.fa=!1}function be(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Ae(y,E,A){for(const P in y)E.call(A,y[P],P,y)}function xe(y,E){for(const A in y)E.call(void 0,y[A],A,y)}function z(y){const E={};for(const A in y)E[A]=y[A];return E}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(y,E){let A,P;for(let Q=1;Q<arguments.length;Q++){P=arguments[Q];for(A in P)y[A]=P[A];for(let ne=0;ne<se.length;ne++)A=se[ne],Object.prototype.hasOwnProperty.call(P,A)&&(y[A]=P[A])}}function K(y){this.src=y,this.g={},this.h=0}K.prototype.add=function(y,E,A,P,Q){const ne=y.toString();y=this.g[ne],y||(y=this.g[ne]=[],this.h++);const ve=ue(y,E,P,Q);return ve>-1?(E=y[ve],A||(E.fa=!1)):(E=new ce(E,this.src,ne,!!P,Q),E.fa=A,y.push(E)),E};function $(y,E){const A=E.type;if(A in y.g){var P=y.g[A],Q=Array.prototype.indexOf.call(P,E,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(P,Q,1),ne&&(be(E),y.g[A].length==0&&(delete y.g[A],y.h--))}}function ue(y,E,A,P){for(let Q=0;Q<y.length;++Q){const ne=y[Q];if(!ne.da&&ne.listener==E&&ne.capture==!!A&&ne.ha==P)return Q}return-1}var ye="closure_lm_"+(Math.random()*1e6|0),Se={};function Ce(y,E,A,P,Q){if(Array.isArray(E)){for(let ne=0;ne<E.length;ne++)Ce(y,E[ne],A,P,Q);return null}return A=Pn(A),y&&y[Me]?y.J(E,A,h(P)?!!P.capture:!1,Q):Xe(y,E,A,!1,P,Q)}function Xe(y,E,A,P,Q,ne){if(!E)throw Error("Invalid event type");const ve=h(Q)?!!Q.capture:!!Q;let $e=Ke(y);if($e||(y[ye]=$e=new K(y)),A=$e.add(E,A,P,ve,ne),A.proxy)return A;if(P=vt(),A.proxy=P,P.src=y,P.listener=A,y.addEventListener)B||(Q=ve),Q===void 0&&(Q=!1),y.addEventListener(E.toString(),P,Q);else if(y.attachEvent)y.attachEvent(zt(E.toString()),P);else if(y.addListener&&y.removeListener)y.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return A}function vt(){function y(A){return E.call(y.src,y.listener,A)}const E=sn;return y}function it(y,E,A,P,Q){if(Array.isArray(E))for(var ne=0;ne<E.length;ne++)it(y,E[ne],A,P,Q);else P=h(P)?!!P.capture:!!P,A=Pn(A),y&&y[Me]?(y=y.i,ne=String(E).toString(),ne in y.g&&(E=y.g[ne],A=ue(E,A,P,Q),A>-1&&(be(E[A]),Array.prototype.splice.call(E,A,1),E.length==0&&(delete y.g[ne],y.h--)))):y&&(y=Ke(y))&&(E=y.g[E.toString()],y=-1,E&&(y=ue(E,A,P,Q)),(A=y>-1?E[y]:null)&&pt(A))}function pt(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[Me])$(E.i,y);else{var A=y.type,P=y.proxy;E.removeEventListener?E.removeEventListener(A,P,y.capture):E.detachEvent?E.detachEvent(zt(A),P):E.addListener&&E.removeListener&&E.removeListener(P),(A=Ke(E))?($(A,y),A.h==0&&(A.src=null,E[ye]=null)):be(y)}}}function zt(y){return y in Se?Se[y]:Se[y]="on"+y}function sn(y,E){if(y.da)y=!0;else{E=new ge(E,this);const A=y.listener,P=y.ha||y.src;y.fa&&pt(y),y=A.call(P,E)}return y}function Ke(y){return y=y[ye],y instanceof K?y:null}var Nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pn(y){return typeof y=="function"?y:(y[Nn]||(y[Nn]=function(E){return y.handleEvent(E)}),y[Nn])}function jt(){U.call(this),this.i=new K(this),this.M=this,this.G=null}_(jt,U),jt.prototype[Me]=!0,jt.prototype.removeEventListener=function(y,E,A,P){it(this,y,E,A,P)};function Ot(y,E){var A,P=y.G;if(P)for(A=[];P;P=P.G)A.push(P);if(y=y.M,P=E.type||E,typeof E=="string")E=new L(E,y);else if(E instanceof L)E.target=E.target||y;else{var Q=E;E=new L(P,y),Z(E,Q)}Q=!0;let ne,ve;if(A)for(ve=A.length-1;ve>=0;ve--)ne=E.g=A[ve],Q=Fs(ne,P,!0,E)&&Q;if(ne=E.g=y,Q=Fs(ne,P,!0,E)&&Q,Q=Fs(ne,P,!1,E)&&Q,A)for(ve=0;ve<A.length;ve++)ne=E.g=A[ve],Q=Fs(ne,P,!1,E)&&Q}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var y=this.i;for(const E in y.g){const A=y.g[E];for(let P=0;P<A.length;P++)be(A[P]);delete y.g[E],y.h--}}this.G=null},jt.prototype.J=function(y,E,A,P){return this.i.add(String(y),E,!1,A,P)},jt.prototype.K=function(y,E,A,P){return this.i.add(String(y),E,!0,A,P)};function Fs(y,E,A,P){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();let Q=!0;for(let ne=0;ne<E.length;++ne){const ve=E[ne];if(ve&&!ve.da&&ve.capture==A){const $e=ve.listener,Ht=ve.ha||ve.src;ve.fa&&$(y.i,ve),Q=$e.call(Ht,P)!==!1&&Q}}return Q&&!P.defaultPrevented}function Sr(y,E){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(y,E||0)}function Ar(y){y.g=Sr(()=>{y.g=null,y.i&&(y.i=!1,Ar(y))},y.l);const E=y.h;y.h=null,y.m.apply(null,E)}class mn extends U{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(y){U.call(this),this.h=y,this.g={}}_(pi,U);var Ua=[];function Hi(y){Ae(y.g,function(E,A){this.g.hasOwnProperty(A)&&pt(E)},y),y.g={}}pi.prototype.N=function(){pi.Z.N.call(this),Hi(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=c.JSON.stringify,qo=c.JSON.parse,Nr=class{stringify(y){return c.JSON.stringify(y,void 0)}parse(y){return c.JSON.parse(y,void 0)}};function wr(){}function Cr(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function an(){L.call(this,"d")}_(an,L);function zn(){L.call(this,"c")}_(zn,L);var Vt={},ja=null;function he(){return ja=ja||new jt}Vt.Ia="serverreachability";function De(y){L.call(this,Vt.Ia,y)}_(De,L);function Oe(y){const E=he();Ot(E,new De(E))}Vt.STAT_EVENT="statevent";function Qe(y,E){L.call(this,Vt.STAT_EVENT,y),this.stat=E}_(Qe,L);function ke(y){const E=he();Ot(E,new Qe(E,y))}Vt.Ja="timingevent";function at(y,E){L.call(this,Vt.Ja,y),this.size=E}_(at,L);function Ue(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){y()},E)}function Be(){this.g=!0}Be.prototype.ua=function(){this.g=!1};function bt(y,E,A,P,Q,ne){y.info(function(){if(y.g)if(ne){var ve="",$e=ne.split("&");for(let ft=0;ft<$e.length;ft++){var Ht=$e[ft].split("=");if(Ht.length>1){const Dt=Ht[0];Ht=Ht[1];const hs=Dt.split("_");ve=hs.length>=2&&hs[1]=="type"?ve+(Dt+"="+Ht+"&"):ve+(Dt+"=redacted&")}}}else ve=null;else ve=ne;return"XMLHTTP REQ ("+P+") [attempt "+Q+"]: "+E+`
`+A+`
`+ve})}function _t(y,E,A,P,Q,ne,ve){y.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Q+"]: "+E+`
`+A+`
`+ne+" "+ve})}function kt(y,E,A,P){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+es(y,A)+(P?" "+P:"")})}function cn(y,E){y.info(function(){return"TIMEOUT: "+E})}Be.prototype.info=function(){};function es(y,E){if(!y.g)return E;if(!E)return null;try{const ne=JSON.parse(E);if(ne){for(y=0;y<ne.length;y++)if(Array.isArray(ne[y])){var A=ne[y];if(!(A.length<2)){var P=A[1];if(Array.isArray(P)&&!(P.length<1)){var Q=P[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ve=1;ve<P.length;ve++)P[ve]=""}}}}return Vn(ne)}catch{return E}}var pn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fn;function wn(){}_(wn,wr),wn.prototype.g=function(){return new XMLHttpRequest},Fn=new wn;function Cn(y){return encodeURIComponent(String(y))}function Cs(y){var E=1;y=y.split(":");const A=[];for(;E>0&&y.length;)A.push(y.shift()),E--;return y.length&&A.push(y.join(":")),A}function gn(y,E,A,P){this.j=y,this.i=E,this.l=A,this.S=P||1,this.V=new pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}var Lt={},$t={};function qs(y,E,A){y.M=1,y.A=Oa(Jt(E)),y.u=A,y.R=!0,kr(y,null)}function kr(y,E){y.F=Date.now(),Ks(y),y.B=Jt(y.A);var A=y.B,P=y.S;Array.isArray(P)||(P=[String(P)]),Dr(A.i,"t",P),y.C=0,A=y.j.L,y.h=new yn,y.g=Vc(y.j,A?E:null,!y.u),y.P>0&&(y.O=new mn(m(y.Y,y,y.g),y.P)),E=y.V,A=y.g,P=y.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ua[0]=Q.toString()),Q=Ua);for(let ne=0;ne<Q.length;ne++){const ve=Ce(A,Q[ne],P||E.handleEvent,!1,E.h||E);if(!ve)break;E.g[ve.key]=ve}E=y.J?z(y.J):{},y.u?(y.v||(y.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,E)):(y.v="GET",y.g.ea(y.B,y.v,null,E)),Oe(),bt(y.i,y.v,y.B,y.l,y.S,y.u)}gn.prototype.ba=function(y){y=y.target;const E=this.O;E&&Rs(y)==3?E.j():this.Y(y)},gn.prototype.Y=function(y){try{if(y==this.g)e:{const $e=Rs(this.g),Ht=this.g.ya(),ft=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||$e!=4||Ht==7||(Ht==8||ft<=0?Oe(3):Oe(2)),$s(this);var E=this.g.ca();this.X=E;var A=uf(this);if(this.o=E==200,_t(this.i,this.v,this.B,this.l,this.S,$e,E),this.o){if(this.U&&!this.L){t:{if(this.g){var P,Q=this.g;if((P=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(P)){var ne=P;break t}}ne=null}if(y=ne)kt(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ys(this,y);else{this.o=!1,this.m=3,ke(12),ts(this),us(this);break e}}if(this.R){y=!0;let Dt;for(;!this.K&&this.C<A.length;)if(Dt=Tc(this,A),Dt==$t){$e==4&&(this.m=4,ke(14),y=!1),kt(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Lt){this.m=4,ke(15),kt(this.i,this.l,A,"[Invalid Chunk]"),y=!1;break}else kt(this.i,this.l,Dt,null),Ys(this,Dt);if(_c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||A.length!=0||this.h.h||(this.m=1,ke(16),y=!1),this.o=this.o&&y,!y)kt(this.i,this.l,A,"[Invalid Chunked Response]"),ts(this),us(this);else if(A.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),rl(ve),ve.P=!0,ke(11))}}else kt(this.i,this.l,A,null),Ys(this,A);$e==4&&ts(this),this.o&&!this.K&&($e==4?Rc(this.j,this):(this.o=!1,Ks(this)))}else yi(this.g),E==400&&A.indexOf("Unknown SID")>0?(this.m=3,ke(12)):(this.m=0,ke(13)),ts(this),us(this)}}}catch{}finally{}};function uf(y){if(!_c(y))return y.g.la();const E=xn(y.g);if(E==="")return"";let A="";const P=E.length,Q=Rs(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return ts(y),us(y),"";y.h.i=new c.TextDecoder}for(let ne=0;ne<P;ne++)y.h.h=!0,A+=y.h.i.decode(E[ne],{stream:!(Q&&ne==P-1)});return E.length=0,y.h.g+=A,y.C=0,y.h.g}function _c(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Tc(y,E){var A=y.C,P=E.indexOf(`
`,A);return P==-1?$t:(A=Number(E.substring(A,P)),isNaN(A)?Lt:(P+=1,P+A>E.length?$t:(E=E.slice(P,P+A),y.C=P+A,E)))}gn.prototype.cancel=function(){this.K=!0,ts(this)};function Ks(y){y.T=Date.now()+y.H,Ir(y,y.H)}function Ir(y,E){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Ue(m(y.aa,y),E)}function $s(y){y.D&&(c.clearTimeout(y.D),y.D=null)}gn.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(cn(this.i,this.B),this.M!=2&&(Oe(),ke(17)),ts(this),this.m=2,us(this)):Ir(this,this.T-y)};function us(y){y.j.I==0||y.K||Rc(y.j,y)}function ts(y){$s(y);var E=y.O;E&&typeof E.dispose=="function"&&E.dispose(),y.O=null,Hi(y.V),y.g&&(E=y.g,y.g=null,E.abort(),E.dispose())}function Ys(y,E){try{var A=y.j;if(A.I!=0&&(A.g==y||Qs(A.h,y))){if(!y.L&&Qs(A.h,y)&&A.I==3){try{var P=A.Ba.g.parse(E)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Q=P;if(Q[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<y.F)jr(A),Xi(A);else break e;Ka(A),ke(18)}}else A.xa=Q[1],0<A.xa-A.K&&Q[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Ue(m(A.Va,A),6e3));Js(A.h)<=1&&A.ta&&(A.ta=void 0)}else ni(A,11)}else if((y.L||A.g==y)&&jr(A),!V(E))for(Q=A.Ba.g.parse(E),E=0;E<Q.length;E++){let ft=Q[E];const Dt=ft[0];if(!(Dt<=A.K))if(A.K=Dt,ft=ft[1],A.I==2)if(ft[0]=="c"){A.M=ft[1],A.ba=ft[2];const hs=ft[3];hs!=null&&(A.ka=hs,A.j.info("VER="+A.ka));const si=ft[4];si!=null&&(A.za=si,A.j.info("SVER="+A.za));const Ms=ft[5];Ms!=null&&typeof Ms=="number"&&Ms>0&&(P=1.5*Ms,A.O=P,A.j.info("backChannelRequestTimeoutMs_="+P)),P=A;const Ds=y.g;if(Ds){const $a=Ds.g?Ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var ne=P.h;ne.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Yo(ne,ne.h),ne.h=null))}if(P.G){const Or=Ds.g?Ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Or&&(P.wa=Or,gt(P.J,P.G,Or))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-y.F,A.j.info("Handshake RTT: "+A.T+"ms")),P=A;var ve=y;if(P.na=Pc(P,P.L?P.ba:null,P.W),ve.L){Jo(P.h,ve);var $e=ve,Ht=P.O;Ht&&($e.H=Ht),$e.D&&($s($e),Ks($e)),P.g=ve}else kc(P);A.i.length>0&&ti(A)}else ft[0]!="stop"&&ft[0]!="close"||ni(A,7);else A.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?ni(A,7):il(A):ft[0]!="noop"&&A.l&&A.l.qa(ft),A.A=0)}}Oe(4)}catch{}}var Yt=class{constructor(y,E){this.g=y,this.map=E}};function Ko(y){this.l=y||10,c.PerformanceNavigationTiming?(y=c.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $o(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Js(y){return y.h?1:y.g?y.g.size:0}function Qs(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function Yo(y,E){y.g?y.g.add(E):y.h=E}function Jo(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}Ko.prototype.cancel=function(){if(this.i=Qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Qo(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let E=y.i;for(const A of y.g.values())E=E.concat(A.G);return E}return N(y.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rr(y,E){if(y){y=y.split("&");for(let A=0;A<y.length;A++){const P=y[A].indexOf("=");let Q,ne=null;P>=0?(Q=y[A].substring(0,P),ne=y[A].substring(P+1)):Q=y[A],E(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function ns(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;y instanceof ns?(this.l=y.l,un(this,y.j),this.o=y.o,this.g=y.g,Fi(this,y.u),this.h=y.h,Xo(this,wc(y.i)),this.m=y.m):y&&(E=String(y).match(Ec))?(this.l=!1,un(this,E[1]||"",!0),this.o=Xs(E[2]||""),this.g=Xs(E[3]||"",!0),Fi(this,E[4]),this.h=Xs(E[5]||"",!0),Xo(this,E[6]||"",!0),this.m=Xs(E[7]||"")):(this.l=!1,this.i=new Ki(null,this.l))}ns.prototype.toString=function(){const y=[];var E=this.j;E&&y.push(Ga(E,Mr,!0),":");var A=this.g;return(A||E=="file")&&(y.push("//"),(E=this.o)&&y.push(Ga(E,Mr,!0),"@"),y.push(Cn(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&y.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&y.push("/"),y.push(Ga(A,A.charAt(0)=="/"?Wo:Sc,!0))),(A=this.i.toString())&&y.push("?",A),(A=this.m)&&y.push("#",Ga(A,Ac)),y.join("")},ns.prototype.resolve=function(y){const E=Jt(this);let A=!!y.j;A?un(E,y.j):A=!!y.o,A?E.o=y.o:A=!!y.g,A?E.g=y.g:A=y.u!=null;var P=y.h;if(A)Fi(E,y.u);else if(A=!!y.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var Q=E.h.lastIndexOf("/");Q!=-1&&(P=E.h.slice(0,Q+1)+P)}if(Q=P,Q==".."||Q==".")P="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){P=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let ve=0;ve<Q.length;){const $e=Q[ve++];$e=="."?P&&ve==Q.length&&ne.push(""):$e==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),P&&ve==Q.length&&ne.push("")):(ne.push($e),P=!0)}P=ne.join("/")}else P=Q}return A?E.h=P:A=y.i.toString()!=="",A?Xo(E,wc(y.i)):A=!!y.m,A&&(E.m=y.m),E};function Jt(y){return new ns(y)}function un(y,E,A){y.j=A?Xs(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function Fi(y,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);y.u=E}else y.u=null}function Xo(y,E,A){E instanceof Ki?(y.i=E,Pr(y.i,y.l)):(A||(E=Ga(E,qi)),y.i=new Ki(E,y.l))}function gt(y,E,A){y.i.set(E,A)}function Oa(y){return gt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function Xs(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ga(y,E,A){return typeof y=="string"?(y=encodeURI(y).replace(E,qn),A&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function qn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var Mr=/[#\/\?@]/g,Sc=/[#\?:]/g,Wo=/[#\?]/g,qi=/[#\?@]/g,Ac=/#/g;function Ki(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function Kn(y){y.g||(y.g=new Map,y.h=0,y.i&&Rr(y.i,function(E,A){y.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}n=Ki.prototype,n.add=function(y,E){Kn(this),this.i=null,y=$i(this,y);let A=this.g.get(y);return A||this.g.set(y,A=[]),A.push(E),this.h+=1,this};function Nc(y,E){Kn(y),E=$i(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function Zo(y,E){return Kn(y),E=$i(y,E),y.g.has(E)}n.forEach=function(y,E){Kn(this),this.g.forEach(function(A,P){A.forEach(function(Q){y.call(E,Q,P,this)},this)},this)};function el(y,E){Kn(y);let A=[];if(typeof E=="string")Zo(y,E)&&(A=A.concat(y.g.get($i(y,E))));else for(y=Array.from(y.g.values()),E=0;E<y.length;E++)A=A.concat(y[E]);return A}n.set=function(y,E){return Kn(this),this.i=null,y=$i(this,y),Zo(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},n.get=function(y,E){return y?(y=el(this,y),y.length>0?String(y[0]):E):E};function Dr(y,E,A){Nc(y,E),A.length>0&&(y.i=null,y.g.set($i(y,E),N(A)),y.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],E=Array.from(this.g.keys());for(let P=0;P<E.length;P++){var A=E[P];const Q=Cn(A);A=el(this,A);for(let ne=0;ne<A.length;ne++){let ve=Q;A[ne]!==""&&(ve+="="+Cn(A[ne])),y.push(ve)}}return this.i=y.join("&")};function wc(y){const E=new Ki;return E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),E}function $i(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function Pr(y,E){E&&!y.j&&(Kn(y),y.i=null,y.g.forEach(function(A,P){const Q=P.toLowerCase();P!=Q&&(Nc(this,P),Dr(this,Q,A))},y)),y.j=E}function ks(y,E){const A=new Be;if(c.Image){const P=new Image;P.onload=v(ds,A,"TestLoadImage: loaded",!0,E,P),P.onerror=v(ds,A,"TestLoadImage: error",!1,E,P),P.onabort=v(ds,A,"TestLoadImage: abort",!1,E,P),P.ontimeout=v(ds,A,"TestLoadImage: timeout",!1,E,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=y}else E(!1)}function tl(y,E){const A=new Be,P=new AbortController,Q=setTimeout(()=>{P.abort(),ds(A,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:P.signal}).then(ne=>{clearTimeout(Q),ne.ok?ds(A,"TestPingServer: ok",!0,E):ds(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Q),ds(A,"TestPingServer: error",!1,E)})}function ds(y,E,A,P,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),P(A)}catch{}}function Yi(){this.g=new Nr}function Ws(y){this.i=y.Sb||null,this.h=y.ab||!1}_(Ws,wr),Ws.prototype.g=function(){return new Ba(this.i,this.h)};function Ba(y,E){jt.call(this),this.H=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ba,jt),n=Ba.prototype,n.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=E,this.readyState=1,Is(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(E.body=y),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vr(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vr(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?Ji(this):Is(this),this.readyState==3&&Vr(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Ji(this))},n.Na=function(y){this.g&&(this.response=y,Ji(this))},n.ga=function(){this.g&&Ji(this)};function Ji(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Is(y)}n.setRequestHeader=function(y,E){this.A.append(y,E)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,y.push(A[0]+": "+A[1]),A=E.next();return y.join(`\r
`)};function Is(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function fs(y){let E="";return Ae(y,function(A,P){E+=P,E+=":",E+=A,E+=`\r
`}),E}function za(y,E,A){e:{for(P in A){var P=!1;break e}P=!0}P||(A=fs(A),typeof y=="string"?A!=null&&Cn(A):gt(y,E,A))}function Tt(y){jt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Tt,jt);var Zs=/^https?$/i,nl=["POST","PUT"];n=Tt.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,E,A,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fn.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(ne){Ha(this,ne);return}if(y=A||"",A=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Q in P)A.set(Q,P[Q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ne of P.keys())A.set(ne,P.get(ne));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(A.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=c.FormData&&y instanceof c.FormData,!(Array.prototype.indexOf.call(nl,E,void 0)>=0)||P||Q||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ve]of A)this.g.setRequestHeader(ne,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(ne){Ha(this,ne)}};function Ha(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.o=5,sl(y),gi(y)}function sl(y){y.A||(y.A=!0,Ot(y,"complete"),Ot(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Ot(this,"complete"),Ot(this,"abort"),gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),Tt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Fa(this):this.Xa())},n.Xa=function(){Fa(this)};function Fa(y){if(y.h&&typeof l<"u"){if(y.v&&Rs(y)==4)setTimeout(y.Ca.bind(y),0);else if(Ot(y,"readystatechange"),Rs(y)==4){y.h=!1;try{const ne=y.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var P;if(P=ne===0){let ve=String(y.D).match(Ec)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),P=!Zs.test(ve?ve.toLowerCase():"")}A=P}if(A)Ot(y,"complete"),Ot(y,"success");else{y.o=6;try{var Q=Rs(y)>2?y.g.statusText:""}catch{Q=""}y.l=Q+" ["+y.ca()+"]",sl(y)}}finally{gi(y)}}}}function gi(y,E){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const A=y.g;y.g=null,E||Ot(y,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Rs(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Rs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),qo(E)}};function xn(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function yi(y){const E={};y=(y.g&&Rs(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<y.length;P++){if(V(y[P]))continue;var A=Cs(y[P]);const Q=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ne=E[Q]||[];E[Q]=ne,ne.push(A)}xe(E,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(y,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[y]||E}function Qi(y){this.za=0,this.i=[],this.j=new Be,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ei("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ei("baseRetryDelayMs",5e3,y),this.Za=ei("retryDelaySeedMs",1e4,y),this.Ta=ei("forwardChannelMaxRetries",2,y),this.va=ei("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Ko(y&&y.concurrentRequestLimit),this.Ba=new Yi,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qi.prototype,n.ka=8,n.I=1,n.connect=function(y,E,A,P){ke(0),this.W=y,this.H=E||{},A&&P!==void 0&&(this.H.OSID=A,this.H.OAID=P),this.F=this.X,this.J=Pc(this,null,this.W),ti(this)};function il(y){if(Lr(y),y.I==3){var E=y.V++,A=Jt(y.J);if(gt(A,"SID",y.M),gt(A,"RID",E),gt(A,"TYPE","terminate"),qa(y,A),E=new gn(y,y.j,E),E.M=2,E.A=Oa(Jt(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!A&&c.Image&&(new Image().src=E.A,A=!0),A||(E.g=Vc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ks(E)}Dc(y)}function Xi(y){y.g&&(rl(y),y.g.cancel(),y.g=null)}function Lr(y){Xi(y),y.v&&(c.clearTimeout(y.v),y.v=null),jr(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&c.clearTimeout(y.m),y.m=null)}function ti(y){if(!$o(y.h)&&!y.m){y.m=!0;var E=y.Ea;ae||D(),le||(ae(),le=!0),M.add(E,y),y.D=0}}function Ur(y,E){return Js(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=E.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Ue(m(y.Ea,y,E),Mc(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const Q=new gn(this,this.j,y);let ne=this.o;if(this.U&&(ne?(ne=z(ne),Z(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var P=this.i[A];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(E+=P,E>4096){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Cc(this,Q,E),A=Jt(this.J),gt(A,"RID",y),gt(A,"CVER",22),this.G&&gt(A,"X-HTTP-Session-Id",this.G),qa(this,A),ne&&(this.R?E="headers="+Cn(fs(ne))+"&"+E:this.u&&za(A,this.u,ne)),Yo(this.h,Q),this.Ra&&gt(A,"TYPE","init"),this.S?(gt(A,"$req",E),gt(A,"SID","null"),Q.U=!0,qs(Q,A,null)):qs(Q,A,E),this.I=2}}else this.I==3&&(y?al(this,y):this.i.length==0||$o(this.h)||al(this))};function al(y,E){var A;E?A=E.l:A=y.V++;const P=Jt(y.J);gt(P,"SID",y.M),gt(P,"RID",A),gt(P,"AID",y.K),qa(y,P),y.u&&y.o&&za(P,y.u,y.o),A=new gn(y,y.j,A,y.D+1),y.u===null&&(A.J=y.o),E&&(y.i=E.G.concat(y.i)),E=Cc(y,A,1e3),A.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Yo(y.h,A),qs(A,P,E)}function qa(y,E){y.H&&Ae(y.H,function(A,P){gt(E,P,A)}),y.l&&Ae({},function(A,P){gt(E,P,A)})}function Cc(y,E,A){A=Math.min(y.i.length,A);const P=y.l?m(y.l.Ka,y.l,y):null;e:{var Q=y.i;let $e=-1;for(;;){const Ht=["count="+A];$e==-1?A>0?($e=Q[0].g,Ht.push("ofs="+$e)):$e=0:Ht.push("ofs="+$e);let ft=!0;for(let Dt=0;Dt<A;Dt++){var ne=Q[Dt].g;const hs=Q[Dt].map;if(ne-=$e,ne<0)$e=Math.max(0,Q[Dt].g-100),ft=!1;else try{ne="req"+ne+"_"||"";try{var ve=hs instanceof Map?hs:Object.entries(hs);for(const[si,Ms]of ve){let Ds=Ms;h(Ms)&&(Ds=Vn(Ms)),Ht.push(ne+si+"="+encodeURIComponent(Ds))}}catch(si){throw Ht.push(ne+"type="+encodeURIComponent("_badmap")),si}}catch{P&&P(hs)}}if(ft){ve=Ht.join("&");break e}}ve=void 0}return y=y.i.splice(0,A),E.G=y,ve}function kc(y){if(!y.g&&!y.v){y.Y=1;var E=y.Da;ae||D(),le||(ae(),le=!0),M.add(E,y),y.A=0}}function Ka(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Ue(m(y.Da,y),Mc(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,Ic(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Ue(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ke(10),Xi(this),Ic(this))};function rl(y){y.B!=null&&(c.clearTimeout(y.B),y.B=null)}function Ic(y){y.g=new gn(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var E=Jt(y.na);gt(E,"RID","rpc"),gt(E,"SID",y.M),gt(E,"AID",y.K),gt(E,"CI",y.F?"0":"1"),!y.F&&y.ia&&gt(E,"TO",y.ia),gt(E,"TYPE","xmlhttp"),qa(y,E),y.u&&y.o&&za(E,y.u,y.o),y.O&&(y.g.H=y.O);var A=y.g;y=y.ba,A.M=1,A.A=Oa(Jt(E)),A.u=null,A.R=!0,kr(A,y)}n.Va=function(){this.C!=null&&(this.C=null,Xi(this),Ka(this),ke(19))};function jr(y){y.C!=null&&(c.clearTimeout(y.C),y.C=null)}function Rc(y,E){var A=null;if(y.g==E){jr(y),rl(y),y.g=null;var P=2}else if(Qs(y.h,E))A=E.G,Jo(y.h,E),P=1;else return;if(y.I!=0){if(E.o)if(P==1){A=E.u?E.u.length:0,E=Date.now()-E.F;var Q=y.D;P=he(),Ot(P,new at(P,A)),ti(y)}else kc(y);else if(Q=E.m,Q==3||Q==0&&E.X>0||!(P==1&&Ur(y,E)||P==2&&Ka(y)))switch(A&&A.length>0&&(E=y.h,E.i=E.i.concat(A)),Q){case 1:ni(y,5);break;case 4:ni(y,10);break;case 3:ni(y,6);break;default:ni(y,2)}}}function Mc(y,E){let A=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(A*=2),A*E}function ni(y,E){if(y.j.info("Error code "+E),E==2){var A=m(y.bb,y),P=y.Ua;const Q=!P;P=new ns(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||un(P,"https"),Oa(P),Q?ks(P.toString(),A):tl(P.toString(),A)}else ke(2);y.I=0,y.l&&y.l.pa(E),Dc(y),Lr(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function Dc(y){if(y.I=0,y.ja=[],y.l){const E=Qo(y.h);(E.length!=0||y.i.length!=0)&&(w(y.ja,E),w(y.ja,y.i),y.h.i.length=0,N(y.i),y.i.length=0),y.l.oa()}}function Pc(y,E,A){var P=A instanceof ns?Jt(A):new ns(A);if(P.g!="")E&&(P.g=E+"."+P.g),Fi(P,P.u);else{var Q=c.location;P=Q.protocol,E=E?E+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new ns(null);P&&un(ne,P),E&&(ne.g=E),Q&&Fi(ne,Q),A&&(ne.h=A),P=ne}return A=y.G,E=y.wa,A&&E&&gt(P,A,E),gt(P,"VER",y.ka),qa(y,P),P}function Vc(y,E,A){if(E&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Aa&&!y.ma?new Tt(new Ws({ab:A})):new Tt(y.ma),E.Fa(y.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lc(){}n=Lc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Wi(){}Wi.prototype.g=function(y,E){return new Ln(y,E)};function Ln(y,E){jt.call(this),this.g=new Qi(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(y?y["X-WebChannel-Client-Profile"]=E.sa:y={"X-WebChannel-Client-Profile":E.sa}),this.g.U=y,(y=E&&E.Qb)&&!V(y)&&(this.g.u=y),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!V(E)&&(this.g.G=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new xi(this)}_(Ln,jt),Ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){il(this.g)},Ln.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var A={};A.__data__=y,y=A}else this.v&&(A={},A.__data__=Vn(y),y=A);E.i.push(new Yt(E.Ya++,y)),E.I==3&&ti(E)},Ln.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,Ln.Z.N.call(this)};function Uc(y){an.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(const A in E){y=A;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}_(Uc,an);function jc(){zn.call(this),this.status=1}_(jc,zn);function xi(y){this.g=y}_(xi,Lc),xi.prototype.ra=function(){Ot(this.g,"a")},xi.prototype.qa=function(y){Ot(this.g,new Uc(y))},xi.prototype.pa=function(y){Ot(this.g,new jc)},xi.prototype.oa=function(){Ot(this.g,"b")},Wi.prototype.createWebChannel=Wi.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,hE=function(){return new Wi},fE=function(){return he()},dE=Vt,Fm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,nd=pn,Hn.COMPLETE="complete",uE=Hn,Cr.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",jt.prototype.listen=jt.prototype.J,Yl=Cr,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,cE=Tt}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const Fb="@firebase/firestore",qb="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new nE("@firebase/firestore");function yo(){return mr.logLevel}function Ne(n,...e){if(mr.logLevel<=lt.DEBUG){const t=e.map(Ap);mr.debug(`Firestore (${Go}): ${n}`,...t)}}function ji(n,...e){if(mr.logLevel<=lt.ERROR){const t=e.map(Ap);mr.error(`Firestore (${Go}): ${n}`,...t)}}function Io(n,...e){if(mr.logLevel<=lt.WARN){const t=e.map(Ap);mr.warn(`Firestore (${Go}): ${n}`,...t)}}function Ap(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,mE(n,s,t)}function mE(n,e,t){let s=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ji(s),new Error(s)}function mt(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||mE(e,r,s)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Oo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Rn.UNAUTHENTICATED)))}shutdown(){}}class dD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fD{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let s=this.i;const r=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Na,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},h=g=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>h(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Na)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(mt(typeof s.accessToken=="string",31837,{l:s}),new pE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class hD{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mD{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new hD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$4(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const s=l=>{l.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Kb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Kb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=gD(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function nt(n,e){return n<e?-1:n>e?1:0}function qm(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return gm(r)===gm(l)?nt(r,l):gm(r)?1:-1}return nt(n.length,e.length)}const yD=55296,xD=57343;function gm(n){const e=n.charCodeAt(0);return e>=yD&&e<=xD}function Ro(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="__name__";class li{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&je(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=li.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return nt(e.length,t.length)}static compareSegments(e,t){const s=li.isNumericId(e),r=li.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?li.extractNumericId(e).compare(li.extractNumericId(t)):qm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Aa.fromString(e.substring(4,e.length-2))}}class Ct extends li{construct(e,t,s){return new Ct(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new we(me.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new Ct(t)}static emptyPath(){return new Ct([])}}const vD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends li{construct(e,t,s){return new Sn(e,t,s)}static isValidIdentifier(e){return vD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$b}static keyField(){return new Sn([$b])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new we(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new we(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new we(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(s+=h,r++):(l(),r++)}if(l(),c)throw new we(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(t)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Ct.fromString(e))}static fromName(e){return new Ve(Ct.fromString(e).popFirst(5))}static empty(){return new Ve(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n,e,t){if(!t)throw new we(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bD(n,e,t,s){if(e===!0&&s===!0)throw new we(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Yb(n){if(!Ve.isDocumentKey(n))throw new we(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Jb(n){if(Ve.isDocumentKey(n))throw new we(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function pr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qd(n);throw new we(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function fc(n,e){if(!yE(n))throw new we(me.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new we(me.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=-62135596800,Xb=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Xb);return new Mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qb)throw new we(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xb}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fc(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:nn("string",Mt._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Mt(0,0))}static max(){return new He(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=-1;function _D(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=He.fromTimestamp(s===1e9?new Mt(t+1,0):new Mt(t,s));return new Ca(r,Ve.empty(),e)}function TD(n){return new Ca(n.readTime,n.key,ac)}class Ca{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ca(He.min(),Ve.empty(),ac)}static max(){return new Ca(He.max(),Ve.empty(),ac)}}function ED(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(n.documentKey,e.documentKey),t!==0?t:nt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==SD)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):pe.reject(t)}static resolve(e){return new pe(((t,s)=>{t(e)}))}static reject(e){return new pe(((t,s)=>{s(e)}))}static waitFor(e){return new pe(((t,s)=>{let r=0,l=0,c=!1;e.forEach((h=>{++r,h.next((()=>{++l,c&&l===r&&t()}),(g=>s(g)))})),c=!0,l===r&&t()}))}static or(e){let t=pe.resolve(!1);for(const s of e)t=t.next((r=>r?pe.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new pe(((s,r)=>{const l=e.length,c=new Array(l);let h=0;for(let g=0;g<l;g++){const m=g;t(e[m]).next((v=>{c[m]=v,++h,h===l&&s(c)}),(v=>r(v)))}}))}static doWhile(e,t){return new pe(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function ND(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=-1;function $d(n){return n==null}function bd(n){return n===0&&1/n==-1/0}function wD(n){return typeof n=="number"&&Number.isInteger(n)&&!bd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="";function CD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wb(e)),e=kD(n.get(t),e);return Wb(e)}function kD(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case xE:t+="";break;default:t+=l}}return t}function Wb(n){return n+xE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function br(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){this.comparator=e,this.root=t||En.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??En.RED,this.left=r??En.EMPTY,this.right=l??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new En(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return En.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new En(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new e_(this.data.getIterator())}getIteratorFrom(e){return new e_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class e_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new Us([])}unionWith(e){let t=new ln(Sn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new bE("Invalid base64 string: "+l):l}})(e);return new An(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const ID=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(n){if(mt(!!n,39018),typeof n=="string"){let e=0;const t=ID.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Kt(n.seconds),nanos:Kt(n.nanos)}}function Kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ia(n){return typeof n=="string"?An.fromBase64String(n):An.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="server_timestamp",TE="__type__",EE="__previous_value__",SE="__local_write_time__";function Cp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[TE])==null?void 0:s.stringValue)===_E}function Yd(n){const e=n.mapValue.fields[EE];return Cp(e)?Yd(e):e}function rc(n){const e=ka(n.mapValue.fields[SE].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t,s,r,l,c,h,g,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=v}}const _d="(default)";class oc{constructor(e,t){this.projectId=e,this.database=t||_d}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database===_d}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="__type__",MD="__max__",Ju={mapValue:{}},NE="__vector__",Td="value";function Ra(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cp(n)?4:PD(n)?9007199254740991:DD(n)?10:11:je(28295,{value:n})}function hi(n,e){if(n===e)return!0;const t=Ra(n);if(t!==Ra(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rc(n).isEqual(rc(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=ka(r.timestampValue),h=ka(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Ia(r.bytesValue).isEqual(Ia(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return Kt(r.geoPointValue.latitude)===Kt(l.geoPointValue.latitude)&&Kt(r.geoPointValue.longitude)===Kt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return Kt(r.integerValue)===Kt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=Kt(r.doubleValue),h=Kt(l.doubleValue);return c===h?bd(c)===bd(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Ro(n.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},h=l.mapValue.fields||{};if(Zb(c)!==Zb(h))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(h[g]===void 0||!hi(c[g],h[g])))return!1;return!0})(n,e);default:return je(52216,{left:n})}}function lc(n,e){return(n.values||[]).find((t=>hi(t,e)))!==void 0}function Mo(n,e){if(n===e)return 0;const t=Ra(n),s=Ra(e);if(t!==s)return nt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return nt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Kt(l.integerValue||l.doubleValue),g=Kt(c.integerValue||c.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1})(n,e);case 3:return t_(n.timestampValue,e.timestampValue);case 4:return t_(rc(n),rc(e));case 5:return qm(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ia(l),g=Ia(c);return h.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),g=c.split("/");for(let m=0;m<h.length&&m<g.length;m++){const v=nt(h[m],g[m]);if(v!==0)return v}return nt(h.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=nt(Kt(l.latitude),Kt(c.latitude));return h!==0?h:nt(Kt(l.longitude),Kt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return n_(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var T,N,w,I;const h=l.fields||{},g=c.fields||{},m=(T=h[Td])==null?void 0:T.arrayValue,v=(N=g[Td])==null?void 0:N.arrayValue,_=nt(((w=m==null?void 0:m.values)==null?void 0:w.length)||0,((I=v==null?void 0:v.values)==null?void 0:I.length)||0);return _!==0?_:n_(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ju.mapValue&&c===Ju.mapValue)return 0;if(l===Ju.mapValue)return 1;if(c===Ju.mapValue)return-1;const h=l.fields||{},g=Object.keys(h),m=c.fields||{},v=Object.keys(m);g.sort(),v.sort();for(let _=0;_<g.length&&_<v.length;++_){const T=qm(g[_],v[_]);if(T!==0)return T;const N=Mo(h[g[_]],m[v[_]]);if(N!==0)return N}return nt(g.length,v.length)})(n.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function t_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nt(n,e);const t=ka(n),s=ka(e),r=nt(t.seconds,s.seconds);return r!==0?r:nt(t.nanos,s.nanos)}function n_(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=Mo(t[r],s[r]);if(l)return l}return nt(t.length,s.length)}function Do(n){return Km(n)}function Km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ka(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ia(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=Km(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of s)l?l=!1:r+=",",r+=`${c}:${Km(t.fields[c])}`;return r+"}"})(n.mapValue):je(61005,{value:n})}function sd(n){switch(Ra(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yd(n);return e?16+sd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ia(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+sd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return br(s.fields,((l,c)=>{r+=l.length+sd(c)})),r})(n.mapValue);default:throw je(13486,{value:n})}}function s_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $m(n){return!!n&&"integerValue"in n}function kp(n){return!!n&&"arrayValue"in n}function i_(n){return!!n&&"nullValue"in n}function a_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function id(n){return!!n&&"mapValue"in n}function DD(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[AE])==null?void 0:s.stringValue)===NE}function Wl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return br(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Wl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wl(n.arrayValue.values[t]);return e}return{...n}}function PD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===MD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.value=e}static empty(){return new Es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(t)}setAll(e){let t=Sn.emptyPath(),s={},r=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,s,r),s={},r=[],t=h.popLast()}c?s[h.lastSegment()]=Wl(c):r.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];id(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){br(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new Es(Wl(this.value))}}function wE(n){const e=[];return br(n.fields,((t,s)=>{const r=new Sn([t]);if(id(s)){const l=wE(s.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new Us(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t,s,r,l,c,h){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Mn(e,0,He.min(),He.min(),He.min(),Es.empty(),0)}static newFoundDocument(e,t,s,r){return new Mn(e,1,t,He.min(),s,r,0)}static newNoDocument(e,t){return new Mn(e,2,t,He.min(),He.min(),Es.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,He.min(),He.min(),Es.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function r_(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?s=Ve.comparator(Ve.fromName(c.referenceValue),t.key):s=Mo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function o_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function VD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{}class tn extends CE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new UD(e,t,s):t==="array-contains"?new GD(e,s):t==="in"?new BD(e,s):t==="not-in"?new zD(e,s):t==="array-contains-any"?new HD(e,s):new tn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new jD(e,s):new OD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mo(t,this.value)):t!==null&&Ra(this.value)===Ra(t)&&this.matchesComparison(Mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bs extends CE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bs(e,t)}matches(e){return kE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kE(n){return n.op==="and"}function IE(n){return LD(n)&&kE(n)}function LD(n){for(const e of n.filters)if(e instanceof Bs)return!1;return!0}function Ym(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Do(n.value);if(IE(n))return n.filters.map((e=>Ym(e))).join(",");{const e=n.filters.map((t=>Ym(t))).join(",");return`${n.op}(${e})`}}function RE(n,e){return n instanceof tn?(function(s,r){return r instanceof tn&&s.op===r.op&&s.field.isEqual(r.field)&&hi(s.value,r.value)})(n,e):n instanceof Bs?(function(s,r){return r instanceof Bs&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,c,h)=>l&&RE(c,r.filters[h])),!0):!1})(n,e):void je(19439)}function ME(n){return n instanceof tn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(n):n instanceof Bs?(function(t){return t.op.toString()+" {"+t.getFilters().map(ME).join(" ,")+"}"})(n):"Filter"}class UD extends tn{constructor(e,t,s){super(e,t,s),this.key=Ve.fromName(s.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class jD extends tn{constructor(e,t){super(e,"in",t),this.keys=DE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OD extends tn{constructor(e,t){super(e,"not-in",t),this.keys=DE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DE(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ve.fromName(s.referenceValue)))}class GD extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kp(t)&&lc(t.arrayValue,this.value)}}class BD extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lc(this.value.arrayValue,t)}}class zD extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lc(this.value.arrayValue,t)}}class HD extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>lc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t=null,s=[],r=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function l_(n,e=null,t=[],s=[],r=null,l=null,c=null){return new FD(n,e,t,s,r,l,c)}function Ip(n){const e=qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ym(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),$d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Do(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Do(s))).join(",")),e.Te=t}return e.Te}function Rp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!o_(n.startAt,e.startAt)&&o_(n.endAt,e.endAt)}function Jm(n){return Ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t=null,s=[],r=[],l=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qD(n,e,t,s,r,l,c,h){return new hc(n,e,t,s,r,l,c,h)}function PE(n){return new hc(n)}function c_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VE(n){return n.collectionGroup!==null}function Zl(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new ln(Sn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Sd(l,s))})),t.has(Sn.keyField().canonicalString())||e.Ie.push(new Sd(Sn.keyField(),s))}return e.Ie}function ci(n){const e=qe(n);return e.Ee||(e.Ee=KD(e,Zl(n))),e.Ee}function KD(n,e){if(n.limitType==="F")return l_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Sd(r.field,l)}));const t=n.endAt?new Ed(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ed(n.startAt.position,n.startAt.inclusive):null;return l_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Qm(n,e){const t=n.filters.concat([e]);return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xm(n,e,t){return new hc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jd(n,e){return Rp(ci(n),ci(e))&&n.limitType===e.limitType}function LE(n){return`${Ip(ci(n))}|lt:${n.limitType}`}function xo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>ME(r))).join(", ")}]`),$d(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Do(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Do(r))).join(",")),`Target(${s})`})(ci(n))}; limitType=${n.limitType})`}function Qd(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of Zl(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,h,g){const m=r_(c,h,g);return c.inclusive?m<=0:m<0})(s.startAt,Zl(s),r)||s.endAt&&!(function(c,h,g){const m=r_(c,h,g);return c.inclusive?m>=0:m>0})(s.endAt,Zl(s),r))})(n,e)}function $D(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UE(n){return(e,t)=>{let s=!1;for(const r of Zl(n)){const l=YD(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function YD(n,e,t){const s=n.field.isKeyField()?Ve.comparator(e.key,t.key):(function(l,c,h){const g=c.data.field(l),m=h.data.field(l);return g!==null&&m!==null?Mo(g,m):je(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){br(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return vE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Ut(Ve.comparator);function Oi(){return JD}const jE=new Ut(Ve.comparator);function Jl(...n){let e=jE;for(const t of n)e=e.insert(t.key,t);return e}function OE(n){let e=jE;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function fr(){return ec()}function GE(){return ec()}function ec(){return new _r((n=>n.toString()),((n,e)=>n.isEqual(e)))}const QD=new Ut(Ve.comparator),XD=new ln(Ve.comparator);function st(...n){let e=XD;for(const t of n)e=e.add(t);return e}const WD=new ln(nt);function ZD(){return WD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function BE(n){return{integerValue:""+n}}function eP(n,e){return wD(e)?BE(e):Mp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(){this._=void 0}}function tP(n,e,t){return n instanceof Ad?(function(r,l){const c={fields:{[TE]:{stringValue:_E},[SE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Cp(l)&&(l=Yd(l)),l&&(c.fields[EE]=l),{mapValue:c}})(t,e):n instanceof cc?HE(n,e):n instanceof uc?FE(n,e):(function(r,l){const c=zE(r,l),h=u_(c)+u_(r.Ae);return $m(c)&&$m(r.Ae)?BE(h):Mp(r.serializer,h)})(n,e)}function nP(n,e,t){return n instanceof cc?HE(n,e):n instanceof uc?FE(n,e):t}function zE(n,e){return n instanceof Nd?(function(s){return $m(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Ad extends Xd{}class cc extends Xd{constructor(e){super(),this.elements=e}}function HE(n,e){const t=qE(e);for(const s of n.elements)t.some((r=>hi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class uc extends Xd{constructor(e){super(),this.elements=e}}function FE(n,e){let t=qE(e);for(const s of n.elements)t=t.filter((r=>!hi(r,s)));return{arrayValue:{values:t}}}class Nd extends Xd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function u_(n){return Kt(n.integerValue||n.doubleValue)}function qE(n){return kp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function sP(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof cc&&r instanceof cc||s instanceof uc&&r instanceof uc?Ro(s.elements,r.elements,hi):s instanceof Nd&&r instanceof Nd?hi(s.Ae,r.Ae):s instanceof Ad&&r instanceof Ad})(n.transform,e.transform)}class iP{constructor(e,t){this.version=e,this.transformResults=t}}class Gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gs}static exists(e){return new Gs(void 0,e)}static updateTime(e){return new Gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wd{}function KE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dp(n.key,Gs.none()):new mc(n.key,n.data,Gs.none());{const t=n.data,s=Es.empty();let r=new ln(Sn.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),r=r.add(l)}return new Tr(n.key,s,new Us(r.toArray()),Gs.none())}}function aP(n,e,t){n instanceof mc?(function(r,l,c){const h=r.value.clone(),g=f_(r.fieldTransforms,l,c.transformResults);h.setAll(g),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Tr?(function(r,l,c){if(!ad(r.precondition,l))return void l.convertToUnknownDocument(c.version);const h=f_(r.fieldTransforms,l,c.transformResults),g=l.data;g.setAll($E(r)),g.setAll(h),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function tc(n,e,t,s){return n instanceof mc?(function(l,c,h,g){if(!ad(l.precondition,c))return h;const m=l.value.clone(),v=h_(l.fieldTransforms,g,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof Tr?(function(l,c,h,g){if(!ad(l.precondition,c))return h;const m=h_(l.fieldTransforms,g,c),v=c.data;return v.setAll($E(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,c,h){return ad(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function rP(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=zE(s.transform,r||null);l!=null&&(t===null&&(t=Es.empty()),t.set(s.field,l))}return t||null}function d_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ro(s,r,((l,c)=>sP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mc extends Wd{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Tr extends Wd{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function $E(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function f_(n,e,t){const s=new Map;mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,h=e.data.field(l.field);s.set(l.field,nP(c,h,t[r]))}return s}function h_(n,e,t){const s=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);s.set(r.field,tP(l,c,e))}return s}class Dp extends Wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oP extends Wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&aP(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=tc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=tc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=GE();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(r.key)?null:h;const g=KE(c,h);g!==null&&s.set(r.key,g),c.isValidDocument()||c.convertToNoDocument(He.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),st())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,((t,s)=>d_(t,s)))&&Ro(this.baseMutations,e.baseMutations,((t,s)=>d_(t,s)))}}class Pp{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){mt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return QD})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,s[c].version);return new Pp(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,ot;function dP(n){switch(n){case me.OK:return je(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function YE(n){if(n===void 0)return ji("GRPC error has no .code"),me.UNKNOWN;switch(n){case en.OK:return me.OK;case en.CANCELLED:return me.CANCELLED;case en.UNKNOWN:return me.UNKNOWN;case en.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case en.INTERNAL:return me.INTERNAL;case en.UNAVAILABLE:return me.UNAVAILABLE;case en.UNAUTHENTICATED:return me.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case en.NOT_FOUND:return me.NOT_FOUND;case en.ALREADY_EXISTS:return me.ALREADY_EXISTS;case en.PERMISSION_DENIED:return me.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case en.ABORTED:return me.ABORTED;case en.OUT_OF_RANGE:return me.OUT_OF_RANGE;case en.UNIMPLEMENTED:return me.UNIMPLEMENTED;case en.DATA_LOSS:return me.DATA_LOSS;default:return je(39323,{code:n})}}(ot=en||(en={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new Aa([4294967295,4294967295],0);function m_(n){const e=fP().encode(n),t=new lE;return t.update(e),new Uint8Array(t.digest())}function p_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Aa([t,s],0),new Aa([r,l],0)]}class Vp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ql(`Invalid padding: ${t}`);if(s<0)throw new Ql(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Aa.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Aa.fromNumber(s)));return r.compare(hP)===1&&(r=new Aa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=m_(e),[s,r]=p_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Vp(l,r,t);return s.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=m_(e),[s,r]=p_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Zd(He.min(),r,new Ut(nt),Oi(),st())}}class pc{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new pc(s,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class JE{constructor(e,t){this.targetId=e,this.Ce=t}}class QE{constructor(e,t,s=An.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class g_{constructor(){this.ve=0,this.Fe=y_(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),t=st(),s=st();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:je(38017,{changeType:l})}})),new pc(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=y_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=Qu(),this.He=Qu(),this.Ye=new Ut(nt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Jm(l))if(s===0){const c=new Ve(l.path);this.et(t,c,Mn.newNoDocument(c,He.min()))}else mt(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const h=this.ut(e),g=h?this.ct(h,e,c):1;if(g!==0){this.it(t);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let c,h;try{c=Ia(s).toUint8Array()}catch(g){if(g instanceof bE)return Io("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new Vp(c,r,l)}catch(g){return Io(g instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&Jm(h.target)){const g=new Ve(h.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Mn.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=st();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new Zd(e,t,this.Ye,this.je,s);return this.je=Oi(),this.Je=Qu(),this.He=Qu(),this.Ye=new Ut(nt),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new g_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ln(nt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ln(nt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new g_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qu(){return new Ut(Ve.comparator)}function y_(){return new Ut(Ve.comparator)}const pP={asc:"ASCENDING",desc:"DESCENDING"},gP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yP={and:"AND",or:"OR"};class xP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wm(n,e){return n.useProto3Json||$d(e)?e:{value:e}}function wd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vP(n,e){return wd(n,e.toTimestamp())}function ui(n){return mt(!!n,49232),He.fromTimestamp((function(t){const s=ka(t);return new Mt(s.seconds,s.nanos)})(n))}function Lp(n,e){return Zm(n,e).canonicalString()}function Zm(n,e){const t=(function(r){return new Ct(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function WE(n){const e=Ct.fromString(n);return mt(sS(e),10190,{key:e.toString()}),e}function ep(n,e){return Lp(n.databaseId,e.path)}function ym(n,e){const t=WE(e);if(t.get(1)!==n.databaseId.projectId)throw new we(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(eS(t))}function ZE(n,e){return Lp(n.databaseId,e)}function bP(n){const e=WE(n);return e.length===4?Ct.emptyPath():eS(e)}function tp(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eS(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function x_(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function _P(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:je(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(mt(v===void 0||typeof v=="string",58123),An.fromBase64String(v||"")):(mt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),An.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const v=m.code===void 0?me.UNKNOWN:YE(m.code);return new we(v,m.message||"")})(c);t=new QE(s,r,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=ym(n,s.document.name),l=ui(s.document.updateTime),c=s.document.createTime?ui(s.document.createTime):He.min(),h=new Es({mapValue:{fields:s.document.fields}}),g=Mn.newFoundDocument(r,l,c,h),m=s.targetIds||[],v=s.removedTargetIds||[];t=new rd(m,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=ym(n,s.document),l=s.readTime?ui(s.readTime):He.min(),c=Mn.newNoDocument(r,l),h=s.removedTargetIds||[];t=new rd([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=ym(n,s.document),l=s.removedTargetIds||[];t=new rd([],l,r,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,c=new uP(r,l),h=s.targetId;t=new JE(h,c)}}return t}function TP(n,e){let t;if(e instanceof mc)t={update:x_(n,e.key,e.value)};else if(e instanceof Dp)t={delete:ep(n,e.key)};else if(e instanceof Tr)t={update:x_(n,e.key,e.data),updateMask:RP(e.fieldMask)};else{if(!(e instanceof oP))return je(16599,{Vt:e.type});t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const h=c.transform;if(h instanceof Ad)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof cc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof uc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Nd)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw je(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:vP(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:je(27497)})(n,e.precondition)),t}function EP(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?ui(r.updateTime):ui(l);return c.isEqual(He.min())&&(c=ui(l)),new iP(c,r.transformResults||[])})(t,e)))):[]}function SP(n,e){return{documents:[ZE(n,e.path)]}}function AP(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=ZE(n,r);const l=(function(m){if(m.length!==0)return nS(Bs.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(T){return{field:vo(T.field),direction:CP(T.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Wm(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function NP(n){let e=bP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){mt(s===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const T=tS(_);return T instanceof Bs&&IE(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((T=>(function(w){return new Sd(bo(w.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,$d(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(_){const T=!!_.before,N=_.values||[];return new Ed(N,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const T=!_.before,N=_.values||[];return new Ed(N,T)})(t.endAt)),qD(e,r,c,l,h,"F",g,m)}function wP(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=bo(t.unaryFilter.field);return tn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=bo(t.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(t.unaryFilter.field);return tn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bo(t.unaryFilter.field);return tn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(n):n.fieldFilter!==void 0?(function(t){return tn.create(bo(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Bs.create(t.compositeFilter.filters.map((s=>tS(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(n):je(30097,{filter:n})}function CP(n){return pP[n]}function kP(n){return gP[n]}function IP(n){return yP[n]}function vo(n){return{fieldPath:n.canonicalString()}}function bo(n){return Sn.fromServerFormat(n.fieldPath)}function nS(n){return n instanceof tn?(function(t){if(t.op==="=="){if(a_(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NAN"}};if(i_(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(a_(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NAN"}};if(i_(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(t.field),op:kP(t.op),value:t.value}}})(n):n instanceof Bs?(function(t){const s=t.getFilters().map((r=>nS(r)));return s.length===1?s[0]:{compositeFilter:{op:IP(t.op),filters:s}}})(n):je(54877,{filter:n})}function RP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t,s,r,l=He.min(),c=He.min(),h=An.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new Ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.yt=e}}function DP(n){const e=NP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.Cn=new VP}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Ca.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(Ca.min())}updateCollectionGroup(e,t,s){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class VP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new ln(Ct.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ln(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iS=41943040;class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(iS,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="LruGarbageCollector",LP=1048576;function __([n,e],[t,s]){const r=nt(n,t);return r===0?nt(e,s):r}class UP{constructor(e){this.Ir=e,this.buffer=new ln(__),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();__(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ne(b_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?Ne(b_,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.Vr(3e5)}))}}class OP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(Kd.ce);const s=new UP(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(v_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,c,h,g,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,c=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(m=Date.now(),yo()<=lt.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${l} targets in `+(g-h)+`ms
	Removed ${_} documents in `+(m-g)+`ms
Total Duration: ${m-v}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:_}))))}}function GP(n,e){return new OP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.changes=new _r((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?pe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&tc(s.mutation,r,Us.empty(),Mt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,st()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=st()){const r=fr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let c=Jl();return l.forEach(((h,g)=>{c=c.insert(h,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=fr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,st())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,s,r){let l=Oi();const c=ec(),h=(function(){return ec()})();return t.forEach(((g,m)=>{const v=s.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Tr)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),tc(v.mutation,m,v.mutation.getFieldMask(),Mt.now())):c.set(m.key,Us.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>h.set(m,new zP(v,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=ec();let r=new Ut(((c,h)=>c-h)),l=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((g=>{const m=t.get(g);if(m===null)return;let v=s.get(g)||Us.empty();v=h.applyToLocalView(m,v),s.set(g,v);const _=(r.get(h.batchId)||st()).add(g);r=r.insert(h.batchId,_)}))})).next((()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),m=g.key,v=g.value,_=GE();v.forEach((T=>{if(!l.has(T)){const N=KE(t.get(T),s.get(T));N!==null&&_.set(T,N),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,_))}return pe.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return Ve.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):pe.resolve(fr());let h=ac,g=l;return c.next((m=>pe.forEach(m,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(v)?pe.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,g,m,st()))).next((v=>({batchId:h,changes:OE(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((s=>{let r=Jl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let c=Jl();return this.indexManager.getCollectionParents(e,l).next((h=>pe.forEach(h,(g=>{const m=(function(_,T){return new hc(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,r).next((v=>{v.forEach(((_,T)=>{c=c.insert(_,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((c=>{l.forEach(((g,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Mn.newInvalidDocument(v)))}));let h=Jl();return c.forEach(((g,m)=>{const v=l.get(g);v!==void 0&&tc(v.mutation,m,Us.empty(),Mt.now()),Qd(t,m)&&(h=h.insert(g,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:ui(r.createTime)}})(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:DP(r.bundledQuery),readTime:ui(r.readTime)}})(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.overlays=new Ut(Ve.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=fr();return pe.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),pe.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),pe.resolve()}getOverlaysForCollection(e,t,s){const r=fr(),l=t.length+1,c=new Ve(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,m=g.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>s&&r.set(g.getKey(),g)}return pe.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new Ut(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=l.get(m.largestBatchId);v===null&&(v=fr(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=fr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=r)););return pe.resolve(h)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new cP(t,s));let l=this.qr.get(t);l===void 0&&(l=st(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Qr=new ln(fn.$r),this.Ur=new ln(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new fn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new fn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ve(new Ct([])),s=new fn(t,e),r=new fn(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ve(new Ct([])),s=new fn(t,e),r=new fn(t,e+1);let l=st();return this.Ur.forEachInRange([s,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new fn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class fn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ve.comparator(e.key,t.key)||nt(e.Yr,t.Yr)}static Kr(e,t){return nt(e.Yr,t.Yr)||Ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ln(fn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new lP(l,t,s,r);this.mutationQueue.push(c);for(const h of r)this.Zr=this.Zr.add(new fn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return pe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?wp:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new fn(t,0),r=new fn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(c=>{const h=this.Xr(c.Yr);l.push(h)})),pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ln(nt);return t.forEach((r=>{const l=new fn(r,0),c=new fn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{s=s.add(h.Yr)}))})),pe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;Ve.isDocumentKey(l)||(l=l.child(""));const c=new fn(new Ve(l),0);let h=new ln(nt);return this.Zr.forEachWhile((g=>{const m=g.key.path;return!!s.isPrefixOf(m)&&(m.length===r&&(h=h.add(g.Yr)),!0)}),c),pe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return pe.forEach(t.mutations,(r=>{const l=new fn(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new fn(t,0),r=this.Zr.firstAfterOrEqual(s);return pe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.ri=e,this.docs=(function(){return new Ut(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return pe.resolve(s?s.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let s=Oi();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():Mn.newInvalidDocument(r))})),pe.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=Oi();const c=t.path,h=new Ve(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:m,value:{document:v}}=g.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||ED(TD(v),s)<=0||(r.has(v.key)||Qd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return pe.resolve(l)}getAllFromCollectionGroup(e,t,s,r){je(9500)}ii(e,t){return pe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new JP(this)}getSize(e){return pe.resolve(this.size)}}class JP extends BP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.persistence=e,this.si=new _r((t=>Ip(t)),Rp),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new Up,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),pe.waitFor(l).next((()=>r))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return pe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),pe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return pe.resolve(s)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Kd(0),this.li=!1,this.li=!0,this.hi=new KP,this.referenceDelegate=e(this),this.Pi=new QP(this),this.indexManager=new PP,this.remoteDocumentCache=(function(r){return new YP(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new MP(t),this.Ii=new FP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new $P(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Ne("MemoryPersistence","Starting transaction:",e);const r=new XP(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return pe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class XP extends AD{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Ri=new Up,this.Vi=null}static mi(e){return new jp(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),pe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(s=>{const r=Ve.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,He.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Cd{constructor(e,t){this.persistence=e,this.pi=new _r((s=>CD(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=GP(this,t)}static mi(e,t){return new Cd(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return pe.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?pe.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((h=>{h||(s++,l.removeEntry(c,He.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sd(e.data.value)),t}br(e,t,s){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return pe.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=st(),r=st();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Op(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FM()?8:ND(zM())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new WP;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(yo()<=lt.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(yo()<=lt.DEBUG&&Ne("QueryEngine","Query:",xo(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(yo()<=lt.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(t))):pe.resolve())}ys(e,t){if(c_(t))return pe.resolve(null);let s=ci(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Xm(t,null,"F"),s=ci(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=st(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,s).next((g=>{const m=this.Ds(t,h);return this.Cs(t,m,c,g.readTime)?this.ys(e,Xm(t,null,"F")):this.vs(e,m,t,g)}))))})))))}ws(e,t,s,r){return c_(t)||r.isEqual(He.min())?pe.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,r)?pe.resolve(null):(yo()<=lt.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xo(t)),this.vs(e,c,t,_D(r,ac)).next((h=>h)))}))}Ds(e,t){let s=new ln(UE(e));return t.forEach(((r,l)=>{Qd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return yo()<=lt.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",xo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ca.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LocalStore",e6=3e8;class t6{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Ut(nt),this.xs=new _r((l=>Ip(l)),Rp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function n6(n,e,t,s){return new t6(n,e,t,s)}async function rS(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],h=[];let g=st();for(const m of r){c.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}for(const m of l){h.push(m.batchId);for(const v of m.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function s6(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,g,m,v){const _=m.batch,T=_.keys();let N=pe.resolve();return T.forEach((w=>{N=N.next((()=>v.getEntry(g,w))).next((I=>{const C=m.docVersions.get(w);mt(C!==null,48541),I.version.compareTo(C)<0&&(_.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),v.addEntry(I)))}))})),N.next((()=>h.mutationQueue.removeMutationBatch(g,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let g=st();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(g=g.add(h.batch.mutations[m].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function oS(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function i6(n,e){const t=qe(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const T=r.get(_);if(!T)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let N=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?N=N.withResumeToken(An.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,s)),r=r.insert(_,N),(function(I,C,O){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=e6?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(T,N,v)&&h.push(t.Pi.updateTargetData(l,N))}));let g=Oi(),m=st();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(a6(l,c,e.documentUpdates).next((v=>{g=v.ks,m=v.qs}))),!s.isEqual(He.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(v)}return pe.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,m))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function a6(n,e,t){let s=st(),r=st();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Oi();return t.forEach(((h,g)=>{const m=l.get(h);g.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(h)),g.isNoDocument()&&g.version.isEqual(He.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):Ne(Gp,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",g.version)})),{ks:c,qs:r}}))}function r6(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=wp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function o6(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,pe.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new Ta(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function np(n,e,t){const s=qe(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!zo(c))throw c;Ne(Gp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function T_(n,e,t){const s=qe(n);let r=He.min(),l=st();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,m,v){const _=qe(g),T=_.xs.get(v);return T!==void 0?pe.resolve(_.Ms.get(T)):_.Pi.getTargetData(m,v)})(s,c,ci(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,h.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:He.min(),t?l:st()))).next((h=>(l6(s,$D(e),h),{documents:h,Qs:l})))))}function l6(n,e,t){let s=n.Os.get(e)||He.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class E_{constructor(){this.activeTargetIds=ZD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c6{constructor(){this.Mo=new E_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new E_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="ConnectivityMonitor";class A_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ne(S_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ne(S_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu=null;function sp(){return Xu===null?Xu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xu++,"0x"+Xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",d6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===_d?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const c=sp(),h=this.zo(e,t.toUriEncodedString());Ne(xm,`Sending RPC '${e}' ${c}:`,h,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:m}=new URL(h),v=Ep(m);return this.Jo(e,h,g,s,v).then((_=>(Ne(xm,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw Io(xm,`RPC '${e}' ${c} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,r,l,c){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=d6[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class m6 extends f6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const c=sp();return new Promise(((h,g)=>{const m=new cE;m.setWithCredentials(!0),m.listenOnce(uE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case nd.NO_ERROR:const _=m.getResponseJson();Ne(In,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),h(_);break;case nd.TIMEOUT:Ne(In,`RPC '${e}' ${c} timed out`),g(new we(me.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const T=m.getStatus();if(Ne(In,`RPC '${e}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const w=N==null?void 0:N.error;if(w&&w.status&&w.message){const I=(function(O){const j=O.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(j)>=0?j:me.UNKNOWN})(w.status);g(new we(I,w.message))}else g(new we(me.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new we(me.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Ne(In,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);Ne(In,`RPC '${e}' ${c} sending request:`,r),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const r=sp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=hE(),h=fE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");Ne(In,`Creating RPC '${e}' stream ${r}: ${v}`,g);const _=c.createWebChannel(v,g);this.I_(_);let T=!1,N=!1;const w=new h6({Yo:C=>{N?Ne(In,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(T||(Ne(In,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),Ne(In,`RPC '${e}' stream ${r} sending:`,C),_.send(C))},Zo:()=>_.close()}),I=(C,O,j)=>{C.listen(O,(G=>{try{j(G)}catch(te){setTimeout((()=>{throw te}),0)}}))};return I(_,Yl.EventType.OPEN,(()=>{N||(Ne(In,`RPC '${e}' stream ${r} transport opened.`),w.o_())})),I(_,Yl.EventType.CLOSE,(()=>{N||(N=!0,Ne(In,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(_))})),I(_,Yl.EventType.ERROR,(C=>{N||(N=!0,Io(In,`RPC '${e}' stream ${r} transport errored. Name:`,C.name,"Message:",C.message),w.a_(new we(me.UNAVAILABLE,"The operation could not be completed")))})),I(_,Yl.EventType.MESSAGE,(C=>{var O;if(!N){const j=C.data[0];mt(!!j,16349);const G=j,te=(G==null?void 0:G.error)||((O=G[0])==null?void 0:O.error);if(te){Ne(In,`RPC '${e}' stream ${r} received error:`,te);const ae=te.status;let le=(function(R){const U=en[R];if(U!==void 0)return YE(U)})(ae),M=te.message;le===void 0&&(le=me.INTERNAL,M="Unknown error status: "+ae+" with message "+te.message),N=!0,w.a_(new we(le,M)),_.close()}else Ne(In,`RPC '${e}' stream ${r} received:`,j),w.u_(j)}})),I(h,dE.STAT_EVENT,(C=>{C.stat===Fm.PROXY?Ne(In,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===Fm.NOPROXY&&Ne(In,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n){return new xP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&Ne("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="PersistentStream";class cS{constructor(e,t,s,r,l,c,h,g){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(ji(t.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new we(me.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(N_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ne(N_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class p6 extends cS{constructor(e,t,s,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_P(this.serializer,e),s=(function(l){if(!("targetChange"in l))return He.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?He.min():c.readTime?ui(c.readTime):He.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(l,c){let h;const g=c.target;if(h=Jm(g)?{documents:SP(l,g)}:{query:AP(l,g).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=XE(l,c.resumeToken);const m=Wm(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(He.min())>0){h.readTime=wd(l,c.snapshotVersion.toTimestamp());const m=Wm(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const s=wP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.q_(t)}}class g6 extends cS{constructor(e,t,s,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=EP(e.writeResults,e.commitTime),s=ui(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=tp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>TP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{}class x6 extends y6{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new we(me.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Zm(t,s),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(me.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Zm(t,s),r,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(me.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class v6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ji(t),this.aa=!1):Ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="RemoteStore";class b6{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Er(this)&&(Ne(gr,"Restarting streams for network reachability change."),await(async function(g){const m=qe(g);m.Ea.add(4),await gc(m),m.Ra.set("Unknown"),m.Ea.delete(4),await tf(m)})(this))}))})),this.Ra=new v6(s,r)}}async function tf(n){if(Er(n))for(const e of n.da)await e(!0)}async function gc(n){for(const e of n.da)await e(!1)}function uS(n,e){const t=qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fp(t)?Hp(t):Ho(t).O_()&&zp(t,e))}function Bp(n,e){const t=qe(n),s=Ho(t);t.Ia.delete(e),s.O_()&&dS(t,e),t.Ia.size===0&&(s.O_()?s.L_():Er(t)&&t.Ra.set("Unknown"))}function zp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(n).Y_(e)}function dS(n,e){n.Va.Ue(e),Ho(n).Z_(e)}function Hp(n){n.Va=new mP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ho(n).start(),n.Ra.ua()}function Fp(n){return Er(n)&&!Ho(n).x_()&&n.Ia.size>0}function Er(n){return qe(n).Ea.size===0}function fS(n){n.Va=void 0}async function _6(n){n.Ra.set("Online")}async function T6(n){n.Ia.forEach(((e,t)=>{zp(n,e)}))}async function E6(n,e){fS(n),Fp(n)?(n.Ra.ha(e),Hp(n)):n.Ra.set("Unknown")}async function S6(n,e,t){if(n.Ra.set("Online"),e instanceof QE&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const h of l.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.Va.removeTarget(h))})(n,e)}catch(s){Ne(gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await kd(n,s)}else if(e instanceof rd?n.Va.Ze(e):e instanceof JE?n.Va.st(e):n.Va.tt(e),!t.isEqual(He.min()))try{const s=await oS(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(g.resumeToken,c))}})),h.targetMismatches.forEach(((g,m)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(An.EMPTY_BYTE_STRING,v.snapshotVersion)),dS(l,g);const _=new Ta(v.target,g,m,v.sequenceNumber);zp(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){Ne(gr,"Failed to raise snapshot:",s),await kd(n,s)}}async function kd(n,e,t){if(!zo(e))throw e;n.Ea.add(1),await gc(n),n.Ra.set("Offline"),t||(t=()=>oS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ne(gr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await tf(n)}))}function hS(n,e){return e().catch((t=>kd(n,t,e)))}async function nf(n){const e=qe(n),t=Ma(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wp;for(;A6(e);)try{const r=await r6(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,N6(e,r)}catch(r){await kd(e,r)}mS(e)&&pS(e)}function A6(n){return Er(n)&&n.Ta.length<10}function N6(n,e){n.Ta.push(e);const t=Ma(n);t.O_()&&t.X_&&t.ea(e.mutations)}function mS(n){return Er(n)&&!Ma(n).x_()&&n.Ta.length>0}function pS(n){Ma(n).start()}async function w6(n){Ma(n).ra()}async function C6(n){const e=Ma(n);for(const t of n.Ta)e.ea(t.mutations)}async function k6(n,e,t){const s=n.Ta.shift(),r=Pp.from(s,e,t);await hS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await nf(n)}async function I6(n,e){e&&Ma(n).X_&&await(async function(s,r){if((function(c){return dP(c)&&c!==me.ABORTED})(r.code)){const l=s.Ta.shift();Ma(s).B_(),await hS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await nf(s)}})(n,e),mS(n)&&pS(n)}async function w_(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ne(gr,"RemoteStore received new credentials");const s=Er(t);t.Ea.add(3),await gc(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await tf(t)}async function R6(n,e){const t=qe(n);e?(t.Ea.delete(2),await tf(t)):e||(t.Ea.add(2),await gc(t),t.Ra.set("Unknown"))}function Ho(n){return n.ma||(n.ma=(function(t,s,r){const l=qe(t);return l.sa(),new p6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:_6.bind(null,n),t_:T6.bind(null,n),r_:E6.bind(null,n),H_:S6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Fp(n)?Hp(n):n.Ra.set("Unknown")):(await n.ma.stop(),fS(n))}))),n.ma}function Ma(n){return n.fa||(n.fa=(function(t,s,r){const l=qe(t);return l.sa(),new g6(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:w6.bind(null,n),r_:I6.bind(null,n),ta:C6.bind(null,n),na:k6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await nf(n)):(await n.fa.stop(),n.Ta.length>0&&(Ne(gr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const c=Date.now()+s,h=new qp(e,t,c,r,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(n,e){if(ji("AsyncQueue",`${e}: ${n}`),zo(n))return new we(me.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ve.comparator(t.key,s.key):(t,s)=>Ve.comparator(t.key,s.key),this.keyedMap=Jl(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new No;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.ga=new Ut(Ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Vo{constructor(e,t,s,r,l,c,h,g,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,r,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Vo(e,t,No.emptySet(t),c,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class D6{constructor(){this.queries=k_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=qe(t),l=r.queries;r.queries=k_(),l.forEach(((c,h)=>{for(const g of h.Sa)g.onError(s)}))})(this,new we(me.ABORTED,"Firestore shutting down"))}}function k_(){return new _r((n=>LE(n)),Jd)}async function P6(n,e){const t=qe(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new M6,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const h=Kp(c,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&$p(t)}async function V6(n,e){const t=qe(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function L6(n,e){const t=qe(n);let s=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(r)&&(s=!0);c.wa=r}}s&&$p(t)}function U6(n,e,t){const s=qe(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function $p(n){n.Ca.forEach((e=>{e.next()}))}var ip,I_;(I_=ip||(ip={})).Ma="default",I_.Cache="cache";class j6{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class O6{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=UE(e),this.tu=new No(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new C_,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,h=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,_)=>{const T=r.get(v),N=Qd(this.query,_)?_:null,w=!!T&&this.mutatedKeys.has(T.key),I=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let C=!1;T&&N?T.data.isEqual(N.data)?w!==I&&(s.track({type:3,doc:N}),C=!0):this.su(T,N)||(s.track({type:2,doc:N}),C=!0,(g&&this.eu(N,g)>0||m&&this.eu(N,m)<0)&&(h=!0)):!T&&N?(s.track({type:0,doc:N}),C=!0):T&&!N&&(s.track({type:1,doc:T}),C=!0,(g||m)&&(h=!0)),C&&(N?(c=c.add(N),l=I?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,_)=>(function(N,w){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:C})}};return I(N)-I(w)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),r=r??!1;const h=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,m=g!==this.Za;return this.Za=g,c.length!==0||m?{snapshot:new Vo(this.query,e.tu,l,c,e.mutatedKeys,g===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=st(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new yS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new gS(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=st();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yp="SyncEngine";class G6{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class B6{constructor(e){this.key=e,this.hu=!1}}class z6{constructor(e,t,s,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new _r((h=>LE(h)),Jd),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Ve.comparator),this.Au=new Map,this.Ru=new Up,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function H6(n,e,t=!0){const s=ES(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await xS(s,e,t,!0),r}async function F6(n,e){const t=ES(n);await xS(t,e,!0,!1)}async function xS(n,e,t,s){const r=await o6(n.localStore,ci(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await q6(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&uS(n.remoteStore,r),h}async function q6(n,e,t,s,r){n.pu=(_,T,N)=>(async function(I,C,O,j){let G=C.view.ru(O);G.Cs&&(G=await T_(I.localStore,C.query,!1).then((({documents:M})=>C.view.ru(M,G))));const te=j&&j.targetChanges.get(C.targetId),ae=j&&j.targetMismatches.get(C.targetId)!=null,le=C.view.applyChanges(G,I.isPrimaryClient,te,ae);return M_(I,C.targetId,le.au),le.snapshot})(n,_,T,N);const l=await T_(n.localStore,e,!0),c=new O6(e,l.Qs),h=c.ru(l.documents),g=pc.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),m=c.applyChanges(h,n.isPrimaryClient,g);M_(n,t,m.au);const v=new G6(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function K6(n,e,t){const s=qe(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((c=>!Jd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await np(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Bp(s.remoteStore,r.targetId),ap(s,r.targetId)})).catch(Bo)):(ap(s,r.targetId),await np(s.localStore,r.targetId,!0))}async function $6(n,e){const t=qe(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Bp(t.remoteStore,s.targetId))}async function Y6(n,e,t){const s=t5(n);try{const r=await(function(c,h){const g=qe(c),m=Mt.now(),v=h.reduce(((N,w)=>N.add(w.key)),st());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let w=Oi(),I=st();return g.Ns.getEntries(N,v).next((C=>{w=C,w.forEach(((O,j)=>{j.isValidDocument()||(I=I.add(O))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,w))).next((C=>{_=C;const O=[];for(const j of h){const G=rP(j,_.get(j.key).overlayedDocument);G!=null&&O.push(new Tr(j.key,G,wE(G.value.mapValue),Gs.exists(!0)))}return g.mutationQueue.addMutationBatch(N,m,O,h)})).next((C=>{T=C;const O=C.applyToLocalDocumentSet(_,I);return g.documentOverlayCache.saveOverlays(N,C.batchId,O)}))})).then((()=>({batchId:T.batchId,changes:OE(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,h,g){let m=c.Vu[c.currentUser.toKey()];m||(m=new Ut(nt)),m=m.insert(h,g),c.Vu[c.currentUser.toKey()]=m})(s,r.batchId,t),await yc(s,r.changes),await nf(s.remoteStore)}catch(r){const l=Kp(r,"Failed to persist write");t.reject(l)}}async function vS(n,e){const t=qe(n);try{const s=await i6(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(mt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?mt(c.hu,14607):r.removedDocuments.size>0&&(mt(c.hu,42227),c.hu=!1))})),await yc(t,s,e)}catch(s){await Bo(s)}}function R_(n,e,t){const s=qe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(c,h){const g=qe(c);g.onlineState=h;let m=!1;g.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(h)&&(m=!0)})),m&&$p(g)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function J6(n,e,t){const s=qe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let c=new Ut(Ve.comparator);c=c.insert(l,Mn.newNoDocument(l,He.min()));const h=st().add(l),g=new Zd(He.min(),new Map,new Ut(nt),c,h);await vS(s,g),s.du=s.du.remove(l),s.Au.delete(e),Jp(s)}else await np(s.localStore,e,!1).then((()=>ap(s,e,t))).catch(Bo)}async function Q6(n,e){const t=qe(n),s=e.batch.batchId;try{const r=await s6(t.localStore,e);_S(t,s,null),bS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await yc(t,r)}catch(r){await Bo(r)}}async function X6(n,e,t){const s=qe(n);try{const r=await(function(c,h){const g=qe(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return g.mutationQueue.lookupMutationBatch(m,h).next((_=>(mt(_!==null,37113),v=_.keys(),g.mutationQueue.removeMutationBatch(m,_)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>g.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);_S(s,e,t),bS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await yc(s,r)}catch(r){await Bo(r)}}function bS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function _S(n,e,t){const s=qe(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function ap(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||TS(n,s)}))}function TS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Bp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Jp(n))}function M_(n,e,t){for(const s of t)s instanceof gS?(n.Ru.addReference(s.key,e),W6(n,s)):s instanceof yS?(Ne(Yp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||TS(n,s.key)):je(19791,{wu:s})}function W6(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Ne(Yp,"New document in limbo: "+t),n.Eu.add(s),Jp(n))}function Jp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ve(Ct.fromString(e)),s=n.fu.next();n.Au.set(s,new B6(t)),n.du=n.du.insert(t,s),uS(n.remoteStore,new Ta(ci(PE(t.path)),s,"TargetPurposeLimboResolution",Kd.ce))}}async function yc(n,e,t){const s=qe(n),r=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,g)=>{c.push(s.pu(g,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(m){r.push(m);const _=Op.As(g.targetId,m);l.push(_)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(g,m){const v=qe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>pe.forEach(m,(T=>pe.forEach(T.Es,(N=>v.persistence.referenceDelegate.addReference(_,T.targetId,N))).next((()=>pe.forEach(T.ds,(N=>v.persistence.referenceDelegate.removeReference(_,T.targetId,N)))))))))}catch(_){if(!zo(_))throw _;Ne(Gp,"Failed to update sequence numbers: "+_)}for(const _ of m){const T=_.targetId;if(!_.fromCache){const N=v.Ms.get(T),w=N.snapshotVersion,I=N.withLastLimboFreeSnapshotVersion(w);v.Ms=v.Ms.insert(T,I)}}})(s.localStore,l))}async function Z6(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ne(Yp,"User change. New user:",e.toKey());const s=await rS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((g=>{g.reject(new we(me.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await yc(t,s.Ls)}}function e5(n,e){const t=qe(n),s=t.Au.get(e);if(s&&s.hu)return st().add(s.key);{let r=st();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const h=t.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function ES(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J6.bind(null,e),e.Pu.H_=L6.bind(null,e.eventManager),e.Pu.yu=U6.bind(null,e.eventManager),e}function t5(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X6.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ef(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return n6(this.persistence,new ZP,e.initialUser,this.serializer)}Cu(e){return new aS(jp.mi,this.serializer)}Du(e){return new c6}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class n5 extends Id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof Cd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new jP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new aS((s=>Cd.mi(s,t)),this.serializer)}}class rp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>R_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z6.bind(null,this.syncEngine),await R6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new D6})()}createDatastore(e){const t=ef(e.databaseInfo.databaseId),s=(function(l){return new m6(l)})(e.databaseInfo);return(function(l,c,h,g){return new x6(l,c,h,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,c,h){return new b6(s,r,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>R_(this.syncEngine,t,0)),(function(){return A_.v()?new A_:new u6})())}createSyncEngine(e,t){return(function(r,l,c,h,g,m,v){const _=new z6(r,l,c,h,g,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=qe(r);Ne(gr,"RemoteStore shutting down."),l.Ea.add(5),await gc(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}rp.provider={build:()=>new rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="FirestoreClient";class i5{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=Rn.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{Ne(Da,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(Ne(Da,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Kp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function bm(n,e){n.asyncQueue.verifyOperationInProgress(),Ne(Da,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await rS(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function D_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await a5(n);Ne(Da,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>w_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>w_(e.remoteStore,r))),n._onlineComponents=e}async function a5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ne(Da,"Using user provided OfflineComponentProvider");try{await bm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===me.FAILED_PRECONDITION||r.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await bm(n,new Id)}}else Ne(Da,"Using default OfflineComponentProvider"),await bm(n,new n5(void 0));return n._offlineComponents}async function SS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ne(Da,"Using user provided OnlineComponentProvider"),await D_(n,n._uninitializedComponentsProvider._online)):(Ne(Da,"Using default OnlineComponentProvider"),await D_(n,new rp))),n._onlineComponents}function r5(n){return SS(n).then((e=>e.syncEngine))}async function o5(n){const e=await SS(n),t=e.eventManager;return t.onListen=H6.bind(null,e.syncEngine),t.onUnlisten=K6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=F6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$6.bind(null,e.syncEngine),t}function l5(n,e,t={}){const s=new Na;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,g,m){const v=new s5({next:T=>{v.Nu(),c.enqueueAndForget((()=>V6(l,_))),T.fromCache&&g.source==="server"?m.reject(new we(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),_=new j6(h,v,{includeMetadataChanges:!0,qa:!0});return P6(l,_)})(await o5(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="firestore.googleapis.com",V_=!0;class L_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NS,this.ssl=V_}else this.host=e.host,this.ssl=e.ssl??V_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LP)throw new we(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(me.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new uD;switch(s.type){case"firstParty":return new mD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new we(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=P_.get(t);s&&(Ne("ComponentProvider","Removing Datastore"),P_.delete(t),s.terminate())})(this),Promise.resolve()}}function c5(n,e,t,s={}){var m;n=pr(n,sf);const r=Ep(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;r&&(UM(`https://${h}`),BM("Firestore",!0)),l.host!==NS&&l.host!==h&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:h,ssl:r,emulatorOptions:s};if(!yd(g,c)&&(n._setSettings(g),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Rn.MOCK_USER;else{v=jM(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new we(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Rn(T)}n._authCredentials=new dD(new pE(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class on{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(fc(t,on._jsonSchema))return new on(e,s||null,new Ve(Ct.fromString(t.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:nn("string",on._jsonSchemaVersion),referencePath:nn("string")};class wa extends Fo{constructor(e,t,s){super(e,t,PE(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new Ve(e))}withConverter(e){return new wa(this.firestore,e,this._path)}}function Qp(n,e,...t){if(n=ko(n),gE("collection","path",e),n instanceof sf){const s=Ct.fromString(e,...t);return Jb(s),new wa(n,null,s)}{if(!(n instanceof on||n instanceof wa))throw new we(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ct.fromString(e,...t));return Jb(s),new wa(n.firestore,null,s)}}function Xp(n,e,...t){if(n=ko(n),arguments.length===1&&(e=Np.newId()),gE("doc","path",e),n instanceof sf){const s=Ct.fromString(e,...t);return Yb(s),new on(n,null,new Ve(s))}{if(!(n instanceof on||n instanceof wa))throw new we(me.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ct.fromString(e,...t));return Yb(s),new on(n.firestore,n instanceof wa?n.converter:null,new Ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="AsyncQueue";class j_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lS(this,"async_queue_retry"),this._c=()=>{const s=vm();s&&Ne(U_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Na;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;Ne(U_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ji("INTERNAL UNHANDLED ERROR: ",O_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=qp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&je(47125,{Pc:O_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function O_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class xc extends sf{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new j_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j_(e),this._firestoreClient=void 0,await e}}}function u5(n,e){const t=typeof n=="object"?n:X4(),s=typeof n=="string"?n:_d,r=K4(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=VM("firestore");l&&c5(r,...l)}return r}function wS(n){if(n._terminated)throw new we(me.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||d5(n),n._firestoreClient}function d5(n){var s,r,l;const e=n._freezeSettings(),t=(function(h,g,m,v){return new RD(h,g,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,AS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new i5(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ss(An.fromBase64String(e))}catch(t){throw new we(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ss(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ss._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fc(e,Ss._jsonSchema))return Ss.fromBase64String(e.bytes)}}Ss._jsonSchemaVersion="firestore/bytes/1.0",Ss._jsonSchema={type:nn("string",Ss._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(fc(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:nn("string",di._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fc(e,fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fi(e.vectorValues);throw new we(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:nn("string",fi._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=/^__.*__$/;class h5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new mc(e,this.data,t,this.fieldTransforms)}}function kS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:n})}}class Zp{constructor(e,t,s,r,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kS(this.Ac)&&f5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class m5{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ef(e)}Cc(e,t,s,r=!1){return new Zp({Ac:e,methodName:t,Dc:s,path:Sn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e0(n){const e=n._freezeSettings(),t=ef(n._databaseId);return new m5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IS(n,e,t,s,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);DS("Data must be an object, but it was:",c,s);const h=RS(s,c);let g,m;if(l.merge)g=new Us(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const T=g5(e,_,t);if(!c.contains(T))throw new we(me.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);x5(v,T)||v.push(T)}g=new Us(v),m=c.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,m=c.fieldTransforms;return new h5(new Es(h),g,m)}function p5(n,e,t,s=!1){return t0(t,n.Cc(s?4:3,e))}function t0(n,e){if(MS(n=ko(n)))return DS("Unsupported field value:",e,n),RS(n,e);if(n instanceof CS)return(function(s,r){if(!kS(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let c=0;for(const h of s){let g=t0(h,r.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=ko(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return eP(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Mt.fromDate(s);return{timestampValue:wd(r.serializer,l)}}if(s instanceof Mt){const l=new Mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:wd(r.serializer,l)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ss)return{bytesValue:XE(r.serializer,s._byteString)};if(s instanceof on){const l=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lp(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof fi)return(function(c,h){return{mapValue:{fields:{[AE]:{stringValue:NE},[Td]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return Mp(h.serializer,m)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${qd(s)}`)})(n,e)}function RS(n,e){const t={};return vE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):br(n,((s,r)=>{const l=t0(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function MS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof di||n instanceof Ss||n instanceof on||n instanceof CS||n instanceof fi)}function DS(n,e,t){if(!MS(t)||!yE(t)){const s=qd(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function g5(n,e,t){if((e=ko(e))instanceof Wp)return e._internalPath;if(typeof e=="string")return PS(n,e);throw Rd("Field path arguments must be of type string or ",n,!1,void 0,t)}const y5=new RegExp("[~\\*/\\[\\]]");function PS(n,e,t){if(e.search(y5)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wp(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rd(n,e,t,s,r){const l=s&&!s.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${r}`),g+=")"),new we(me.INVALID_ARGUMENT,h+n+g)}function x5(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(n0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class v5 extends VS{data(){return super.data()}}function n0(n,e){return typeof e=="string"?PS(n,e):e instanceof Wp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s0{}class _5 extends s0{}function T5(n,e,...t){let s=[];e instanceof s0&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof i0)).length,h=l.filter((g=>g instanceof af)).length;if(c>1||c>0&&h>0)throw new we(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class af extends _5{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new af(e,t,s)}_apply(e){const t=this._parse(e);return LS(e._query,t),new Fo(e.firestore,e.converter,Qm(e._query,t))}_parse(e){const t=e0(e.firestore);return(function(l,c,h,g,m,v,_){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new we(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){B_(_,v);const w=[];for(const I of _)w.push(G_(g,l,I));T={arrayValue:{values:w}}}else T=G_(g,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||B_(_,v),T=p5(h,c,_,v==="in"||v==="not-in");return tn.create(m,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function E5(n,e,t){const s=e,r=n0("where",n);return af._create(r,s,t)}class i0 extends s0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new i0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Bs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const h=l.getFlattenedFilters();for(const g of h)LS(c,g),c=Qm(c,g)})(e._query,t),new Fo(e.firestore,e.converter,Qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G_(n,e,t){if(typeof(t=ko(t))=="string"){if(t==="")throw new we(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VE(e)&&t.indexOf("/")!==-1)throw new we(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ct.fromString(t));if(!Ve.isDocumentKey(s))throw new we(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return s_(n,new Ve(s))}if(t instanceof on)return s_(n,t._key);throw new we(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qd(t)}.`)}function B_(n,e){if(!Array.isArray(n)||n.length===0)throw new we(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LS(n,e){const t=(function(r,l){for(const c of r)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class S5{convertValue(e,t="none"){switch(Ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return br(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[Td].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>Kt(c.doubleValue)));return new fi(t)}convertGeoPoint(e){return new di(Kt(e.latitude),Kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Yd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const t=ka(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ct.fromString(e);mt(sS(s),9688,{name:e});const r=new oc(s.get(1),s.get(3)),l=new Ve(s.popFirst(5));return r.isEqual(t)||ji(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wo extends VS{constructor(e,t,s,r,l,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(n0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",wo._jsonSchema={type:nn("string",wo._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class od extends wo{data(e={}){return super.data(e)}}class Co{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Wu(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new od(this._firestore,this._userDataWriter,s.key,s,new Wu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((h=>{const g=new od(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const g=new od(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:A5(h.type),doc:g,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function A5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}Co._jsonSchemaVersion="firestore/querySnapshot/1.0",Co._jsonSchema={type:nn("string",Co._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};class N5 extends S5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function jS(n){n=pr(n,Fo);const e=pr(n.firestore,xc),t=wS(e),s=new N5(e);return b5(n._query),l5(t,n._query).then((r=>new Co(e,s,n,r)))}function w5(n,e,t){n=pr(n,on);const s=pr(n.firestore,xc),r=US(n.converter,e);return a0(s,[IS(e0(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Gs.none())])}function C5(n){return a0(pr(n.firestore,xc),[new Dp(n._key,Gs.none())])}function k5(n,e){const t=pr(n.firestore,xc),s=Xp(n),r=US(n.converter,e);return a0(t,[IS(e0(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Gs.exists(!1))]).then((()=>s))}function a0(n,e){return(function(s,r){const l=new Na;return s.asyncQueue.enqueueAndForget((async()=>Y6(await r5(s),r,l))),l.promise})(wS(n),e)}(function(e,t=!0){(function(r){Go=r})(Q4),vd(new sc("firestore",((s,{instanceIdentifier:r,options:l})=>{const c=s.getProvider("app").getImmediate(),h=new xc(new fD(s.getProvider("auth-internal")),new pD(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new we(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(m.options.projectId,v)})(c,r),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Ao(Fb,qb,e),Ao(Fb,qb,"esm2020")})();const I5={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},R5=aE(I5),vc=u5(R5);console.log("Firebase Service Initialized for: fajmuls-learning");const OS="benchmark_scores",r0="test_packages",M5=async(n,e,t,s)=>{try{await k5(Qp(vc,OS),{game:n,score:e,username:t,unit:s,timestamp:Date.now()}),console.log(`Score saved to Cloud: ${n} - ${e}`)}catch(r){console.error("Error saving score to Firebase:",r)}},D5=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=T5(Qp(vc,OS),E5("game","==",n)),r=await jS(s),l=[];return r.forEach(c=>{l.push({id:c.id,...c.data()})}),l.sort((c,h)=>t?c.score-h.score:h.score-c.score),l.slice(0,e)}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},z_=async n=>{try{const e=JSON.parse(JSON.stringify(n));await w5(Xp(vc,r0,n.id),e),console.log(`Package saved to Cloud: ${n.title}`)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},P5=async()=>{try{const n=await jS(Qp(vc,r0)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},V5=async n=>{try{await C5(Xp(vc,r0,n)),console.log(`Package deleted from Cloud: ${n}`)}catch(e){throw console.error("Error deleting package from Firebase:",e),e}};class L5{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(Bx[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const r=this.audioCache[e];r.currentTime=0;const l=r.play();l!==void 0&&l.catch(()=>{});return}const t=Bx[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const oe=new L5;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j5=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),H_=n=>{const e=j5(n);return e.charAt(0).toUpperCase()+e.slice(1)},GS=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),O5=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...h},g)=>F.createElement("svg",{ref:g,...G5,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:GS("lucide",r),...!l&&!O5(h)&&{"aria-hidden":"true"},...h},[...c.map(([m,v])=>F.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(n,e)=>{const t=F.forwardRef(({className:s,...r},l)=>F.createElement(B5,{ref:l,iconNode:e,className:GS(`lucide-${U5(H_(n))}`,`lucide-${n}`,s),...r}));return t.displayName=H_(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ns=Te("activity",z5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Nt=Te("arrow-left",H5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],q5=Te("arrow-up",F5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],BS=Te("award",K5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Y5=Te("bell-off",$5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Q5=Te("bell",J5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],F_=Te("book-open",X5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],rf=Te("book",W5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ts=Te("brain",Z5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],zS=Te("briefcase",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],n3=Te("building-2",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],i3=Te("calculator",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],r3=Te("calendar",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],nc=Te("chart-no-axes-column",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hr=Te("chevron-right",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zs=Te("circle-check-big",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bc=Te("circle-x",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yr=Te("clock",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Md=Te("copy",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],HS=Te("download",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FS=Te("eye",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],g3=Te("file-search",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Vi=Te("file-text",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],v3=Te("funnel",x3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],_3=Te("git-merge",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],E3=Te("globe",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],o0=Te("graduation-cap",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Gi=Te("grid-3x3",A3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Dd=Te("hash",N3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],of=Te("heart",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],l0=Te("history",C3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],I3=Te("info",k3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],M3=Te("landmark",R3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],P3=Te("layout-grid",D3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],qS=Te("lightbulb",V3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pa=Te("loader-circle",L3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],j3=Te("lock",U3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],G3=Te("log-out",O3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Pd=Te("map",B3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],H3=Te("message-circle",z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],lf=Te("message-square",F3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],KS=Te("moon",q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],$3=Te("music",K3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],J3=Te("package",Y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$S=Te("palette",Q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],dc=Te("pause",X3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],q_=Te("pen-tool",W3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],cf=Te("play",Z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tV=Te("plus",eV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sV=Te("refresh-cw",nV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],aV=Te("repeat",iV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],oV=Te("rocket",rV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],op=Te("rotate-ccw",lV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YS=Te("save",cV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_m=Te("search",uV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JS=Te("settings",dV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],hV=Te("shapes",fV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],pV=Te("share-2",mV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yV=Te("shield-check",gV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],QS=Te("sun",xV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xr=Te("target",vV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],lp=Te("timer",bV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Vd=Te("trash-2",_V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],EV=Te("trending-up",TV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cp=Te("triangle-alert",SV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],NV=Te("trophy",AV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ld=Te("type",wV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],c0=Te("upload",CV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],XS=Te("user",kV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],RV=Te("users",IV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],DV=Te("volume-2",MV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],VV=Te("volume-x",PV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],WS=Te("x",LV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Va=Te("zap",UV),jV=()=>{const[n,e]=F.useState(!1),[t,s]=F.useState(1500),[r,l]=F.useState(!1),[c,h]=F.useState("focus");F.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),F.useEffect(()=>{let N=null;return r&&t>0?N=setInterval(()=>{s(t-1)},1e3):t===0&&(l(!1),g()),()=>clearInterval(N)},[r,t]);const g=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(w=>console.log("Audio play failed",w)),"Notification"in window&&Notification.permission==="granted"&&new Notification(c==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:c==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},m=()=>l(!r),v=()=>{l(!1),s(c==="focus"?1500:300)},_=()=>{const N=c==="focus"?"break":"focus";h(N),s(N==="focus"?1500:300),l(!1)},T=N=>{const w=Math.floor(N/60),I=N%60;return`${w.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`};return n?u.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[u.jsxs("div",{className:`p-4 ${c==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(lp,{size:20}),u.jsx("span",{className:"font-bold",children:c==="focus"?"Fokus":"Istirahat"})]}),u.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:u.jsx(WS,{size:18})})]}),u.jsxs("div",{className:"p-6 flex flex-col items-center",children:[u.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),u.jsxs("div",{className:"flex gap-4 mb-6",children:[u.jsx("button",{onClick:m,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:r?u.jsx(dc,{size:24}):u.jsx(cf,{size:24})}),u.jsx("button",{onClick:v,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:u.jsx(op,{size:24})})]}),u.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",c==="focus"?"Istirahat":"Fokus"]})]})]}):u.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[u.jsx(lp,{size:24}),u.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},OV=({data:n,onNext:e})=>{const[t,s]=F.useState(!1);return u.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[u.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[u.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),u.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),u.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),u.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),u.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&u.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[u.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),u.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),u.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},ZS=({node:n,depth:e=0})=>u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&u.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),u.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>u.jsxs("div",{className:"flex flex-col items-center relative",children:[u.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),u.jsx(ZS,{node:t,depth:e+1})]},s))]})]}),GV=({data:n})=>{const e=n.root||n;return u.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:u.jsx(ZS,{node:e})})},dr=({className:n="",height:e="h-4",width:t="w-full"})=>u.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),BV=()=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx(dr,{height:"h-12",width:"w-12",className:"rounded-full"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx(dr,{height:"h-4",width:"w-1/3"}),u.jsx(dr,{height:"h-3",width:"w-1/2"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx(dr,{height:"h-4"}),u.jsx(dr,{height:"h-4"}),u.jsx(dr,{height:"h-4",width:"w-2/3"})]})]}),zV=({onComplete:n})=>{const e=()=>{oe.play("click"),n()};return u.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[u.jsxs("div",{className:"relative mb-8 group",children:[u.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),u.jsx("img",{src:cd,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",u.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),u.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),u.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[u.jsx(oV,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},HV=({isOpen:n,onClose:e,settings:t,onUpdate:s})=>{if(!n)return null;const r=c=>{oe.play("tap"),s({...t,[c]:!t[c]})},l=c=>{s({...t,volume:parseFloat(c.target.value)})};return u.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(JS,{size:24,className:"text-slate-400"})," Pengaturan"]}),u.jsx("button",{onClick:()=>{oe.play("back"),e()},children:u.jsx(bc,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.darkMode?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,children:t.darkMode?u.jsx(KS,{size:20}):u.jsx(QS,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Tema Gelap"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Tampilan malam hari."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.darkMode,onChange:()=>r("darkMode")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?u.jsx(DV,{size:20}):u.jsx(VV,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>r("soundEnabled")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:u.jsx($3,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Musik Latar"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Musik santai saat belajar."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.musicEnabled,onChange:()=>r("musicEnabled")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),u.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:l,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?u.jsx(Q5,{size:20}):u.jsx(Y5,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>r("funnyNotifications")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:u.jsx(zs,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>r("confirmActions")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},FV="Fajmuls22",qV=({category:n,skdStream:e,availablePackages:t,history:s,onSelectPackage:r,onGenerateNew:l,onImportPackage:c,onDeletePackage:h,onBack:g,showToast:m,confirmEnabled:v,onRefresh:_,isLoading:T})=>{F.useEffect(()=>{_()},[]);const[N,w]=F.useState(""),[I,C]=F.useState(!1),[O,j]=F.useState(null),[G,te]=F.useState(!1),ae=F.useRef(null),le=ge=>{const Me=s.filter(ce=>ce.packageId===ge);if(Me.length===0)return{attempts:0,highScore:0,avgScore:0};const J=Me.map(ce=>ce.score);return{attempts:Me.length,highScore:Math.max(...J),avgScore:Math.round(J.reduce((ce,be)=>ce+be,0)/J.length),lastAttemptDate:Me[0].date}},M=(ge,Me)=>{oe.play("click"),j({type:ge,payload:Me}),w(""),C(!0)},D=()=>{var ge;if(!N){m("Masukkan token akses!","error");return}N===FV?(C(!1),oe.play("success"),(O==null?void 0:O.type)==="GENERATE"?R():(O==null?void 0:O.type)==="IMPORT"?(ge=ae.current)==null||ge.click():(O==null?void 0:O.type)==="DELETE"&&U(O.payload)):(oe.play("error"),m("Token salah! Akses ditolak.","error"))},R=async()=>{te(!0);try{await l("verified_client")}catch(ge){console.error(ge)}finally{te(!1)}},U=ge=>{h(ge)},L=(ge,Me)=>{ge.stopPropagation();const J=JSON.stringify(Me,null,2),ce=new Blob([J],{type:"application/json"}),be=URL.createObjectURL(ce),Ae=document.createElement("a");Ae.href=be,Ae.download=`${Me.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(be),m("Paket Soal berhasil didownload","success")},B=()=>{oe.play("click"),_()},V=t.filter(ge=>ge.category===n&&(!e||ge.skdStream===e)).sort((ge,Me)=>ge.title.localeCompare(Me.title,void 0,{numeric:!0,sensitivity:"base"}));return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[I&&u.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:u.jsx(yV,{size:32})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),u.jsx("input",{type:"password",placeholder:"Token Akses...",value:N,onChange:ge=>w(ge.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:ge=>ge.key==="Enter"&&D()}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>C(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),u.jsx("button",{onClick:D,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),u.jsxs("div",{className:"max-w-4xl w-full",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:g,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[u.jsx(Nt,{size:20})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:["Pilih Paket Soal ",n]}),u.jsx("button",{onClick:B,disabled:T,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:u.jsx(sV,{size:20,className:T?"animate-spin":""})})]})]}),u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:["Pilih Paket Soal ",n]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(j3,{size:18,className:"text-slate-400"})," Admin Zone"]}),u.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[u.jsxs("button",{onClick:()=>M("GENERATE"),disabled:G,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[G?u.jsx(Pa,{className:"animate-spin",size:18}):u.jsx(tV,{size:18}),u.jsx("span",{children:"Buat Paket AI"})]}),u.jsxs("button",{onClick:()=>M("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[u.jsx(c0,{size:18}),u.jsx("span",{children:"Import"})]})]})]}),u.jsx("input",{type:"file",ref:ae,className:"hidden",accept:".json",multiple:!0,onChange:ge=>{ge.target.files&&ge.target.files.length>0&&c(ge.target.files),ae.current&&(ae.current.value="")}})]}),T&&V.length===0?u.jsxs("div",{className:"py-20 text-center text-slate-500",children:[u.jsx(Pa,{className:"animate-spin mx-auto mb-2"}),u.jsx("p",{children:"Memuat paket soal terbaru..."})]}):u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:V.map(ge=>{const Me=le(ge.id);return u.jsxs("button",{onClick:()=>r(ge),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[ge.isAiGenerated&&u.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:ge.title}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{onClick:J=>L(J,ge),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:u.jsx(HS,{size:18})}),u.jsx("div",{onClick:J=>{J.stopPropagation(),M("DELETE",ge.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:u.jsx(Vd,{size:18})})]})]}),u.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(yr,{size:12})," ",ge.durationMinutes," Menit"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Vi,{size:12})," ",ge.questions.length," Soal"]}),ge.version==="v2"&&u.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),u.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[Me.attempts,"x"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),u.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:Me.highScore})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),u.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:Me.avgScore})]})]})]},ge.id)})})]})]})},KV=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},$V=({answers:n,questions:e,onHome:t,onRetry:s,category:r,details:l})=>{const c=n.filter(I=>I.isCorrect).length;let h=(l==null?void 0:l.total)||(l==null?void 0:l.average)||(l==null?void 0:l.iqScore)||Math.round(c/e.length*100);if(r==="GENERAL"&&!l){const I=n.reduce((C,O)=>C+(O.scoreEarned||0),0);h=Math.round(I/(e.length||1))}const[g,m]=F.useState(""),[v,_]=F.useState(!1),T=n.filter(I=>!I.isCorrect),N=Array.from(new Set(T.map(I=>{var O,j;const C=e.find(G=>G.id===I.questionId);return((O=C==null?void 0:C.metadata)==null?void 0:O.subtest)||((j=C==null?void 0:C.metadata)==null?void 0:j.topic)||"General"}))),w=async()=>{_(!0);try{const I=await pM(N);m(I)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return u.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:u.jsxs("div",{className:"max-w-2xl w-full text-center",children:[u.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:h>=(r==="UTBK"?600:70)?u.jsx(BS,{size:48,className:"text-emerald-500"}):u.jsx(Ns,{size:48,className:"text-amber-500"})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),u.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:h})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:r==="GENERAL"?"Poin":"Akurasi"}),u.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:r==="GENERAL"?h:`${Math.round(c/e.length*100)}%`})]})]}),r==="UTBK"&&l&&u.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Umum:"})," ",u.jsx("b",{children:l.pu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PPU:"})," ",u.jsx("b",{children:l.ppu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PBM:"})," ",u.jsx("b",{children:l.pbm})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Kuantitatif:"})," ",u.jsx("b",{children:l.pk})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Indo:"})," ",u.jsx("b",{children:l.lbi})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Inggris:"})," ",u.jsx("b",{children:l.lbe})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Math:"})," ",u.jsx("b",{children:l.pm})]})]})]}),N.length>0&&u.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[u.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[u.jsx(xr,{size:20})," Topik Perlu Perbaikan"]}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:N.slice(0,5).map(I=>u.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:I},I))}),g?u.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[u.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),u.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:u.jsx(KV,{text:g})})]}):u.jsxs("button",{onClick:w,disabled:v,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[v?u.jsx(Pa,{className:"animate-spin",size:14}):u.jsx(qS,{size:14}),"Minta Saran Perbaikan AI"]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[u.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.map((I,C)=>{const O=n.find(G=>G.questionId===I.id),j=O==null?void 0:O.isCorrect;return u.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",C+1]}),j?u.jsx(zs,{size:16,className:"text-emerald-500"}):u.jsx(bc,{size:16,className:"text-rose-500"})]}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:I.content})]},C)})})]}),u.jsxs("div",{className:"flex gap-4 w-full",children:[u.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),u.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},K_=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},Ud=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,e1=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,ld=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,YV=n=>{switch(n){case"UTBK":return{icon:o0,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:zS,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Ts,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:Va,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:FS,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:lf,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:$S,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:rf,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:Vi,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},Pi=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},$_=(n,e)=>{const t=e>0?n/e*100:0;return Pi(t,"PERCENT").color},Y_=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},t1=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,JV=({history:n,onBack:e,onReview:t,username:s,onExport:r,onImport:l,onDelete:c})=>{const[h,g]=F.useState("ALL"),[m,v]=F.useState(null),_=F.useRef(null),T=n.filter(j=>h==="ALL"||j.category===h),N=T.length,w=N>0?Math.round(T.reduce((j,G)=>j+G.score,0)/N):0,I=N>0?Math.max(...T.map(j=>j.score)):0,C=(j,G)=>{j.stopPropagation(),oe.play("click"),v(G)},O=()=>{m&&(c(m),v(null))};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[m&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:u.jsx(Vd,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),u.jsxs("div",{className:"flex gap-3 w-full",children:[u.jsx("button",{onClick:()=>v(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),u.jsx("button",{onClick:O,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:u.jsx(Nt,{size:20})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),u.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(XS,{size:12})," ",s]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[u.jsx(HS,{size:14})," Backup"]}),u.jsxs("button",{onClick:()=>{var j;return(j=_.current)==null?void 0:j.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[u.jsx(c0,{size:14})," Restore"]}),u.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:j=>{var G;(G=j.target.files)!=null&&G[0]&&l(j.target.files[0]),_.current&&(_.current.value="")}})]})]}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[u.jsx("button",{onClick:()=>g("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),iT.map(j=>u.jsx("button",{onClick:()=>g(j.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h===j.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:j.name},j.id))]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(v3,{size:14})," Total Tes"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:N})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(EV,{size:14})," Avg Skor"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:w})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(BS,{size:14})," Tertinggi"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:I})]})]}),u.jsx("div",{className:"space-y-4",children:T.length===0?u.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[u.jsx(l0,{size:48,className:"mx-auto mb-4 opacity-20"}),u.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(j=>{const G=YV(j.category),te=G.icon,ae=j.questions?j.questions.length:0,le=j.answers?j.answers.length:0,M=j.answers?j.answers.filter($=>$.isCorrect).length:0,D=le-M,R=j.answers?j.answers.reduce(($,ue)=>$+(ue.timeTakenSeconds||0),0):0,U=Y_(R),L=Ud(j),B=e1(j),V=ld(j);let ge=j.category;j.category==="TPA"?ge="TPA & Bahasa Inggris":j.category==="PSIKOTEST"&&Ud(j)?ge="Tes Koran / Pauli":j.category==="PSIKOTEST"&&ld(j)?ge="Psikotes (IQ & Logika)":j.category==="KECERMATAN"&&(ge="Tes Kecermatan"),j.packageTitle&&(ge=j.packageTitle);let Me=j.score.toString(),J="SKOR",ce={text:"-",color:"text-slate-500"};if(B){const $=j.details;Me=$.accuracy+"%",J="AKURASI",ce=Pi($.accuracy,"PERCENT")}else if(L){const $=j.details;Me=$.accuracy+"%",J="AKURASI",ce=Pi($.accuracy,"PERCENT")}else if(V){const $=j.details.iqScore||j.score;Me=$.toString(),J="IQ SCORE",ce=Pi($,"IQ")}else{const $=j.maxScore>0?j.score/j.maxScore*100:0;ce=Pi($,"PERCENT")}const be=ce.color;let Ae=M,xe=D,z=0,se=0,Z={val:0,index:0},K=[];if(B){const $=j.details;Ae=$.totalCorrect,xe=$.totalWrong,z=$.averageSpeed,se=$.stability,K=$.sectionData.map(ue=>ue.correct)}else if(L){const $=j.details;Ae=$.totalCorrect,xe=$.totalWrong,z=$.speedPerMinute,se=$.consistencyScore,K=$.intervalData}if(K&&K.length>0){const $=Math.max(...K),ue=K.indexOf($);Z={val:$,index:ue+1}}return u.jsxs("div",{onClick:()=>t(j),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[u.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[j.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),j.details&&j.details.passed!==void 0&&u.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${j.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:j.details.passed?"LULUS":"TIDAK LULUS"})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${G.bg} ${G.color} border ${G.border}`,children:u.jsx(te,{size:24})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:ge}),j.packageTitle&&j.packageTitle!==ge&&u.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[u.jsx(J3,{size:10})," ",j.packageTitle]}),u.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(r3,{size:12})," ",new Date(j.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),j.skdStream&&u.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:j.skdStream}),B&&j.details.mode&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:t1(j.details.mode)}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(yr,{size:10})," ",U]})]}),L&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(yr,{size:10})," ",U]})]}),ld(j)&&u.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),u.jsxs("div",{className:"text-right shrink-0",children:[u.jsx("div",{className:`text-2xl font-black ${be}`,children:Me}),u.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:J})]})]}),u.jsxs("div",{className:"mt-3",children:[B||L?u.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),u.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:Ae+xe})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),u.jsxs("span",{className:"font-bold",children:[u.jsx("span",{className:"text-emerald-500",children:Ae})," / ",u.jsx("span",{className:"text-rose-500",children:xe})]})]}),u.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),u.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:z})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),u.jsx("span",{className:"font-black text-amber-500",children:se})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),u.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${Z.val} at Interval ${Z.index}`,children:[Z.val,u.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",Z.index]})]})]}),u.jsxs("div",{className:"flex flex-col text-center",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),u.jsx("span",{className:`font-black text-[10px] leading-tight ${ce.color}`,children:ce.text})]})]}):u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[le," ",u.jsxs("span",{className:"text-slate-400",children:["/ ",ae]})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),u.jsxs("span",{className:"font-bold text-emerald-600",children:[M," ",u.jsx("span",{className:"text-slate-400",children:"/"})," ",u.jsx("span",{className:"text-rose-500",children:D})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:Y_(R)})]}),j.category==="SKD"&&j.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),u.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[u.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",j.details.twk]}),u.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",j.details.tiu]}),u.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",j.details.tkp]})]})]}),j.category==="UTBK"&&j.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:j.details.average})]})]}),(L||B)&&K.length>0&&u.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:K.map(($,ue)=>{const ye=Math.max(...K,1),Se=$/ye*100;return u.jsx("div",{className:`flex-1 rounded-t-sm ${ue+1===Z.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${Se}%`}},ue)})})]})]})]}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:$=>C($,j.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:u.jsx(Vd,{size:14})}),u.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:u.jsx(hr,{size:14})})]})]},j.id)})})]})]})},QV=({item:n,onBack:e})=>{if(Ud(n)||e1(n)){const t=Ud(n),s=n.details;let r=[],l=0,c=0,h=0,g=0,m=0,v="",_={text:"-",color:"text-slate-500"};if(t){const w=s;r=w.intervalData||[],l=w.totalCorrect,c=w.totalWrong,h=w.speedPerMinute,g=w.accuracy,m=w.consistencyScore,v="PAULI / KORAN",_=Pi(w.accuracy,"PERCENT")}else{const w=s;r=w.sectionData.map(I=>I.correct),l=w.totalCorrect,c=w.totalWrong,h=w.averageSpeed,g=w.accuracy,m=w.stability,v=t1(w.mode),_=Pi(w.accuracy,"PERCENT")}let T=0,N=0;return r.length>0&&(T=Math.max(...r),N=r.indexOf(T)+1),u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(Nt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[u.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:u.jsx(Ns,{size:32})}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",v]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",u.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:l}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),u.jsx("div",{className:"text-3xl font-black text-rose-500",children:c}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:h}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),u.jsxs("div",{className:`text-3xl font-black ${Pi(g,"PERCENT").color}`,children:[g,"%"]}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:m}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),u.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",N]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),u.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:r.map((w,I)=>{const C=Math.max(...r,10),O=w/C*100,j=w===T;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[u.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${j?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${O}%`}}),u.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:I+1}),u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",I+1,": ",w]})]},I)})}),u.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",u.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(Nt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),u.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),u.jsx("div",{className:`text-3xl font-black ${$_(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tpaScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tpaCorrect})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tbiScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tbiCorrect})]})]}),n.category==="UTBK"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),u.jsxs("div",{className:`text-xl font-black ${$_(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>u.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),u.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),ld(n)&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),u.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${Pi(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),u.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),u.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(Va,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),u.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var g;const r=n.answers.find(m=>m.questionId===t.id),l=r==null?void 0:r.isCorrect,c=(r==null?void 0:r.scoreEarned)||0;let h="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return c>0?t.tkpPoints?c===5?h="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":h="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":h="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":h="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),u.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(g=t.metadata)==null?void 0:g.subtest})]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${h}`,children:[c>0?u.jsx(zs,{size:12}):u.jsx(bc,{size:12}),c," Poin"]})]}),u.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:u.jsx(K_,{text:t.content})}),u.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[u.jsxs("div",{className:`p-3 rounded-lg border ${l?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[u.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(r==null?void 0:r.selectedAnswer)||"Tidak dijawab"]}),!l&&!t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),u.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((m,v)=>v.points-m.points).map((m,v)=>u.jsxs("li",{className:m.option===(r==null?void 0:r.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[m.points," Poin: ",m.option]},v))})]})]}),u.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[u.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block mb-1",children:"Pembahasan:"}),u.jsx(K_,{text:t.explanation})]})]},s)})})]})]})})},Tm=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},XV=({timeLeft:n,onFinish:e})=>(F.useEffect(()=>{n<=0&&e()},[n,e]),u.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[u.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:u.jsx(lp,{size:48,className:"text-white"})}),u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),u.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),u.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),u.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),WV=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:r,isUtbkSimulation:l,category:c,showToast:h})=>{var xe,z,se;const[g,m]=F.useState(0),[v,_]=F.useState(!1),[T,N]=F.useState(0),[w,I]=F.useState(0),[C,O]=F.useState({}),[j,G]=F.useState(!1),[te,ae]=F.useState(!1),le=F.useRef(Date.now()),M=()=>l&&_a[0]?_a[0].duration*60:r?6e3:n===Ge.SIMULATION?c==="PSIKOTEST"?2400:c==="TPA"?6e3:3600:0,[D,R]=F.useState(M),U=F.useMemo(()=>{if(l){const Z=_a[g].name;return e.filter(K=>{var $,ue;return(ue=($=K.metadata)==null?void 0:$.subtest)==null?void 0:ue.includes(Z)})}return e},[e,l,g]);F.useEffect(()=>{let Z=null;return v&&T>0?Z=setInterval(()=>N(K=>K-1),1e3):v&&T===0?_(!1):D>0&&!j&&n===Ge.SIMULATION?Z=setInterval(()=>{R(K=>(K<=11&&K>1&&oe.play("tick"),K-1))},1e3):D===0&&n===Ge.SIMULATION&&(l?L():B()),()=>clearInterval(Z)},[D,j,v,T,n]);const L=()=>{if(l)if(g<_a.length-1){oe.play("success");const Z=g+1;m(Z);const K=_a[Z].duration;R(K*60),I(0),N(30),_(!0)}else B();else B()},B=()=>{oe.play("finish"),s(Object.values(C))},V=()=>{const Z=Object.values(C);s(Z,void 0,!0)},ge=async Z=>{var vt;const K=U[w];if(!K)return;oe.play("click");let $=0,ue=!1;if(c==="SKD")if(K.tkpPoints&&K.tkpPoints.length>0){const it=K.tkpPoints.find(pt=>pt.option===Z);$=it?it.points:0,ue=$===5}else ue=Z===K.correctAnswer,$=ue?5:0;else if(c==="UTBK"){ue=Z===K.correctAnswer;const it=((vt=K.metadata)==null?void 0:vt.difficulty)||"Medium";$=ue?it==="HOTS"||it==="Hard"?3:it==="Medium"?2:1:0}else ue=Z===K.correctAnswer,$=ue?10:0;let ye="";if(K.type!=="multiple_choice"&&c==="GENERAL")try{const it=await mM(K.content,K.correctAnswer,Z);$=it.score,ue=it.isCorrect,ye=it.feedback}catch{console.error("Grading failed")}const Se=C[K.id],Ce=(Date.now()-le.current)/1e3,Xe={questionId:K.id,selectedAnswer:Z,isCorrect:ue,scoreEarned:$,timeTakenSeconds:((Se==null?void 0:Se.timeTakenSeconds)||0)+Ce,isOverthinking:!1,isGuessing:Ce<5,aiEvaluation:ye,isDoubtful:(Se==null?void 0:Se.isDoubtful)||!1};O(it=>({...it,[K.id]:Xe})),le.current=Date.now()},Me=()=>{const Z=U[w];O(K=>{const $=K[Z.id];return $?{...K,[Z.id]:{...$,isDoubtful:!$.isDoubtful}}:{...K,[Z.id]:{questionId:Z.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},J=Z=>{const K=Math.floor(Z/3600),$=Math.floor(Z%3600/60),ue=Math.floor(Z%60);return`${K>0?K+":":""}${$.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}`},ce=(Z,K)=>Z.length===0?null:u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:K}),u.jsx("div",{className:"grid grid-cols-5 gap-2",children:Z.map(($,ue)=>{const ye=U.findIndex(Xe=>Xe.id===$.id),Se=C[$.id];let Ce="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return Se!=null&&Se.selectedAnswer&&(Ce="bg-emerald-500 border-emerald-500 text-white"),Se!=null&&Se.isDoubtful&&(Ce="bg-amber-400 border-amber-400 text-white"),ye===w&&(Ce+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),u.jsx("button",{onClick:()=>{I(ye),ae(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${Ce}`,children:ye+1},$.id)})})]});if(v)return u.jsx(XV,{timeLeft:T,onFinish:()=>{_(!1)}});if(U.length===0)return u.jsxs("div",{className:"p-10 text-center",children:[u.jsx(Pa,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const be=U[w],Ae=C[be.id];return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[j&&u.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[u.jsx(dc,{size:48,className:"mx-auto mb-4 text-indigo-600"}),u.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsxs("button",{onClick:()=>G(!1),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center gap-2",children:[u.jsx(cf,{size:20})," Lanjutkan"]}),u.jsx("button",{onClick:V,className:"px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan)"})]})]})}),u.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[u.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[u.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",w+1]}),u.jsxs("div",{className:"flex items-center gap-2",children:[n===Ge.SIMULATION&&u.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:J(D)}),u.jsx("button",{onClick:()=>ae(!te),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:u.jsx(Gi,{size:20})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===Ge.DRILL&&t&&u.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[u.jsx(Va,{size:16})," ",t.topic]}),u.jsx("p",{children:t.summary})]}),u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:l?_a[g].name:((xe=be.metadata)==null?void 0:xe.subtest)||"General"}),((z=be.metadata)==null?void 0:z.difficulty)==="HOTS"&&u.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[u.jsx(Va,{size:12})," HOTS"]})]}),u.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100",children:u.jsx(Tm,{text:be.content})}),be.type==="multiple_choice"?u.jsx("div",{className:"space-y-3",children:(se=be.options)==null?void 0:se.map((Z,K)=>{var Ce;const $=String.fromCharCode(65+K),ue=(Ae==null?void 0:Ae.selectedAnswer)===Z;let ye="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",Se="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return ue&&(ye="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",Se="bg-indigo-600 text-white"),n!==Ge.SIMULATION&&Ae&&((be.tkpPoints?((Ce=be.tkpPoints.find(vt=>vt.option===Z))==null?void 0:Ce.points)===5:Z===be.correctAnswer)?(ye="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",Se="bg-emerald-500 text-white"):ue&&(ye="border-rose-500 bg-rose-50 dark:bg-rose-900/20",Se="bg-rose-500 text-white")),u.jsxs("button",{onClick:()=>ge(Z),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${ye}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${Se}`,children:$}),u.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-base",children:u.jsx(Tm,{text:Z})})]},K)})}):u.jsxs("div",{children:[" ",u.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:(Ae==null?void 0:Ae.selectedAnswer)||"",onChange:Z=>ge(Z.target.value)})," "]})]}),n!==Ge.SIMULATION&&Ae&&u.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[u.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[u.jsx(qS,{size:20})," Pembahasan"]}),u.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:u.jsx(Tm,{text:be.explanation})})]})]})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[u.jsxs("button",{onClick:()=>{I(Z=>Math.max(0,Z-1))},disabled:w===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[u.jsx(Nt,{size:20})," ",u.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),u.jsxs("button",{onClick:Me,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${Ae!=null&&Ae.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[u.jsx("input",{type:"checkbox",checked:(Ae==null?void 0:Ae.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),u.jsx("span",{children:"Ragu-ragu"})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),w<U.length-1?I(Z=>Z+1):l?L():B()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[u.jsx("span",{className:"hidden sm:inline",children:w===U.length-1?l&&g<_a.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),u.jsx(hr,{size:20})]})]})})]}),u.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${te?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[u.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[u.jsxs("button",{onClick:V,className:"flex items-center gap-2 text-rose-500 font-bold hover:text-rose-600",children:[u.jsx(Nt,{size:18})," Keluar (Simpan)"]}),u.jsx("button",{onClick:()=>ae(!1),className:"md:hidden text-slate-500",children:u.jsx(bc,{size:24})})]}),n===Ge.SIMULATION&&D>0&&u.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),u.jsxs("button",{onClick:()=>G(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[u.jsx(dc,{size:12})," Jeda"]})]}),u.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:J(D)})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:r?u.jsxs(u.Fragment,{children:[ce(U.filter(Z=>{var K,$;return($=(K=Z.metadata)==null?void 0:K.subtest)==null?void 0:$.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),ce(U.filter(Z=>{var K,$;return($=(K=Z.metadata)==null?void 0:K.subtest)==null?void 0:$.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),ce(U.filter(Z=>{var K,$;return($=(K=Z.metadata)==null?void 0:K.subtest)==null?void 0:$.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):ce(U,l?_a[g].name:c)}),u.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:u.jsx("button",{onClick:B,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),te&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>ae(!1)})]})},Zu=10,Em=60,ZV=500,J_=50,eL=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),tL=(n,e,t,s,r)=>{let l=0;return n>=400?l+=40:n>=300?l+=30:n>=200?l+=20:l+=10,t>=99?l+=20:t>=97?l+=15:t>=95?l+=10:l+=5,s<3?l+=20:s<6?l+=15:s<9?l+=10:l+=5,r==="NAIK"?l+=20:r==="STABIL"?l+=15:l+=5,l>=90?"Sangat Disarankan (Konsisten & Tinggi)":l>=75?"Disarankan (Baik)":l>=60?"Cukup (Perlu Latihan)":r==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},nL=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),r=t.reduce((h,g)=>h+g,0)/(t.length||1),c=(s.reduce((h,g)=>h+g,0)/(s.length||1)-r)/r*100;return c>5?"NAIK":c<-10?"TURUN":"STABIL"},sL=({onBack:n,onComplete:e})=>{const[t,s]=F.useState("SETUP"),[r,l]=F.useState([]),[c,h]=F.useState(0),[g,m]=F.useState(0),[v,_]=F.useState(0),[T,N]=F.useState(0),[w,I]=F.useState([]),[C,O]=F.useState(0),[j,G]=F.useState(!1),[te,ae]=F.useState(Zu*60),[le,M]=F.useState(Em),D=()=>{const xe=eL(ZV,J_);l(xe),h(0),m(0),_(0),N(0),I([]),O(0),ae(Zu*60),M(Em),s("PLAYING"),oe.play("click")},R=F.useCallback(xe=>{if(t!=="PLAYING")return;const z=r[c][g],se=r[c][g+1];if(se===void 0){h(ue=>ue+1),m(0);return}const K=(z+se)%10;xe===K?(_(ue=>ue+1),O(ue=>ue+1)):(N(ue=>ue+1),oe.play("error")),g<J_-2?m(ue=>ue+1):(h(ue=>ue+1),m(0))},[r,c,g,t]);F.useEffect(()=>{const xe=z=>{t==="PLAYING"&&z.key>="0"&&z.key<="9"&&R(parseInt(z.key))};return window.addEventListener("keydown",xe),()=>window.removeEventListener("keydown",xe)},[t,R]),F.useEffect(()=>{if(t!=="PLAYING")return;const xe=setInterval(()=>{ae(z=>z<=1?(B(),0):z-1),M(z=>(z<=6&&z>1&&oe.play("tick"),z<=1?(oe.play("success"),L(),Em):z-1))},1e3);return()=>clearInterval(xe)},[t,C]);const U=F.useRef(0);F.useEffect(()=>{U.current=C},[C]);const L=()=>{const xe=U.current;I(z=>[...z,xe]),O(0),G(!0),setTimeout(()=>G(!1),2e3)},B=(xe=!1)=>{const z=U.current;z>0&&I(se=>[...se,z]),s("FINISHED"),xe||oe.play("finish")},V=()=>{const xe=v+T,z=(Zu*60-te)/60,se=z<.1?.1:z,Z=se>0?Math.round(v/se):0,K=xe>0?v/xe*100:0;let $=0;if(w.length>0){const Se=w.reduce((Xe,vt)=>Xe+vt,0)/w.length,Ce=w.reduce((Xe,vt)=>Xe+Math.pow(vt-Se,2),0)/w.length;$=Math.sqrt(Ce)}const ue=nL(w),ye=tL(v,Z,K,$,ue);return{totalCorrect:v,totalWrong:T,totalAttempts:xe,totalColumns:c,speedPerMinute:Z,consistencyScore:parseFloat($.toFixed(2)),accuracy:Math.round(K),intervalData:w,interpretation:{verdict:ye,speedDesc:Z>50?"Sangat Cepat":Z>35?"Cepat":"Sedang",accDesc:K>98?"Sangat Teliti":K>92?"Teliti":"Kurang Teliti",stabDesc:ue==="TURUN"?"Menurun (Lelah)":$<4?"Stabil":"Fluktuatif",trend:ue}}},ge=xe=>{const z=Math.floor(xe/60),se=xe%60;return`${z}:${se.toString().padStart(2,"0")}`},Me=()=>{const xe=V(),z={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:xe.totalCorrect,maxScore:0,details:xe,questions:[],answers:[],isAborted:!0};e(z)};if(t==="SETUP")return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[u.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[u.jsx(Ns,{size:64,className:"mx-auto mb-4 relative z-10"}),u.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),u.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),u.jsxs("div",{className:"p-8 space-y-6",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(yr,{size:18,className:"text-indigo-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Durasi:"})," ",Zu," Menit"]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(Ns,{size:18,className:"text-emerald-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(nc,{size:18,className:"text-amber-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),u.jsxs("button",{onClick:D,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[u.jsx(cf,{size:24,fill:"currentColor"})," Mulai Tes"]}),u.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const xe=V(),z={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:xe.totalCorrect,maxScore:0,details:xe,questions:[],answers:[]};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),u.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:xe.interpretation.verdict})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Ns,{size:14})," Prestasi (Total)"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:xe.totalCorrect}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(yr,{size:14})," Tempo"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:xe.speedPerMinute}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(zs,{size:14})," Ketelitian"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:xe.totalWrong}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",xe.interpretation.accDesc,")"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(nc,{size:14})," Stabilitas"]}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:xe.consistencyScore}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",xe.interpretation.trend,")"]})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[u.jsx(nc,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),u.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:xe.intervalData.map((se,Z)=>{const K=Math.max(...xe.intervalData,1),$=se/K*100;return u.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${$}%`},children:[u.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:Z+1}),u.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:se})]},Z)})}),u.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),u.jsxs("button",{onClick:()=>e(z),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsx(YS,{size:20})," Simpan & Keluar"]})]})]})})}const J=r[c]||[],ce=J[g],be=J[g+1],Ae=[1,2,3,4,5,6,7,8,9,0];return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),u.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:ge(te)})]}),u.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),u.jsx("div",{className:"text-xl font-bold text-emerald-600",children:v})]})]}),u.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx(dc,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),j&&u.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),u.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:u.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:g>0?J[g-1]:"-"}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:ce}),u.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:be!==void 0?be:"-"})]}),u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:J[g+2]!==void 0?J[g+2]:"-"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[u.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Ae.map(xe=>u.jsx("button",{onClick:()=>R(xe),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:xe},xe))}),u.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),u.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:Me,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},Sm=10,Q_=60,X_=["A","B","C","D","E"],Gn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],W_=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},Z_=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...Gn].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((r,l)=>l!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},eT=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>Gn[Math.floor(Math.random()*Gn.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const r=Math.floor(Math.random()*n);let l=Gn[Math.floor(Math.random()*Gn.length)];for(;l===e[r];)l=Gn[Math.floor(Math.random()*Gn.length)];s[r]=l}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=Gn.find(c=>c!==s[0])||"X"));return{left:e,right:s,isSame:t}},tT=()=>{const e=[...Gn].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},nT=()=>{const n=Gn[Math.floor(Math.random()*Gn.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=Gn[Math.floor(Math.random()*Gn.length)];for(;s===n;)s=Gn[Math.floor(Math.random()*Gn.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},iL=({initialMode:n,onBack:e,onComplete:t})=>{var Z;const[s,r]=F.useState(n||"ANGKA"),[l,c]=F.useState(1),[h,g]=F.useState(Q_),[m,v]=F.useState(!1),[_,T]=F.useState("PLAYING"),[N,w]=F.useState(null),[I,C]=F.useState(null),[O,j]=F.useState(null),[G,te]=F.useState(null),[ae,le]=F.useState([]),[M,D]=F.useState([]),[R,U]=F.useState(0),[L,B]=F.useState(0),[V,ge]=F.useState(null),Me=F.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(N){const K=Math.floor(Math.random()*5),$=N.reference.filter((ue,ye)=>ye!==K).sort(()=>.5-Math.random());w({...N,question:$,answer:K})}else{const K=Z_(s);w(K)}else if(s==="SAMA_BEDA")C(eT());else if(s==="MATCHING")if(!O)j(tT());else{const K=Math.floor(Math.random()*5);j({...O,target:O.map[K],answer:K})}else s==="GROUPING"&&(te(nT()),le([]))},[s,N,O]),J=F.useCallback(()=>{w(null),j(null),C(null),te(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?w(Z_(s)):s==="SAMA_BEDA"?C(eT()):s==="MATCHING"?j(tT()):s==="GROUPING"&&(te(nT()),le([])),g(Q_),U(0),B(0)},[s]);F.useEffect(()=>{_==="PLAYING"&&J()},[l,s,_]);const ce=K=>{if(m)return;let $=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?$=K===(N==null?void 0:N.answer):s==="SAMA_BEDA"?$=K===(I==null?void 0:I.isSame):s==="MATCHING"&&($=K===(O==null?void 0:O.answer)),$?(U(ue=>ue+1),ge("CORRECT")):(B(ue=>ue+1),ge("WRONG"),oe.play("error")),setTimeout(()=>ge(null),150),Me()},be=()=>{if(!G)return;let K=0,$=0;ae.forEach(ye=>{G.grid[ye]===G.target?K++:$++});const ue=G.totalCorrect-K;U(ye=>ye+K),B(ye=>ye+$+ue),$===0&&ue===0?(ge("CORRECT"),oe.play("success")):(ge("WRONG"),oe.play("error")),setTimeout(()=>ge(null),200),Me()},Ae=K=>{oe.play("click"),le($=>$.includes(K)?$.filter(ue=>ue!==K):[...$,K])};F.useEffect(()=>{if(m||_==="FINISHED")return;const K=setInterval(()=>{g($=>($<=6&&$>1&&oe.play("tick"),$<=1?(xe(),0):$-1))},1e3);return()=>clearInterval(K)},[m,l,_,R,L]);const xe=()=>{D(K=>{if(K.find(ye=>ye.section===l))return K;const $={section:l,correct:R,wrong:L},ue=[...K,$];return l>=Sm?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{c(ye=>ye+1),oe.play("success")},0),ue})},z=()=>{const K=M.length,$=M.reduce((Ke,Nn)=>Ke+Nn.correct,0),ue=M.reduce((Ke,Nn)=>Ke+Nn.wrong,0),ye=K>0?$/K:0,Se=$+ue,Ce=Se>0?$/Se*100:0,Xe=ye,vt=M.reduce((Ke,Nn)=>Ke+Math.pow(Nn.correct-Xe,2),0)/(K||1),it=Math.sqrt(vt),pt=W_(Ce,ye,it),zt={mode:s,totalCorrect:$,totalWrong:ue,averageSpeed:parseFloat(ye.toFixed(1)),accuracy:parseFloat(Ce.toFixed(1)),sectionData:M,stability:parseFloat(it.toFixed(2)),verdict:pt},sn={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Ce),maxScore:100,details:zt,questions:[],answers:[]};oe.play("finish"),t(sn)},se=()=>{const K={section:l,correct:R,wrong:L},$=[...M];$.find(sn=>sn.section===l)||$.push(K);const ue=$.reduce((sn,Ke)=>sn+Ke.correct,0),ye=$.reduce((sn,Ke)=>sn+Ke.wrong,0),Se=ue/($.length||1),Ce=ue+ye,Xe=Ce>0?ue/Ce*100:0,pt={mode:s,totalCorrect:ue,totalWrong:ye,averageSpeed:parseFloat(Se.toFixed(1)),accuracy:parseFloat(Xe.toFixed(1)),sectionData:$,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},zt={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Xe),maxScore:100,details:pt,questions:[],answers:[],isAborted:!0};t(zt)};if(_==="FINISHED"){const K=M.reduce((it,pt)=>it+pt.correct,0),$=M.reduce((it,pt)=>it+pt.wrong,0),ue=K/M.length,ye=K/(K+$)*100,Se=ue,Ce=M.reduce((it,pt)=>it+Math.pow(pt.correct-Se,2),0)/M.length,Xe=Math.sqrt(Ce),vt=W_(ye,ue,Xe);return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),u.jsx("div",{className:"flex justify-center mb-8",children:u.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:vt})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),u.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ue.toFixed(1)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),u.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[ye.toFixed(1),"%"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),u.jsx("div",{className:"text-2xl font-black text-amber-500",children:Xe.toFixed(2)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),u.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:Sm}).map((it,pt)=>{const zt=M.find(Pn=>Pn.section===pt+1),sn=zt?zt.correct:0,Ke=Math.max(...M.map(Pn=>Pn.correct),10),Nn=sn/Ke*100;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[u.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${Nn}%`},children:u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",pt+1,": ",sn]})}),u.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:pt+1})]},pt)})})]}),u.jsxs("button",{onClick:z,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[u.jsx(YS,{size:20})," Simpan Hasil"]})]})})}return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),u.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[l,"/",Sm]})]}),u.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),u.jsxs("span",{className:`text-lg font-mono font-black ${h<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[h,"s"]})]}),u.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),u.jsx("span",{className:"text-lg font-black text-emerald-600",children:R})]})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx(dc,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),u.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[V&&u.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${V==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:u.jsx("div",{className:`p-4 rounded-full ${V==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:V==="CORRECT"?u.jsx(zs,{size:64}):u.jsx(op,{size:64})})}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1",children:(Z=s==="MATCHING"?O==null?void 0:O.map:N==null?void 0:N.reference)==null?void 0:Z.map((K,$)=>u.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:u.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:K})},$))}),u.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:X_.map((K,$)=>u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:K},$))})]}),u.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?u.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:u.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:O==null?void 0:O.target})}):u.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:N==null?void 0:N.question.map((K,$)=>u.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:K},$))})]})]}),s==="SAMA_BEDA"&&I&&u.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[u.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:I.left.map((K,$)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:K},$))})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:I.right.map((K,$)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:K},$))})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[u.jsxs("button",{onClick:()=>ce(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(zs,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),u.jsxs("button",{onClick:()=>ce(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(op,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),u.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&G&&u.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[u.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",u.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:G.target})]}),u.jsx("button",{onClick:be,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),u.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:G.grid.map((K,$)=>{const ue=ae.includes($);return u.jsx("button",{onClick:()=>Ae($),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${ue?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:K},$)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:u.jsx("div",{className:"max-w-3xl mx-auto",children:u.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:X_.map((K,$)=>u.jsx("button",{onClick:()=>ce($),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:u.jsx("span",{className:"text-xl sm:text-2xl font-black",children:K})},$))})})}),m&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),u.jsx("button",{onClick:()=>v(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:se,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},aL=({targetNumber:n,refreshTrigger:e})=>{const t=F.useRef(null);return F.useEffect(()=>{const s=t.current;if(!s)return;const r=s.getContext("2d");if(!r)return;r.clearRect(0,0,s.width,s.height);const l=document.createElement("canvas");l.width=s.width,l.height=s.height;const c=l.getContext("2d");if(!c)return;c.fillStyle="#000000",c.fillRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.font='bold 160px "Arial Rounded MT Bold", "Helvetica Rounded", Arial, sans-serif',c.textAlign="center",c.textBaseline="middle";const h=(Math.random()-.5)*.2;c.save(),c.translate(s.width/2,s.height/2),c.rotate(h),c.fillText(n.toString(),0,0),c.restore();const m=c.getImageData(0,0,s.width,s.height).data,v=["#E74C3C","#E67E22","#D35400","#C0392B","#F1948A","#E59866","#CD6155"],_=["#27AE60","#2ECC71","#1ABC9C","#16A085","#7DCEA0","#73C6B6","#A9DFBF","#52BE80"],T=s.width/2,N=s.height/2,w=s.width/2-5,I=3500;for(let C=0;C<I;C++){let O=Math.random()*s.width,j=Math.random()*s.height;if(Math.sqrt(Math.pow(O-T,2)+Math.pow(j-N,2))>w)continue;const te=Math.random()*4+1.5,ae=(Math.floor(j)*s.width+Math.floor(O))*4,M=m[ae]>128?v:_;let D=M[Math.floor(Math.random()*M.length)];Math.random()<.05&&(D="#95A5A6"),r.beginPath(),r.arc(O,j,te,0,Math.PI*2),r.fillStyle=D,r.fill()}},[n,e]),u.jsxs("div",{className:"relative",children:[u.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-50 dark:bg-slate-800 mx-auto border-4 border-slate-200 dark:border-slate-700"}),u.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner pointer-events-none opacity-20 bg-gradient-to-br from-white to-black"})]})},rL=({onBack:n,onComplete:e})=>{const[t,s]=F.useState([]),[r,l]=F.useState(0),[c,h]=F.useState([]),[g,m]=F.useState(""),[v,_]=F.useState(!1);F.useEffect(()=>{const w=Array.from({length:10},()=>({number:Math.floor(Math.random()*90)+10}));s(w)},[]);const T=()=>{oe.play("click");const w=[...c,g];h(w),m(""),r<t.length-1?l(r+1):(oe.play("finish"),_(!0))};if(t.length===0)return u.jsx("div",{className:"p-10 text-center dark:text-white flex items-center justify-center min-h-[50vh]",children:"Menyiapkan Tes..."});if(v){const w=t.filter((G,te)=>{var ae;return G.number.toString().trim()===((ae=c[te])==null?void 0:ae.trim())}).length,I=w>=8,C=t.map((G,te)=>({id:`cb-q-${te}`,type:"short_answer",content:`Ishihara Plate #${te+1}`,correctAnswer:G.number.toString(),explanation:`Plate displayed number ${G.number}`,metadata:{difficulty:"Medium",idealTimeSeconds:10,topic:"Buta Warna",subtest:"Ishihara"}})),O=c.map((G,te)=>({questionId:`cb-q-${te}`,selectedAnswer:G,isCorrect:G.trim()===t[te].number.toString().trim(),scoreEarned:G.trim()===t[te].number.toString().trim()?10:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1})),j={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:w*10,maxScore:100,details:{type:"Ishihara Simulation",passed:I},questions:C,answers:O};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center transition-colors",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl max-w-lg w-full text-center max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${I?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:I?u.jsx(zs,{size:40}):u.jsx(cp,{size:40})}),u.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:I?"Mata Normal":"Indikasi Buta Warna"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Skor Anda: ",w," dari ",t.length]}),u.jsx("div",{className:"mb-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden text-left",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-300 font-bold",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3",children:"Plate"}),u.jsx("th",{className:"p-3 text-center",children:"Angka"}),u.jsx("th",{className:"p-3 text-center",children:"Jawab"}),u.jsx("th",{className:"p-3 text-center",children:"Status"})]})}),u.jsx("tbody",{children:t.map((G,te)=>{const ae=c[te],le=G.number.toString().trim()===ae.trim();return u.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 text-slate-700 dark:text-slate-300",children:[u.jsxs("td",{className:"p-3 font-medium",children:["#",te+1]}),u.jsx("td",{className:"p-3 font-mono text-center",children:G.number}),u.jsx("td",{className:"p-3 font-mono text-center text-slate-600 dark:text-slate-400",children:ae||"-"}),u.jsx("td",{className:"p-3 text-center",children:le?u.jsx(zs,{size:16,className:"text-emerald-500 inline"}):u.jsx(cp,{size:16,className:"text-rose-500 inline"})})]},te)})})]})}),u.jsx("button",{onClick:()=>e(j),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Simpan & Keluar"}),u.jsx("p",{className:"mt-4 text-[10px] text-slate-400",children:"Hasil ini adalah simulasi. Untuk diagnosis medis, hubungi dokter mata."})]})})}const N=t[r];return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[u.jsx(Nt,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[r+1," / ",t.length]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"mb-8 flex justify-center py-4",children:u.jsx(aL,{targetNumber:N.number,refreshTrigger:r})}),u.jsx("p",{className:"mb-4 text-slate-600 dark:text-slate-300 font-medium",children:"Angka berapa yang Anda lihat?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:g,onChange:w=>m(w.target.value),autoFocus:!0,onKeyDown:w=>w.key==="Enter"&&g&&T()}),u.jsx("button",{onClick:T,disabled:!g,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>m("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline",children:"Saya tidak melihat angka"})})]})]})})},u0=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},oL=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",up=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},n1=n=>{switch(n){case"REACTION":return u.jsx(Va,{size:20});case"SEQUENCE":return u.jsx(Gi,{size:20});case"AIM":return u.jsx(xr,{size:20});case"CHIMP":return u.jsx(Ts,{size:20});case"VISUAL":return u.jsx(Gi,{size:20});case"NUMBER":return u.jsx(Dd,{size:20});case"VERBAL":return u.jsx(Ld,{size:20});case"TYPING":return u.jsx(Vi,{size:20});case"BRIDGE":return u.jsx(Pd,{size:20});case"MATCH":return u.jsx(Md,{size:20});default:return u.jsx(Ns,{size:20})}},s1=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},lL=()=>u.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:u.jsx(Ns,{size:64})}),cL=({percentile:n,score:e,unit:t,game:s})=>{const c=n/100*300;return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[u.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[u.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[u.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),u.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),u.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),u.jsx("line",{x1:c,y1:"10",x2:c,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),u.jsx("circle",{cx:c,cy:"10",r:"4",fill:"#ef4444"})]}),u.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),u.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[u.jsx("span",{children:"Bottom 1%"}),u.jsx("span",{children:"Average"}),u.jsx("span",{children:"Top 1%"})]})]})},uL=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const r=u0(t,s),l=oL(r);let c="pts";return(t==="REACTION"||t==="AIM")&&(c="ms"),t==="TYPING"&&(c="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(c="lvl"),u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(nc,{className:"text-indigo-500"})," Statistik Anda"]}),u.jsx("button",{onClick:()=>{oe.play("back"),e()},children:u.jsx(WS,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),u.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",u.jsx("span",{className:"text-lg font-medium text-slate-400",children:c})]}),u.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",r,"% orang"]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[u.jsx(cL,{percentile:r,score:s,unit:c,game:t}),u.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:l})]})]}):u.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},dL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("WAITING"),[r,l]=F.useState(0),[c,h]=F.useState([]),[g,m]=F.useState(0),v=F.useRef(null);F.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=()=>{s("READY");const C=Math.floor(Math.random()*3e3)+2e3;v.current=window.setTimeout(()=>{l(Date.now()),s("GO")},C)},T=()=>{if(t==="WAITING")_();else if(t==="READY")v.current&&clearTimeout(v.current),s("TOO_SOON");else if(t==="GO"){const C=Date.now()-r;m(C);const O=[...c,C];h(O),O.length>=5?(s("FINAL_SCORE"),oe.play("finish")):(s("RESULT"),oe.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},N=c.length>0?Math.round(c.reduce((C,O)=>C+O,0)/c.length):0;let w,I="bg-slate-900";return t==="WAITING"?(w=u.jsxs(u.Fragment,{children:[u.jsx(Va,{size:80,className:"mx-auto mb-6 text-amber-400"}),u.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),u.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",c.length+1," dari 5"]}),u.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),I="bg-slate-800"):t==="READY"?(w=u.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),I="bg-rose-600"):t==="GO"?(w=u.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),I="bg-emerald-500"):t==="RESULT"?(w=u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[g," ms"]}),u.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),I="bg-indigo-600"):t==="FINAL_SCORE"?(w=u.jsxs(u.Fragment,{children:[u.jsx(Ns,{size:64,className:"mx-auto mb-4 text-emerald-400"}),u.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),u.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[N," ms"]}),u.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[u.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(N),children:"Simpan Skor"}),u.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{h([]),s("WAITING")},children:"Coba Lagi"})]})]}),I="bg-slate-800"):t==="TOO_SOON"&&(w=u.jsxs(u.Fragment,{children:[u.jsx(lL,{}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),u.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),I="bg-slate-800"),u.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${I}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[u.jsx("button",{onClick:C=>{C.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),w]})},fL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState([]),[r,l]=F.useState([]),[c,h]=F.useState(1),[g,m]=F.useState("START"),[v,_]=F.useState(null),T=async(w,I)=>{m("WATCHING"),l([]);const C=Math.floor(Math.random()*9),O=[...I,C];s(O),await new Promise(j=>setTimeout(j,800));for(let j=0;j<O.length;j++)_(O[j]),oe.play("click"),await new Promise(G=>setTimeout(G,600)),_(null),await new Promise(G=>setTimeout(G,200));m("PLAYING")},N=async w=>{if(g!=="PLAYING")return;_(w),oe.play("tap"),setTimeout(()=>_(null),200);const I=[...r,w];if(l(I),I[I.length-1]!==t[I.length-1]){m("GAMEOVER"),oe.play("error");return}I.length===t.length&&(m("WATCHING"),oe.play("success"),await new Promise(C=>setTimeout(C,800)),h(C=>C+1),T(c+1,t))};return g==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Gi,{size:80,className:"mx-auto mb-6 text-indigo-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),u.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):g==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Gi,{size:64,className:"mx-auto mb-6 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:c})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{h(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(1,c-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",c]}),u.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:g==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((w,I)=>u.jsx("div",{onClick:()=>N(I),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${v===I?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},I))})]})},hL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("IDLE"),[r,l]=F.useState(30),[c,h]=F.useState({top:"50%",left:"50%"}),[g,m]=F.useState([]),v=F.useRef(null),[_,T]=F.useState(0),[N,w]=F.useState(0),[I,C]=F.useState(0),[O,j]=F.useState(null),G=()=>{if(!v.current)return;const R=v.current.getBoundingClientRect(),U=96,L=50,B=R.width-U-L,V=R.height-U-L,ge=Math.max(L,Math.random()*B),Me=Math.max(L,Math.random()*V);h({top:`${Me}px`,left:`${ge}px`})},te=()=>{s("PLAYING"),l(30),m([]),T(0),w(0),G()};F.useEffect(()=>{if(t==="PLAYING"&&N>0){const R=setInterval(()=>{T(Date.now()-N)},50);return j(R),()=>clearInterval(R)}},[t,N]);const ae=R=>{if(R.stopPropagation(),t!=="PLAYING")return;const U=Date.now();if(N===0){w(U),C(U),l(B=>B-1),G(),oe.play("click");return}const L=U-I;m(B=>[...B,L]),C(U),oe.play("click"),r<=1?(clearInterval(O),s("FINISHED"),oe.play("finish")):(l(B=>B-1),G())},le=()=>{t==="PLAYING"&&N>0&&oe.play("error")},M=g.length>0?Math.round(g.reduce((R,U)=>R+U,0)/g.length):0,D=g.length>0?Math.round(g.reduce((R,U)=>R+U,0)/g.length):0;return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:le,children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),t==="IDLE"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[u.jsx(xr,{size:80,className:"mx-auto mb-6 text-orange-500"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),u.jsx("button",{onClick:te,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),u.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:r})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),u.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),u.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[D," ms"]})]})]}),u.jsx("div",{ref:v,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:u.jsxs("div",{onMouseDown:ae,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:c.top,left:c.left},children:[u.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),u.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),u.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[u.jsx(xr,{size:64,className:"mx-auto mb-4 text-orange-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),u.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),u.jsxs("h1",{className:"text-7xl font-black mb-8",children:[M," ms"]}),u.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>n(M),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),u.jsx("button",{onClick:te,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},mL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(4),[r,l]=F.useState([]),[c,h]=F.useState("IDLE"),[g,m]=F.useState(1),[v,_]=F.useState(!1),T=w=>{const C=Array.from({length:40},(j,G)=>G).sort(()=>.5-Math.random()),O=Array.from({length:w},(j,G)=>({id:G+1,pos:C[G],visible:!0}));l(O),m(1),_(!1),h("PLAYING")},N=w=>{c==="PLAYING"&&(w===g?(oe.play("click"),w===1&&_(!0),l(I=>I.map(C=>C.id===w?{...C,visible:!1}:C)),w===r.length?(oe.play("success"),setTimeout(()=>{s(I=>I+1),T(t+1)},500)):m(I=>I+1)):(oe.play("error"),h("GAMEOVER")))};return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),c==="IDLE"&&u.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[u.jsx(Ts,{size:80,className:"mx-auto mb-6 text-teal-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),u.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),c==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),u.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((w,I)=>{const C=r.find(O=>O.pos===I);return!C||!C.visible?u.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},I):u.jsx("button",{onMouseDown:()=>N(C.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${v&&C.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:v&&C.id>1?"":C.id},I)})})]}),c==="GAMEOVER"&&u.jsxs("div",{className:"text-center text-white",children:[u.jsx(Ts,{size:64,className:"mx-auto mb-4 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},pL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,l]=F.useState(3),[c,h]=F.useState(3),[g,m]=F.useState([]),[v,_]=F.useState([]),[T,N]=F.useState([]),[w,I]=F.useState("START"),C=j=>{let G=3;j>2&&(G=4),j>5&&(G=5),j>10&&(G=6),j>20&&(G=7),h(G);const te=Math.min(Math.floor(G*G/2),j+2),ae=[];for(;ae.length<te;){const le=Math.floor(Math.random()*(G*G));ae.includes(le)||ae.push(le)}m(ae),_([]),N([]),I("SHOWING"),setTimeout(()=>I("PLAYING"),1e3+j*100)},O=j=>{if(w==="PLAYING"&&!(v.includes(j)||T.includes(j)))if(g.includes(j)){oe.play("tap");const G=[...v,j];_(G),G.length===g.length&&(oe.play("success"),setTimeout(()=>{s(te=>te+1),C(t+1)},500))}else{oe.play("error");const G=r-1;l(G),N(te=>[...te,j]),G<=0&&setTimeout(()=>I("GAMEOVER"),500)}};return w==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Gi,{size:80,className:"mx-auto mb-6 text-sky-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),u.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):w==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[u.jsx(Gi,{size:64,className:"mx-auto mb-6 text-sky-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((j,G)=>u.jsx(of,{size:24,className:G<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},G))})]}),u.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:c*c}).map((j,G)=>{const te=g.includes(G),ae=v.includes(G),le=T.includes(G);let M="bg-slate-700 hover:bg-slate-600";return w==="SHOWING"&&te&&(M="bg-white shadow-[0_0_15px_white] scale-95"),w==="PLAYING"&&ae&&(M="bg-white"),w==="PLAYING"&&le&&(M="bg-slate-900 border-2 border-rose-900"),u.jsx("div",{onMouseDown:()=>O(G),className:`rounded-lg transition-all duration-200 cursor-pointer ${M}`},G)})})]})},gL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,l]=F.useState(""),[c,h]=F.useState(""),[g,m]=F.useState("START"),[v,_]=F.useState(0),[T,N]=F.useState(100),w=j=>{let G="";for(let te=0;te<j;te++)G+=Math.floor(Math.random()*10);return G},I=()=>{s(1),C(1)},C=j=>{const G=w(j);l(G),m("SHOWING"),N(100);const te=1e3+j*500;_(te),setTimeout(()=>{N(0)},50),setTimeout(()=>{m("INPUT")},te)},O=j=>{j==null||j.preventDefault(),c===r?(oe.play("success"),m("RESULT"),setTimeout(()=>{s(G=>G+1),h(""),C(t+1)},1e3)):(oe.play("error"),m("GAMEOVER"))};return g==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Dd,{size:80,className:"mx-auto mb-6 text-blue-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),u.jsx("button",{onClick:I,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):g==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Dd,{size:64,className:"mx-auto mb-6 text-blue-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),u.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[u.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),u.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:r}),u.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),u.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:c})]}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:I,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),g==="SHOWING"&&u.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[u.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:r}),u.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${v}ms`,opacity:T>0?1:.2}})})]}),g==="INPUT"&&u.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[u.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),u.jsxs("form",{onSubmit:O,children:[u.jsx("input",{type:"number",autoFocus:!0,value:c,onChange:j=>h(j.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),u.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),g==="RESULT"&&u.jsxs("div",{className:"text-center",children:[u.jsx(zs,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),u.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},yL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(0),[r,l]=F.useState(3),[c,h]=F.useState(""),[g,m]=F.useState(new Set),[v,_]=F.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],N=()=>{const C=g.size>0&&Math.random()<.4;let O="";if(C){const j=Array.from(g);O=j[Math.floor(Math.random()*j.length)]}else{let j=0;do O=T[Math.floor(Math.random()*T.length)],j++;while(g.has(O)&&j<100)}h(O)},w=C=>{const O=g.has(c);if(C==="SEEN"&&O||C==="NEW"&&!O)s(G=>G+1),C==="NEW"&&m(G=>new Set(G).add(c)),oe.play("click"),N();else{const G=r-1;l(G),oe.play("error"),C==="NEW"&&m(te=>new Set(te).add(c)),G<=0?_("GAMEOVER"):N()}},I=()=>{s(0),l(3),m(new Set),_("PLAYING"),N()};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Ld,{size:80,className:"mx-auto mb-6 text-purple-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),u.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",u.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",u.jsx("strong",{children:"SUDAH"}),"."]}),u.jsx("button",{onClick:I,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Ld,{size:64,className:"mx-auto mb-6 text-purple-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:I,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[u.jsxs("div",{children:["Skor: ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((C,O)=>u.jsx(of,{size:24,className:O<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},O))})]}),u.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:c}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>w("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),u.jsx("button",{onClick:()=>w("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},xL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(""),[r,l]=F.useState(""),[c,h]=F.useState(null),[g,m]=F.useState(0),[v,_]=F.useState(0),[T,N]=F.useState("START");F.useEffect(()=>{const C=zx,O=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(O)},[]),F.useEffect(()=>{let C;return T==="PLAYING"&&c&&(C=setInterval(()=>{const j=(Date.now()-c)/1e3;_(Math.floor(j));const G=r.length,te=j/60;te>0&&m(Math.round(G/5/te))},1e3)),()=>clearInterval(C)},[T,c,r]);const w=C=>{const O=C.target.value;if(T==="START"&&(h(Date.now()),N("PLAYING")),l(O),O===t){const j=(Date.now()-(c||Date.now()))/6e4,G=Math.round(t.length/5/j);m(G),N("FINISHED"),oe.play("finish")}else O.length%5===0&&oe.play("tap")},I=()=>{const C=zx,O=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(O),l(""),h(null),m(0),_(0),N("START")};return T==="FINISHED"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Vi,{size:64,className:"mx-auto mb-6 text-slate-400"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),u.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[g," ",u.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:I,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(g),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[u.jsxs("div",{children:["WPM: ",u.jsx("span",{className:"font-bold text-emerald-400",children:g})]}),u.jsxs("div",{children:["Time: ",u.jsxs("span",{className:"font-bold text-emerald-400",children:[v,"s"]})]})]}),u.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[u.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((C,O)=>{let j="text-slate-500";return O<r.length&&(j=r[O]===C?"text-white":"text-rose-500 bg-rose-500/20"),u.jsx("span",{className:j,children:C},O)})}),u.jsx("textarea",{value:r,onChange:w,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},vL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,l]=F.useState(3),[c,h]=F.useState(5),[g,m]=F.useState(4),[v,_]=F.useState([]),[T,N]=F.useState("START"),[w,I]=F.useState(0),[C,O]=F.useState(100),[j,G]=F.useState(1500),te=M=>{const R=4+Math.floor(M/2);h(5),m(R);const U=[];let L=R-1,B=Math.floor(5/2);for(U.push({row:L,col:B});L>0;){L--;const V=[B];B>0&&V.push(B-1),B<4&&V.push(B+1),B=V[Math.floor(Math.random()*V.length)],U.push({row:L,col:B})}_(U)},ae=M=>{te(M),N("SHOWING"),O(100);const D=1500;G(D),setTimeout(()=>O(0),50),setTimeout(()=>{N("PLAYING"),I(0)},D)},le=(M,D)=>{if(T!=="PLAYING")return;const R=v[w];if(M===R.row&&D===R.col){oe.play("click");const U=w+1;I(U),U===v.length&&(oe.play("success"),setTimeout(()=>{s(L=>L+1),ae(t+1)},500))}else oe.play("error"),l(U=>U-1),r<=1?N("GAMEOVER"):(N("SHOWING"),O(100),setTimeout(()=>O(0),50),setTimeout(()=>{N("PLAYING"),I(0)},j))};return T==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Pd,{size:80,className:"mx-auto mb-6 text-emerald-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),u.jsx("button",{onClick:()=>{oe.play("click"),s(1),l(3),ae(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Pd,{size:64,className:"mx-auto mb-6 text-emerald-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{oe.play("click"),s(1),l(3),ae(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((M,D)=>u.jsx(of,{size:24,className:D<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},D))})]}),u.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${C}%`,transitionDuration:`${j}ms`}})}),u.jsx("div",{className:"h-[65vh] w-full flex items-center justify-center p-4",children:u.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl overflow-y-auto max-h-full no-scrollbar",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,aspectRatio:`${c}/${Math.min(8,g)}`,width:"min(100%, 400px)"},children:Array.from({length:g}).map((M,D)=>Array.from({length:c}).map((R,U)=>{const L=v.findIndex(Me=>Me.row===D&&Me.col===U),B=L!==-1,V=B&&L<w;let ge="bg-slate-700";return T==="SHOWING"&&B?ge="bg-emerald-400":T==="PLAYING"&&(V?ge="bg-emerald-600":B&&L===w&&(ge="bg-slate-700 active:bg-emerald-400")),u.jsx("div",{onMouseDown:()=>le(D,U),className:`w-full aspect-square rounded-md transition-colors duration-200 cursor-pointer ${ge} hover:opacity-90`},`${D}-${U}`)}))})}),u.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),u.jsx(q5,{size:32})]})]})},bL=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[r,l]=F.useState(5),[c,h]=F.useState([]),[g,m]=F.useState([]),[v,_]=F.useState("START"),[T,N]=F.useState(!1),[w,I]=F.useState(3),C=["","","","","","","","","","","","","","","",""],O=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],j=ae=>{const le=ae+2,M=le*2,D=Math.ceil(Math.sqrt(M));I(D);const R=[...C].sort(()=>Math.random()-.5).slice(0,le);let U=[];for(let L=0;L<le;L++){const B=R[L],V=O[L%O.length];U.push({id:L*2,icon:B,flipped:!0,matched:!1,color:V}),U.push({id:L*2+1,icon:B,flipped:!0,matched:!1,color:V})}U=U.sort(()=>Math.random()-.5).map((L,B)=>({...L,id:B})),h(U),_("PREVIEW")},G=()=>{oe.play("click"),h(ae=>ae.map(le=>({...le,flipped:!1}))),_("PLAYING")},te=ae=>{if(v!=="PLAYING"||T)return;const le=c.find(R=>R.id===ae);if(!le||le.flipped||le.matched)return;oe.play("click");const M=c.map(R=>R.id===ae?{...R,flipped:!0}:R);h(M);const D=[...g,ae];if(m(D),D.length===2){N(!0);const R=M.find(L=>L.id===D[0]),U=M.find(L=>L.id===D[1]);R&&U&&R.icon===U.icon?(oe.play("success"),setTimeout(()=>{h(L=>L.map(B=>D.includes(B.id)?{...B,matched:!0}:B)),m([]),N(!1),M.filter(L=>!L.matched&&!D.includes(L.id)).length===0&&setTimeout(()=>{s(L=>L+1),j(t+1)},500)},500)):setTimeout(()=>{oe.play("error"),h(L=>L.map(B=>D.includes(B.id)?{...B,flipped:!1}:B)),m([]),N(!1),l(L=>{const B=L-1;return B<=0&&_("GAMEOVER"),B})},1e3)}};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Md,{size:80,className:"mx-auto mb-6 text-pink-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),u.jsx("button",{onClick:()=>{oe.play("click"),s(1),l(5),j(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Md,{size:64,className:"mx-auto mb-6 text-pink-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{oe.play("click"),s(1),l(5),j(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(Nt,{size:24})}),u.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((ae,le)=>u.jsx(of,{size:24,className:le<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},le))}),v==="PREVIEW"&&u.jsx("button",{onClick:G,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),u.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${w}, minmax(0, 1fr))`},children:c.map(ae=>u.jsx("div",{onClick:()=>te(ae.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${ae.flipped||ae.matched?`${ae.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:ae.flipped||ae.matched?ae.icon:""},ae.id))})]})},_L=({username:n,history:e})=>{const[t,s]=F.useState({}),[r,l]=F.useState(!0),[c,h]=F.useState(!0),g=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];F.useEffect(()=>{(async()=>{if(!c)return;l(!0);const _={};await Promise.all(g.map(async T=>{try{const N=await D5(T);_[T]=N}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),l(!1)})()},[c]);const m=v=>{const _=e.filter(T=>T.category==="BENCHMARK"&&T.details&&T.details.game===v);return v==="REACTION"||v==="AIM"?_.sort((T,N)=>T.score-N.score):_.sort((T,N)=>N.score-T.score),_.slice(0,5).map(T=>{var N;return{name:n,score:T.score,unit:String(((N=T.details)==null?void 0:N.unit)||"")}})};return u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(NV,{className:"text-amber-500"})," Leaderboard"]}),u.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[u.jsxs("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[u.jsx(E3,{size:14,className:"inline mr-1"})," Global"]}),u.jsxs("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[u.jsx(RV,{size:14,className:"inline mr-1"})," Personal"]})]})]}),r&&c?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(Pa,{size:40,className:"animate-spin mb-4 text-indigo-500"}),u.jsx("p",{children:"Memuat Data Global Rank..."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(v=>{let _=[];c?_=t[v]||[]:_=m(v);const T=up(v);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[u.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[u.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:n1(v)}),u.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:s1(v)})]}),u.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((N,w)=>u.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${w===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`font-bold w-4 text-center ${w===0?"text-amber-500":w===1?"text-slate-400":w===2?"text-orange-700":"text-slate-500"}`,children:w+1}),u.jsxs("span",{className:`font-medium truncate max-w-[120px] ${N.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[N.name||N.username," ",N.name===n?"(You)":""]})]}),u.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[N.score,u.jsx("span",{className:"text-xs text-slate-400 ml-1",children:N.unit})]})]},w)):u.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},v)})})]})},TL=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?u.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:u.jsx(l0,{size:32,className:"text-slate-400"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[u.jsx(Ns,{className:"text-indigo-500"})," Recent Activity"]}),u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const r=s.game,l=t.score,c=(s==null?void 0:s.unit)||"",h=u0(r,l);return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-2 rounded-xl ${up(r)}`,children:n1(r)}),u.jsx("span",{className:`font-bold text-base ${up(r).split(" ")[0]}`,children:s1(r)})]})}),u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),u.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),u.jsx("td",{className:"p-5 text-right",children:u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[l,c]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${h>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",h,"%"]})]})})]},t.id)})})]})})})]})},EL=({onBack:n,username:e,history:t,onComplete:s})=>{const[r,l]=F.useState("MENU"),[c,h]=F.useState("DASHBOARD"),[g,m]=F.useState(!1),[v,_]=F.useState("REACTION"),T=async(I,C)=>{let O="pts";(C==="REACTION"||C==="AIM")&&(O="ms"),(C==="SEQUENCE"||C==="NUMBER"||C==="CHIMP"||C==="VISUAL"||C==="BRIDGE"||C==="MATCH")&&(O="lvl"),C==="TYPING"&&(O="wpm"),M5(C,I,e,O).catch(G=>console.error("Cloud save failed",G));const j={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:I,maxScore:0,details:{game:C,unit:O},questions:[],answers:[]};s(j),l("MENU")};if(r!=="MENU")switch(r){case"REACTION":return u.jsx(dL,{onFinish:I=>T(I,"REACTION"),onExit:()=>l("MENU")});case"SEQUENCE":return u.jsx(fL,{onFinish:I=>T(I,"SEQUENCE"),onExit:()=>l("MENU")});case"AIM":return u.jsx(hL,{onFinish:I=>T(I,"AIM"),onExit:()=>l("MENU")});case"CHIMP":return u.jsx(mL,{onFinish:I=>T(I,"CHIMP"),onExit:()=>l("MENU")});case"VISUAL":return u.jsx(pL,{onFinish:I=>T(I,"VISUAL"),onExit:()=>l("MENU")});case"NUMBER":return u.jsx(gL,{onFinish:I=>T(I,"NUMBER"),onExit:()=>l("MENU")});case"VERBAL":return u.jsx(yL,{onFinish:I=>T(I,"VERBAL"),onExit:()=>l("MENU")});case"TYPING":return u.jsx(xL,{onFinish:I=>T(I,"TYPING"),onExit:()=>l("MENU")});case"BRIDGE":return u.jsx(vL,{onFinish:I=>T(I,"BRIDGE"),onExit:()=>l("MENU")});case"MATCH":return u.jsx(bL,{onFinish:I=>T(I,"MATCH"),onExit:()=>l("MENU")});default:return l("MENU"),null}const N=I=>{const C=t.filter(G=>G.category!=="BENCHMARK"||!G.details?!1:"game"in G.details&&G.details.game===I).map(G=>{const te=G.details;return{id:G.id,game:te.game,score:G.score,unit:te.unit,date:G.date}});if(C.length===0)return{best:null,percentile:0};let O;I==="REACTION"||I==="AIM"?O=Math.min(...C.map(G=>G.score)):O=Math.max(...C.map(G=>G.score));const j=u0(I,O);return{best:O,percentile:j}},w=({game:I,title:C,desc:O,icon:j,colorClass:G,btnColorClass:te})=>{const{best:ae,percentile:le}=N(I);let M="pts";return(I==="REACTION"||I==="AIM")&&(M="ms"),I==="TYPING"&&(M="wpm"),(I==="SEQUENCE"||I==="NUMBER"||I==="CHIMP"||I==="VISUAL"||I==="BRIDGE"||I==="MATCH")&&(M="lvl"),u.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[u.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${G}`}),u.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[u.jsx("div",{className:`p-4 rounded-2xl ${G} bg-opacity-10 text-opacity-100 shrink-0`,children:u.jsx("div",{className:`${G.replace("bg-","text-")}`,children:j})}),u.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:C}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:O}),u.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full ${G}`,style:{width:`${le}%`}})}),u.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[u.jsxs("span",{children:["Best: ",ae!==null?`${ae} ${M}`:"-"]}),u.jsx("span",{children:le>0?`Top ${le}%`:"-"})]})]}),u.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[u.jsxs("button",{onClick:D=>{D.stopPropagation(),oe.play("click"),l(I)},className:`flex-1 sm:flex-none px-6 py-2.5 ${te} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[u.jsx(cf,{size:16,fill:"currentColor"})," MAIN"]}),u.jsxs("button",{onClick:D=>{D.stopPropagation(),oe.play("click"),_(I),m(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[u.jsx(nc,{size:14})," Stats"]})]})]})]})};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:u.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[u.jsx(uL,{isOpen:g,onClose:()=>m(!1),game:v,bestScore:N(v).best}),u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:u.jsxs("button",{onClick:()=>{oe.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[u.jsx(Nt,{size:20,className:"mr-2"})," Menu Utama"]})}),u.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[u.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[u.jsx(Ns,{className:"text-rose-500",size:40})," Human Benchmark"]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",u.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]})]}),u.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("button",{onClick:()=>h("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${c==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),u.jsx("button",{onClick:()=>h("RANKING"),className:`pb-3 px-4 font-bold transition-all ${c==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),c==="DASHBOARD"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[u.jsx(w,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:u.jsx(Va,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),u.jsx(w,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:u.jsx(Gi,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),u.jsx(w,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:u.jsx(xr,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),u.jsx(w,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:u.jsx(Ts,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),u.jsx(w,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:u.jsx(Gi,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),u.jsx(w,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:u.jsx(Dd,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),u.jsx(w,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:u.jsx(Ld,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),u.jsx(w,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:u.jsx(Vi,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),u.jsx(w,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:u.jsx(Pd,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),u.jsx(w,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:u.jsx(Md,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),u.jsx(TL,{history:t})]}):u.jsx(_L,{username:e,history:t})]})})},i1=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},SL=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",r=e==="success"?u.jsx(zs,{size:20}):e==="error"?u.jsx(cp,{size:20}):u.jsx(I3,{size:20});return F.useEffect(()=>{const l=setTimeout(t,3e3);return()=>clearTimeout(l)},[t]),u.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[r,u.jsx("span",{className:"font-bold text-sm",children:n}),u.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:u.jsx(bc,{size:18})})]})},AL=({onLogin:n})=>{const[e,t]=F.useState("");return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"mb-8 flex justify-center",children:u.jsx("img",{src:cd,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Selamat Datang"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Masukkan nama untuk mulai belajar."})]}),u.jsxs("form",{onSubmit:s=>{s.preventDefault(),n(e)},children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 text-left",children:"Nama Pengguna"}),u.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-medium text-slate-800 placeholder:text-slate-400",placeholder:"Contoh: Budi Santoso",value:e,onChange:s=>t(s.target.value),required:!0})]}),u.jsxs("button",{type:"submit",className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:["Mulai Belajar ",u.jsx(hr,{size:20})]})]})]})})},NL=({result:n,feature:e,onBack:t})=>u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:u.jsxs("div",{className:"max-w-3xl w-full",children:[u.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[u.jsx(Nt,{size:18})," Kembali"]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(rf,{size:28,className:"text-indigo-600"})," Hasil ",e]}),u.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:u.jsx(i1,{text:n})})]})]})}),wL=({questions:n,onComplete:e})=>{const[t,s]=F.useState(0),[r,l]=F.useState(""),[c,h]=F.useState(null),[g,m]=F.useState(!1),[v,_]=F.useState([]),T=n[t],N=async()=>{if(r.trim()){m(!0),oe.play("click");try{const I=await gM(T.content,r);h(I)}catch{alert("Gagal evaluasi.")}finally{m(!1)}}},w=()=>{oe.play("click");const I={questionId:T.id,selectedAnswer:r,isCorrect:!0,scoreEarned:(c==null?void 0:c.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:c||void 0},C=[...v,I];_(C),l(""),h(null),t<n.length-1?s(t+1):e(C)};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),c?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",c.score,"/100"]}),u.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:c.toneAnalysis})]}),u.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[u.jsx("b",{children:"Feedback:"})," ",c.feedback]}),u.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[u.jsx("b",{children:"Saran Jawaban:"})," ",c.improvedAnswer]})]}),u.jsx("button",{onClick:w,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:r,onChange:I=>l(I.target.value)}),u.jsxs("button",{onClick:N,disabled:g||!r,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[g?u.jsx(Pa,{className:"animate-spin"}):u.jsx(lf,{size:18})," Submit Jawaban"]})]})]})})},CL=({flashcards:n,onFinish:e})=>{const[t,s]=F.useState(0),r=l=>{t<n.length-1?s(t+1):e()};return n.length===0?u.jsx("div",{children:"No Flashcards"}):u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[u.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:u.jsx(Nt,{size:20})}),u.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),u.jsx(OV,{data:n[t],onNext:r})]})},kL=({topic:n,onFinish:e})=>{const[t,s]=F.useState(""),[r,l]=F.useState(null),[c,h]=F.useState(!1),g=async()=>{h(!0),oe.play("click");try{const m=await yM(n,t);l(m)}catch{alert("Error")}finally{h(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",u.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun). Gunakan bahasa sederhana."]}),r?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsxs("div",{className:`text-2xl font-bold ${r.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[r.understandingScore,"/100"]}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 uppercase font-bold",children:"Skor Pemahaman"})]}),u.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("p",{children:[u.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",r.simplificationQuality]}),u.jsxs("p",{children:[u.jsx("b",{children:"Konsep yang Terlewat:"})," ",r.missingConcepts.join(", ")||"Tidak ada"]}),u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("b",{children:"Koreksi / Saran:"})," ",r.correction]})]})]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:m=>s(m.target.value)}),u.jsx("button",{onClick:g,disabled:c||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:c?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},IL=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,r]=F.useState(0),l=["Lakukan scanning cepat pada materi. Baca judul, subjudul, dan kesimpulan. Dapatkan gambaran besar.","Buat pertanyaan dari judul/subjudul. Apa yang ingin Anda ketahui? Ubah judul menjadi pertanyaan.","Baca materi dengan seksama untuk mencari jawaban atas pertanyaan Anda tadi.","Tutup materi. Ucapkan kembali apa yang baru saja dibaca dengan kata-kata sendiri.","Review ulang seluruh materi dan catatan Anda. Pastikan semuanya tersimpan di memori."];return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"flex justify-center mb-8",children:t.map((c,h)=>u.jsxs("div",{className:`flex items-center ${h<t.length-1?"w-full":""}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${h<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:c[0]}),h<t.length-1&&u.jsx("div",{className:`h-1 flex-1 ${h<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},c))}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),u.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:l[s]}),u.jsx("button",{onClick:()=>{oe.play("click"),s<4?r(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},RL=({category:n,onBack:e,onStartSession:t,onOpenTOSelection:s,onStartTesKoran:r,onStartTesKecermatan:l,onGeneralInputSubmit:c,generalInput:h,setGeneralInput:g,isReadingMaterial:m,onResetMaterial:v,onSubtestSelect:_,selectedSubtest:T,weakTopicsCount:N,loading:w,skdStream:I,onSkdStreamSelect:C,onHistory:O,onStartGeneralSession:j,onStartSkripsiSession:G,username:te,isDarkMode:ae,onToggleDarkMode:le})=>{const[M,D]=F.useState(""),[R,U]=F.useState(null),[L,B]=F.useState("MEDIUM"),[V,ge]=F.useState("MEDIUM"),[Me,J]=F.useState(!1),ce=F.useRef(null),[be,Ae]=F.useState(""),[xe,z]=F.useState(5),[se,Z]=F.useState("Medium"),K=ye=>{var Ce;const Se=(Ce=ye.target.files)==null?void 0:Ce[0];if(Se){if(Se.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}U(Se.name),D(""),J(!0);const Xe=new FileReader;Xe.onload=vt=>{var pt;const it=((pt=vt.target)==null?void 0:pt.result).split(",")[1];setTimeout(()=>{g&&g({type:"pdf",content:it,title:Se.name,lengthPreference:L,difficultyPreference:V}),J(!1)},800)},Xe.readAsDataURL(Se)}},$=()=>{(h==null?void 0:h.type)==="pdf"?c({...h,lengthPreference:L,difficultyPreference:V}):M?c({type:"text",content:M,title:"Input Manual",lengthPreference:L,difficultyPreference:V}):alert("Mohon masukkan teks atau upload PDF.")},ue=ye=>{const Se=ye.filter(Ce=>Ce.toLowerCase().includes(be.toLowerCase()));return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),u.jsxs("div",{className:"mb-4 relative",children:[u.jsx(_m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),u.jsx("input",{type:"text",placeholder:"Cari topik...",value:be,onChange:Ce=>Ae(Ce.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Se.length>0?Se.map(Ce=>u.jsx("button",{onClick:()=>{oe.play("tap"),_(Ce)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${T===Ce?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Ce},Ce)):u.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),T&&n!=="INTERVIEW"&&n!=="SKRIPSI"&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),u.jsxs("select",{value:xe,onChange:Ce=>z(Number(Ce.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"5",children:"5 Soal"}),u.jsx("option",{value:"10",children:"10 Soal"}),u.jsx("option",{value:"15",children:"15 Soal"}),u.jsx("option",{value:"20",children:"20 Soal"})]})]}),u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),u.jsxs("select",{value:se,onChange:Ce=>Z(Ce.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"Easy",children:"Mudah"}),u.jsx("option",{value:"Medium",children:"Sedang"}),u.jsx("option",{value:"Hard",children:"Sulit"}),u.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),t(Ge.PRACTICE,se,xe)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(q_,{size:18})," Mulai Latihan"]})]})}),n==="INTERVIEW"&&T&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:u.jsxs("button",{onClick:()=>{oe.play("click"),t(Ge.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(lf,{size:20})," Mulai Sesi Wawancara"]})})]})};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors duration-300",children:[u.jsx(jV,{}),u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:()=>{oe.play("back"),e()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[u.jsx(Nt,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[le&&u.jsx("button",{onClick:()=>{le()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:ae?u.jsx(QS,{size:16}):u.jsx(KS,{size:16})}),u.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[u.jsx(XS,{size:12})," ",te]})]})]}),u.jsx("div",{className:"flex justify-between items-end mb-8",children:u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:[n," Dashboard"]}),u.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),w?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(Pa,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),u.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:u.jsx(BV,{})})]}):u.jsxs(u.Fragment,{children:[n==="KECERMATAN"&&u.jsx("div",{className:"animate-fade-in-up",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),l("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:u.jsx(Ns,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),l("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:u.jsx(Vi,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),l("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:u.jsx(hV,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),l("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:u.jsx(_3,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),l("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:u.jsx(xr,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),l("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:u.jsx(P3,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),n==="SKRIPSI"&&u.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(rf,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:M,onChange:ye=>D(ye.target.value)}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),G&&G("TITLE_IDEAS",M)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[u.jsx(Ts,{size:24})," Ide Judul"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),G&&G("OUTLINE",M)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[u.jsx(Vi,{size:24})," Buat Outline"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),G&&G("METHODOLOGY",M)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[u.jsx(_m,{size:24})," Cek Metodologi"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),G&&G("PARAPHRASE",M)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[u.jsx(g3,{size:24})," Parafrase Teks"]})]})]})}),n==="GENERAL"&&u.jsx("div",{className:"space-y-8 animate-fade-in-up",children:m?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(F_,{size:20})," Materi Belajar"]}),u.jsx("button",{onClick:v,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(h==null?void 0:h.type)==="pdf"&&h.content&&u.jsx("div",{className:"mb-6",children:u.jsx("embed",{src:`data:application/pdf;base64,${h.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),u.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:u.jsx(i1,{text:(h==null?void 0:h.extractedText)||(h==null?void 0:h.content)||""})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:YA.map(ye=>{const Ce={Brain:Ts,Repeat:aV,MessageCircle:H3,Share2:pV,Search:_m,GraduationCap:o0,BookOpen:F_,PenTool:q_}[ye.icon]||Ts;return u.jsxs("button",{onClick:()=>{oe.play("click"),j(ye.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[u.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:u.jsx(Ce,{size:24})}),u.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:ye.name}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:ye.desc})]},ye.id)})})]})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(c0,{size:20})," Input Materi"]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[u.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:R?`PDF Terpilih: ${R}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:M,disabled:!!R,onChange:ye=>{D(ye.target.value)}}),u.jsx("input",{type:"file",ref:ce,accept:"application/pdf",className:"hidden",onChange:K}),u.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${R?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var ye;return(ye=ce.current)==null?void 0:ye.click()},children:[u.jsx(Vi,{size:20}),u.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),R&&u.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(zs,{size:16}),u.jsxs("span",{children:["File siap: ",u.jsx("b",{children:R})]})]}),u.jsx("button",{onClick:()=>{U(null),g&&g(null),ce.current&&(ce.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:u.jsx(Vd,{size:16})})]}),Me?u.jsxs("div",{className:"mb-6 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[u.jsx(Pa,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),u.jsx(dr,{height:"h-[300px]",className:"rounded-xl"})]}):(h==null?void 0:h.type)==="pdf"&&h.content&&u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),u.jsx("embed",{src:`data:application/pdf;base64,${h.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),u.jsxs("select",{value:L,onChange:ye=>B(ye.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),u.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),u.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),u.jsxs("select",{value:V,onChange:ye=>ge(ye.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),u.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),u.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),u.jsx("button",{onClick:()=>{oe.play("click"),$()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),n==="UTBK"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{oe.play("click"),s()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(yr,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),u.jsx(hr,{className:"group-hover:translate-x-2 transition-transform"})]}),ue(JA)]}),n==="TPA"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{oe.play("click"),s()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(Ts,{size:24,className:"text-indigo-400"})," Simulasi TPA Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"65 Soal (TPA & TBI). Durasi 60-100 Menit."})]}),u.jsx(hr,{className:"group-hover:translate-x-2 transition-transform"})]}),ue(XA)]}),n==="PSIKOTEST"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(i3,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(Ts,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),u.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),ue(WA)]})]}),n==="INTERVIEW"&&ue(ZA),n==="SKD"&&(I?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[u.jsx("button",{onClick:()=>C(null),className:"underline",children:"Ubah Jalur"})," ",u.jsx(hr,{size:14})," ",u.jsx("b",{children:I})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(yr,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),u.jsx(hr,{className:"group-hover:translate-x-2 transition-transform"})]}),ue(QA)]}):u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),C("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(M3,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),C("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(n3,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),n!=="GENERAL"&&n!=="INTERVIEW"&&n!=="SKRIPSI"&&n!=="PSIKOTEST"&&n!=="KECERMATAN"&&n!=="BENCHMARK"&&u.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),t(Ge.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(Va,{className:"text-amber-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),t(Ge.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(Ts,{className:"text-emerald-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),N>0&&u.jsxs("button",{onClick:()=>{oe.play("click"),t(Ge.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[u.jsx(xr,{className:"text-rose-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),u.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[N," Topik Lemah"]})]})]})]})]})]})]})};function ML(){var ja;const[n,e]=F.useState("SPLASH"),[t,s]=F.useState(null),[r,l]=F.useState(!1),[c,h]=F.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1}),[g,m]=F.useState(null),[v,_]=F.useState(!1),[T,N]=F.useState(""),[w,I]=F.useState(null),[C,O]=F.useState(null),[j,G]=F.useState(new Set),[te,ae]=F.useState("ANGKA"),[le,M]=F.useState(null),[D,R]=F.useState([]),[U,L]=F.useState(null),[B,V]=F.useState(null),[ge,Me]=F.useState(""),[J,ce]=F.useState([]),[be,Ae]=F.useState(null),[xe,z]=F.useState([]),[se,Z]=F.useState(!1),[K,$]=F.useState(void 0),[ue,ye]=F.useState(!1),[Se,Ce]=F.useState(""),[Xe,vt]=F.useState([]),[it,pt]=F.useState(null),[zt,sn]=F.useState(null),Ke=(he,De)=>sn({msg:he,type:De}),[Nn,Pn]=F.useState([...Hx,...Fx,...qx,...Yx,...Qx,...Kx,...$x,...Jx]);F.useEffect(()=>{const he=localStorage.getItem("fajmuls_username"),De=localStorage.getItem("fajmuls_settings");De?h(JSON.parse(De)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&h(Oe=>({...Oe,darkMode:!0})),he&&Ot(he,!1)},[]);const jt=async()=>{ye(!0);const he=[...Hx,...Fx,...qx,...Yx,...Qx,...Kx,...$x,...Jx];try{const De=await P5(),Oe=new Set(he.map(ke=>ke.id)),Qe=De.filter(ke=>!Oe.has(ke.id));Pn([...he,...Qe])}catch(De){console.error("Failed to load cloud packages",De),Pn(he),Ke("Gagal memuat paket online. Menggunakan data offline.","error")}finally{ye(!1)}};F.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(c)),c.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),oe.syncSettings(c)},[c]);const Ot=async(he,De=!0)=>{const Oe=he.trim();if(!Oe)return;oe.play("click"),Ce(Oe),localStorage.setItem("fajmuls_username",Oe),De&&e("HOME");const Qe=localStorage.getItem(`fajmuls_history_${Oe}`);let ke=[];if(Qe)try{ke=JSON.parse(Qe)}catch{console.error("History parse fail")}vt(ke)},Fs=()=>{oe.play("click"),localStorage.removeItem("fajmuls_username"),Ce(""),vt([]),e("LOGIN")},Sr=async he=>{const De=[he,...Xe];vt(De),localStorage.setItem(`fajmuls_history_${Se}`,JSON.stringify(De))},Ar=he=>{const De=Xe.filter(Oe=>Oe.id!==he);vt(De),localStorage.setItem(`fajmuls_history_${Se}`,JSON.stringify(De)),Ke("Riwayat berhasil dihapus secara permanen.","success"),oe.play("click")},mn=async he=>{Z(!0);try{const De=await xM(he);m({...he,extractedText:De}),_(!0)}catch{Ke("Gagal memproses materi. Coba lagi.","error")}finally{Z(!1)}},pi=async(he,De)=>{if(!De.trim()){Ke("Mohon isi judul atau topik.","error");return}Z(!0),V(he);try{const Oe=await vM(De,he);Me(Oe),e("SESSION")}catch{Ke("Gagal generate konten skripsi.","error")}finally{Z(!1)}},Ua=async he=>{if(!g){Ke("Materi hilang. Silakan input ulang.","error");return}Z(!0),M(he),I(Ge.DRILL);try{if(he==="ACTIVE_RECALL"||he==="PBL"||he==="PRACTICE"||he==="TEACHING"){const De=await On(Ge.DRILL,"GENERAL",g,5,[],void 0,he);ce(De)}else if(he==="SPACED_REPETITION"){const De=await bM(g);R(De)}else if(he==="MIND_MAP"){const De=await _M(g);L(De)}e("SESSION")}catch{Ke("Gagal memuat materi AI.","error")}finally{Z(!1)}},Hi=async(he,De,Oe)=>{if(t){if($(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!T&&he!==Ge.SIMULATION&&he!==Ge.WEAKNESS){Ke(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!C){Ke("Harap pilih jalur (CPNS / Kedinasan).","error");return}Z(!0),I(he),z([]),ce([]),Ae(null);try{const Qe=T;if(he===Ge.DRILL){const ke=await TM(t,Qe,C||void 0);Ae(ke),ke&&ke.question&&ce([ke.question])}else if(he===Ge.SIMULATION&&t==="SKD"&&C){const ke=await Ib(C);ce(ke||[])}else if(he===Ge.SIMULATION&&t==="UTBK"){const ke=await Rb();ce(ke||[])}else if(he===Ge.SIMULATION&&t==="TPA"){const ke=await EM();ce(ke||[])}else if(he===Ge.SIMULATION&&t==="PSIKOTEST"){const ke=await SM();ce(ke||[])}else{let ke=Oe||5;t==="PSIKOTEST"&&he===Ge.SIMULATION&&(ke=40),t==="INTERVIEW"&&(ke=3);const at=await On(he,t,Qe,ke,Array.from(j),C||void 0,void 0,De);ce(at||[])}e("SESSION")}catch(Qe){console.error(Qe),Ke("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{Z(!1)}}},Vn=(he,De,Oe=!1)=>{if(De){const Ue={...De,isAborted:Oe};Sr(Ue),(De.category!=="BENCHMARK"||Oe)&&e("HOME");return}z(he);let Qe=0,ke=0,at;if(t==="SKD"&&w===Ge.SIMULATION){let Ue=0,Be=0,bt=0;he.forEach(_t=>{var cn,es,pn,Hn,Fn,wn;const kt=J.find(Cn=>Cn.id===_t.questionId);kt&&((es=(cn=kt.metadata)==null?void 0:cn.subtest)!=null&&es.includes("TWK")&&(Ue+=_t.scoreEarned),(Hn=(pn=kt.metadata)==null?void 0:pn.subtest)!=null&&Hn.includes("TIU")&&(Be+=_t.scoreEarned),(wn=(Fn=kt.metadata)==null?void 0:Fn.subtest)!=null&&wn.includes("TKP")&&(bt+=_t.scoreEarned))}),Qe=Ue+Be+bt,ke=550,at={twk:Ue,tiu:Be,tkp:bt,total:Qe,passed:Ue>=65&&Be>=80&&bt>=166}}else if(t==="UTBK"&&w===Ge.SIMULATION){const Ue=Fn=>{const wn=J.filter(Cs=>{var gn,yn;return(yn=(gn=Cs.metadata)==null?void 0:gn.subtest)==null?void 0:yn.includes(Fn)});if(!wn.length)return 0;const Cn=he.filter(Cs=>{var gn,yn,Lt;return Cs.isCorrect&&((Lt=(yn=(gn=J.find($t=>$t.id===Cs.questionId))==null?void 0:gn.metadata)==null?void 0:yn.subtest)==null?void 0:Lt.includes(Fn))}).length;return Math.round(200+Cn/wn.length*600)},Be=Ue("Penalaran Umum"),bt=Ue("PPU"),_t=Ue("PBM"),kt=Ue("Kuantitatif"),cn=Ue("Literasi B.Indo"),es=Ue("Literasi B.Inggris"),pn=Ue("Penalaran Matematika"),Hn=Math.round((Be+bt+_t+kt+cn+es+pn)/7);Qe=Hn,ke=1e3,at={pu:Be,ppu:bt,pbm:_t,pk:kt,lbi:cn,lbe:es,pm:pn,average:Hn}}else if(t==="TPA"&&w===Ge.SIMULATION){let Ue=0,Be=0,bt=0,_t=0;he.forEach(es=>{var Hn,Fn,wn,Cn;const pn=J.find(Cs=>Cs.id===es.questionId);pn&&((Fn=(Hn=pn.metadata)==null?void 0:Hn.subtest)!=null&&Fn.includes("TBI")||(Cn=(wn=pn.metadata)==null?void 0:wn.subtest)!=null&&Cn.includes("Inggris")?(_t++,es.isCorrect&&Be++):(bt++,es.isCorrect&&Ue++))});const kt=Math.round(200+Ue/(bt||1)*600),cn=Math.round(Be/(_t||1)*100);Qe=kt+cn,ke=900,at={tpaScore:kt,tbiScore:cn,tpaCorrect:Ue,tbiCorrect:Be}}else if(t==="INTERVIEW"){const Ue=he.map(Be=>{var bt;return((bt=Be.interviewFeedback)==null?void 0:bt.score)||0});Qe=Math.round(Ue.reduce((Be,bt)=>Be+bt,0)/(Ue.length||1)),ke=100}else if(t==="PSIKOTEST"&&w===Ge.SIMULATION){const Ue=he.filter(cn=>cn.isCorrect).length,Be=J.length,bt=Ue/Be,_t=Math.round(70+bt*75);let kt=_t>=130?"Very Superior":_t>=120?"Superior":_t>=110?"High Average":_t>=90?"Average":"Low Average";Qe=_t,ke=160,at={iqScore:_t,classification:kt}}else if(t==="GENERAL"){const Ue=he.reduce((Be,bt)=>Be+(bt.scoreEarned||0),0);Qe=Math.round(Ue/(he.length||1)),ke=100}else{const Ue=he.filter(Be=>Be.isCorrect).length;Qe=Math.round(Ue/J.length*100),ke=100}Sr({id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:C||void 0,score:Qe,maxScore:ke,details:at,questions:J,answers:he,isAborted:Oe,packageTitle:K}),$(void 0),e("RESULTS")},qo=he=>{oe.play("click"),s(he),$(void 0),he==="BUTAWRNA"?e("COLORBLIND"):he==="BENCHMARK"?e("BENCHMARK"):(e("DASHBOARD"),m(null),_(!1),N(""),O(null),M(null),V(null),Me(""))},Nr=he=>{ae(he),e("TES_KECERMATAN")},wr=()=>{if(Xe.length===0){Ke("Belum ada riwayat untuk disimpan.","info");return}const he=JSON.stringify(Xe,null,2),De=new Blob([he],{type:"application/json"}),Oe=URL.createObjectURL(De),Qe=document.createElement("a");Qe.href=Oe,Qe.download=`Fajmuls_History_${Se}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe),URL.revokeObjectURL(Oe),Ke("Export berhasil!","success")},Cr=he=>{const De=new FileReader;De.onload=Oe=>{var Qe;try{const ke=(Qe=Oe.target)==null?void 0:Qe.result,at=JSON.parse(ke);if(!Array.isArray(at))throw new Error("Format salah");const Ue=new Set(Xe.map(_t=>_t.id)),Be=at.filter(_t=>!Ue.has(_t.id)),bt=[...Xe,...Be].sort((_t,kt)=>new Date(kt.date).getTime()-new Date(_t.date).getTime());vt(bt),localStorage.setItem(`fajmuls_history_${Se}`,JSON.stringify(bt)),Ke(`Berhasil memuat ${Be.length} riwayat baru.`,"success")}catch{Ke("Gagal membaca file JSON.","error")}},De.readAsText(he)},Zn=he=>{ce(he.questions),I(Ge.SIMULATION),$(he.title),e("SESSION")},an=async he=>{if(t)try{let De=[],Oe=60;t==="SKD"?(De=await Ib(C||"CPNS"),Oe=100):t==="UTBK"?(De=await Rb(),Oe=195):De=await On(Ge.SIMULATION,t,"SIMULATION",20,[],C||void 0,void 0,"HOTS");const ke=Nn.filter(Be=>Be.category===t&&(t==="SKD"?Be.skdStream===C:!0)).length+1;let at="";t==="SKD"?C==="CPNS"?at=`TO SKD CPNS ${ke}`:C==="KEDINASAN"?at=`TO SKD Kedinasan ${ke}`:at=`TO SKD ${ke}`:t==="UTBK"?at=`TO UTBK ${ke}`:t==="TPA"?at=`TO TPA TBI ${ke}`:t==="PSIKOTEST"?at=`TO Psikotest ${ke}`:at=`TO ${t} ${ke}`;const Ue={id:`gen-${Date.now()}`,title:at,category:t,skdStream:C||void 0,questions:De,durationMinutes:Oe,isAiGenerated:!0,version:"v2",createdAt:new Date().toISOString()};await z_(Ue),Pn(Be=>[Ue,...Be]),Ke(`Paket baru "${at}" berhasil dibuat dan disimpan ke database!`,"success")}catch(De){console.error(De),Ke("Gagal membuat paket soal. Coba lagi.","error")}},zn=async he=>{if(Pn(De=>De.filter(Oe=>Oe.id!==he)),he.startsWith("gen-")||he.startsWith("pkg-"))try{await V5(he),Ke("Paket dihapus dari database.","success")}catch(De){console.error(De)}else Ke("Paket dihapus dari tampilan lokal.","success")},Vt=he=>{Array.from(he).forEach(De=>{const Oe=new FileReader;Oe.onload=async Qe=>{var ke;try{const at=(ke=Qe.target)==null?void 0:ke.result,Ue=JSON.parse(at);Ue.id&&Ue.questions&&(await z_(Ue),Pn(Be=>Be.find(bt=>bt.id===Ue.id)?Be:[Ue,...Be]),Ke(`Paket "${Ue.title}" diimpor dan disimpan.`,"success"))}catch{Ke("File tidak valid.","error")}},Oe.readAsText(De)})};return n==="SPLASH"?u.jsx(zV,{onComplete:()=>e(Se?"HOME":"LOGIN")}):n==="LOGIN"?u.jsx(AL,{onLogin:he=>Ot(he)}):u.jsxs(u.Fragment,{children:[zt&&u.jsx(SL,{message:zt.msg,type:zt.type,onClose:()=>sn(null)}),u.jsx(HV,{isOpen:r,onClose:()=>l(!1),settings:c,onUpdate:h}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&u.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-6 py-3 flex justify-between items-center animate-fade-in-down",children:[u.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{oe.play("click"),e("HOME")},children:[u.jsx("img",{src:cd,alt:"Logo",className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden sm:block",children:"Fajmuls Learning"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[u.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:Se}),u.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Ready to learn"})]}),u.jsx("button",{onClick:()=>{oe.play("click"),l(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:u.jsx(JS,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),u.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"?"pt-20":""}`,children:[n==="HOME"&&u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center relative transition-colors duration-300",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("img",{src:cd,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:iT.map(he=>u.jsxs("button",{onClick:()=>qo(he.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden hover:-translate-y-1 hover:shadow-xl ${he.id==="BENCHMARK"?"bg-white dark:bg-slate-800 border-red-200 dark:border-red-900 hover:border-red-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500"}`,children:[he.id==="BENCHMARK"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),u.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/40 rounded-lg flex items-center justify-center mb-6 group-hover:bg-red-600 transition-colors relative z-10 text-red-600 dark:text-red-400 group-hover:text-white",children:u.jsx(Ns,{size:24})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),u.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors relative z-10",children:he.id==="GENERAL"?u.jsx(Vi,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):he.id==="SKD"?u.jsx(zS,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):he.id==="INTERVIEW"?u.jsx(lf,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):he.id==="BUTAWRNA"?u.jsx($S,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):he.id==="PSIKOTEST"?u.jsx(Ts,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):he.id==="SKRIPSI"?u.jsx(rf,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):he.id==="KECERMATAN"?u.jsx(FS,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):u.jsx(o0,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"})})]}),u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:he.name}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:he.desc})]},he.id))}),u.jsxs("div",{className:"mt-12 flex gap-4",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),e("HISTORY")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[u.jsx(l0,{size:18})," Riwayat Belajar"]}),u.jsxs("button",{onClick:Fs,className:"flex items-center gap-2 px-6 py-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl shadow-sm border border-rose-100 dark:border-rose-900 font-bold text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition",children:[u.jsx(G3,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&u.jsx(RL,{category:t,onBack:()=>{oe.play("back"),e("HOME")},onStartSession:Hi,onOpenTOSelection:()=>{oe.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{oe.play("click"),e("TES_KORAN")},onStartTesKecermatan:Nr,onGeneralInputSubmit:mn,generalInput:g,setGeneralInput:m,isReadingMaterial:v,onResetMaterial:()=>{_(!1),m(null)},onSubtestSelect:N,selectedSubtest:T,weakTopicsCount:j.size,loading:se,skdStream:C,onSkdStreamSelect:O,onHistory:()=>{oe.play("click"),e("HISTORY")},onStartGeneralSession:Ua,onStartSkripsiSession:pi,username:Se,isDarkMode:c.darkMode,onToggleDarkMode:()=>{h(he=>({...he,darkMode:!he.darkMode}))}}),n==="TO_SELECTION"&&u.jsx(qV,{category:t,skdStream:C||void 0,availablePackages:Nn,history:Xe,onSelectPackage:Zn,onGenerateNew:an,onDeletePackage:zn,onImportPackage:Vt,onBack:()=>{oe.play("back"),e("DASHBOARD")},showToast:Ke,confirmEnabled:c.confirmActions,onRefresh:jt,isLoading:ue}),n==="SESSION"&&(t==="SKRIPSI"?u.jsx(NL,{result:ge,feature:B,onBack:()=>{oe.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?u.jsx(wL,{questions:J,onComplete:he=>Vn(he)}):t==="GENERAL"&&le==="SPACED_REPETITION"?u.jsx(CL,{flashcards:D,onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&le==="MIND_MAP"?u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",u.jsxs("button",{onClick:()=>{oe.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[u.jsx(Nt,{size:18})," Kembali"]})," ",u.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",u.jsx(GV,{data:U})," "]}):t==="GENERAL"&&le==="FEYNMAN"?u.jsx(kL,{topic:(g==null?void 0:g.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&le==="SQ3R"?u.jsx(IL,{topic:(g==null?void 0:g.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):u.jsx(WV,{mode:w,questions:J,drillContent:be,onComplete:(he,De,Oe)=>Vn(he,De,Oe),isSkdSimulation:w===Ge.SIMULATION&&t==="SKD",isUtbkSimulation:w===Ge.SIMULATION&&t==="UTBK",category:t,showToast:Ke})),n==="TES_KORAN"&&u.jsx(sL,{onBack:()=>e("DASHBOARD"),onComplete:he=>Vn([],he)}),n==="TES_KECERMATAN"&&u.jsx(iL,{initialMode:te,onBack:()=>e("DASHBOARD"),onComplete:he=>Vn([],he)}),n==="BENCHMARK"&&u.jsx(EL,{onBack:()=>e("HOME"),onComplete:he=>Vn([],he),username:Se,history:Xe}),n==="RESULTS"&&u.jsx($V,{answers:xe,questions:J,onHome:()=>{oe.play("back"),e("HOME")},onRetry:()=>{oe.play("click"),Hi(w)},category:t,details:(ja=Xe[0])==null?void 0:ja.details}),n==="HISTORY"&&u.jsx(JV,{history:Xe,onBack:()=>{oe.play("back"),e("HOME")},onReview:he=>{oe.play("click"),pt(he),e("REVIEW")},username:Se,onExport:wr,onImport:Cr,isDarkMode:c.darkMode,onDelete:Ar}),n==="REVIEW"&&u.jsx(QV,{item:it,onBack:()=>{oe.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&u.jsx(rL,{onBack:()=>{oe.play("back"),e("HOME")},onComplete:he=>Vn([],he)})]})]})}const a1=document.getElementById("root");if(!a1)throw new Error("Could not find root element to mount to");const DL=$A.createRoot(a1);DL.render(u.jsx(OA.StrictMode,{children:u.jsx(ML,{})}));
