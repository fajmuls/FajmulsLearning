(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function iS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vp={exports:{}},Mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function Ak(){if(cb)return Mc;cb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:n,type:s,key:u,ref:r!==void 0?r:null,props:o}}return Mc.Fragment=e,Mc.jsx=t,Mc.jsxs=t,Mc}var ub;function wk(){return ub||(ub=1,vp.exports=Ak()),vp.exports}var c=wk(),bp={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function Nk(){if(db)return Je;db=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,I={};function V(H,ee,pe){this.props=H,this.context=ee,this.refs=I,this.updater=pe||k}V.prototype.isReactComponent={},V.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},V.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=V.prototype;function G(H,ee,pe){this.props=H,this.context=ee,this.refs=I,this.updater=pe||k}var Y=G.prototype=new N;Y.constructor=G,D(Y,V.prototype),Y.isPureReactComponent=!0;var ne=Array.isArray;function Q(){}var M={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(H,ee,pe){var ie=pe.ref;return{$$typeof:n,type:H,key:ee,ref:ie!==void 0?ie:null,props:pe}}function O(H,ee){return R(H.type,ee,H.props)}function U(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(pe){return ee[pe]})}var j=/\/+/g;function le(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):ee.toString(36)}function ke(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Q,Q):(H.status="pending",H.then(function(ee){H.status==="pending"&&(H.status="fulfilled",H.value=ee)},function(ee){H.status==="pending"&&(H.status="rejected",H.reason=ee)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function J(H,ee,pe,ie,se){var ge=typeof H;(ge==="undefined"||ge==="boolean")&&(H=null);var Ne=!1;if(H===null)Ne=!0;else switch(ge){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(H.$$typeof){case n:case e:Ne=!0;break;case v:return Ne=H._init,J(Ne(H._payload),ee,pe,ie,se)}}if(Ne)return se=se(H),Ne=ie===""?"."+le(H,0):ie,ne(se)?(pe="",Ne!=null&&(pe=Ne.replace(j,"$&/")+"/"),J(se,ee,pe,"",function(et){return et})):se!=null&&(U(se)&&(se=O(se,pe+(se.key==null||H&&H.key===se.key?"":(""+se.key).replace(j,"$&/")+"/")+Ne)),ee.push(se)),1;Ne=0;var Pe=ie===""?".":ie+":";if(ne(H))for(var Ge=0;Ge<H.length;Ge++)ie=H[Ge],ge=Pe+le(ie,Ge),Ne+=J(ie,ee,pe,ge,se);else if(Ge=A(H),typeof Ge=="function")for(H=Ge.call(H),Ge=0;!(ie=H.next()).done;)ie=ie.value,ge=Pe+le(ie,Ge++),Ne+=J(ie,ee,pe,ge,se);else if(ge==="object"){if(typeof H.then=="function")return J(ke(H),ee,pe,ie,se);throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function he(H,ee,pe){if(H==null)return H;var ie=[],se=0;return J(H,ie,"","",function(ge){return ee.call(pe,ge,se++)}),ie}function Te(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(pe){(H._status===0||H._status===-1)&&(H._status=1,H._result=pe)},function(pe){(H._status===0||H._status===-1)&&(H._status=2,H._result=pe)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var Me=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},be={map:he,forEach:function(H,ee,pe){he(H,function(){ee.apply(this,arguments)},pe)},count:function(H){var ee=0;return he(H,function(){ee++}),ee},toArray:function(H){return he(H,function(ee){return ee})||[]},only:function(H){if(!U(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Je.Activity=_,Je.Children=be,Je.Component=V,Je.Fragment=t,Je.Profiler=r,Je.PureComponent=G,Je.StrictMode=s,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Je.__COMPILER_RUNTIME={__proto__:null,c:function(H){return M.H.useMemoCache(H)}},Je.cache=function(H){return function(){return H.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(H,ee,pe){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ie=D({},H.props),se=H.key;if(ee!=null)for(ge in ee.key!==void 0&&(se=""+ee.key),ee)!P.call(ee,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&ee.ref===void 0||(ie[ge]=ee[ge]);var ge=arguments.length-2;if(ge===1)ie.children=pe;else if(1<ge){for(var Ne=Array(ge),Pe=0;Pe<ge;Pe++)Ne[Pe]=arguments[Pe+2];ie.children=Ne}return R(H.type,se,ie)},Je.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},Je.createElement=function(H,ee,pe){var ie,se={},ge=null;if(ee!=null)for(ie in ee.key!==void 0&&(ge=""+ee.key),ee)P.call(ee,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(se[ie]=ee[ie]);var Ne=arguments.length-2;if(Ne===1)se.children=pe;else if(1<Ne){for(var Pe=Array(Ne),Ge=0;Ge<Ne;Ge++)Pe[Ge]=arguments[Ge+2];se.children=Pe}if(H&&H.defaultProps)for(ie in Ne=H.defaultProps,Ne)se[ie]===void 0&&(se[ie]=Ne[ie]);return R(H,ge,se)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(H){return{$$typeof:h,render:H}},Je.isValidElement=U,Je.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:Te}},Je.memo=function(H,ee){return{$$typeof:p,type:H,compare:ee===void 0?null:ee}},Je.startTransition=function(H){var ee=M.T,pe={};M.T=pe;try{var ie=H(),se=M.S;se!==null&&se(pe,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Q,Me)}catch(ge){Me(ge)}finally{ee!==null&&pe.types!==null&&(ee.types=pe.types),M.T=ee}},Je.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Je.use=function(H){return M.H.use(H)},Je.useActionState=function(H,ee,pe){return M.H.useActionState(H,ee,pe)},Je.useCallback=function(H,ee){return M.H.useCallback(H,ee)},Je.useContext=function(H){return M.H.useContext(H)},Je.useDebugValue=function(){},Je.useDeferredValue=function(H,ee){return M.H.useDeferredValue(H,ee)},Je.useEffect=function(H,ee){return M.H.useEffect(H,ee)},Je.useEffectEvent=function(H){return M.H.useEffectEvent(H)},Je.useId=function(){return M.H.useId()},Je.useImperativeHandle=function(H,ee,pe){return M.H.useImperativeHandle(H,ee,pe)},Je.useInsertionEffect=function(H,ee){return M.H.useInsertionEffect(H,ee)},Je.useLayoutEffect=function(H,ee){return M.H.useLayoutEffect(H,ee)},Je.useMemo=function(H,ee){return M.H.useMemo(H,ee)},Je.useOptimistic=function(H,ee){return M.H.useOptimistic(H,ee)},Je.useReducer=function(H,ee,pe){return M.H.useReducer(H,ee,pe)},Je.useRef=function(H){return M.H.useRef(H)},Je.useState=function(H){return M.H.useState(H)},Je.useSyncExternalStore=function(H,ee,pe){return M.H.useSyncExternalStore(H,ee,pe)},Je.useTransition=function(){return M.H.useTransition()},Je.version="19.2.3",Je}var hb;function R0(){return hb||(hb=1,bp.exports=Nk()),bp.exports}var z=R0();const kk=iS(z);var _p={exports:{}},Dc={},Tp={exports:{}},Ep={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function Ck(){return fb||(fb=1,(function(n){function e(J,he){var Te=J.length;J.push(he);e:for(;0<Te;){var Me=Te-1>>>1,be=J[Me];if(0<r(be,he))J[Me]=he,J[Te]=be,Te=Me;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var he=J[0],Te=J.pop();if(Te!==he){J[0]=Te;e:for(var Me=0,be=J.length,H=be>>>1;Me<H;){var ee=2*(Me+1)-1,pe=J[ee],ie=ee+1,se=J[ie];if(0>r(pe,Te))ie<be&&0>r(se,pe)?(J[Me]=se,J[ie]=Te,Me=ie):(J[Me]=pe,J[ee]=Te,Me=ee);else if(ie<be&&0>r(se,Te))J[Me]=se,J[ie]=Te,Me=ie;else break e}}return he}function r(J,he){var Te=J.sortIndex-he.sortIndex;return Te!==0?Te:J.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var m=[],p=[],v=1,_=null,T=3,A=!1,k=!1,D=!1,I=!1,V=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Y(J){for(var he=t(p);he!==null;){if(he.callback===null)s(p);else if(he.startTime<=J)s(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(p)}}function ne(J){if(D=!1,Y(J),!k)if(t(m)!==null)k=!0,Q||(Q=!0,B());else{var he=t(p);he!==null&&ke(ne,he.startTime-J)}}var Q=!1,M=-1,P=5,R=-1;function O(){return I?!0:!(n.unstable_now()-R<P)}function U(){if(I=!1,Q){var J=n.unstable_now();R=J;var he=!0;try{e:{k=!1,D&&(D=!1,N(M),M=-1),A=!0;var Te=T;try{t:{for(Y(J),_=t(m);_!==null&&!(_.expirationTime>J&&O());){var Me=_.callback;if(typeof Me=="function"){_.callback=null,T=_.priorityLevel;var be=Me(_.expirationTime<=J);if(J=n.unstable_now(),typeof be=="function"){_.callback=be,Y(J),he=!0;break t}_===t(m)&&s(m),Y(J)}else s(m);_=t(m)}if(_!==null)he=!0;else{var H=t(p);H!==null&&ke(ne,H.startTime-J),he=!1}}break e}finally{_=null,T=Te,A=!1}he=void 0}}finally{he?B():Q=!1}}}var B;if(typeof G=="function")B=function(){G(U)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,le=j.port2;j.port1.onmessage=U,B=function(){le.postMessage(null)}}else B=function(){V(U,0)};function ke(J,he){M=V(function(){J(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(J){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var Te=T;T=he;try{return J()}finally{T=Te}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var Te=T;T=J;try{return he()}finally{T=Te}},n.unstable_scheduleCallback=function(J,he,Te){var Me=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Me+Te:Me):Te=Me,J){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Te+be,J={id:v++,callback:he,priorityLevel:J,startTime:Te,expirationTime:be,sortIndex:-1},Te>Me?(J.sortIndex=Te,e(p,J),t(m)===null&&J===t(p)&&(D?(N(M),M=-1):D=!0,ke(ne,Te-Me))):(J.sortIndex=be,e(m,J),k||A||(k=!0,Q||(Q=!0,B()))),J},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(J){var he=T;return function(){var Te=T;T=he;try{return J.apply(this,arguments)}finally{T=Te}}}})(Ep)),Ep}var mb;function Ik(){return mb||(mb=1,Tp.exports=Ck()),Tp.exports}var Sp={exports:{}},On={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function Rk(){if(pb)return On;pb=1;var n=R0();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(m,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:m,containerInfo:p,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,On.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(m,p,null,v)},On.flushSync=function(m){var p=u.T,v=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=p,s.p=v,s.d.f()}},On.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},On.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},On.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(m,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},On.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},On.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=h(v,p.crossOrigin);s.d.L(m,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},On.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},On.requestFormReset=function(m){s.d.r(m)},On.unstable_batchedUpdates=function(m,p){return m(p)},On.useFormState=function(m,p,v){return u.H.useFormState(m,p,v)},On.useFormStatus=function(){return u.H.useHostTransitionStatus()},On.version="19.2.3",On}var gb;function Mk(){if(gb)return Sp.exports;gb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sp.exports=Rk(),Sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function Dk(){if(xb)return Dc;xb=1;var n=Ik(),e=R0(),t=Mk();function s(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function h(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function m(i){if(o(i)!==i)throw Error(s(188))}function p(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(s(188));return a!==i?null:i}for(var l=i,d=a;;){var y=l.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){l=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===l)return m(y),i;if(b===d)return m(y),a;b=b.sibling}throw Error(s(188))}if(l.return!==d.return)l=y,d=b;else{for(var S=!1,C=y.child;C;){if(C===l){S=!0,l=y,d=b;break}if(C===d){S=!0,d=y,l=b;break}C=C.sibling}if(!S){for(C=b.child;C;){if(C===l){S=!0,l=b,d=y;break}if(C===d){S=!0,d=b,l=y;break}C=C.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:a}function v(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=v(i),a!==null)return a;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),G=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var j=Symbol.for("react.client.reference");function le(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===j?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case V:return"Profiler";case I:return"StrictMode";case ne:return"Suspense";case Q:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case G:return i.displayName||"Context";case N:return(i._context.displayName||"Context")+".Consumer";case Y:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return a=i.displayName||null,a!==null?a:le(i.type)||"Memo";case P:a=i._payload,i=i._init;try{return le(i(a))}catch{}}return null}var ke=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Me=[],be=-1;function H(i){return{current:i}}function ee(i){0>be||(i.current=Me[be],Me[be]=null,be--)}function pe(i,a){be++,Me[be]=i.current,i.current=a}var ie=H(null),se=H(null),ge=H(null),Ne=H(null);function Pe(i,a){switch(pe(ge,a),pe(se,i),pe(ie,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Mv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Mv(a),i=Dv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(ie),pe(ie,i)}function Ge(){ee(ie),ee(se),ee(ge)}function et(i){i.memoizedState!==null&&pe(Ne,i);var a=ie.current,l=Dv(a,i.type);a!==l&&(pe(se,i),pe(ie,l))}function zt(i){se.current===i&&(ee(ie),ee(se)),Ne.current===i&&(ee(Ne),kc._currentValue=Te)}var ft,Ke;function st(i){if(ft===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);ft=a&&a[1]||"",Ke=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+i+Ke}var $t=!1;function Ft(i,a){if(!i||$t)return"";$t=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(i,[],fe)}else{try{fe.call()}catch(ae){te=ae}i.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=i())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],C=b[1];if(S&&C){var F=S.split(`
`),Z=C.split(`
`);for(y=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Z.length&&!Z[y].includes("DetermineComponentFrameRoot");)y++;if(d===F.length||y===Z.length)for(d=F.length-1,y=Z.length-1;1<=d&&0<=y&&F[d]!==Z[y];)y--;for(;1<=d&&0<=y;d--,y--)if(F[d]!==Z[y]){if(d!==1||y!==1)do if(d--,y--,0>y||F[d]!==Z[y]){var ce=`
`+F[d].replace(" at new "," at ");return i.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",i.displayName)),ce}while(1<=d&&0<=y);break}}}finally{$t=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?st(l):""}function gn(i,a){switch(i.tag){case 26:case 27:case 5:return st(i.type);case 16:return st("Lazy");case 13:return i.child!==a&&a!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return Ft(i.type,!1);case 11:return Ft(i.type.render,!1);case 1:return Ft(i.type,!0);case 31:return st("Activity");default:return""}}function Ie(i){try{var a="",l=null;do a+=gn(i,l),l=i,i=i.return;while(i);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var _e=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,pt=n.unstable_cancelCallback,tn=n.unstable_shouldYield,Ut=n.unstable_requestPaint,Ct=n.unstable_now,Kn=n.unstable_getCurrentPriorityLevel,ns=n.unstable_ImmediatePriority,Yt=n.unstable_UserBlockingPriority,$n=n.unstable_NormalPriority,Ui=n.unstable_LowPriority,po=n.unstable_IdlePriority,Ta=n.log,Yn=n.unstable_setDisableYieldValue,nn=null,xn=null;function ss(i){if(typeof Ta=="function"&&Yn(i),xn&&typeof xn.setStrictMode=="function")try{xn.setStrictMode(nn,i)}catch{}}var Vt=Math.clz32?Math.clz32:Sa,Ea=Math.log,nt=Math.LN2;function Sa(i){return i>>>=0,i===0?32:31-(Ea(i)/nt|0)|0}var jn=256,mi=262144,Xt=4194304;function Cs(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Is(i,a,l){var d=i.pendingLanes;if(d===0)return 0;var y=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var C=d&134217727;return C!==0?(d=C&~b,d!==0?y=Cs(d):(S&=C,S!==0?y=Cs(S):l||(l=C&~i,l!==0&&(y=Cs(l))))):(C=d&~b,C!==0?y=Cs(C):S!==0?y=Cs(S):l||(l=d&~i,l!==0&&(y=Cs(l)))),y===0?0:a!==0&&a!==y&&(a&b)===0&&(b=y&-y,l=a&-a,b>=l||b===32&&(l&4194048)!==0)?a:y}function is(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Vl(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function go(){var i=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),i}function Rs(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function ji(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ol(i,a,l,d,y,b){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var C=i.entanglements,F=i.expirationTimes,Z=i.hiddenUpdates;for(l=S&~l;0<l;){var ce=31-Vt(l),fe=1<<ce;C[ce]=0,F[ce]=-1;var te=Z[ce];if(te!==null)for(Z[ce]=null,ce=0;ce<te.length;ce++){var ae=te[ce];ae!==null&&(ae.lane&=-536870913)}l&=~fe}d!==0&&Vi(i,d,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~a))}function Vi(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Vt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function Aa(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var d=31-Vt(l),y=1<<d;y&a|i[d]&a&&(i[d]|=a),l&=~y}}function _r(i,a){var l=a&-a;return l=(l&42)!==0?1:Oi(l),(l&(i.suspendedLanes|a))!==0?0:l}function Oi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function xo(){var i=he.p;return i!==0?i:(i=window.event,i===void 0?32:nb(i.type))}function ps(i,a){var l=he.p;try{return he.p=i,a()}finally{he.p=l}}var gs=Math.random().toString(36).slice(2),Jt="__reactFiber$"+gs,Ot="__reactProps$"+gs,xs="__reactContainer$"+gs,Gi="__reactEvents$"+gs,Gl="__reactListeners$"+gs,yo="__reactHandles$"+gs,vo="__reactResources$"+gs,Ms="__reactMarker$"+gs;function Tr(i){delete i[Jt],delete i[Ot],delete i[Gi],delete i[Gl],delete i[yo]}function Ds(i){var a=i[Jt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[xs]||l[Jt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Gv(i);i!==null;){if(l=i[Jt])return l;i=Gv(i)}return a}i=l,l=i.parentNode}return null}function Jn(i){if(i=i[Jt]||i[xs]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function K(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(s(33))}function xe(i){var a=i[vo];return a||(a=i[vo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ee(i){i[Ms]=!0}var Be=new Set,Oe={};function it(i,a){Ue(i,a),Ue(i+"Capture",a)}function Ue(i,a){for(Oe[i]=a,i=0;i<a.length;i++)Be.add(a[i])}var We=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),St={},bt={};function yn(i){return _e.call(bt,i)?!0:_e.call(St,i)?!1:We.test(i)?bt[i]=!0:(St[i]=!0,!1)}function Sn(i,a,l){if(yn(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Qt(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function At(i,a,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+d)}}function Pt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function An(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function rs(i,a,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,b.call(this,S)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function ot(i){if(!i._valueTracker){var a=An(i)?"checked":"value";i._valueTracker=rs(i,a,""+i[a])}}function as(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),d="";return i&&(d=An(i)?i.checked?"true":"false":i.value),i=d,i!==l?(a.setValue(i),!0):!1}function Vn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ys=/[\n"\\]/g;function wn(i){return i.replace(ys,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Er(i,a,l,d,y,b,S,C){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),a!=null?S==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Pt(a)):i.value!==""+Pt(a)&&(i.value=""+Pt(a)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),a!=null?Bl(i,S,Pt(a)):l!=null?Bl(i,S,Pt(l)):d!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Pt(C):i.removeAttribute("name")}function yu(i,a,l,d,y,b,S,C){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){ot(i);return}l=l!=null?""+Pt(l):"",a=a!=null?""+Pt(a):l,C||a===i.value||(i.value=a),i.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=C?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),ot(i)}function Bl(i,a,l){a==="number"&&Vn(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Sr(i,a,l,d){if(i=i.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<i.length;l++)y=a.hasOwnProperty("$"+i[l].value),i[l].selected!==y&&(i[l].selected=y),y&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Pt(l),a=null,y=0;y<i.length;y++){if(i[y].value===l){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function vu(i,a,l){if(a!=null&&(a=""+Pt(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Pt(l):""}function Ar(i,a,l,d){if(a==null){if(d!=null){if(l!=null)throw Error(s(92));if(ke(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),a=l}l=Pt(a),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),ot(i)}function os(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hl(i,a,l){var d=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,l):typeof l!="number"||l===0||bu.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function zl(i,a,l){if(a!=null&&typeof a!="object")throw Error(s(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&l[y]!==d&&Hl(i,y,d)}else for(var b in a)a.hasOwnProperty(b)&&Hl(i,b,a[b])}function bo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(i){return wr.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ws(){}var Fl=null;function Ps(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Nr=null,pi=null;function wa(i){var a=Jn(i);if(a&&(i=a.stateNode)){var l=i[Ot]||null;e:switch(i=a.stateNode,a.type){case"input":if(Er(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+wn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var d=l[a];if(d!==i&&d.form===i.form){var y=d[Ot]||null;if(!y)throw Error(s(90));Er(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<l.length;a++)d=l[a],d.form===i.form&&as(d)}break e;case"textarea":vu(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Sr(i,!!l.multiple,a,!1)}}}var To=!1;function kr(i,a,l){if(To)return i(a,l);To=!0;try{var d=i(a);return d}finally{if(To=!1,(Nr!==null||pi!==null)&&(md(),Nr&&(a=Nr,i=pi,pi=Nr=null,wa(a),i)))for(a=0;a<i.length;a++)wa(i[a])}}function Xs(i,a){var l=i.stateNode;if(l===null)return null;var d=l[Ot]||null;if(d===null)return null;l=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,a,typeof l));return l}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=!1;if(Ls)try{var It={};Object.defineProperty(It,"passive",{get:function(){Na=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{Na=!1}var gi=null,ql=null,ka=null;function Kl(){if(ka)return ka;var i,a=ql,l=a.length,d,y="value"in gi?gi.value:gi.textContent,b=y.length;for(i=0;i<l&&a[i]===y[i];i++);var S=l-i;for(d=1;d<=S&&a[l-d]===y[b-d];d++);return ka=y.slice(i,1<d?1-d:void 0)}function Ca(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Bi(){return!0}function Zs(){return!1}function Nn(i){function a(l,d,y,b,S){this._reactName=l,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(b):b[C]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Bi:Zs,this.isPropagationStopped=Zs,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),a}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=Nn(Hi),Cr=_({},Hi,{view:0,detail:0}),$l=Nn(Cr),Ir,Eo,yi,So=_({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yi&&(yi&&i.type==="mousemove"?(Ir=i.screenX-yi.screenX,Eo=i.screenY-yi.screenY):Eo=Ir=0,yi=i),Ir)},movementY:function(i){return"movementY"in i?i.movementY:Eo}}),Yl=Nn(So),Ia=_({},So,{dataTransfer:0}),Tu=Nn(Ia),Eu=_({},Cr,{relatedTarget:0}),Ra=Nn(Eu),Jl=_({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=Nn(Jl),Ao=_({},Hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Au=Nn(Ao),wu=_({},Hi,{data:0}),vi=Nn(wu),Nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Cu[i])?!!a[i]:!1}function Rr(){return Iu}var Qn=_({},Cr,{key:function(i){if(i.key){var a=Nu[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Ca(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ku[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(i){return i.type==="keypress"?Ca(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ca(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ru=Nn(Qn),Mu=_({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zi=Nn(Mu),x=_({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),E=Nn(x),w=_({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),L=Nn(w),W=_({},So,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Nn(W),ve=_({},Hi,{newState:0,oldState:0}),Xe=Nn(ve),sn=[9,13,27,32],_t=Ls&&"CompositionEvent"in window,qt=null;Ls&&"documentMode"in document&&(qt=document.documentMode);var Us=Ls&&"TextEvent"in window&&!qt,bi=Ls&&(!_t||qt&&8<qt&&11>=qt),ei=" ",ti=!1;function Ma(i,a){switch(i){case"keyup":return sn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var No=!1;function J1(i,a){switch(i){case"compositionend":return wo(a);case"keypress":return a.which!==32?null:(ti=!0,ei);case"textInput":return i=a.data,i===ei&&ti?null:i;default:return null}}function Q1(i,a){if(No)return i==="compositionend"||!_t&&Ma(i,a)?(i=Kl(),ka=ql=gi=null,No=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return bi&&a.locale!=="ko"?null:a.data;default:return null}}var W1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!W1[i.type]:a==="textarea"}function Fg(i,a,l,d){Nr?pi?pi.push(d):pi=[d]:Nr=d,a=_d(a,"onChange"),0<a.length&&(l=new xi("onChange","change",null,l,d),i.push({event:l,listeners:a}))}var Ql=null,Wl=null;function X1(i){wv(i,0)}function Du(i){var a=K(i);if(as(a))return i}function qg(i,a){if(i==="change")return a}var Kg=!1;if(Ls){var wf;if(Ls){var Nf="oninput"in document;if(!Nf){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),Nf=typeof $g.oninput=="function"}wf=Nf}else wf=!1;Kg=wf&&(!document.documentMode||9<document.documentMode)}function Yg(){Ql&&(Ql.detachEvent("onpropertychange",Jg),Wl=Ql=null)}function Jg(i){if(i.propertyName==="value"&&Du(Wl)){var a=[];Fg(a,Wl,i,Ps(i)),kr(X1,a)}}function Z1(i,a,l){i==="focusin"?(Yg(),Ql=a,Wl=l,Ql.attachEvent("onpropertychange",Jg)):i==="focusout"&&Yg()}function eN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Du(Wl)}function tN(i,a){if(i==="click")return Du(a)}function nN(i,a){if(i==="input"||i==="change")return Du(a)}function sN(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var vs=typeof Object.is=="function"?Object.is:sN;function Xl(i,a){if(vs(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),d=Object.keys(a);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var y=l[d];if(!_e.call(a,y)||!vs(i[y],a[y]))return!1}return!0}function Qg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Wg(i,a){var l=Qg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=a&&d>=a)return{node:l,offset:a-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Qg(l)}}function Xg(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Xg(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Zg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Vn(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Vn(i.document)}return a}function kf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var iN=Ls&&"documentMode"in document&&11>=document.documentMode,ko=null,Cf=null,Zl=null,If=!1;function ex(i,a,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;If||ko==null||ko!==Vn(d)||(d=ko,"selectionStart"in d&&kf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Zl&&Xl(Zl,d)||(Zl=d,d=_d(Cf,"onSelect"),0<d.length&&(a=new xi("onSelect","select",null,a,l),i.push({event:a,listeners:d}),a.target=ko)))}function Da(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Co={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Rf={},tx={};Ls&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Pa(i){if(Rf[i])return Rf[i];if(!Co[i])return i;var a=Co[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in tx)return Rf[i]=a[l];return i}var nx=Pa("animationend"),sx=Pa("animationiteration"),ix=Pa("animationstart"),rN=Pa("transitionrun"),aN=Pa("transitionstart"),oN=Pa("transitioncancel"),rx=Pa("transitionend"),ax=new Map,Mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mf.push("scrollEnd");function ni(i,a){ax.set(i,a),it(a,[i])}var Pu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},js=[],Io=0,Df=0;function Lu(){for(var i=Io,a=Df=Io=0;a<i;){var l=js[a];js[a++]=null;var d=js[a];js[a++]=null;var y=js[a];js[a++]=null;var b=js[a];if(js[a++]=null,d!==null&&y!==null){var S=d.pending;S===null?y.next=y:(y.next=S.next,S.next=y),d.pending=y}b!==0&&ox(l,y,b)}}function Uu(i,a,l,d){js[Io++]=i,js[Io++]=a,js[Io++]=l,js[Io++]=d,Df|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Pf(i,a,l,d){return Uu(i,a,l,d),ju(i)}function La(i,a){return Uu(i,null,null,a),ju(i)}function ox(i,a,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var y=!1,b=i.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&a!==null&&(y=31-Vt(l),i=b.hiddenUpdates,d=i[y],d===null?i[y]=[a]:d.push(a),a.lane=l|536870912),b):null}function ju(i){if(50<_c)throw _c=0,zm=null,Error(s(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Ro={};function lN(i,a,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(i,a,l,d){return new lN(i,a,l,d)}function Lf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Fi(i,a){var l=i.alternate;return l===null?(l=bs(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function lx(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Vu(i,a,l,d,y,b){var S=0;if(d=i,typeof i=="function")Lf(i)&&(S=1);else if(typeof i=="string")S=fk(i,l,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=bs(31,l,a,y),i.elementType=R,i.lanes=b,i;case D:return Ua(l.children,y,b,a);case I:S=8,y|=24;break;case V:return i=bs(12,l,a,y|2),i.elementType=V,i.lanes=b,i;case ne:return i=bs(13,l,a,y),i.elementType=ne,i.lanes=b,i;case Q:return i=bs(19,l,a,y),i.elementType=Q,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:S=10;break e;case N:S=9;break e;case Y:S=11;break e;case M:S=14;break e;case P:S=16,d=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),d=null}return a=bs(S,l,a,y),a.elementType=i,a.type=d,a.lanes=b,a}function Ua(i,a,l,d){return i=bs(7,i,d,a),i.lanes=l,i}function Uf(i,a,l){return i=bs(6,i,null,a),i.lanes=l,i}function cx(i){var a=bs(18,null,null,0);return a.stateNode=i,a}function jf(i,a,l){return a=bs(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var ux=new WeakMap;function Vs(i,a){if(typeof i=="object"&&i!==null){var l=ux.get(i);return l!==void 0?l:(a={value:i,source:a,stack:Ie(a)},ux.set(i,a),a)}return{value:i,source:a,stack:Ie(a)}}var Mo=[],Do=0,Ou=null,ec=0,Os=[],Gs=0,Mr=null,_i=1,Ti="";function qi(i,a){Mo[Do++]=ec,Mo[Do++]=Ou,Ou=i,ec=a}function dx(i,a,l){Os[Gs++]=_i,Os[Gs++]=Ti,Os[Gs++]=Mr,Mr=i;var d=_i;i=Ti;var y=32-Vt(d)-1;d&=~(1<<y),l+=1;var b=32-Vt(a)+y;if(30<b){var S=y-y%5;b=(d&(1<<S)-1).toString(32),d>>=S,y-=S,_i=1<<32-Vt(a)+y|l<<y|d,Ti=b+i}else _i=1<<b|l<<y|d,Ti=i}function Vf(i){i.return!==null&&(qi(i,1),dx(i,1,0))}function Of(i){for(;i===Ou;)Ou=Mo[--Do],Mo[Do]=null,ec=Mo[--Do],Mo[Do]=null;for(;i===Mr;)Mr=Os[--Gs],Os[Gs]=null,Ti=Os[--Gs],Os[Gs]=null,_i=Os[--Gs],Os[Gs]=null}function hx(i,a){Os[Gs++]=_i,Os[Gs++]=Ti,Os[Gs++]=Mr,_i=a.id,Ti=a.overflow,Mr=i}var kn=null,Gt=null,mt=!1,Dr=null,Bs=!1,Gf=Error(s(519));function Pr(i){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tc(Vs(a,i)),Gf}function fx(i){var a=i.stateNode,l=i.type,d=i.memoizedProps;switch(a[Jt]=i,a[Ot]=d,l){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(l=0;l<Ec.length;l++)at(Ec[l],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":at("invalid",a),yu(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":at("invalid",a);break;case"textarea":at("invalid",a),Ar(a,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||d.suppressHydrationWarning===!0||Iv(a.textContent,l)?(d.popover!=null&&(at("beforetoggle",a),at("toggle",a)),d.onScroll!=null&&at("scroll",a),d.onScrollEnd!=null&&at("scrollend",a),d.onClick!=null&&(a.onclick=Ws),a=!0):a=!1,a||Pr(i,!0)}function mx(i){for(kn=i.return;kn;)switch(kn.tag){case 5:case 31:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:kn=kn.return}}function Po(i){if(i!==kn)return!1;if(!mt)return mx(i),mt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||ip(i.type,i.memoizedProps)),l=!l),l&&Gt&&Pr(i),mx(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Gt=Ov(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Gt=Ov(i)}else a===27?(a=Gt,Yr(i.type)?(i=cp,cp=null,Gt=i):Gt=a):Gt=kn?zs(i.stateNode.nextSibling):null;return!0}function ja(){Gt=kn=null,mt=!1}function Bf(){var i=Dr;return i!==null&&(ds===null?ds=i:ds.push.apply(ds,i),Dr=null),i}function tc(i){Dr===null?Dr=[i]:Dr.push(i)}var Hf=H(null),Va=null,Ki=null;function Lr(i,a,l){pe(Hf,a._currentValue),a._currentValue=l}function $i(i){i._currentValue=Hf.current,ee(Hf)}function zf(i,a,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===l)break;i=i.return}}function Ff(i,a,l,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var S=y.child;b=b.firstContext;e:for(;b!==null;){var C=b;b=y;for(var F=0;F<a.length;F++)if(C.context===a[F]){b.lanes|=l,C=b.alternate,C!==null&&(C.lanes|=l),zf(b.return,l,i),d||(S=null);break e}b=C.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(s(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),zf(S,l,i),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function Lo(i,a,l,d){i=null;for(var y=a,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var C=y.type;vs(y.pendingProps.value,S.value)||(i!==null?i.push(C):i=[C])}}else if(y===Ne.current){if(S=y.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(kc):i=[kc])}y=y.return}i!==null&&Ff(a,i,l,d),a.flags|=262144}function Gu(i){for(i=i.firstContext;i!==null;){if(!vs(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Oa(i){Va=i,Ki=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Cn(i){return px(Va,i)}function Bu(i,a){return Va===null&&Oa(i),px(i,a)}function px(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ki===null){if(i===null)throw Error(s(308));Ki=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Ki=Ki.next=a;return l}var cN=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},uN=n.unstable_scheduleCallback,dN=n.unstable_NormalPriority,cn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qf(){return{controller:new cN,data:new Map,refCount:0}}function nc(i){i.refCount--,i.refCount===0&&uN(dN,function(){i.controller.abort()})}var sc=null,Kf=0,Uo=0,jo=null;function hN(i,a){if(sc===null){var l=sc=[];Kf=0,Uo=Jm(),jo={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Kf++,a.then(gx,gx),a}function gx(){if(--Kf===0&&sc!==null){jo!==null&&(jo.status="fulfilled");var i=sc;sc=null,Uo=0,jo=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function fN(i,a){var l=[],d={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<l.length;y++)(0,l[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),d}var xx=J.S;J.S=function(i,a){ev=Ct(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&hN(i,a),xx!==null&&xx(i,a)};var Ga=H(null);function $f(){var i=Ga.current;return i!==null?i:Lt.pooledCache}function Hu(i,a){a===null?pe(Ga,Ga.current):pe(Ga,a.pool)}function yx(){var i=$f();return i===null?null:{parent:cn._currentValue,pool:i}}var Vo=Error(s(460)),Yf=Error(s(474)),zu=Error(s(542)),Fu={then:function(){}};function vx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function bx(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Ws,Ws),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Tx(i),i;default:if(typeof a.status=="string")a.then(Ws,Ws);else{if(i=Lt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Tx(i),i}throw Ha=a,Vo}}function Ba(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ha=l,Vo):l}}var Ha=null;function _x(){if(Ha===null)throw Error(s(459));var i=Ha;return Ha=null,i}function Tx(i){if(i===Vo||i===zu)throw Error(s(483))}var Oo=null,ic=0;function qu(i){var a=ic;return ic+=1,Oo===null&&(Oo=[]),bx(Oo,i,a)}function rc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Ku(i,a){throw a.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(a),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Ex(i){function a($,q){if(i){var X=$.deletions;X===null?($.deletions=[q],$.flags|=16):X.push(q)}}function l($,q){if(!i)return null;for(;q!==null;)a($,q),q=q.sibling;return null}function d($){for(var q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function y($,q){return $=Fi($,q),$.index=0,$.sibling=null,$}function b($,q,X){return $.index=X,i?(X=$.alternate,X!==null?(X=X.index,X<q?($.flags|=67108866,q):X):($.flags|=67108866,q)):($.flags|=1048576,q)}function S($){return i&&$.alternate===null&&($.flags|=67108866),$}function C($,q,X,ue){return q===null||q.tag!==6?(q=Uf(X,$.mode,ue),q.return=$,q):(q=y(q,X),q.return=$,q)}function F($,q,X,ue){var je=X.type;return je===D?ce($,q,X.props.children,ue,X.key):q!==null&&(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===P&&Ba(je)===q.type)?(q=y(q,X.props),rc(q,X),q.return=$,q):(q=Vu(X.type,X.key,X.props,null,$.mode,ue),rc(q,X),q.return=$,q)}function Z($,q,X,ue){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=jf(X,$.mode,ue),q.return=$,q):(q=y(q,X.children||[]),q.return=$,q)}function ce($,q,X,ue,je){return q===null||q.tag!==7?(q=Ua(X,$.mode,ue,je),q.return=$,q):(q=y(q,X),q.return=$,q)}function fe($,q,X){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Uf(""+q,$.mode,X),q.return=$,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return X=Vu(q.type,q.key,q.props,null,$.mode,X),rc(X,q),X.return=$,X;case k:return q=jf(q,$.mode,X),q.return=$,q;case P:return q=Ba(q),fe($,q,X)}if(ke(q)||B(q))return q=Ua(q,$.mode,X,null),q.return=$,q;if(typeof q.then=="function")return fe($,qu(q),X);if(q.$$typeof===G)return fe($,Bu($,q),X);Ku($,q)}return null}function te($,q,X,ue){var je=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return je!==null?null:C($,q,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return X.key===je?F($,q,X,ue):null;case k:return X.key===je?Z($,q,X,ue):null;case P:return X=Ba(X),te($,q,X,ue)}if(ke(X)||B(X))return je!==null?null:ce($,q,X,ue,null);if(typeof X.then=="function")return te($,q,qu(X),ue);if(X.$$typeof===G)return te($,q,Bu($,X),ue);Ku($,X)}return null}function ae($,q,X,ue,je){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $=$.get(X)||null,C(q,$,""+ue,je);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case A:return $=$.get(ue.key===null?X:ue.key)||null,F(q,$,ue,je);case k:return $=$.get(ue.key===null?X:ue.key)||null,Z(q,$,ue,je);case P:return ue=Ba(ue),ae($,q,X,ue,je)}if(ke(ue)||B(ue))return $=$.get(X)||null,ce(q,$,ue,je,null);if(typeof ue.then=="function")return ae($,q,X,qu(ue),je);if(ue.$$typeof===G)return ae($,q,X,Bu(q,ue),je);Ku(q,ue)}return null}function Re($,q,X,ue){for(var je=null,xt=null,De=q,tt=q=0,ct=null;De!==null&&tt<X.length;tt++){De.index>tt?(ct=De,De=null):ct=De.sibling;var yt=te($,De,X[tt],ue);if(yt===null){De===null&&(De=ct);break}i&&De&&yt.alternate===null&&a($,De),q=b(yt,q,tt),xt===null?je=yt:xt.sibling=yt,xt=yt,De=ct}if(tt===X.length)return l($,De),mt&&qi($,tt),je;if(De===null){for(;tt<X.length;tt++)De=fe($,X[tt],ue),De!==null&&(q=b(De,q,tt),xt===null?je=De:xt.sibling=De,xt=De);return mt&&qi($,tt),je}for(De=d(De);tt<X.length;tt++)ct=ae(De,$,tt,X[tt],ue),ct!==null&&(i&&ct.alternate!==null&&De.delete(ct.key===null?tt:ct.key),q=b(ct,q,tt),xt===null?je=ct:xt.sibling=ct,xt=ct);return i&&De.forEach(function(Zr){return a($,Zr)}),mt&&qi($,tt),je}function He($,q,X,ue){if(X==null)throw Error(s(151));for(var je=null,xt=null,De=q,tt=q=0,ct=null,yt=X.next();De!==null&&!yt.done;tt++,yt=X.next()){De.index>tt?(ct=De,De=null):ct=De.sibling;var Zr=te($,De,yt.value,ue);if(Zr===null){De===null&&(De=ct);break}i&&De&&Zr.alternate===null&&a($,De),q=b(Zr,q,tt),xt===null?je=Zr:xt.sibling=Zr,xt=Zr,De=ct}if(yt.done)return l($,De),mt&&qi($,tt),je;if(De===null){for(;!yt.done;tt++,yt=X.next())yt=fe($,yt.value,ue),yt!==null&&(q=b(yt,q,tt),xt===null?je=yt:xt.sibling=yt,xt=yt);return mt&&qi($,tt),je}for(De=d(De);!yt.done;tt++,yt=X.next())yt=ae(De,$,tt,yt.value,ue),yt!==null&&(i&&yt.alternate!==null&&De.delete(yt.key===null?tt:yt.key),q=b(yt,q,tt),xt===null?je=yt:xt.sibling=yt,xt=yt);return i&&De.forEach(function(Sk){return a($,Sk)}),mt&&qi($,tt),je}function Dt($,q,X,ue){if(typeof X=="object"&&X!==null&&X.type===D&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case A:e:{for(var je=X.key;q!==null;){if(q.key===je){if(je=X.type,je===D){if(q.tag===7){l($,q.sibling),ue=y(q,X.props.children),ue.return=$,$=ue;break e}}else if(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===P&&Ba(je)===q.type){l($,q.sibling),ue=y(q,X.props),rc(ue,X),ue.return=$,$=ue;break e}l($,q);break}else a($,q);q=q.sibling}X.type===D?(ue=Ua(X.props.children,$.mode,ue,X.key),ue.return=$,$=ue):(ue=Vu(X.type,X.key,X.props,null,$.mode,ue),rc(ue,X),ue.return=$,$=ue)}return S($);case k:e:{for(je=X.key;q!==null;){if(q.key===je)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){l($,q.sibling),ue=y(q,X.children||[]),ue.return=$,$=ue;break e}else{l($,q);break}else a($,q);q=q.sibling}ue=jf(X,$.mode,ue),ue.return=$,$=ue}return S($);case P:return X=Ba(X),Dt($,q,X,ue)}if(ke(X))return Re($,q,X,ue);if(B(X)){if(je=B(X),typeof je!="function")throw Error(s(150));return X=je.call(X),He($,q,X,ue)}if(typeof X.then=="function")return Dt($,q,qu(X),ue);if(X.$$typeof===G)return Dt($,q,Bu($,X),ue);Ku($,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,q!==null&&q.tag===6?(l($,q.sibling),ue=y(q,X),ue.return=$,$=ue):(l($,q),ue=Uf(X,$.mode,ue),ue.return=$,$=ue),S($)):l($,q)}return function($,q,X,ue){try{ic=0;var je=Dt($,q,X,ue);return Oo=null,je}catch(De){if(De===Vo||De===zu)throw De;var xt=bs(29,De,null,$.mode);return xt.lanes=ue,xt.return=$,xt}finally{}}}var za=Ex(!0),Sx=Ex(!1),Ur=!1;function Jf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function jr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Vr(i,a,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Tt&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=ju(i),ox(i,null,l),a}return Uu(i,d,a,l),ju(i)}function ac(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Aa(i,l)}}function Wf(i,a){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var y=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?y=b=S:b=b.next=S,l=l.next}while(l!==null);b===null?y=b=a:b=b.next=a}else y=b=a;l={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Xf=!1;function oc(){if(Xf){var i=jo;if(i!==null)throw i}}function lc(i,a,l,d){Xf=!1;var y=i.updateQueue;Ur=!1;var b=y.firstBaseUpdate,S=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var F=C,Z=F.next;F.next=null,S===null?b=Z:S.next=Z,S=F;var ce=i.alternate;ce!==null&&(ce=ce.updateQueue,C=ce.lastBaseUpdate,C!==S&&(C===null?ce.firstBaseUpdate=Z:C.next=Z,ce.lastBaseUpdate=F))}if(b!==null){var fe=y.baseState;S=0,ce=Z=F=null,C=b;do{var te=C.lane&-536870913,ae=te!==C.lane;if(ae?(lt&te)===te:(d&te)===te){te!==0&&te===Uo&&(Xf=!0),ce!==null&&(ce=ce.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Re=i,He=C;te=a;var Dt=l;switch(He.tag){case 1:if(Re=He.payload,typeof Re=="function"){fe=Re.call(Dt,fe,te);break e}fe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=He.payload,te=typeof Re=="function"?Re.call(Dt,fe,te):Re,te==null)break e;fe=_({},fe,te);break e;case 2:Ur=!0}}te=C.callback,te!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ce===null?(Z=ce=ae,F=fe):ce=ce.next=ae,S|=te;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;ae=C,C=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);ce===null&&(F=fe),y.baseState=F,y.firstBaseUpdate=Z,y.lastBaseUpdate=ce,b===null&&(y.shared.lanes=0),zr|=S,i.lanes=S,i.memoizedState=fe}}function Ax(i,a){if(typeof i!="function")throw Error(s(191,i));i.call(a)}function wx(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Ax(l[i],a)}var Go=H(null),$u=H(0);function Nx(i,a){i=nr,pe($u,i),pe(Go,a),nr=i|a.baseLanes}function Zf(){pe($u,nr),pe(Go,Go.current)}function em(){nr=$u.current,ee(Go),ee($u)}var _s=H(null),Hs=null;function Or(i){var a=i.alternate;pe(rn,rn.current&1),pe(_s,i),Hs===null&&(a===null||Go.current!==null||a.memoizedState!==null)&&(Hs=i)}function tm(i){pe(rn,rn.current),pe(_s,i),Hs===null&&(Hs=i)}function kx(i){i.tag===22?(pe(rn,rn.current),pe(_s,i),Hs===null&&(Hs=i)):Gr()}function Gr(){pe(rn,rn.current),pe(_s,_s.current)}function Ts(i){ee(_s),Hs===i&&(Hs=null),ee(rn)}var rn=H(0);function Yu(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||op(l)||lp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Yi=0,Ze=null,Rt=null,un=null,Ju=!1,Bo=!1,Fa=!1,Qu=0,cc=0,Ho=null,mN=0;function Zt(){throw Error(s(321))}function nm(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!vs(i[l],a[l]))return!1;return!0}function sm(i,a,l,d,y,b){return Yi=b,Ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,J.H=i===null||i.memoizedState===null?dy:ym,Fa=!1,b=l(d,y),Fa=!1,Bo&&(b=Ix(a,l,d,y)),Cx(i),b}function Cx(i){J.H=hc;var a=Rt!==null&&Rt.next!==null;if(Yi=0,un=Rt=Ze=null,Ju=!1,cc=0,Ho=null,a)throw Error(s(300));i===null||dn||(i=i.dependencies,i!==null&&Gu(i)&&(dn=!0))}function Ix(i,a,l,d){Ze=i;var y=0;do{if(Bo&&(Ho=null),cc=0,Bo=!1,25<=y)throw Error(s(301));if(y+=1,un=Rt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}J.H=hy,b=a(l,d)}while(Bo);return b}function pN(){var i=J.H,a=i.useState()[0];return a=typeof a.then=="function"?uc(a):a,i=i.useState()[0],(Rt!==null?Rt.memoizedState:null)!==i&&(Ze.flags|=1024),a}function im(){var i=Qu!==0;return Qu=0,i}function rm(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function am(i){if(Ju){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Ju=!1}Yi=0,un=Rt=Ze=null,Bo=!1,cc=Qu=0,Ho=null}function Wn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Ze.memoizedState=un=i:un=un.next=i,un}function an(){if(Rt===null){var i=Ze.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var a=un===null?Ze.memoizedState:un.next;if(a!==null)un=a,Rt=i;else{if(i===null)throw Ze.alternate===null?Error(s(467)):Error(s(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},un===null?Ze.memoizedState=un=i:un=un.next=i}return un}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(i){var a=cc;return cc+=1,Ho===null&&(Ho=[]),i=bx(Ho,i,a),a=Ze,(un===null?a.memoizedState:un.next)===null&&(a=a.alternate,J.H=a===null||a.memoizedState===null?dy:ym),i}function Xu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return uc(i);if(i.$$typeof===G)return Cn(i)}throw Error(s(438,String(i)))}function om(i){var a=null,l=Ze.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var d=Ze.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Wu(),Ze.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),d=0;d<i;d++)l[d]=O;return a.index++,l}function Ji(i,a){return typeof a=="function"?a(i):a}function Zu(i){var a=an();return lm(a,Rt,i)}function lm(i,a,l){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var y=i.baseQueue,b=d.pending;if(b!==null){if(y!==null){var S=y.next;y.next=b.next,b.next=S}a.baseQueue=y=b,d.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{a=y.next;var C=S=null,F=null,Z=a,ce=!1;do{var fe=Z.lane&-536870913;if(fe!==Z.lane?(lt&fe)===fe:(Yi&fe)===fe){var te=Z.revertLane;if(te===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),fe===Uo&&(ce=!0);else if((Yi&te)===te){Z=Z.next,te===Uo&&(ce=!0);continue}else fe={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},F===null?(C=F=fe,S=b):F=F.next=fe,Ze.lanes|=te,zr|=te;fe=Z.action,Fa&&l(b,fe),b=Z.hasEagerState?Z.eagerState:l(b,fe)}else te={lane:fe,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},F===null?(C=F=te,S=b):F=F.next=te,Ze.lanes|=fe,zr|=fe;Z=Z.next}while(Z!==null&&Z!==a);if(F===null?S=b:F.next=C,!vs(b,i.memoizedState)&&(dn=!0,ce&&(l=jo,l!==null)))throw l;i.memoizedState=b,i.baseState=S,i.baseQueue=F,d.lastRenderedState=b}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function cm(i){var a=an(),l=a.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=l.dispatch,y=l.pending,b=a.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do b=i(b,S.action),S=S.next;while(S!==y);vs(b,a.memoizedState)||(dn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,d]}function Rx(i,a,l){var d=Ze,y=an(),b=mt;if(b){if(l===void 0)throw Error(s(407));l=l()}else l=a();var S=!vs((Rt||y).memoizedState,l);if(S&&(y.memoizedState=l,dn=!0),y=y.queue,hm(Px.bind(null,d,y,i),[i]),y.getSnapshot!==a||S||un!==null&&un.memoizedState.tag&1){if(d.flags|=2048,zo(9,{destroy:void 0},Dx.bind(null,d,y,l,a),null),Lt===null)throw Error(s(349));b||(Yi&127)!==0||Mx(d,a,l)}return l}function Mx(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=Ze.updateQueue,a===null?(a=Wu(),Ze.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Dx(i,a,l,d){a.value=l,a.getSnapshot=d,Lx(a)&&Ux(i)}function Px(i,a,l){return l(function(){Lx(a)&&Ux(i)})}function Lx(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!vs(i,l)}catch{return!0}}function Ux(i){var a=La(i,2);a!==null&&hs(a,i,2)}function um(i){var a=Wn();if(typeof i=="function"){var l=i;if(i=l(),Fa){ss(!0);try{l()}finally{ss(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:i},a}function jx(i,a,l,d){return i.baseState=l,lm(i,Rt,typeof d=="function"?d:Ji)}function gN(i,a,l,d,y){if(nd(i))throw Error(s(485));if(i=a.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};J.T!==null?l(!0):b.isTransition=!1,d(b),l=a.pending,l===null?(b.next=a.pending=b,Vx(a,b)):(b.next=l.next,a.pending=l.next=b)}}function Vx(i,a){var l=a.action,d=a.payload,y=i.state;if(a.isTransition){var b=J.T,S={};J.T=S;try{var C=l(y,d),F=J.S;F!==null&&F(S,C),Ox(i,a,C)}catch(Z){dm(i,a,Z)}finally{b!==null&&S.types!==null&&(b.types=S.types),J.T=b}}else try{b=l(y,d),Ox(i,a,b)}catch(Z){dm(i,a,Z)}}function Ox(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Gx(i,a,d)},function(d){return dm(i,a,d)}):Gx(i,a,l)}function Gx(i,a,l){a.status="fulfilled",a.value=l,Bx(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,Vx(i,l)))}function dm(i,a,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=l,Bx(a),a=a.next;while(a!==d)}i.action=null}function Bx(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Hx(i,a){return a}function zx(i,a){if(mt){var l=Lt.formState;if(l!==null){e:{var d=Ze;if(mt){if(Gt){t:{for(var y=Gt,b=Bs;y.nodeType!==8;){if(!b){y=null;break t}if(y=zs(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Gt=zs(y.nextSibling),d=y.data==="F!";break e}}Pr(d)}d=!1}d&&(a=l[0])}}return l=Wn(),l.memoizedState=l.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hx,lastRenderedState:a},l.queue=d,l=ly.bind(null,Ze,d),d.dispatch=l,d=um(!1),b=xm.bind(null,Ze,!1,d.queue),d=Wn(),y={state:a,dispatch:null,action:i,pending:null},d.queue=y,l=gN.bind(null,Ze,y,b,l),y.dispatch=l,d.memoizedState=i,[a,l,!1]}function Fx(i){var a=an();return qx(a,Rt,i)}function qx(i,a,l){if(a=lm(i,a,Hx)[0],i=Zu(Ji)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=uc(a)}catch(S){throw S===Vo?zu:S}else d=a;a=an();var y=a.queue,b=y.dispatch;return l!==a.memoizedState&&(Ze.flags|=2048,zo(9,{destroy:void 0},xN.bind(null,y,l),null)),[d,b,i]}function xN(i,a){i.action=a}function Kx(i){var a=an(),l=Rt;if(l!==null)return qx(a,l,i);an(),a=a.memoizedState,l=an();var d=l.queue.dispatch;return l.memoizedState=i,[a,d,!1]}function zo(i,a,l,d){return i={tag:i,create:l,deps:d,inst:a,next:null},a=Ze.updateQueue,a===null&&(a=Wu(),Ze.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,a.lastEffect=i),i}function $x(){return an().memoizedState}function ed(i,a,l,d){var y=Wn();Ze.flags|=i,y.memoizedState=zo(1|a,{destroy:void 0},l,d===void 0?null:d)}function td(i,a,l,d){var y=an();d=d===void 0?null:d;var b=y.memoizedState.inst;Rt!==null&&d!==null&&nm(d,Rt.memoizedState.deps)?y.memoizedState=zo(a,b,l,d):(Ze.flags|=i,y.memoizedState=zo(1|a,b,l,d))}function Yx(i,a){ed(8390656,8,i,a)}function hm(i,a){td(2048,8,i,a)}function yN(i){Ze.flags|=4;var a=Ze.updateQueue;if(a===null)a=Wu(),Ze.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function Jx(i){var a=an().memoizedState;return yN({ref:a,nextImpl:i}),function(){if((Tt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Qx(i,a){return td(4,2,i,a)}function Wx(i,a){return td(4,4,i,a)}function Xx(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Zx(i,a,l){l=l!=null?l.concat([i]):null,td(4,4,Xx.bind(null,a,i),l)}function fm(){}function ey(i,a){var l=an();a=a===void 0?null:a;var d=l.memoizedState;return a!==null&&nm(a,d[1])?d[0]:(l.memoizedState=[i,a],i)}function ty(i,a){var l=an();a=a===void 0?null:a;var d=l.memoizedState;if(a!==null&&nm(a,d[1]))return d[0];if(d=i(),Fa){ss(!0);try{i()}finally{ss(!1)}}return l.memoizedState=[d,a],d}function mm(i,a,l){return l===void 0||(Yi&1073741824)!==0&&(lt&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=nv(),Ze.lanes|=i,zr|=i,l)}function ny(i,a,l,d){return vs(l,a)?l:Go.current!==null?(i=mm(i,l,d),vs(i,a)||(dn=!0),i):(Yi&42)===0||(Yi&1073741824)!==0&&(lt&261930)===0?(dn=!0,i.memoizedState=l):(i=nv(),Ze.lanes|=i,zr|=i,a)}function sy(i,a,l,d,y){var b=he.p;he.p=b!==0&&8>b?b:8;var S=J.T,C={};J.T=C,xm(i,!1,a,l);try{var F=y(),Z=J.S;if(Z!==null&&Z(C,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ce=fN(F,d);dc(i,a,ce,As(i))}else dc(i,a,d,As(i))}catch(fe){dc(i,a,{then:function(){},status:"rejected",reason:fe},As())}finally{he.p=b,S!==null&&C.types!==null&&(S.types=C.types),J.T=S}}function vN(){}function pm(i,a,l,d){if(i.tag!==5)throw Error(s(476));var y=iy(i).queue;sy(i,y,a,Te,l===null?vN:function(){return ry(i),l(d)})}function iy(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:Te},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function ry(i){var a=iy(i);a.next===null&&(a=i.alternate.memoizedState),dc(i,a.next.queue,{},As())}function gm(){return Cn(kc)}function ay(){return an().memoizedState}function oy(){return an().memoizedState}function bN(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=As();i=jr(l);var d=Vr(a,i,l);d!==null&&(hs(d,a,l),ac(d,a,l)),a={cache:qf()},i.payload=a;return}a=a.return}}function _N(i,a,l){var d=As();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},nd(i)?cy(a,l):(l=Pf(i,a,l,d),l!==null&&(hs(l,i,d),uy(l,a,d)))}function ly(i,a,l){var d=As();dc(i,a,l,d)}function dc(i,a,l,d){var y={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(nd(i))cy(a,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,C=b(S,l);if(y.hasEagerState=!0,y.eagerState=C,vs(C,S))return Uu(i,a,y,0),Lt===null&&Lu(),!1}catch{}finally{}if(l=Pf(i,a,y,d),l!==null)return hs(l,i,d),uy(l,a,d),!0}return!1}function xm(i,a,l,d){if(d={lane:2,revertLane:Jm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},nd(i)){if(a)throw Error(s(479))}else a=Pf(i,l,d,2),a!==null&&hs(a,i,2)}function nd(i){var a=i.alternate;return i===Ze||a!==null&&a===Ze}function cy(i,a){Bo=Ju=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function uy(i,a,l){if((l&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,l|=d,a.lanes=l,Aa(i,l)}}var hc={readContext:Cn,use:Xu,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};hc.useEffectEvent=Zt;var dy={readContext:Cn,use:Xu,useCallback:function(i,a){return Wn().memoizedState=[i,a===void 0?null:a],i},useContext:Cn,useEffect:Yx,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,ed(4194308,4,Xx.bind(null,a,i),l)},useLayoutEffect:function(i,a){return ed(4194308,4,i,a)},useInsertionEffect:function(i,a){ed(4,2,i,a)},useMemo:function(i,a){var l=Wn();a=a===void 0?null:a;var d=i();if(Fa){ss(!0);try{i()}finally{ss(!1)}}return l.memoizedState=[d,a],d},useReducer:function(i,a,l){var d=Wn();if(l!==void 0){var y=l(a);if(Fa){ss(!0);try{l(a)}finally{ss(!1)}}}else y=a;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=_N.bind(null,Ze,i),[d.memoizedState,i]},useRef:function(i){var a=Wn();return i={current:i},a.memoizedState=i},useState:function(i){i=um(i);var a=i.queue,l=ly.bind(null,Ze,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:fm,useDeferredValue:function(i,a){var l=Wn();return mm(l,i,a)},useTransition:function(){var i=um(!1);return i=sy.bind(null,Ze,i.queue,!0,!1),Wn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var d=Ze,y=Wn();if(mt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=a(),Lt===null)throw Error(s(349));(lt&127)!==0||Mx(d,a,l)}y.memoizedState=l;var b={value:l,getSnapshot:a};return y.queue=b,Yx(Px.bind(null,d,b,i),[i]),d.flags|=2048,zo(9,{destroy:void 0},Dx.bind(null,d,b,l,a),null),l},useId:function(){var i=Wn(),a=Lt.identifierPrefix;if(mt){var l=Ti,d=_i;l=(d&~(1<<32-Vt(d)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Qu++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=mN++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:gm,useFormState:zx,useActionState:zx,useOptimistic:function(i){var a=Wn();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=xm.bind(null,Ze,!0,l),l.dispatch=a,[i,a]},useMemoCache:om,useCacheRefresh:function(){return Wn().memoizedState=bN.bind(null,Ze)},useEffectEvent:function(i){var a=Wn(),l={impl:i};return a.memoizedState=l,function(){if((Tt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},ym={readContext:Cn,use:Xu,useCallback:ey,useContext:Cn,useEffect:hm,useImperativeHandle:Zx,useInsertionEffect:Qx,useLayoutEffect:Wx,useMemo:ty,useReducer:Zu,useRef:$x,useState:function(){return Zu(Ji)},useDebugValue:fm,useDeferredValue:function(i,a){var l=an();return ny(l,Rt.memoizedState,i,a)},useTransition:function(){var i=Zu(Ji)[0],a=an().memoizedState;return[typeof i=="boolean"?i:uc(i),a]},useSyncExternalStore:Rx,useId:ay,useHostTransitionStatus:gm,useFormState:Fx,useActionState:Fx,useOptimistic:function(i,a){var l=an();return jx(l,Rt,i,a)},useMemoCache:om,useCacheRefresh:oy};ym.useEffectEvent=Jx;var hy={readContext:Cn,use:Xu,useCallback:ey,useContext:Cn,useEffect:hm,useImperativeHandle:Zx,useInsertionEffect:Qx,useLayoutEffect:Wx,useMemo:ty,useReducer:cm,useRef:$x,useState:function(){return cm(Ji)},useDebugValue:fm,useDeferredValue:function(i,a){var l=an();return Rt===null?mm(l,i,a):ny(l,Rt.memoizedState,i,a)},useTransition:function(){var i=cm(Ji)[0],a=an().memoizedState;return[typeof i=="boolean"?i:uc(i),a]},useSyncExternalStore:Rx,useId:ay,useHostTransitionStatus:gm,useFormState:Kx,useActionState:Kx,useOptimistic:function(i,a){var l=an();return Rt!==null?jx(l,Rt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:om,useCacheRefresh:oy};hy.useEffectEvent=Jx;function vm(i,a,l,d){a=i.memoizedState,l=l(d,a),l=l==null?a:_({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var bm={enqueueSetState:function(i,a,l){i=i._reactInternals;var d=As(),y=jr(d);y.payload=a,l!=null&&(y.callback=l),a=Vr(i,y,d),a!==null&&(hs(a,i,d),ac(a,i,d))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var d=As(),y=jr(d);y.tag=1,y.payload=a,l!=null&&(y.callback=l),a=Vr(i,y,d),a!==null&&(hs(a,i,d),ac(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=As(),d=jr(l);d.tag=2,a!=null&&(d.callback=a),a=Vr(i,d,l),a!==null&&(hs(a,i,l),ac(a,i,l))}};function fy(i,a,l,d,y,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,S):a.prototype&&a.prototype.isPureReactComponent?!Xl(l,d)||!Xl(y,b):!0}function my(i,a,l,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,d),a.state!==i&&bm.enqueueReplaceState(a,a.state,null)}function qa(i,a){var l=a;if("ref"in a){l={};for(var d in a)d!=="ref"&&(l[d]=a[d])}if(i=i.defaultProps){l===a&&(l=_({},l));for(var y in i)l[y]===void 0&&(l[y]=i[y])}return l}function py(i){Pu(i)}function gy(i){console.error(i)}function xy(i){Pu(i)}function sd(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function yy(i,a,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function _m(i,a,l){return l=jr(l),l.tag=3,l.payload={element:null},l.callback=function(){sd(i,a)},l}function vy(i){return i=jr(i),i.tag=3,i}function by(i,a,l,d){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;i.payload=function(){return y(b)},i.callback=function(){yy(a,l,d)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){yy(a,l,d),typeof y!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function TN(i,a,l,d,y){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=l.alternate,a!==null&&Lo(a,l,y,!0),l=_s.current,l!==null){switch(l.tag){case 31:case 13:return Hs===null?pd():l.alternate===null&&en===0&&(en=3),l.flags&=-257,l.flags|=65536,l.lanes=y,d===Fu?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([d]):a.add(d),Km(i,d,y)),!1;case 22:return l.flags|=65536,d===Fu?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([d]):l.add(d)),Km(i,d,y)),!1}throw Error(s(435,l.tag))}return Km(i,d,y),pd(),!1}if(mt)return a=_s.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==Gf&&(i=Error(s(422),{cause:d}),tc(Vs(i,l)))):(d!==Gf&&(a=Error(s(423),{cause:d}),tc(Vs(a,l))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=Vs(d,l),y=_m(i.stateNode,d,y),Wf(i,y),en!==4&&(en=2)),!1;var b=Error(s(520),{cause:d});if(b=Vs(b,l),bc===null?bc=[b]:bc.push(b),en!==4&&(en=2),a===null)return!0;d=Vs(d,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=y&-y,l.lanes|=i,i=_m(l.stateNode,d,i),Wf(l,i),!1;case 1:if(a=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fr===null||!Fr.has(b))))return l.flags|=65536,y&=-y,l.lanes|=y,y=vy(y),by(y,i,l,d),Wf(l,y),!1}l=l.return}while(l!==null);return!1}var Tm=Error(s(461)),dn=!1;function In(i,a,l,d){a.child=i===null?Sx(a,null,l,d):za(a,i.child,l,d)}function _y(i,a,l,d,y){l=l.render;var b=a.ref;if("ref"in d){var S={};for(var C in d)C!=="ref"&&(S[C]=d[C])}else S=d;return Oa(a),d=sm(i,a,l,S,b,y),C=im(),i!==null&&!dn?(rm(i,a,y),Qi(i,a,y)):(mt&&C&&Vf(a),a.flags|=1,In(i,a,d,y),a.child)}function Ty(i,a,l,d,y){if(i===null){var b=l.type;return typeof b=="function"&&!Lf(b)&&b.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=b,Ey(i,a,b,d,y)):(i=Vu(l.type,null,d,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!Im(i,y)){var S=b.memoizedProps;if(l=l.compare,l=l!==null?l:Xl,l(S,d)&&i.ref===a.ref)return Qi(i,a,y)}return a.flags|=1,i=Fi(b,d),i.ref=a.ref,i.return=a,a.child=i}function Ey(i,a,l,d,y){if(i!==null){var b=i.memoizedProps;if(Xl(b,d)&&i.ref===a.ref)if(dn=!1,a.pendingProps=d=b,Im(i,y))(i.flags&131072)!==0&&(dn=!0);else return a.lanes=i.lanes,Qi(i,a,y)}return Em(i,a,l,d,y)}function Sy(i,a,l,d){var y=d.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(d=a.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~b}else d=0,a.child=null;return Ay(i,a,b,l,d)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Hu(a,b!==null?b.cachePool:null),b!==null?Nx(a,b):Zf(),kx(a);else return d=a.lanes=536870912,Ay(i,a,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Hu(a,b.cachePool),Nx(a,b),Gr(),a.memoizedState=null):(i!==null&&Hu(a,null),Zf(),Gr());return In(i,a,y,l),a.child}function fc(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ay(i,a,l,d,y){var b=$f();return b=b===null?null:{parent:cn._currentValue,pool:b},a.memoizedState={baseLanes:l,cachePool:b},i!==null&&Hu(a,null),Zf(),kx(a),i!==null&&Lo(i,a,d,!0),a.childLanes=y,null}function id(i,a){return a=ad({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function wy(i,a,l){return za(a,i.child,null,l),i=id(a,a.pendingProps),i.flags|=2,Ts(a),a.memoizedState=null,i}function EN(i,a,l){var d=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(mt){if(d.mode==="hidden")return i=id(a,d),a.lanes=536870912,fc(null,i);if(tm(a),(i=Gt)?(i=Vv(i,Bs),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Mr!==null?{id:_i,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},l=cx(i),l.return=a,a.child=l,kn=a,Gt=null)):i=null,i===null)throw Pr(a);return a.lanes=536870912,null}return id(a,d)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if(tm(a),y)if(a.flags&256)a.flags&=-257,a=wy(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(s(558));else if(dn||Lo(i,a,l,!1),y=(l&i.childLanes)!==0,dn||y){if(d=Lt,d!==null&&(S=_r(d,l),S!==0&&S!==b.retryLane))throw b.retryLane=S,La(i,S),hs(d,i,S),Tm;pd(),a=wy(i,a,l)}else i=b.treeContext,Gt=zs(S.nextSibling),kn=a,mt=!0,Dr=null,Bs=!1,i!==null&&hx(a,i),a=id(a,d),a.flags|=4096;return a}return i=Fi(i.child,{mode:d.mode,children:d.children}),i.ref=a.ref,a.child=i,i.return=a,i}function rd(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Em(i,a,l,d,y){return Oa(a),l=sm(i,a,l,d,void 0,y),d=im(),i!==null&&!dn?(rm(i,a,y),Qi(i,a,y)):(mt&&d&&Vf(a),a.flags|=1,In(i,a,l,y),a.child)}function Ny(i,a,l,d,y,b){return Oa(a),a.updateQueue=null,l=Ix(a,d,l,y),Cx(i),d=im(),i!==null&&!dn?(rm(i,a,b),Qi(i,a,b)):(mt&&d&&Vf(a),a.flags|=1,In(i,a,l,b),a.child)}function ky(i,a,l,d,y){if(Oa(a),a.stateNode===null){var b=Ro,S=l.contextType;typeof S=="object"&&S!==null&&(b=Cn(S)),b=new l(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=bm,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},Jf(a),S=l.contextType,b.context=typeof S=="object"&&S!==null?Cn(S):Ro,b.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(vm(a,l,S,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&bm.enqueueReplaceState(b,b.state,null),lc(a,d,b,y),oc(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){b=a.stateNode;var C=a.memoizedProps,F=qa(l,C);b.props=F;var Z=b.context,ce=l.contextType;S=Ro,typeof ce=="object"&&ce!==null&&(S=Cn(ce));var fe=l.getDerivedStateFromProps;ce=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,ce||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C||Z!==S)&&my(a,b,d,S),Ur=!1;var te=a.memoizedState;b.state=te,lc(a,d,b,y),oc(),Z=a.memoizedState,C||te!==Z||Ur?(typeof fe=="function"&&(vm(a,l,fe,d),Z=a.memoizedState),(F=Ur||fy(a,l,F,d,te,Z,S))?(ce||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=Z),b.props=d,b.state=Z,b.context=S,d=F):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,Qf(i,a),S=a.memoizedProps,ce=qa(l,S),b.props=ce,fe=a.pendingProps,te=b.context,Z=l.contextType,F=Ro,typeof Z=="object"&&Z!==null&&(F=Cn(Z)),C=l.getDerivedStateFromProps,(Z=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==fe||te!==F)&&my(a,b,d,F),Ur=!1,te=a.memoizedState,b.state=te,lc(a,d,b,y),oc();var ae=a.memoizedState;S!==fe||te!==ae||Ur||i!==null&&i.dependencies!==null&&Gu(i.dependencies)?(typeof C=="function"&&(vm(a,l,C,d),ae=a.memoizedState),(ce=Ur||fy(a,l,ce,d,te,ae,F)||i!==null&&i.dependencies!==null&&Gu(i.dependencies))?(Z||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ae,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ae,F)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ae),b.props=d,b.state=ae,b.context=F,d=ce):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),d=!1)}return b=d,rd(i,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&d?(a.child=za(a,i.child,null,y),a.child=za(a,null,l,y)):In(i,a,l,y),a.memoizedState=b.state,i=a.child):i=Qi(i,a,y),i}function Cy(i,a,l,d){return ja(),a.flags|=256,In(i,a,l,d),a.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(i){return{baseLanes:i,cachePool:yx()}}function wm(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Ss),i}function Iy(i,a,l){var d=a.pendingProps,y=!1,b=(a.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(rn.current&2)!==0),S&&(y=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,i===null){if(mt){if(y?Or(a):Gr(),(i=Gt)?(i=Vv(i,Bs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Mr!==null?{id:_i,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},l=cx(i),l.return=a,a.child=l,kn=a,Gt=null)):i=null,i===null)throw Pr(a);return lp(i)?a.lanes=32:a.lanes=536870912,null}var C=d.children;return d=d.fallback,y?(Gr(),y=a.mode,C=ad({mode:"hidden",children:C},y),d=Ua(d,y,l,null),C.return=a,d.return=a,C.sibling=d,a.child=C,d=a.child,d.memoizedState=Am(l),d.childLanes=wm(i,S,l),a.memoizedState=Sm,fc(null,d)):(Or(a),Nm(a,C))}var F=i.memoizedState;if(F!==null&&(C=F.dehydrated,C!==null)){if(b)a.flags&256?(Or(a),a.flags&=-257,a=km(i,a,l)):a.memoizedState!==null?(Gr(),a.child=i.child,a.flags|=128,a=null):(Gr(),C=d.fallback,y=a.mode,d=ad({mode:"visible",children:d.children},y),C=Ua(C,y,l,null),C.flags|=2,d.return=a,C.return=a,d.sibling=C,a.child=d,za(a,i.child,null,l),d=a.child,d.memoizedState=Am(l),d.childLanes=wm(i,S,l),a.memoizedState=Sm,a=fc(null,d));else if(Or(a),lp(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var Z=S.dgst;S=Z,d=Error(s(419)),d.stack="",d.digest=S,tc({value:d,source:null,stack:null}),a=km(i,a,l)}else if(dn||Lo(i,a,l,!1),S=(l&i.childLanes)!==0,dn||S){if(S=Lt,S!==null&&(d=_r(S,l),d!==0&&d!==F.retryLane))throw F.retryLane=d,La(i,d),hs(S,i,d),Tm;op(C)||pd(),a=km(i,a,l)}else op(C)?(a.flags|=192,a.child=i.child,a=null):(i=F.treeContext,Gt=zs(C.nextSibling),kn=a,mt=!0,Dr=null,Bs=!1,i!==null&&hx(a,i),a=Nm(a,d.children),a.flags|=4096);return a}return y?(Gr(),C=d.fallback,y=a.mode,F=i.child,Z=F.sibling,d=Fi(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,Z!==null?C=Fi(Z,C):(C=Ua(C,y,l,null),C.flags|=2),C.return=a,d.return=a,d.sibling=C,a.child=d,fc(null,d),d=a.child,C=i.child.memoizedState,C===null?C=Am(l):(y=C.cachePool,y!==null?(F=cn._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=yx(),C={baseLanes:C.baseLanes|l,cachePool:y}),d.memoizedState=C,d.childLanes=wm(i,S,l),a.memoizedState=Sm,fc(i.child,d)):(Or(a),l=i.child,i=l.sibling,l=Fi(l,{mode:"visible",children:d.children}),l.return=a,l.sibling=null,i!==null&&(S=a.deletions,S===null?(a.deletions=[i],a.flags|=16):S.push(i)),a.child=l,a.memoizedState=null,l)}function Nm(i,a){return a=ad({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function ad(i,a){return i=bs(22,i,null,a),i.lanes=0,i}function km(i,a,l){return za(a,i.child,null,l),i=Nm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ry(i,a,l){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),zf(i.return,a,l)}function Cm(i,a,l,d,y,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:y,treeForkCount:b}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=y,S.treeForkCount=b)}function My(i,a,l){var d=a.pendingProps,y=d.revealOrder,b=d.tail;d=d.children;var S=rn.current,C=(S&2)!==0;if(C?(S=S&1|2,a.flags|=128):S&=1,pe(rn,S),In(i,a,d,l),d=mt?ec:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ry(i,l,a);else if(i.tag===19)Ry(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(l=a.child,y=null;l!==null;)i=l.alternate,i!==null&&Yu(i)===null&&(y=l),l=l.sibling;l=y,l===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),Cm(a,!1,y,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Yu(i)===null){a.child=y;break}i=y.sibling,y.sibling=l,l=y,y=i}Cm(a,!0,l,null,b,d);break;case"together":Cm(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Qi(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),zr|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Lo(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(s(153));if(a.child!==null){for(i=a.child,l=Fi(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Fi(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Im(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Gu(i)))}function SN(i,a,l){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),Lr(a,cn,i.memoizedState.cache),ja();break;case 27:case 5:et(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:Lr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,tm(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Or(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Iy(i,a,l):(Or(a),i=Qi(i,a,l),i!==null?i.sibling:null);Or(a);break;case 19:var y=(i.flags&128)!==0;if(d=(l&a.childLanes)!==0,d||(Lo(i,a,l,!1),d=(l&a.childLanes)!==0),y){if(d)return My(i,a,l);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),pe(rn,rn.current),d)break;return null;case 22:return a.lanes=0,Sy(i,a,l,a.pendingProps);case 24:Lr(a,cn,i.memoizedState.cache)}return Qi(i,a,l)}function Dy(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)dn=!0;else{if(!Im(i,l)&&(a.flags&128)===0)return dn=!1,SN(i,a,l);dn=(i.flags&131072)!==0}else dn=!1,mt&&(a.flags&1048576)!==0&&dx(a,ec,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(i=Ba(a.elementType),a.type=i,typeof i=="function")Lf(i)?(d=qa(i,d),a.tag=1,a=ky(null,a,i,d,l)):(a.tag=0,a=Em(null,a,i,d,l));else{if(i!=null){var y=i.$$typeof;if(y===Y){a.tag=11,a=_y(null,a,i,d,l);break e}else if(y===M){a.tag=14,a=Ty(null,a,i,d,l);break e}}throw a=le(i)||i,Error(s(306,a,""))}}return a;case 0:return Em(i,a,a.type,a.pendingProps,l);case 1:return d=a.type,y=qa(d,a.pendingProps),ky(i,a,d,y,l);case 3:e:{if(Pe(a,a.stateNode.containerInfo),i===null)throw Error(s(387));d=a.pendingProps;var b=a.memoizedState;y=b.element,Qf(i,a),lc(a,d,null,l);var S=a.memoizedState;if(d=S.cache,Lr(a,cn,d),d!==b.cache&&Ff(a,[cn],l,!0),oc(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Cy(i,a,d,l);break e}else if(d!==y){y=Vs(Error(s(424)),a),tc(y),a=Cy(i,a,d,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Gt=zs(i.firstChild),kn=a,mt=!0,Dr=null,Bs=!0,l=Sx(a,null,d,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ja(),d===y){a=Qi(i,a,l);break e}In(i,a,d,l)}a=a.child}return a;case 26:return rd(i,a),i===null?(l=Fv(a.type,null,a.pendingProps,null))?a.memoizedState=l:mt||(l=a.type,i=a.pendingProps,d=Td(ge.current).createElement(l),d[Jt]=a,d[Ot]=i,Rn(d,l,i),Ee(d),a.stateNode=d):a.memoizedState=Fv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return et(a),i===null&&mt&&(d=a.stateNode=Bv(a.type,a.pendingProps,ge.current),kn=a,Bs=!0,y=Gt,Yr(a.type)?(cp=y,Gt=zs(d.firstChild)):Gt=y),In(i,a,a.pendingProps.children,l),rd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&mt&&((y=d=Gt)&&(d=ek(d,a.type,a.pendingProps,Bs),d!==null?(a.stateNode=d,kn=a,Gt=zs(d.firstChild),Bs=!1,y=!0):y=!1),y||Pr(a)),et(a),y=a.type,b=a.pendingProps,S=i!==null?i.memoizedProps:null,d=b.children,ip(y,b)?d=null:S!==null&&ip(y,S)&&(a.flags|=32),a.memoizedState!==null&&(y=sm(i,a,pN,null,null,l),kc._currentValue=y),rd(i,a),In(i,a,d,l),a.child;case 6:return i===null&&mt&&((i=l=Gt)&&(l=tk(l,a.pendingProps,Bs),l!==null?(a.stateNode=l,kn=a,Gt=null,i=!0):i=!1),i||Pr(a)),null;case 13:return Iy(i,a,l);case 4:return Pe(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=za(a,null,d,l):In(i,a,d,l),a.child;case 11:return _y(i,a,a.type,a.pendingProps,l);case 7:return In(i,a,a.pendingProps,l),a.child;case 8:return In(i,a,a.pendingProps.children,l),a.child;case 12:return In(i,a,a.pendingProps.children,l),a.child;case 10:return d=a.pendingProps,Lr(a,a.type,d.value),In(i,a,d.children,l),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,Oa(a),y=Cn(y),d=d(y),a.flags|=1,In(i,a,d,l),a.child;case 14:return Ty(i,a,a.type,a.pendingProps,l);case 15:return Ey(i,a,a.type,a.pendingProps,l);case 19:return My(i,a,l);case 31:return EN(i,a,l);case 22:return Sy(i,a,l,a.pendingProps);case 24:return Oa(a),d=Cn(cn),i===null?(y=$f(),y===null&&(y=Lt,b=qf(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=l),y=b),a.memoizedState={parent:d,cache:y},Jf(a),Lr(a,cn,y)):((i.lanes&l)!==0&&(Qf(i,a),lc(a,null,null,l),oc()),y=i.memoizedState,b=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Lr(a,cn,d)):(d=b.cache,Lr(a,cn,d),d!==y.cache&&Ff(a,[cn],l,!0))),In(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Wi(i){i.flags|=4}function Rm(i,a,l,d,y){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(av())i.flags|=8192;else throw Ha=Fu,Yf}else i.flags&=-16777217}function Py(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Jv(a))if(av())i.flags|=8192;else throw Ha=Fu,Yf}function od(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?go():536870912,i.lanes|=a,$o|=a)}function mc(i,a){if(!mt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Bt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(a)for(var y=i.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)l|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=l,a}function AN(i,a,l){var d=a.pendingProps;switch(Of(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return l=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),$i(cn),Ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Po(a)?Wi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Bf())),Bt(a),null;case 26:var y=a.type,b=a.memoizedState;return i===null?(Wi(a),b!==null?(Bt(a),Py(a,b)):(Bt(a),Rm(a,y,null,d,l))):b?b!==i.memoizedState?(Wi(a),Bt(a),Py(a,b)):(Bt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==d&&Wi(a),Bt(a),Rm(a,y,i,d,l)),null;case 27:if(zt(a),l=ge.current,y=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&Wi(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Bt(a),null}i=ie.current,Po(a)?fx(a):(i=Bv(y,d,l),a.stateNode=i,Wi(a))}return Bt(a),null;case 5:if(zt(a),y=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&Wi(a);else{if(!d){if(a.stateNode===null)throw Error(s(166));return Bt(a),null}if(b=ie.current,Po(a))fx(a);else{var S=Td(ge.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?S.createElement(y,{is:d.is}):S.createElement(y)}}b[Jt]=a,b[Ot]=d;e:for(S=a.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===a)break e;for(;S.sibling===null;){if(S.return===null||S.return===a)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}a.stateNode=b;e:switch(Rn(b,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Wi(a)}}return Bt(a),Rm(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&Wi(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(s(166));if(i=ge.current,Po(a)){if(i=a.stateNode,l=a.memoizedProps,d=null,y=kn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[Jt]=a,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Iv(i.nodeValue,l)),i||Pr(a,!0)}else i=Td(i).createTextNode(d),i[Jt]=a,a.stateNode=i}return Bt(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(d=Po(a),l!==null){if(i===null){if(!d)throw Error(s(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Jt]=a}else ja(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),i=!1}else l=Bf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Ts(a),a):(Ts(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Bt(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Po(a),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Jt]=a}else ja(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),y=!1}else y=Bf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Ts(a),a):(Ts(a),null)}return Ts(a),(a.flags&128)!==0?(a.lanes=l,a):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),od(a,a.updateQueue),Bt(a),null);case 4:return Ge(),i===null&&Zm(a.stateNode.containerInfo),Bt(a),null;case 10:return $i(a.type),Bt(a),null;case 19:if(ee(rn),d=a.memoizedState,d===null)return Bt(a),null;if(y=(a.flags&128)!==0,b=d.rendering,b===null)if(y)mc(d,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=Yu(i),b!==null){for(a.flags|=128,mc(d,!1),i=b.updateQueue,a.updateQueue=i,od(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)lx(l,i),l=l.sibling;return pe(rn,rn.current&1|2),mt&&qi(a,d.treeForkCount),a.child}i=i.sibling}d.tail!==null&&Ct()>hd&&(a.flags|=128,y=!0,mc(d,!1),a.lanes=4194304)}else{if(!y)if(i=Yu(b),i!==null){if(a.flags|=128,y=!0,i=i.updateQueue,a.updateQueue=i,od(a,i),mc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!mt)return Bt(a),null}else 2*Ct()-d.renderingStartTime>hd&&l!==536870912&&(a.flags|=128,y=!0,mc(d,!1),a.lanes=4194304);d.isBackwards?(b.sibling=a.child,a.child=b):(i=d.last,i!==null?i.sibling=b:a.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Ct(),i.sibling=null,l=rn.current,pe(rn,y?l&1|2:l&1),mt&&qi(a,d.treeForkCount),i):(Bt(a),null);case 22:case 23:return Ts(a),em(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(l&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),l=a.updateQueue,l!==null&&od(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==l&&(a.flags|=2048),i!==null&&ee(Ga),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),$i(cn),Bt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function wN(i,a){switch(Of(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return $i(cn),Ge(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return zt(a),null;case 31:if(a.memoizedState!==null){if(Ts(a),a.alternate===null)throw Error(s(340));ja()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Ts(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(s(340));ja()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ee(rn),null;case 4:return Ge(),null;case 10:return $i(a.type),null;case 22:case 23:return Ts(a),em(),i!==null&&ee(Ga),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return $i(cn),null;case 25:return null;default:return null}}function Ly(i,a){switch(Of(a),a.tag){case 3:$i(cn),Ge();break;case 26:case 27:case 5:zt(a);break;case 4:Ge();break;case 31:a.memoizedState!==null&&Ts(a);break;case 13:Ts(a);break;case 19:ee(rn);break;case 10:$i(a.type);break;case 22:case 23:Ts(a),em(),i!==null&&ee(Ga);break;case 24:$i(cn)}}function pc(i,a){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var y=d.next;l=y;do{if((l.tag&i)===i){d=void 0;var b=l.create,S=l.inst;d=b(),S.destroy=d}l=l.next}while(l!==y)}}catch(C){kt(a,a.return,C)}}function Br(i,a,l){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&i)===i){var S=d.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,y=a;var F=l,Z=C;try{Z()}catch(ce){kt(y,F,ce)}}}d=d.next}while(d!==b)}}catch(ce){kt(a,a.return,ce)}}function Uy(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{wx(a,l)}catch(d){kt(i,i.return,d)}}}function jy(i,a,l){l.props=qa(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){kt(i,a,d)}}function gc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(y){kt(i,a,y)}}function Ei(i,a){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(y){kt(i,a,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){kt(i,a,y)}else l.current=null}function Vy(i){var a=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(y){kt(i,i.return,y)}}function Mm(i,a,l){try{var d=i.stateNode;YN(d,i.type,l,a),d[Ot]=a}catch(y){kt(i,i.return,y)}}function Oy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Yr(i.type)||i.tag===4}function Dm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Oy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Yr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pm(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Ws));else if(d!==4&&(d===27&&Yr(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Pm(i,a,l),i=i.sibling;i!==null;)Pm(i,a,l),i=i.sibling}function ld(i,a,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(d!==4&&(d===27&&Yr(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(ld(i,a,l),i=i.sibling;i!==null;)ld(i,a,l),i=i.sibling}function Gy(i){var a=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Rn(a,d,l),a[Jt]=i,a[Ot]=l}catch(b){kt(i,i.return,b)}}var Xi=!1,hn=!1,Lm=!1,By=typeof WeakSet=="function"?WeakSet:Set,_n=null;function NN(i,a){if(i=i.containerInfo,np=Cd,i=Zg(i),kf(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var S=0,C=-1,F=-1,Z=0,ce=0,fe=i,te=null;t:for(;;){for(var ae;fe!==l||y!==0&&fe.nodeType!==3||(C=S+y),fe!==b||d!==0&&fe.nodeType!==3||(F=S+d),fe.nodeType===3&&(S+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===i)break t;if(te===l&&++Z===y&&(C=S),te===b&&++ce===d&&(F=S),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}l=C===-1||F===-1?null:{start:C,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(sp={focusedElem:i,selectionRange:l},Cd=!1,_n=a;_n!==null;)if(a=_n,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,_n=i;else for(;_n!==null;){switch(a=_n,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)y=i[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=a,y=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Re=qa(l.type,y);i=d.getSnapshotBeforeUpdate(Re,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(He){kt(l,l.return,He)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)ap(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ap(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=a.sibling,i!==null){i.return=a.return,_n=i;break}_n=a.return}}function Hy(i,a,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:er(i,l),d&4&&pc(5,l);break;case 1:if(er(i,l),d&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(S){kt(l,l.return,S)}else{var y=qa(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(y,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){kt(l,l.return,S)}}d&64&&Uy(l),d&512&&gc(l,l.return);break;case 3:if(er(i,l),d&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{wx(i,a)}catch(S){kt(l,l.return,S)}}break;case 27:a===null&&d&4&&Gy(l);case 26:case 5:er(i,l),a===null&&d&4&&Vy(l),d&512&&gc(l,l.return);break;case 12:er(i,l);break;case 31:er(i,l),d&4&&qy(i,l);break;case 13:er(i,l),d&4&&Ky(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=UN.bind(null,l),nk(i,l))));break;case 22:if(d=l.memoizedState!==null||Xi,!d){a=a!==null&&a.memoizedState!==null||hn,y=Xi;var b=hn;Xi=d,(hn=a)&&!b?tr(i,l,(l.subtreeFlags&8772)!==0):er(i,l),Xi=y,hn=b}break;case 30:break;default:er(i,l)}}function zy(i){var a=i.alternate;a!==null&&(i.alternate=null,zy(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Tr(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Kt=null,ls=!1;function Zi(i,a,l){for(l=l.child;l!==null;)Fy(i,a,l),l=l.sibling}function Fy(i,a,l){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(nn,l)}catch{}switch(l.tag){case 26:hn||Ei(l,a),Zi(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:hn||Ei(l,a);var d=Kt,y=ls;Yr(l.type)&&(Kt=l.stateNode,ls=!1),Zi(i,a,l),Ac(l.stateNode),Kt=d,ls=y;break;case 5:hn||Ei(l,a);case 6:if(d=Kt,y=ls,Kt=null,Zi(i,a,l),Kt=d,ls=y,Kt!==null)if(ls)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(l.stateNode)}catch(b){kt(l,a,b)}else try{Kt.removeChild(l.stateNode)}catch(b){kt(l,a,b)}break;case 18:Kt!==null&&(ls?(i=Kt,Uv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),tl(i)):Uv(Kt,l.stateNode));break;case 4:d=Kt,y=ls,Kt=l.stateNode.containerInfo,ls=!0,Zi(i,a,l),Kt=d,ls=y;break;case 0:case 11:case 14:case 15:Br(2,l,a),hn||Br(4,l,a),Zi(i,a,l);break;case 1:hn||(Ei(l,a),d=l.stateNode,typeof d.componentWillUnmount=="function"&&jy(l,a,d)),Zi(i,a,l);break;case 21:Zi(i,a,l);break;case 22:hn=(d=hn)||l.memoizedState!==null,Zi(i,a,l),hn=d;break;default:Zi(i,a,l)}}function qy(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{tl(i)}catch(l){kt(a,a.return,l)}}}function Ky(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{tl(i)}catch(l){kt(a,a.return,l)}}function kN(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new By),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new By),a;default:throw Error(s(435,i.tag))}}function cd(i,a){var l=kN(i);a.forEach(function(d){if(!l.has(d)){l.add(d);var y=jN.bind(null,i,d);d.then(y,y)}})}function cs(i,a){var l=a.deletions;if(l!==null)for(var d=0;d<l.length;d++){var y=l[d],b=i,S=a,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Yr(C.type)){Kt=C.stateNode,ls=!1;break e}break;case 5:Kt=C.stateNode,ls=!1;break e;case 3:case 4:Kt=C.stateNode.containerInfo,ls=!0;break e}C=C.return}if(Kt===null)throw Error(s(160));Fy(b,S,y),Kt=null,ls=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)$y(a,i),a=a.sibling}var si=null;function $y(i,a){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:cs(a,i),us(i),d&4&&(Br(3,i,i.return),pc(3,i),Br(5,i,i.return));break;case 1:cs(a,i),us(i),d&512&&(hn||l===null||Ei(l,l.return)),d&64&&Xi&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var y=si;if(cs(a,i),us(i),d&512&&(hn||l===null||Ei(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Ms]||b[Jt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),Rn(b,d,l),b[Jt]=i,Ee(b),d=b;break e;case"link":var S=$v("link","href",y).get(d+(l.href||""));if(S){for(var C=0;C<S.length;C++)if(b=S[C],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(C,1);break t}}b=y.createElement(d),Rn(b,d,l),y.head.appendChild(b);break;case"meta":if(S=$v("meta","content",y).get(d+(l.content||""))){for(C=0;C<S.length;C++)if(b=S[C],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(C,1);break t}}b=y.createElement(d),Rn(b,d,l),y.head.appendChild(b);break;default:throw Error(s(468,d))}b[Jt]=i,Ee(b),d=b}i.stateNode=d}else Yv(y,i.type,i.stateNode);else i.stateNode=Kv(y,d,i.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?Yv(y,i.type,i.stateNode):Kv(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Mm(i,i.memoizedProps,l.memoizedProps)}break;case 27:cs(a,i),us(i),d&512&&(hn||l===null||Ei(l,l.return)),l!==null&&d&4&&Mm(i,i.memoizedProps,l.memoizedProps);break;case 5:if(cs(a,i),us(i),d&512&&(hn||l===null||Ei(l,l.return)),i.flags&32){y=i.stateNode;try{os(y,"")}catch(Re){kt(i,i.return,Re)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,Mm(i,y,l!==null?l.memoizedProps:y)),d&1024&&(Lm=!0);break;case 6:if(cs(a,i),us(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(Re){kt(i,i.return,Re)}}break;case 3:if(Ad=null,y=si,si=Ed(a.containerInfo),cs(a,i),si=y,us(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{tl(a.containerInfo)}catch(Re){kt(i,i.return,Re)}Lm&&(Lm=!1,Yy(i));break;case 4:d=si,si=Ed(i.stateNode.containerInfo),cs(a,i),us(i),si=d;break;case 12:cs(a,i),us(i);break;case 31:cs(a,i),us(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,cd(i,d)));break;case 13:cs(a,i),us(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(dd=Ct()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,cd(i,d)));break;case 22:y=i.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,Z=Xi,ce=hn;if(Xi=Z||y,hn=ce||F,cs(a,i),hn=ce,Xi=Z,us(i),d&8192)e:for(a=i.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(l===null||F||Xi||hn||Ka(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){F=l=a;try{if(b=F.stateNode,y)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=F.stateNode;var fe=F.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;C.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Re){kt(F,F.return,Re)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(Re){kt(F,F.return,Re)}}}else if(a.tag===18){if(l===null){F=a;try{var ae=F.stateNode;y?jv(ae,!0):jv(F.stateNode,!1)}catch(Re){kt(F,F.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,cd(i,l))));break;case 19:cs(a,i),us(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,cd(i,d)));break;case 30:break;case 21:break;default:cs(a,i),us(i)}}function us(i){var a=i.flags;if(a&2){try{for(var l,d=i.return;d!==null;){if(Oy(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var y=l.stateNode,b=Dm(i);ld(i,b,y);break;case 5:var S=l.stateNode;l.flags&32&&(os(S,""),l.flags&=-33);var C=Dm(i);ld(i,C,S);break;case 3:case 4:var F=l.stateNode.containerInfo,Z=Dm(i);Pm(i,Z,F);break;default:throw Error(s(161))}}catch(ce){kt(i,i.return,ce)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Yy(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;Yy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function er(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Hy(i,a.alternate,a),a=a.sibling}function Ka(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Br(4,a,a.return),Ka(a);break;case 1:Ei(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&jy(a,a.return,l),Ka(a);break;case 27:Ac(a.stateNode);case 26:case 5:Ei(a,a.return),Ka(a);break;case 22:a.memoizedState===null&&Ka(a);break;case 30:Ka(a);break;default:Ka(a)}i=i.sibling}}function tr(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=i,b=a,S=b.flags;switch(b.tag){case 0:case 11:case 15:tr(y,b,l),pc(4,b);break;case 1:if(tr(y,b,l),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){kt(d,d.return,Z)}if(d=b,y=d.updateQueue,y!==null){var C=d.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)Ax(F[y],C)}catch(Z){kt(d,d.return,Z)}}l&&S&64&&Uy(b),gc(b,b.return);break;case 27:Gy(b);case 26:case 5:tr(y,b,l),l&&d===null&&S&4&&Vy(b),gc(b,b.return);break;case 12:tr(y,b,l);break;case 31:tr(y,b,l),l&&S&4&&qy(y,b);break;case 13:tr(y,b,l),l&&S&4&&Ky(y,b);break;case 22:b.memoizedState===null&&tr(y,b,l),gc(b,b.return);break;case 30:break;default:tr(y,b,l)}a=a.sibling}}function Um(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&nc(l))}function jm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&nc(i))}function ii(i,a,l,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Jy(i,a,l,d),a=a.sibling}function Jy(i,a,l,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:ii(i,a,l,d),y&2048&&pc(9,a);break;case 1:ii(i,a,l,d);break;case 3:ii(i,a,l,d),y&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&nc(i)));break;case 12:if(y&2048){ii(i,a,l,d),i=a.stateNode;try{var b=a.memoizedProps,S=b.id,C=b.onPostCommit;typeof C=="function"&&C(S,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){kt(a,a.return,F)}}else ii(i,a,l,d);break;case 31:ii(i,a,l,d);break;case 13:ii(i,a,l,d);break;case 23:break;case 22:b=a.stateNode,S=a.alternate,a.memoizedState!==null?b._visibility&2?ii(i,a,l,d):xc(i,a):b._visibility&2?ii(i,a,l,d):(b._visibility|=2,Fo(i,a,l,d,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Um(S,a);break;case 24:ii(i,a,l,d),y&2048&&jm(a.alternate,a);break;default:ii(i,a,l,d)}}function Fo(i,a,l,d,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,S=a,C=l,F=d,Z=S.flags;switch(S.tag){case 0:case 11:case 15:Fo(b,S,C,F,y),pc(8,S);break;case 23:break;case 22:var ce=S.stateNode;S.memoizedState!==null?ce._visibility&2?Fo(b,S,C,F,y):xc(b,S):(ce._visibility|=2,Fo(b,S,C,F,y)),y&&Z&2048&&Um(S.alternate,S);break;case 24:Fo(b,S,C,F,y),y&&Z&2048&&jm(S.alternate,S);break;default:Fo(b,S,C,F,y)}a=a.sibling}}function xc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,d=a,y=d.flags;switch(d.tag){case 22:xc(l,d),y&2048&&Um(d.alternate,d);break;case 24:xc(l,d),y&2048&&jm(d.alternate,d);break;default:xc(l,d)}a=a.sibling}}var yc=8192;function qo(i,a,l){if(i.subtreeFlags&yc)for(i=i.child;i!==null;)Qy(i,a,l),i=i.sibling}function Qy(i,a,l){switch(i.tag){case 26:qo(i,a,l),i.flags&yc&&i.memoizedState!==null&&mk(l,si,i.memoizedState,i.memoizedProps);break;case 5:qo(i,a,l);break;case 3:case 4:var d=si;si=Ed(i.stateNode.containerInfo),qo(i,a,l),si=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=yc,yc=16777216,qo(i,a,l),yc=d):qo(i,a,l));break;default:qo(i,a,l)}}function Wy(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function vc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];_n=d,Zy(d,i)}Wy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xy(i),i=i.sibling}function Xy(i){switch(i.tag){case 0:case 11:case 15:vc(i),i.flags&2048&&Br(9,i,i.return);break;case 3:vc(i);break;case 12:vc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,ud(i)):vc(i);break;default:vc(i)}}function ud(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var d=a[l];_n=d,Zy(d,i)}Wy(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Br(8,a,a.return),ud(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,ud(a));break;default:ud(a)}i=i.sibling}}function Zy(i,a){for(;_n!==null;){var l=_n;switch(l.tag){case 0:case 11:case 15:Br(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:nc(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,_n=d;else e:for(l=i;_n!==null;){d=_n;var y=d.sibling,b=d.return;if(zy(d),d===l){_n=null;break e}if(y!==null){y.return=b,_n=y;break e}_n=b}}}var CN={getCacheForType:function(i){var a=Cn(cn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Cn(cn).controller.signal}},IN=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Lt=null,rt=null,lt=0,Nt=0,Es=null,Hr=!1,Ko=!1,Vm=!1,nr=0,en=0,zr=0,$a=0,Om=0,Ss=0,$o=0,bc=null,ds=null,Gm=!1,dd=0,ev=0,hd=1/0,fd=null,Fr=null,vn=0,qr=null,Yo=null,sr=0,Bm=0,Hm=null,tv=null,_c=0,zm=null;function As(){return(Tt&2)!==0&&lt!==0?lt&-lt:J.T!==null?Jm():xo()}function nv(){if(Ss===0)if((lt&536870912)===0||mt){var i=mi;mi<<=1,(mi&3932160)===0&&(mi=262144),Ss=i}else Ss=536870912;return i=_s.current,i!==null&&(i.flags|=32),Ss}function hs(i,a,l){(i===Lt&&(Nt===2||Nt===9)||i.cancelPendingCommit!==null)&&(Jo(i,0),Kr(i,lt,Ss,!1)),ji(i,l),((Tt&2)===0||i!==Lt)&&(i===Lt&&((Tt&2)===0&&($a|=l),en===4&&Kr(i,lt,Ss,!1)),Si(i))}function sv(i,a,l){if((Tt&6)!==0)throw Error(s(327));var d=!l&&(a&127)===0&&(a&i.expiredLanes)===0||is(i,a),y=d?DN(i,a):qm(i,a,!0),b=d;do{if(y===0){Ko&&!d&&Kr(i,a,0,!1);break}else{if(l=i.current.alternate,b&&!RN(l)){y=qm(i,a,!1),b=!1;continue}if(y===2){if(b=a,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var C=i;y=bc;var F=C.current.memoizedState.isDehydrated;if(F&&(Jo(C,S).flags|=256),S=qm(C,S,!1),S!==2){if(Vm&&!F){C.errorRecoveryDisabledLanes|=b,$a|=b,y=4;break e}b=ds,ds=y,b!==null&&(ds===null?ds=b:ds.push.apply(ds,b))}y=S}if(b=!1,y!==2)continue}}if(y===1){Jo(i,0),Kr(i,a,0,!0);break}e:{switch(d=i,b=y,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Kr(d,a,Ss,!Hr);break e;case 2:ds=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(y=dd+300-Ct(),10<y)){if(Kr(d,a,Ss,!Hr),Is(d,0,!0)!==0)break e;sr=a,d.timeoutHandle=Pv(iv.bind(null,d,l,ds,fd,Gm,a,Ss,$a,$o,Hr,b,"Throttled",-0,0),y);break e}iv(d,l,ds,fd,Gm,a,Ss,$a,$o,Hr,b,null,-0,0)}}break}while(!0);Si(i)}function iv(i,a,l,d,y,b,S,C,F,Z,ce,fe,te,ae){if(i.timeoutHandle=-1,fe=a.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ws},Qy(a,b,fe);var Re=(b&62914560)===b?dd-Ct():(b&4194048)===b?ev-Ct():0;if(Re=pk(fe,Re),Re!==null){sr=b,i.cancelPendingCommit=Re(hv.bind(null,i,a,b,l,d,y,S,C,F,ce,fe,null,te,ae)),Kr(i,b,S,!Z);return}}hv(i,a,b,l,d,y,S,C,F)}function RN(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var y=l[d],b=y.getSnapshot;y=y.value;try{if(!vs(b(),y))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Kr(i,a,l,d){a&=~Om,a&=~$a,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var y=a;0<y;){var b=31-Vt(y),S=1<<b;d[b]=-1,y&=~S}l!==0&&Vi(i,l,a)}function md(){return(Tt&6)===0?(Tc(0),!1):!0}function Fm(){if(rt!==null){if(Nt===0)var i=rt.return;else i=rt,Ki=Va=null,am(i),Oo=null,ic=0,i=rt;for(;i!==null;)Ly(i.alternate,i),i=i.return;rt=null}}function Jo(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,WN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),sr=0,Fm(),Lt=i,rt=l=Fi(i.current,null),lt=a,Nt=0,Es=null,Hr=!1,Ko=is(i,a),Vm=!1,$o=Ss=Om=$a=zr=en=0,ds=bc=null,Gm=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var y=31-Vt(d),b=1<<y;a|=i[y],d&=~b}return nr=a,Lu(),l}function rv(i,a){Ze=null,J.H=hc,a===Vo||a===zu?(a=_x(),Nt=3):a===Yf?(a=_x(),Nt=4):Nt=a===Tm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Es=a,rt===null&&(en=1,sd(i,Vs(a,i.current)))}function av(){var i=_s.current;return i===null?!0:(lt&4194048)===lt?Hs===null:(lt&62914560)===lt||(lt&536870912)!==0?i===Hs:!1}function ov(){var i=J.H;return J.H=hc,i===null?hc:i}function lv(){var i=J.A;return J.A=CN,i}function pd(){en=4,Hr||(lt&4194048)!==lt&&_s.current!==null||(Ko=!0),(zr&134217727)===0&&($a&134217727)===0||Lt===null||Kr(Lt,lt,Ss,!1)}function qm(i,a,l){var d=Tt;Tt|=2;var y=ov(),b=lv();(Lt!==i||lt!==a)&&(fd=null,Jo(i,a)),a=!1;var S=en;e:do try{if(Nt!==0&&rt!==null){var C=rt,F=Es;switch(Nt){case 8:Fm(),S=6;break e;case 3:case 2:case 9:case 6:_s.current===null&&(a=!0);var Z=Nt;if(Nt=0,Es=null,Qo(i,C,F,Z),l&&Ko){S=0;break e}break;default:Z=Nt,Nt=0,Es=null,Qo(i,C,F,Z)}}MN(),S=en;break}catch(ce){rv(i,ce)}while(!0);return a&&i.shellSuspendCounter++,Ki=Va=null,Tt=d,J.H=y,J.A=b,rt===null&&(Lt=null,lt=0,Lu()),S}function MN(){for(;rt!==null;)cv(rt)}function DN(i,a){var l=Tt;Tt|=2;var d=ov(),y=lv();Lt!==i||lt!==a?(fd=null,hd=Ct()+500,Jo(i,a)):Ko=is(i,a);e:do try{if(Nt!==0&&rt!==null){a=rt;var b=Es;t:switch(Nt){case 1:Nt=0,Es=null,Qo(i,a,b,1);break;case 2:case 9:if(vx(b)){Nt=0,Es=null,uv(a);break}a=function(){Nt!==2&&Nt!==9||Lt!==i||(Nt=7),Si(i)},b.then(a,a);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:vx(b)?(Nt=0,Es=null,uv(a)):(Nt=0,Es=null,Qo(i,a,b,7));break;case 5:var S=null;switch(rt.tag){case 26:S=rt.memoizedState;case 5:case 27:var C=rt;if(S?Jv(S):C.stateNode.complete){Nt=0,Es=null;var F=C.sibling;if(F!==null)rt=F;else{var Z=C.return;Z!==null?(rt=Z,gd(Z)):rt=null}break t}}Nt=0,Es=null,Qo(i,a,b,5);break;case 6:Nt=0,Es=null,Qo(i,a,b,6);break;case 8:Fm(),en=6;break e;default:throw Error(s(462))}}PN();break}catch(ce){rv(i,ce)}while(!0);return Ki=Va=null,J.H=d,J.A=y,Tt=l,rt!==null?0:(Lt=null,lt=0,Lu(),en)}function PN(){for(;rt!==null&&!tn();)cv(rt)}function cv(i){var a=Dy(i.alternate,i,nr);i.memoizedProps=i.pendingProps,a===null?gd(i):rt=a}function uv(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=Ny(l,a,a.pendingProps,a.type,void 0,lt);break;case 11:a=Ny(l,a,a.pendingProps,a.type.render,a.ref,lt);break;case 5:am(a);default:Ly(l,a),a=rt=lx(a,nr),a=Dy(l,a,nr)}i.memoizedProps=i.pendingProps,a===null?gd(i):rt=a}function Qo(i,a,l,d){Ki=Va=null,am(a),Oo=null,ic=0;var y=a.return;try{if(TN(i,y,a,l,lt)){en=1,sd(i,Vs(l,i.current)),rt=null;return}}catch(b){if(y!==null)throw rt=y,b;en=1,sd(i,Vs(l,i.current)),rt=null;return}a.flags&32768?(mt||d===1?i=!0:Ko||(lt&536870912)!==0?i=!1:(Hr=i=!0,(d===2||d===9||d===3||d===6)&&(d=_s.current,d!==null&&d.tag===13&&(d.flags|=16384))),dv(a,i)):gd(a)}function gd(i){var a=i;do{if((a.flags&32768)!==0){dv(a,Hr);return}i=a.return;var l=AN(a.alternate,a,nr);if(l!==null){rt=l;return}if(a=a.sibling,a!==null){rt=a;return}rt=a=i}while(a!==null);en===0&&(en=5)}function dv(i,a){do{var l=wN(i.alternate,i);if(l!==null){l.flags&=32767,rt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){rt=i;return}rt=i=l}while(i!==null);en=6,rt=null}function hv(i,a,l,d,y,b,S,C,F){i.cancelPendingCommit=null;do xd();while(vn!==0);if((Tt&6)!==0)throw Error(s(327));if(a!==null){if(a===i.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=Df,Ol(i,l,b,S,C,F),i===Lt&&(rt=Lt=null,lt=0),Yo=a,qr=i,sr=l,Bm=b,Hm=y,tv=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,VN($n,function(){return xv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=J.T,J.T=null,y=he.p,he.p=2,S=Tt,Tt|=4;try{NN(i,a,l)}finally{Tt=S,he.p=y,J.T=d}}vn=1,fv(),mv(),pv()}}function fv(){if(vn===1){vn=0;var i=qr,a=Yo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var d=he.p;he.p=2;var y=Tt;Tt|=4;try{$y(a,i);var b=sp,S=Zg(i.containerInfo),C=b.focusedElem,F=b.selectionRange;if(S!==C&&C&&C.ownerDocument&&Xg(C.ownerDocument.documentElement,C)){if(F!==null&&kf(C)){var Z=F.start,ce=F.end;if(ce===void 0&&(ce=Z),"selectionStart"in C)C.selectionStart=Z,C.selectionEnd=Math.min(ce,C.value.length);else{var fe=C.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Re=C.textContent.length,He=Math.min(F.start,Re),Dt=F.end===void 0?He:Math.min(F.end,Re);!ae.extend&&He>Dt&&(S=Dt,Dt=He,He=S);var $=Wg(C,He),q=Wg(C,Dt);if($&&q&&(ae.rangeCount!==1||ae.anchorNode!==$.node||ae.anchorOffset!==$.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var X=fe.createRange();X.setStart($.node,$.offset),ae.removeAllRanges(),He>Dt?(ae.addRange(X),ae.extend(q.node,q.offset)):(X.setEnd(q.node,q.offset),ae.addRange(X))}}}}for(fe=[],ae=C;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<fe.length;C++){var ue=fe[C];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Cd=!!np,sp=np=null}finally{Tt=y,he.p=d,J.T=l}}i.current=a,vn=2}}function mv(){if(vn===2){vn=0;var i=qr,a=Yo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var d=he.p;he.p=2;var y=Tt;Tt|=4;try{Hy(i,a.alternate,a)}finally{Tt=y,he.p=d,J.T=l}}vn=3}}function pv(){if(vn===4||vn===3){vn=0,Ut();var i=qr,a=Yo,l=sr,d=tv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?vn=5:(vn=0,Yo=qr=null,gv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Fr=null),Qs(l),a=a.stateNode,xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(nn,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=J.T,y=he.p,he.p=2,J.T=null;try{for(var b=i.onRecoverableError,S=0;S<d.length;S++){var C=d[S];b(C.value,{componentStack:C.stack})}}finally{J.T=a,he.p=y}}(sr&3)!==0&&xd(),Si(i),y=i.pendingLanes,(l&261930)!==0&&(y&42)!==0?i===zm?_c++:(_c=0,zm=i):_c=0,Tc(0)}}function gv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,nc(a)))}function xd(){return fv(),mv(),pv(),xv()}function xv(){if(vn!==5)return!1;var i=qr,a=Bm;Bm=0;var l=Qs(sr),d=J.T,y=he.p;try{he.p=32>l?32:l,J.T=null,l=Hm,Hm=null;var b=qr,S=sr;if(vn=0,Yo=qr=null,sr=0,(Tt&6)!==0)throw Error(s(331));var C=Tt;if(Tt|=4,Xy(b.current),Jy(b,b.current,S,l),Tt=C,Tc(0,!1),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(nn,b)}catch{}return!0}finally{he.p=y,J.T=d,gv(i,a)}}function yv(i,a,l){a=Vs(l,a),a=_m(i.stateNode,a,2),i=Vr(i,a,2),i!==null&&(ji(i,2),Si(i))}function kt(i,a,l){if(i.tag===3)yv(i,i,l);else for(;a!==null;){if(a.tag===3){yv(a,i,l);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Fr===null||!Fr.has(d))){i=Vs(l,i),l=vy(2),d=Vr(a,l,2),d!==null&&(by(l,d,a,i),ji(d,2),Si(d));break}}a=a.return}}function Km(i,a,l){var d=i.pingCache;if(d===null){d=i.pingCache=new IN;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(l)||(Vm=!0,y.add(l),i=LN.bind(null,i,a,l),a.then(i,i))}function LN(i,a,l){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Lt===i&&(lt&l)===l&&(en===4||en===3&&(lt&62914560)===lt&&300>Ct()-dd?(Tt&2)===0&&Jo(i,0):Om|=l,$o===lt&&($o=0)),Si(i)}function vv(i,a){a===0&&(a=go()),i=La(i,a),i!==null&&(ji(i,a),Si(i))}function UN(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),vv(i,l)}function jN(i,a){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(l=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(a),vv(i,l)}function VN(i,a){return Le(i,a)}var yd=null,Wo=null,$m=!1,vd=!1,Ym=!1,$r=0;function Si(i){i!==Wo&&i.next===null&&(Wo===null?yd=Wo=i:Wo=Wo.next=i),vd=!0,$m||($m=!0,GN())}function Tc(i,a){if(!Ym&&vd){Ym=!0;do for(var l=!1,d=yd;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var S=d.suspendedLanes,C=d.pingedLanes;b=(1<<31-Vt(42|i)+1)-1,b&=y&~(S&~C),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Ev(d,b))}else b=lt,b=Is(d,d===Lt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||is(d,b)||(l=!0,Ev(d,b));d=d.next}while(l);Ym=!1}}function ON(){bv()}function bv(){vd=$m=!1;var i=0;$r!==0&&QN()&&(i=$r);for(var a=Ct(),l=null,d=yd;d!==null;){var y=d.next,b=_v(d,a);b===0?(d.next=null,l===null?yd=y:l.next=y,y===null&&(Wo=l)):(l=d,(i!==0||(b&3)!==0)&&(vd=!0)),d=y}vn!==0&&vn!==5||Tc(i),$r!==0&&($r=0)}function _v(i,a){for(var l=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-Vt(b),C=1<<S,F=y[S];F===-1?((C&l)===0||(C&d)!==0)&&(y[S]=Vl(C,a)):F<=a&&(i.expiredLanes|=C),b&=~C}if(a=Lt,l=lt,l=Is(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===a&&(Nt===2||Nt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&pt(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||is(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(d!==null&&pt(d),Qs(l)){case 2:case 8:l=Yt;break;case 32:l=$n;break;case 268435456:l=po;break;default:l=$n}return d=Tv.bind(null,i),l=Le(l,d),i.callbackPriority=a,i.callbackNode=l,a}return d!==null&&d!==null&&pt(d),i.callbackPriority=2,i.callbackNode=null,2}function Tv(i,a){if(vn!==0&&vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(xd()&&i.callbackNode!==l)return null;var d=lt;return d=Is(i,i===Lt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(sv(i,d,a),_v(i,Ct()),i.callbackNode!=null&&i.callbackNode===l?Tv.bind(null,i):null)}function Ev(i,a){if(xd())return null;sv(i,a,!0)}function GN(){XN(function(){(Tt&6)!==0?Le(ns,ON):bv()})}function Jm(){if($r===0){var i=Uo;i===0&&(i=jn,jn<<=1,(jn&261888)===0&&(jn=256)),$r=i}return $r}function Sv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_o(""+i)}function Av(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function BN(i,a,l,d,y){if(a==="submit"&&l&&l.stateNode===y){var b=Sv((y[Ot]||null).action),S=d.submitter;S&&(a=(a=S[Ot]||null)?Sv(a.formAction):S.getAttribute("formAction"),a!==null&&(b=a,S=null));var C=new xi("action","action",null,d,y);i.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if($r!==0){var F=S?Av(y,S):new FormData(y);pm(l,{pending:!0,data:F,method:y.method,action:b},null,F)}}else typeof b=="function"&&(C.preventDefault(),F=S?Av(y,S):new FormData(y),pm(l,{pending:!0,data:F,method:y.method,action:b},b,F))},currentTarget:y}]})}}for(var Qm=0;Qm<Mf.length;Qm++){var Wm=Mf[Qm],HN=Wm.toLowerCase(),zN=Wm[0].toUpperCase()+Wm.slice(1);ni(HN,"on"+zN)}ni(nx,"onAnimationEnd"),ni(sx,"onAnimationIteration"),ni(ix,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(rN,"onTransitionRun"),ni(aN,"onTransitionStart"),ni(oN,"onTransitionCancel"),ni(rx,"onTransitionEnd"),Ue("onMouseEnter",["mouseout","mouseover"]),Ue("onMouseLeave",["mouseout","mouseover"]),Ue("onPointerEnter",["pointerout","pointerover"]),Ue("onPointerLeave",["pointerout","pointerover"]),it("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),it("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),it("onBeforeInput",["compositionend","keypress","textInput","paste"]),it("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ec));function wv(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],y=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var S=d.length-1;0<=S;S--){var C=d[S],F=C.instance,Z=C.currentTarget;if(C=C.listener,F!==b&&y.isPropagationStopped())break e;b=C,y.currentTarget=Z;try{b(y)}catch(ce){Pu(ce)}y.currentTarget=null,b=F}else for(S=0;S<d.length;S++){if(C=d[S],F=C.instance,Z=C.currentTarget,C=C.listener,F!==b&&y.isPropagationStopped())break e;b=C,y.currentTarget=Z;try{b(y)}catch(ce){Pu(ce)}y.currentTarget=null,b=F}}}}function at(i,a){var l=a[Gi];l===void 0&&(l=a[Gi]=new Set);var d=i+"__bubble";l.has(d)||(Nv(a,i,2,!1),l.add(d))}function Xm(i,a,l){var d=0;a&&(d|=4),Nv(l,i,d,a)}var bd="_reactListening"+Math.random().toString(36).slice(2);function Zm(i){if(!i[bd]){i[bd]=!0,Be.forEach(function(l){l!=="selectionchange"&&(FN.has(l)||Xm(l,!1,i),Xm(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[bd]||(a[bd]=!0,Xm("selectionchange",!1,a))}}function Nv(i,a,l,d){switch(nb(a)){case 2:var y=yk;break;case 8:y=vk;break;default:y=mp}l=y.bind(null,a,l,i),y=void 0,!Na||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(a,l,{capture:!0,passive:y}):i.addEventListener(a,l,!0):y!==void 0?i.addEventListener(a,l,{passive:y}):i.addEventListener(a,l,!1)}function ep(i,a,l,d,y){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var C=d.stateNode.containerInfo;if(C===y)break;if(S===4)for(S=d.return;S!==null;){var F=S.tag;if((F===3||F===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;C!==null;){if(S=Ds(C),S===null)return;if(F=S.tag,F===5||F===6||F===26||F===27){d=b=S;continue e}C=C.parentNode}}d=d.return}kr(function(){var Z=b,ce=Ps(l),fe=[];e:{var te=ax.get(i);if(te!==void 0){var ae=xi,Re=i;switch(i){case"keypress":if(Ca(l)===0)break e;case"keydown":case"keyup":ae=Ru;break;case"focusin":Re="focus",ae=Ra;break;case"focusout":Re="blur",ae=Ra;break;case"beforeblur":case"afterblur":ae=Ra;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=E;break;case nx:case sx:case ix:ae=Su;break;case rx:ae=L;break;case"scroll":case"scrollend":ae=$l;break;case"wheel":ae=re;break;case"copy":case"cut":case"paste":ae=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=zi;break;case"toggle":case"beforetoggle":ae=Xe}var He=(a&4)!==0,Dt=!He&&(i==="scroll"||i==="scrollend"),$=He?te!==null?te+"Capture":null:te;He=[];for(var q=Z,X;q!==null;){var ue=q;if(X=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||X===null||$===null||(ue=Xs(q,$),ue!=null&&He.push(Sc(q,ue,X))),Dt)break;q=q.return}0<He.length&&(te=new ae(te,Re,null,l,ce),fe.push({event:te,listeners:He}))}}if((a&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",te&&l!==Fl&&(Re=l.relatedTarget||l.fromElement)&&(Ds(Re)||Re[xs]))break e;if((ae||te)&&(te=ce.window===ce?ce:(te=ce.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Re=l.relatedTarget||l.toElement,ae=Z,Re=Re?Ds(Re):null,Re!==null&&(Dt=o(Re),He=Re.tag,Re!==Dt||He!==5&&He!==27&&He!==6)&&(Re=null)):(ae=null,Re=Z),ae!==Re)){if(He=Yl,ue="onMouseLeave",$="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(He=zi,ue="onPointerLeave",$="onPointerEnter",q="pointer"),Dt=ae==null?te:K(ae),X=Re==null?te:K(Re),te=new He(ue,q+"leave",ae,l,ce),te.target=Dt,te.relatedTarget=X,ue=null,Ds(ce)===Z&&(He=new He($,q+"enter",Re,l,ce),He.target=X,He.relatedTarget=Dt,ue=He),Dt=ue,ae&&Re)t:{for(He=qN,$=ae,q=Re,X=0,ue=$;ue;ue=He(ue))X++;ue=0;for(var je=q;je;je=He(je))ue++;for(;0<X-ue;)$=He($),X--;for(;0<ue-X;)q=He(q),ue--;for(;X--;){if($===q||q!==null&&$===q.alternate){He=$;break t}$=He($),q=He(q)}He=null}else He=null;ae!==null&&kv(fe,te,ae,He,!1),Re!==null&&Dt!==null&&kv(fe,Dt,Re,He,!0)}}e:{if(te=Z?K(Z):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var xt=qg;else if(zg(te))if(Kg)xt=nN;else{xt=eN;var De=Z1}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&bo(Z.elementType)&&(xt=qg):xt=tN;if(xt&&(xt=xt(i,Z))){Fg(fe,xt,l,ce);break e}De&&De(i,te,Z),i==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Bl(te,"number",te.value)}switch(De=Z?K(Z):window,i){case"focusin":(zg(De)||De.contentEditable==="true")&&(ko=De,Cf=Z,Zl=null);break;case"focusout":Zl=Cf=ko=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,ex(fe,l,ce);break;case"selectionchange":if(iN)break;case"keydown":case"keyup":ex(fe,l,ce)}var tt;if(_t)e:{switch(i){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else No?Ma(i,l)&&(ct="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ct="onCompositionStart");ct&&(bi&&l.locale!=="ko"&&(No||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&No&&(tt=Kl()):(gi=ce,ql="value"in gi?gi.value:gi.textContent,No=!0)),De=_d(Z,ct),0<De.length&&(ct=new vi(ct,i,null,l,ce),fe.push({event:ct,listeners:De}),tt?ct.data=tt:(tt=wo(l),tt!==null&&(ct.data=tt)))),(tt=Us?J1(i,l):Q1(i,l))&&(ct=_d(Z,"onBeforeInput"),0<ct.length&&(De=new vi("onBeforeInput","beforeinput",null,l,ce),fe.push({event:De,listeners:ct}),De.data=tt)),BN(fe,i,Z,l,ce)}wv(fe,a)})}function Sc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function _d(i,a){for(var l=a+"Capture",d=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=Xs(i,l),y!=null&&d.unshift(Sc(i,y,b)),y=Xs(i,a),y!=null&&d.push(Sc(i,y,b))),i.tag===3)return d;i=i.return}return[]}function qN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function kv(i,a,l,d,y){for(var b=a._reactName,S=[];l!==null&&l!==d;){var C=l,F=C.alternate,Z=C.stateNode;if(C=C.tag,F!==null&&F===d)break;C!==5&&C!==26&&C!==27||Z===null||(F=Z,y?(Z=Xs(l,b),Z!=null&&S.unshift(Sc(l,Z,F))):y||(Z=Xs(l,b),Z!=null&&S.push(Sc(l,Z,F)))),l=l.return}S.length!==0&&i.push({event:a,listeners:S})}var KN=/\r\n?/g,$N=/\u0000|\uFFFD/g;function Cv(i){return(typeof i=="string"?i:""+i).replace(KN,`
`).replace($N,"")}function Iv(i,a){return a=Cv(a),Cv(i)===a}function Mt(i,a,l,d,y,b){switch(l){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||os(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&os(i,""+d);break;case"className":Qt(i,"class",d);break;case"tabIndex":Qt(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Qt(i,l,d);break;case"style":zl(i,d,b);break;case"data":if(a!=="object"){Qt(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=_o(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(a!=="input"&&Mt(i,a,"name",y.name,y,null),Mt(i,a,"formEncType",y.formEncType,y,null),Mt(i,a,"formMethod",y.formMethod,y,null),Mt(i,a,"formTarget",y.formTarget,y,null)):(Mt(i,a,"encType",y.encType,y,null),Mt(i,a,"method",y.method,y,null),Mt(i,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=_o(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=Ws);break;case"onScroll":d!=null&&at("scroll",i);break;case"onScrollEnd":d!=null&&at("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=_o(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":at("beforetoggle",i),at("toggle",i),Sn(i,"popover",d);break;case"xlinkActuate":At(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":At(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":At(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":At(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":At(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":At(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":At(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":At(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":At(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Sn(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=_u.get(l)||l,Sn(i,l,d))}}function tp(i,a,l,d,y,b){switch(l){case"style":zl(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof d=="string"?os(i,d):(typeof d=="number"||typeof d=="bigint")&&os(i,""+d);break;case"onScroll":d!=null&&at("scroll",i);break;case"onScrollEnd":d!=null&&at("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Ws);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oe.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),a=l.slice(2,y?l.length-7:void 0),b=i[Ot]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(a,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,d,y);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):Sn(i,l,d)}}}function Rn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",i),at("load",i);var d=!1,y=!1,b;for(b in l)if(l.hasOwnProperty(b)){var S=l[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Mt(i,a,b,S,l,null)}}y&&Mt(i,a,"srcSet",l.srcSet,l,null),d&&Mt(i,a,"src",l.src,l,null);return;case"input":at("invalid",i);var C=b=S=y=null,F=null,Z=null;for(d in l)if(l.hasOwnProperty(d)){var ce=l[d];if(ce!=null)switch(d){case"name":y=ce;break;case"type":S=ce;break;case"checked":F=ce;break;case"defaultChecked":Z=ce;break;case"value":b=ce;break;case"defaultValue":C=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(s(137,a));break;default:Mt(i,a,d,ce,l,null)}}yu(i,b,C,F,Z,S,y,!1);return;case"select":at("invalid",i),d=S=b=null;for(y in l)if(l.hasOwnProperty(y)&&(C=l[y],C!=null))switch(y){case"value":b=C;break;case"defaultValue":S=C;break;case"multiple":d=C;default:Mt(i,a,y,C,l,null)}a=b,l=S,i.multiple=!!d,a!=null?Sr(i,!!d,a,!1):l!=null&&Sr(i,!!d,l,!0);return;case"textarea":at("invalid",i),b=y=d=null;for(S in l)if(l.hasOwnProperty(S)&&(C=l[S],C!=null))switch(S){case"value":d=C;break;case"defaultValue":y=C;break;case"children":b=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Mt(i,a,S,C,l,null)}Ar(i,d,y,b);return;case"option":for(F in l)if(l.hasOwnProperty(F)&&(d=l[F],d!=null))switch(F){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Mt(i,a,F,d,l,null)}return;case"dialog":at("beforetoggle",i),at("toggle",i),at("cancel",i),at("close",i);break;case"iframe":case"object":at("load",i);break;case"video":case"audio":for(d=0;d<Ec.length;d++)at(Ec[d],i);break;case"image":at("error",i),at("load",i);break;case"details":at("toggle",i);break;case"embed":case"source":case"link":at("error",i),at("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(d=l[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Mt(i,a,Z,d,l,null)}return;default:if(bo(a)){for(ce in l)l.hasOwnProperty(ce)&&(d=l[ce],d!==void 0&&tp(i,a,ce,d,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(d=l[C],d!=null&&Mt(i,a,C,d,l,null))}function YN(i,a,l,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,S=null,C=null,F=null,Z=null,ce=null;for(ae in l){var fe=l[ae];if(l.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=fe;default:d.hasOwnProperty(ae)||Mt(i,a,ae,null,d,fe)}}for(var te in d){var ae=d[te];if(fe=l[te],d.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":b=ae;break;case"name":y=ae;break;case"checked":Z=ae;break;case"defaultChecked":ce=ae;break;case"value":S=ae;break;case"defaultValue":C=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:ae!==fe&&Mt(i,a,te,ae,d,fe)}}Er(i,S,C,F,Z,ce,b,y);return;case"select":ae=S=C=te=null;for(b in l)if(F=l[b],l.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":ae=F;default:d.hasOwnProperty(b)||Mt(i,a,b,null,d,F)}for(y in d)if(b=d[y],F=l[y],d.hasOwnProperty(y)&&(b!=null||F!=null))switch(y){case"value":te=b;break;case"defaultValue":C=b;break;case"multiple":S=b;default:b!==F&&Mt(i,a,y,b,d,F)}a=C,l=S,d=ae,te!=null?Sr(i,!!l,te,!1):!!d!=!!l&&(a!=null?Sr(i,!!l,a,!0):Sr(i,!!l,l?[]:"",!1));return;case"textarea":ae=te=null;for(C in l)if(y=l[C],l.hasOwnProperty(C)&&y!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Mt(i,a,C,null,d,y)}for(S in d)if(y=d[S],b=l[S],d.hasOwnProperty(S)&&(y!=null||b!=null))switch(S){case"value":te=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==b&&Mt(i,a,S,y,d,b)}vu(i,te,ae);return;case"option":for(var Re in l)if(te=l[Re],l.hasOwnProperty(Re)&&te!=null&&!d.hasOwnProperty(Re))switch(Re){case"selected":i.selected=!1;break;default:Mt(i,a,Re,null,d,te)}for(F in d)if(te=d[F],ae=l[F],d.hasOwnProperty(F)&&te!==ae&&(te!=null||ae!=null))switch(F){case"selected":i.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Mt(i,a,F,te,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in l)te=l[He],l.hasOwnProperty(He)&&te!=null&&!d.hasOwnProperty(He)&&Mt(i,a,He,null,d,te);for(Z in d)if(te=d[Z],ae=l[Z],d.hasOwnProperty(Z)&&te!==ae&&(te!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,a));break;default:Mt(i,a,Z,te,d,ae)}return;default:if(bo(a)){for(var Dt in l)te=l[Dt],l.hasOwnProperty(Dt)&&te!==void 0&&!d.hasOwnProperty(Dt)&&tp(i,a,Dt,void 0,d,te);for(ce in d)te=d[ce],ae=l[ce],!d.hasOwnProperty(ce)||te===ae||te===void 0&&ae===void 0||tp(i,a,ce,te,d,ae);return}}for(var $ in l)te=l[$],l.hasOwnProperty($)&&te!=null&&!d.hasOwnProperty($)&&Mt(i,a,$,null,d,te);for(fe in d)te=d[fe],ae=l[fe],!d.hasOwnProperty(fe)||te===ae||te==null&&ae==null||Mt(i,a,fe,te,d,ae)}function Rv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var y=l[d],b=y.transferSize,S=y.initiatorType,C=y.duration;if(b&&C&&Rv(S)){for(S=0,C=y.responseEnd,d+=1;d<l.length;d++){var F=l[d],Z=F.startTime;if(Z>C)break;var ce=F.transferSize,fe=F.initiatorType;ce&&Rv(fe)&&(F=F.responseEnd,S+=ce*(F<C?1:(C-Z)/(F-Z)))}if(--d,a+=8*(b+S)/(y.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var np=null,sp=null;function Td(i){return i.nodeType===9?i:i.ownerDocument}function Mv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function ip(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rp=null;function QN(){var i=window.event;return i&&i.type==="popstate"?i===rp?!1:(rp=i,!0):(rp=null,!1)}var Pv=typeof setTimeout=="function"?setTimeout:void 0,WN=typeof clearTimeout=="function"?clearTimeout:void 0,Lv=typeof Promise=="function"?Promise:void 0,XN=typeof queueMicrotask=="function"?queueMicrotask:typeof Lv<"u"?function(i){return Lv.resolve(null).then(i).catch(ZN)}:Pv;function ZN(i){setTimeout(function(){throw i})}function Yr(i){return i==="head"}function Uv(i,a){var l=a,d=0;do{var y=l.nextSibling;if(i.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(y),tl(a);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Ac(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Ac(l);for(var b=l.firstChild;b;){var S=b.nextSibling,C=b.nodeName;b[Ms]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=S}}else l==="body"&&Ac(i.ownerDocument.body);l=y}while(l);tl(a)}function jv(i,a){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function ap(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ap(l),Tr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function ek(i,a,l,d){for(;i.nodeType===1;){var y=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ms])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=zs(i.nextSibling),i===null)break}return null}function tk(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=zs(i.nextSibling),i===null))return null;return i}function Vv(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=zs(i.nextSibling),i===null))return null;return i}function op(i){return i.data==="$?"||i.data==="$~"}function lp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function nk(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var d=function(){a(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function zs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var cp=null;function Ov(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return zs(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function Gv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Bv(i,a,l){switch(a=Td(l),i){case"html":if(i=a.documentElement,!i)throw Error(s(452));return i;case"head":if(i=a.head,!i)throw Error(s(453));return i;case"body":if(i=a.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ac(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Tr(i)}var Fs=new Map,Hv=new Set;function Ed(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ir=he.d;he.d={f:sk,r:ik,D:rk,C:ak,L:ok,m:lk,X:uk,S:ck,M:dk};function sk(){var i=ir.f(),a=md();return i||a}function ik(i){var a=Jn(i);a!==null&&a.tag===5&&a.type==="form"?ry(a):ir.r(i)}var Xo=typeof document>"u"?null:document;function zv(i,a,l){var d=Xo;if(d&&typeof a=="string"&&a){var y=wn(a);y='link[rel="'+i+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Hv.has(y)||(Hv.add(y),i={rel:i,crossOrigin:l,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),Rn(a,"link",i),Ee(a),d.head.appendChild(a)))}}function rk(i){ir.D(i),zv("dns-prefetch",i,null)}function ak(i,a){ir.C(i,a),zv("preconnect",i,a)}function ok(i,a,l){ir.L(i,a,l);var d=Xo;if(d&&i&&a){var y='link[rel="preload"][as="'+wn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+wn(l.imageSizes)+'"]')):y+='[href="'+wn(i)+'"]';var b=y;switch(a){case"style":b=Zo(i);break;case"script":b=el(i)}Fs.has(b)||(i=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Fs.set(b,i),d.querySelector(y)!==null||a==="style"&&d.querySelector(wc(b))||a==="script"&&d.querySelector(Nc(b))||(a=d.createElement("link"),Rn(a,"link",i),Ee(a),d.head.appendChild(a)))}}function lk(i,a){ir.m(i,a);var l=Xo;if(l&&i){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+wn(d)+'"][href="'+wn(i)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=el(i)}if(!Fs.has(b)&&(i=_({rel:"modulepreload",href:i},a),Fs.set(b,i),l.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Nc(b)))return}d=l.createElement("link"),Rn(d,"link",i),Ee(d),l.head.appendChild(d)}}}function ck(i,a,l){ir.S(i,a,l);var d=Xo;if(d&&i){var y=xe(d).hoistableStyles,b=Zo(i);a=a||"default";var S=y.get(b);if(!S){var C={loading:0,preload:null};if(S=d.querySelector(wc(b)))C.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Fs.get(b))&&up(i,l);var F=S=d.createElement("link");Ee(F),Rn(F,"link",i),F._p=new Promise(function(Z,ce){F.onload=Z,F.onerror=ce}),F.addEventListener("load",function(){C.loading|=1}),F.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Sd(S,a,d)}S={type:"stylesheet",instance:S,count:1,state:C},y.set(b,S)}}}function uk(i,a){ir.X(i,a);var l=Xo;if(l&&i){var d=xe(l).hoistableScripts,y=el(i),b=d.get(y);b||(b=l.querySelector(Nc(y)),b||(i=_({src:i,async:!0},a),(a=Fs.get(y))&&dp(i,a),b=l.createElement("script"),Ee(b),Rn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function dk(i,a){ir.M(i,a);var l=Xo;if(l&&i){var d=xe(l).hoistableScripts,y=el(i),b=d.get(y);b||(b=l.querySelector(Nc(y)),b||(i=_({src:i,async:!0,type:"module"},a),(a=Fs.get(y))&&dp(i,a),b=l.createElement("script"),Ee(b),Rn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function Fv(i,a,l,d){var y=(y=ge.current)?Ed(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Zo(l.href),l=xe(y).hoistableStyles,d=l.get(a),d||(d={type:"style",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Zo(l.href);var b=xe(y).hoistableStyles,S=b.get(i);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=y.querySelector(wc(i)))&&!b._p&&(S.instance=b,S.state.loading=5),Fs.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Fs.set(i,l),b||hk(y,i,l,S.state))),a&&d===null)throw Error(s(528,""));return S}if(a&&d!==null)throw Error(s(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=el(l),l=xe(y).hoistableScripts,d=l.get(a),d||(d={type:"script",instance:null,count:0,state:null},l.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Zo(i){return'href="'+wn(i)+'"'}function wc(i){return'link[rel="stylesheet"]['+i+"]"}function qv(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function hk(i,a,l,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Rn(a,"link",l),Ee(a),i.head.appendChild(a))}function el(i){return'[src="'+wn(i)+'"]'}function Nc(i){return"script[async]"+i}function Kv(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+wn(l.href)+'"]');if(d)return a.instance=d,Ee(d),d;var y=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Ee(d),Rn(d,"style",y),Sd(d,l.precedence,i),a.instance=d;case"stylesheet":y=Zo(l.href);var b=i.querySelector(wc(y));if(b)return a.state.loading|=4,a.instance=b,Ee(b),b;d=qv(l),(y=Fs.get(y))&&up(d,y),b=(i.ownerDocument||i).createElement("link"),Ee(b);var S=b;return S._p=new Promise(function(C,F){S.onload=C,S.onerror=F}),Rn(b,"link",d),a.state.loading|=4,Sd(b,l.precedence,i),a.instance=b;case"script":return b=el(l.src),(y=i.querySelector(Nc(b)))?(a.instance=y,Ee(y),y):(d=l,(y=Fs.get(b))&&(d=_({},l),dp(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),Ee(y),Rn(y,"link",d),i.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Sd(d,l.precedence,i));return a.instance}function Sd(i,a,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,S=0;S<d.length;S++){var C=d[S];if(C.dataset.precedence===a)b=C;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function up(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function dp(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Ad=null;function $v(i,a,l){if(Ad===null){var d=new Map,y=Ad=new Map;y.set(l,d)}else y=Ad,d=y.get(l),d||(d=new Map,y.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),y=0;y<l.length;y++){var b=l[y];if(!(b[Ms]||b[Jt]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(a)||"";S=i+S;var C=d.get(S);C?C.push(b):d.set(S,[b])}}return d}function Yv(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function fk(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Jv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function mk(i,a,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Zo(d.href),b=a.querySelector(wc(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=wd.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=b,Ee(b);return}b=a.ownerDocument||a,d=qv(d),(y=Fs.get(y))&&up(d,y),b=b.createElement("link"),Ee(b);var S=b;S._p=new Promise(function(C,F){S.onload=C,S.onerror=F}),Rn(b,"link",d),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=wd.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var hp=0;function pk(i,a){return i.stylesheets&&i.count===0&&kd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&kd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&hp===0&&(hp=62500*JN());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&kd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>hp?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function wd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Nd=null;function kd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Nd=new Map,a.forEach(gk,i),Nd=null,wd.call(i))}function gk(i,a){if(!(a.state.loading&4)){var l=Nd.get(i);if(l)var d=l.get(null);else{l=new Map,Nd.set(i,l);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var S=y[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),d=S)}d&&l.set(null,d)}y=a.instance,S=y.getAttribute("data-precedence"),b=l.get(S)||d,b===d&&l.set(null,y),l.set(S,y),this.count++,d=wd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),a.state.loading|=4}}var kc={$$typeof:G,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function xk(i,a,l,d,y,b,S,C,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.hiddenUpdates=Rs(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Qv(i,a,l,d,y,b,S,C,F,Z,ce,fe){return i=new xk(i,a,l,S,F,Z,ce,fe,C),a=1,b===!0&&(a|=24),b=bs(3,null,null,a),i.current=b,b.stateNode=i,a=qf(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:a},Jf(b),i}function Wv(i){return i?(i=Ro,i):Ro}function Xv(i,a,l,d,y,b){y=Wv(y),d.context===null?d.context=y:d.pendingContext=y,d=jr(a),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=Vr(i,d,a),l!==null&&(hs(l,i,a),ac(l,i,a))}function Zv(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function fp(i,a){Zv(i,a),(i=i.alternate)&&Zv(i,a)}function eb(i){if(i.tag===13||i.tag===31){var a=La(i,67108864);a!==null&&hs(a,i,67108864),fp(i,67108864)}}function tb(i){if(i.tag===13||i.tag===31){var a=As();a=Oi(a);var l=La(i,a);l!==null&&hs(l,i,a),fp(i,a)}}var Cd=!0;function yk(i,a,l,d){var y=J.T;J.T=null;var b=he.p;try{he.p=2,mp(i,a,l,d)}finally{he.p=b,J.T=y}}function vk(i,a,l,d){var y=J.T;J.T=null;var b=he.p;try{he.p=8,mp(i,a,l,d)}finally{he.p=b,J.T=y}}function mp(i,a,l,d){if(Cd){var y=pp(d);if(y===null)ep(i,a,d,Id,l),sb(i,d);else if(_k(y,i,a,l,d))d.stopPropagation();else if(sb(i,d),a&4&&-1<bk.indexOf(i)){for(;y!==null;){var b=Jn(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=Cs(b.pendingLanes);if(S!==0){var C=b;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var F=1<<31-Vt(S);C.entanglements[1]|=F,S&=~F}Si(b),(Tt&6)===0&&(hd=Ct()+500,Tc(0))}}break;case 31:case 13:C=La(b,2),C!==null&&hs(C,b,2),md(),fp(b,2)}if(b=pp(d),b===null&&ep(i,a,d,Id,l),b===y)break;y=b}y!==null&&d.stopPropagation()}else ep(i,a,d,null,l)}}function pp(i){return i=Ps(i),gp(i)}var Id=null;function gp(i){if(Id=null,i=Ds(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=h(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Id=i,null}function nb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kn()){case ns:return 2;case Yt:return 8;case $n:case Ui:return 32;case po:return 268435456;default:return 32}default:return 32}}var xp=!1,Jr=null,Qr=null,Wr=null,Cc=new Map,Ic=new Map,Xr=[],bk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sb(i,a){switch(i){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Cc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(a.pointerId)}}function Rc(i,a,l,d,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},a!==null&&(a=Jn(a),a!==null&&eb(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function _k(i,a,l,d,y){switch(a){case"focusin":return Jr=Rc(Jr,i,a,l,d,y),!0;case"dragenter":return Qr=Rc(Qr,i,a,l,d,y),!0;case"mouseover":return Wr=Rc(Wr,i,a,l,d,y),!0;case"pointerover":var b=y.pointerId;return Cc.set(b,Rc(Cc.get(b)||null,i,a,l,d,y)),!0;case"gotpointercapture":return b=y.pointerId,Ic.set(b,Rc(Ic.get(b)||null,i,a,l,d,y)),!0}return!1}function ib(i){var a=Ds(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,ps(i.priority,function(){tb(l)});return}}else if(a===31){if(a=h(l),a!==null){i.blockedOn=a,ps(i.priority,function(){tb(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Rd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=pp(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Fl=d,l.target.dispatchEvent(d),Fl=null}else return a=Jn(l),a!==null&&eb(a),i.blockedOn=l,!1;a.shift()}return!0}function rb(i,a,l){Rd(i)&&l.delete(a)}function Tk(){xp=!1,Jr!==null&&Rd(Jr)&&(Jr=null),Qr!==null&&Rd(Qr)&&(Qr=null),Wr!==null&&Rd(Wr)&&(Wr=null),Cc.forEach(rb),Ic.forEach(rb)}function Md(i,a){i.blockedOn===a&&(i.blockedOn=null,xp||(xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Tk)))}var Dd=null;function ab(i){Dd!==i&&(Dd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Dd===i&&(Dd=null);for(var a=0;a<i.length;a+=3){var l=i[a],d=i[a+1],y=i[a+2];if(typeof d!="function"){if(gp(d||l)===null)continue;break}var b=Jn(l);b!==null&&(i.splice(a,3),a-=3,pm(b,{pending:!0,data:y,method:l.method,action:d},d,y))}}))}function tl(i){function a(F){return Md(F,i)}Jr!==null&&Md(Jr,i),Qr!==null&&Md(Qr,i),Wr!==null&&Md(Wr,i),Cc.forEach(a),Ic.forEach(a);for(var l=0;l<Xr.length;l++){var d=Xr[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Xr.length&&(l=Xr[0],l.blockedOn===null);)ib(l),l.blockedOn===null&&Xr.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var y=l[d],b=l[d+1],S=y[Ot]||null;if(typeof b=="function")S||ab(l);else if(S){var C=null;if(b&&b.hasAttribute("formAction")){if(y=b,S=b[Ot]||null)C=S.formAction;else if(gp(y)!==null)continue}else C=S.action;typeof C=="function"?l[d+1]=C:(l.splice(d,3),d-=3),ab(l)}}}function ob(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function yp(i){this._internalRoot=i}Pd.prototype.render=yp.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(s(409));var l=a.current,d=As();Xv(l,d,i,a,null,null)},Pd.prototype.unmount=yp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Xv(i.current,2,null,i,null,null),md(),a[xs]=null}};function Pd(i){this._internalRoot=i}Pd.prototype.unstable_scheduleHydration=function(i){if(i){var a=xo();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Xr.length&&a!==0&&a<Xr[l].priority;l++);Xr.splice(l,0,i),l===0&&ib(i)}};var lb=e.version;if(lb!=="19.2.3")throw Error(s(527,lb,"19.2.3"));he.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(a),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var Ek={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{nn=Ld.inject(Ek),xn=Ld}catch{}}return Dc.createRoot=function(i,a){if(!r(i))throw Error(s(299));var l=!1,d="",y=py,b=gy,S=xy;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),a=Qv(i,1,!1,null,null,l,d,null,y,b,S,ob),i[xs]=a.current,Zm(i),new yp(a)},Dc.hydrateRoot=function(i,a,l){if(!r(i))throw Error(s(299));var d=!1,y="",b=py,S=gy,C=xy,F=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),a=Qv(i,1,!0,a,l??null,d,y,F,b,S,C,ob),a.context=Wv(null),l=a.current,d=As(),d=Oi(d),y=jr(d),y.callback=null,Vr(l,y,d),l=d,a.current.lanes=l,ji(a,l),Si(a),i[xs]=a.current,Zm(i),new Pd(a)},Dc.version="19.2.3",Dc}var yb;function Pk(){if(yb)return _p.exports;yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_p.exports=Dk(),_p.exports}var Lk=Pk();const Uk=iS(Lk);var Fe=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(Fe||{});const uh="https://files.catbox.moe/02xqjo.png",vb={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3"},bb=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],Hp=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"TPA & TBI",desc:"Tes Potensi Akademik & B.Inggris (Seleksi Lanjutan)"},{id:"PSIKOTEST",name:"Psikotes Lengkap",desc:"IQ, Koran/Pauli, Gambar, & Kepribadian"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],jk=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],Vk=["Penalaran Umum (Induktif)","Penalaran Umum (Deduktif)","Penalaran Umum (Kuantitatif)","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],Ok=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],Gk=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],Bk=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],Hk=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],_b=[],Tb=[],Eb=[],Sb=[],Ab=[],wb=[],Nb=[],kb=[],Ai=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var zk={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Fk,qk;function Kk(){return{geminiUrl:Fk,vertexUrl:qk}}function $k(n,e,t,s){var r,o;if(!(n!=null&&n.baseUrl)){const u=Kk();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(o=u.geminiUrl)!==null&&o!==void 0?o:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yr{}function we(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(n,e,t){for(let o=0;o<e.length-1;o++){const u=e[o];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const m=n[h];if(Array.isArray(t))for(let p=0;p<m.length;p++){const v=m[p];g(v,e.slice(o+1),t[p])}else for(const p of m)g(p,e.slice(o+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const m=n[h];g(m[0],e.slice(o+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in n){const u=n[o];return Array.isArray(u)?u.map(h=>f(h,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function Yk(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),o=s.split("."),u=new Set;let h=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){h=m;break}if(h!==-1&&o.length>h)for(let m=h;m<o.length;m++){const p=o[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}zp(n,r,o,0,u)}}function zp(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const o=e[s];if(o.endsWith("[]")){const u=o.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const m of h[u])zp(m,e,t,s+1,r)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of h)m[p]=u[p];for(const[p,v]of Object.entries(m)){const _=[];for(const T of t.slice(s))T==="*"?_.push(p):_.push(T);g(u,_,v)}for(const p of h)delete u[p]}}else{const u=n;o in u&&zp(u[o],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M0(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jk(n){const e={},t=f(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function Qk(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],Xk(u)),e}function Wk(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["response"]);return u!=null&&g(e,["response"],Zk(u)),e}function Xk(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>eC(u))),g(e,["generatedVideos"],o)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function Zk(n){const e={},t=f(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>tC(u))),g(e,["generatedVideos"],o)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function eC(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],oC(t)),e}function tC(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],lC(t)),e}function nC(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function sC(n){const e={},t=f(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function iC(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["response"]);return u!=null&&g(e,["response"],rC(u)),e}function rC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function rS(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["response"]);return u!=null&&g(e,["response"],aC(u)),e}function aC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function oC(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],M0(s));const r=f(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function lC(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],M0(s));const r=f(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cb||(Cb={}));var Ib;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Ib||(Ib={}));var Rb;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Rb||(Rb={}));var Se;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Se||(Se={}));var Mb;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Mb||(Mb={}));var Db;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Db||(Db={}));var Pb;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Pb||(Pb={}));var Lb;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Lb||(Lb={}));var Ub;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Ub||(Ub={}));var jb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(jb||(jb={}));var Vb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Vb||(Vb={}));var Ob;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Ob||(Ob={}));var Gb;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Gb||(Gb={}));var Bb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Bb||(Bb={}));var Hb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Hb||(Hb={}));var zb;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(zb||(zb={}));var Fb;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Fb||(Fb={}));var qb;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(qb||(qb={}));var Kb;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Kb||(Kb={}));var $b;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})($b||($b={}));var Yb;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Yb||(Yb={}));var dh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(dh||(dh={}));var Jb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Jb||(Jb={}));var Qb;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qb||(Qb={}));var Wb;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Wb||(Wb={}));var Fp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fp||(Fp={}));var Xb;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Xb||(Xb={}));var Zb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Zb||(Zb={}));var e_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(e_||(e_={}));var t_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(t_||(t_={}));var n_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(n_||(n_={}));var s_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(s_||(s_={}));var i_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(i_||(i_={}));var r_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(r_||(r_={}));var a_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(a_||(a_={}));var o_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(o_||(o_={}));var l_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(l_||(l_={}));var c_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(c_||(c_={}));var u_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(u_||(u_={}));var d_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(d_||(d_={}));var h_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(h_||(h_={}));var f_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(f_||(f_={}));var m_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(m_||(m_={}));var p_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(p_||(p_={}));var g_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(g_||(g_={}));var x_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(x_||(x_={}));var y_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(y_||(y_={}));var v_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(v_||(v_={}));var b_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(b_||(b_={}));var __;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(__||(__={}));var T_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(T_||(T_={}));var E_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(E_||(E_={}));var S_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(S_||(S_={}));var A_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(A_||(A_={}));var ol;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ol||(ol={}));class qp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pc{get text(){var e,t,s,r,o,u,h,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const _=[];for(const T of(m=(h=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[A,k]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(k!==null||k!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,p+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,s,r,o,u,h,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const _ of(m=(h=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(p+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,o,u,h,m;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(h=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,o,u,h,m,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(h=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,o,u,h,m,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(h=(u=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class w_{}class N_{}class cC{}class uC{}class dC{}class hC{}class k_{}class C_{}class I_{}class fC{}class hh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new hh;let r;const o=e;return t?r=Wk(o):r=Qk(o),Object.assign(s,r),s}}class R_{}class M_{}class D_{}class P_{}class mC{}class pC{}class gC{}class D0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new D0,o=iC(e);return Object.assign(s,o),s}}class xC{}class yC{}class vC{}class L_{}class bC{get text(){var e,t,s;let r="",o=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[m,p]of Object.entries(h))m!=="text"&&m!=="thought"&&p!==null&&u.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;o=!0,r+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,s;let r="";const o=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,m]of Object.entries(u))h!=="inlineData"&&m!==null&&o.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class _C{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class P0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new P0,o=rS(e);return Object.assign(s,o),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function aS(n,e){const t=vt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function oS(n){return Array.isArray(n)?n.map(e=>fh(e)):[fh(n)]}function fh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function lS(n){const e=fh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cS(n){const e=fh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function U_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function uS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>U_(e)):[U_(n)]}function Kp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function j_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function V_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function zn(n){if(n==null)throw new Error("ContentUnion is required");return Kp(n)?n:{role:"user",parts:uS(n)}}function L0(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=zn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=zn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>zn(t)):[zn(e)]}function $s(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(j_(n)||V_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zn(n)]}const e=[],t=[],s=Kp(n[0]);for(const r of n){const o=Kp(r);if(o!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(j_(r)||V_(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:uS(t)}),e}function TC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Se).includes(t[0].toUpperCase())?t[0].toUpperCase():Se.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Se).includes(s.toUpperCase())?s.toUpperCase():Se.TYPE_UNSPECIFIED})}}function cl(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&TC(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Se).includes(h.toUpperCase())?h.toUpperCase():Se.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=cl(h);else if(s.includes(u)){const m=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}m.push(cl(p))}e[u]=m}else if(r.includes(u)){const m={};for(const[p,v]of Object.entries(h))m[p]=cl(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=h}return e}function U0(n){return cl(n)}function j0(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function V0(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Al(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=cl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=cl(e.response));return n}function wl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function EC(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function vr(n,e){if(typeof e!="string")throw new Error("name must be a string");return EC(n,e,"cachedContents")}function dS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ya(n){return M0(n)}function SC(n){return n!=null&&typeof n=="object"&&"name"in n}function AC(n){return n!=null&&typeof n=="object"&&"video"in n}function wC(n){return n!=null&&typeof n=="object"&&"uri"in n}function hS(n){var e;let t;if(SC(n)&&(t=n.name),!(wC(n)&&(t=n.uri,t===void 0))&&!(AC(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function fS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function mS(n){for(const e of["models","tunedModels","publisherModels"])if(NC(n,e))return n[e];return[]}function NC(n,e){return n!==null&&typeof n=="object"&&e in n}function kC(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function CC(n,e={}){const t=[],s=new Set;for(const r of n){const o=r.name;if(s.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);s.add(o);const u=kC(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function pS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function IC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let o=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Nl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function xS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RC(n){const e={},t=f(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>dI(u))),g(e,["inlinedResponses"],o)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["inlinedEmbedContentResponses"],o)}return e}function MC(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function DC(n){const e={},t=f(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qd(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&g(e,["state"],xS(r));const o=f(n,["metadata","createTime"]);o!=null&&g(e,["createTime"],o);const u=f(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=f(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const m=f(n,["metadata","model"]);m!=null&&g(e,["model"],m);const p=f(n,["metadata","output"]);return p!=null&&g(e,["dest"],RC(gS(p))),e}function $p(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=f(n,["state"]);r!=null&&g(e,["state"],xS(r));const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(e,["startTime"],h);const m=f(n,["endTime"]);m!=null&&g(e,["endTime"],m);const p=f(n,["updateTime"]);p!=null&&g(e,["updateTime"],p);const v=f(n,["model"]);v!=null&&g(e,["model"],v);const _=f(n,["inputConfig"]);_!=null&&g(e,["src"],PC(_));const T=f(n,["outputConfig"]);T!=null&&g(e,["dest"],MC(gS(T)));const A=f(n,["completionStats"]);return A!=null&&g(e,["completionStats"],A),e}function PC(n){const e={},t=f(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function LC(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&g(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>uI(n,u))),g(t,["requests","requests"],o)}return t}function UC(n){const e={},t=f(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jC(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function VC(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Nl(n,s)),t}function OC(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Nl(n,s)),t}function GC(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],BC(s));const r=f(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const o=f(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const p=f(n,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function BC(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["citations"],s)}return e}function yS(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>yI(o))),g(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function HC(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function zC(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],DC(IC(r))),t}function O_(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["src"]);r!=null&&g(t,["batch","inputConfig"],LC(n,pS(n,r)));const o=f(e,["config"]);return o!=null&&HC(o,t),t}function FC(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],vt(n,s));const r=f(e,["src"]);r!=null&&g(t,["inputConfig"],UC(pS(n,r)));const o=f(e,["config"]);return o!=null&&zC(o,t),t}function qC(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function KC(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["src"]);r!=null&&g(t,["batch","inputConfig"],ZC(n,r));const o=f(e,["config"]);return o!=null&&qC(o,t),t}function $C(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Nl(n,s)),t}function YC(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Nl(n,s)),t}function JC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);return o!=null&&g(e,["error"],o),e}function QC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);return o!=null&&g(e,["error"],o),e}function WC(n,e){const t={},s=f(e,["contents"]);if(s!=null){let o=L0(n,s);Array.isArray(o)&&(o=o.map(u=>u)),g(t,["requests[]","request","content"],o)}const r=f(e,["config"]);return r!=null&&(g(t,["_self"],XC(r,t)),Yk(t,{"requests[].*":"requests[].request.*"})),t}function XC(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const o=f(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ZC(n,e){const t={},s=f(e,["fileName"]);s!=null&&g(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&g(t,["requests"],WC(n,r)),t}function eI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function tI(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const r=f(n,["name"]);if(r!=null&&g(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nI(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=f(n,["mode"]);if(s!=null&&g(e,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sI(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],yS(zn(r)));const o=f(e,["temperature"]);o!=null&&g(s,["temperature"],o);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const m=f(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=f(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const k=f(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const D=f(e,["seed"]);D!=null&&g(s,["seed"],D);const I=f(e,["responseMimeType"]);I!=null&&g(s,["responseMimeType"],I);const V=f(e,["responseSchema"]);V!=null&&g(s,["responseSchema"],U0(V));const N=f(e,["responseJsonSchema"]);if(N!=null&&g(s,["responseJsonSchema"],N),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=f(e,["safetySettings"]);if(t!==void 0&&G!=null){let j=G;Array.isArray(j)&&(j=j.map(le=>vI(le))),g(t,["safetySettings"],j)}const Y=f(e,["tools"]);if(t!==void 0&&Y!=null){let j=wl(Y);Array.isArray(j)&&(j=j.map(le=>_I(Al(le)))),g(t,["tools"],j)}const ne=f(e,["toolConfig"]);if(t!==void 0&&ne!=null&&g(t,["toolConfig"],bI(ne)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=f(e,["cachedContent"]);t!==void 0&&Q!=null&&g(t,["cachedContent"],vr(n,Q));const M=f(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const P=f(e,["mediaResolution"]);P!=null&&g(s,["mediaResolution"],P);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],j0(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=f(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const U=f(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],cI(U));const B=f(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function iI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>GC(p))),g(e,["candidates"],m)}const r=f(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const o=f(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function rI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Nl(n,s)),t}function aI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],Nl(n,s)),t}function oI(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function lI(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function cI(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function uI(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["request","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let h=$s(r);Array.isArray(h)&&(h=h.map(m=>yS(m))),g(t,["request","contents"],h)}const o=f(e,["metadata"]);o!=null&&g(t,["metadata"],o);const u=f(e,["config"]);return u!=null&&g(t,["request","generationConfig"],sI(n,u,f(t,["request"],{}))),t}function dI(n){const e={},t=f(n,["response"]);t!=null&&g(e,["response"],iI(t));const s=f(n,["error"]);return s!=null&&g(e,["error"],s),e}function hI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function fI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const o=f(n,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),t}function mI(n){const e={},t=f(n,["config"]);return t!=null&&hI(t,e),e}function pI(n){const e={},t=f(n,["config"]);return t!=null&&fI(t,e),e}function gI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>Qd(u))),g(e,["batchJobs"],o)}return e}function xI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>$p(u))),g(e,["batchJobs"],o)}return e}function yI(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=f(n,["fileData"]);o!=null&&g(e,["fileData"],eI(o));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],tI(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=f(n,["inlineData"]);m!=null&&g(e,["inlineData"],jC(m));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function vI(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function bI(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=f(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],nI(s)),e}function _I(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],oI(u));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],lI(h));const m=f(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(hr||(hr={}));class co{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(o=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TI extends yr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new co(hr.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=O_(this.apiClient,e),s=t._url,r=we("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,m=h.requests,p=[];for(const v of m){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}p.push(_)}return h.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const o=this.getGcsUri(e),u=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?s.dest=`${o.slice(0,-6)}/dest`:s.dest=`${o}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=FC(this.apiClient,e);return h=we("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>$p(v))}else{const p=O_(this.apiClient,e);return h=we("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Qd(v))}}async createEmbeddingsInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=KC(this.apiClient,e);return o=we("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>Qd(m))}}async get(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=aI(this.apiClient,e);return h=we("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>$p(v))}else{const p=rI(this.apiClient,e);return h=we("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Qd(v))}}async cancel(e){var t,s,r,o;let u="",h={};if(this.apiClient.isVertexAI()){const m=OC(this.apiClient,e);u=we("batchPredictionJobs/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const m=VC(this.apiClient,e);u=we("batches/{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=pI(e);return h=we("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=xI(v),T=new L_;return Object.assign(T,_),T})}else{const p=mI(e);return h=we("batches",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=gI(v),T=new L_;return Object.assign(T,_),T})}}async delete(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=YC(this.apiClient,e);return h=we("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>QC(v))}else{const p=$C(this.apiClient,e);return h=we("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>JC(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EI(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function G_(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>KI(o))),g(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function SI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let v=$s(u);Array.isArray(v)&&(v=v.map(_=>G_(_))),g(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],G_(zn(h)));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(_=>YI(_))),g(e,["tools"],v)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&g(e,["toolConfig"],$I(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function AI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=f(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=$s(u);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],zn(h));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(T=>JI(T))),g(e,["tools"],_)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&g(e,["toolConfig"],p);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function wI(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],aS(n,s));const r=f(e,["config"]);return r!=null&&SI(r,t),t}function NI(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["model"],aS(n,s));const r=f(e,["config"]);return r!=null&&AI(r,t),t}function kI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vr(n,s)),t}function CI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vr(n,s)),t}function II(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function RI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function MI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function DI(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const r=f(n,["name"]);if(r!=null&&g(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PI(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=f(n,["mode"]);if(s!=null&&g(e,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LI(n){const e={},t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const r=f(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function UI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vr(n,s)),t}function jI(n,e){const t={},s=f(e,["name"]);return s!=null&&g(t,["_url","name"],vr(n,s)),t}function VI(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function OI(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function GI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function BI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function HI(n){const e={},t=f(n,["config"]);return t!=null&&GI(t,e),e}function zI(n){const e={},t=f(n,["config"]);return t!=null&&BI(t,e),e}function FI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["cachedContents"],o)}return e}function qI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["cachedContents"],o)}return e}function KI(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=f(n,["fileData"]);o!=null&&g(e,["fileData"],MI(o));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],DI(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=f(n,["inlineData"]);m!=null&&g(e,["inlineData"],EI(m));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function $I(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=f(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],PI(s)),e}function YI(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],VI(u));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],OI(h));const m=f(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function JI(n){const e={},t=f(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=f(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=f(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const u=f(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>LI(T))),g(e,["functionDeclarations"],_)}const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const p=f(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function QI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function WI(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function XI(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vr(n,s));const r=f(e,["config"]);return r!=null&&QI(r,t),t}function ZI(n,e){const t={},s=f(e,["name"]);s!=null&&g(t,["_url","name"],vr(n,s));const r=f(e,["config"]);return r!=null&&WI(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e2 extends yr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new co(hr.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=NI(this.apiClient,e);return h=we("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=wI(this.apiClient,e);return h=we("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=jI(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=UI(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=CI(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=RI(v),T=new D_;return Object.assign(T,_),T})}else{const p=kI(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=II(v),T=new D_;return Object.assign(T,_),T})}}async update(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=ZI(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const p=XI(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=zI(e);return h=we("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=qI(v),T=new P_;return Object.assign(T,_),T})}else{const p=HI(e);return h=we("cachedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=FI(v),T=new P_;return Object.assign(T,_),T})}}}function mh(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function B_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $e(n){return this instanceof $e?(this.v=n,this):new $e(n)}function oi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(A){return function(k){return Promise.resolve(k).then(A,_)}}function h(A,k){s[A]&&(r[A]=function(D){return new Promise(function(I,V){o.push([A,D,I,V])>1||m(A,D)})},k&&(r[A]=k(r[A])))}function m(A,k){try{p(s[A](k))}catch(D){T(o[0][3],D)}}function p(A){A.value instanceof $e?Promise.resolve(A.value.v).then(v,_):T(o[0][2],A)}function v(A){m("next",A)}function _(A){m("throw",A)}function T(A,k){A(k),o.shift(),o.length&&m(o[0][0],o[0][1])}}function li(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof B_=="function"?B_(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(o){t[o]=n[o]&&function(u){return new Promise(function(h,m){u=n[o](u),r(h,m,u.done,u.value)})}}function r(o,u,h,m){Promise.resolve(m).then(function(p){o({value:p,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:vS(t)}function vS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function n2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function H_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let o=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),o&&!vS(n[s])&&(o=!1),s++;o?e.push(...r):e.pop()}return e}class s2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new i2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class i2{constructor(e,t,s,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),n2(o)}async sendMessage(e){var t;await this.sendPromise;const s=zn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,u,h;const m=await r,p=(u=(o=m.candidates)===null||o===void 0?void 0:o[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(h=v.slice(_))!==null&&h!==void 0?h:[]);const A=p?[p]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=zn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,s)}getHistory(e=!1){const t=e?H_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return oi(this,arguments,function*(){var r,o,u,h,m,p;const v=[];try{for(var _=!0,T=li(e),A;A=yield $e(T.next()),r=A.done,!r;_=!0){h=A.value,_=!1;const k=h;if(t2(k)){const D=(p=(m=k.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;D!==void 0&&v.push(D)}yield yield $e(k)}}catch(k){o={error:k}}finally{try{!_&&!r&&(u=T.return)&&(yield $e(u.call(T)))}finally{if(o)throw o.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(o=>o.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...H_(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Fh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r2(n){const e={},t=f(n,["file"]);return t!=null&&g(e,["file"],t),e}function a2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function o2(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],hS(t)),e}function l2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function c2(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","file"],hS(t)),e}function u2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function d2(n){const e={},t=f(n,["config"]);return t!=null&&u2(t,e),e}function h2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f2 extends yr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new co(hr.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=d2(e);return o=we("files",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=h2(m),v=new xC;return Object.assign(v,p),v})}}async createInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=r2(e);return o=we("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=a2(m),v=new yC;return Object.assign(v,p),v})}}async get(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=c2(e);return o=we("files/{file}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=o2(e);return o=we("files/{file}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=l2(m),v=new vC;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wd(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function m2(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>I2(o))),g(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function p2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function g2(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const r=f(n,["name"]);if(r!=null&&g(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function x2(n){const e={},t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const r=f(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function y2(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const m=f(n,["logprobs"]);m!=null&&g(e,["logprobs"],m);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=f(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=f(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const k=f(n,["responseModalities"]);k!=null&&g(e,["responseModalities"],k);const D=f(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const I=f(n,["routingConfig"]);I!=null&&g(e,["routingConfig"],I);const V=f(n,["seed"]);V!=null&&g(e,["seed"],V);const N=f(n,["speechConfig"]);N!=null&&g(e,["speechConfig"],N);const G=f(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const Y=f(n,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ne=f(n,["thinkingConfig"]);ne!=null&&g(e,["thinkingConfig"],ne);const Q=f(n,["topK"]);Q!=null&&g(e,["topK"],Q);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function v2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function b2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function _2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=f(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],V0(_));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=f(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],m2(zn(k)));const D=f(n,["tools"]);if(e!==void 0&&D!=null){let Q=wl(D);Array.isArray(Q)&&(Q=Q.map(M=>M2(Al(M)))),g(e,["setup","tools"],Q)}const I=f(n,["sessionResumption"]);e!==void 0&&I!=null&&g(e,["setup","sessionResumption"],R2(I));const V=f(n,["inputAudioTranscription"]);e!==void 0&&V!=null&&g(e,["setup","inputAudioTranscription"],V);const N=f(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&g(e,["setup","outputAudioTranscription"],N);const G=f(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const Y=f(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ne=f(n,["proactivity"]);if(e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function T2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],y2(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=f(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],V0(_));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=f(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],zn(k));const D=f(n,["tools"]);if(e!==void 0&&D!=null){let M=wl(D);Array.isArray(M)&&(M=M.map(P=>D2(Al(P)))),g(e,["setup","tools"],M)}const I=f(n,["sessionResumption"]);e!==void 0&&I!=null&&g(e,["setup","sessionResumption"],I);const V=f(n,["inputAudioTranscription"]);e!==void 0&&V!=null&&g(e,["setup","inputAudioTranscription"],V);const N=f(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&g(e,["setup","outputAudioTranscription"],N);const G=f(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const Y=f(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ne=f(n,["proactivity"]);e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne);const Q=f(n,["explicitVadSignal"]);return e!==void 0&&Q!=null&&g(e,["setup","explicitVadSignal"],Q),t}function E2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],vt(n,s));const r=f(e,["config"]);return r!=null&&g(t,["config"],_2(r,t)),t}function S2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],vt(n,s));const r=f(e,["config"]);return r!=null&&g(t,["config"],T2(r,t)),t}function A2(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function w2(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["weightedPrompts"],s)}return e}function N2(n){const e={},t=f(n,["media"]);if(t!=null){let p=oS(t);Array.isArray(p)&&(p=p.map(v=>Wd(v))),g(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],Wd(cS(s)));const r=f(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=f(n,["video"]);o!=null&&g(e,["video"],Wd(lS(o)));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const m=f(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function k2(n){const e={},t=f(n,["media"]);if(t!=null){let p=oS(t);Array.isArray(p)&&(p=p.map(v=>v)),g(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&g(e,["audio"],cS(s));const r=f(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=f(n,["video"]);o!=null&&g(e,["video"],lS(o));const u=f(n,["text"]);u!=null&&g(e,["text"],u);const h=f(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const m=f(n,["activityEnd"]);return m!=null&&g(e,["activityEnd"],m),e}function C2(n){const e={},t=f(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&g(e,["toolCall"],r);const o=f(n,["toolCallCancellation"]);o!=null&&g(e,["toolCallCancellation"],o);const u=f(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],P2(u));const h=f(n,["goAway"]);h!=null&&g(e,["goAway"],h);const m=f(n,["sessionResumptionUpdate"]);m!=null&&g(e,["sessionResumptionUpdate"],m);const p=f(n,["voiceActivityDetectionSignal"]);return p!=null&&g(e,["voiceActivityDetectionSignal"],p),e}function I2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=f(n,["fileData"]);o!=null&&g(e,["fileData"],p2(o));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],g2(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=f(n,["inlineData"]);m!=null&&g(e,["inlineData"],Wd(m));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function R2(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function M2(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],v2(u));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],b2(h));const m=f(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function D2(n){const e={},t=f(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=f(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=f(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const u=f(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>x2(T))),g(e,["functionDeclarations"],_)}const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const p=f(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function P2(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const o=f(n,["toolUsePromptTokenCount"]);o!=null&&g(e,["toolUsePromptTokenCount"],o);const u=f(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=f(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const m=f(n,["promptTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["promptTokensDetails"],A)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["cacheTokensDetails"],A)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["responseTokensDetails"],A)}const _=f(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(k=>k)),g(e,["toolUsePromptTokensDetails"],A)}const T=f(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L2(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function U2(n){const e={},t=f(n,["content"]);t!=null&&g(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],j2(s));const r=f(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const o=f(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const u=f(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=f(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const m=f(n,["index"]);m!=null&&g(e,["index"],m);const p=f(n,["logprobsResult"]);p!=null&&g(e,["logprobsResult"],p);const v=f(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=f(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function j2(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),g(e,["citations"],s)}return e}function V2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let o=$s(r);Array.isArray(o)&&(o=o.map(u=>u)),g(t,["contents"],o)}return t}function O2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(e,["tokensInfo"],r)}return e}function G2(n){const e={},t=f(n,["values"]);t!=null&&g(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&g(e,["statistics"],B2(s)),e}function B2(n){const e={},t=f(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function qh(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>QR(o))),g(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function H2(n){const e={},t=f(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function z2(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function F2(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],zn(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>ES(h))),g(e,["tools"],u)}const o=f(n,["generationConfig"]);return e!==void 0&&o!=null&&g(e,["generationConfig"],LR(o)),t}function q2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let u=$s(r);Array.isArray(u)&&(u=u.map(h=>qh(h))),g(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&z2(o),t}function K2(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let u=$s(r);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&F2(o,t),t}function $2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function Y2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function J2(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],vt(n,s)),t}function Q2(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],vt(n,s)),t}function W2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function X2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function Z2(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const m=f(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=f(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","mimeType"],k);const D=f(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const I=f(n,["addWatermark"]);e!==void 0&&I!=null&&g(e,["parameters","addWatermark"],I);const V=f(n,["labels"]);e!==void 0&&V!=null&&g(e,["labels"],V);const N=f(n,["editMode"]);e!==void 0&&N!=null&&g(e,["parameters","editMode"],N);const G=f(n,["baseSteps"]);return e!==void 0&&G!=null&&g(e,["parameters","editConfig","baseSteps"],G),t}function eR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=f(e,["referenceImages"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>nM(m))),g(t,["instances[0]","referenceImages"],h)}const u=f(e,["config"]);return u!=null&&Z2(u,t),t}function tR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Kh(o))),g(e,["generatedImages"],r)}return e}function nR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const o=f(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function sR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const o=f(n,["outputDimensionality"]);e!==void 0&&o!=null&&g(e,["parameters","outputDimensionality"],o);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function iR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let h=L0(n,r);Array.isArray(h)&&(h=h.map(m=>m)),g(t,["requests[]","content"],h)}const o=f(e,["config"]);o!=null&&nR(o,t);const u=f(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],vt(n,u)),t}function rR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let u=L0(n,r);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const o=f(e,["config"]);return o!=null&&sR(o,t),t}function aR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["embeddings"],o)}const r=f(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function oR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>G2(u))),g(e,["embeddings"],o)}const r=f(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function lR(n){const e={},t=f(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function cR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function uR(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const r=f(n,["name"]);if(r!=null&&g(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dR(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=f(n,["mode"]);if(s!=null&&g(e,["mode"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hR(n){const e={},t=f(n,["description"]);t!=null&&g(e,["description"],t);const s=f(n,["name"]);s!=null&&g(e,["name"],s);const r=f(n,["parameters"]);r!=null&&g(e,["parameters"],r);const o=f(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const u=f(n,["response"]);u!=null&&g(e,["response"],u);const h=f(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function fR(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],qh(zn(r)));const o=f(e,["temperature"]);o!=null&&g(s,["temperature"],o);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const m=f(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=f(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const k=f(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const D=f(e,["seed"]);D!=null&&g(s,["seed"],D);const I=f(e,["responseMimeType"]);I!=null&&g(s,["responseMimeType"],I);const V=f(e,["responseSchema"]);V!=null&&g(s,["responseSchema"],U0(V));const N=f(e,["responseJsonSchema"]);if(N!=null&&g(s,["responseJsonSchema"],N),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=f(e,["safetySettings"]);if(t!==void 0&&G!=null){let j=G;Array.isArray(j)&&(j=j.map(le=>sM(le))),g(t,["safetySettings"],j)}const Y=f(e,["tools"]);if(t!==void 0&&Y!=null){let j=wl(Y);Array.isArray(j)&&(j=j.map(le=>uM(Al(le)))),g(t,["tools"],j)}const ne=f(e,["toolConfig"]);if(t!==void 0&&ne!=null&&g(t,["toolConfig"],cM(ne)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=f(e,["cachedContent"]);t!==void 0&&Q!=null&&g(t,["cachedContent"],vr(n,Q));const M=f(e,["responseModalities"]);M!=null&&g(s,["responseModalities"],M);const P=f(e,["mediaResolution"]);P!=null&&g(s,["mediaResolution"],P);const R=f(e,["speechConfig"]);if(R!=null&&g(s,["speechConfig"],j0(R)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=f(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const U=f(e,["imageConfig"]);U!=null&&g(s,["imageConfig"],GR(U));const B=f(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function mR(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],zn(r));const o=f(e,["temperature"]);o!=null&&g(s,["temperature"],o);const u=f(e,["topP"]);u!=null&&g(s,["topP"],u);const h=f(e,["topK"]);h!=null&&g(s,["topK"],h);const m=f(e,["candidateCount"]);m!=null&&g(s,["candidateCount"],m);const p=f(e,["maxOutputTokens"]);p!=null&&g(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=f(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=f(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=f(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const k=f(e,["frequencyPenalty"]);k!=null&&g(s,["frequencyPenalty"],k);const D=f(e,["seed"]);D!=null&&g(s,["seed"],D);const I=f(e,["responseMimeType"]);I!=null&&g(s,["responseMimeType"],I);const V=f(e,["responseSchema"]);V!=null&&g(s,["responseSchema"],U0(V));const N=f(e,["responseJsonSchema"]);N!=null&&g(s,["responseJsonSchema"],N);const G=f(e,["routingConfig"]);G!=null&&g(s,["routingConfig"],G);const Y=f(e,["modelSelectionConfig"]);Y!=null&&g(s,["modelConfig"],Y);const ne=f(e,["safetySettings"]);if(t!==void 0&&ne!=null){let J=ne;Array.isArray(J)&&(J=J.map(he=>he)),g(t,["safetySettings"],J)}const Q=f(e,["tools"]);if(t!==void 0&&Q!=null){let J=wl(Q);Array.isArray(J)&&(J=J.map(he=>ES(Al(he)))),g(t,["tools"],J)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&g(t,["toolConfig"],M);const P=f(e,["labels"]);t!==void 0&&P!=null&&g(t,["labels"],P);const R=f(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],vr(n,R));const O=f(e,["responseModalities"]);O!=null&&g(s,["responseModalities"],O);const U=f(e,["mediaResolution"]);U!=null&&g(s,["mediaResolution"],U);const B=f(e,["speechConfig"]);B!=null&&g(s,["speechConfig"],j0(B));const j=f(e,["audioTimestamp"]);j!=null&&g(s,["audioTimestamp"],j);const le=f(e,["thinkingConfig"]);le!=null&&g(s,["thinkingConfig"],le);const ke=f(e,["imageConfig"]);if(ke!=null&&g(s,["imageConfig"],BR(ke)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function z_(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let u=$s(r);Array.isArray(u)&&(u=u.map(h=>qh(h))),g(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&g(t,["generationConfig"],fR(n,o,t)),t}function F_(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["contents"]);if(r!=null){let u=$s(r);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const o=f(e,["config"]);return o!=null&&g(t,["generationConfig"],mR(n,o,t)),t}function q_(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(p=>U2(p))),g(e,["candidates"],m)}const r=f(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const o=f(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const u=f(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=f(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function K_(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),g(e,["candidates"],p)}const r=f(n,["createTime"]);r!=null&&g(e,["createTime"],r);const o=f(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const u=f(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=f(n,["responseId"]);h!=null&&g(e,["responseId"],h);const m=f(n,["usageMetadata"]);return m!=null&&g(e,["usageMetadata"],m),e}function pR(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const o=f(n,["guidanceScale"]);if(e!==void 0&&o!=null&&g(e,["parameters","guidanceScale"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&g(e,["parameters","includeRaiReason"],p);const v=f(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=f(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=f(n,["imageSize"]);if(e!==void 0&&A!=null&&g(e,["parameters","sampleImageSize"],A),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function gR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const m=f(n,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=f(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","mimeType"],k);const D=f(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const I=f(n,["addWatermark"]);e!==void 0&&I!=null&&g(e,["parameters","addWatermark"],I);const V=f(n,["labels"]);e!==void 0&&V!=null&&g(e,["labels"],V);const N=f(n,["imageSize"]);e!==void 0&&N!=null&&g(e,["parameters","sampleImageSize"],N);const G=f(n,["enhancePrompt"]);return e!==void 0&&G!=null&&g(e,["parameters","enhancePrompt"],G),t}function xR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=f(e,["config"]);return o!=null&&pR(o,t),t}function yR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=f(e,["config"]);return o!=null&&gR(o,t),t}function vR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>RR(u))),g(e,["generatedImages"],o)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],_S(r)),e}function bR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>Kh(u))),g(e,["generatedImages"],o)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],TS(r)),e}function _R(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const u=f(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&g(e,["parameters","negativePrompt"],m);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&g(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],$h(v));const _=f(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>EM(A))),g(e,["instances[0]","referenceImages"],T)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function TR(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const o=f(n,["fps"]);e!==void 0&&o!=null&&g(e,["parameters","fps"],o);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=f(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&g(e,["parameters","aspectRatio"],m);const p=f(n,["resolution"]);e!==void 0&&p!=null&&g(e,["parameters","resolution"],p);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=f(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=f(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const k=f(n,["generateAudio"]);e!==void 0&&k!=null&&g(e,["parameters","generateAudio"],k);const D=f(n,["lastFrame"]);e!==void 0&&D!=null&&g(e,["instances[0]","lastFrame"],hi(D));const I=f(n,["referenceImages"]);if(e!==void 0&&I!=null){let G=I;Array.isArray(G)&&(G=G.map(Y=>SM(Y))),g(e,["instances[0]","referenceImages"],G)}const V=f(n,["mask"]);e!==void 0&&V!=null&&g(e,["instances[0]","mask"],TM(V));const N=f(n,["compressionQuality"]);return e!==void 0&&N!=null&&g(e,["parameters","compressionQuality"],N),t}function ER(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],NR(u)),e}function SR(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["response"]);return u!=null&&g(e,["response"],kR(u)),e}function AR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],$h(o));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],SS(u));const h=f(e,["source"]);h!=null&&CR(h,t);const m=f(e,["config"]);return m!=null&&_R(m,t),t}function wR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const o=f(e,["image"]);o!=null&&g(t,["instances[0]","image"],hi(o));const u=f(e,["video"]);u!=null&&g(t,["instances[0]","video"],AS(u));const h=f(e,["source"]);h!=null&&IR(h,t);const m=f(e,["config"]);return m!=null&&TR(m,t),t}function NR(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>DR(u))),g(e,["generatedVideos"],o)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function kR(n){const e={},t=f(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(u=>PR(u))),g(e,["generatedVideos"],o)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function CR(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],$h(r));const o=f(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],SS(o)),t}function IR(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],hi(r));const o=f(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],AS(o)),t}function RR(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],HR(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&g(e,["safetyAttributes"],_S(r)),e}function Kh(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["image"],bS(t));const s=f(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&g(e,["safetyAttributes"],TS(r));const o=f(n,["prompt"]);return o!=null&&g(e,["enhancedPrompt"],o),e}function MR(n){const e={},t=f(n,["_self"]);t!=null&&g(e,["mask"],bS(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(e,["labels"],r)}return e}function DR(n){const e={},t=f(n,["video"]);return t!=null&&g(e,["video"],bM(t)),e}function PR(n){const e={},t=f(n,["_self"]);return t!=null&&g(e,["video"],_M(t)),e}function LR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const o=f(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const u=f(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=f(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const m=f(n,["logprobs"]);m!=null&&g(e,["logprobs"],m);const p=f(n,["maxOutputTokens"]);p!=null&&g(e,["maxOutputTokens"],p);const v=f(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=f(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=f(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=f(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const k=f(n,["responseModalities"]);k!=null&&g(e,["responseModalities"],k);const D=f(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const I=f(n,["routingConfig"]);I!=null&&g(e,["routingConfig"],I);const V=f(n,["seed"]);V!=null&&g(e,["seed"],V);const N=f(n,["speechConfig"]);N!=null&&g(e,["speechConfig"],N);const G=f(n,["stopSequences"]);G!=null&&g(e,["stopSequences"],G);const Y=f(n,["temperature"]);Y!=null&&g(e,["temperature"],Y);const ne=f(n,["thinkingConfig"]);ne!=null&&g(e,["thinkingConfig"],ne);const Q=f(n,["topK"]);Q!=null&&g(e,["topK"],Q);const M=f(n,["topP"]);if(M!=null&&g(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function UR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],vt(n,s)),t}function jR(n,e){const t={},s=f(e,["model"]);return s!=null&&g(t,["_url","name"],vt(n,s)),t}function VR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function OR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function GR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function BR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const r=f(n,["personGeneration"]);r!=null&&g(e,["personGeneration"],r);const o=f(n,["outputMimeType"]);o!=null&&g(e,["imageOutputOptions","mimeType"],o);const u=f(n,["outputCompressionQuality"]);return u!=null&&g(e,["imageOutputOptions","compressionQuality"],u),e}function HR(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],ya(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function bS(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],ya(s));const r=f(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function $h(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],ya(t));const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function hi(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],ya(s));const r=f(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function zR(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],fS(n,h)),s}function FR(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const o=f(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const u=f(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],fS(n,h)),s}function qR(n,e){const t={},s=f(e,["config"]);return s!=null&&zR(n,s,t),t}function KR(n,e){const t={},s=f(e,["config"]);return s!=null&&FR(n,s,t),t}function $R(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let o=mS(r);Array.isArray(o)&&(o=o.map(u=>Yp(u))),g(e,["models"],o)}return e}function YR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let o=mS(r);Array.isArray(o)&&(o=o.map(u=>Jp(u))),g(e,["models"],o)}return e}function JR(n){const e={},t=f(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function Yp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=f(n,["description"]);r!=null&&g(e,["description"],r);const o=f(n,["version"]);o!=null&&g(e,["version"],o);const u=f(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],dM(u));const h=f(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const m=f(n,["outputTokenLimit"]);m!=null&&g(e,["outputTokenLimit"],m);const p=f(n,["supportedGenerationMethods"]);p!=null&&g(e,["supportedActions"],p);const v=f(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=f(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=f(n,["topP"]);T!=null&&g(e,["topP"],T);const A=f(n,["topK"]);A!=null&&g(e,["topK"],A);const k=f(n,["thinking"]);return k!=null&&g(e,["thinking"],k),e}function Jp(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["displayName"]);s!=null&&g(e,["displayName"],s);const r=f(n,["description"]);r!=null&&g(e,["description"],r);const o=f(n,["versionId"]);o!=null&&g(e,["version"],o);const u=f(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>lR(T))),g(e,["endpoints"],_)}const h=f(n,["labels"]);h!=null&&g(e,["labels"],h);const m=f(n,["_self"]);m!=null&&g(e,["tunedModelInfo"],hM(m));const p=f(n,["defaultCheckpointId"]);p!=null&&g(e,["defaultCheckpointId"],p);const v=f(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function QR(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=f(n,["fileData"]);o!=null&&g(e,["fileData"],cR(o));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],uR(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=f(n,["inlineData"]);m!=null&&g(e,["inlineData"],L2(m));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function WR(n){const e={},t=f(n,["productImage"]);return t!=null&&g(e,["image"],hi(t)),e}function XR(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","baseSteps"],r);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const u=f(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&g(e,["parameters","addWatermark"],p);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=f(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=f(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const A=f(n,["labels"]);return e!==void 0&&A!=null&&g(e,["labels"],A),t}function ZR(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["source"]);r!=null&&tM(r,t);const o=f(e,["config"]);return o!=null&&XR(o,t),t}function eM(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Kh(r))),g(e,["generatedImages"],s)}return e}function tM(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],hi(r));const o=f(n,["productImages"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>WR(h))),g(e,["instances[0]","productImages"],u)}return t}function nM(n){const e={},t=f(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],hi(t));const s=f(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&g(e,["referenceType"],r);const o=f(n,["maskImageConfig"]);o!=null&&g(e,["maskImageConfig"],JR(o));const u=f(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],H2(u));const h=f(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const m=f(n,["subjectImageConfig"]);return m!=null&&g(e,["subjectImageConfig"],m),e}function _S(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function TS(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function sM(n){const e={},t=f(n,["category"]);if(t!=null&&g(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function iM(n){const e={},t=f(n,["image"]);return t!=null&&g(e,["image"],hi(t)),e}function rM(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const o=f(n,["confidenceThreshold"]);e!==void 0&&o!=null&&g(e,["parameters","confidenceThreshold"],o);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const m=f(n,["labels"]);return e!==void 0&&m!=null&&g(e,["labels"],m),t}function aM(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["source"]);r!=null&&lM(r,t);const o=f(e,["config"]);return o!=null&&rM(o,t),t}function oM(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>MR(r))),g(e,["generatedMasks"],s)}return e}function lM(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],hi(r));const o=f(n,["scribbleImage"]);return e!==void 0&&o!=null&&g(e,["instances[0]","scribble"],iM(o)),t}function cM(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=f(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],dR(s)),e}function uM(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],VR(u));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],OR(h));const m=f(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}function ES(n){const e={},t=f(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=f(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=f(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const u=f(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>hR(T))),g(e,["functionDeclarations"],_)}const h=f(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const m=f(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const p=f(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const v=f(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function dM(n){const e={},t=f(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function hM(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&g(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function fM(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const o=f(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function mM(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const o=f(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function pM(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","name"],vt(n,s));const r=f(e,["config"]);return r!=null&&fM(r,t),t}function gM(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["config"]);return r!=null&&mM(r,t),t}function xM(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const o=f(n,["personGeneration"]);e!==void 0&&o!=null&&g(e,["parameters","personGeneration"],o);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","compressionQuality"],m);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const A=f(n,["mode"]);return e!==void 0&&A!=null&&g(e,["parameters","mode"],A),t}function yM(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["_url","model"],vt(n,s));const r=f(e,["image"]);r!=null&&g(t,["instances[0]","image"],hi(r));const o=f(e,["upscaleFactor"]);o!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],o);const u=f(e,["config"]);return u!=null&&xM(u,t),t}function vM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Kh(o))),g(e,["generatedImages"],r)}return e}function bM(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],ya(s));const r=f(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function _M(n){const e={},t=f(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],ya(s));const r=f(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function TM(n){const e={},t=f(n,["image"]);t!=null&&g(e,["_self"],hi(t));const s=f(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function EM(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],$h(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function SM(n){const e={},t=f(n,["image"]);t!=null&&g(e,["image"],hi(t));const s=f(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function SS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],ya(s));const r=f(n,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function AS(n){const e={},t=f(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],ya(s));const r=f(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AM(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function wM(n){const e={},t=f(n,["config"]);return t!=null&&AM(t,e),e}function NM(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function kM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&NM(s,e),e}function CM(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function IM(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["customMetadata"],o)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),t}function RM(n){const e={},t=f(n,["name"]);t!=null&&g(e,["name"],t);const s=f(n,["metadata"]);s!=null&&g(e,["metadata"],s);const r=f(n,["done"]);r!=null&&g(e,["done"],r);const o=f(n,["error"]);o!=null&&g(e,["error"],o);const u=f(n,["response"]);return u!=null&&g(e,["response"],DM(u)),e}function MM(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&g(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&IM(r,e),e}function DM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&g(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function PM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function LM(n){const e={},t=f(n,["config"]);return t!=null&&PM(t,e),e}function UM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["fileSearchStores"],o)}return e}function wS(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>m)),g(e,["customMetadata"],h)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function jM(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&wS(s,e),e}function VM(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OM="Content-Type",GM="X-Server-Timeout",BM="User-Agent",Qp="x-goog-api-client",HM="1.35.0",zM=`google-genai-sdk/${HM}`,FM="v1beta1",qM="v1beta";class KM{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:FM,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:qM,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))r.searchParams.append(u,String(h));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))typeof o=="object"?s[r]=Object.assign(Object.assign({},s[r]),o):o!==void 0&&(s[r]=o);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const o=new AbortController,u=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>o.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=u}return t&&t.extraBody!==null&&$M(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await $_(r),new qp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await $_(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return oi(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const h="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield $e(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=o.decode(v,{stream:!0});try{const k=JSON.parse(_);if("error"in k){const D=JSON.parse(JSON.stringify(k.error)),I=D.status,V=D.code,N=`got status: ${I}. ${JSON.stringify(k)}`;if(V>=400&&V<600)throw new Fh({message:N,status:V})}}catch(k){if(k.name==="ApiError")throw k}u+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const I of m){const V=u.indexOf(I);V!==-1&&(T===-1||V<T)&&(T=V,A=I.length)}if(T===-1)break;const k=u.substring(0,T);u=u.substring(T+A);const D=k.trim();if(D.startsWith(h)){const I=D.substring(h.length).trim();try{const V=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield $e(new qp(V))}catch(V){throw new Error(`exception parsing stream chunk ${I}. ${V}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=zM+" "+this.clientOptions.userAgentExtra;return e[BM]=t,e[Qp]=t,e[OM]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))s.append(r,o);e.timeout&&e.timeout>0&&s.append(GM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,u=await o.stat(e);r.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const m={file:r},p=this.getFileName(e),v=we("upload/v1beta/files",m._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,p,m,t==null?void 0:t.httpOptions);return o.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var r;const o=this.clientOptions.uploader,u=await o.stat(t),h=String(u.size),m=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&wS(s,_);const T=await this.fetchUploadUrl(p,h,m,v,_,s==null?void 0:s.httpOptions);return o.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,o,u){var h;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function $_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Fh({message:r,status:t}):new Error(r)}}function $M(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(o,u){const h=Object.assign({},o);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const p=u[m],v=h[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[m]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[m]=p)}return h}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YM="mcp_used/unknown";let JM=!1;function NS(n){for(const e of n)if(QM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return JM}function kS(n){var e;const t=(e=n[Qp])!==null&&e!==void 0?e:"";n[Qp]=(t+` ${YM}`).trimStart()}function QM(n){return n!==null&&typeof n=="object"&&n instanceof O0}function WM(n){return oi(this,arguments,function*(t,s=100){let r,o=0;for(;o<s;){const u=yield $e(t.listTools({cursor:r}));for(const h of u.tools)yield yield $e(h),o++;if(!u.nextCursor)break;r=u.nextCursor}})}class O0{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new O0(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const o={},u=[];for(const v of this.mcpClients)try{for(var h=!0,m=(t=void 0,li(WM(v))),p;p=await m.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const _=r;u.push(_);const T=_.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=v}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),CC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,o);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function XM(n,e,t){const s=new _C;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class ZM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),u=n4(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(G=>{p=G}),_=e.callbacks,T=function(){p({})},A=this.apiClient,k={onopen:T,onmessage:G=>{XM(A,_.onmessage,G)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(G){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(G){}},D=this.webSocketFactory.create(m,t4(u),k);D.connect(),await v;const N={setup:{model:vt(this.apiClient,e.model)}};return D.send(JSON.stringify(N)),new e4(D,this.apiClient)}}class e4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=w2(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=A2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ol.PLAY)}pause(){this.sendPlaybackControl(ol.PAUSE)}stop(){this.sendPlaybackControl(ol.STOP)}resetContext(){this.sendPlaybackControl(ol.RESET_CONTEXT)}close(){this.conn.close()}}function t4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function n4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function i4(n,e,t){const s=new bC;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const o=JSON.parse(r);if(n.isVertexAI()){const u=C2(o);Object.assign(s,u)}else Object.assign(s,o);e(s)}class r4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new ZM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,o,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&NS(e.config.tools)&&kS(_);const T=c4(_);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const R=this.apiClient.getApiKey();let O="BidiGenerateContent",U="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",U="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${O}?${U}=${R}`}let A=()=>{};const k=new Promise(R=>{A=R}),D=e.callbacks,I=function(){var R;(R=D==null?void 0:D.onopen)===null||R===void 0||R.call(D),A({})},V=this.apiClient,N={onopen:I,onmessage:R=>{i4(V,D.onmessage,R)},onerror:(t=D==null?void 0:D.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=D==null?void 0:D.onclose)!==null&&s!==void 0?s:function(R){}},G=this.webSocketFactory.create(v,l4(T),N);G.connect(),await k;let Y=vt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const R=this.apiClient.getProject(),O=this.apiClient.getLocation();Y=`projects/${R}/locations/${O}/`+Y}let ne={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[dh.AUDIO]}:e.config.responseModalities=[dh.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Q=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],M=[];for(const R of Q)if(this.isCallableTool(R)){const O=R;M.push(await O.tool())}else M.push(R);M.length>0&&(e.config.tools=M);const P={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ne=S2(this.apiClient,P):ne=E2(this.apiClient,P),delete ne.config,G.send(JSON.stringify(ne)),new o4(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const a4={turnComplete:!0};class o4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=$s(t.turns),e.isVertexAI()||(s=s.map(r=>qh(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const o of s){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(s4)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},a4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:k2(e)}:t={realtimeInput:N2(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function l4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function c4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y_=10;function J_(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ul(u)){r=!0;break}if(!r)return!0;const o=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ul(n){return"callTool"in n&&typeof n.callTool=="function"}function u4(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>ul(r)))!==null&&s!==void 0?s:!1}function Q_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(ul(s))return;const o=s;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(r)}),t}function W_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d4 extends yr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,o,u,h;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!u4(t)||J_(t.config))return await this.generateContentInternal(m);const p=Q_(t);if(p.length>0){const D=p.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let v,_;const T=$s(m.contents),A=(o=(r=(s=m.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Y_;let k=0;for(;k<A&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const D=v.candidates[0].content,I=[];for(const V of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(ul(V)){const G=await V.callTool(v.functionCalls);I.push(...G)}k++,_={role:"user",parts:I},m.contents=$s(m.contents),m.contents.push(D),m.contents.push(_),W_(m.config)&&(T.push(D),T.push(_))}return W_(m.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var s,r,o,u,h;if(this.maybeMoveToResponseJsonSchem(t),J_(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const m=Q_(t);if(m.length>0){const _=m.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(o=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let o;const u=[];if(s!=null&&s.generatedImages)for(const m of s.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=m==null?void 0:m.safetyAttributes:u.push(m);let h;return o?h={generatedImages:u,positivePromptSafetyAttributes:o,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new co(hr.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,o,u,h,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(o=t.source)===null||o===void 0?void 0:o.video)===null||u===void 0)&&u.uri&&(!((m=(h=t.source)===null||h===void 0?void 0:h.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const u=await Promise.all(o.map(async m=>ul(m)?await m.tool():m)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&NS(e.config.tools)){const m=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),kS(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var t,s,r;const o=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(ul(u)){const h=u,m=await h.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(o.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);o.set(p.name,h)}}return o}async processAfcStream(e){var t,s,r;const o=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Y_;let u=!1,h=0;const m=await this.initAfcToolsMap(e);return(function(p,v,_){return oi(this,arguments,function*(){for(var T,A,k,D,I,V;h<o;){u&&(h++,u=!1);const ne=yield $e(p.processParamsMaybeAddMcpUsage(_)),Q=yield $e(p.generateContentStreamInternal(ne)),M=[],P=[];try{for(var N=!0,G=(A=void 0,li(Q)),Y;Y=yield $e(G.next()),T=Y.done,!T;N=!0){D=Y.value,N=!1;const R=D;if(yield yield $e(R),R.candidates&&(!((I=R.candidates[0])===null||I===void 0)&&I.content)){P.push(R.candidates[0].content);for(const O of(V=R.candidates[0].content.parts)!==null&&V!==void 0?V:[])if(h<o&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(O.functionCall.name)){const U=yield $e(v.get(O.functionCall.name).callTool([O.functionCall]));M.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(R){A={error:R}}finally{try{!N&&!T&&(k=G.return)&&(yield $e(k.call(G)))}finally{if(A)throw A.error}}if(M.length>0){u=!0;const R=new Pc;R.candidates=[{content:{role:"user",parts:M}}],yield yield $e(R);const O=[];O.push(...P),O.push({role:"user",parts:M});const U=$s(_.contents).concat(O);_.contents=U}else break}})})(this,m,e)}async generateContentInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=F_(this.apiClient,e);return h=we("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=K_(v),T=new Pc;return Object.assign(T,_),T})}else{const p=z_(this.apiClient,e);return h=we("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=q_(v),T=new Pc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=F_(this.apiClient,e);return h=we("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return oi(this,arguments,function*(){var T,A,k,D;try{for(var I=!0,V=li(_),N;N=yield $e(V.next()),T=N.done,!T;I=!0){D=N.value,I=!1;const G=D,Y=K_(yield $e(G.json()));Y.sdkHttpResponse={headers:G.headers};const ne=new Pc;Object.assign(ne,Y),yield yield $e(ne)}}catch(G){A={error:G}}finally{try{!I&&!T&&(k=V.return)&&(yield $e(k.call(V)))}finally{if(A)throw A.error}}})})}else{const p=z_(this.apiClient,e);return h=we("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),u.then(function(_){return oi(this,arguments,function*(){var T,A,k,D;try{for(var I=!0,V=li(_),N;N=yield $e(V.next()),T=N.done,!T;I=!0){D=N.value,I=!1;const G=D,Y=q_(yield $e(G.json()));Y.sdkHttpResponse={headers:G.headers};const ne=new Pc;Object.assign(ne,Y),yield yield $e(ne)}}catch(G){A={error:G}}finally{try{!I&&!T&&(k=V.return)&&(yield $e(k.call(V)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=rR(this.apiClient,e);return h=we("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=oR(v),T=new w_;return Object.assign(T,_),T})}else{const p=iR(this.apiClient,e);return h=we("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=aR(v),T=new w_;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=yR(this.apiClient,e);return h=we("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=bR(v),T=new N_;return Object.assign(T,_),T})}else{const p=xR(this.apiClient,e);return h=we("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=vR(v),T=new N_;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const h=eR(this.apiClient,e);return o=we("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=tR(m),v=new cC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const h=yM(this.apiClient,e);return o=we("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=vM(m),v=new uC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const h=ZR(this.apiClient,e);return o=we("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=eM(m),v=new dC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const h=aM(this.apiClient,e);return o=we("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=oM(m),v=new hC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=jR(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const p=UR(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Yp(v))}}async listInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=KR(this.apiClient,e);return h=we("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=YR(v),T=new k_;return Object.assign(T,_),T})}else{const p=qR(this.apiClient,e);return h=we("{models_url}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=$R(v),T=new k_;return Object.assign(T,_),T})}}async update(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=gM(this.apiClient,e);return h=we("{model}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Jp(v))}else{const p=pM(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>Yp(v))}}async delete(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=Q2(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=X2(v),T=new C_;return Object.assign(T,_),T})}else{const p=J2(this.apiClient,e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=W2(v),T=new C_;return Object.assign(T,_),T})}}async countTokens(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=K2(this.apiClient,e);return h=we("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=Y2(v),T=new I_;return Object.assign(T,_),T})}else{const p=q2(this.apiClient,e);return h=we("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=$2(v),T=new I_;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const h=V2(this.apiClient,e);return o=we("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>{const p=O2(m),v=new fC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=wR(this.apiClient,e);return h=we("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const _=SR(v),T=new hh;return Object.assign(T,_),T})}else{const p=AR(this.apiClient,e);return h=we("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u.then(v=>{const _=ER(v),T=new hh;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h4 extends yr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=sC(e);return h=we("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const p=nC(e);return h=we("{operationName}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const h=Jk(e);return o=we("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f4(n){const e={},t=f(n,["data"]);if(t!=null&&g(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function m4(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>E4(o))),g(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&g(e,["role"],s),e}function p4(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&g(t,["expireTime"],r);const o=f(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&g(t,["newSessionExpireTime"],o);const u=f(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],T4(n,h));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&g(t,["fieldMask"],m),s}function g4(n,e){const t={},s=f(e,["config"]);return s!=null&&g(t,["config"],p4(n,s,t)),t}function x4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function y4(n){const e={},t=f(n,["id"]);t!=null&&g(e,["id"],t);const s=f(n,["args"]);s!=null&&g(e,["args"],s);const r=f(n,["name"]);if(r!=null&&g(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function b4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function _4(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=f(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const u=f(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=f(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","maxOutputTokens"],m);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","mediaResolution"],p);const v=f(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=f(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],V0(_));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=f(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],m4(zn(k)));const D=f(n,["tools"]);if(e!==void 0&&D!=null){let Q=wl(D);Array.isArray(Q)&&(Q=Q.map(M=>A4(Al(M)))),g(e,["setup","tools"],Q)}const I=f(n,["sessionResumption"]);e!==void 0&&I!=null&&g(e,["setup","sessionResumption"],S4(I));const V=f(n,["inputAudioTranscription"]);e!==void 0&&V!=null&&g(e,["setup","inputAudioTranscription"],V);const N=f(n,["outputAudioTranscription"]);e!==void 0&&N!=null&&g(e,["setup","outputAudioTranscription"],N);const G=f(n,["realtimeInputConfig"]);e!==void 0&&G!=null&&g(e,["setup","realtimeInputConfig"],G);const Y=f(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&g(e,["setup","contextWindowCompression"],Y);const ne=f(n,["proactivity"]);if(e!==void 0&&ne!=null&&g(e,["setup","proactivity"],ne),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function T4(n,e){const t={},s=f(e,["model"]);s!=null&&g(t,["setup","model"],vt(n,s));const r=f(e,["config"]);return r!=null&&g(t,["config"],_4(r,t)),t}function E4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=f(n,["fileData"]);o!=null&&g(e,["fileData"],x4(o));const u=f(n,["functionCall"]);u!=null&&g(e,["functionCall"],y4(u));const h=f(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const m=f(n,["inlineData"]);m!=null&&g(e,["inlineData"],f4(m));const p=f(n,["text"]);p!=null&&g(e,["text"],p);const v=f(n,["thought"]);v!=null&&g(e,["thought"],v);const _=f(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=f(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function S4(n){const e={},t=f(n,["handle"]);if(t!=null&&g(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function A4(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=f(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const r=f(n,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=f(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],v4(u));const h=f(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],b4(h));const m=f(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const p=f(n,["urlContext"]);return p!=null&&g(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(o=>`${t}.${o}`);e.push(...r)}else e.push(t)}return e.join(",")}function N4(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const o=s.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const o=w4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(p=>u.includes(p)?`generationConfig.${p}`:p));const m=[];o&&m.push(o),h.length>0&&m.push(...h),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class k4 extends yr{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=g4(this.apiClient,e);o=we("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const m=N4(h,e.config);return r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C4(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function I4(n){const e={},t=f(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&C4(s,e),e}function R4(n){const e={},t=f(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function M4(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function D4(n){const e={},t=f(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&M4(s,e),e}function P4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(u=>u)),g(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L4 extends yr{constructor(e){super(),this.apiClient=e,this.list=async t=>new co(hr.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=R4(e);return o=we("{name}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,s;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=I4(e);r=we("{name}",u._url),o=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=D4(e);return o=we("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=P4(m),v=new mC;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U4 extends yr{constructor(e,t=new L4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new co(hr.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=wM(e);return o=we("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=CM(e);return o=we("{name}",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var t,s;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kM(e);r=we("{name}",u._url),o=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=LM(e);return o=we("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=UM(m),v=new pC;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jM(e);return o=we("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=VM(m),v=new gC;return Object.assign(v,p),v})}}async importFile(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MM(e);return o=we("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>{const p=RM(m),v=new D0;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let CS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return CS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const j4=()=>CS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Xp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Js extends Error{}class ts extends Js{constructor(e,t,s,r){super(`${ts.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Yh({message:s,cause:Xp(t)});const o=t;return e===400?new RS(e,o,s,r):e===401?new MS(e,o,s,r):e===403?new DS(e,o,s,r):e===404?new PS(e,o,s,r):e===409?new LS(e,o,s,r):e===422?new US(e,o,s,r):e===429?new jS(e,o,s,r):e>=500?new VS(e,o,s,r):new ts(e,o,s,r)}}class Zp extends ts{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Yh extends ts{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class IS extends Yh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class RS extends ts{}class MS extends ts{}class DS extends ts{}class PS extends ts{}class LS extends ts{}class US extends ts{}class jS extends ts{}class VS extends ts{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V4=/^[a-z][a-z0-9+.-]*:/i,O4=n=>V4.test(n);let e0=n=>(e0=Array.isArray,e0(n));const G4=e0;let B4=G4;const X_=B4;function H4(n){if(!n)return!0;for(const e in n)return!1;return!0}function z4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const F4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Js(`${n} must be an integer`);if(e<0)throw new Js(`${n} must be a positive integer`);return e},q4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Y4=()=>{var n,e,t,s,r;const o=$4();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":eT(Deno.build.os),"X-Stainless-Arch":Z_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":eT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Z_((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=J4();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":nl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function J4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,o=s[2]||0,u=s[3]||0;return{browser:e,version:`${r}.${o}.${u}`}}}return null}const Z_=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",eT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Ud;const Q4=()=>Ud??(Ud=Y4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function OS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function X4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return OS({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function GS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Z4(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BS=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ap(n,e,t){return BS(),new File(n,e??"unknown_file",t)}function tD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const nD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",sD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&HS(n),iD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function rD(n,e,t){if(BS(),n=await n,sD(n))return n instanceof File?n:Ap([await n.arrayBuffer()],n.name);if(iD(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Ap(await t0(r),e,t)}const s=await t0(n);if(e||(e=tD(n)),!(t!=null&&t.type)){const r=s.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Ap(s,e,t)}async function t0(n){var e,t,s,r,o;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(HS(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(nD(n))try{for(var h=!0,m=li(n),p;p=await m.next(),e=p.done,!e;h=!0){r=p.value,h=!1;const v=r;u.push(...await t0(v))}}catch(v){t={error:v}}finally{try{!h&&!e&&(s=m.return)&&await s.call(m)}finally{if(t)throw t.error}}else{const v=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${aD(n)}`)}return u}function aD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zS{constructor(e){this._client=e}}zS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const tT=Object.freeze(Object.create(null)),oD=(n=FS)=>(function(t,...s){if(t.length===1)return t[0];let r=!1;const o=[],u=t.reduce((v,_,T)=>{var A,k,D;/[?#]/.test(_)&&(r=!0);const I=s[T];let V=(r?encodeURIComponent:n)(""+I);return T!==s.length&&(I==null||typeof I=="object"&&I.toString===((D=Object.getPrototypeOf((k=Object.getPrototypeOf((A=I.hasOwnProperty)!==null&&A!==void 0?A:tT))!==null&&k!==void 0?k:tT))===null||D===void 0?void 0:D.toString))&&(V=I+"",o.push({start:v.length+_.length,length:V.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":V)},""),h=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(h))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((v,_)=>v.start-_.start),o.length>0){let v=0;const _=o.reduce((T,A)=>{const k=" ".repeat(A.start-v),D="^".repeat(A.length);return v=A.start+A.length,T+k+D},"");throw new Js(`Path parameters result in path with invalid segments:
${o.map(T=>T.error).join(`
`)}
${u}
${_}`)}return u}),jd=oD(FS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qS extends zS{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,o=mh(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Js("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Js("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(jd`/${r}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(jd`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(jd`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const o=t??{},{api_version:u=this._client.apiVersion}=o,h=mh(o,["api_version"]);return this._client.get(jd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}qS._key=Object.freeze(["interactions"]);class KS extends qS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lD(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let Vd;function G0(n){let e;return(Vd??(e=new globalThis.TextEncoder,Vd=e.encode.bind(e)))(n)}let Od;function nT(n){let e;return(Od??(e=new globalThis.TextDecoder,Od=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?G0(e):e;this.buffer=lD([this.buffer,t]);const s=[];let r;for(;(r=cD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(nT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=nT(this.buffer.subarray(0,o));s.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Jh.NEWLINE_CHARS=new Set([`
`,"\r"]);Jh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function cD(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function uD(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ph={off:0,error:200,warn:300,info:400,debug:500},sT=(n,e,t)=>{if(n){if(z4(ph,n))return n;Xn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ph))}`)}};function Uc(){}function Gd(n,e,t){return!e||ph[n]>ph[t]?Uc:e[n].bind(e)}const dD={error:Uc,warn:Uc,info:Uc,debug:Uc};let iT=new WeakMap;function Xn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return dD;const r=iT.get(t);if(r&&r[0]===s)return r[1];const o={error:Gd("error",t,s),warn:Gd("warn",t,s),info:Gd("info",t,s),debug:Gd("debug",t,s)};return iT.set(t,[s,o]),o}const Ya=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ll{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const o=s?Xn(s):console;function u(){return oi(this,arguments,function*(){var m,p,v,_;if(r)throw new Js("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,k=li(hD(e,t)),D;D=yield $e(k.next()),m=D.done,!m;A=!0){_=D.value,A=!1;const I=_;if(!T)if(I.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield $e(JSON.parse(I.data))}catch(V){throw o.error("Could not parse message into JSON:",I.data),o.error("From chunk:",I.raw),V}}}catch(I){p={error:I}}finally{try{!A&&!m&&(v=k.return)&&(yield $e(v.call(k)))}finally{if(p)throw p.error}}T=!0}catch(I){if(Wp(I))return yield $e(void 0);throw I}finally{T||t.abort()}})}return new ll(u,t,s)}static fromReadableStream(e,t,s){let r=!1;function o(){return oi(this,arguments,function*(){var m,p,v,_;const T=new Jh,A=GS(e);try{for(var k=!0,D=li(A),I;I=yield $e(D.next()),m=I.done,!m;k=!0){_=I.value,k=!1;const V=_;for(const N of T.decode(V))yield yield $e(N)}}catch(V){p={error:V}}finally{try{!k&&!m&&(v=D.return)&&(yield $e(v.call(D)))}finally{if(p)throw p.error}}for(const V of T.flush())yield yield $e(V)})}function u(){return oi(this,arguments,function*(){var m,p,v,_;if(r)throw new Js("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,k=li(o()),D;D=yield $e(k.next()),m=D.done,!m;A=!0){_=D.value,A=!1;const I=_;T||I&&(yield yield $e(JSON.parse(I)))}}catch(I){p={error:I}}finally{try{!A&&!m&&(v=k.return)&&(yield $e(v.call(k)))}finally{if(p)throw p.error}}T=!0}catch(I){if(Wp(I))return yield $e(void 0);throw I}finally{T||t.abort()}})}return new ll(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=o=>({next:()=>{if(o.length===0){const u=s.next();e.push(u),t.push(u)}return o.shift()}});return[new ll(()=>r(e),this.controller,this.client),new ll(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return OS({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:o}=await t.next();if(o)return s.close();const u=G0(JSON.stringify(r)+`
`);s.enqueue(u)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function hD(n,e){return oi(this,arguments,function*(){var s,r,o,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Js("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Js("Attempted to iterate over a response with no body");const h=new mD,m=new Jh,p=GS(n.body);try{for(var v=!0,_=li(fD(p)),T;T=yield $e(_.next()),s=T.done,!s;v=!0){u=T.value,v=!1;const A=u;for(const k of m.decode(A)){const D=h.decode(k);D&&(yield yield $e(D))}}}catch(A){r={error:A}}finally{try{!v&&!s&&(o=_.return)&&(yield $e(o.call(_)))}finally{if(r)throw r.error}}for(const A of m.flush()){const k=h.decode(A);k&&(yield yield $e(k))}})}function fD(n){return oi(this,arguments,function*(){var t,s,r,o;let u=new Uint8Array;try{for(var h=!0,m=li(n),p;p=yield $e(m.next()),t=p.done,!t;h=!0){o=p.value,h=!1;const v=o;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?G0(v):v;let T=new Uint8Array(u.length+_.length);T.set(u),T.set(_,u.length),u=T;let A;for(;(A=uD(u))!==-1;)yield yield $e(u.slice(0,A)),u=u.slice(A)}}catch(v){s={error:v}}finally{try{!h&&!t&&(r=m.return)&&(yield $e(r.call(m)))}finally{if(s)throw s.error}}u.length>0&&(yield yield $e(u))})}class mD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=pD(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function pD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gD(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:o}=e,u=await(async()=>{var h;if(e.options.stream)return Xn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ll.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),p=(h=m==null?void 0:m.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await t.json():await t.text()})();return Xn(n).debug(`[${s}] response parsed`,Ya({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-o})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B0 extends Promise{constructor(e,t,s=gD){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new B0(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $S=Symbol("brand.privateNullableHeaders");function*xD(n){if(!n)return;if($S in n){const{values:s,nulls:r}=n;yield*s.entries();for(const o of r)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():X_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=X_(s[1])?s[1]:[s[1]];let u=!1;for(const h of o)h!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,h])}}const Lc=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[o,u]of xD(s)){const h=o.toLowerCase();r.has(h)||(e.delete(o),r.add(h)),u===null?(e.delete(o),t.add(h)):(e.append(o,u),t.delete(h))}}return{[$S]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wp=n=>{var e,t,s,r,o,u;if(typeof globalThis.process<"u")return(s=(t=(e=zk)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var YS;class Qh{constructor(e){var t,s,r,o,u,h,m,{baseURL:p=wp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=wp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=mh(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Qh.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const k="warn";this.logLevel=k,this.logLevel=(u=(o=sT(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:sT(wp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=A.fetchOptions,this.maxRetries=(h=A.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(m=A.fetch)!==null&&m!==void 0?m:W4(),this.encoder=eD,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Lc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Lc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Lc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new Js(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${nl}`}defaultIdempotencyKey(){return`stainless-node-retry-${j4()}`}makeStatusError(e,t,s,r){return ts.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,o=O4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return H4(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new B0(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,o,u;const h=await e,m=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=m),await this.prepareOptions(h);const{req:p,url:v,timeout:_}=await this.buildRequest(h,{retryCount:m-t});await this.prepareRequest(p,{url:v,options:h});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,k=Date.now();if(Xn(this).debug(`[${T}] sending request`,Ya({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:p.headers})),!((o=h.signal)===null||o===void 0)&&o.aborted)throw new Zp;const D=new AbortController,I=await this.fetchWithTimeout(v,p,_,D).catch(Xp),V=Date.now();if(I instanceof globalThis.Error){const G=`retrying, ${t} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new Zp;const Y=Wp(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(t)return Xn(this).info(`[${T}] connection ${Y?"timed out":"failed"} - ${G}`),Xn(this).debug(`[${T}] connection ${Y?"timed out":"failed"} (${G})`,Ya({retryOfRequestLogID:s,url:v,durationMs:V-k,message:I.message})),this.retryRequest(h,t,s??T);throw Xn(this).info(`[${T}] connection ${Y?"timed out":"failed"} - error; no more retries left`),Xn(this).debug(`[${T}] connection ${Y?"timed out":"failed"} (error; no more retries left)`,Ya({retryOfRequestLogID:s,url:v,durationMs:V-k,message:I.message})),Y?new IS:new Yh({cause:I})}const N=`[${T}${A}] ${p.method} ${v} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${V-k}ms`;if(!I.ok){const G=await this.shouldRetry(I);if(t&&G){const R=`retrying, ${t} attempts remaining`;return await Z4(I.body),Xn(this).info(`${N} - ${R}`),Xn(this).debug(`[${T}] response error (${R})`,Ya({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:V-k})),this.retryRequest(h,t,s??T,I.headers)}const Y=G?"error; no more retries left":"error; not retryable";Xn(this).info(`${N} - ${Y}`);const ne=await I.text().catch(R=>Xp(R).message),Q=q4(ne),M=Q?void 0:ne;throw Xn(this).debug(`[${T}] response error (${Y})`,Ya({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,message:M,durationMs:Date.now()-k})),this.makeStatusError(I.status,Q,M,I.headers)}return Xn(this).info(N),Xn(this).debug(`[${T}] response start`,Ya({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:V-k})),{response:I,options:h,controller:D,requestLogID:T,retryOfRequestLogID:s,startTime:k}}async fetchWithTimeout(e,t,s,r){const o=t||{},{signal:u,method:h}=o,m=mh(o,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,_=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),m);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){var o;let u;const h=r==null?void 0:r.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(u=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!u){const p=parseFloat(m);Number.isNaN(p)?u=Date.parse(m)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,p)}return await K4(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,u=Math.min(.5*Math.pow(2,o),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,o;const u=Object.assign({},e),{method:h,path:m,query:p,defaultBaseURL:v}=u,_=this.buildURL(m,p,v);"timeout"in u&&F4("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:h,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=u.fetchOptions)!==null&&o!==void 0?o:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=Lc([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Q4()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Lc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:X4(e)}:this.encoder({body:e,headers:s})}}Qh.DEFAULT_TIMEOUT=6e4;class En extends Qh{constructor(){super(...arguments),this.interactions=new KS(this)}}YS=En;En.GeminiNextGenAPIClient=YS;En.GeminiNextGenAPIClientError=Js;En.APIError=ts;En.APIConnectionError=Yh;En.APIConnectionTimeoutError=IS;En.APIUserAbortError=Zp;En.NotFoundError=PS;En.ConflictError=LS;En.RateLimitError=jS;En.BadRequestError=RS;En.AuthenticationError=MS;En.InternalServerError=VS;En.PermissionDeniedError=DS;En.UnprocessableEntityError=US;En.toFile=rD;En.Interactions=KS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yD(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function vD(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function bD(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function _D(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function TD(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const u=f(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const m=f(n,["learningRate"]);if(e!==void 0&&m!=null&&g(e,["tuningTask","hyperparameters","learningRate"],m),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function ED(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=f(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec"],rT(A))}else if(r==="PREFERENCE_TUNING"){const A=f(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec"],rT(A))}const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const u=f(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=f(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(h==="PREFERENCE_TUNING"){const A=f(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=f(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(m==="PREFERENCE_TUNING"){const A=f(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=f(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(p==="PREFERENCE_TUNING"){const A=f(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=f(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=f(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=f(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=f(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function SD(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const o=f(n,["trainingDataset"]);o!=null&&LD(o);const u=f(n,["config"]);return u!=null&&TD(u,t),t}function AD(n,e){const t={},s=f(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const o=f(n,["trainingDataset"]);o!=null&&UD(o,t,e);const u=f(n,["config"]);return u!=null&&ED(u,t,e),t}function wD(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function ND(n,e){const t={},s=f(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function kD(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function CD(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const u=f(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function ID(n,e){const t={},s=f(n,["config"]);return s!=null&&kD(s,t),t}function RD(n,e){const t={},s=f(n,["config"]);return s!=null&&CD(s,t),t}function MD(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const o=f(n,["tunedModels"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>JS(h))),g(t,["tuningJobs"],u)}return t}function DD(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const o=f(n,["tuningJobs"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(h=>n0(h))),g(t,["tuningJobs"],u)}return t}function PD(n,e){const t={},s=f(n,["name"]);s!=null&&g(t,["model"],s);const r=f(n,["name"]);return r!=null&&g(t,["endpoint"],r),t}function LD(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),g(t,["examples","examples"],r)}return t}function UD(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function JS(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&g(t,["name"],r);const o=f(n,["state"]);o!=null&&g(t,["state"],dS(o));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const m=f(n,["tuningTask","completeTime"]);m!=null&&g(t,["endTime"],m);const p=f(n,["updateTime"]);p!=null&&g(t,["updateTime"],p);const v=f(n,["description"]);v!=null&&g(t,["description"],v);const _=f(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=f(n,["_self"]);return T!=null&&g(t,["tunedModel"],PD(T)),t}function n0(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&g(t,["name"],r);const o=f(n,["state"]);o!=null&&g(t,["state"],dS(o));const u=f(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=f(n,["startTime"]);h!=null&&g(t,["startTime"],h);const m=f(n,["endTime"]);m!=null&&g(t,["endTime"],m);const p=f(n,["updateTime"]);p!=null&&g(t,["updateTime"],p);const v=f(n,["error"]);v!=null&&g(t,["error"],v);const _=f(n,["description"]);_!=null&&g(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const A=f(n,["tunedModel"]);A!=null&&g(t,["tunedModel"],A);const k=f(n,["preTunedModel"]);k!=null&&g(t,["preTunedModel"],k);const D=f(n,["supervisedTuningSpec"]);D!=null&&g(t,["supervisedTuningSpec"],D);const I=f(n,["preferenceOptimizationSpec"]);I!=null&&g(t,["preferenceOptimizationSpec"],I);const V=f(n,["tuningDataStats"]);V!=null&&g(t,["tuningDataStats"],V);const N=f(n,["encryptionSpec"]);N!=null&&g(t,["encryptionSpec"],N);const G=f(n,["partnerModelTuningSpec"]);G!=null&&g(t,["partnerModelTuningSpec"],G);const Y=f(n,["customBaseModel"]);Y!=null&&g(t,["customBaseModel"],Y);const ne=f(n,["experiment"]);ne!=null&&g(t,["experiment"],ne);const Q=f(n,["labels"]);Q!=null&&g(t,["labels"],Q);const M=f(n,["outputUri"]);M!=null&&g(t,["outputUri"],M);const P=f(n,["pipelineJob"]);P!=null&&g(t,["pipelineJob"],P);const R=f(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const O=f(n,["tunedModelDisplayName"]);O!=null&&g(t,["tunedModelDisplayName"],O);const U=f(n,["veoTuningSpec"]);return U!=null&&g(t,["veoTuningSpec"],U),t}function jD(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&g(t,["name"],r);const o=f(n,["metadata"]);o!=null&&g(t,["metadata"],o);const u=f(n,["done"]);u!=null&&g(t,["done"],u);const h=f(n,["error"]);return h!=null&&g(t,["error"],h),t}function rT(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&g(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VD extends yr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new co(hr.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),o=await this.tuneMldevInternal(r);let u="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?u=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(u=o.name.split("/operations/")[0]),{name:u,state:Fp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=ND(e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>n0(v))}else{const p=wD(e);return h=we("{name}",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>JS(v))}}async listInternal(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=RD(e);return h=we("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=DD(v),T=new R_;return Object.assign(T,_),T})}else{const p=ID(e);return h=we("tunedModels",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=MD(v),T=new R_;return Object.assign(T,_),T})}}async cancel(e){var t,s,r,o;let u,h="",m={};if(this.apiClient.isVertexAI()){const p=vD(e);return h=we("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=_D(v),T=new M_;return Object.assign(T,_),T})}else{const p=yD(e);return h=we("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=bD(v),T=new M_;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI()){const h=AD(e,e);return o=we("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>n0(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,o="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SD(e);return o=we("tunedModels",h._url),u=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:o,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),r.then(m=>jD(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GD=1024*1024*8,BD=3,HD=1e3,zD=2,gh="x-goog-upload-status";async function FD(n,e,t){var s;const r=await QS(n,e,t),o=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[gh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function qD(n,e,t){var s;const r=await QS(n,e,t),o=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[gh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=rS(o),h=new P0;return Object.assign(h,u),h}async function QS(n,e,t){var s,r;let o=0,u=0,h=new qp(new Response),m="upload";for(o=n.size;u<o;){const p=Math.min(GD,o-u),v=n.slice(u,u+p);u+p>=o&&(m+=", finalize");let _=0,T=HD;for(;_<BD&&(h=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[gh]));)_++,await $D(T),T=T*zD;if(u+=p,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[gh])!=="active")break;if(o<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function KD(n){return{size:n.size,type:n.type}}function $D(n){return new Promise(e=>setTimeout(e,n))}class YD{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await FD(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qD(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JD{create(e,t,s){return new QD(e,t,s)}}class QD{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aT="x-goog-api-key";class WD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(aT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(aT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XD="gl-node/";class ZD{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new En({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=$k(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new WD(this.apiKey);this.apiClient=new KM({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:XD+"web",uploader:new YD,downloader:new OD}),this.models=new d4(this.apiClient),this.live=new r4(this.apiClient,r,new JD),this.batches=new TI(this.apiClient),this.chats=new s2(this.models,this.apiClient),this.caches=new e2(this.apiClient),this.files=new f2(this.apiClient),this.operations=new h4(this.apiClient),this.authTokens=new k4(this.apiClient),this.tunings=new VD(this.apiClient),this.fileSearchStores=new U4(this.apiClient)}}const eP=new ZD({apiKey:"PLACEHOLDER_API_KEY"});function oT(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const WS={type:Se.OBJECT,properties:{id:{type:Se.STRING},type:{type:Se.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:Se.STRING},options:{type:Se.ARRAY,items:{type:Se.STRING}},correctAnswer:{type:Se.STRING},tkpPoints:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{option:{type:Se.STRING},points:{type:Se.INTEGER}}}},explanation:{type:Se.STRING},shortcut:{type:Se.STRING},metadata:{type:Se.OBJECT,properties:{difficulty:{type:Se.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:Se.INTEGER},topic:{type:Se.STRING},subtest:{type:Se.STRING},trapPattern:{type:Se.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},tP={type:Se.OBJECT,properties:{questions:{type:Se.ARRAY,items:WS}},required:["questions"]};async function Pi(n,e,t){const s="gemini-3-flash-preview",r={temperature:.9,topP:.95,topK:40};e&&(r.responseMimeType="application/json",r.responseSchema=e);const o=[];t&&o.push({inlineData:{mimeType:"application/pdf",data:t}}),o.push({text:n});try{const h=(await eP.models.generateContent({model:s,contents:{role:"user",parts:o},config:r})).text;if(!h)throw new Error("Empty response from AI");if(e)try{let m=h.trim();return m.startsWith("```json")?m=m.replace(/^```json\n?/,"").replace(/\n?```$/,""):m.startsWith("```")&&(m=m.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(m)}catch(m){console.error("JSON Parse Error",m);const p=h.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return p?JSON.parse(p[0]):h}return h}catch(u){throw console.error("Gemini API Error:",u),u}}function nP(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0,n.options=oT(n.options)),n}const Zn=async(n,e,t,s=5,r=[],o,u,h)=>{let m="",p;const v="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let _=tP;if(e==="GENERAL"&&u){const k=t,D=k.type==="topic"?`Topic: ${k.content}`:"Material Content";k.type==="pdf"&&(p=k.content);const I=k.difficultyPreference||"MEDIUM",V=`DIFFICULTY LEVEL: ${I}. ${I==="HARD"?"Use complex analysis/HOTS.":I==="EASY"?"Use straightforward recall.":""}`;u==="ACTIVE_RECALL"?m=`Create ${s} Active Recall questions (Short Answer format) based on this: ${D}. 
          ${v} ${V}
          Questions must be specific and require recall of key facts/concepts.`:u==="PBL"?m=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${v} ${V}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${D}. 
          Each question should be a realistic scenario requiring application of the concept.`:m=`Create ${s} practice questions based on: ${D}. ${v} ${V}`,k.type==="text"&&(m+=`

CONTENT: ${k.content}`)}else{let k="";const D=e==="SKD"&&typeof t=="string"&&(t.includes("TIU")||t.includes("Intelegensia")),I=e==="UTBK";if(h==="HOTS"?(k=`
          DIFFICULTY DISTRIBUTION RULES (STRICT):
          - 75% of questions MUST be High Order Thinking Skills (HOTS): Questions requiring analysis, evaluation, inference, and complex problem-solving.
          - 25% of questions should be Medium/Hard difficulty: Questions testing deep conceptual understanding.
          - DO NOT create Easy/Recall questions.
          - DO NOT repeat the same question pattern. Ensure variety in topics within the subtest.
          `,I&&(k+=`
              CONTEXT: UTBK SNBT 2025 (HOTS).
              - For Reading (PPU/PBM/Literasi): Use long, complex passages with implicit meanings. Ask for inference, author's bias, or strengthening/weakening arguments.
              - For Quantitative/PU: Use complex word problems, data interpretation, and pattern recognition.
              `),D?k+=`
              CONTEXT: SKD TIU (Tes Intelegensia Umum) - ADVANCED/OLYMPIAD LEVEL.
              The user wants extremely challenging questions to practice for high-stakes exams.
              
              1. **Number Series (Deret Angka)**: 
                 - MUST use compound patterns (e.g., *2 -1, *3 -2), 3-level differences (beda bertingkat 3), or Fibonacci with operations (F_n + n). 
                 - Include fractional series or decimal patterns if applicable.
                 - Avoid simple arithmetic progression.
              
              2. **Syllogism (Penalaran Logis)**: 
                 - Use at least 3 distinct premises.
                 - Use "Sebagian A adalah B", "Semua B bukan C", "Tidak ada C yang D".
                 - Include Modus Tollens, Contrapositive logic, and Double Negatives.
              
              3. **Word Problems (Soal Cerita)**:
                 - Work Efficiency: "A takes 10 days, B takes 15. A works for 2 days then leaves, B continues..."
                 - Speed/Distance: "Overtaking moving objects", "Average speed with different legs of journey".
                 - Algebra: Systems of linear equations with 3 variables (x, y, z).
                 - Percentages: Compound interest or multi-step profit/loss.
              
              4. **Analogy**: 
                 - Abstract relationships. Example: "Fish : Gills :: Human : Lungs" (Functional), NOT "Big : Small" (Antonym).
              
              5. **Figural**: 
                 - Describe complex 3x3 matrix patterns or series with multiple rotating/shifting elements.
              `:k+=`CONTEXT: ${e} - ${o||""}. Focus on analysis and application.`):e==="SKD"&&h==="TKP"?k="CONTEXT: SKD TKP. Focus on professional scenarios.":k="Standard difficulty. Mix of Easy, Medium, Hard.",e==="PSIKOTEST"?k=`
          CONTEXT: PROFESSIONAL PSYCHOMETRIC TEST (High IQ & Logical Reasoning).
          Generate ${s} questions distributed among these 4 subtest types:

          1. **Number Series (Deret Angka)**: 
             - Create complex sequences (e.g., Fibonacci, multi-level differences, alternating patterns).
             - Example: 2, 5, 10, 17, ... (n^2 + 1).

          2. **Verbal Analogy (Analogi Verbal)**:
             - Create 'Word A : Word B = Word C : ?' questions.
             - Relationships should be subtle (e.g., degree, cause-effect, antonyms).
             - Example: "Api : Panas = Es : Dingin" (Cause-Effect/Property).
          
          3. **Formal Logic (Silogisme)**:
             - Create syllogisms with 2 or 3 premises.
             - Use 'All', 'Some', 'None' quantifiers.
             - Ensure options have logical distractors.
             - Example: "Semua A adalah B. Sebagian B adalah C. Maka..."
          
          4. **Figural/Spatial (Tes Spasial)**:
             - Since this is text-based, describe the pattern in text format.
             - E.g., "Image A rotates 90 degrees clockwise. Image B is mirror of A. Image C is..."
          
          Instruction: "Options must be tricky. Explanation must be clear step-by-step logic."
          `:e==="INTERVIEW"&&(k="CONTEXT: JOB/SCHOOL ADMISSION INTERVIEW.",_={type:Se.OBJECT,properties:{questions:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},type:{type:Se.STRING,enum:["long_text"]},content:{type:Se.STRING},explanation:{type:Se.STRING},metadata:{type:Se.OBJECT,properties:{topic:{type:Se.STRING}}}},required:["content","type"]}}}}),e==="INTERVIEW")m=`Roleplay Task: Act as a professional HR Interviewer.
        Context: ${t}.
        Generate ${s} distinct interview questions. 
        Style: Conversational, direct, and engaging.
        Questions should range from introduction to behavioral/situational.
        Metadata subtest: "Interview".`;else{const V=`
            Generate ${s} distinct questions.
            ${k}
            MANDATORY: Provide a DETAILED 'explanation' for the answer.
            MANDATORY METADATA:
            - idealTimeSeconds: Realistic time (e.g. 60s for Logic, 30s for Verbal).
            - subtest: Use specific names like "Deret Angka", "Analogi Verbal", "Silogisme", "Tes Spasial".
            
            LANGUAGE: Bahasa Indonesia.
        `,N=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&h==="TKP";let G="";N&&(G=`
           CRITICAL RULES FOR TKP (Tes Karakteristik Pribadi):
           1. **AMBIGUITY & CONFUSION**: The distinction between the 5-point and 4-point answers MUST be very subtle.
           2. **SCORING LOGIC**:
              - 5 Points: Best answer (professional, proactive, leadership).
              - 4 Points: Good answer (standard procedure).
              - 3 Points: Neutral.
              - 1-2 Points: Negative.
           5. **FORMAT**: Provide 'tkpPoints' list mapping EACH option to a score 1-5.
           `),n===Fe.WEAKNESS?m=`WEAKNESS ATTACK MODE. User weak in: ${r.join(", ")}. ${k} ${G}`:n===Fe.ACTIVE_RECALL?m=`ACTIVE RECALL. Type: "short_answer". ${k}`:m=`TRY OUT / PRACTICE.
            Context: ${e} - ${JSON.stringify(t)}.
            ${V}
            ${G}`}}return((await Pi(m,_,p)).questions||[]).filter(k=>!!k).map(k=>{const D=nP(k);return e==="INTERVIEW"&&(D.type="long_text",D.options=[]),D})},sP=async(n,e,t)=>{const s={type:Se.OBJECT,properties:{score:{type:Se.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:Se.BOOLEAN,description:"True if score > 70"},feedback:{type:Se.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},r=`Evaluate this answer. 
  Question: ${n}
  Correct Answer / Key Concept: ${e}
  User Answer: ${t}
  
  Provide a score (0-100), boolean correctness, and feedback.`;return Pi(r,s)},iP=async n=>{const e=`The user is weak in these topics: ${n.join(", ")}. Provide a concise, actionable study plan (3 paragraphs max) to improve.`;return Pi(e)},rP=async(n,e)=>{const t={type:Se.OBJECT,properties:{score:{type:Se.INTEGER},feedback:{type:Se.STRING},improvedAnswer:{type:Se.STRING},keyPointsCovered:{type:Se.ARRAY,items:{type:Se.STRING}},toneAnalysis:{type:Se.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate this job interview answer given by a candidate.
  Question: ${n}
  Candidate Answer: ${e}
  
  Act as a senior HR manager. Critique the tone, content, and structure.
  `;return Pi(s,t)},aP=async(n,e)=>{const t={type:Se.OBJECT,properties:{understandingScore:{type:Se.INTEGER},simplificationQuality:{type:Se.STRING},missingConcepts:{type:Se.ARRAY,items:{type:Se.STRING}},correction:{type:Se.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate this Feynman Technique explanation. The user is trying to explain "${n}" to a 5-year old.
  Explanation: ${e}`;return Pi(s,t)},oP=async n=>n.type==="pdf"&&n.content?await Pi("Extract and summarize the main text content from this PDF for study purposes. Ignore headers/footers.",void 0,n.content):n.content,lP=async(n,e)=>{const t=`Context: University Thesis (Skripsi). Topic: ${n}. Task: ${e}. Provide detailed output.`;return Pi(t)},cP=async n=>{const e={type:Se.OBJECT,properties:{flashcards:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},front:{type:Se.STRING},back:{type:Se.STRING}},required:["front","back"]}}}},t=`Create 10 flashcards based on this material: ${n.extractedText||n.content}`;return(await Pi(t,e)).flashcards},uP=async n=>{const e={type:Se.OBJECT,properties:{label:{type:Se.STRING},children:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{label:{type:Se.STRING},children:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{label:{type:Se.STRING}}}}}}}}},t=`Create a hierarchical mind map structure (JSON) for the topic: ${n.title||n.content.substring(0,50)}. Base it on the content.`;return Pi(t,e)},dP=async(n,e,t)=>{const s={type:Se.OBJECT,properties:{topic:{type:Se.STRING},summary:{type:Se.STRING},keyPoints:{type:Se.ARRAY,items:{type:Se.STRING}},question:WS},required:["topic","summary","keyPoints","question"]},r=`Create a Drill Card (Mini Lesson + 1 Question) for ${n} - ${e} ${t?"("+t+")":""}.`;return Pi(r,s)},lT=async n=>{const e=Zn(Fe.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK) - Nasionalisme, Integritas, Bela Negara, Pilar Negara",30,[],n,void 0,"HOTS"),t=Zn(Fe.SIMULATION,"SKD","Tes Intelegensia Umum (TIU) - Verbal, Numerik, Figural",35,[],n,void 0,"HOTS"),s=Zn(Fe.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP) - Pelayanan Publik, Jejaring Kerja, Sosial Budaya, TIK, Profesionalisme, Anti Radikalisme",45,[],n,void 0,"TKP"),[r,o,u]=await Promise.all([e,t,s]);return r.forEach(h=>h.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),o.forEach(h=>h.metadata.subtest="Tes Intelegensia Umum (TIU)"),u.forEach(h=>h.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...r,...o,...u]},cT=async()=>{const n=Zn(Fe.SIMULATION,"UTBK","Penalaran Umum (Induktif, Deduktif, Kuantitatif)",30,[],void 0,void 0,"HOTS"),e=Zn(Fe.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=Zn(Fe.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=Zn(Fe.SIMULATION,"UTBK","Pengetahuan Kuantitatif (Math & Logic)",20,[],void 0,void 0,"HOTS"),r=Zn(Fe.SIMULATION,"UTBK","Literasi Bahasa Indonesia (Teks Panjang)",25,[],void 0,void 0,"HOTS"),o=Zn(Fe.SIMULATION,"UTBK","Literasi Bahasa Inggris (Long Text Analysis)",25,[],void 0,void 0,"HOTS"),u=Zn(Fe.SIMULATION,"UTBK","Penalaran Matematika (Complex Word Problems)",20,[],void 0,void 0,"HOTS"),[h,m,p,v,_,T,A]=await Promise.all([n,e,t,s,r,o,u]);return h.forEach(k=>k.metadata.subtest="Penalaran Umum"),m.forEach(k=>k.metadata.subtest="Pengetahuan dan Pemahaman Umum"),p.forEach(k=>k.metadata.subtest="Pemahaman Bacaan dan Menulis"),v.forEach(k=>k.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(k=>k.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(k=>k.metadata.subtest="Literasi Bahasa Inggris"),A.forEach(k=>k.metadata.subtest="Penalaran Matematika"),[...h,...m,...p,...v,..._,...T,...A]},hP=async()=>Zn(Fe.SIMULATION,"TPA","SIMULATION",65,[],void 0,void 0,"HOTS"),fP=async()=>Zn(Fe.SIMULATION,"PSIKOTEST","SIMULATION",40,[],void 0,void 0,"HOTS"),mP=()=>{};var uT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},pP=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[s++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],u=n[t++],h=n[t++],m=((r&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],u=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(o&63)<<6|u&63)}}return e.join("")},ZS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const o=n[r],u=r+1<n.length,h=u?n[r+1]:0,m=r+2<n.length,p=m?n[r+2]:0,v=o>>2,_=(o&3)<<4|h>>4;let T=(h&15)<<2|p>>6,A=p&63;m||(A=64,u||(T=64)),s.push(t[v],t[_],t[T],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],h=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||h==null||p==null||_==null)throw new gP;const T=o<<2|h>>4;if(s.push(T),p!==64){const A=h<<4&240|p>>2;if(s.push(A),_!==64){const k=p<<6&192|_;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xP=function(n){const e=XS(n);return ZS.encodeByteArray(e,!0)},xh=function(n){return xP(n).replace(/\./g,"")},eA=function(n){try{return ZS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=()=>yP().__FIREBASE_DEFAULTS__,bP=()=>{if(typeof process>"u"||typeof uT>"u")return;const n=uT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_P=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eA(n[1]);return e&&JSON.parse(e)},Wh=()=>{try{return mP()||vP()||bP()||_P()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tA=n=>{var e,t;return(t=(e=Wh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},TP=n=>{const e=tA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},nA=()=>{var n;return(n=Wh())==null?void 0:n.config},sA=n=>{var e;return(e=Wh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[xh(JSON.stringify(t)),xh(JSON.stringify(u)),""].join(".")}const Bc={};function AP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Bc))Bc[e]?n.emulator.push(e):n.prod.push(e);return n}function wP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dT=!1;function rA(n,e){if(typeof window>"u"||typeof document>"u"||!kl(window.location.host)||Bc[n]===e||Bc[n]||dT)return;Bc[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",o=AP().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{dT=!0,u()},T}function v(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=wP(s),A=t("text"),k=document.getElementById(A)||document.createElement("span"),D=t("learnmore"),I=document.getElementById(D)||document.createElement("a"),V=t("preprendIcon"),N=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;h(G),v(I,D);const Y=p();m(N,V),G.append(N,k,I,Y),document.body.appendChild(G)}o?(k.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function kP(){var e;const n=(e=Wh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MP(){const n=qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DP(){return!kP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PP(){try{return typeof indexedDB=="object"}catch{return!1}}function LP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="FirebaseError";class br extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=UP,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iu.prototype.create)}}class iu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],u=o?jP(o,s):"Error",h=`${this.serviceName}: ${u} (${r}).`;return new br(r,h,s)}}function jP(n,e){return n.replace(VP,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const VP=/\{\$([^}]+)}/g;function OP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function no(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const o=n[r],u=e[r];if(hT(o)&&hT(u)){if(!no(o,u))return!1}else if(o!==u)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function hT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function GP(n,e){const t=new BP(n,e);return t.subscribe.bind(t)}class BP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");HP(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=Np),r.error===void 0&&(r.error=Np),r.complete===void 0&&(r.complete=Np);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(n){return n&&n._delegate?n._delegate:n}class so{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new EP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qP(e))try{this.getOrInitializeService({instanceIdentifier:Ja})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});s.resolve(o)}catch{}}}}clearInstance(e=Ja){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ja){return this.instances.has(e)}getOptions(e=Ja){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);s===h&&u.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:FP(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ja){return this.component?this.component.multipleInstances?e:Ja:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FP(n){return n===Ja?void 0:n}function qP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const $P={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},YP=ut.INFO,JP={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},QP=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=JP[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class H0{constructor(e){this.name=e,this._logLevel=YP,this._logHandler=QP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const WP=(n,e)=>e.some(t=>n instanceof t);let fT,mT;function XP(){return fT||(fT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZP(){return mT||(mT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aA=new WeakMap,s0=new WeakMap,oA=new WeakMap,kp=new WeakMap,z0=new WeakMap;function e6(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(ra(n.result)),r()},u=()=>{s(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&aA.set(t,n)}).catch(()=>{}),z0.set(e,n),e}function t6(n){if(s0.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),r()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});s0.set(n,e)}let i0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return s0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function n6(n){i0=n(i0)}function s6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Cp(this),e,...t);return oA.set(s,e.sort?e.sort():[e]),ra(s)}:ZP().includes(n)?function(...e){return n.apply(Cp(this),e),ra(aA.get(this))}:function(...e){return ra(n.apply(Cp(this),e))}}function i6(n){return typeof n=="function"?s6(n):(n instanceof IDBTransaction&&t6(n),WP(n,XP())?new Proxy(n,i0):n)}function ra(n){if(n instanceof IDBRequest)return e6(n);if(kp.has(n))return kp.get(n);const e=i6(n);return e!==n&&(kp.set(n,e),z0.set(e,n)),e}const Cp=n=>z0.get(n);function r6(n,e,{blocked:t,upgrade:s,blocking:r,terminated:o}={}){const u=indexedDB.open(n,e),h=ra(u);return s&&u.addEventListener("upgradeneeded",m=>{s(ra(u.result),m.oldVersion,m.newVersion,ra(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),r&&m.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const a6=["get","getKey","getAll","getAllKeys","count"],o6=["put","add","delete","clear"],Ip=new Map;function pT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ip.get(e))return Ip.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=o6.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||a6.includes(t)))return;const o=async function(u,...h){const m=this.transaction(u,r?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),r&&m.done]))[0]};return Ip.set(e,o),o}n6(n=>({...n,get:(e,t,s)=>pT(e,t)||n.get(e,t,s),has:(e,t)=>!!pT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c6(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function c6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const r0="@firebase/app",gT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new H0("@firebase/app"),u6="@firebase/app-compat",d6="@firebase/analytics-compat",h6="@firebase/analytics",f6="@firebase/app-check-compat",m6="@firebase/app-check",p6="@firebase/auth",g6="@firebase/auth-compat",x6="@firebase/database",y6="@firebase/data-connect",v6="@firebase/database-compat",b6="@firebase/functions",_6="@firebase/functions-compat",T6="@firebase/installations",E6="@firebase/installations-compat",S6="@firebase/messaging",A6="@firebase/messaging-compat",w6="@firebase/performance",N6="@firebase/performance-compat",k6="@firebase/remote-config",C6="@firebase/remote-config-compat",I6="@firebase/storage",R6="@firebase/storage-compat",M6="@firebase/firestore",D6="@firebase/ai",P6="@firebase/firestore-compat",L6="firebase",U6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="[DEFAULT]",j6={[r0]:"fire-core",[u6]:"fire-core-compat",[h6]:"fire-analytics",[d6]:"fire-analytics-compat",[m6]:"fire-app-check",[f6]:"fire-app-check-compat",[p6]:"fire-auth",[g6]:"fire-auth-compat",[x6]:"fire-rtdb",[y6]:"fire-data-connect",[v6]:"fire-rtdb-compat",[b6]:"fire-fn",[_6]:"fire-fn-compat",[T6]:"fire-iid",[E6]:"fire-iid-compat",[S6]:"fire-fcm",[A6]:"fire-fcm-compat",[w6]:"fire-perf",[N6]:"fire-perf-compat",[k6]:"fire-rc",[C6]:"fire-rc-compat",[I6]:"fire-gcs",[R6]:"fire-gcs-compat",[M6]:"fire-fst",[P6]:"fire-fst-compat",[D6]:"fire-vertex","fire-js":"fire-js",[L6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,V6=new Map,o0=new Map;function xT(n,e){try{n.container.addComponent(e)}catch(t){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gl(n){const e=n.name;if(o0.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;o0.set(e,n);for(const t of yh.values())xT(t,n);for(const t of V6.values())xT(t,n);return!0}function F0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new iu("app","Firebase",O6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new so("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=U6;function lA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:a0,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw aa.create("bad-app-name",{appName:String(r)});if(t||(t=nA()),!t)throw aa.create("no-options");const o=yh.get(r);if(o){if(no(t,o.options)&&no(s,o.config))return o;throw aa.create("duplicate-app",{appName:r})}const u=new KP(r);for(const m of o0.values())u.addComponent(m);const h=new G6(t,s,u);return yh.set(r,h),h}function cA(n=a0){const e=yh.get(n);if(!e&&n===a0&&nA())return lA();if(!e)throw aa.create("no-app",{appName:n});return e}function oa(n,e,t){let s=j6[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const u=[`Unable to register library "${s}" with version "${e}":`];r&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(u.join(" "));return}gl(new so(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="firebase-heartbeat-database",H6=1,Yc="firebase-heartbeat-store";let Rp=null;function uA(){return Rp||(Rp=r6(B6,H6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yc)}catch(t){console.warn(t)}}}}).catch(n=>{throw aa.create("idb-open",{originalErrorMessage:n.message})})),Rp}async function z6(n){try{const t=(await uA()).transaction(Yc),s=await t.objectStore(Yc).get(dA(n));return await t.done,s}catch(e){if(e instanceof br)fr.warn(e.message);else{const t=aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(t.message)}}}async function yT(n,e){try{const s=(await uA()).transaction(Yc,"readwrite");await s.objectStore(Yc).put(e,dA(n)),await s.done}catch(t){if(t instanceof br)fr.warn(t.message);else{const s=aa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fr.warn(s.message)}}}function dA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=1024,q6=30;class K6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>q6){const u=J6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){fr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=vT(),{heartbeatsToSend:s,unsentEntries:r}=$6(this._heartbeatsCache.heartbeats),o=xh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return fr.warn(t),""}}}function vT(){return new Date().toISOString().substring(0,10)}function $6(n,e=F6){const t=[];let s=n.slice();for(const r of n){const o=t.find(u=>u.agent===r.agent);if(o){if(o.dates.push(r.date),bT(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),bT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Y6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PP()?LP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await z6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bT(n){return xh(JSON.stringify({version:2,heartbeats:n})).length}function J6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(n){gl(new so("platform-logger",e=>new l6(e),"PRIVATE")),gl(new so("heartbeat",e=>new K6(e),"PRIVATE")),oa(r0,gT,n),oa(r0,gT,"esm2020"),oa("fire-js","")}Q6("");var W6="firebase",X6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oa(W6,X6,"app");var _T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var la,hA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function R(){}R.prototype=P.prototype,M.F=P.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(O,U,B){for(var j=Array(arguments.length-2),le=2;le<arguments.length;le++)j[le-2]=arguments[le];return P.prototype[U].apply(O,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,P,R){R||(R=0);const O=Array(16);if(typeof P=="string")for(var U=0;U<16;++U)O[U]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(U=0;U<16;++U)O[U]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=M.g[0],R=M.g[1],U=M.g[2];let B=M.g[3],j;j=P+(B^R&(U^B))+O[0]+3614090360&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[1]+3905402710&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[2]+606105819&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[3]+3250441966&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(B^R&(U^B))+O[4]+4118548399&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[5]+1200080426&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[6]+2821735955&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[7]+4249261313&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(B^R&(U^B))+O[8]+1770035416&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[9]+2336552879&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[10]+4294925233&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[11]+2304563134&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(B^R&(U^B))+O[12]+1804603682&4294967295,P=R+(j<<7&4294967295|j>>>25),j=B+(U^P&(R^U))+O[13]+4254626195&4294967295,B=P+(j<<12&4294967295|j>>>20),j=U+(R^B&(P^R))+O[14]+2792965006&4294967295,U=B+(j<<17&4294967295|j>>>15),j=R+(P^U&(B^P))+O[15]+1236535329&4294967295,R=U+(j<<22&4294967295|j>>>10),j=P+(U^B&(R^U))+O[1]+4129170786&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[6]+3225465664&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[11]+643717713&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[0]+3921069994&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(U^B&(R^U))+O[5]+3593408605&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[10]+38016083&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[15]+3634488961&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[4]+3889429448&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(U^B&(R^U))+O[9]+568446438&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[14]+3275163606&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[3]+4107603335&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[8]+1163531501&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(U^B&(R^U))+O[13]+2850285829&4294967295,P=R+(j<<5&4294967295|j>>>27),j=B+(R^U&(P^R))+O[2]+4243563512&4294967295,B=P+(j<<9&4294967295|j>>>23),j=U+(P^R&(B^P))+O[7]+1735328473&4294967295,U=B+(j<<14&4294967295|j>>>18),j=R+(B^P&(U^B))+O[12]+2368359562&4294967295,R=U+(j<<20&4294967295|j>>>12),j=P+(R^U^B)+O[5]+4294588738&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[8]+2272392833&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[11]+1839030562&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[14]+4259657740&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(R^U^B)+O[1]+2763975236&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[4]+1272893353&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[7]+4139469664&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[10]+3200236656&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(R^U^B)+O[13]+681279174&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[0]+3936430074&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[3]+3572445317&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[6]+76029189&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(R^U^B)+O[9]+3654602809&4294967295,P=R+(j<<4&4294967295|j>>>28),j=B+(P^R^U)+O[12]+3873151461&4294967295,B=P+(j<<11&4294967295|j>>>21),j=U+(B^P^R)+O[15]+530742520&4294967295,U=B+(j<<16&4294967295|j>>>16),j=R+(U^B^P)+O[2]+3299628645&4294967295,R=U+(j<<23&4294967295|j>>>9),j=P+(U^(R|~B))+O[0]+4096336452&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[7]+1126891415&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[14]+2878612391&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[5]+4237533241&4294967295,R=U+(j<<21&4294967295|j>>>11),j=P+(U^(R|~B))+O[12]+1700485571&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[3]+2399980690&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[10]+4293915773&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[1]+2240044497&4294967295,R=U+(j<<21&4294967295|j>>>11),j=P+(U^(R|~B))+O[8]+1873313359&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[15]+4264355552&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[6]+2734768916&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[13]+1309151649&4294967295,R=U+(j<<21&4294967295|j>>>11),j=P+(U^(R|~B))+O[4]+4149444226&4294967295,P=R+(j<<6&4294967295|j>>>26),j=B+(R^(P|~U))+O[11]+3174756917&4294967295,B=P+(j<<10&4294967295|j>>>22),j=U+(P^(B|~R))+O[2]+718787259&4294967295,U=B+(j<<15&4294967295|j>>>17),j=R+(B^(U|~P))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(U+(j<<21&4294967295|j>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+B&4294967295}s.prototype.v=function(M,P){P===void 0&&(P=M.length);const R=P-this.blockSize,O=this.C;let U=this.h,B=0;for(;B<P;){if(U==0)for(;B<=R;)r(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<P;)if(O[U++]=M.charCodeAt(B++),U==this.blockSize){r(this,O),U=0;break}}else for(;B<P;)if(O[U++]=M[B++],U==this.blockSize){r(this,O),U=0;break}}this.h=U,this.o+=P},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;P=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=P&255,P/=256;for(this.v(M),M=Array(16),P=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)M[P++]=this.g[R]>>>O&255;return M};function o(M,P){var R=h;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=P(M)}function u(M,P){this.h=P;const R=[];let O=!0;for(let U=M.length-1;U>=0;U--){const B=M[U]|0;O&&B==P||(R[U]=B,O=!1)}this.g=R}var h={};function m(M){return-128<=M&&M<128?o(M,function(P){return new u([P|0],P<0?-1:0)}):new u([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return _;if(M<0)return I(p(-M));const P=[];let R=1;for(let O=0;M>=R;O++)P[O]=M/R|0,R*=4294967296;return new u(P,0)}function v(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return I(v(M.substring(1),P));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(P,8));let O=_;for(let B=0;B<M.length;B+=8){var U=Math.min(8,M.length-B);const j=parseInt(M.substring(B,B+U),P);U<8?(U=p(Math.pow(P,U)),O=O.j(U).add(p(j))):(O=O.j(R),O=O.add(p(j)))}return O}var _=m(0),T=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(D(this))return-I(this).m();let M=0,P=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);M+=(O>=0?O:4294967296+O)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(D(this))return"-"+I(this).toString(M);const P=p(Math.pow(M,6));var R=this;let O="";for(;;){const U=Y(R,P).g;R=V(R,U.j(P));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=U,k(R))return B+O;for(;B.length<6;)B="0"+B;O=B+O}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function D(M){return M.h==-1}n.l=function(M){return M=V(this,M),D(M)?-1:k(M)?0:1};function I(M){const P=M.g.length,R=[];for(let O=0;O<P;O++)R[O]=~M.g[O];return new u(R,~M.h).add(T)}n.abs=function(){return D(this)?I(this):this},n.add=function(M){const P=Math.max(this.g.length,M.g.length),R=[];let O=0;for(let U=0;U<=P;U++){let B=O+(this.i(U)&65535)+(M.i(U)&65535),j=(B>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);O=j>>>16,B&=65535,j&=65535,R[U]=j<<16|B}return new u(R,R[R.length-1]&-2147483648?-1:0)};function V(M,P){return M.add(I(P))}n.j=function(M){if(k(this)||k(M))return _;if(D(this))return D(M)?I(this).j(I(M)):I(I(this).j(M));if(D(M))return I(this.j(I(M)));if(this.l(A)<0&&M.l(A)<0)return p(this.m()*M.m());const P=this.g.length+M.g.length,R=[];for(var O=0;O<2*P;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let U=0;U<M.g.length;U++){const B=this.i(O)>>>16,j=this.i(O)&65535,le=M.i(U)>>>16,ke=M.i(U)&65535;R[2*O+2*U]+=j*ke,N(R,2*O+2*U),R[2*O+2*U+1]+=B*ke,N(R,2*O+2*U+1),R[2*O+2*U+1]+=j*le,N(R,2*O+2*U+1),R[2*O+2*U+2]+=B*le,N(R,2*O+2*U+2)}for(M=0;M<P;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=P;M<2*P;M++)R[M]=0;return new u(R,0)};function N(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function G(M,P){this.g=M,this.h=P}function Y(M,P){if(k(P))throw Error("division by zero");if(k(M))return new G(_,_);if(D(M))return P=Y(I(M),P),new G(I(P.g),I(P.h));if(D(P))return P=Y(M,I(P)),new G(I(P.g),P.h);if(M.g.length>30){if(D(M)||D(P))throw Error("slowDivide_ only works with positive integers.");for(var R=T,O=P;O.l(M)<=0;)R=ne(R),O=ne(O);var U=Q(R,1),B=Q(O,1);for(O=Q(O,2),R=Q(R,2);!k(O);){var j=B.add(O);j.l(M)<=0&&(U=U.add(R),B=j),O=Q(O,1),R=Q(R,1)}return P=V(M,U.j(P)),new G(U,P)}for(U=_;M.l(P)>=0;){for(R=Math.max(1,Math.floor(M.m()/P.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),B=p(R),j=B.j(P);D(j)||j.l(M)>0;)R-=O,B=p(R),j=B.j(P);k(B)&&(B=T),U=U.add(B),M=V(M,j)}return new G(U,M)}n.B=function(M){return Y(this,M).h},n.and=function(M){const P=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<P;O++)R[O]=this.i(O)&M.i(O);return new u(R,this.h&M.h)},n.or=function(M){const P=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<P;O++)R[O]=this.i(O)|M.i(O);return new u(R,this.h|M.h)},n.xor=function(M){const P=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<P;O++)R[O]=this.i(O)^M.i(O);return new u(R,this.h^M.h)};function ne(M){const P=M.g.length+1,R=[];for(let O=0;O<P;O++)R[O]=M.i(O)<<1|M.i(O-1)>>>31;return new u(R,M.h)}function Q(M,P){const R=P>>5;P%=32;const O=M.g.length-R,U=[];for(let B=0;B<O;B++)U[B]=P>0?M.i(B+R)>>>P|M.i(B+R+1)<<32-P:M.i(B+R);return new u(U,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,hA=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=v,la=u}).apply(typeof _T<"u"?_T:typeof self<"u"?self:typeof window<"u"?window:{});var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fA,jc,mA,Xd,l0,pA,gA,xA;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bd=="object"&&Bd];for(var E=0;E<x.length;++E){var w=x[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function r(x,E){if(E)e:{var w=s;x=x.split(".");for(var L=0;L<x.length-1;L++){var W=x[L];if(!(W in w))break e;w=w[W]}x=x[x.length-1],L=w[x],E=E(L),E!=L&&E!=null&&e(w,x,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(x){return x||function(E){var w=[],L;for(L in E)Object.prototype.hasOwnProperty.call(E,L)&&w.push([L,E[L]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function h(x){var E=typeof x;return E=="object"&&x!=null||E=="function"}function m(x,E,w){return x.call.apply(x.bind,arguments)}function p(x,E,w){return p=m,p.apply(null,arguments)}function v(x,E){var w=Array.prototype.slice.call(arguments,1);return function(){var L=w.slice();return L.push.apply(L,arguments),x.apply(this,L)}}function _(x,E){function w(){}w.prototype=E.prototype,x.Z=E.prototype,x.prototype=new w,x.prototype.constructor=x,x.Ob=function(L,W,re){for(var ve=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ve[Xe-2]=arguments[Xe];return E.prototype[W].apply(L,ve)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function A(x){const E=x.length;if(E>0){const w=Array(E);for(let L=0;L<E;L++)w[L]=x[L];return w}return[]}function k(x,E){for(let L=1;L<arguments.length;L++){const W=arguments[L];var w=typeof W;if(w=w!="object"?w:W?Array.isArray(W)?"array":w:"null",w=="array"||w=="object"&&typeof W.length=="number"){w=x.length||0;const re=W.length||0;x.length=w+re;for(let ve=0;ve<re;ve++)x[w+ve]=W[ve]}else x.push(W)}}class D{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function I(x){u.setTimeout(()=>{throw x},0)}function V(){var x=M;let E=null;return x.g&&(E=x.g,x.g=x.g.next,x.g||(x.h=null),E.next=null),E}class N{constructor(){this.h=this.g=null}add(E,w){const L=G.get();L.set(E,w),this.h?this.h.next=L:this.g=L,this.h=L}}var G=new D(()=>new Y,x=>x.reset());class Y{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Q=!1,M=new N,P=()=>{const x=Promise.resolve(void 0);ne=()=>{x.then(R)}};function R(){for(var x;x=V();){try{x.h.call(x.g)}catch(w){I(w)}var E=G;E.j(x),E.h<100&&(E.h++,x.next=E.g,E.g=x)}Q=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(x,E){this.type=x,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,E=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const w=()=>{};u.addEventListener("test",w,E),u.removeEventListener("test",w,E)}catch{}return x})();function j(x){return/^[\s\xa0]*$/.test(x)}function le(x,E){U.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,E)}_(le,U),le.prototype.init=function(x,E){const w=this.type=x.type,L=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=E,E=x.relatedTarget,E||(w=="mouseover"?E=x.fromElement:w=="mouseout"&&(E=x.toElement)),this.relatedTarget=E,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),J=0;function he(x,E,w,L,W){this.listener=x,this.proxy=null,this.src=E,this.type=w,this.capture=!!L,this.ha=W,this.key=++J,this.da=this.fa=!1}function Te(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Me(x,E,w){for(const L in x)E.call(w,x[L],L,x)}function be(x,E){for(const w in x)E.call(void 0,x[w],w,x)}function H(x){const E={};for(const w in x)E[w]=x[w];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(x,E){let w,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(w in L)x[w]=L[w];for(let re=0;re<ee.length;re++)w=ee[re],Object.prototype.hasOwnProperty.call(L,w)&&(x[w]=L[w])}}function ie(x){this.src=x,this.g={},this.h=0}ie.prototype.add=function(x,E,w,L,W){const re=x.toString();x=this.g[re],x||(x=this.g[re]=[],this.h++);const ve=ge(x,E,L,W);return ve>-1?(E=x[ve],w||(E.fa=!1)):(E=new he(E,this.src,re,!!L,W),E.fa=w,x.push(E)),E};function se(x,E){const w=E.type;if(w in x.g){var L=x.g[w],W=Array.prototype.indexOf.call(L,E,void 0),re;(re=W>=0)&&Array.prototype.splice.call(L,W,1),re&&(Te(E),x.g[w].length==0&&(delete x.g[w],x.h--))}}function ge(x,E,w,L){for(let W=0;W<x.length;++W){const re=x[W];if(!re.da&&re.listener==E&&re.capture==!!w&&re.ha==L)return W}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),Pe={};function Ge(x,E,w,L,W){if(Array.isArray(E)){for(let re=0;re<E.length;re++)Ge(x,E[re],w,L,W);return null}return w=Ie(w),x&&x[ke]?x.J(E,w,h(L)?!!L.capture:!1,W):et(x,E,w,!1,L,W)}function et(x,E,w,L,W,re){if(!E)throw Error("Invalid event type");const ve=h(W)?!!W.capture:!!W;let Xe=Ft(x);if(Xe||(x[Ne]=Xe=new ie(x)),w=Xe.add(E,w,L,ve,re),w.proxy)return w;if(L=zt(),w.proxy=L,L.src=x,L.listener=w,x.addEventListener)B||(W=ve),W===void 0&&(W=!1),x.addEventListener(E.toString(),L,W);else if(x.attachEvent)x.attachEvent(st(E.toString()),L);else if(x.addListener&&x.removeListener)x.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return w}function zt(){function x(w){return E.call(x.src,x.listener,w)}const E=$t;return x}function ft(x,E,w,L,W){if(Array.isArray(E))for(var re=0;re<E.length;re++)ft(x,E[re],w,L,W);else L=h(L)?!!L.capture:!!L,w=Ie(w),x&&x[ke]?(x=x.i,re=String(E).toString(),re in x.g&&(E=x.g[re],w=ge(E,w,L,W),w>-1&&(Te(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete x.g[re],x.h--)))):x&&(x=Ft(x))&&(E=x.g[E.toString()],x=-1,E&&(x=ge(E,w,L,W)),(w=x>-1?E[x]:null)&&Ke(w))}function Ke(x){if(typeof x!="number"&&x&&!x.da){var E=x.src;if(E&&E[ke])se(E.i,x);else{var w=x.type,L=x.proxy;E.removeEventListener?E.removeEventListener(w,L,x.capture):E.detachEvent?E.detachEvent(st(w),L):E.addListener&&E.removeListener&&E.removeListener(L),(w=Ft(E))?(se(w,x),w.h==0&&(w.src=null,E[Ne]=null)):Te(x)}}}function st(x){return x in Pe?Pe[x]:Pe[x]="on"+x}function $t(x,E){if(x.da)x=!0;else{E=new le(E,this);const w=x.listener,L=x.ha||x.src;x.fa&&Ke(x),x=w.call(L,E)}return x}function Ft(x){return x=x[Ne],x instanceof ie?x:null}var gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ie(x){return typeof x=="function"?x:(x[gn]||(x[gn]=function(E){return x.handleEvent(E)}),x[gn])}function _e(){O.call(this),this.i=new ie(this),this.M=this,this.G=null}_(_e,O),_e.prototype[ke]=!0,_e.prototype.removeEventListener=function(x,E,w,L){ft(this,x,E,w,L)};function Le(x,E){var w,L=x.G;if(L)for(w=[];L;L=L.G)w.push(L);if(x=x.M,L=E.type||E,typeof E=="string")E=new U(E,x);else if(E instanceof U)E.target=E.target||x;else{var W=E;E=new U(L,x),pe(E,W)}W=!0;let re,ve;if(w)for(ve=w.length-1;ve>=0;ve--)re=E.g=w[ve],W=pt(re,L,!0,E)&&W;if(re=E.g=x,W=pt(re,L,!0,E)&&W,W=pt(re,L,!1,E)&&W,w)for(ve=0;ve<w.length;ve++)re=E.g=w[ve],W=pt(re,L,!1,E)&&W}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var x=this.i;for(const E in x.g){const w=x.g[E];for(let L=0;L<w.length;L++)Te(w[L]);delete x.g[E],x.h--}}this.G=null},_e.prototype.J=function(x,E,w,L){return this.i.add(String(x),E,!1,w,L)},_e.prototype.K=function(x,E,w,L){return this.i.add(String(x),E,!0,w,L)};function pt(x,E,w,L){if(E=x.i.g[String(E)],!E)return!0;E=E.concat();let W=!0;for(let re=0;re<E.length;++re){const ve=E[re];if(ve&&!ve.da&&ve.capture==w){const Xe=ve.listener,sn=ve.ha||ve.src;ve.fa&&se(x.i,ve),W=Xe.call(sn,L)!==!1&&W}}return W&&!L.defaultPrevented}function tn(x,E){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=p(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(x,E||0)}function Ut(x){x.g=tn(()=>{x.g=null,x.i&&(x.i=!1,Ut(x))},x.l);const E=x.h;x.h=null,x.m.apply(null,E)}class Ct extends O{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Ut(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(x){O.call(this),this.h=x,this.g={}}_(Kn,O);var ns=[];function Yt(x){Me(x.g,function(E,w){this.g.hasOwnProperty(w)&&Ke(E)},x),x.g={}}Kn.prototype.N=function(){Kn.Z.N.call(this),Yt(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=u.JSON.stringify,Ui=u.JSON.parse,po=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function Ta(){}function Yn(){}var nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xn(){U.call(this,"d")}_(xn,U);function ss(){U.call(this,"c")}_(ss,U);var Vt={},Ea=null;function nt(){return Ea=Ea||new _e}Vt.Ia="serverreachability";function Sa(x){U.call(this,Vt.Ia,x)}_(Sa,U);function jn(x){const E=nt();Le(E,new Sa(E))}Vt.STAT_EVENT="statevent";function mi(x,E){U.call(this,Vt.STAT_EVENT,x),this.stat=E}_(mi,U);function Xt(x){const E=nt();Le(E,new mi(E,x))}Vt.Ja="timingevent";function Cs(x,E){U.call(this,Vt.Ja,x),this.size=E}_(Cs,U);function Is(x,E){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},E)}function is(){this.g=!0}is.prototype.ua=function(){this.g=!1};function Vl(x,E,w,L,W,re){x.info(function(){if(x.g)if(re){var ve="",Xe=re.split("&");for(let _t=0;_t<Xe.length;_t++){var sn=Xe[_t].split("=");if(sn.length>1){const qt=sn[0];sn=sn[1];const Us=qt.split("_");ve=Us.length>=2&&Us[1]=="type"?ve+(qt+"="+sn+"&"):ve+(qt+"=redacted&")}}}else ve=null;else ve=re;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+E+`
`+w+`
`+ve})}function go(x,E,w,L,W,re,ve){x.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+E+`
`+w+`
`+re+" "+ve})}function Rs(x,E,w,L){x.info(function(){return"XMLHTTP TEXT ("+E+"): "+Ol(x,w)+(L?" "+L:"")})}function ji(x,E){x.info(function(){return"TIMEOUT: "+E})}is.prototype.info=function(){};function Ol(x,E){if(!x.g)return E;if(!E)return null;try{const re=JSON.parse(E);if(re){for(x=0;x<re.length;x++)if(Array.isArray(re[x])){var w=re[x];if(!(w.length<2)){var L=w[1];if(Array.isArray(L)&&!(L.length<1)){var W=L[0];if(W!="noop"&&W!="stop"&&W!="close")for(let ve=1;ve<L.length;ve++)L[ve]=""}}}}return $n(re)}catch{return E}}var Vi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Aa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_r;function Oi(){}_(Oi,Ta),Oi.prototype.g=function(){return new XMLHttpRequest},_r=new Oi;function Qs(x){return encodeURIComponent(String(x))}function xo(x){var E=1;x=x.split(":");const w=[];for(;E>0&&x.length;)w.push(x.shift()),E--;return x.length&&w.push(x.join(":")),w}function ps(x,E,w,L){this.j=x,this.i=E,this.l=w,this.S=L||1,this.V=new Kn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gs}function gs(){this.i=null,this.g="",this.h=!1}var Jt={},Ot={};function xs(x,E,w){x.M=1,x.A=as(At(E)),x.u=w,x.R=!0,Gi(x,null)}function Gi(x,E){x.F=Date.now(),Ms(x),x.B=At(x.A);var w=x.B,L=x.S;Array.isArray(L)||(L=[String(L)]),bo(w.i,"t",L),x.C=0,w=x.j.L,x.h=new gs,x.g=Cu(x.j,w?E:null,!x.u),x.P>0&&(x.O=new Ct(p(x.Y,x,x.g),x.P)),E=x.V,w=x.g,L=x.ba;var W="readystatechange";Array.isArray(W)||(W&&(ns[0]=W.toString()),W=ns);for(let re=0;re<W.length;re++){const ve=Ge(w,W[re],L||E.handleEvent,!1,E.h||E);if(!ve)break;E.g[ve.key]=ve}E=x.J?H(x.J):{},x.u?(x.v||(x.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,E)):(x.v="GET",x.g.ea(x.B,x.v,null,E)),jn(),Vl(x.i,x.v,x.B,x.l,x.S,x.u)}ps.prototype.ba=function(x){x=x.target;const E=this.O;E&&Zs(x)==3?E.j():this.Y(x)},ps.prototype.Y=function(x){try{if(x==this.g)e:{const Xe=Zs(this.g),sn=this.g.ya(),_t=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||Xe!=4||sn==7||(sn==8||_t<=0?jn(3):jn(2)),Ds(this);var E=this.g.ca();this.X=E;var w=Gl(this);if(this.o=E==200,go(this.i,this.v,this.B,this.l,this.S,Xe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var L,W=this.g;if((L=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(L)){var re=L;break t}}re=null}if(x=re)Rs(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xe(this,x);else{this.o=!1,this.m=3,Xt(12),K(this),Jn(this);break e}}if(this.R){x=!0;let qt;for(;!this.K&&this.C<w.length;)if(qt=vo(this,w),qt==Ot){Xe==4&&(this.m=4,Xt(14),x=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Jt){this.m=4,Xt(15),Rs(this.i,this.l,w,"[Invalid Chunk]"),x=!1;break}else Rs(this.i,this.l,qt,null),xe(this,qt);if(yo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||w.length!=0||this.h.h||(this.m=1,Xt(16),x=!1),this.o=this.o&&x,!x)Rs(this.i,this.l,w,"[Invalid Chunked Response]"),K(this),Jn(this);else if(w.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Jl(ve),ve.P=!0,Xt(11))}}else Rs(this.i,this.l,w,null),xe(this,w);Xe==4&&K(this),this.o&&!this.K&&(Xe==4?Au(this.j,this):(this.o=!1,Ms(this)))}else Hi(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),K(this),Jn(this)}}}catch{}finally{}};function Gl(x){if(!yo(x))return x.g.la();const E=Nn(x.g);if(E==="")return"";let w="";const L=E.length,W=Zs(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return K(x),Jn(x),"";x.h.i=new u.TextDecoder}for(let re=0;re<L;re++)x.h.h=!0,w+=x.h.i.decode(E[re],{stream:!(W&&re==L-1)});return E.length=0,x.h.g+=w,x.C=0,x.h.g}function yo(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function vo(x,E){var w=x.C,L=E.indexOf(`
`,w);return L==-1?Ot:(w=Number(E.substring(w,L)),isNaN(w)?Jt:(L+=1,L+w>E.length?Ot:(E=E.slice(L,L+w),x.C=L+w,E)))}ps.prototype.cancel=function(){this.K=!0,K(this)};function Ms(x){x.T=Date.now()+x.H,Tr(x,x.H)}function Tr(x,E){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Is(p(x.aa,x),E)}function Ds(x){x.D&&(u.clearTimeout(x.D),x.D=null)}ps.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(ji(this.i,this.B),this.M!=2&&(jn(),Xt(17)),K(this),this.m=2,Jn(this)):Tr(this,this.T-x)};function Jn(x){x.j.I==0||x.K||Au(x.j,x)}function K(x){Ds(x);var E=x.O;E&&typeof E.dispose=="function"&&E.dispose(),x.O=null,Yt(x.V),x.g&&(E=x.g,x.g=null,E.abort(),E.dispose())}function xe(x,E){try{var w=x.j;if(w.I!=0&&(w.g==x||Ue(w.h,x))){if(!x.L&&Ue(w.h,x)&&w.I==3){try{var L=w.Ba.g.parse(E)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<x.F)Ao(w),Ir(w);else break e;Ra(w),Xt(18)}}else w.xa=W[1],0<w.xa-w.K&&W[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Is(p(w.Va,w),6e3));it(w.h)<=1&&w.ta&&(w.ta=void 0)}else vi(w,11)}else if((x.L||w.g==x)&&Ao(w),!j(E))for(W=w.Ba.g.parse(E),E=0;E<W.length;E++){let _t=W[E];const qt=_t[0];if(!(qt<=w.K))if(w.K=qt,_t=_t[1],w.I==2)if(_t[0]=="c"){w.M=_t[1],w.ba=_t[2];const Us=_t[3];Us!=null&&(w.ka=Us,w.j.info("VER="+w.ka));const bi=_t[4];bi!=null&&(w.za=bi,w.j.info("SVER="+w.za));const ei=_t[5];ei!=null&&typeof ei=="number"&&ei>0&&(L=1.5*ei,w.O=L,w.j.info("backChannelRequestTimeoutMs_="+L)),L=w;const ti=x.g;if(ti){const Ma=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var re=L.h;re.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(We(re,re.h),re.h=null))}if(L.G){const wo=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;wo&&(L.wa=wo,ot(L.J,L.G,wo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-x.F,w.j.info("Handshake RTT: "+w.T+"ms")),L=w;var ve=x;if(L.na=ku(L,L.L?L.ba:null,L.W),ve.L){St(L.h,ve);var Xe=ve,sn=L.O;sn&&(Xe.H=sn),Xe.D&&(Ds(Xe),Ms(Xe)),L.g=ve}else Eu(L);w.i.length>0&&yi(w)}else _t[0]!="stop"&&_t[0]!="close"||vi(w,7);else w.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?vi(w,7):$l(w):_t[0]!="noop"&&w.l&&w.l.qa(_t),w.A=0)}}jn(4)}catch{}}var Ee=class{constructor(x,E){this.g=x,this.map=E}};function Be(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oe(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function it(x){return x.h?1:x.g?x.g.size:0}function Ue(x,E){return x.h?x.h==E:x.g?x.g.has(E):!1}function We(x,E){x.g?x.g.add(E):x.h=E}function St(x,E){x.h&&x.h==E?x.h=null:x.g&&x.g.has(E)&&x.g.delete(E)}Be.prototype.cancel=function(){if(this.i=bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function bt(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let E=x.i;for(const w of x.g.values())E=E.concat(w.G);return E}return A(x.i)}var yn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sn(x,E){if(x){x=x.split("&");for(let w=0;w<x.length;w++){const L=x[w].indexOf("=");let W,re=null;L>=0?(W=x[w].substring(0,L),re=x[w].substring(L+1)):W=x[w],E(W,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Qt(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;x instanceof Qt?(this.l=x.l,Pt(this,x.j),this.o=x.o,this.g=x.g,An(this,x.u),this.h=x.h,rs(this,_u(x.i)),this.m=x.m):x&&(E=String(x).match(yn))?(this.l=!1,Pt(this,E[1]||"",!0),this.o=Vn(E[2]||""),this.g=Vn(E[3]||"",!0),An(this,E[4]),this.h=Vn(E[5]||"",!0),rs(this,E[6]||"",!0),this.m=Vn(E[7]||"")):(this.l=!1,this.i=new Ar(null,this.l))}Qt.prototype.toString=function(){const x=[];var E=this.j;E&&x.push(ys(E,Er,!0),":");var w=this.g;return(w||E=="file")&&(x.push("//"),(E=this.o)&&x.push(ys(E,Er,!0),"@"),x.push(Qs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&x.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&x.push("/"),x.push(ys(w,w.charAt(0)=="/"?Bl:yu,!0))),(w=this.i.toString())&&x.push("?",w),(w=this.m)&&x.push("#",ys(w,vu)),x.join("")},Qt.prototype.resolve=function(x){const E=At(this);let w=!!x.j;w?Pt(E,x.j):w=!!x.o,w?E.o=x.o:w=!!x.g,w?E.g=x.g:w=x.u!=null;var L=x.h;if(w)An(E,x.u);else if(w=!!x.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var W=E.h.lastIndexOf("/");W!=-1&&(L=E.h.slice(0,W+1)+L)}if(W=L,W==".."||W==".")L="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){L=W.lastIndexOf("/",0)==0,W=W.split("/");const re=[];for(let ve=0;ve<W.length;){const Xe=W[ve++];Xe=="."?L&&ve==W.length&&re.push(""):Xe==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),L&&ve==W.length&&re.push("")):(re.push(Xe),L=!0)}L=re.join("/")}else L=W}return w?E.h=L:w=x.i.toString()!=="",w?rs(E,_u(x.i)):w=!!x.m,w&&(E.m=x.m),E};function At(x){return new Qt(x)}function Pt(x,E,w){x.j=w?Vn(E,!0):E,x.j&&(x.j=x.j.replace(/:$/,""))}function An(x,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);x.u=E}else x.u=null}function rs(x,E,w){E instanceof Ar?(x.i=E,_o(x.i,x.l)):(w||(E=ys(E,Sr)),x.i=new Ar(E,x.l))}function ot(x,E,w){x.i.set(E,w)}function as(x){return ot(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Vn(x,E){return x?E?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function ys(x,E,w){return typeof x=="string"?(x=encodeURI(x).replace(E,wn),w&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function wn(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Er=/[#\/\?@]/g,yu=/[#\?:]/g,Bl=/[#\?]/g,Sr=/[#\?@]/g,vu=/#/g;function Ar(x,E){this.h=this.g=null,this.i=x||null,this.j=!!E}function os(x){x.g||(x.g=new Map,x.h=0,x.i&&Sn(x.i,function(E,w){x.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=Ar.prototype,n.add=function(x,E){os(this),this.i=null,x=wr(this,x);let w=this.g.get(x);return w||this.g.set(x,w=[]),w.push(E),this.h+=1,this};function bu(x,E){os(x),E=wr(x,E),x.g.has(E)&&(x.i=null,x.h-=x.g.get(E).length,x.g.delete(E))}function Hl(x,E){return os(x),E=wr(x,E),x.g.has(E)}n.forEach=function(x,E){os(this),this.g.forEach(function(w,L){w.forEach(function(W){x.call(E,W,L,this)},this)},this)};function zl(x,E){os(x);let w=[];if(typeof E=="string")Hl(x,E)&&(w=w.concat(x.g.get(wr(x,E))));else for(x=Array.from(x.g.values()),E=0;E<x.length;E++)w=w.concat(x[E]);return w}n.set=function(x,E){return os(this),this.i=null,x=wr(this,x),Hl(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[E]),this.h+=1,this},n.get=function(x,E){return x?(x=zl(this,x),x.length>0?String(x[0]):E):E};function bo(x,E,w){bu(x,E),w.length>0&&(x.i=null,x.g.set(wr(x,E),A(w)),x.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],E=Array.from(this.g.keys());for(let L=0;L<E.length;L++){var w=E[L];const W=Qs(w);w=zl(this,w);for(let re=0;re<w.length;re++){let ve=W;w[re]!==""&&(ve+="="+Qs(w[re])),x.push(ve)}}return this.i=x.join("&")};function _u(x){const E=new Ar;return E.i=x.i,x.g&&(E.g=new Map(x.g),E.h=x.h),E}function wr(x,E){return E=String(E),x.j&&(E=E.toLowerCase()),E}function _o(x,E){E&&!x.j&&(os(x),x.i=null,x.g.forEach(function(w,L){const W=L.toLowerCase();L!=W&&(bu(this,L),bo(this,W,w))},x)),x.j=E}function Ws(x,E){const w=new is;if(u.Image){const L=new Image;L.onload=v(Ps,w,"TestLoadImage: loaded",!0,E,L),L.onerror=v(Ps,w,"TestLoadImage: error",!1,E,L),L.onabort=v(Ps,w,"TestLoadImage: abort",!1,E,L),L.ontimeout=v(Ps,w,"TestLoadImage: timeout",!1,E,L),u.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=x}else E(!1)}function Fl(x,E){const w=new is,L=new AbortController,W=setTimeout(()=>{L.abort(),Ps(w,"TestPingServer: timeout",!1,E)},1e4);fetch(x,{signal:L.signal}).then(re=>{clearTimeout(W),re.ok?Ps(w,"TestPingServer: ok",!0,E):Ps(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(W),Ps(w,"TestPingServer: error",!1,E)})}function Ps(x,E,w,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(w)}catch{}}function Nr(){this.g=new po}function pi(x){this.i=x.Sb||null,this.h=x.ab||!1}_(pi,Ta),pi.prototype.g=function(){return new wa(this.i,this.h)};function wa(x,E){_e.call(this),this.H=x,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(wa,_e),n=wa.prototype,n.open=function(x,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=E,this.readyState=1,Xs(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(E.body=x),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;To(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function To(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var E=x.value?x.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!x.done}))&&(this.response=this.responseText+=E)}x.done?kr(this):Xs(this),this.readyState==3&&To(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,kr(this))},n.Na=function(x){this.g&&(this.response=x,kr(this))},n.ga=function(){this.g&&kr(this)};function kr(x){x.readyState=4,x.l=null,x.j=null,x.B=null,Xs(x)}n.setRequestHeader=function(x,E){this.A.append(x,E)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,x.push(w[0]+": "+w[1]),w=E.next();return x.join(`\r
`)};function Xs(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Ls(x){let E="";return Me(x,function(w,L){E+=L,E+=":",E+=w,E+=`\r
`}),E}function Na(x,E,w){e:{for(L in w){var L=!1;break e}L=!0}L||(w=Ls(w),typeof x=="string"?w!=null&&Qs(w):ot(x,E,w))}function It(x){_e.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(It,_e);var gi=/^https?$/i,ql=["POST","PUT"];n=It.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,E,w,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);E=E?E.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_r.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(x),!0),this.B=!1}catch(re){ka(this,re);return}if(x=w||"",w=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)w.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const re of L.keys())w.set(re,L.get(re));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(w.keys()).find(re=>re.toLowerCase()=="content-type"),W=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(ql,E,void 0)>=0)||L||W||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ve]of w)this.g.setRequestHeader(re,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(re){ka(this,re)}};function ka(x,E){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=E,x.o=5,Kl(x),Bi(x)}function Kl(x){x.A||(x.A=!0,Le(x,"complete"),Le(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Le(this,"complete"),Le(this,"abort"),Bi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),It.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ca(this):this.Xa())},n.Xa=function(){Ca(this)};function Ca(x){if(x.h&&typeof o<"u"){if(x.v&&Zs(x)==4)setTimeout(x.Ca.bind(x),0);else if(Le(x,"readystatechange"),Zs(x)==4){x.h=!1;try{const re=x.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var L;if(L=re===0){let ve=String(x.D).match(yn)[1]||null;!ve&&u.self&&u.self.location&&(ve=u.self.location.protocol.slice(0,-1)),L=!gi.test(ve?ve.toLowerCase():"")}w=L}if(w)Le(x,"complete"),Le(x,"success");else{x.o=6;try{var W=Zs(x)>2?x.g.statusText:""}catch{W=""}x.l=W+" ["+x.ca()+"]",Kl(x)}}finally{Bi(x)}}}}function Bi(x,E){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const w=x.g;x.g=null,E||Le(x,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zs(x){return x.g?x.g.readyState:0}n.ca=function(){try{return Zs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var E=this.g.responseText;return x&&E.indexOf(x)==0&&(E=E.substring(x.length)),Ui(E)}};function Nn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(x){const E={};x=(x.g&&Zs(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<x.length;L++){if(j(x[L]))continue;var w=xo(x[L]);const W=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const re=E[W]||[];E[W]=re,re.push(w)}be(E,function(L){return L.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(x,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[x]||E}function Cr(x){this.za=0,this.i=[],this.j=new is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,x),this.Za=xi("retryDelaySeedMs",1e4,x),this.Ta=xi("forwardChannelMaxRetries",2,x),this.va=xi("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Be(x&&x.concurrentRequestLimit),this.Ba=new Nr,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Cr.prototype,n.ka=8,n.I=1,n.connect=function(x,E,w,L){Xt(0),this.W=x,this.H=E||{},w&&L!==void 0&&(this.H.OSID=w,this.H.OAID=L),this.F=this.X,this.J=ku(this,null,this.W),yi(this)};function $l(x){if(Eo(x),x.I==3){var E=x.V++,w=At(x.J);if(ot(w,"SID",x.M),ot(w,"RID",E),ot(w,"TYPE","terminate"),Ia(x,w),E=new ps(x,x.j,E),E.M=2,E.A=as(At(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=E.A,w=!0),w||(E.g=Cu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ms(E)}Nu(x)}function Ir(x){x.g&&(Jl(x),x.g.cancel(),x.g=null)}function Eo(x){Ir(x),x.v&&(u.clearTimeout(x.v),x.v=null),Ao(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function yi(x){if(!Oe(x.h)&&!x.m){x.m=!0;var E=x.Ea;ne||P(),Q||(ne(),Q=!0),M.add(E,x),x.D=0}}function So(x,E){return it(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=E.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Is(p(x.Ea,x,E),wu(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const W=new ps(this,this.j,x);let re=this.o;if(this.U&&(re?(re=H(re),pe(re,this.U)):re=this.U),this.u!==null||this.R||(W.J=re,re=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var L=this.i[w];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(E+=L,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=Tu(this,W,E),w=At(this.J),ot(w,"RID",x),ot(w,"CVER",22),this.G&&ot(w,"X-HTTP-Session-Id",this.G),Ia(this,w),re&&(this.R?E="headers="+Qs(Ls(re))+"&"+E:this.u&&Na(w,this.u,re)),We(this.h,W),this.Ra&&ot(w,"TYPE","init"),this.S?(ot(w,"$req",E),ot(w,"SID","null"),W.U=!0,xs(W,w,null)):xs(W,w,E),this.I=2}}else this.I==3&&(x?Yl(this,x):this.i.length==0||Oe(this.h)||Yl(this))};function Yl(x,E){var w;E?w=E.l:w=x.V++;const L=At(x.J);ot(L,"SID",x.M),ot(L,"RID",w),ot(L,"AID",x.K),Ia(x,L),x.u&&x.o&&Na(L,x.u,x.o),w=new ps(x,x.j,w,x.D+1),x.u===null&&(w.J=x.o),E&&(x.i=E.G.concat(x.i)),E=Tu(x,w,1e3),w.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),We(x.h,w),xs(w,L,E)}function Ia(x,E){x.H&&Me(x.H,function(w,L){ot(E,L,w)}),x.l&&Me({},function(w,L){ot(E,L,w)})}function Tu(x,E,w){w=Math.min(x.i.length,w);const L=x.l?p(x.l.Ka,x.l,x):null;e:{var W=x.i;let Xe=-1;for(;;){const sn=["count="+w];Xe==-1?w>0?(Xe=W[0].g,sn.push("ofs="+Xe)):Xe=0:sn.push("ofs="+Xe);let _t=!0;for(let qt=0;qt<w;qt++){var re=W[qt].g;const Us=W[qt].map;if(re-=Xe,re<0)Xe=Math.max(0,W[qt].g-100),_t=!1;else try{re="req"+re+"_"||"";try{var ve=Us instanceof Map?Us:Object.entries(Us);for(const[bi,ei]of ve){let ti=ei;h(ei)&&(ti=$n(ei)),sn.push(re+bi+"="+encodeURIComponent(ti))}}catch(bi){throw sn.push(re+"type="+encodeURIComponent("_badmap")),bi}}catch{L&&L(Us)}}if(_t){ve=sn.join("&");break e}}ve=void 0}return x=x.i.splice(0,w),E.G=x,ve}function Eu(x){if(!x.g&&!x.v){x.Y=1;var E=x.Da;ne||P(),Q||(ne(),Q=!0),M.add(E,x),x.A=0}}function Ra(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Is(p(x.Da,x),wu(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Is(p(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),Ir(this),Su(this))};function Jl(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function Su(x){x.g=new ps(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var E=At(x.na);ot(E,"RID","rpc"),ot(E,"SID",x.M),ot(E,"AID",x.K),ot(E,"CI",x.F?"0":"1"),!x.F&&x.ia&&ot(E,"TO",x.ia),ot(E,"TYPE","xmlhttp"),Ia(x,E),x.u&&x.o&&Na(E,x.u,x.o),x.O&&(x.g.H=x.O);var w=x.g;x=x.ba,w.M=1,w.A=as(At(E)),w.u=null,w.R=!0,Gi(w,x)}n.Va=function(){this.C!=null&&(this.C=null,Ir(this),Ra(this),Xt(19))};function Ao(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function Au(x,E){var w=null;if(x.g==E){Ao(x),Jl(x),x.g=null;var L=2}else if(Ue(x.h,E))w=E.G,St(x.h,E),L=1;else return;if(x.I!=0){if(E.o)if(L==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var W=x.D;L=nt(),Le(L,new Cs(L,w)),yi(x)}else Eu(x);else if(W=E.m,W==3||W==0&&E.X>0||!(L==1&&So(x,E)||L==2&&Ra(x)))switch(w&&w.length>0&&(E=x.h,E.i=E.i.concat(w)),W){case 1:vi(x,5);break;case 4:vi(x,10);break;case 3:vi(x,6);break;default:vi(x,2)}}}function wu(x,E){let w=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(w*=2),w*E}function vi(x,E){if(x.j.info("Error code "+E),E==2){var w=p(x.bb,x),L=x.Ua;const W=!L;L=new Qt(L||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Pt(L,"https"),as(L),W?Ws(L.toString(),w):Fl(L.toString(),w)}else Xt(2);x.I=0,x.l&&x.l.pa(E),Nu(x),Eo(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function Nu(x){if(x.I=0,x.ja=[],x.l){const E=bt(x.h);(E.length!=0||x.i.length!=0)&&(k(x.ja,E),k(x.ja,x.i),x.h.i.length=0,A(x.i),x.i.length=0),x.l.oa()}}function ku(x,E,w){var L=w instanceof Qt?At(w):new Qt(w);if(L.g!="")E&&(L.g=E+"."+L.g),An(L,L.u);else{var W=u.location;L=W.protocol,E=E?E+"."+W.hostname:W.hostname,W=+W.port;const re=new Qt(null);L&&Pt(re,L),E&&(re.g=E),W&&An(re,W),w&&(re.h=w),L=re}return w=x.G,E=x.wa,w&&E&&ot(L,w,E),ot(L,"VER",x.ka),Ia(x,L),L}function Cu(x,E,w){if(E&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=x.Aa&&!x.ma?new It(new pi({ab:w})):new It(x.ma),E.Fa(x.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iu(){}n=Iu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Rr(){}Rr.prototype.g=function(x,E){return new Qn(x,E)};function Qn(x,E){_e.call(this),this.g=new Cr(E),this.l=x,this.h=E&&E.messageUrlParams||null,x=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(x?x["X-WebChannel-Content-Type"]=E.messageContentType:x={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(x?x["X-WebChannel-Client-Profile"]=E.sa:x={"X-WebChannel-Client-Profile":E.sa}),this.g.U=x,(x=E&&E.Qb)&&!j(x)&&(this.g.u=x),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!j(E)&&(this.g.G=E,x=this.h,x!==null&&E in x&&(x=this.h,E in x&&delete x[E])),this.j=new zi(this)}_(Qn,_e),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){$l(this.g)},Qn.prototype.o=function(x){var E=this.g;if(typeof x=="string"){var w={};w.__data__=x,x=w}else this.v&&(w={},w.__data__=$n(x),x=w);E.i.push(new Ee(E.Ya++,x)),E.I==3&&yi(E)},Qn.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,Qn.Z.N.call(this)};function Ru(x){xn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var E=x.__sm__;if(E){e:{for(const w in E){x=w;break e}x=void 0}(this.i=x)&&(x=this.i,E=E!==null&&x in E?E[x]:void 0),this.data=E}else this.data=x}_(Ru,xn);function Mu(){ss.call(this),this.status=1}_(Mu,ss);function zi(x){this.g=x}_(zi,Iu),zi.prototype.ra=function(){Le(this.g,"a")},zi.prototype.qa=function(x){Le(this.g,new Ru(x))},zi.prototype.pa=function(x){Le(this.g,new Mu)},zi.prototype.oa=function(){Le(this.g,"b")},Rr.prototype.createWebChannel=Rr.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,xA=function(){return new Rr},gA=function(){return nt()},pA=Vt,l0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,Xd=Vi,Aa.COMPLETE="complete",mA=Aa,Yn.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",_e.prototype.listen=_e.prototype.J,jc=Yn,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,fA=It}).apply(typeof Bd<"u"?Bd:typeof self<"u"?self:typeof window<"u"?window:{});const TT="@firebase/firestore",ET="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new H0("@firebase/firestore");function sl(){return io.logLevel}function Ce(n,...e){if(io.logLevel<=ut.DEBUG){const t=e.map(q0);io.debug(`Firestore (${Il}): ${n}`,...t)}}function mr(n,...e){if(io.logLevel<=ut.ERROR){const t=e.map(q0);io.error(`Firestore (${Il}): ${n}`,...t)}}function xl(n,...e){if(io.logLevel<=ut.WARN){const t=e.map(q0);io.warn(`Firestore (${Il}): ${n}`,...t)}}function q0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,yA(n,s,t)}function yA(n,e,t){let s=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw mr(s),new Error(s)}function wt(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||yA(e,r,s)}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class e5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class t5{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let s=this.i;const r=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let o=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ur,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const m=o;e.enqueueRetryable((async()=>{await m.promise,await r(this.currentUser)}))},h=m=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ur)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wt(typeof s.accessToken=="string",31837,{l:s}),new vA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class n5{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s5{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new n5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ST{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const s=o=>{o.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const r=o=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ST(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ST(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=r5(40);for(let o=0;o<r.length;++o)s.length<20&&r[o]<t&&(s+=e.charAt(r[o]%62))}return s}}function dt(n,e){return n<e?-1:n>e?1:0}function c0(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),o=e.charAt(s);if(r!==o)return Mp(r)===Mp(o)?dt(r,o):Mp(r)?1:-1}return dt(n.length,e.length)}const a5=55296,o5=57343;function Mp(n){const e=n.charCodeAt(0);return e>=a5&&e<=o5}function yl(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="__name__";class wi{constructor(e,t,s){t===void 0?t=0:t>e.length&&ze(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ze(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const o=wi.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return dt(e.length,t.length)}static compareSegments(e,t){const s=wi.isNumericId(e),r=wi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?wi.extractNumericId(e).compare(wi.extractNumericId(t)):c0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return la.fromString(e.substring(4,e.length-2))}}class jt extends wi{construct(e,t,s){return new jt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(de.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new jt(t)}static emptyPath(){return new jt([])}}const l5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends wi{construct(e,t,s){return new Dn(e,t,s)}static isValidIdentifier(e){return l5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AT}static keyField(){return new Dn([AT])}static fromServerFormat(e){const t=[];let s="",r=0;const o=()=>{if(s.length===0)throw new Ae(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new Ae(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ae(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,r+=2}else h==="`"?(u=!u,r++):h!=="."||u?(s+=h,r++):(o(),r++)}if(o(),u)throw new Ae(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(jt.fromString(e))}static fromName(e){return new Ve(jt.fromString(e).popFirst(5))}static empty(){return new Ve(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new jt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n,e,t){if(!t)throw new Ae(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c5(n,e,t,s){if(e===!0&&s===!0)throw new Ae(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wT(n){if(!Ve.isDocumentKey(n))throw new Ae(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NT(n){if(Ve.isDocumentKey(n))throw new Ae(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _A(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ze(12329,{type:typeof n})}function ui(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xh(n);throw new Ae(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function u5(n,e){if(e<=0)throw new Ae(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n,e){const t={typeString:n};return e&&(t.value=e),t}function au(n,e){if(!_A(n))throw new Ae(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(r&&typeof u!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new Ae(de.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=-62135596800,CT=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*CT);return new Ht(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kT)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CT}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(au(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:pn("string",Ht._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Ht(0,0))}static max(){return new Ye(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=-1;function d5(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Ye.fromTimestamp(s===1e9?new Ht(t+1,0):new Ht(t,s));return new ua(r,Ve.empty(),e)}function h5(n){return new ua(n.readTime,n.key,Jc)}class ua{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ua(Ye.min(),Ve.empty(),Jc)}static max(){return new ua(Ye.max(),Ve.empty(),Jc)}}function f5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(n.documentKey,e.documentKey),t!==0?t:dt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==m5)throw n;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me(((s,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):me.reject(t)}static resolve(e){return new me(((t,s)=>{t(e)}))}static reject(e){return new me(((t,s)=>{s(e)}))}static waitFor(e){return new me(((t,s)=>{let r=0,o=0,u=!1;e.forEach((h=>{++r,h.next((()=>{++o,u&&o===r&&t()}),(m=>s(m)))})),u=!0,o===r&&t()}))}static or(e){let t=me.resolve(!1);for(const s of e)t=t.next((r=>r?me.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,o)=>{s.push(t.call(this,r,o))})),this.waitFor(s)}static mapArray(e,t){return new me(((s,r)=>{const o=e.length,u=new Array(o);let h=0;for(let m=0;m<o;m++){const p=m;t(e[p]).next((v=>{u[p]=v,++h,h===o&&s(u)}),(v=>r(v)))}}))}static doWhile(e,t){return new me(((s,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):s()};o()}))}}function g5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ml(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=-1;function ef(n){return n==null}function vh(n){return n===0&&1/n==-1/0}function x5(n){return typeof n=="number"&&Number.isInteger(n)&&!vh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="";function y5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IT(e)),e=v5(n.get(t),e);return IT(e)}function v5(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case TA:t+="";break;default:t+=o}}return t}function IT(n){return n+TA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function va(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new Wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hd(this.root,e,this.comparator,!0)}}class Hd{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,t,s,r,o){this.key=e,this.value=t,this.color=s??Mn.RED,this.left=r??Mn.EMPTY,this.right=o??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,o){return new Mn(e??this.key,t??this.value,s??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const o=s(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,s),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Mn.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,t,s,r,o){return this}insert(e,t,s){return new Mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MT(this.data.getIterator())}getIteratorFrom(e){return new MT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class MT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new ws([])}unionWith(e){let t=new bn(Dn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new SA("Invalid base64 string: "+o):o}})(e);return new Ln(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o})(e);return new Ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const b5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function da(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=b5.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ha(n){return typeof n=="string"?Ln.fromBase64String(n):Ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="server_timestamp",wA="__type__",NA="__previous_value__",kA="__local_write_time__";function Y0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[wA])==null?void 0:s.stringValue)===AA}function tf(n){const e=n.mapValue.fields[NA];return Y0(e)?tf(e):e}function Qc(n){const e=da(n.mapValue.fields[kA].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,t,s,r,o,u,h,m,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=v}}const bh="(default)";class Wc{constructor(e,t){this.projectId=e,this.database=t||bh}static empty(){return new Wc("","")}get isDefaultDatabase(){return this.database===bh}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="__type__",T5="__max__",zd={mapValue:{}},IA="__vector__",_h="value";function fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Y0(n)?4:S5(n)?9007199254740991:E5(n)?10:11:ze(28295,{value:n})}function Mi(n,e){if(n===e)return!0;const t=fa(n);if(t!==fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qc(n).isEqual(Qc(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=da(r.timestampValue),h=da(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return ha(r.bytesValue).isEqual(ha(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return on(r.geoPointValue.latitude)===on(o.geoPointValue.latitude)&&on(r.geoPointValue.longitude)===on(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return on(r.integerValue)===on(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=on(r.doubleValue),h=on(o.doubleValue);return u===h?vh(u)===vh(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return yl(n.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return(function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(RT(u)!==RT(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!Mi(u[m],h[m])))return!1;return!0})(n,e);default:return ze(52216,{left:n})}}function Xc(n,e){return(n.values||[]).find((t=>Mi(t,e)))!==void 0}function vl(n,e){if(n===e)return 0;const t=fa(n),s=fa(e);if(t!==s)return dt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(n.booleanValue,e.booleanValue);case 2:return(function(o,u){const h=on(o.integerValue||o.doubleValue),m=on(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return DT(n.timestampValue,e.timestampValue);case 4:return DT(Qc(n),Qc(e));case 5:return c0(n.stringValue,e.stringValue);case 6:return(function(o,u){const h=ha(o),m=ha(u);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(o,u){const h=o.split("/"),m=u.split("/");for(let p=0;p<h.length&&p<m.length;p++){const v=dt(h[p],m[p]);if(v!==0)return v}return dt(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,u){const h=dt(on(o.latitude),on(u.latitude));return h!==0?h:dt(on(o.longitude),on(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return PT(n.arrayValue,e.arrayValue);case 10:return(function(o,u){var T,A,k,D;const h=o.fields||{},m=u.fields||{},p=(T=h[_h])==null?void 0:T.arrayValue,v=(A=m[_h])==null?void 0:A.arrayValue,_=dt(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((D=v==null?void 0:v.values)==null?void 0:D.length)||0);return _!==0?_:PT(p,v)})(n.mapValue,e.mapValue);case 11:return(function(o,u){if(o===zd.mapValue&&u===zd.mapValue)return 0;if(o===zd.mapValue)return 1;if(u===zd.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),p=u.fields||{},v=Object.keys(p);m.sort(),v.sort();for(let _=0;_<m.length&&_<v.length;++_){const T=c0(m[_],v[_]);if(T!==0)return T;const A=vl(h[m[_]],p[v[_]]);if(A!==0)return A}return dt(m.length,v.length)})(n.mapValue,e.mapValue);default:throw ze(23264,{he:t})}}function DT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return dt(n,e);const t=da(n),s=da(e),r=dt(t.seconds,s.seconds);return r!==0?r:dt(t.nanos,s.nanos)}function PT(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const o=vl(t[r],s[r]);if(o)return o}return dt(t.length,s.length)}function bl(n){return u0(n)}function u0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=da(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ha(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const o of t.values||[])r?r=!1:s+=",",s+=u0(o);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const u of s)o?o=!1:r+=",",r+=`${u}:${u0(t.fields[u])}`;return r+"}"})(n.mapValue):ze(61005,{value:n})}function Zd(n){switch(fa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+Zd(e):16;case 5:return 2*n.stringValue.length;case 6:return ha(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,o)=>r+Zd(o)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return va(s.fields,((o,u)=>{r+=o.length+Zd(u)})),r})(n.mapValue);default:throw ze(13486,{value:n})}}function LT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function d0(n){return!!n&&"integerValue"in n}function J0(n){return!!n&&"arrayValue"in n}function UT(n){return!!n&&"nullValue"in n}function jT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eh(n){return!!n&&"mapValue"in n}function E5(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[CA])==null?void 0:s.stringValue)===IA}function Hc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return va(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Hc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(n.arrayValue.values[t]);return e}return{...n}}function S5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===T5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=Dn.emptyPath(),s={},r=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,s,r),s={},r=[],t=h.popLast()}u?s[h.lastSegment()]=Hc(u):r.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,r)}delete(e){const t=this.field(e.popLast());eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];eh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){va(t,((r,o)=>e[r]=o));for(const r of s)delete e[r]}clone(){return new ms(Hc(this.value))}}function RA(n){const e=[];return va(n.fields,((t,s)=>{const r=new Dn([t]);if(eh(s)){const o=RA(s.mapValue).fields;if(o.length===0)e.push(r);else for(const u of o)e.push(r.child(u))}else e.push(r)})),new ws(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t,s,r,o,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Hn(e,0,Ye.min(),Ye.min(),Ye.min(),ms.empty(),0)}static newFoundDocument(e,t,s,r){return new Hn(e,1,t,Ye.min(),s,r,0)}static newNoDocument(e,t){return new Hn(e,2,t,Ye.min(),Ye.min(),ms.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,Ye.min(),Ye.min(),ms.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.position=e,this.inclusive=t}}function VT(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const o=e[r],u=n.position[r];if(o.field.isKeyField()?s=Ve.comparator(Ve.fromName(u.referenceValue),t.key):s=vl(u,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function OT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function A5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class mn extends MA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new N5(e,t,s):t==="array-contains"?new I5(e,s):t==="in"?new R5(e,s):t==="not-in"?new M5(e,s):t==="array-contains-any"?new D5(e,s):new mn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new k5(e,s):new C5(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vl(t,this.value)):t!==null&&fa(this.value)===fa(t)&&this.matchesComparison(vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends MA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new di(e,t)}matches(e){return DA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DA(n){return n.op==="and"}function PA(n){return w5(n)&&DA(n)}function w5(n){for(const e of n.filters)if(e instanceof di)return!1;return!0}function h0(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+bl(n.value);if(PA(n))return n.filters.map((e=>h0(e))).join(",");{const e=n.filters.map((t=>h0(t))).join(",");return`${n.op}(${e})`}}function LA(n,e){return n instanceof mn?(function(s,r){return r instanceof mn&&s.op===r.op&&s.field.isEqual(r.field)&&Mi(s.value,r.value)})(n,e):n instanceof di?(function(s,r){return r instanceof di&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((o,u,h)=>o&&LA(u,r.filters[h])),!0):!1})(n,e):void ze(19439)}function UA(n){return n instanceof mn?(function(t){return`${t.field.canonicalString()} ${t.op} ${bl(t.value)}`})(n):n instanceof di?(function(t){return t.op.toString()+" {"+t.getFilters().map(UA).join(" ,")+"}"})(n):"Filter"}class N5 extends mn{constructor(e,t,s){super(e,t,s),this.key=Ve.fromName(s.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class k5 extends mn{constructor(e,t){super(e,"in",t),this.keys=jA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class C5 extends mn{constructor(e,t){super(e,"not-in",t),this.keys=jA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ve.fromName(s.referenceValue)))}class I5 extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return J0(t)&&Xc(t.arrayValue,this.value)}}class R5 extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xc(this.value.arrayValue,t)}}class M5 extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xc(this.value.arrayValue,t)}}class D5 extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!J0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Xc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,t=null,s=[],r=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function GT(n,e=null,t=[],s=[],r=null,o=null,u=null){return new P5(n,e,t,s,r,o,u)}function Q0(n){const e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>h0(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>bl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>bl(s))).join(",")),e.Te=t}return e.Te}function W0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!A5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OT(n.startAt,e.startAt)&&OT(n.endAt,e.endAt)}function f0(n){return Ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t=null,s=[],r=[],o=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L5(n,e,t,s,r,o,u,h){return new Dl(n,e,t,s,r,o,u,h)}function X0(n){return new Dl(n)}function BT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VA(n){return n.collectionGroup!==null}function zc(n){const e=Qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new bn(Dn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Zc(o,s))})),t.has(Dn.keyField().canonicalString())||e.Ie.push(new Zc(Dn.keyField(),s))}return e.Ie}function Ni(n){const e=Qe(n);return e.Ee||(e.Ee=U5(e,zc(n))),e.Ee}function U5(n,e){if(n.limitType==="F")return GT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Zc(r.field,o)}));const t=n.endAt?new Th(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Th(n.startAt.position,n.startAt.inclusive):null;return GT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function m0(n,e){const t=n.filters.concat([e]);return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Eh(n,e,t){return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nf(n,e){return W0(Ni(n),Ni(e))&&n.limitType===e.limitType}function OA(n){return`${Q0(Ni(n))}|lt:${n.limitType}`}function il(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>UA(r))).join(", ")}]`),ef(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>bl(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>bl(r))).join(",")),`Target(${s})`})(Ni(n))}; limitType=${n.limitType})`}function sf(n,e){return e.isFoundDocument()&&(function(s,r){const o=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):Ve.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(n,e)&&(function(s,r){for(const o of zc(s))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const o of s.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(u,h,m){const p=VT(u,h,m);return u.inclusive?p<=0:p<0})(s.startAt,zc(s),r)||s.endAt&&!(function(u,h,m){const p=VT(u,h,m);return u.inclusive?p>=0:p>0})(s.endAt,zc(s),r))})(n,e)}function j5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GA(n){return(e,t)=>{let s=!1;for(const r of zc(n)){const o=V5(r,e,t);if(o!==0)return o;s=s||r.field.isKeyField()}return 0}}function V5(n,e,t){const s=n.field.isKeyField()?Ve.comparator(e.key,t.key):(function(o,u,h){const m=u.data.field(o),p=h.data.field(o);return m!==null&&p!==null?vl(m,p):ze(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,o]of s)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((t,s)=>{for(const[r,o]of s)e(r,o)}))}isEmpty(){return EA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=new Wt(Ve.comparator);function pr(){return O5}const BA=new Wt(Ve.comparator);function Vc(...n){let e=BA;for(const t of n)e=e.insert(t.key,t);return e}function HA(n){let e=BA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Wa(){return Fc()}function zA(){return Fc()}function Fc(){return new uo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const G5=new Wt(Ve.comparator),B5=new bn(Ve.comparator);function ht(...n){let e=B5;for(const t of n)e=e.add(t);return e}const H5=new bn(dt);function z5(){return H5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function FA(n){return{integerValue:""+n}}function F5(n,e){return x5(e)?FA(e):Z0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this._=void 0}}function q5(n,e,t){return n instanceof Sh?(function(r,o){const u={fields:{[wA]:{stringValue:AA},[kA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Y0(o)&&(o=tf(o)),o&&(u.fields[NA]=o),{mapValue:u}})(t,e):n instanceof eu?KA(n,e):n instanceof tu?$A(n,e):(function(r,o){const u=qA(r,o),h=HT(u)+HT(r.Ae);return d0(u)&&d0(r.Ae)?FA(h):Z0(r.serializer,h)})(n,e)}function K5(n,e,t){return n instanceof eu?KA(n,e):n instanceof tu?$A(n,e):t}function qA(n,e){return n instanceof Ah?(function(s){return d0(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class Sh extends rf{}class eu extends rf{constructor(e){super(),this.elements=e}}function KA(n,e){const t=YA(e);for(const s of n.elements)t.some((r=>Mi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class tu extends rf{constructor(e){super(),this.elements=e}}function $A(n,e){let t=YA(e);for(const s of n.elements)t=t.filter((r=>!Mi(r,s)));return{arrayValue:{values:t}}}class Ah extends rf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function HT(n){return on(n.integerValue||n.doubleValue)}function YA(n){return J0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function $5(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof eu&&r instanceof eu||s instanceof tu&&r instanceof tu?yl(s.elements,r.elements,Mi):s instanceof Ah&&r instanceof Ah?Mi(s.Ae,r.Ae):s instanceof Sh&&r instanceof Sh})(n.transform,e.transform)}class Y5{constructor(e,t){this.version=e,this.transformResults=t}}class Ys{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ys}static exists(e){return new Ys(void 0,e)}static updateTime(e){return new Ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class af{}function JA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new eg(n.key,Ys.none()):new ou(n.key,n.data,Ys.none());{const t=n.data,s=ms.empty();let r=new bn(Dn.comparator);for(let o of e.fields)if(!r.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?s.delete(o):s.set(o,u),r=r.add(o)}return new ba(n.key,s,new ws(r.toArray()),Ys.none())}}function J5(n,e,t){n instanceof ou?(function(r,o,u){const h=r.value.clone(),m=FT(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof ba?(function(r,o,u){if(!th(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=FT(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(QA(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(r,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function qc(n,e,t,s){return n instanceof ou?(function(o,u,h,m){if(!th(o.precondition,u))return h;const p=o.value.clone(),v=qT(o.fieldTransforms,m,u);return p.setAll(v),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof ba?(function(o,u,h,m){if(!th(o.precondition,u))return h;const p=qT(o.fieldTransforms,m,u),v=u.data;return v.setAll(QA(o)),v.setAll(p),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(o,u,h){return th(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function Q5(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),o=qA(s.transform,r||null);o!=null&&(t===null&&(t=ms.empty()),t.set(s.field,o))}return t||null}function zT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&yl(s,r,((o,u)=>$5(o,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ou extends af{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ba extends af{constructor(e,t,s,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function QA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function FT(n,e,t){const s=new Map;wt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const o=n[r],u=o.transform,h=e.data.field(o.field);s.set(o.field,K5(u,h,t[r]))}return s}function qT(n,e,t){const s=new Map;for(const r of n){const o=r.transform,u=t.data.field(r.field);s.set(r.field,q5(o,u,e))}return s}class eg extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W5 extends af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&J5(o,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=qc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=qc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=zA();return this.mutations.forEach((r=>{const o=e.get(r.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(r.key)?null:h;const m=JA(u,h);m!==null&&s.set(r.key,m),u.isValidDocument()||u.convertToNoDocument(Ye.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ht())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,((t,s)=>zT(t,s)))&&yl(this.baseMutations,e.baseMutations,((t,s)=>zT(t,s)))}}class tg{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){wt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return G5})();const o=e.mutations;for(let u=0;u<o.length;u++)r=r.insert(o[u].key,s[u].version);return new tg(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,gt;function tL(n){switch(n){case de.OK:return ze(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return ze(15467,{code:n})}}function WA(n){if(n===void 0)return mr("GRPC error has no .code"),de.UNKNOWN;switch(n){case fn.OK:return de.OK;case fn.CANCELLED:return de.CANCELLED;case fn.UNKNOWN:return de.UNKNOWN;case fn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case fn.INTERNAL:return de.INTERNAL;case fn.UNAVAILABLE:return de.UNAVAILABLE;case fn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case fn.NOT_FOUND:return de.NOT_FOUND;case fn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case fn.ABORTED:return de.ABORTED;case fn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case fn.DATA_LOSS:return de.DATA_LOSS;default:return ze(39323,{code:n})}}(gt=fn||(fn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new la([4294967295,4294967295],0);function KT(n){const e=nL().encode(n),t=new hA;return t.update(e),new Uint8Array(t.digest())}function $T(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new la([t,s],0),new la([r,o],0)]}class ng{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(s<0)throw new Oc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=la.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(la.fromNumber(s)));return r.compare(sL)===1&&(r=new la([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=KT(e),[s,r]=$T(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,r,o);if(!this.we(u))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new ng(o,r,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=KT(e),[s,r]=$T(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(s,r,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,s,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new of(Ye.min(),r,new Wt(dt),pr(),ht())}}class lu{constructor(e,t,s,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new lu(s,t,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class XA{constructor(e,t){this.targetId=e,this.Ce=t}}class ZA{constructor(e,t,s=Ln.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class YT{constructor(){this.ve=0,this.Fe=JT(),this.Me=Ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ht(),t=ht(),s=ht();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:ze(38017,{changeType:o})}})),new lu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=JT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iL{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=Fd(),this.He=Fd(),this.Ye=new Wt(dt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(f0(o))if(s===0){const u=new Ve(o.path);this.et(t,u,Hn.newNoDocument(u,Ye.min()))}else wt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:o=0}=t;let u,h;try{u=ha(s).toUint8Array()}catch(m){if(m instanceof SA)return xl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new ng(u,r,o)}catch(m){return xl(m instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&f0(h.target)){const m=new Ve(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,Hn.newNoDocument(m,e))}o.Be&&(t.set(u,o.ke()),o.qe())}}));let s=ht();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const r=new of(e,t,this.Ye,this.je,s);return this.je=pr(),this.Je=Fd(),this.He=Fd(),this.Ye=new Wt(dt),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new YT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bn(dt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bn(dt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Fd(){return new Wt(Ve.comparator)}function JT(){return new Wt(Ve.comparator)}const rL={asc:"ASCENDING",desc:"DESCENDING"},aL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oL={and:"AND",or:"OR"};class lL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function p0(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function wh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ew(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cL(n,e){return wh(n,e.toTimestamp())}function ki(n){return wt(!!n,49232),Ye.fromTimestamp((function(t){const s=da(t);return new Ht(s.seconds,s.nanos)})(n))}function sg(n,e){return g0(n,e).canonicalString()}function g0(n,e){const t=(function(r){return new jt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tw(n){const e=jt.fromString(n);return wt(aw(e),10190,{key:e.toString()}),e}function x0(n,e){return sg(n.databaseId,e.path)}function Dp(n,e){const t=tw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(sw(t))}function nw(n,e){return sg(n.databaseId,e)}function uL(n){const e=tw(n);return e.length===4?jt.emptyPath():sw(e)}function y0(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sw(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QT(n,e,t){return{name:x0(n,e),fields:t.value.mapValue.fields}}function dL(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ze(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(p,v){return p.useProto3Json?(wt(v===void 0||typeof v=="string",58123),Ln.fromBase64String(v||"")):(wt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ln.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(p){const v=p.code===void 0?de.UNKNOWN:WA(p.code);return new Ae(v,p.message||"")})(u);t=new ZA(s,r,o,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Dp(n,s.document.name),o=ki(s.document.updateTime),u=s.document.createTime?ki(s.document.createTime):Ye.min(),h=new ms({mapValue:{fields:s.document.fields}}),m=Hn.newFoundDocument(r,o,u,h),p=s.targetIds||[],v=s.removedTargetIds||[];t=new nh(p,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Dp(n,s.document),o=s.readTime?ki(s.readTime):Ye.min(),u=Hn.newNoDocument(r,o),h=s.removedTargetIds||[];t=new nh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Dp(n,s.document),o=s.removedTargetIds||[];t=new nh([],o,r,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:o}=s,u=new eL(r,o),h=s.targetId;t=new XA(h,u)}}return t}function hL(n,e){let t;if(e instanceof ou)t={update:QT(n,e.key,e.value)};else if(e instanceof eg)t={delete:x0(n,e.key)};else if(e instanceof ba)t={update:QT(n,e.key,e.data),updateMask:_L(e.fieldMask)};else{if(!(e instanceof W5))return ze(16599,{Vt:e.type});t={verify:x0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,u){const h=u.transform;if(h instanceof Sh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof eu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof tu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ah)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw ze(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:cL(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ze(27497)})(n,e.precondition)),t}function fL(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map((t=>(function(r,o){let u=r.updateTime?ki(r.updateTime):ki(o);return u.isEqual(Ye.min())&&(u=ki(o)),new Y5(u,r.transformResults||[])})(t,e)))):[]}function mL(n,e){return{documents:[nw(n,e.path)]}}function pL(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=nw(n,r);const o=(function(p){if(p.length!==0)return rw(di.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const u=(function(p){if(p.length!==0)return p.map((v=>(function(T){return{field:rl(T.field),direction:yL(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=p0(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function gL(n){let e=uL(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){wt(s===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=(function(_){const T=iw(_);return T instanceof di&&PA(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(k){return new Zc(al(k.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,ef(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(_){const T=!!_.before,A=_.values||[];return new Th(A,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const T=!_.before,A=_.values||[];return new Th(A,T)})(t.endAt)),L5(e,r,u,o,h,"F",m,p)}function xL(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=al(t.unaryFilter.field);return mn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=al(t.unaryFilter.field);return mn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=al(t.unaryFilter.field);return mn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=al(t.unaryFilter.field);return mn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(n):n.fieldFilter!==void 0?(function(t){return mn.create(al(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return di.create(t.compositeFilter.filters.map((s=>iw(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(t.compositeFilter.op))})(n):ze(30097,{filter:n})}function yL(n){return rL[n]}function vL(n){return aL[n]}function bL(n){return oL[n]}function rl(n){return{fieldPath:n.canonicalString()}}function al(n){return Dn.fromServerFormat(n.fieldPath)}function rw(n){return n instanceof mn?(function(t){if(t.op==="=="){if(jT(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(UT(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jT(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(UT(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:vL(t.op),value:t.value}}})(n):n instanceof di?(function(t){const s=t.getFilters().map((r=>rw(r)));return s.length===1?s[0]:{compositeFilter:{op:bL(t.op),filters:s}}})(n):ze(54877,{filter:n})}function _L(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t,s,r,o=Ye.min(),u=Ye.min(),h=Ln.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.yt=e}}function EL(n){const e=gL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Eh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.Cn=new AL}addToCollectionParentIndex(e,t){return this.Cn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ua.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(ua.min())}updateCollectionGroup(e,t,s){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class AL{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new bn(jt.comparator),o=!r.has(s);return this.index[t]=r.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new bn(jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ow=41943040;class fs{static withCacheSize(e){return new fs(e,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs.DEFAULT_COLLECTION_PERCENTILE=10,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fs.DEFAULT=new fs(ow,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fs.DISABLED=new fs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _l(0)}static cr(){return new _l(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="LruGarbageCollector",wL=1048576;function ZT([n,e],[t,s]){const r=dt(n,t);return r===0?dt(e,s):r}class NL{constructor(e){this.Ir=e,this.buffer=new bn(ZT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ZT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kL{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ce(XT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ml(t)?Ce(XT,"Ignoring IndexedDB error during garbage collection: ",t):await Rl(t)}await this.Vr(3e5)}))}}class CL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return me.resolve(Zh.ce);const s=new NL(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(WT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,o,u,h,m,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,u=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(o=_,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(p=Date.now(),sl()<=ut.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${r} in `+(h-u)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-v}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function IL(n,e){return new CL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.changes=new uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?me.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&qc(s.mutation,r,ws.empty(),Ht.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ht()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ht()){const r=Wa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((o=>{let u=Vc();return o.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Wa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ht())))}populateOverlays(e,t,s){const r=[];return s.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,r){let o=pr();const u=Fc(),h=(function(){return Fc()})();return t.forEach(((m,p)=>{const v=s.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof ba)?o=o.insert(p.key,p):v!==void 0?(u.set(p.key,v.mutation.getFieldMask()),qc(v.mutation,p,v.mutation.getFieldMask(),Ht.now())):u.set(p.key,ws.empty())})),this.recalculateAndSaveOverlays(e,o).next((m=>(m.forEach(((p,v)=>u.set(p,v))),t.forEach(((p,v)=>h.set(p,new ML(v,u.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=Fc();let r=new Wt(((u,h)=>u-h)),o=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let v=s.get(m)||ws.empty();v=h.applyToLocalView(p,v),s.set(m,v);const _=(r.get(h.batchId)||ht()).add(m);r=r.insert(h.batchId,_)}))})).next((()=>{const u=[],h=r.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,v=m.value,_=zA();v.forEach((T=>{if(!o.has(T)){const A=JA(t.get(T),s.get(T));A!==null&&_.set(T,A),o=o.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,_))}return me.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(u){return Ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((o=>{const u=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-o.size):me.resolve(Wa());let h=Jc,m=o;return u.next((p=>me.forEach(p,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(v)?me.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{m=m.insert(v,T)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,m,p,ht()))).next((v=>({batchId:h,changes:HA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((s=>{let r=Vc();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const o=t.collectionGroup;let u=Vc();return this.indexManager.getCollectionParents(e,o).next((h=>me.forEach(h,(m=>{const p=(function(_,T){return new Dl(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((v=>{v.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,r)))).next((u=>{o.forEach(((m,p)=>{const v=p.getKey();u.get(v)===null&&(u=u.insert(v,Hn.newInvalidDocument(v)))}));let h=Vc();return u.forEach(((m,p)=>{const v=o.get(m);v!==void 0&&qc(v.mutation,p,ws.empty(),Ht.now()),sf(t,p)&&(h=h.insert(m,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return me.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:ki(r.createTime)}})(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:EL(r.bundledQuery),readTime:ki(r.readTime)}})(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.overlays=new Wt(Ve.comparator),this.qr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Wa();return me.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&s.set(r,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,o)=>{this.St(e,t,o)})),me.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),me.resolve()}getOverlaysForCollection(e,t,s){const r=Wa(),o=t.length+1,u=new Ve(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&m.largestBatchId>s&&r.set(m.getKey(),m)}return me.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let o=new Wt(((p,v)=>p-v));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=o.get(p.largestBatchId);v===null&&(v=Wa(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=Wa(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,v)=>h.set(p,v))),!(h.size()>=r)););return me.resolve(h)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new Z5(t,s));let o=this.qr.get(t);o===void 0&&(o=ht(),this.qr.set(t,o)),this.qr.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.Qr=new bn(Tn.$r),this.Ur=new bn(Tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Tn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Tn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ve(new jt([])),s=new Tn(t,e),r=new Tn(t,e+1),o=[];return this.Ur.forEachInRange([s,r],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ve(new jt([])),s=new Tn(t,e),r=new Tn(t,e+1);let o=ht();return this.Ur.forEachInRange([s,r],(u=>{o=o.add(u.key)})),o}containsKey(e){const t=new Tn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ve.comparator(e.key,t.key)||dt(e.Yr,t.Yr)}static Kr(e,t){return dt(e.Yr,t.Yr)||Ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bn(Tn.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new X5(o,t,s,r);this.mutationQueue.push(u);for(const h of r)this.Zr=this.Zr.add(new Tn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(u)}lookupMutationBatch(e,t){return me.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),o=r<0?0:r;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?$0:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tn(t,0),r=new Tn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,r],(u=>{const h=this.Xr(u.Yr);o.push(h)})),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new bn(dt);return t.forEach((r=>{const o=new Tn(r,0),u=new Tn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{s=s.add(h.Yr)}))})),me.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let o=s;Ve.isDocumentKey(o)||(o=o.child(""));const u=new Tn(new Ve(o),0);let h=new bn(dt);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(h=h.add(m.Yr)),!0)}),u),me.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){wt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return me.forEach(t.mutations,(r=>{const o=new Tn(r.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Tn(t,0),r=this.Zr.firstAfterOrEqual(s);return me.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.ri=e,this.docs=(function(){return new Wt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),o=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return me.resolve(s?s.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let s=pr();return t.forEach((r=>{const o=this.docs.get(r);s=s.insert(r,o?o.document.mutableCopy():Hn.newInvalidDocument(r))})),me.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let o=pr();const u=t.path,h=new Ve(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:v}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||f5(h5(v),s)<=0||(r.has(v.key)||sf(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,s,r){ze(9500)}ii(e,t){return me.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new OL(this)}getSize(e){return me.resolve(this.size)}}class OL extends RL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),me.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.persistence=e,this.si=new uo((t=>Q0(t)),W0),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.oi=0,this._i=new ig,this.targetCount=0,this.ai=_l.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),me.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new _l(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Pr(t),me.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,s){let r=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),me.waitFor(o).next((()=>r))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return me.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),me.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((u=>{o.push(r.markPotentiallyOrphaned(e,u))})),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return me.resolve(s)}containsKey(e,t){return me.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zh(0),this.li=!1,this.li=!0,this.hi=new UL,this.referenceDelegate=e(this),this.Pi=new GL(this),this.indexManager=new SL,this.remoteDocumentCache=(function(r){return new VL(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new TL(t),this.Ii=new PL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new jL(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Ce("MemoryPersistence","Starting transaction:",e);const r=new BL(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return me.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class BL extends p5{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ig,this.Vi=null}static mi(e){return new rg(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),me.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(s=>{const r=Ve.fromPath(s);return this.gi(e,r).next((o=>{o||t.removeEntry(r,Ye.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return me.or([()=>me.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Nh{constructor(e,t){this.persistence=e,this.pi=new uo((s=>y5(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=IL(this,t)}static mi(e,t){return new Nh(e,t)}Ei(){}di(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return me.forEach(this.pi,((s,r)=>this.br(e,s,r).next((o=>o?me.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,o.removeEntry(u,Ye.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zd(e.data.value)),t}br(e,t,s){return me.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return me.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=ht(),r=ht();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new ag(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return DP()?8:g5(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const o={result:null};return this.ys(e,t).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,t,r,s).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new HL;return this.Ss(e,t,u).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>o.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(sl()<=ut.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(sl()<=ut.DEBUG&&Ce("QueryEngine","Query:",il(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(sl()<=ut.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):me.resolve())}ys(e,t){if(BT(t))return me.resolve(null);let s=Ni(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Eh(t,null,"F"),s=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const u=ht(...o);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((m=>{const p=this.Ds(t,h);return this.Cs(t,p,u,m.readTime)?this.ys(e,Eh(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,s,r){return BT(t)||r.isEqual(Ye.min())?me.resolve(null):this.ps.getDocuments(e,s).next((o=>{const u=this.Ds(t,o);return this.Cs(t,u,s,r)?me.resolve(null):(sl()<=ut.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),il(t)),this.vs(e,u,t,d5(r,Jc)).next((h=>h)))}))}Ds(e,t){let s=new bn(GA(e));return t.forEach(((r,o)=>{sf(e,o)&&(s=s.add(o))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,s){return sl()<=ut.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",il(t)),this.ps.getDocumentsMatchingQuery(e,t,ua.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((o=>(t.forEach((u=>{o=o.insert(u.key,u)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="LocalStore",FL=3e8;class qL{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Wt(dt),this.xs=new uo((o=>Q0(o)),W0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KL(n,e,t,s){return new qL(n,e,t,s)}async function cw(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const u=[],h=[];let m=ht();for(const p of r){u.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}for(const p of o){h.push(p.batchId);for(const v of p.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(s,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function $L(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,p,v){const _=p.batch,T=_.keys();let A=me.resolve();return T.forEach((k=>{A=A.next((()=>v.getEntry(m,k))).next((D=>{const I=p.docVersions.get(k);wt(I!==null,48541),D.version.compareTo(I)<0&&(_.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),v.addEntry(D)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(m,_)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let m=ht();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function uw(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function YL(n,e){const t=Qe(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const T=r.get(_);if(!T)return;h.push(t.Pi.removeMatchingKeys(o,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,v.addedDocuments,_))));let A=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(Ln.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,s)),r=r.insert(_,A),(function(D,I,V){return D.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=FL?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(T,A,v)&&h.push(t.Pi.updateTargetData(o,A))}));let m=pr(),p=ht();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))})),h.push(JL(o,u,e.documentUpdates).next((v=>{m=v.ks,p=v.qs}))),!s.isEqual(Ye.min())){const v=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));h.push(v)}return me.waitFor(h).next((()=>u.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,m,p))).next((()=>m))})).then((o=>(t.Ms=r,o)))}function JL(n,e,t){let s=ht(),r=ht();return t.forEach((o=>s=s.add(o))),e.getEntries(n,s).next((o=>{let u=pr();return t.forEach(((h,m)=>{const p=o.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),m.isNoDocument()&&m.version.isEqual(Ye.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Ce(og,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:r}}))}function QL(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=$0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function WL(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((o=>o?(r=o,me.resolve(r)):t.Pi.allocateTargetId(s).next((u=>(r=new ia(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function v0(n,e,t){const s=Qe(n),r=s.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(u=>s.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Ml(u))throw u;Ce(og,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function eE(n,e,t){const s=Qe(n);let r=Ye.min(),o=ht();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,v){const _=Qe(m),T=_.xs.get(v);return T!==void 0?me.resolve(_.Ms.get(T)):_.Pi.getTargetData(p,v)})(s,u,Ni(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{o=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?r:Ye.min(),t?o:ht()))).next((h=>(XL(s,j5(e),h),{documents:h,Qs:o})))))}function XL(n,e,t){let s=n.Os.get(e)||Ye.min();t.forEach(((r,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),n.Os.set(e,s)}class tE{constructor(){this.activeTargetIds=z5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZL{constructor(){this.Mo=new tE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="ConnectivityMonitor";class sE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ce(nE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ce(nE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd=null;function b0(){return qd===null?qd=(function(){return 268435456+Math.round(2147483648*Math.random())})():qd++,"0x"+qd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="RestConnection",t3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===bh?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,o){const u=b0(),h=this.zo(e,t.toUriEncodedString());Ce(Pp,`Sending RPC '${e}' ${u}:`,h,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,r,o);const{host:p}=new URL(h),v=kl(p);return this.Jo(e,h,m,s,v).then((_=>(Ce(Pp,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw xl(Pp,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,r,o,u){return this.Go(e,t,s,r,o)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),s&&s.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const s=t3[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="WebChannelConnection";class i3 extends n3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,o){const u=b0();return new Promise(((h,m)=>{const p=new fA;p.setWithCredentials(!0),p.listenOnce(mA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Xd.NO_ERROR:const _=p.getResponseJson();Ce(Gn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case Xd.TIMEOUT:Ce(Gn,`RPC '${e}' ${u} timed out`),m(new Ae(de.DEADLINE_EXCEEDED,"Request time out"));break;case Xd.HTTP_ERROR:const T=p.getStatus();if(Ce(Gn,`RPC '${e}' ${u} failed with status:`,T,"response text:",p.getResponseText()),T>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const k=A==null?void 0:A.error;if(k&&k.status&&k.message){const D=(function(V){const N=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(N)>=0?N:de.UNKNOWN})(k.status);m(new Ae(D,k.message))}else m(new Ae(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ae(de.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ce(Gn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(r);Ce(Gn,`RPC '${e}' ${u} sending request:`,r),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const r=b0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xA(),h=gA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const v=o.join("");Ce(Gn,`Creating RPC '${e}' stream ${r}: ${v}`,m);const _=u.createWebChannel(v,m);this.I_(_);let T=!1,A=!1;const k=new s3({Yo:I=>{A?Ce(Gn,`Not sending because RPC '${e}' stream ${r} is closed:`,I):(T||(Ce(Gn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),Ce(Gn,`RPC '${e}' stream ${r} sending:`,I),_.send(I))},Zo:()=>_.close()}),D=(I,V,N)=>{I.listen(V,(G=>{try{N(G)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return D(_,jc.EventType.OPEN,(()=>{A||(Ce(Gn,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),D(_,jc.EventType.CLOSE,(()=>{A||(A=!0,Ce(Gn,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(_))})),D(_,jc.EventType.ERROR,(I=>{A||(A=!0,xl(Gn,`RPC '${e}' stream ${r} transport errored. Name:`,I.name,"Message:",I.message),k.a_(new Ae(de.UNAVAILABLE,"The operation could not be completed")))})),D(_,jc.EventType.MESSAGE,(I=>{var V;if(!A){const N=I.data[0];wt(!!N,16349);const G=N,Y=(G==null?void 0:G.error)||((V=G[0])==null?void 0:V.error);if(Y){Ce(Gn,`RPC '${e}' stream ${r} received error:`,Y);const ne=Y.status;let Q=(function(R){const O=fn[R];if(O!==void 0)return WA(O)})(ne),M=Y.message;Q===void 0&&(Q=de.INTERNAL,M="Unknown error status: "+ne+" with message "+Y.message),A=!0,k.a_(new Ae(Q,M)),_.close()}else Ce(Gn,`RPC '${e}' stream ${r} received:`,N),k.u_(N)}})),D(h,pA.STAT_EVENT,(I=>{I.stat===l0.PROXY?Ce(Gn,`RPC '${e}' stream ${r} detected buffering proxy`):I.stat===l0.NOPROXY&&Ce(Gn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){return new lL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,s=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&Ce("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="PersistentStream";class hw{constructor(e,t,s,r,o,u,h,m){this.Mi=e,this.S_=s,this.b_=r,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new Ae(de.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ce(iE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ce(iE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class r3 extends hw{constructor(e,t,s,r,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,u),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dL(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Ye.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ye.min():u.readTime?ki(u.readTime):Ye.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=y0(this.serializer),t.addTarget=(function(o,u){let h;const m=u.target;if(h=f0(m)?{documents:mL(o,m)}:{query:pL(o,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=ew(o,u.resumeToken);const p=p0(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ye.min())>0){h.readTime=wh(o,u.snapshotVersion.toTimestamp());const p=p0(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const s=xL(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=y0(this.serializer),t.removeTarget=e,this.q_(t)}}class a3 extends hw{constructor(e,t,s,r,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=fL(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=y0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>hL(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{}class l3 extends o3{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,g0(t,s),r,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(de.UNKNOWN,o.toString())}))}Ho(e,t,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,g0(t,s),r,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(de.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class c3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(t),this.aa=!1):Ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class u3{constructor(e,t,s,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{ho(this)&&(Ce(ro,"Restarting streams for network reachability change."),await(async function(m){const p=Qe(m);p.Ea.add(4),await cu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await cf(p)})(this))}))})),this.Ra=new c3(s,r)}}async function cf(n){if(ho(n))for(const e of n.da)await e(!0)}async function cu(n){for(const e of n.da)await e(!1)}function fw(n,e){const t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dg(t)?ug(t):Pl(t).O_()&&cg(t,e))}function lg(n,e){const t=Qe(n),s=Pl(t);t.Ia.delete(e),s.O_()&&mw(t,e),t.Ia.size===0&&(s.O_()?s.L_():ho(t)&&t.Ra.set("Unknown"))}function cg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pl(n).Y_(e)}function mw(n,e){n.Va.Ue(e),Pl(n).Z_(e)}function ug(n){n.Va=new iL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pl(n).start(),n.Ra.ua()}function dg(n){return ho(n)&&!Pl(n).x_()&&n.Ia.size>0}function ho(n){return Qe(n).Ea.size===0}function pw(n){n.Va=void 0}async function d3(n){n.Ra.set("Online")}async function h3(n){n.Ia.forEach(((e,t)=>{cg(n,e)}))}async function f3(n,e){pw(n),dg(n)?(n.Ra.ha(e),ug(n)):n.Ra.set("Unknown")}async function m3(n,e,t){if(n.Ra.set("Online"),e instanceof ZA&&e.state===2&&e.cause)try{await(async function(r,o){const u=o.cause;for(const h of o.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,u),r.Ia.delete(h),r.Va.removeTarget(h))})(n,e)}catch(s){Ce(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await kh(n,s)}else if(e instanceof nh?n.Va.Ze(e):e instanceof XA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ye.min()))try{const s=await uw(n.localStore);t.compareTo(s)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const v=o.Ia.get(p);v&&o.Ia.set(p,v.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,p)=>{const v=o.Ia.get(m);if(!v)return;o.Ia.set(m,v.withResumeToken(Ln.EMPTY_BYTE_STRING,v.snapshotVersion)),mw(o,m);const _=new ia(v.target,m,p,v.sequenceNumber);cg(o,_)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){Ce(ro,"Failed to raise snapshot:",s),await kh(n,s)}}async function kh(n,e,t){if(!Ml(e))throw e;n.Ea.add(1),await cu(n),n.Ra.set("Offline"),t||(t=()=>uw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ce(ro,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await cf(n)}))}function gw(n,e){return e().catch((t=>kh(n,t,e)))}async function uf(n){const e=Qe(n),t=ma(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$0;for(;p3(e);)try{const r=await QL(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,g3(e,r)}catch(r){await kh(e,r)}xw(e)&&yw(e)}function p3(n){return ho(n)&&n.Ta.length<10}function g3(n,e){n.Ta.push(e);const t=ma(n);t.O_()&&t.X_&&t.ea(e.mutations)}function xw(n){return ho(n)&&!ma(n).x_()&&n.Ta.length>0}function yw(n){ma(n).start()}async function x3(n){ma(n).ra()}async function y3(n){const e=ma(n);for(const t of n.Ta)e.ea(t.mutations)}async function v3(n,e,t){const s=n.Ta.shift(),r=tg.from(s,e,t);await gw(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await uf(n)}async function b3(n,e){e&&ma(n).X_&&await(async function(s,r){if((function(u){return tL(u)&&u!==de.ABORTED})(r.code)){const o=s.Ta.shift();ma(s).B_(),await gw(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,r))),await uf(s)}})(n,e),xw(n)&&yw(n)}async function rE(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Ce(ro,"RemoteStore received new credentials");const s=ho(t);t.Ea.add(3),await cu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await cf(t)}async function _3(n,e){const t=Qe(n);e?(t.Ea.delete(2),await cf(t)):e||(t.Ea.add(2),await cu(t),t.Ra.set("Unknown"))}function Pl(n){return n.ma||(n.ma=(function(t,s,r){const o=Qe(t);return o.sa(),new r3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:d3.bind(null,n),t_:h3.bind(null,n),r_:f3.bind(null,n),H_:m3.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),dg(n)?ug(n):n.Ra.set("Unknown")):(await n.ma.stop(),pw(n))}))),n.ma}function ma(n){return n.fa||(n.fa=(function(t,s,r){const o=Qe(t);return o.sa(),new a3(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:x3.bind(null,n),r_:b3.bind(null,n),ta:y3.bind(null,n),na:v3.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await uf(n)):(await n.fa.stop(),n.Ta.length>0&&(Ce(ro,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,s,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=o,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,o){const u=Date.now()+s,h=new hg(e,t,u,r,o);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(n,e){if(mr("AsyncQueue",`${e}: ${n}`),Ml(n))return new Ae(de.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ve.comparator(t.key,s.key):(t,s)=>Ve.comparator(t.key,s.key),this.keyedMap=Vc(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=s.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new dl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ga=new Wt(Ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Tl{constructor(e,t,s,r,o,u,h,m,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,o){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new Tl(e,t,dl.emptySet(t),u,s,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class E3{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Qe(t),o=r.queries;r.queries=oE(),o.forEach(((u,h)=>{for(const m of h.Sa)m.onError(s)}))})(this,new Ae(de.ABORTED,"Firestore shutting down"))}}function oE(){return new uo((n=>OA(n)),nf)}async function vw(n,e){const t=Qe(n);let s=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(s=2):(o=new T3,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const h=fg(u,`Initialization of query '${il(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&mg(t)}async function bw(n,e){const t=Qe(n),s=e.query;let r=3;const o=t.queries.get(s);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function S3(n,e){const t=Qe(n);let s=!1;for(const r of e){const o=r.query,u=t.queries.get(o);if(u){for(const h of u.Sa)h.Fa(r)&&(s=!0);u.wa=r}}s&&mg(t)}function A3(n,e,t){const s=Qe(n),r=s.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);s.queries.delete(e)}function mg(n){n.Ca.forEach((e=>{e.next()}))}var _0,lE;(lE=_0||(_0={})).Ma="default",lE.Cache="cache";class _w{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Tl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.key=e}}class Ew{constructor(e){this.key=e}}class w3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=GA(e),this.tu=new dl(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new aE,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,u=r,h=!1;const m=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,_)=>{const T=r.get(v),A=sf(this.query,_)?_:null,k=!!T&&this.mutatedKeys.has(T.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let I=!1;T&&A?T.data.isEqual(A.data)?k!==D&&(s.track({type:3,doc:A}),I=!0):this.su(T,A)||(s.track({type:2,doc:A}),I=!0,(m&&this.eu(A,m)>0||p&&this.eu(A,p)<0)&&(h=!0)):!T&&A?(s.track({type:0,doc:A}),I=!0):T&&!A&&(s.track({type:1,doc:T}),I=!0,(m||p)&&(h=!0)),I&&(A?(u=u.add(A),o=D?o.add(v):o.delete(v)):(u=u.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),o=o.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(A,k){const D=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:I})}};return D(A)-D(k)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),r=r??!1;const h=t&&!r?this._u():[],m=this.Xa.size===0&&this.current&&!r?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new Tl(this.query,e.tu,o,u,e.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ht(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Ew(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Tw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ht();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pg="SyncEngine";class N3{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class k3{constructor(e){this.key=e,this.hu=!1}}class C3{constructor(e,t,s,r,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new uo((h=>OA(h)),nf),this.Iu=new Map,this.Eu=new Set,this.du=new Wt(Ve.comparator),this.Au=new Map,this.Ru=new ig,this.Vu={},this.mu=new Map,this.fu=_l.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I3(n,e,t=!0){const s=Cw(n);let r;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await Sw(s,e,t,!0),r}async function R3(n,e){const t=Cw(n);await Sw(t,e,!0,!1)}async function Sw(n,e,t,s){const r=await WL(n.localStore,Ni(e)),o=r.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return s&&(h=await M3(n,e,o,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&fw(n.remoteStore,r),h}async function M3(n,e,t,s,r){n.pu=(_,T,A)=>(async function(D,I,V,N){let G=I.view.ru(V);G.Cs&&(G=await eE(D.localStore,I.query,!1).then((({documents:M})=>I.view.ru(M,G))));const Y=N&&N.targetChanges.get(I.targetId),ne=N&&N.targetMismatches.get(I.targetId)!=null,Q=I.view.applyChanges(G,D.isPrimaryClient,Y,ne);return uE(D,I.targetId,Q.au),Q.snapshot})(n,_,T,A);const o=await eE(n.localStore,e,!0),u=new w3(e,o.Qs),h=u.ru(o.documents),m=lu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=u.applyChanges(h,n.isPrimaryClient,m);uE(n,t,p.au);const v=new N3(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function D3(n,e,t){const s=Qe(n),r=s.Tu.get(e),o=s.Iu.get(r.targetId);if(o.length>1)return s.Iu.set(r.targetId,o.filter((u=>!nf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await v0(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&lg(s.remoteStore,r.targetId),T0(s,r.targetId)})).catch(Rl)):(T0(s,r.targetId),await v0(s.localStore,r.targetId,!0))}async function P3(n,e){const t=Qe(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),lg(t.remoteStore,s.targetId))}async function L3(n,e,t){const s=H3(n);try{const r=await(function(u,h){const m=Qe(u),p=Ht.now(),v=h.reduce(((A,k)=>A.add(k.key)),ht());let _,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let k=pr(),D=ht();return m.Ns.getEntries(A,v).next((I=>{k=I,k.forEach(((V,N)=>{N.isValidDocument()||(D=D.add(V))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,k))).next((I=>{_=I;const V=[];for(const N of h){const G=Q5(N,_.get(N.key).overlayedDocument);G!=null&&V.push(new ba(N.key,G,RA(G.value.mapValue),Ys.exists(!0)))}return m.mutationQueue.addMutationBatch(A,p,V,h)})).next((I=>{T=I;const V=I.applyToLocalDocumentSet(_,D);return m.documentOverlayCache.saveOverlays(A,I.batchId,V)}))})).then((()=>({batchId:T.batchId,changes:HA(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(u,h,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new Wt(dt)),p=p.insert(h,m),u.Vu[u.currentUser.toKey()]=p})(s,r.batchId,t),await uu(s,r.changes),await uf(s.remoteStore)}catch(r){const o=fg(r,"Failed to persist write");t.reject(o)}}async function Aw(n,e){const t=Qe(n);try{const s=await YL(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const u=t.Au.get(o);u&&(wt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?wt(u.hu,14607):r.removedDocuments.size>0&&(wt(u.hu,42227),u.hu=!1))})),await uu(t,s,e)}catch(s){await Rl(s)}}function cE(n,e,t){const s=Qe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((o,u)=>{const h=u.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(u,h){const m=Qe(u);m.onlineState=h;let p=!1;m.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(h)&&(p=!0)})),p&&mg(m)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function U3(n,e,t){const s=Qe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),o=r&&r.key;if(o){let u=new Wt(Ve.comparator);u=u.insert(o,Hn.newNoDocument(o,Ye.min()));const h=ht().add(o),m=new of(Ye.min(),new Map,new Wt(dt),u,h);await Aw(s,m),s.du=s.du.remove(o),s.Au.delete(e),gg(s)}else await v0(s.localStore,e,!1).then((()=>T0(s,e,t))).catch(Rl)}async function j3(n,e){const t=Qe(n),s=e.batch.batchId;try{const r=await $L(t.localStore,e);Nw(t,s,null),ww(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await uu(t,r)}catch(r){await Rl(r)}}async function V3(n,e,t){const s=Qe(n);try{const r=await(function(u,h){const m=Qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return m.mutationQueue.lookupMutationBatch(p,h).next((_=>(wt(_!==null,37113),v=_.keys(),m.mutationQueue.removeMutationBatch(p,_)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,v,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>m.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);Nw(s,e,t),ww(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await uu(s,r)}catch(r){await Rl(r)}}function ww(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Nw(n,e,t){const s=Qe(n);let r=s.Vu[s.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function T0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||kw(n,s)}))}function kw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(lg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),gg(n))}function uE(n,e,t){for(const s of t)s instanceof Tw?(n.Ru.addReference(s.key,e),O3(n,s)):s instanceof Ew?(Ce(pg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||kw(n,s.key)):ze(19791,{wu:s})}function O3(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Ce(pg,"New document in limbo: "+t),n.Eu.add(s),gg(n))}function gg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ve(jt.fromString(e)),s=n.fu.next();n.Au.set(s,new k3(t)),n.du=n.du.insert(t,s),fw(n.remoteStore,new ia(Ni(X0(t.path)),s,"TargetPurposeLimboResolution",Zh.ce))}}async function uu(n,e,t){const s=Qe(n),r=[],o=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,m)=>{u.push(s.pu(m,e,t).then((p=>{var v;if((p||t)&&s.isPrimaryClient){const _=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(p){r.push(p);const _=ag.As(m.targetId,p);o.push(_)}})))})),await Promise.all(u),s.Pu.H_(r),await(async function(m,p){const v=Qe(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>me.forEach(p,(T=>me.forEach(T.Es,(A=>v.persistence.referenceDelegate.addReference(_,T.targetId,A))).next((()=>me.forEach(T.ds,(A=>v.persistence.referenceDelegate.removeReference(_,T.targetId,A)))))))))}catch(_){if(!Ml(_))throw _;Ce(og,"Failed to update sequence numbers: "+_)}for(const _ of p){const T=_.targetId;if(!_.fromCache){const A=v.Ms.get(T),k=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(T,D)}}})(s.localStore,o))}async function G3(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Ce(pg,"User change. New user:",e.toKey());const s=await cw(t.localStore,e);t.currentUser=e,(function(o,u){o.mu.forEach((h=>{h.forEach((m=>{m.reject(new Ae(de.CANCELLED,u))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await uu(t,s.Ls)}}function B3(n,e){const t=Qe(n),s=t.Au.get(e);if(s&&s.hu)return ht().add(s.key);{let r=ht();const o=t.Iu.get(e);if(!o)return r;for(const u of o){const h=t.Tu.get(u);r=r.unionWith(h.view.nu)}return r}}function Cw(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Aw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U3.bind(null,e),e.Pu.H_=S3.bind(null,e.eventManager),e.Pu.yu=A3.bind(null,e.eventManager),e}function H3(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V3.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KL(this.persistence,new zL,e.initialUser,this.serializer)}Cu(e){return new lw(rg.mi,this.serializer)}Du(e){return new ZL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class z3 extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof Nh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new kL(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?fs.withCacheSize(this.cacheSizeBytes):fs.DEFAULT;return new lw((s=>Nh.mi(s,t)),this.serializer)}}class E0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>cE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=G3.bind(null,this.syncEngine),await _3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new E3})()}createDatastore(e){const t=lf(e.databaseInfo.databaseId),s=(function(o){return new i3(o)})(e.databaseInfo);return(function(o,u,h,m){return new l3(o,u,h,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,o,u,h){return new u3(s,r,o,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>cE(this.syncEngine,t,0)),(function(){return sE.v()?new sE:new e3})())}createSyncEngine(e,t){return(function(r,o,u,h,m,p,v){const _=new C3(r,o,u,h,m,p);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const o=Qe(r);Ce(ro,"RemoteStore shutting down."),o.Ea.add(5),await cu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}E0.provider={build:()=>new E0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class F3{constructor(e,t,s,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=Bn.UNAUTHENTICATED,this.clientId=K0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async u=>{Ce(pa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(Ce(pa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=fg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Up(n,e){n.asyncQueue.verifyOperationInProgress(),Ce(pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await cw(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function dE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await q3(n);Ce(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>rE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>rE(e.remoteStore,r))),n._onlineComponents=e}async function q3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ce(pa,"Using user provided OfflineComponentProvider");try{await Up(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;xl("Error using user provided cache. Falling back to memory cache: "+t),await Up(n,new Ch)}}else Ce(pa,"Using default OfflineComponentProvider"),await Up(n,new z3(void 0));return n._offlineComponents}async function Rw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ce(pa,"Using user provided OnlineComponentProvider"),await dE(n,n._uninitializedComponentsProvider._online)):(Ce(pa,"Using default OnlineComponentProvider"),await dE(n,new E0))),n._onlineComponents}function K3(n){return Rw(n).then((e=>e.syncEngine))}async function Mw(n){const e=await Rw(n),t=e.eventManager;return t.onListen=I3.bind(null,e.syncEngine),t.onUnlisten=D3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=R3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=P3.bind(null,e.syncEngine),t}function $3(n,e,t={}){const s=new ur;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,m,p){const v=new Iw({next:T=>{v.Nu(),u.enqueueAndForget((()=>bw(o,_)));const A=T.docs.has(h);!A&&T.fromCache?p.reject(new Ae(de.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&m&&m.source==="server"?p.reject(new Ae(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new _w(X0(h.path),v,{includeMetadataChanges:!0,qa:!0});return vw(o,_)})(await Mw(n),n.asyncQueue,e,t,s))),s.promise}function Y3(n,e,t={}){const s=new ur;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,h,m,p){const v=new Iw({next:T=>{v.Nu(),u.enqueueAndForget((()=>bw(o,_))),T.fromCache&&m.source==="server"?p.reject(new Ae(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new _w(h,v,{includeMetadataChanges:!0,qa:!0});return vw(o,_)})(await Mw(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="firestore.googleapis.com",fE=!0;class mE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Pw,this.ssl=fE}else this.host=e.host,this.ssl=e.ssl??fE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ow;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wL)throw new Ae(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ae(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class df{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Z6;switch(s.type){case"firstParty":return new s5(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ae(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=hE.get(t);s&&(Ce("ComponentProvider","Removing Datastore"),hE.delete(t),s.terminate())})(this),Promise.resolve()}}function J3(n,e,t,s={}){var p;n=ui(n,df);const r=kl(e),o=n._getSettings(),u={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;r&&(iA(`https://${h}`),rA("Firestore",!0)),o.host!==Pw&&o.host!==h&&xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:r,emulatorOptions:s};if(!no(m,u)&&(n._setSettings(m),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Bn.MOCK_USER;else{v=SP(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ae(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Bn(T)}n._authCredentials=new e5(new vA(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _a(this.firestore,e,this._query)}}class ln{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(au(t,ln._jsonSchema))return new ln(e,s||null,new Ve(jt.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:pn("string",ln._jsonSchemaVersion),referencePath:pn("string")};class ca extends _a{constructor(e,t,s){super(e,t,X0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Ve(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function fo(n,e,...t){if(n=Pn(n),bA("collection","path",e),n instanceof df){const s=jt.fromString(e,...t);return NT(s),new ca(n,null,s)}{if(!(n instanceof ln||n instanceof ca))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(jt.fromString(e,...t));return NT(s),new ca(n.firestore,null,s)}}function fi(n,e,...t){if(n=Pn(n),arguments.length===1&&(e=K0.newId()),bA("doc","path",e),n instanceof df){const s=jt.fromString(e,...t);return wT(s),new ln(n,null,new Ve(s))}{if(!(n instanceof ln||n instanceof ca))throw new Ae(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(jt.fromString(e,...t));return wT(s),new ln(n.firestore,n instanceof ca?n.converter:null,new Ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="AsyncQueue";class gE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dw(this,"async_queue_retry"),this._c=()=>{const s=Lp();s&&Ce(pE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ur;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;Ce(pE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",xE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=hg.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&ze(47125,{Pc:xE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class mo extends df{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new gE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gE(e),this._firestoreClient=void 0,await e}}}function Q3(n,e){const t=typeof n=="object"?n:cA(),s=typeof n=="string"?n:bh,r=F0(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const o=TP("firestore");o&&J3(r,...o)}return r}function xg(n){if(n._terminated)throw new Ae(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||W3(n),n._firestoreClient}function W3(n){var s,r,o;const e=n._freezeSettings(),t=(function(h,m,p,v){return new _5(h,m,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Dw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new F3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(Ln.fromBase64String(e))}catch(t){throw new Ae(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ks(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(au(e,Ks._jsonSchema))return Ks.fromBase64String(e.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:pn("string",Ks._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ci._jsonSchemaVersion}}static fromJSON(e){if(au(e,Ci._jsonSchema))return new Ci(e.latitude,e.longitude)}}Ci._jsonSchemaVersion="firestore/geoPoint/1.0",Ci._jsonSchema={type:pn("string",Ci._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(au(e,Ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ii(e.vectorValues);throw new Ae(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ii._jsonSchemaVersion="firestore/vectorValue/1.0",Ii._jsonSchema={type:pn("string",Ii._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=/^__.*__$/;class Z3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ba(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class Lw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ba(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Uw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:n})}}class vg{constructor(e,t,s,r,o,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ih(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Uw(this.Ac)&&X3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eU{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||lf(e)}Cc(e,t,s,r=!1){return new vg({Ac:e,methodName:t,Dc:s,path:Dn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ff(n){const e=n._freezeSettings(),t=lf(n._databaseId);return new eU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jw(n,e,t,s,r,o={}){const u=n.Cc(o.merge||o.mergeFields?2:0,e,t,r);bg("Data must be an object, but it was:",u,s);const h=Vw(s,u);let m,p;if(o.merge)m=new ws(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const v=[];for(const _ of o.mergeFields){const T=S0(e,_,t);if(!u.contains(T))throw new Ae(de.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Gw(v,T)||v.push(T)}m=new ws(v),p=u.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,p=u.fieldTransforms;return new Z3(new ms(h),m,p)}class mf extends yg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mf}}function tU(n,e,t,s){const r=n.Cc(1,e,t);bg("Data must be an object, but it was:",r,s);const o=[],u=ms.empty();va(s,((m,p)=>{const v=_g(e,m,t);p=Pn(p);const _=r.yc(v);if(p instanceof mf)o.push(v);else{const T=du(p,_);T!=null&&(o.push(v),u.set(v,T))}}));const h=new ws(o);return new Lw(u,h,r.fieldTransforms)}function nU(n,e,t,s,r,o){const u=n.Cc(1,e,t),h=[S0(e,s,t)],m=[r];if(o.length%2!=0)throw new Ae(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(S0(e,o[T])),m.push(o[T+1]);const p=[],v=ms.empty();for(let T=h.length-1;T>=0;--T)if(!Gw(p,h[T])){const A=h[T];let k=m[T];k=Pn(k);const D=u.yc(A);if(k instanceof mf)p.push(A);else{const I=du(k,D);I!=null&&(p.push(A),v.set(A,I))}}const _=new ws(p);return new Lw(v,_,u.fieldTransforms)}function sU(n,e,t,s=!1){return du(t,n.Cc(s?4:3,e))}function du(n,e){if(Ow(n=Pn(n)))return bg("Unsupported field value:",e,n),Vw(n,e);if(n instanceof yg)return(function(s,r){if(!Uw(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const o=[];let u=0;for(const h of s){let m=du(h,r.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}})(n,e)}return(function(s,r){if((s=Pn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return F5(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=Ht.fromDate(s);return{timestampValue:wh(r.serializer,o)}}if(s instanceof Ht){const o=new Ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:wh(r.serializer,o)}}if(s instanceof Ci)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ks)return{bytesValue:ew(r.serializer,s._byteString)};if(s instanceof ln){const o=r.databaseId,u=s.firestore._databaseId;if(!u.isEqual(o))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sg(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Ii)return(function(u,h){return{mapValue:{fields:{[CA]:{stringValue:IA},[_h]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return Z0(h.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Xh(s)}`)})(n,e)}function Vw(n,e){const t={};return EA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(n,((s,r)=>{const o=du(r,e.mc(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function Ow(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof Ci||n instanceof Ks||n instanceof ln||n instanceof yg||n instanceof Ii)}function bg(n,e,t){if(!Ow(t)||!_A(t)){const s=Xh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function S0(n,e,t){if((e=Pn(e))instanceof hf)return e._internalPath;if(typeof e=="string")return _g(n,e);throw Ih("Field path arguments must be of type string or ",n,!1,void 0,t)}const iU=new RegExp("[~\\*/\\[\\]]");function _g(n,e,t){if(e.search(iU)>=0)throw Ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hf(...e.split("."))._internalPath}catch{throw Ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ih(n,e,t,s,r){const o=s&&!s.isEmpty(),u=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||u)&&(m+=" (found",o&&(m+=` in field ${s}`),u&&(m+=` in document ${r}`),m+=")"),new Ae(de.INVALID_ARGUMENT,h+n+m)}function Gw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,t,s,r,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rU extends Bw{data(){return super.data()}}function pf(n,e){return typeof e=="string"?_g(n,e):e instanceof hf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class Eg extends Tg{}function hu(n,e,...t){let s=[];e instanceof Tg&&s.push(e),s=s.concat(t),(function(o){const u=o.filter((m=>m instanceof Sg)).length,h=o.filter((m=>m instanceof gf)).length;if(u>1||u>0&&h>0)throw new Ae(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class gf extends Eg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new gf(e,t,s)}_apply(e){const t=this._parse(e);return zw(e._query,t),new _a(e.firestore,e.converter,m0(e._query,t))}_parse(e){const t=ff(e.firestore);return(function(o,u,h,m,p,v,_){let T;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){vE(_,v);const k=[];for(const D of _)k.push(yE(m,o,D));T={arrayValue:{values:k}}}else T=yE(m,o,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||vE(_,v),T=sU(h,u,_,v==="in"||v==="not-in");return mn.create(p,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Rh(n,e,t){const s=e,r=pf("where",n);return gf._create(r,s,t)}class Sg extends Tg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let u=r;const h=o.getFlattenedFilters();for(const m of h)zw(u,m),u=m0(u,m)})(e._query,t),new _a(e.firestore,e.converter,m0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends Eg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ag(e,t)}_apply(e){const t=(function(r,o,u){if(r.startAt!==null)throw new Ae(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ae(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zc(o,u)})(e._query,this._field,this._direction);return new _a(e.firestore,e.converter,(function(r,o){const u=r.explicitOrderBy.concat([o]);return new Dl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function Hw(n,e="asc"){const t=e,s=pf("orderBy",n);return Ag._create(s,t)}class wg extends Eg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new wg(e,t,s)}_apply(e){return new _a(e.firestore,e.converter,Eh(e._query,this._limit,this._limitType))}}function oU(n){return u5("limit",n),wg._create("limit",n,"F")}function yE(n,e,t){if(typeof(t=Pn(t))=="string"){if(t==="")throw new Ae(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VA(e)&&t.indexOf("/")!==-1)throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(jt.fromString(t));if(!Ve.isDocumentKey(s))throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return LT(n,new Ve(s))}if(t instanceof ln)return LT(n,t._key);throw new Ae(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(t)}.`)}function vE(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zw(n,e){const t=(function(r,o){for(const u of r)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lU{convertValue(e,t="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return va(e,((r,o)=>{s[r]=this.convertValue(o,t)})),s}convertVectorValue(e){var s,r,o;const t=(o=(r=(s=e.fields)==null?void 0:s[_h].arrayValue)==null?void 0:r.values)==null?void 0:o.map((u=>on(u.doubleValue)));return new Ii(t)}convertGeoPoint(e){return new Ci(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const t=da(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=jt.fromString(e);wt(aw(s),9688,{name:e});const r=new Wc(s.get(1),s.get(3)),o=new Ve(s.popFirst(5));return r.isEqual(t)||mr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Gc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eo extends Bw{constructor(e,t,s,r,o,u){super(e,t,s,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(pf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",eo._jsonSchema={type:pn("string",eo._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class sh extends eo{data(e={}){return super.data(e)}}class hl{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Gc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new sh(this._firestore,this._userDataWriter,s.key,s,new Gc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((h=>{const m=new sh(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Gc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const m=new sh(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Gc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:cU(h.type),doc:m,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n){n=ui(n,ln);const e=ui(n.firestore,mo);return $3(xg(e),n._key).then((t=>dU(e,n,t)))}hl._jsonSchemaVersion="firestore/querySnapshot/1.0",hl._jsonSchema={type:pn("string",hl._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};class Kw extends lU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function Ll(n){n=ui(n,_a);const e=ui(n.firestore,mo),t=xg(e),s=new Kw(e);return aU(n._query),Y3(t,n._query).then((r=>new hl(e,s,n,r)))}function fu(n,e,t){n=ui(n,ln);const s=ui(n.firestore,mo),r=Fw(n.converter,e,t);return xf(s,[jw(ff(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Ys.none())])}function $w(n,e,t,...s){n=ui(n,ln);const r=ui(n.firestore,mo),o=ff(r);let u;return u=typeof(e=Pn(e))=="string"||e instanceof hf?nU(o,"updateDoc",n._key,e,t,s):tU(o,"updateDoc",n._key,e),xf(r,[u.toMutation(n._key,Ys.exists(!0))])}function Ng(n){return xf(ui(n.firestore,mo),[new eg(n._key,Ys.none())])}function uU(n,e){const t=ui(n.firestore,mo),s=fi(n),r=Fw(n.converter,e);return xf(t,[jw(ff(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Ys.exists(!1))]).then((()=>s))}function xf(n,e){return(function(s,r){const o=new ur;return s.asyncQueue.enqueueAndForget((async()=>L3(await K3(s),r,o))),o.promise})(xg(n),e)}function dU(n,e,t){const s=t.docs.get(e._key),r=new Kw(n);return new eo(n,r,e._key,s,new Gc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Il=r})(Cl),gl(new so("firestore",((s,{instanceIdentifier:r,options:o})=>{const u=s.getProvider("app").getImmediate(),h=new mo(new t5(s.getProvider("auth-internal")),new i5(u,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(p.options.projectId,v)})(u,r),u);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),oa(TT,ET,e),oa(TT,ET,"esm2020")})();function Yw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hU=Yw,Jw=new iu("auth","Firebase",Yw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new H0("@firebase/auth");function fU(n,...e){Mh.logLevel<=ut.WARN&&Mh.warn(`Auth (${Cl}): ${n}`,...e)}function ih(n,...e){Mh.logLevel<=ut.ERROR&&Mh.error(`Auth (${Cl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(n,...e){throw Cg(n,...e)}function ci(n,...e){return Cg(n,...e)}function kg(n,e,t){const s={...hU(),[e]:t};return new iu("auth","Firebase",s).create(e,{appName:n.name})}function to(n){return kg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mU(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Di(n,"argument-error"),kg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return Jw.create(n,...e)}function qe(n,e,...t){if(!n)throw Cg(e,...t)}function or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ih(e),new Error(e)}function gr(n,e){n||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function pU(){return bE()==="http:"||bE()==="https:"}function bE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pU()||IP()||"connection"in navigator)?navigator.onLine:!0}function xU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,gr(t>e,"Short delay should be less than long delay!"),this.isMobile=NP()||RP()}get(){return gU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(n,e){gr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bU=new mu(3e4,6e4);function Rg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ul(n,e,t,s,r={}){return Ww(n,r,async()=>{let o={},u={};s&&(e==="GET"?u=s:o={body:JSON.stringify(s)});const h=ru({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...o};return CP()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&kl(n.emulatorConfig.host)&&(p.credentials="include"),Qw.fetch()(await Xw(n,n.config.apiHost,t,h),p)})}async function Ww(n,e,t){n._canInitEmulator=!1;const s={...yU,...e};try{const r=new TU(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Kd(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Kd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Kd(n,"user-disabled",u);const v=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw kg(n,v,p);Di(n,v)}}catch(r){if(r instanceof br)throw r;Di(n,"network-request-failed",{message:String(r)})}}async function _U(n,e,t,s,r={}){const o=await Ul(n,e,t,s,r);return"mfaPendingCredential"in o&&Di(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Xw(n,e,t,s){const r=`${e}${t}?${s}`,o=n,u=o.config.emulator?Ig(n.config,r):`${n.config.apiScheme}://${r}`;return vU.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}class TU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ci(this.auth,"network-request-failed")),bU.get())})}}function Kd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=ci(n,e,s);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(n,e){return Ul(n,"POST","/v1/accounts:delete",e)}async function Dh(n,e){return Ul(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SU(n,e=!1){const t=Pn(n),s=await t.getIdToken(e),r=Mg(s);qe(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:r,token:s,authTime:Kc(jp(r.auth_time)),issuedAtTime:Kc(jp(r.iat)),expirationTime:Kc(jp(r.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function jp(n){return Number(n)*1e3}function Mg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const r=eA(t);return r?JSON.parse(r):(ih("Failed to decode base64 JWT payload"),null)}catch(r){return ih("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function _E(n){const e=Mg(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof br&&AU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function AU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(n){var _;const e=n.auth,t=await n.getIdToken(),s=await nu(n,Dh(e,{idToken:t}));qe(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?Zw(r.providerUserInfo):[],u=kU(n.providerData,o),h=n.isAnonymous,m=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),p=h?m:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new w0(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function NU(n){const e=Pn(n);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kU(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Zw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(n,e){const t=await Ww(n,{},async()=>{const s=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,u=await Xw(n,r,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:s};return n.emulatorConfig&&kl(n.emulatorConfig.host)&&(m.credentials="include"),Qw.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IU(n,e){return Ul(n,"POST","/v2/accounts:revokeToken",Rg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=_E(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:o}=await CU(e,t);this.updateTokensAndExpiration(s,r,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:o}=t,u=new fl;return s&&(qe(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),r&&(qe(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),o&&(qe(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new wU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new w0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await nu(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SU(this,e)}reload(){return NU(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(to(this.auth));const e=await this.getIdToken();return await nu(this,EU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:A,providerData:k,stsTokenManager:D}=t;qe(_&&D,e,"internal-error");const I=fl.fromJSON(this.name,D);qe(typeof _=="string",e,"internal-error"),ea(s,e.name),ea(r,e.name),qe(typeof T=="boolean",e,"internal-error"),qe(typeof A=="boolean",e,"internal-error"),ea(o,e.name),ea(u,e.name),ea(h,e.name),ea(m,e.name),ea(p,e.name),ea(v,e.name);const V=new ai({uid:_,auth:e,email:r,emailVerified:T,displayName:s,isAnonymous:A,photoURL:u,phoneNumber:o,tenantId:h,stsTokenManager:I,createdAt:p,lastLoginAt:v});return k&&Array.isArray(k)&&(V.providerData=k.map(N=>({...N}))),m&&(V._redirectEventId=m),V}static async _fromIdTokenResponse(e,t,s=!1){const r=new fl;r.updateFromServerResponse(t);const o=new ai({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ph(o),o}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];qe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Zw(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new fl;h.updateFromIdToken(s);const m=new ai({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new w0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new Map;function lr(n){gr(n instanceof Function,"Expected a class definition");let e=TE.get(n);return e?(gr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,TE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}e1.type="NONE";const EE=e1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n,e,t){return`firebase:${n}:${e}:${t}`}class ml{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:o}=this.auth;this.fullUserKey=rh(this.userKey,r.apiKey,o),this.fullPersistenceKey=rh("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Dh(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ml(lr(EE),e,s);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||lr(EE);const u=rh(s,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(u);if(v){let _;if(typeof v=="string"){const T=await Dh(e,{idToken:v}).catch(()=>{});if(!T)break;_=await ai._fromGetAccountInfoResponse(e,T,v)}else _=ai._fromJSON(e,v);p!==o&&(h=_),o=p;break}}catch{}const m=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new ml(o,e,s):(o=m[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new ml(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(i1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(a1(e))return"Blackberry";if(o1(e))return"Webos";if(n1(e))return"Safari";if((e.includes("chrome/")||s1(e))&&!e.includes("edge/"))return"Chrome";if(r1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function t1(n=qn()){return/firefox\//i.test(n)}function n1(n=qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function s1(n=qn()){return/crios\//i.test(n)}function i1(n=qn()){return/iemobile/i.test(n)}function r1(n=qn()){return/android/i.test(n)}function a1(n=qn()){return/blackberry/i.test(n)}function o1(n=qn()){return/webos/i.test(n)}function Dg(n=qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RU(n=qn()){var e;return Dg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function MU(){return MP()&&document.documentMode===10}function l1(n=qn()){return Dg(n)||r1(n)||o1(n)||a1(n)||/windows phone/i.test(n)||i1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n,e=[]){let t;switch(n){case"Browser":t=SE(qn());break;case"Worker":t=`${SE(qn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((u,h)=>{try{const m=e(o);u(m)}catch(m){h(m)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e={}){return Ul(n,"GET","/v2/passwordPolicy",Rg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=6;class UU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??LU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AE(this),this.idTokenSubscription=new AE(this),this.beforeStateQueue=new DU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(async()=>{var s,r,o;if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Dh(this,{idToken:e}),s=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ri(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&(m!=null&&m.user)&&(s=m.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(to(this));const t=e?Pn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(to(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(to(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PU(this),t=new UU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new iu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await IU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&lr(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,r);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&fU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yf(n){return Pn(n)}class AE{constructor(e){this.auth=e,this.observer=null,this.addObserver=GP(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VU(n){Pg=n}function OU(n){return Pg.loadJS(n)}function GU(){return Pg.gapiScript}function BU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(n,e){const t=F0(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(no(o,e??{}))return r;Di(r,"already-initialized")}return t.initialize({options:e})}function zU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(lr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function FU(n,e,t){const s=yf(n);qe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,o=u1(e),{host:u,port:h}=qU(e),m=h===null?"":`:${h}`,p={url:`${o}//${u}${m}/`},v=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){qe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),qe(no(p,s.config.emulator)&&no(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,kl(u)?(iA(`${o}//${u}${m}`),rA("Auth",!0)):KU()}function u1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qU(n){const e=u1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const o=r[1];return{host:o,port:wE(s.substr(o.length+1))}}else{const[o,u]=s.split(":");return{host:o,port:wE(u)}}}function wE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function KU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,t){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(n,e){return _U(n,"POST","/v1/accounts:signInWithIdp",Rg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="http://localhost";class ao extends d1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Di("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...o}=t;if(!s||!r)return null;const u=new ao(s,r);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return pl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,pl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pl(e,t)}buildRequest(){const e={requestUri:$U,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Lg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends pu{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ao._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ar.credential(t,s)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends pu{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return na.credential(e.oauthAccessToken)}catch{return null}}}na.GITHUB_SIGN_IN_METHOD="github.com";na.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends pu{constructor(){super("twitter.com")}static credential(e,t){return ao._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return sa.credential(t,s)}catch{return null}}}sa.TWITTER_SIGN_IN_METHOD="twitter.com";sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const o=await ai._fromIdTokenResponse(e,s,r),u=NE(s);return new El({user:o,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=NE(s);return new El({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function NE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends br{constructor(e,t,s,r){super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new Lh(e,t,s,r)}}function h1(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(n,o,e,s):o})}async function YU(n,e,t=!1){const s=await nu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return El._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(n,e,t=!1){const{auth:s}=n;if(ri(s.app))return Promise.reject(to(s));const r="reauthenticate";try{const o=await nu(n,h1(s,r,e,n),t);qe(o.idToken,s,"internal-error");const u=Mg(o.idToken);qe(u,s,"internal-error");const{sub:h}=u;return qe(n.uid===h,s,"user-mismatch"),El._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Di(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(n,e,t=!1){if(ri(n.app))return Promise.reject(to(n));const s="signIn",r=await h1(n,s,e),o=await El._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(o.user),o}function WU(n,e,t,s){return Pn(n).onIdTokenChanged(e,t,s)}function XU(n,e,t){return Pn(n).beforeAuthStateChanged(e,t)}function ZU(n,e,t,s){return Pn(n).onAuthStateChanged(e,t,s)}function ej(n){return Pn(n).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=1e3,nj=10;class m1 extends f1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},o=this.storage.getItem(s);MU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,nj):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},tj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}m1.type="LOCAL";const sj=m1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends f1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}p1.type="SESSION";const g1=p1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new vf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:o}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const h=Array.from(u).map(async p=>p(t.origin,o)),m=await ij(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,u;return new Promise((h,m)=>{const p=Ug("",20);r.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:r,onMessage(_){const T=_;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(v),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return window}function aj(n){Ri().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}async function oj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function cj(){return x1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firebaseLocalStorageDb",uj=1,jh="firebaseLocalStorage",v1="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bf(n,e){return n.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function dj(){const n=indexedDB.deleteDatabase(y1);return new gu(n).toPromise()}function N0(){const n=indexedDB.open(y1,uj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(jh,{keyPath:v1})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(jh)?e(s):(s.close(),await dj(),e(await N0()))})})}async function kE(n,e,t){const s=bf(n,!0).put({[v1]:e,value:t});return new gu(s).toPromise()}async function hj(n,e){const t=bf(n,!1).get(e),s=await new gu(t).toPromise();return s===void 0?null:s.value}function CE(n,e){const t=bf(n,!0).delete(e);return new gu(t).toPromise()}const fj=800,mj=3;class b1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>mj)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(cj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await oj(),!this.activeServiceWorker)return;this.sender=new rj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N0();return await kE(e,Uh,"1"),await CE(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>kE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>hj(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=bf(r,!1).getAll();return new gu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b1.type="LOCAL";const pj=b1;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n,e){return e?lr(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends d1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gj(n){return QU(n.auth,new jg(n),n.bypassAuthState)}function xj(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),JU(t,new jg(n),n.bypassAuthState)}async function yj(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),YU(t,new jg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,t,s,r,o=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gj;case"linkViaPopup":case"linkViaRedirect":return yj;case"reauthViaPopup":case"reauthViaRedirect":return xj;default:Di(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new mu(2e3,1e4);async function bj(n,e,t){if(ri(n.app))return Promise.reject(ci(n,"operation-not-supported-in-this-environment"));const s=yf(n);mU(n,e,Lg);const r=_1(s,t);return new Xa(s,"signInViaPopup",e,r).executeNotNull()}class Xa extends T1{constructor(e,t,s,r,o){super(e,t,r,o),this.provider=s,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vj.get())};e()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="pendingRedirect",ah=new Map;class Tj extends T1{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ah.get(this.auth._key());if(!e){try{const s=await Ej(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ah.set(this.auth._key(),e)}return this.bypassAuthState||ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ej(n,e){const t=wj(e),s=Aj(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function Sj(n,e){ah.set(n._key(),e)}function Aj(n){return lr(n._redirectPersistence)}function wj(n){return rh(_j,n.config.apiKey,n.name)}async function Nj(n,e,t=!1){if(ri(n.app))return Promise.reject(to(n));const s=yf(n),r=_1(s,e),u=await new Tj(s,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=600*1e3;class Cj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ij(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!E1(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(ci(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kj&&this.cachedEventUids.clear(),this.cachedEventUids.has(IE(e))}saveEventToCache(e){this.cachedEventUids.add(IE(e)),this.lastProcessedEventTime=Date.now()}}function IE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function E1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ij(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(n,e={}){return Ul(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dj=/^https?/;async function Pj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Rj(n);for(const t of e)try{if(Lj(t))return}catch{}Di(n,"unauthorized-domain")}function Lj(n){const e=A0(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!Dj.test(t))return!1;if(Mj.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=new mu(3e4,6e4);function RE(){const n=Ri().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jj(n){return new Promise((e,t)=>{var r,o,u;function s(){RE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RE(),t(ci(n,"network-request-failed"))},timeout:Uj.get()})}if((o=(r=Ri().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((u=Ri().gapi)!=null&&u.load)s();else{const h=BU("iframefcb");return Ri()[h]=()=>{gapi.load?s():t(ci(n,"network-request-failed"))},OU(`${GU()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw oh=null,e})}let oh=null;function Vj(n){return oh=oh||jj(n),oh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new mu(5e3,15e3),Gj="__/auth/iframe",Bj="emulator/auth/iframe",Hj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fj(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ig(e,Bj):`https://${n.config.authDomain}/${Gj}`,s={apiKey:e.apiKey,appName:n.name,v:Cl},r=zj.get(n.config.apiHost);r&&(s.eid=r);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${ru(s).slice(1)}`}async function qj(n){const e=await Vj(n),t=Ri().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:Fj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hj,dontclear:!0},s=>new Promise(async(r,o)=>{await s.restyle({setHideOnLeave:!1});const u=ci(n,"network-request-failed"),h=Ri().setTimeout(()=>{o(u)},Oj.get());function m(){Ri().clearTimeout(h),r(s)}s.ping(m).then(m,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$j=500,Yj=600,Jj="_blank",Qj="http://localhost";class ME{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Wj(n,e,t,s=$j,r=Yj){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const m={...Kj,width:s.toString(),height:r.toString(),top:o,left:u},p=qn().toLowerCase();t&&(h=s1(p)?Jj:t),t1(p)&&(e=e||Qj,m.scrollbars="yes");const v=Object.entries(m).reduce((T,[A,k])=>`${T}${A}=${k},`,"");if(RU(p)&&h!=="_self")return Xj(e||"",h),new ME(null);const _=window.open(e||"",h,v);qe(_,n,"popup-blocked");try{_.focus()}catch{}return new ME(_)}function Xj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="__/auth/handler",eV="emulator/auth/handler",tV=encodeURIComponent("fac");async function DE(n,e,t,s,r,o){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Cl,eventId:r};if(e instanceof Lg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",OP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof pu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const m=await n._getAppCheckToken(),p=m?`#${tV}=${encodeURIComponent(m)}`:"";return`${nV(n)}?${ru(h).slice(1)}${p}`}function nV({config:n}){return n.emulator?Ig(n,eV):`https://${n.authDomain}/${Zj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="webStorageSupport";class sV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g1,this._completeRedirectFn=Nj,this._overrideRedirectResult=Sj}async _openPopup(e,t,s,r){var u;gr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const o=await DE(e,t,s,A0(),r);return Wj(e,o,Ug())}async _openRedirect(e,t,s,r){await this._originValidation(e);const o=await DE(e,t,s,A0(),r);return aj(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(gr(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await qj(e),s=new Cj(e);return t.register("authEvent",r=>(qe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vp,{type:Vp},r=>{var u;const o=(u=r==null?void 0:r[0])==null?void 0:u[Vp];o!==void 0&&t(!!o),Di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return l1()||n1()||Dg()}}const iV=sV;var PE="@firebase/auth",LE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oV(n){gl(new so("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;qe(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c1(n)},p=new jU(s,r,o,m);return zU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),gl(new so("auth-internal",e=>{const t=yf(e.getProvider("auth").getImmediate());return(s=>new rV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oa(PE,LE,aV(n)),oa(PE,LE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=300,cV=sA("authIdTokenMaxAge")||lV;let UE=null;const uV=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>cV)return;const r=t==null?void 0:t.token;UE!==r&&(UE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function dV(n=cA()){const e=F0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=HU(n,{popupRedirectResolver:iV,persistence:[pj,sj,g1]}),s=sA("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const u=uV(o.toString());XU(t,u,()=>u(t.currentUser)),WU(t,h=>u(h))}}const r=tA("auth");return r&&FU(t,`http://${r}`),t}function hV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}VU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const o=ci("internal-error");o.customData=r,t(o)},s.type="text/javascript",s.charset="UTF-8",hV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oV("Browser");const fV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},S1=lA(fV),Un=Q3(S1),Vg=dV(S1),mV=new ar;console.log("Firebase Service Initialized for: fajmuls-learning");const A1="benchmark_scores",w1="global_leaderboard",Og="test_packages",Li="users",pV=n=>ZU(Vg,n),gV=async()=>{try{return(await bj(Vg,mV)).user}catch(n){throw console.error("Error signing in with Google",n),n}},xV=async()=>{try{await ej(Vg)}catch(n){console.error("Error signing out",n)}},yV=async n=>{const e=hu(fo(Un,Li),Rh("username_lowercase","==",n.toLowerCase()));return(await Ll(e)).empty},jE=async n=>{const e=fi(Un,Li,n),t=await qw(e);return t.exists()?t.data():null},vV=async(n,e)=>{await fu(fi(Un,Li,n),{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0})},bV=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await $w(fi(Un,Li,n),t)},_V=async(n,e)=>{try{const t=e.timestamp?`sess-${e.timestamp}`:`sess-${Date.now()}`;await fu(fi(Un,Li,n,"sessions",t),{...e,id:t}),console.log(`Session ${t} saved to cloud`)}catch(t){throw console.error("Error saving session to cloud",t),t}},TV=async n=>{try{const e=hu(fo(Un,Li,n,"sessions"),Hw("timestamp","desc")),t=await Ll(e),s=[];return t.forEach(r=>{s.push({...r.data(),id:r.id})}),s}catch(e){return console.error("Error fetching all saved sessions",e),[]}},VE=async(n,e)=>{try{await Ng(fi(Un,Li,n,"sessions",e)),console.log(`Cloud session ${e} deleted`)}catch(t){console.error("Error deleting session from cloud",t)}},EV=async n=>{console.log("clearSessionFromCloud called - Use deleteSavedSession for specific items")},OE=async(n,e)=>{try{await fu(fi(Un,Li,n,"history",e.id),e),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},SV=async n=>{try{const e=hu(fo(Un,Li,n,"history")),t=await Ll(e),s=[];return t.forEach(r=>{s.push(r.data())}),s.sort((r,o)=>new Date(o.date).getTime()-new Date(r.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},AV=async(n,e)=>{try{await Ng(fi(Un,Li,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},GE=async(n,e,t,s,r,o)=>{if(!r||r.startsWith("guest-"))return;const u=`${n}_${e}_${r}`,h=fi(Un,w1,u);try{const m=await qw(h);if(m.exists()){const p=m.data();t>p.score&&(await $w(h,{score:t,packageName:o||p.packageName,timestamp:Date.now(),username:s}),console.log(`Global Leaderboard Updated: ${n} - ${t}`))}else{const p={uid:r,username:s,category:n,subCategory:e,score:t,packageName:o,timestamp:Date.now()};await fu(h,p),console.log(`Global Leaderboard Entry Created: ${n} - ${t}`)}}catch(m){console.error("Error saving to global leaderboard",m)}},$d=async(n,e,t=50)=>{try{const s=hu(fo(Un,w1),Rh("category","==",n),Rh("subCategory","==",e),Hw("score","desc"),oU(t)),r=await Ll(s),o=[];return r.forEach(u=>o.push(u.data())),o}catch(s){return console.error(`Error fetching leaderboard for ${n}/${e}:`,s),[]}},wV=async(n,e,t,s)=>{try{await uU(fo(Un,A1),{game:n,score:e,username:t,unit:s,timestamp:Date.now()}),console.log(`Score saved to Cloud Leaderboard: ${n} - ${e}`)}catch(r){console.error("Error saving score to Firebase:",r)}},NV=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=hu(fo(Un,A1),Rh("game","==",n)),r=await Ll(s),o=[];r.forEach(m=>{o.push({id:m.id,...m.data()})}),o.sort((m,p)=>t?m.score-p.score:p.score-m.score);const u=[],h=new Set;for(const m of o){const p=m.username.toLowerCase().trim();if(h.has(p)||(u.push(m),h.add(p)),u.length>=e)break}return u}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},BE=async n=>{try{const e=JSON.parse(JSON.stringify(n));await fu(fi(Un,Og,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},kV=async()=>{try{const n=await Ll(fo(Un,Og)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},CV=async n=>{try{await Ng(fi(Un,Og,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}};class IV{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(vb[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const r=this.audioCache[e];r.currentTime=0;const o=r.play();o!==void 0&&o.catch(()=>{});return}const t=vb[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const oe=new IV;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),HE=n=>{const e=MV(n);return e.charAt(0).toUpperCase()+e.slice(1)},N1=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),DV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:o,iconNode:u,...h},m)=>z.createElement("svg",{ref:m,...PV,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:N1("lucide",r),...!o&&!DV(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,v])=>z.createElement(p,v)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(n,e)=>{const t=z.forwardRef(({className:s,...r},o)=>z.createElement(LV,{ref:o,iconNode:e,className:N1(`lucide-${RV(HE(n))}`,`lucide-${n}`,s),...r}));return t.displayName=HE(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ns=ye("activity",UV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jV=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Et=ye("arrow-left",jV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],OV=ye("arrow-up",VV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],k1=ye("award",GV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],HV=ye("bell-off",BV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],FV=ye("bell",zV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],zE=ye("book-open",qV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],_f=ye("book",KV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],qs=ye("brain",$V);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],C1=ye("briefcase",YV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],QV=ye("building-2",JV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],XV=ye("calculator",WV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],I1=ye("calendar",ZV);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],tO=ye("camera",eO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],$c=ye("chart-no-axes-column",nO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],iO=ye("chevron-down",sO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Za=ye("chevron-right",rO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ks=ye("circle-check-big",aO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],R1=ye("circle-play",oO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jl=ye("circle-x",lO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ga=ye("clock",cO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],FE=ye("cloud-upload",uO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Vh=ye("copy",dO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],fO=ye("crown",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],M1=ye("download",mO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],gO=ye("external-link",pO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],D1=ye("eye",xO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],vO=ye("file-search",yO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dr=ye("file-text",bO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],TO=ye("flag",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],SO=ye("folder-open",EO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wO=ye("funnel",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],kO=ye("git-merge",NO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],IO=ye("globe",CO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Gg=ye("graduation-cap",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],xr=ye("grid-3x3",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Oh=ye("hash",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Tf=ye("heart",PO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ef=ye("history",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jO=ye("info",UO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],OO=ye("landmark",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],BO=ye("layout-grid",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],P1=ye("lightbulb",HO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fn=ye("loader-circle",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qO=ye("lock",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$O=ye("log-out",KO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Gh=ye("map",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],qE=ye("medal",JO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],WO=ye("message-circle",QO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Sf=ye("message-square",XO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],L1=ye("moon",ZO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],t9=ye("music",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],U1=ye("package",n9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],j1=ye("palette",s9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],su=ye("pause",i9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],KE=ye("pen-tool",r9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],o9=ye("pen",a9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],xu=ye("play",l9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],u9=ye("plus",c9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],h9=ye("refresh-cw",d9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],m9=ye("repeat",f9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],g9=ye("rocket",p9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],k0=ye("rotate-ccw",x9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Af=ye("save",y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lh=ye("search",v9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],V1=ye("settings",b9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],T9=ye("shapes",_9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],S9=ye("share-2",E9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],w9=ye("shield-check",A9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],O1=ye("sun",N9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],oo=ye("target",k9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],C0=ye("timer",C9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lo=ye("trash-2",I9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],M9=ye("trending-up",R9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bh=ye("triangle-alert",D9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Sl=ye("trophy",P9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Hh=ye("type",L9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Bg=ye("upload",U9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],G1=ye("user",j9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],O9=ye("users",V9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],B9=ye("volume-2",G9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],z9=ye("volume-x",H9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],B1=ye("x",F9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],xa=ye("zap",q9),K9=()=>{const[n,e]=z.useState(!1),[t,s]=z.useState(1500),[r,o]=z.useState(!1),[u,h]=z.useState("focus");z.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),z.useEffect(()=>{let A=null;return r&&t>0?A=setInterval(()=>{s(t-1)},1e3):t===0&&(o(!1),m()),()=>clearInterval(A)},[r,t]);const m=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(k=>console.log("Audio play failed",k)),"Notification"in window&&Notification.permission==="granted"&&new Notification(u==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:u==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},p=()=>o(!r),v=()=>{o(!1),s(u==="focus"?1500:300)},_=()=>{const A=u==="focus"?"break":"focus";h(A),s(A==="focus"?1500:300),o(!1)},T=A=>{const k=Math.floor(A/60),D=A%60;return`${k.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`};return n?c.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[c.jsxs("div",{className:`p-4 ${u==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(C0,{size:20}),c.jsx("span",{className:"font-bold",children:u==="focus"?"Fokus":"Istirahat"})]}),c.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:c.jsx(B1,{size:18})})]}),c.jsxs("div",{className:"p-6 flex flex-col items-center",children:[c.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),c.jsxs("div",{className:"flex gap-4 mb-6",children:[c.jsx("button",{onClick:p,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:r?c.jsx(su,{size:24}):c.jsx(xu,{size:24})}),c.jsx("button",{onClick:v,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:c.jsx(k0,{size:24})})]}),c.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",u==="focus"?"Istirahat":"Fokus"]})]})]}):c.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[c.jsx(C0,{size:24}),c.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},$9=({data:n,onNext:e})=>{const[t,s]=z.useState(!1);return c.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[c.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[c.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),c.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),c.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),c.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),c.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&c.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[c.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),c.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),c.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},H1=({node:n,depth:e=0})=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&c.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),c.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>c.jsxs("div",{className:"flex flex-col items-center relative",children:[c.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),c.jsx(H1,{node:t,depth:e+1})]},s))]})]}),Y9=({data:n})=>{const e=n.root||n;return c.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:c.jsx(H1,{node:e})})},Qa=({className:n="",height:e="h-4",width:t="w-full"})=>c.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),J9=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx(Qa,{height:"h-12",width:"w-12",className:"rounded-full"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx(Qa,{height:"h-4",width:"w-1/3"}),c.jsx(Qa,{height:"h-3",width:"w-1/2"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Qa,{height:"h-4"}),c.jsx(Qa,{height:"h-4"}),c.jsx(Qa,{height:"h-4",width:"w-2/3"})]})]}),Q9=({onComplete:n})=>{const e=()=>{oe.play("click"),n()};return c.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[c.jsxs("div",{className:"relative mb-8 group",children:[c.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),c.jsx("img",{src:uh,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),c.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",c.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),c.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),c.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[c.jsx(g9,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},W9=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:r,onUpdateProfile:o})=>{var Y,ne;const[u,h]=z.useState(!1),[m,p]=z.useState(""),[v,_]=z.useState(null),[T,A]=z.useState(!1),k=z.useRef(null);if(!n)return null;const D=Q=>{oe.play("tap"),s({...t,[Q]:!t[Q]})},I=Q=>{s({...t,volume:parseFloat(Q.target.value)})},V=Q=>{var P;const M=(P=Q.target.files)==null?void 0:P[0];if(M){if(M.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const R=new FileReader;R.onload=O=>{var B;const U=new Image;U.onload=()=>{const j=document.createElement("canvas"),le=j.getContext("2d");if(!le)return;const ke=200;let J=U.width,he=U.height;J>he?J>ke&&(he*=ke/J,J=ke):he>ke&&(J*=ke/he,he=ke),j.width=J,j.height=he,le.drawImage(U,0,0,J,he);const Te=j.toDataURL("image/jpeg",.8);_(Te),h(!0),r&&!m&&p(r.username)},U.src=(B=O.target)==null?void 0:B.result},R.readAsDataURL(M)}},N=async()=>{A(!0);try{const Q={};m&&m!==(r==null?void 0:r.username)&&(Q.username=m),v&&(Q.photoURL=v),Object.keys(Q).length>0&&await o(Q),h(!1),_(null)}catch(Q){console.error(Q),alert("Gagal menyimpan profil.")}finally{A(!1)}},G=()=>{p((r==null?void 0:r.username)||""),h(!0)};return c.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(V1,{size:24,className:"text-slate-400"})," Pengaturan"]}),c.jsx("button",{onClick:()=>{oe.play("back"),e()},children:c.jsx(jl,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),c.jsxs("div",{className:"space-y-4",children:[r&&c.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Akun"}),r.isGuest?c.jsx("span",{className:"text-xs bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded text-slate-600 dark:text-slate-300 font-bold",children:"TAMU"}):c.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900 px-2 py-1 rounded text-emerald-600 dark:text-emerald-300 font-bold",children:"ONLINE"})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var Q;return(Q=k.current)==null?void 0:Q.click()},children:[v||r.photoURL?c.jsx("img",{src:v||r.photoURL||"",alt:"Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-md",onError:Q=>{var M;Q.currentTarget.style.display="none",(M=Q.currentTarget.nextElementSibling)==null||M.classList.remove("hidden")}}):null,c.jsx("div",{className:`w-16 h-16 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-2xl border-2 border-white dark:border-slate-600 shadow-md ${v||r.photoURL?"hidden":""}`,children:(ne=(Y=r.username)==null?void 0:Y[0])==null?void 0:ne.toUpperCase()}),c.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(tO,{size:20,className:"text-white"})})]}),c.jsx("input",{type:"file",ref:k,className:"hidden",accept:"image/*",onChange:V}),c.jsx("div",{className:"flex-1 min-w-0",children:u?c.jsx("input",{type:"text",value:m,onChange:Q=>p(Q.target.value.replace(/\s/g,"")),className:"w-full p-2 border border-indigo-300 rounded-lg text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",placeholder:"Username"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-bold text-lg text-slate-800 dark:text-white truncate",children:r.username}),c.jsx("div",{className:"text-xs text-slate-500 truncate",children:r.email||"Mode Offline"})]})}),!u&&c.jsx("button",{onClick:G,className:"p-2 bg-white dark:bg-slate-700 rounded-lg text-indigo-600 dark:text-indigo-400 hover:shadow-md transition",children:c.jsx(o9,{size:16})})]}),u&&c.jsxs("div",{className:"flex gap-2 animate-fade-in",children:[c.jsxs("button",{onClick:N,disabled:T||!m,className:"flex-1 bg-indigo-600 text-white py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-1 disabled:opacity-50 hover:bg-indigo-700 transition",children:[T?c.jsx(Fn,{size:14,className:"animate-spin"}):c.jsx(Af,{size:14})," Simpan Perubahan"]}),c.jsx("button",{onClick:()=>{h(!1),_(null)},className:"flex-1 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 py-2 rounded-lg text-xs font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition",children:"Batal"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.darkMode?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,children:t.darkMode?c.jsx(L1,{size:20}):c.jsx(O1,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Tema Gelap"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Tampilan malam hari."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.darkMode,onChange:()=>D("darkMode")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?c.jsx(B9,{size:20}):c.jsx(z9,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>D("soundEnabled")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:c.jsx(t9,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Musik Latar"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Musik santai saat belajar."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.musicEnabled,onChange:()=>D("musicEnabled")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex justify-between mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),c.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:I,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?c.jsx(FV,{size:20}):c.jsx(HV,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>D("funnyNotifications")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:c.jsx(ks,{size:20})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>D("confirmActions")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},X9="Fajmuls22",Z9=({category:n,skdStream:e,availablePackages:t,history:s,onSelectPackage:r,onGenerateNew:o,onImportPackage:u,onDeletePackage:h,onBack:m,showToast:p,confirmEnabled:v,onRefresh:_,isLoading:T})=>{z.useEffect(()=>{_()},[]);const[A,k]=z.useState(""),[D,I]=z.useState(!1),[V,N]=z.useState(null),[G,Y]=z.useState(!1),ne=z.useRef(null),Q=le=>{const ke=s.filter(he=>he.packageId===le);if(ke.length===0)return{attempts:0,highScore:0,avgScore:0};const J=ke.map(he=>he.score);return{attempts:ke.length,highScore:Math.max(...J),avgScore:Math.round(J.reduce((he,Te)=>he+Te,0)/J.length),lastAttemptDate:ke[0].date}},M=(le,ke)=>{oe.play("click"),N({type:le,payload:ke}),k(""),I(!0)},P=()=>{var le;if(!A){p("Masukkan token akses!","error");return}A===X9?(I(!1),oe.play("success"),(V==null?void 0:V.type)==="GENERATE"?R():(V==null?void 0:V.type)==="IMPORT"?(le=ne.current)==null||le.click():(V==null?void 0:V.type)==="DELETE"&&O(V.payload)):(oe.play("error"),p("Token salah! Akses ditolak.","error"))},R=async()=>{Y(!0);try{await o("verified_client")}catch(le){console.error(le)}finally{Y(!1)}},O=le=>{h(le)},U=(le,ke)=>{le.stopPropagation();const J=JSON.stringify(ke,null,2),he=new Blob([J],{type:"application/json"}),Te=URL.createObjectURL(he),Me=document.createElement("a");Me.href=Te,Me.download=`${ke.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(Te),p("Paket Soal berhasil didownload","success")},B=()=>{oe.play("click"),_()},j=t.filter(le=>le.category===n&&(!e||le.skdStream===e)).sort((le,ke)=>le.title.localeCompare(ke.title,void 0,{numeric:!0,sensitivity:"base"}));return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[D&&c.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col items-center mb-6",children:[c.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:c.jsx(w9,{size:32})}),c.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),c.jsx("input",{type:"password",placeholder:"Token Akses...",value:A,onChange:le=>k(le.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:le=>le.key==="Enter"&&P()}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>I(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),c.jsx("button",{onClick:P,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),c.jsxs("div",{className:"max-w-4xl w-full",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("button",{onClick:m,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[c.jsx(Et,{size:20})," Kembali"]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:["Pilih Paket Soal ",n]}),c.jsx("button",{onClick:B,disabled:T,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:c.jsx(h9,{size:20,className:T?"animate-spin":""})})]})]}),c.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:["Pilih Paket Soal ",n]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[c.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[c.jsx(qO,{size:18,className:"text-slate-400"})," Admin Zone"]}),c.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>M("GENERATE"),disabled:G,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[G?c.jsx(Fn,{className:"animate-spin",size:18}):c.jsx(u9,{size:18}),c.jsx("span",{children:"Buat Paket AI"})]}),c.jsxs("button",{onClick:()=>M("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[c.jsx(Bg,{size:18}),c.jsx("span",{children:"Import"})]})]})]}),c.jsx("input",{type:"file",ref:ne,className:"hidden",accept:".json",multiple:!0,onChange:le=>{le.target.files&&le.target.files.length>0&&u(le.target.files),ne.current&&(ne.current.value="")}})]}),T&&j.length===0?c.jsxs("div",{className:"py-20 text-center text-slate-500",children:[c.jsx(Fn,{className:"animate-spin mx-auto mb-2"}),c.jsx("p",{children:"Memuat paket soal terbaru..."})]}):c.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:j.map(le=>{const ke=Q(le.id);return c.jsxs("button",{onClick:()=>r(le),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[le.isAiGenerated&&c.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:le.title}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{onClick:J=>U(J,le),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:c.jsx(M1,{size:18})}),c.jsx("div",{onClick:J=>{J.stopPropagation(),M("DELETE",le.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:c.jsx(lo,{size:18})})]})]}),c.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(ga,{size:12})," ",le.durationMinutes," Menit"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(dr,{size:12})," ",le.questions.length," Soal"]}),le.version==="v2"&&c.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),c.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[ke.attempts,"x"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),c.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:ke.highScore})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),c.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:ke.avgScore})]})]})]},le.id)})})]})]})},e8=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},t8=({answers:n,questions:e,onHome:t,onRetry:s,category:r,details:o})=>{const u=n.filter(D=>D.isCorrect).length;let h=(o==null?void 0:o.total)||(o==null?void 0:o.average)||(o==null?void 0:o.iqScore)||Math.round(u/e.length*100);if(r==="GENERAL"&&!o){const D=n.reduce((I,V)=>I+(V.scoreEarned||0),0);h=Math.round(D/(e.length||1))}const[m,p]=z.useState(""),[v,_]=z.useState(!1),T=n.filter(D=>!D.isCorrect),A=Array.from(new Set(T.map(D=>{var V,N;const I=e.find(G=>G.id===D.questionId);return((V=I==null?void 0:I.metadata)==null?void 0:V.subtest)||((N=I==null?void 0:I.metadata)==null?void 0:N.topic)||"General"}))),k=async()=>{_(!0);try{const D=await iP(A);p(D)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return c.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:c.jsxs("div",{className:"max-w-2xl w-full text-center",children:[c.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:h>=(r==="UTBK"?600:70)?c.jsx(k1,{size:48,className:"text-emerald-500"}):c.jsx(Ns,{size:48,className:"text-amber-500"})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[c.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),c.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:h})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[c.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:r==="GENERAL"?"Poin":"Akurasi"}),c.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:r==="GENERAL"?h:`${Math.round(u/e.length*100)}%`})]})]}),r==="UTBK"&&o&&c.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Penalaran Umum:"})," ",c.jsx("b",{children:o.pu})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"PPU:"})," ",c.jsx("b",{children:o.ppu})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"PBM:"})," ",c.jsx("b",{children:o.pbm})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Kuantitatif:"})," ",c.jsx("b",{children:o.pk})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lit. B.Indo:"})," ",c.jsx("b",{children:o.lbi})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lit. B.Inggris:"})," ",c.jsx("b",{children:o.lbe})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Penalaran Math:"})," ",c.jsx("b",{children:o.pm})]})]})]}),A.length>0&&c.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[c.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[c.jsx(oo,{size:20})," Topik Perlu Perbaikan"]}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.slice(0,5).map(D=>c.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:D},D))}),m?c.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[c.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),c.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:c.jsx(e8,{text:m})})]}):c.jsxs("button",{onClick:k,disabled:v,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[v?c.jsx(Fn,{className:"animate-spin",size:14}):c.jsx(P1,{size:14}),"Minta Saran Perbaikan AI"]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[c.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),c.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.map((D,I)=>{const V=n.find(G=>G.questionId===D.id),N=V==null?void 0:V.isCorrect;return c.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",I+1]}),N?c.jsx(ks,{size:16,className:"text-emerald-500"}):c.jsx(jl,{size:16,className:"text-rose-500"})]}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:D.content})]},I)})})]}),c.jsxs("div",{className:"flex gap-4 w-full",children:[c.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),c.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},$E=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},zh=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,z1=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,ch=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,n8=n=>{switch(n){case"UTBK":return{icon:Gg,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:C1,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:qs,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:xa,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:D1,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:Sf,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:j1,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:_f,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:dr,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},cr=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},YE=(n,e)=>{const t=e>0?n/e*100:0;return cr(t,"PERCENT").color},JE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},F1=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,s8=({history:n,onBack:e,onReview:t,username:s,onExport:r,onImport:o,onDelete:u})=>{const[h,m]=z.useState("ALL"),[p,v]=z.useState(null),_=z.useRef(null),T=n.filter(N=>h==="ALL"||N.category===h),A=T.length,k=A>0?Math.round(T.reduce((N,G)=>N+G.score,0)/A):0,D=A>0?Math.max(...T.map(N=>N.score)):0,I=(N,G)=>{N.stopPropagation(),oe.play("click"),v(G)},V=()=>{p&&(u(p),v(null))};return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[p&&c.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:c.jsx(lo,{size:24})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),c.jsxs("div",{className:"flex gap-3 w-full",children:[c.jsx("button",{onClick:()=>v(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),c.jsx("button",{onClick:V,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:c.jsx(Et,{size:20})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),c.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[c.jsx(G1,{size:12})," ",s]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[c.jsx(M1,{size:14})," Backup"]}),c.jsxs("button",{onClick:()=>{var N;return(N=_.current)==null?void 0:N.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[c.jsx(Bg,{size:14})," Restore"]}),c.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:N=>{var G;(G=N.target.files)!=null&&G[0]&&o(N.target.files[0]),_.current&&(_.current.value="")}})]})]}),c.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[c.jsx("button",{onClick:()=>m("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),Hp.map(N=>c.jsx("button",{onClick:()=>m(N.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h===N.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:N.name},N.id))]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[c.jsx(wO,{size:14})," Total Tes"]}),c.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:A})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[c.jsx(M9,{size:14})," Avg Skor"]}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:k})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[c.jsx(k1,{size:14})," Tertinggi"]}),c.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:D})]})]}),c.jsx("div",{className:"space-y-4",children:T.length===0?c.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[c.jsx(Ef,{size:48,className:"mx-auto mb-4 opacity-20"}),c.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(N=>{const G=n8(N.category),Y=G.icon,ne=N.questions?N.questions.length:0,Q=N.answers?N.answers.length:0,M=N.answers?N.answers.filter(se=>se.isCorrect).length:0,P=Q-M,R=N.answers?N.answers.reduce((se,ge)=>se+(ge.timeTakenSeconds||0),0):0,O=JE(R),U=zh(N),B=z1(N),j=ch(N);let le=N.category;N.category==="TPA"?le="TPA & Bahasa Inggris":N.category==="PSIKOTEST"&&zh(N)?le="Tes Koran / Pauli":N.category==="PSIKOTEST"&&ch(N)?le="Psikotes (IQ & Logika)":N.category==="KECERMATAN"&&(le="Tes Kecermatan"),N.packageTitle&&(le=N.packageTitle);let ke=N.score.toString(),J="SKOR",he={text:"-",color:"text-slate-500"};if(B){const se=N.details;ke=se.accuracy+"%",J="AKURASI",he=cr(se.accuracy,"PERCENT")}else if(U){const se=N.details;ke=se.accuracy+"%",J="AKURASI",he=cr(se.accuracy,"PERCENT")}else if(j){const se=N.details.iqScore||N.score;ke=se.toString(),J="IQ SCORE",he=cr(se,"IQ")}else{const se=N.maxScore>0?N.score/N.maxScore*100:0;he=cr(se,"PERCENT")}const Te=he.color;let Me=M,be=P,H=0,ee=0,pe={val:0,index:0},ie=[];if(B){const se=N.details;Me=se.totalCorrect,be=se.totalWrong,H=se.averageSpeed,ee=se.stability,ie=se.sectionData.map(ge=>ge.correct)}else if(U){const se=N.details;Me=se.totalCorrect,be=se.totalWrong,H=se.speedPerMinute,ee=se.consistencyScore,ie=se.intervalData}if(ie&&ie.length>0){const se=Math.max(...ie),ge=ie.indexOf(se);pe={val:se,index:ge+1}}return c.jsxs("div",{onClick:()=>t(N),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[c.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[N.isAborted&&c.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),N.details&&N.details.passed!==void 0&&c.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${N.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:N.details.passed?"LULUS":"TIDAK LULUS"})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${G.bg} ${G.color} border ${G.border}`,children:c.jsx(Y,{size:24})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:le}),N.packageTitle&&N.packageTitle!==le&&c.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[c.jsx(U1,{size:10})," ",N.packageTitle]}),c.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(I1,{size:12})," ",new Date(N.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),N.skdStream&&c.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:N.skdStream}),B&&N.details.mode&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:F1(N.details.mode)}),c.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[c.jsx(ga,{size:10})," ",O]})]}),U&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),c.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[c.jsx(ga,{size:10})," ",O]})]}),ch(N)&&c.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),c.jsxs("div",{className:"text-right shrink-0",children:[c.jsx("div",{className:`text-2xl font-black ${Te}`,children:ke}),c.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:J})]})]}),c.jsxs("div",{className:"mt-3",children:[B||U?c.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),c.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:Me+be})]}),c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),c.jsxs("span",{className:"font-bold",children:[c.jsx("span",{className:"text-emerald-500",children:Me})," / ",c.jsx("span",{className:"text-rose-500",children:be})]})]}),c.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),c.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:H})]}),c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),c.jsx("span",{className:"font-black text-amber-500",children:ee})]}),c.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),c.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${pe.val} at Interval ${pe.index}`,children:[pe.val,c.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",pe.index]})]})]}),c.jsxs("div",{className:"flex flex-col text-center",children:[c.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),c.jsx("span",{className:`font-black text-[10px] leading-tight ${he.color}`,children:he.text})]})]}):c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),c.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[Q," ",c.jsxs("span",{className:"text-slate-400",children:["/ ",ne]})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),c.jsxs("span",{className:"font-bold text-emerald-600",children:[M," ",c.jsx("span",{className:"text-slate-400",children:"/"})," ",c.jsx("span",{className:"text-rose-500",children:P})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),c.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:JE(R)})]}),N.category==="SKD"&&N.details&&c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),c.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",N.details.twk]}),c.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",N.details.tiu]}),c.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",N.details.tkp]})]})]}),N.category==="UTBK"&&N.details&&c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),c.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:N.details.average})]})]}),(U||B)&&ie.length>0&&c.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:ie.map((se,ge)=>{const Ne=Math.max(...ie,1),Pe=se/Ne*100;return c.jsx("div",{className:`flex-1 rounded-t-sm ${ge+1===pe.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${Pe}%`}},ge)})})]})]})]}),c.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:se=>I(se,N.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:c.jsx(lo,{size:14})}),c.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:c.jsx(Za,{size:14})})]})]},N.id)})})]})]})},i8=({item:n,onBack:e})=>{if(zh(n)||z1(n)){const t=zh(n),s=n.details;let r=[],o=0,u=0,h=0,m=0,p=0,v="",_={text:"-",color:"text-slate-500"};if(t){const k=s;r=k.intervalData||[],o=k.totalCorrect,u=k.totalWrong,h=k.speedPerMinute,m=k.accuracy,p=k.consistencyScore,v="PAULI / KORAN",_=cr(k.accuracy,"PERCENT")}else{const k=s;r=k.sectionData.map(D=>D.correct),o=k.totalCorrect,u=k.totalWrong,h=k.averageSpeed,m=k.accuracy,p=k.stability,v=F1(k.mode),_=cr(k.accuracy,"PERCENT")}let T=0,A=0;return r.length>0&&(T=Math.max(...r),A=r.indexOf(T)+1),c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[c.jsx(Et,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&c.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:c.jsx(Ns,{size:32})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",v]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",c.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:o}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),c.jsx("div",{className:"text-3xl font-black text-rose-500",children:u}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),c.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:h}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),c.jsxs("div",{className:`text-3xl font-black ${cr(m,"PERCENT").color}`,children:[m,"%"]}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),c.jsx("div",{className:"text-3xl font-black text-amber-500",children:p}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),c.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",A]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),c.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:r.map((k,D)=>{const I=Math.max(...r,10),V=k/I*100,N=k===T;return c.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[c.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${N?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${V}%`}}),c.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:D+1}),c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",D+1,": ",k]})]},D)})}),c.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",c.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[c.jsx(Et,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&c.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),c.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),c.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),c.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),c.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),c.jsx("div",{className:`text-3xl font-black ${YE(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tpaScore})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA BENAR"}),c.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tpaCorrect})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tbiScore})]}),c.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),c.jsxs("div",{className:"text-center w-full",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI BENAR"}),c.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tbiCorrect})]})]}),n.category==="UTBK"&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),c.jsxs("div",{className:`text-xl font-black ${YE(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>c.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),c.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),ch(n)&&n.details&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),c.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${cr(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),c.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),c.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(xa,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),c.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var m;const r=n.answers.find(p=>p.questionId===t.id),o=r==null?void 0:r.isCorrect,u=(r==null?void 0:r.scoreEarned)||0;let h="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return u>0?t.tkpPoints?u===5?h="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":h="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":h="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":h="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",c.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),c.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(m=t.metadata)==null?void 0:m.subtest})]}),c.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${h}`,children:[u>0?c.jsx(ks,{size:12}):c.jsx(jl,{size:12}),u," Poin"]})]}),c.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:c.jsx($E,{text:t.content})}),c.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[c.jsxs("div",{className:`p-3 rounded-lg border ${o?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[c.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(r==null?void 0:r.selectedAnswer)||"Tidak dijawab"]}),!o&&!t.tkpPoints&&c.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[c.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&c.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[c.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),c.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((p,v)=>v.points-p.points).map((p,v)=>c.jsxs("li",{className:p.option===(r==null?void 0:r.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[p.points," Poin: ",p.option]},v))})]})]}),c.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[c.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block mb-1",children:"Pembahasan:"}),c.jsx($E,{text:t.explanation})]})]},s)})})]})]})})},Op=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},r8=({timeLeft:n,onFinish:e})=>(z.useEffect(()=>{n<=0&&e()},[n,e]),c.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[c.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:c.jsx(C0,{size:48,className:"text-white"})}),c.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),c.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),c.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),c.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),a8=({isOpen:n,onCancel:e,onConfirm:t,stats:s})=>{if(!n)return null;const r=s.unanswered>0||s.doubtful>0;return c.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${r?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`,children:r?c.jsx(Bh,{size:32}):c.jsx(ks,{size:32})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:r?"Yakin Selesai?":"Selesaikan Ujian?"}),r?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left space-y-2 border border-slate-200 dark:border-slate-600",children:[c.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Periksa kembali jawaban Anda:"}),s.unanswered>0&&c.jsxs("div",{className:"flex items-center justify-between text-rose-600 dark:text-rose-400 text-sm font-medium",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(jl,{size:14})," Belum Diisi"]}),c.jsxs("span",{className:"font-bold",children:[s.unanswered," Soal"]})]}),s.doubtful>0&&c.jsxs("div",{className:"flex items-center justify-between text-amber-600 dark:text-amber-400 text-sm font-medium",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(TO,{size:14})," Ragu-ragu"]}),c.jsxs("span",{className:"font-bold",children:[s.doubtful," Soal"]})]})]}):c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Semua ",s.total," soal telah dijawab. Waktu akan dihentikan dan skor akan dihitung."]}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition",children:"Ya, Selesai"}),c.jsx("button",{onClick:e,className:"w-full py-3 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Kembali Mengerjakan"})]})]})})},o8=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:r,isUtbkSimulation:o,category:u,showToast:h,initialState:m,userId:p,skdStream:v,packageTitle:_,onSaveAndExit:T})=>{var $t,Ft,gn;const[A,k]=z.useState((m==null?void 0:m.utbkSubtestIndex)||0),[D,I]=z.useState(!1),[V,N]=z.useState(0),[G,Y]=z.useState((m==null?void 0:m.currentIndex)||0),[ne,Q]=z.useState((m==null?void 0:m.answerMap)||{}),[M,P]=z.useState(!1),[R,O]=z.useState(!1),[U,B]=z.useState(!1),[j,le]=z.useState(!1),[ke,J]=z.useState({unanswered:0,doubtful:0,total:0}),he=z.useRef(Date.now()),Te=()=>m!=null&&m.timeLeft?m.timeLeft:o&&Ai[0]?Ai[0].duration*60:r?6e3:n===Fe.SIMULATION?u==="PSIKOTEST"?2400:u==="TPA"?6e3:3600:0,[Me,be]=z.useState(Te);z.useEffect(()=>{if(!p)return;const Ie={uid:p,mode:n,category:u,questions:e,answerMap:ne,timeLeft:Me,currentIndex:G,utbkSubtestIndex:A,drillContent:t,skdStream:v,packageTitle:_,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(Ie))}catch(_e){console.warn("Failed to save session state (quota?)",_e)}},[Me,ne,G,A,p]);const H=()=>{localStorage.removeItem("fajmuls_active_session")},ee=z.useMemo(()=>{if(o){const Ie=Ai[A].name;return e.filter(_e=>{var Le,pt;return(pt=(Le=_e.metadata)==null?void 0:Le.subtest)==null?void 0:pt.includes(Ie)})}return e},[e,o,A]);z.useEffect(()=>{let Ie=null;return D&&V>0?Ie=setInterval(()=>N(_e=>_e-1),1e3):D&&V===0?I(!1):Me>0&&!M&&n===Fe.SIMULATION?Ie=setInterval(()=>{be(_e=>(_e<=11&&_e>1&&oe.play("tick"),_e-1))},1e3):Me===0&&n===Fe.SIMULATION&&(o?pe():ge()),()=>clearInterval(Ie)},[Me,M,D,V,n]);const pe=()=>{if(o)if(A<Ai.length-1){oe.play("success");const Ie=A+1;k(Ie);const _e=Ai[Ie].duration;be(_e*60),Y(0),N(30),I(!0)}else ge();else ge()},ie=()=>{oe.play("click");const Ie=o&&A<Ai.length-1?ee:e;let _e=0,Le=0;Ie.forEach(pt=>{const tn=ne[pt.id];!tn||!tn.selectedAnswer?_e++:tn.isDoubtful&&Le++}),J({unanswered:_e,doubtful:Le,total:Ie.length}),le(!0)},se=()=>{le(!1),o&&A<Ai.length-1?pe():ge()},ge=async()=>{if(p&&!p.startsWith("guest-"))try{await EV(p)}catch{}H(),oe.play("finish"),s(Object.values(ne))},Ne=()=>{s(Object.values(ne),void 0,!0)},Pe=async()=>{if(!p||p.startsWith("guest-")){h("Fitur simpan ke cloud hanya untuk pengguna login.","error");return}B(!0);const Ie={uid:p,mode:n,category:u,questions:e,answerMap:ne,timeLeft:Me,currentIndex:G,utbkSubtestIndex:A,drillContent:t,skdStream:v,packageTitle:_,timestamp:Date.now()};try{await _V(p,Ie),H(),h("Progres tersimpan di cloud! Anda bisa melanjutkannya nanti.","success"),T?T():s(Object.values(ne),void 0,!0)}catch(_e){console.error(_e),h("Gagal menyimpan ke cloud. Cek koneksi internet.","error")}finally{B(!1)}},Ge=async Ie=>{var ns;const _e=ee[G];if(!_e)return;oe.play("click");let Le=0,pt=!1;if(u==="SKD")if(_e.tkpPoints&&_e.tkpPoints.length>0){const Yt=_e.tkpPoints.find($n=>$n.option===Ie);Le=Yt?Yt.points:0,pt=Le===5}else pt=Ie===_e.correctAnswer,Le=pt?5:0;else if(u==="UTBK"){pt=Ie===_e.correctAnswer;const Yt=((ns=_e.metadata)==null?void 0:ns.difficulty)||"Medium";Le=pt?Yt==="HOTS"||Yt==="Hard"?3:Yt==="Medium"?2:1:0}else pt=Ie===_e.correctAnswer,Le=pt?10:0;let tn="";if(_e.type!=="multiple_choice"&&u==="GENERAL")try{const Yt=await sP(_e.content,_e.correctAnswer,Ie);Le=Yt.score,pt=Yt.isCorrect,tn=Yt.feedback}catch{console.error("Grading failed")}const Ut=ne[_e.id],Ct=(Date.now()-he.current)/1e3,Kn={questionId:_e.id,selectedAnswer:Ie,isCorrect:pt,scoreEarned:Le,timeTakenSeconds:((Ut==null?void 0:Ut.timeTakenSeconds)||0)+Ct,isOverthinking:!1,isGuessing:Ct<5,aiEvaluation:tn,isDoubtful:(Ut==null?void 0:Ut.isDoubtful)||!1};Q(Yt=>({...Yt,[_e.id]:Kn})),he.current=Date.now()},et=()=>{const Ie=ee[G];Q(_e=>{const Le=_e[Ie.id];return Le?{..._e,[Ie.id]:{...Le,isDoubtful:!Le.isDoubtful}}:{..._e,[Ie.id]:{questionId:Ie.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},zt=Ie=>{const _e=Math.floor(Ie/3600),Le=Math.floor(Ie%3600/60),pt=Math.floor(Ie%60);return`${_e>0?_e+":":""}${Le.toString().padStart(2,"0")}:${pt.toString().padStart(2,"0")}`},ft=(Ie,_e)=>Ie.length===0?null:c.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[c.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:_e}),c.jsx("div",{className:"grid grid-cols-5 gap-2",children:Ie.map((Le,pt)=>{const tn=ee.findIndex(Kn=>Kn.id===Le.id),Ut=ne[Le.id];let Ct="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return Ut!=null&&Ut.selectedAnswer&&(Ct="bg-emerald-500 border-emerald-500 text-white"),Ut!=null&&Ut.isDoubtful&&(Ct="bg-amber-400 border-amber-400 text-white"),tn===G&&(Ct+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),c.jsx("button",{onClick:()=>{Y(tn),O(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${Ct}`,children:tn+1},Le.id)})})]});if(D)return c.jsx(r8,{timeLeft:V,onFinish:()=>{I(!1)}});if(ee.length===0)return c.jsxs("div",{className:"p-10 text-center",children:[c.jsx(Fn,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const Ke=ee[G],st=ne[Ke.id];return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[c.jsx(a8,{isOpen:j,onCancel:()=>le(!1),onConfirm:se,stats:ke}),M&&c.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[c.jsx(su,{size:48,className:"mx-auto mb-4 text-indigo-600"}),c.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),c.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[c.jsxs("button",{onClick:()=>P(!1),className:"w-full px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[c.jsx(xu,{size:20})," Lanjutkan"]}),!(p!=null&&p.startsWith("guest-"))&&c.jsxs("button",{onClick:Pe,disabled:U,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[U?c.jsx(Fn,{className:"animate-spin"}):c.jsx(FE,{size:20}),"Simpan & Lanjut Nanti"]}),c.jsx("button",{onClick:Ne,className:"w-full px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan Lokal)"})]})]})}),c.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[c.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[c.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",G+1]}),c.jsxs("div",{className:"flex items-center gap-2",children:[n===Fe.SIMULATION&&c.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:zt(Me)}),c.jsx("button",{onClick:()=>O(!R),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:c.jsx(xr,{size:20})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:c.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===Fe.DRILL&&t&&c.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[c.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[c.jsx(xa,{size:16})," ",t.topic]}),c.jsx("p",{children:t.summary})]}),c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:o?Ai[A].name:(($t=Ke.metadata)==null?void 0:$t.subtest)||"General"}),((Ft=Ke.metadata)==null?void 0:Ft.difficulty)==="HOTS"&&c.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[c.jsx(xa,{size:12})," HOTS"]})]}),c.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100",children:c.jsx(Op,{text:Ke.content})}),Ke.type==="multiple_choice"?c.jsx("div",{className:"space-y-3",children:(gn=Ke.options)==null?void 0:gn.map((Ie,_e)=>{var Ct;const Le=String.fromCharCode(65+_e),pt=(st==null?void 0:st.selectedAnswer)===Ie;let tn="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",Ut="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return pt&&(tn="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",Ut="bg-indigo-600 text-white"),n!==Fe.SIMULATION&&st&&((Ke.tkpPoints?((Ct=Ke.tkpPoints.find(ns=>ns.option===Ie))==null?void 0:Ct.points)===5:Ie===Ke.correctAnswer)?(tn="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",Ut="bg-emerald-500 text-white"):pt&&(tn="border-rose-500 bg-rose-50 dark:bg-rose-900/20",Ut="bg-rose-500 text-white")),c.jsxs("button",{onClick:()=>Ge(Ie),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${tn}`,children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${Ut}`,children:Le}),c.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-base",children:c.jsx(Op,{text:Ie})})]},_e)})}):c.jsxs("div",{children:[" ",c.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:(st==null?void 0:st.selectedAnswer)||"",onChange:Ie=>Ge(Ie.target.value)})," "]})]}),n!==Fe.SIMULATION&&st&&c.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[c.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[c.jsx(P1,{size:20})," Pembahasan"]}),c.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:c.jsx(Op,{text:Ke.explanation})})]})]})}),c.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[c.jsxs("button",{onClick:()=>{Y(Ie=>Math.max(0,Ie-1))},disabled:G===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[c.jsx(Et,{size:20})," ",c.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[m&&c.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[c.jsx(Af,{size:12})," Disimpan Otomatis"]}),c.jsxs("button",{onClick:et,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${st!=null&&st.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[c.jsx("input",{type:"checkbox",checked:(st==null?void 0:st.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),c.jsx("span",{children:"Ragu-ragu"})]})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),G<ee.length-1?Y(Ie=>Ie+1):ie()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[c.jsx("span",{className:"hidden sm:inline",children:G===ee.length-1?o&&A<Ai.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),c.jsx(Za,{size:20})]})]})})]}),c.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${R?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[c.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex flex-col gap-3 bg-slate-50 dark:bg-slate-800",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Navigasi Soal"}),c.jsx("button",{onClick:()=>O(!1),className:"md:hidden text-slate-500",children:c.jsx(jl,{size:24})})]}),!(p!=null&&p.startsWith("guest-"))&&c.jsxs("button",{onClick:Pe,disabled:U,className:"w-full flex items-center justify-center gap-2 py-2 bg-emerald-600 text-white rounded-lg font-bold text-xs hover:bg-emerald-700 disabled:opacity-50 transition",children:[U?c.jsx(Fn,{size:14,className:"animate-spin"}):c.jsx(FE,{size:14}),"Kerjakan Lagi Nanti (Cloud)"]}),c.jsxs("button",{onClick:Ne,className:"w-full flex items-center justify-center gap-2 py-2 border border-rose-200 dark:border-rose-900 text-rose-600 dark:text-rose-400 rounded-lg font-bold text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20 transition",children:[c.jsx(Et,{size:14})," Keluar (Simpan Lokal)"]})]}),n===Fe.SIMULATION&&Me>0&&c.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),c.jsxs("button",{onClick:()=>P(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[c.jsx(su,{size:12})," Jeda"]})]}),c.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:zt(Me)})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:r?c.jsxs(c.Fragment,{children:[ft(ee.filter(Ie=>{var _e,Le;return(Le=(_e=Ie.metadata)==null?void 0:_e.subtest)==null?void 0:Le.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),ft(ee.filter(Ie=>{var _e,Le;return(Le=(_e=Ie.metadata)==null?void 0:_e.subtest)==null?void 0:Le.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),ft(ee.filter(Ie=>{var _e,Le;return(Le=(_e=Ie.metadata)==null?void 0:_e.subtest)==null?void 0:Le.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):ft(ee,o?Ai[A].name:u)}),c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:c.jsx("button",{onClick:ie,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),R&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>O(!1)})]})},Yd=10,Gp=60,l8=500,QE=50,c8=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),u8=(n,e,t,s,r)=>{let o=0;return n>=400?o+=40:n>=300?o+=30:n>=200?o+=20:o+=10,t>=99?o+=20:t>=97?o+=15:t>=95?o+=10:o+=5,s<3?o+=20:s<6?o+=15:s<9?o+=10:o+=5,r==="NAIK"?o+=20:r==="STABIL"?o+=15:o+=5,o>=90?"Sangat Disarankan (Konsisten & Tinggi)":o>=75?"Disarankan (Baik)":o>=60?"Cukup (Perlu Latihan)":r==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},d8=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),r=t.reduce((h,m)=>h+m,0)/(t.length||1),u=(s.reduce((h,m)=>h+m,0)/(s.length||1)-r)/r*100;return u>5?"NAIK":u<-10?"TURUN":"STABIL"},h8=({onBack:n,onComplete:e})=>{const[t,s]=z.useState("SETUP"),[r,o]=z.useState([]),[u,h]=z.useState(0),[m,p]=z.useState(0),[v,_]=z.useState(0),[T,A]=z.useState(0),[k,D]=z.useState([]),[I,V]=z.useState(0),[N,G]=z.useState(!1),[Y,ne]=z.useState(Yd*60),[Q,M]=z.useState(Gp),P=()=>{const be=c8(l8,QE);o(be),h(0),p(0),_(0),A(0),D([]),V(0),ne(Yd*60),M(Gp),s("PLAYING"),oe.play("click")},R=z.useCallback(be=>{if(t!=="PLAYING")return;const H=r[u][m],ee=r[u][m+1];if(ee===void 0){h(ge=>ge+1),p(0);return}const ie=(H+ee)%10;be===ie?(_(ge=>ge+1),V(ge=>ge+1)):(A(ge=>ge+1),oe.play("error")),m<QE-2?p(ge=>ge+1):(h(ge=>ge+1),p(0))},[r,u,m,t]);z.useEffect(()=>{const be=H=>{t==="PLAYING"&&H.key>="0"&&H.key<="9"&&R(parseInt(H.key))};return window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)},[t,R]),z.useEffect(()=>{if(t!=="PLAYING")return;const be=setInterval(()=>{ne(H=>H<=1?(B(),0):H-1),M(H=>(H<=6&&H>1&&oe.play("tick"),H<=1?(oe.play("success"),U(),Gp):H-1))},1e3);return()=>clearInterval(be)},[t,I]);const O=z.useRef(0);z.useEffect(()=>{O.current=I},[I]);const U=()=>{const be=O.current;D(H=>[...H,be]),V(0),G(!0),setTimeout(()=>G(!1),2e3)},B=(be=!1)=>{const H=O.current;H>0&&D(ee=>[...ee,H]),s("FINISHED"),be||oe.play("finish")},j=()=>{const be=v+T,H=(Yd*60-Y)/60,ee=H<.1?.1:H,pe=ee>0?Math.round(v/ee):0,ie=be>0?v/be*100:0;let se=0;if(k.length>0){const Pe=k.reduce((et,zt)=>et+zt,0)/k.length,Ge=k.reduce((et,zt)=>et+Math.pow(zt-Pe,2),0)/k.length;se=Math.sqrt(Ge)}const ge=d8(k),Ne=u8(v,pe,ie,se,ge);return{totalCorrect:v,totalWrong:T,totalAttempts:be,totalColumns:u,speedPerMinute:pe,consistencyScore:parseFloat(se.toFixed(2)),accuracy:Math.round(ie),intervalData:k,interpretation:{verdict:Ne,speedDesc:pe>50?"Sangat Cepat":pe>35?"Cepat":"Sedang",accDesc:ie>98?"Sangat Teliti":ie>92?"Teliti":"Kurang Teliti",stabDesc:ge==="TURUN"?"Menurun (Lelah)":se<4?"Stabil":"Fluktuatif",trend:ge}}},le=be=>{const H=Math.floor(be/60),ee=be%60;return`${H}:${ee.toString().padStart(2,"0")}`},ke=()=>{const be=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:be.totalCorrect,maxScore:0,details:be,questions:[],answers:[],isAborted:!0};e(H)};if(t==="SETUP")return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[c.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[c.jsx(Ns,{size:64,className:"mx-auto mb-4 relative z-10"}),c.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),c.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),c.jsxs("div",{className:"p-8 space-y-6",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[c.jsxs("p",{className:"flex items-center gap-3",children:[c.jsx(ga,{size:18,className:"text-indigo-500 shrink-0"})," ",c.jsxs("span",{children:[c.jsx("strong",{children:"Durasi:"})," ",Yd," Menit"]})]}),c.jsxs("p",{className:"flex items-center gap-3",children:[c.jsx(Ns,{size:18,className:"text-emerald-500 shrink-0"})," ",c.jsxs("span",{children:[c.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),c.jsxs("p",{className:"flex items-center gap-3",children:[c.jsx($c,{size:18,className:"text-amber-500 shrink-0"})," ",c.jsxs("span",{children:[c.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),c.jsxs("button",{onClick:P,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[c.jsx(xu,{size:24,fill:"currentColor"})," Mulai Tes"]}),c.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const be=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:be.totalCorrect,maxScore:0,details:be,questions:[],answers:[]};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),c.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:be.interpretation.verdict})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx(Ns,{size:14})," Prestasi (Total)"]}),c.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:be.totalCorrect}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx(ga,{size:14})," Tempo"]}),c.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:be.speedPerMinute}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx(ks,{size:14})," Ketelitian"]}),c.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:be.totalWrong}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",be.interpretation.accDesc,")"]})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[c.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[c.jsx($c,{size:14})," Stabilitas"]}),c.jsx("div",{className:"text-3xl font-black text-amber-500",children:be.consistencyScore}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",be.interpretation.trend,")"]})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[c.jsx($c,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),c.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:be.intervalData.map((ee,pe)=>{const ie=Math.max(...be.intervalData,1),se=ee/ie*100;return c.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${se}%`},children:[c.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:pe+1}),c.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:ee})]},pe)})}),c.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),c.jsxs("button",{onClick:()=>e(H),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[c.jsx(Af,{size:20})," Simpan & Keluar"]})]})]})})}const J=r[u]||[],he=J[m],Te=J[m+1],Me=[1,2,3,4,5,6,7,8,9,0];return c.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),c.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:le(Y)})]}),c.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[c.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),c.jsx("div",{className:"text-xl font-bold text-emerald-600",children:v})]})]}),c.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:c.jsx(su,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),N&&c.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),c.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:c.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[c.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:m>0?J[m-1]:"-"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[c.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:he}),c.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),c.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:Te!==void 0?Te:"-"})]}),c.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:J[m+2]!==void 0?J[m+2]:"-"})]})}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[c.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Me.map(be=>c.jsx("button",{onClick:()=>R(be),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:be},be))}),c.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&c.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),c.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),c.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),c.jsx("button",{onClick:ke,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},Bp=10,WE=60,XE=["A","B","C","D","E"],es=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ZE=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},eS=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...es].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((r,o)=>o!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},tS=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>es[Math.floor(Math.random()*es.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const r=Math.floor(Math.random()*n);let o=es[Math.floor(Math.random()*es.length)];for(;o===e[r];)o=es[Math.floor(Math.random()*es.length)];s[r]=o}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=es.find(u=>u!==s[0])||"X"));return{left:e,right:s,isSame:t}},nS=()=>{const e=[...es].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},sS=()=>{const n=es[Math.floor(Math.random()*es.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=es[Math.floor(Math.random()*es.length)];for(;s===n;)s=es[Math.floor(Math.random()*es.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},f8=({initialMode:n,onBack:e,onComplete:t})=>{var pe;const[s,r]=z.useState(n||"ANGKA"),[o,u]=z.useState(1),[h,m]=z.useState(WE),[p,v]=z.useState(!1),[_,T]=z.useState("PLAYING"),[A,k]=z.useState(null),[D,I]=z.useState(null),[V,N]=z.useState(null),[G,Y]=z.useState(null),[ne,Q]=z.useState([]),[M,P]=z.useState([]),[R,O]=z.useState(0),[U,B]=z.useState(0),[j,le]=z.useState(null),ke=z.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(A){const ie=Math.floor(Math.random()*5),se=A.reference.filter((ge,Ne)=>Ne!==ie).sort(()=>.5-Math.random());k({...A,question:se,answer:ie})}else{const ie=eS(s);k(ie)}else if(s==="SAMA_BEDA")I(tS());else if(s==="MATCHING")if(!V)N(nS());else{const ie=Math.floor(Math.random()*5);N({...V,target:V.map[ie],answer:ie})}else s==="GROUPING"&&(Y(sS()),Q([]))},[s,A,V]),J=z.useCallback(()=>{k(null),N(null),I(null),Y(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?k(eS(s)):s==="SAMA_BEDA"?I(tS()):s==="MATCHING"?N(nS()):s==="GROUPING"&&(Y(sS()),Q([])),m(WE),O(0),B(0)},[s]);z.useEffect(()=>{_==="PLAYING"&&J()},[o,s,_]);const he=ie=>{if(p)return;let se=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?se=ie===(A==null?void 0:A.answer):s==="SAMA_BEDA"?se=ie===(D==null?void 0:D.isSame):s==="MATCHING"&&(se=ie===(V==null?void 0:V.answer)),se?(O(ge=>ge+1),le("CORRECT")):(B(ge=>ge+1),le("WRONG"),oe.play("error")),setTimeout(()=>le(null),150),ke()},Te=()=>{if(!G)return;let ie=0,se=0;ne.forEach(Ne=>{G.grid[Ne]===G.target?ie++:se++});const ge=G.totalCorrect-ie;O(Ne=>Ne+ie),B(Ne=>Ne+se+ge),se===0&&ge===0?(le("CORRECT"),oe.play("success")):(le("WRONG"),oe.play("error")),setTimeout(()=>le(null),200),ke()},Me=ie=>{oe.play("click"),Q(se=>se.includes(ie)?se.filter(ge=>ge!==ie):[...se,ie])};z.useEffect(()=>{if(p||_==="FINISHED")return;const ie=setInterval(()=>{m(se=>(se<=6&&se>1&&oe.play("tick"),se<=1?(be(),0):se-1))},1e3);return()=>clearInterval(ie)},[p,o,_,R,U]);const be=()=>{P(ie=>{if(ie.find(Ne=>Ne.section===o))return ie;const se={section:o,correct:R,wrong:U},ge=[...ie,se];return o>=Bp?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{u(Ne=>Ne+1),oe.play("success")},0),ge})},H=()=>{const ie=M.length,se=M.reduce((Ft,gn)=>Ft+gn.correct,0),ge=M.reduce((Ft,gn)=>Ft+gn.wrong,0),Ne=ie>0?se/ie:0,Pe=se+ge,Ge=Pe>0?se/Pe*100:0,et=Ne,zt=M.reduce((Ft,gn)=>Ft+Math.pow(gn.correct-et,2),0)/(ie||1),ft=Math.sqrt(zt),Ke=ZE(Ge,Ne,ft),st={mode:s,totalCorrect:se,totalWrong:ge,averageSpeed:parseFloat(Ne.toFixed(1)),accuracy:parseFloat(Ge.toFixed(1)),sectionData:M,stability:parseFloat(ft.toFixed(2)),verdict:Ke},$t={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Ge),maxScore:100,details:st,questions:[],answers:[]};oe.play("finish"),t($t)},ee=()=>{const ie={section:o,correct:R,wrong:U},se=[...M];se.find($t=>$t.section===o)||se.push(ie);const ge=se.reduce(($t,Ft)=>$t+Ft.correct,0),Ne=se.reduce(($t,Ft)=>$t+Ft.wrong,0),Pe=ge/(se.length||1),Ge=ge+Ne,et=Ge>0?ge/Ge*100:0,Ke={mode:s,totalCorrect:ge,totalWrong:Ne,averageSpeed:parseFloat(Pe.toFixed(1)),accuracy:parseFloat(et.toFixed(1)),sectionData:se,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},st={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(et),maxScore:100,details:Ke,questions:[],answers:[],isAborted:!0};t(st)};if(_==="FINISHED"){const ie=M.reduce((ft,Ke)=>ft+Ke.correct,0),se=M.reduce((ft,Ke)=>ft+Ke.wrong,0),ge=ie/M.length,Ne=ie/(ie+se)*100,Pe=ge,Ge=M.reduce((ft,Ke)=>ft+Math.pow(Ke.correct-Pe,2),0)/M.length,et=Math.sqrt(Ge),zt=ZE(Ne,ge,et);return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[c.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),c.jsx("div",{className:"flex justify-center mb-8",children:c.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:zt})}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),c.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ge.toFixed(1)}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),c.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[Ne.toFixed(1),"%"]})]}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),c.jsx("div",{className:"text-2xl font-black text-amber-500",children:et.toFixed(2)}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),c.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:Bp}).map((ft,Ke)=>{const st=M.find(Ie=>Ie.section===Ke+1),$t=st?st.correct:0,Ft=Math.max(...M.map(Ie=>Ie.correct),10),gn=$t/Ft*100;return c.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[c.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${gn}%`},children:c.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",Ke+1,": ",$t]})}),c.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:Ke+1})]},Ke)})})]}),c.jsxs("button",{onClick:H,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[c.jsx(Af,{size:20})," Simpan Hasil"]})]})})}return c.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[c.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),c.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[o,"/",Bp]})]}),c.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),c.jsxs("span",{className:`text-lg font-mono font-black ${h<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[h,"s"]})]}),c.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),c.jsx("span",{className:"text-lg font-black text-emerald-600",children:R})]})]}),c.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:c.jsx(su,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),c.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[j&&c.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${j==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:c.jsx("div",{className:`p-4 rounded-full ${j==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:j==="CORRECT"?c.jsx(ks,{size:64}):c.jsx(k0,{size:64})})}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&c.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[c.jsx("div",{className:"grid grid-cols-5 gap-1",children:(pe=s==="MATCHING"?V==null?void 0:V.map:A==null?void 0:A.reference)==null?void 0:pe.map((ie,se)=>c.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:c.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:ie})},se))}),c.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:XE.map((ie,se)=>c.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:ie},se))})]}),c.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[c.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?c.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:c.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:V==null?void 0:V.target})}):c.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:A==null?void 0:A.question.map((ie,se)=>c.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:ie},se))})]})]}),s==="SAMA_BEDA"&&D&&c.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[c.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[c.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:c.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:D.left.map((ie,se)=>c.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},se))})}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:c.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:D.right.map((ie,se)=>c.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ie},se))})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[c.jsxs("button",{onClick:()=>he(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[c.jsx(ks,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),c.jsxs("button",{onClick:()=>he(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[c.jsx(k0,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),c.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&G&&c.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[c.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",c.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:G.target})]}),c.jsx("button",{onClick:Te,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),c.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:G.grid.map((ie,se)=>{const ge=ne.includes(se);return c.jsx("button",{onClick:()=>Me(se),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${ge?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:ie},se)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&c.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:c.jsx("div",{className:"max-w-3xl mx-auto",children:c.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:XE.map((ie,se)=>c.jsx("button",{onClick:()=>he(se),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:c.jsx("span",{className:"text-xl sm:text-2xl font-black",children:ie})},se))})})}),p&&c.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),c.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),c.jsx("button",{onClick:()=>v(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),c.jsx("button",{onClick:ee,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},m8=({targetNumber:n,refreshTrigger:e})=>{const t=z.useRef(null);return z.useEffect(()=>{const s=t.current;if(!s)return;const r=s.getContext("2d");if(!r)return;r.clearRect(0,0,s.width,s.height);const o=document.createElement("canvas");o.width=s.width,o.height=s.height;const u=o.getContext("2d");if(!u)return;u.fillStyle="#000000",u.fillRect(0,0,s.width,s.height),u.fillStyle="#FFFFFF",u.font='bold 160px "Arial Rounded MT Bold", "Helvetica Rounded", Arial, sans-serif',u.textAlign="center",u.textBaseline="middle";const h=(Math.random()-.5)*.2;u.save(),u.translate(s.width/2,s.height/2),u.rotate(h),u.fillText(n.toString(),0,0),u.restore();const p=u.getImageData(0,0,s.width,s.height).data,v=["#E74C3C","#E67E22","#D35400","#C0392B","#F1948A","#E59866","#CD6155"],_=["#27AE60","#2ECC71","#1ABC9C","#16A085","#7DCEA0","#73C6B6","#A9DFBF","#52BE80"],T=s.width/2,A=s.height/2,k=s.width/2-5,D=3500;for(let I=0;I<D;I++){let V=Math.random()*s.width,N=Math.random()*s.height;if(Math.sqrt(Math.pow(V-T,2)+Math.pow(N-A,2))>k)continue;const Y=Math.random()*4+1.5,ne=(Math.floor(N)*s.width+Math.floor(V))*4,M=p[ne]>128?v:_;let P=M[Math.floor(Math.random()*M.length)];Math.random()<.05&&(P="#95A5A6"),r.beginPath(),r.arc(V,N,Y,0,Math.PI*2),r.fillStyle=P,r.fill()}},[n,e]),c.jsxs("div",{className:"relative",children:[c.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-50 dark:bg-slate-800 mx-auto border-4 border-slate-200 dark:border-slate-700"}),c.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner pointer-events-none opacity-20 bg-gradient-to-br from-white to-black"})]})},p8=({onBack:n,onComplete:e})=>{const[t,s]=z.useState([]),[r,o]=z.useState(0),[u,h]=z.useState([]),[m,p]=z.useState(""),[v,_]=z.useState(!1);z.useEffect(()=>{const k=Array.from({length:10},()=>({number:Math.floor(Math.random()*90)+10}));s(k)},[]);const T=()=>{oe.play("click");const k=[...u,m];h(k),p(""),r<t.length-1?o(r+1):(oe.play("finish"),_(!0))};if(t.length===0)return c.jsx("div",{className:"p-10 text-center dark:text-white flex items-center justify-center min-h-[50vh]",children:"Menyiapkan Tes..."});if(v){const k=t.filter((G,Y)=>{var ne;return G.number.toString().trim()===((ne=u[Y])==null?void 0:ne.trim())}).length,D=k>=8,I=t.map((G,Y)=>({id:`cb-q-${Y}`,type:"short_answer",content:`Ishihara Plate #${Y+1}`,correctAnswer:G.number.toString(),explanation:`Plate displayed number ${G.number}`,metadata:{difficulty:"Medium",idealTimeSeconds:10,topic:"Buta Warna",subtest:"Ishihara"}})),V=u.map((G,Y)=>({questionId:`cb-q-${Y}`,selectedAnswer:G,isCorrect:G.trim()===t[Y].number.toString().trim(),scoreEarned:G.trim()===t[Y].number.toString().trim()?10:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1})),N={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:k*10,maxScore:100,details:{type:"Ishihara Simulation",passed:D},questions:I,answers:V};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center transition-colors",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl max-w-lg w-full text-center max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${D?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:D?c.jsx(ks,{size:40}):c.jsx(Bh,{size:40})}),c.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:D?"Mata Normal":"Indikasi Buta Warna"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Skor Anda: ",k," dari ",t.length]}),c.jsx("div",{className:"mb-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden text-left",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-300 font-bold",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3",children:"Plate"}),c.jsx("th",{className:"p-3 text-center",children:"Angka"}),c.jsx("th",{className:"p-3 text-center",children:"Jawab"}),c.jsx("th",{className:"p-3 text-center",children:"Status"})]})}),c.jsx("tbody",{children:t.map((G,Y)=>{const ne=u[Y],Q=G.number.toString().trim()===ne.trim();return c.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 text-slate-700 dark:text-slate-300",children:[c.jsxs("td",{className:"p-3 font-medium",children:["#",Y+1]}),c.jsx("td",{className:"p-3 font-mono text-center",children:G.number}),c.jsx("td",{className:"p-3 font-mono text-center text-slate-600 dark:text-slate-400",children:ne||"-"}),c.jsx("td",{className:"p-3 text-center",children:Q?c.jsx(ks,{size:16,className:"text-emerald-500 inline"}):c.jsx(Bh,{size:16,className:"text-rose-500 inline"})})]},Y)})})]})}),c.jsx("button",{onClick:()=>e(N),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Simpan & Keluar"}),c.jsx("p",{className:"mt-4 text-[10px] text-slate-400",children:"Hasil ini adalah simulasi. Untuk diagnosis medis, hubungi dokter mata."})]})})}const A=t[r];return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[c.jsx(Et,{size:18,className:"mr-2"})," Kembali"]}),c.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[r+1," / ",t.length]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"mb-8 flex justify-center py-4",children:c.jsx(m8,{targetNumber:A.number,refreshTrigger:r})}),c.jsx("p",{className:"mb-4 text-slate-600 dark:text-slate-300 font-medium",children:"Angka berapa yang Anda lihat?"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:m,onChange:k=>p(k.target.value),autoFocus:!0,onKeyDown:k=>k.key==="Enter"&&m&&T()}),c.jsx("button",{onClick:T,disabled:!m,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}),c.jsx("div",{className:"mt-6 flex justify-center",children:c.jsx("button",{onClick:()=>p("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline",children:"Saya tidak melihat angka"})})]})]})})},Hg=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},g8=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",I0=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},q1=n=>{switch(n){case"REACTION":return c.jsx(xa,{size:20});case"SEQUENCE":return c.jsx(xr,{size:20});case"AIM":return c.jsx(oo,{size:20});case"CHIMP":return c.jsx(qs,{size:20});case"VISUAL":return c.jsx(xr,{size:20});case"NUMBER":return c.jsx(Oh,{size:20});case"VERBAL":return c.jsx(Hh,{size:20});case"TYPING":return c.jsx(dr,{size:20});case"BRIDGE":return c.jsx(Gh,{size:20});case"MATCH":return c.jsx(Vh,{size:20});default:return c.jsx(Ns,{size:20})}},K1=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},x8=()=>c.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:c.jsx(Ns,{size:64})}),y8=({percentile:n,score:e,unit:t,game:s})=>{const u=n/100*300;return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[c.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[c.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),c.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),c.jsx("line",{x1:u,y1:"10",x2:u,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),c.jsx("circle",{cx:u,cy:"10",r:"4",fill:"#ef4444"})]}),c.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),c.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[c.jsx("span",{children:"Bottom 1%"}),c.jsx("span",{children:"Average"}),c.jsx("span",{children:"Top 1%"})]})]})},v8=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const r=Hg(t,s),o=g8(r);let u="pts";return(t==="REACTION"||t==="AIM")&&(u="ms"),t==="TYPING"&&(u="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(u="lvl"),c.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:h=>h.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx($c,{className:"text-indigo-500"})," Statistik Anda"]}),c.jsx("button",{onClick:()=>{oe.play("back"),e()},children:c.jsx(B1,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),c.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",c.jsx("span",{className:"text-lg font-medium text-slate-400",children:u})]}),c.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",r,"% orang"]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[c.jsx(y8,{percentile:r,score:s,unit:u,game:t}),c.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:o})]})]}):c.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},b8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState("WAITING"),[r,o]=z.useState(0),[u,h]=z.useState([]),[m,p]=z.useState(0),v=z.useRef(null);z.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=()=>{s("READY");const I=Math.floor(Math.random()*3e3)+2e3;v.current=window.setTimeout(()=>{o(Date.now()),s("GO")},I)},T=()=>{if(t==="WAITING")_();else if(t==="READY")v.current&&clearTimeout(v.current),s("TOO_SOON");else if(t==="GO"){const I=Date.now()-r;p(I);const V=[...u,I];h(V),V.length>=5?(s("FINAL_SCORE"),oe.play("finish")):(s("RESULT"),oe.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},A=u.length>0?Math.round(u.reduce((I,V)=>I+V,0)/u.length):0;let k,D="bg-slate-900";return t==="WAITING"?(k=c.jsxs(c.Fragment,{children:[c.jsx(xa,{size:80,className:"mx-auto mb-6 text-amber-400"}),c.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),c.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",u.length+1," dari 5"]}),c.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),D="bg-slate-800"):t==="READY"?(k=c.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),D="bg-rose-600"):t==="GO"?(k=c.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),D="bg-emerald-500"):t==="RESULT"?(k=c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[m," ms"]}),c.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),D="bg-indigo-600"):t==="FINAL_SCORE"?(k=c.jsxs(c.Fragment,{children:[c.jsx(Ns,{size:64,className:"mx-auto mb-4 text-emerald-400"}),c.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),c.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[A," ms"]}),c.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[c.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(A),children:"Simpan Skor"}),c.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{h([]),s("WAITING")},children:"Coba Lagi"})]})]}),D="bg-slate-800"):t==="TOO_SOON"&&(k=c.jsxs(c.Fragment,{children:[c.jsx(x8,{}),c.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),c.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),D="bg-slate-800"),c.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${D}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[c.jsx("button",{onClick:I=>{I.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),k]})},_8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState([]),[r,o]=z.useState([]),[u,h]=z.useState(1),[m,p]=z.useState("START"),[v,_]=z.useState(null),T=async(k,D)=>{p("WATCHING"),o([]);const I=Math.floor(Math.random()*9),V=[...D,I];s(V),await new Promise(N=>setTimeout(N,800));for(let N=0;N<V.length;N++)_(V[N]),oe.play("click"),await new Promise(G=>setTimeout(G,600)),_(null),await new Promise(G=>setTimeout(G,200));p("PLAYING")},A=async k=>{if(m!=="PLAYING")return;_(k),oe.play("tap"),setTimeout(()=>_(null),200);const D=[...r,k];if(o(D),D[D.length-1]!==t[D.length-1]){p("GAMEOVER"),oe.play("error");return}D.length===t.length&&(p("WATCHING"),oe.play("success"),await new Promise(I=>setTimeout(I,800)),h(I=>I+1),T(u+1,t))};return m==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(xr,{size:80,className:"mx-auto mb-6 text-indigo-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),c.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):m==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(xr,{size:64,className:"mx-auto mb-6 text-rose-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:u})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{h(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(Math.max(1,u-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",u]}),c.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:m==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),c.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((k,D)=>c.jsx("div",{onClick:()=>A(D),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${v===D?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},D))})]})},T8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState("IDLE"),[r,o]=z.useState(30),[u,h]=z.useState({top:"50%",left:"50%"}),[m,p]=z.useState([]),v=z.useRef(null),[_,T]=z.useState(0),[A,k]=z.useState(0),[D,I]=z.useState(0),[V,N]=z.useState(null),G=()=>{if(!v.current)return;const R=v.current.getBoundingClientRect(),O=96,U=50,B=R.width-O-U,j=R.height-O-U,le=Math.max(U,Math.random()*B),ke=Math.max(U,Math.random()*j);h({top:`${ke}px`,left:`${le}px`})},Y=()=>{s("PLAYING"),o(30),p([]),T(0),k(0),G()};z.useEffect(()=>{if(t==="PLAYING"&&A>0){const R=setInterval(()=>{T(Date.now()-A)},50);return N(R),()=>clearInterval(R)}},[t,A]);const ne=R=>{if(R.stopPropagation(),t!=="PLAYING")return;const O=Date.now();if(A===0){k(O),I(O),o(B=>B-1),G(),oe.play("click");return}const U=O-D;p(B=>[...B,U]),I(O),oe.play("click"),r<=1?(clearInterval(V),s("FINISHED"),oe.play("finish")):(o(B=>B-1),G())},Q=()=>{t==="PLAYING"&&A>0&&oe.play("error")},M=m.length>0?Math.round(m.reduce((R,O)=>R+O,0)/m.length):0,P=m.length>0?Math.round(m.reduce((R,O)=>R+O,0)/m.length):0;return c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:Q,children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),t==="IDLE"&&c.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[c.jsx(oo,{size:80,className:"mx-auto mb-6 text-orange-500"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),c.jsx("button",{onClick:Y,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),c.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:r})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),c.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),c.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[P," ms"]})]})]}),c.jsx("div",{ref:v,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:c.jsxs("div",{onMouseDown:ne,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:u.top,left:u.left},children:[c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),c.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),c.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&c.jsxs("div",{className:"text-center text-white cursor-default",onClick:R=>R.stopPropagation(),children:[c.jsx(oo,{size:64,className:"mx-auto mb-4 text-orange-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),c.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),c.jsxs("h1",{className:"text-7xl font-black mb-8",children:[M," ms"]}),c.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),c.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[c.jsx("button",{onClick:()=>n(M),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),c.jsx("button",{onClick:Y,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},E8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(4),[r,o]=z.useState([]),[u,h]=z.useState("IDLE"),[m,p]=z.useState(1),[v,_]=z.useState(!1),T=k=>{const I=Array.from({length:40},(N,G)=>G).sort(()=>.5-Math.random()),V=Array.from({length:k},(N,G)=>({id:G+1,pos:I[G],visible:!0}));o(V),p(1),_(!1),h("PLAYING")},A=k=>{u==="PLAYING"&&(k===m?(oe.play("click"),k===1&&_(!0),o(D=>D.map(I=>I.id===k?{...I,visible:!1}:I)),k===r.length?(oe.play("success"),setTimeout(()=>{s(D=>D+1),T(t+1)},500)):p(D=>D+1)):(oe.play("error"),h("GAMEOVER")))};return c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),u==="IDLE"&&c.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[c.jsx(qs,{size:80,className:"mx-auto mb-6 text-teal-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),c.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),u==="PLAYING"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),c.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((k,D)=>{const I=r.find(V=>V.pos===D);return!I||!I.visible?c.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},D):c.jsx("button",{onMouseDown:()=>A(I.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${v&&I.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:v&&I.id>1?"":I.id},D)})})]}),u==="GAMEOVER"&&c.jsxs("div",{className:"text-center text-white",children:[c.jsx(qs,{size:64,className:"mx-auto mb-4 text-rose-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),c.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[c.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},S8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(3),[u,h]=z.useState(3),[m,p]=z.useState([]),[v,_]=z.useState([]),[T,A]=z.useState([]),[k,D]=z.useState("START"),I=N=>{let G=3;N>2&&(G=4),N>5&&(G=5),N>10&&(G=6),N>20&&(G=7),h(G);const Y=Math.min(Math.floor(G*G/2),N+2),ne=[];for(;ne.length<Y;){const Q=Math.floor(Math.random()*(G*G));ne.includes(Q)||ne.push(Q)}p(ne),_([]),A([]),D("SHOWING"),setTimeout(()=>D("PLAYING"),1e3+N*100)},V=N=>{if(k==="PLAYING"&&!(v.includes(N)||T.includes(N)))if(m.includes(N)){oe.play("tap");const G=[...v,N];_(G),G.length===m.length&&(oe.play("success"),setTimeout(()=>{s(Y=>Y+1),I(t+1)},500))}else{oe.play("error");const G=r-1;o(G),A(Y=>[...Y,N]),G<=0&&setTimeout(()=>D("GAMEOVER"),500)}};return k==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(xr,{size:80,className:"mx-auto mb-6 text-sky-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),c.jsx("button",{onClick:()=>{s(1),o(3),I(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):k==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[c.jsx(xr,{size:64,className:"mx-auto mb-6 text-sky-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{s(1),o(3),I(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[c.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((N,G)=>c.jsx(Tf,{size:24,className:G<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},G))})]}),c.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:u*u}).map((N,G)=>{const Y=m.includes(G),ne=v.includes(G),Q=T.includes(G);let M="bg-slate-700 hover:bg-slate-600";return k==="SHOWING"&&Y&&(M="bg-white shadow-[0_0_15px_white] scale-95"),k==="PLAYING"&&ne&&(M="bg-white"),k==="PLAYING"&&Q&&(M="bg-slate-900 border-2 border-rose-900"),c.jsx("div",{onMouseDown:()=>V(G),className:`rounded-lg transition-all duration-200 cursor-pointer ${M}`},G)})})]})},A8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(""),[u,h]=z.useState(""),[m,p]=z.useState("START"),[v,_]=z.useState(0),[T,A]=z.useState(100),k=N=>{let G="";for(let Y=0;Y<N;Y++)G+=Math.floor(Math.random()*10);return G},D=()=>{s(1),I(1)},I=N=>{const G=k(N);o(G),p("SHOWING"),A(100);const Y=1e3+N*500;_(Y),setTimeout(()=>{A(0)},50),setTimeout(()=>{p("INPUT")},Y)},V=N=>{N==null||N.preventDefault(),u===r?(oe.play("success"),p("RESULT"),setTimeout(()=>{s(G=>G+1),h(""),I(t+1)},1e3)):(oe.play("error"),p("GAMEOVER"))};return m==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Oh,{size:80,className:"mx-auto mb-6 text-blue-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),c.jsx("button",{onClick:D,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):m==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Oh,{size:64,className:"mx-auto mb-6 text-blue-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),c.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[c.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),c.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:r}),c.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),c.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:u})]}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),m==="SHOWING"&&c.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[c.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:r}),c.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:c.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${v}ms`,opacity:T>0?1:.2}})})]}),m==="INPUT"&&c.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[c.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),c.jsxs("form",{onSubmit:V,children:[c.jsx("input",{type:"number",autoFocus:!0,value:u,onChange:N=>h(N.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),c.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),m==="RESULT"&&c.jsxs("div",{className:"text-center",children:[c.jsx(ks,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),c.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},w8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(0),[r,o]=z.useState(3),[u,h]=z.useState(""),[m,p]=z.useState(new Set),[v,_]=z.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],A=()=>{const I=m.size>0&&Math.random()<.4;let V="";if(I){const N=Array.from(m);V=N[Math.floor(Math.random()*N.length)]}else{let N=0;do V=T[Math.floor(Math.random()*T.length)],N++;while(m.has(V)&&N<100)}h(V)},k=I=>{const V=m.has(u);if(I==="SEEN"&&V||I==="NEW"&&!V)s(G=>G+1),I==="NEW"&&p(G=>new Set(G).add(u)),oe.play("click"),A();else{const G=r-1;o(G),oe.play("error"),I==="NEW"&&p(Y=>new Set(Y).add(u)),G<=0?_("GAMEOVER"):A()}},D=()=>{s(0),o(3),p(new Set),_("PLAYING"),A()};return v==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Hh,{size:80,className:"mx-auto mb-6 text-purple-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),c.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",c.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",c.jsx("strong",{children:"SUDAH"}),"."]}),c.jsx("button",{onClick:D,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Hh,{size:64,className:"mx-auto mb-6 text-purple-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[c.jsxs("div",{children:["Skor: ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((I,V)=>c.jsx(Tf,{size:24,className:V<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},V))})]}),c.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:u}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>k("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),c.jsx("button",{onClick:()=>k("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},N8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(""),[r,o]=z.useState(""),[u,h]=z.useState(null),[m,p]=z.useState(0),[v,_]=z.useState(0),[T,A]=z.useState("START");z.useEffect(()=>{const I=bb,V=(I.length>0?I[Math.floor(Math.random()*I.length)]:"")||"";s(String(V))},[]),z.useEffect(()=>{let I;return T==="PLAYING"&&u&&(I=setInterval(()=>{const N=(Date.now()-u)/1e3;_(Math.floor(N));const G=r.length,Y=N/60;Y>0&&p(Math.round(G/5/Y))},1e3)),()=>clearInterval(I)},[T,u,r]);const k=I=>{const V=I.target.value;if(T==="START"&&(h(Date.now()),A("PLAYING")),o(V),V===t){const N=(Date.now()-(u||Date.now()))/6e4,G=Math.round(t.length/5/N);p(G),A("FINISHED"),oe.play("finish")}else V.length%5===0&&oe.play("tap")},D=()=>{const I=bb,V=(I.length>0?I[Math.floor(Math.random()*I.length)]:"")||"";s(String(V)),o(""),h(null),p(0),_(0),A("START")};return T==="FINISHED"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(dr,{size:64,className:"mx-auto mb-6 text-slate-400"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),c.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[m," ",c.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>n(m),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[c.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[c.jsxs("div",{children:["WPM: ",c.jsx("span",{className:"font-bold text-emerald-400",children:m})]}),c.jsxs("div",{children:["Time: ",c.jsxs("span",{className:"font-bold text-emerald-400",children:[v,"s"]})]})]}),c.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[c.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((I,V)=>{let N="text-slate-500";return V<r.length&&(N=r[V]===I?"text-white":"text-rose-500 bg-rose-500/20"),c.jsx("span",{className:N,children:I},V)})}),c.jsx("textarea",{value:r,onChange:k,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},k8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(3),[u,h]=z.useState(5),[m,p]=z.useState(4),[v,_]=z.useState([]),[T,A]=z.useState("START"),[k,D]=z.useState(0),[I,V]=z.useState(100),[N,G]=z.useState(1500),Y=M=>{const R=4+Math.floor(M/2);h(5),p(R);const O=[];let U=R-1,B=Math.floor(5/2);for(O.push({row:U,col:B});U>0;){U--;const j=[B];B>0&&j.push(B-1),B<4&&j.push(B+1),B=j[Math.floor(Math.random()*j.length)],O.push({row:U,col:B})}_(O)},ne=M=>{Y(M),A("SHOWING"),V(100);const P=1500;G(P),setTimeout(()=>V(0),50),setTimeout(()=>{A("PLAYING"),D(0)},P)},Q=(M,P)=>{if(T!=="PLAYING")return;const R=v[k];if(M===R.row&&P===R.col){oe.play("click");const O=k+1;D(O),O===v.length&&(oe.play("success"),setTimeout(()=>{s(U=>U+1),ne(t+1)},500))}else oe.play("error"),o(O=>O-1),r<=1?A("GAMEOVER"):(A("SHOWING"),V(100),setTimeout(()=>V(0),50),setTimeout(()=>{A("PLAYING"),D(0)},N))};return T==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Gh,{size:80,className:"mx-auto mb-6 text-emerald-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),ne(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Gh,{size:64,className:"mx-auto mb-6 text-emerald-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),ne(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[c.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((M,P)=>c.jsx(Tf,{size:24,className:P<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},P))})]}),c.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:c.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${I}%`,transitionDuration:`${N}ms`}})}),c.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:c.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,gridTemplateRows:`repeat(${m}, 1fr)`},children:Array.from({length:m}).map((M,P)=>Array.from({length:u}).map((R,O)=>{const U=v.findIndex(ke=>ke.row===P&&ke.col===O),B=U!==-1,j=B&&U<k;let le="bg-slate-700";return T==="SHOWING"&&B?le="bg-emerald-400":T==="PLAYING"&&(j?le="bg-emerald-600":B&&U===k&&(le="bg-slate-700 active:bg-emerald-400")),c.jsx("div",{onMouseDown:()=>Q(P,O),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${le} hover:opacity-90`},`${P}-${O}`)}))})}),c.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[c.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),c.jsx(OV,{size:32})]})]})},C8=({onFinish:n,onExit:e})=>{const[t,s]=z.useState(1),[r,o]=z.useState(5),[u,h]=z.useState([]),[m,p]=z.useState([]),[v,_]=z.useState("START"),[T,A]=z.useState(!1),[k,D]=z.useState(3),I=["","","","","","","","","","","","","","","",""],V=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],N=ne=>{const Q=ne+2,M=Q*2,P=Math.ceil(Math.sqrt(M));D(P);const R=[...I].sort(()=>Math.random()-.5).slice(0,Q);let O=[];for(let U=0;U<Q;U++){const B=R[U],j=V[U%V.length];O.push({id:U*2,icon:B,flipped:!0,matched:!1,color:j}),O.push({id:U*2+1,icon:B,flipped:!0,matched:!1,color:j})}O=O.sort(()=>Math.random()-.5).map((U,B)=>({...U,id:B})),h(O),_("PREVIEW")},G=()=>{oe.play("click"),h(ne=>ne.map(Q=>({...Q,flipped:!1}))),_("PLAYING")},Y=ne=>{if(v!=="PLAYING"||T)return;const Q=u.find(R=>R.id===ne);if(!Q||Q.flipped||Q.matched)return;oe.play("click");const M=u.map(R=>R.id===ne?{...R,flipped:!0}:R);h(M);const P=[...m,ne];if(p(P),P.length===2){A(!0);const R=M.find(U=>U.id===P[0]),O=M.find(U=>U.id===P[1]);R&&O&&R.icon===O.icon?(oe.play("success"),setTimeout(()=>{h(U=>U.map(B=>P.includes(B.id)?{...B,matched:!0}:B)),p([]),A(!1),M.filter(U=>!U.matched&&!P.includes(U.id)).length===0&&setTimeout(()=>{s(U=>U+1),N(t+1)},500)},500)):setTimeout(()=>{oe.play("error"),h(U=>U.map(B=>P.includes(B.id)?{...B,flipped:!1}:B)),p([]),A(!1),o(U=>{const B=U-1;return B<=0&&_("GAMEOVER"),B})},1e3)}};return v==="START"?c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center max-w-md p-6",children:[c.jsx(Vh,{size:80,className:"mx-auto mb-6 text-pink-400"}),c.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),c.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),N(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?c.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:c.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[c.jsx(Vh,{size:64,className:"mx-auto mb-6 text-pink-500"}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),c.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",c.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),N(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),c.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):c.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[c.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:c.jsx(Et,{size:24})}),c.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[c.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),c.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((ne,Q)=>c.jsx(Tf,{size:24,className:Q<r?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},Q))}),v==="PREVIEW"&&c.jsx("button",{onClick:G,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),c.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${k}, minmax(0, 1fr))`},children:u.map(ne=>c.jsx("div",{onClick:()=>Y(ne.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${ne.flipped||ne.matched?`${ne.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:ne.flipped||ne.matched?ne.icon:""},ne.id))})]})},I8=({username:n,history:e})=>{const[t,s]=z.useState({}),[r,o]=z.useState(!0),[u,h]=z.useState(!0),m=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];z.useEffect(()=>{(async()=>{if(!u)return;o(!0);const _={};await Promise.all(m.map(async T=>{try{const A=await NV(T);_[T]=A}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),o(!1)})()},[u]);const p=v=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===v);return v==="REACTION"||v==="AIM"?_.sort((T,A)=>T.score-A.score):_.sort((T,A)=>A.score-T.score),_.slice(0,5).map(T=>{const A=T.details;return{name:n,score:T.score,unit:(A==null?void 0:A.unit)||""}})};return c.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(Sl,{className:"text-amber-500"})," Leaderboard"]}),c.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[c.jsxs("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[c.jsx(IO,{size:14,className:"inline mr-1"})," Global"]}),c.jsxs("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[c.jsx(O9,{size:14,className:"inline mr-1"})," Personal"]})]})]}),r&&u?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[c.jsx(Fn,{size:40,className:"animate-spin mb-4 text-indigo-500"}),c.jsx("p",{children:"Memuat Data Global Rank..."})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:m.map(v=>{let _=[];u?_=t[v]||[]:_=p(v);const T=I0(v);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[c.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[c.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:q1(v)}),c.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:K1(v)})]}),c.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((A,k)=>c.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${k===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`font-bold w-4 text-center ${k===0?"text-amber-500":k===1?"text-slate-400":k===2?"text-orange-700":"text-slate-500"}`,children:k+1}),c.jsxs("span",{className:`font-medium truncate max-w-[120px] ${A.username===n||A.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[A.name||A.username," ",A.username===n||A.name===n?"(You)":""]})]}),c.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[A.score,c.jsx("span",{className:"text-xs text-slate-400 ml-1",children:A.unit})]})]},k)):c.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},v)})})]})},R8=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[c.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:c.jsx(Ef,{size:32,className:"text-slate-400"})}),c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):c.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[c.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[c.jsx(Ns,{className:"text-indigo-500"})," Recent Activity"]}),c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),c.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const r=s.game,o=t.score,u=s.unit||"",h=Hg(r,o);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[c.jsx("td",{className:"p-5",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`p-2 rounded-xl ${I0(r)}`,children:q1(r)}),c.jsx("span",{className:`font-bold text-base ${I0(r).split(" ")[0]}`,children:K1(r)})]})}),c.jsx("td",{className:"p-5",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),c.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),c.jsx("td",{className:"p-5 text-right",children:c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[o,u]}),c.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${h>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",h,"%"]})]})})]},t.id)})})]})})})]})},M8=({onBack:n,username:e,history:t,onComplete:s,isGuest:r,initialMode:o,initialTab:u})=>{const[h,m]=z.useState("MENU"),[p,v]=z.useState(u||"DASHBOARD");z.useEffect(()=>{o&&m(o)},[o]),z.useEffect(()=>{u&&v(u)},[u]);const[_,T]=z.useState(!1),[A,k]=z.useState("REACTION"),D=async(N,G)=>{let Y="pts";(G==="REACTION"||G==="AIM")&&(Y="ms"),(G==="SEQUENCE"||G==="NUMBER"||G==="CHIMP"||G==="VISUAL"||G==="BRIDGE"||G==="MATCH")&&(Y="lvl"),G==="TYPING"&&(Y="wpm"),r||wV(G,N,e,Y).catch(Q=>console.error("Cloud save failed",Q));const ne={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:N,maxScore:0,details:{game:G,unit:Y},questions:[],answers:[]};s(ne),m("MENU")},I=N=>{const G=t.filter(Q=>Q.category!=="BENCHMARK"||!Q.details?!1:Q.details.game===N).map(Q=>{const M=Q.details;return{id:Q.id,game:M.game,score:Q.score,unit:M.unit,date:Q.date}});if(G.length===0)return{best:null,percentile:0};let Y;N==="REACTION"||N==="AIM"?Y=Math.min(...G.map(Q=>Q.score)):Y=Math.max(...G.map(Q=>Q.score));const ne=Hg(N,Y);return{best:Y,percentile:ne}};if(h!=="MENU")switch(h){case"REACTION":return c.jsx(b8,{onFinish:N=>D(N,"REACTION"),onExit:()=>m("MENU")});case"SEQUENCE":return c.jsx(_8,{onFinish:N=>D(N,"SEQUENCE"),onExit:()=>m("MENU")});case"AIM":return c.jsx(T8,{onFinish:N=>D(N,"AIM"),onExit:()=>m("MENU")});case"CHIMP":return c.jsx(E8,{onFinish:N=>D(N,"CHIMP"),onExit:()=>m("MENU")});case"VISUAL":return c.jsx(S8,{onFinish:N=>D(N,"VISUAL"),onExit:()=>m("MENU")});case"NUMBER":return c.jsx(A8,{onFinish:N=>D(N,"NUMBER"),onExit:()=>m("MENU")});case"VERBAL":return c.jsx(w8,{onFinish:N=>D(N,"VERBAL"),onExit:()=>m("MENU")});case"TYPING":return c.jsx(N8,{onFinish:N=>D(N,"TYPING"),onExit:()=>m("MENU")});case"BRIDGE":return c.jsx(k8,{onFinish:N=>D(N,"BRIDGE"),onExit:()=>m("MENU")});case"MATCH":return c.jsx(C8,{onFinish:N=>D(N,"MATCH"),onExit:()=>m("MENU")});default:return m("MENU"),null}const V=({game:N,title:G,desc:Y,icon:ne,colorClass:Q,btnColorClass:M})=>{const{best:P,percentile:R}=I(N);let O="pts";return(N==="REACTION"||N==="AIM")&&(O="ms"),N==="TYPING"&&(O="wpm"),(N==="SEQUENCE"||N==="NUMBER"||N==="CHIMP"||N==="VISUAL"||N==="BRIDGE"||N==="MATCH")&&(O="lvl"),c.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[c.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${Q}`}),c.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[c.jsx("div",{className:`p-4 rounded-2xl ${Q} bg-opacity-10 text-opacity-100 shrink-0`,children:c.jsx("div",{className:`${Q.replace("bg-","text-")}`,children:ne})}),c.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:G}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:Y}),c.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full ${Q}`,style:{width:`${R}%`}})}),c.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[c.jsxs("span",{children:["Best: ",P!==null?`${P} ${O}`:"-"]}),c.jsx("span",{children:R>0?`Top ${R}%`:"-"})]})]}),c.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[c.jsxs("button",{onClick:U=>{U.stopPropagation(),oe.play("click"),m(N)},className:`flex-1 sm:flex-none px-6 py-2.5 ${M} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[c.jsx(xu,{size:16,fill:"currentColor"})," MAIN"]}),c.jsxs("button",{onClick:U=>{U.stopPropagation(),oe.play("click"),k(N),T(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[c.jsx($c,{size:14})," Stats"]})]})]})]})};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:c.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[c.jsx(v8,{isOpen:_,onClose:()=>T(!1),game:A,bestScore:I(A).best}),c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:c.jsxs("button",{onClick:()=>{oe.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[c.jsx(Et,{size:20,className:"mr-2"})," Menu Utama"]})}),c.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[c.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[c.jsx(Ns,{className:"text-rose-500",size:40})," Human Benchmark"]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",c.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),r&&c.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),c.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[c.jsx("button",{onClick:()=>v("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${p==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),c.jsx("button",{onClick:()=>v("RANKING"),className:`pb-3 px-4 font-bold transition-all ${p==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),p==="DASHBOARD"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[c.jsx(V,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:c.jsx(xa,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),c.jsx(V,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:c.jsx(xr,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),c.jsx(V,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:c.jsx(oo,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),c.jsx(V,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:c.jsx(qs,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),c.jsx(V,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:c.jsx(xr,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),c.jsx(V,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:c.jsx(Oh,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),c.jsx(V,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:c.jsx(Hh,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),c.jsx(V,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:c.jsx(dr,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),c.jsx(V,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:c.jsx(Gh,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),c.jsx(V,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:c.jsx(Vh,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),c.jsx(R8,{history:t})]}):c.jsx(I8,{username:e,history:t})]})})},Jd=[{id:"utbk",label:"UTBK SNBT",type:"UTBK",sub:"General",mode:"SINGLE",color:"bg-rose-500",description:"Ranking berdasarkan skor IRT rata-rata."},{id:"skd_combined",label:"SKD CPNS & Kedinasan",type:"SKD",mode:"SPLIT_SKD",color:"bg-amber-500",description:"Ranking jalur CPNS Umum dan Sekolah Kedinasan."},{id:"psikotest",label:"Psikotes (IQ)",type:"PSIKOTEST",sub:"General",mode:"SINGLE",color:"bg-purple-500",description:"Ranking berdasarkan estimasi IQ Score."},{id:"tpa",label:"TPA & TBI",type:"TPA",sub:"General",mode:"SINGLE",color:"bg-blue-600",description:"Ranking skor total TPA + Bahasa Inggris."},{id:"kecermatan_combined",label:"Tes Kecermatan",type:"KECERMATAN",mode:"SPLIT_KECERMATAN",color:"bg-emerald-600",description:"Ranking ketelitian di berbagai mode tes."},{id:"benchmark",label:"Human Benchmark",type:"BENCHMARK",mode:"BENCHMARK",color:"bg-slate-800",description:"Ranking game kognitif khusus."}],D8=({rank:n})=>n===1?c.jsx(fO,{size:24,className:"text-amber-400 fill-amber-400"}):n===2?c.jsx(qE,{size:24,className:"text-slate-400 fill-slate-400"}):n===3?c.jsx(qE,{size:24,className:"text-orange-400 fill-orange-400"}):c.jsx("span",{className:"font-black text-slate-400 text-lg w-6 text-center",children:n}),rr=({title:n,data:e,currentUserId:t,colorClass:s,compact:r})=>e.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center h-full min-h-[200px]",children:[c.jsx("div",{className:`p-3 rounded-full ${s.replace("bg-","bg-opacity-10 text-")} mb-3`,children:c.jsx(Sl,{size:24})}),c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:n}),c.jsx("p",{className:"text-xs text-slate-500",children:"Belum ada data ranking."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[c.jsx("div",{className:`p-4 border-b border-slate-100 dark:border-slate-700 ${s} bg-opacity-10`,children:c.jsxs("h3",{className:`font-bold ${s.replace("bg-","text-")} flex items-center gap-2`,children:[c.jsx(Sl,{size:18})," ",n]})}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-[500px] p-2 scrollbar-hide",children:c.jsx("div",{className:"space-y-2",children:e.map((o,u)=>{const h=u+1,m=t===o.uid;return c.jsxs("div",{className:`flex items-center p-3 rounded-xl border transition-all ${m?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 shadow-sm":"bg-white dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[c.jsx("div",{className:"w-8 shrink-0 flex justify-center mr-2",children:c.jsx(D8,{rank:h})}),c.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-500 dark:text-slate-400 mr-3 text-xs shrink-0",children:o.username[0].toUpperCase()}),c.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[c.jsxs("div",{className:`font-bold text-sm truncate ${m?"text-indigo-700 dark:text-indigo-300":"text-slate-800 dark:text-white"}`,children:[o.username," ",m&&"(You)"]}),!r&&o.packageName&&c.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-0.5",children:[c.jsx(U1,{size:10})," ",o.packageName]})]}),c.jsx("div",{className:"text-right",children:c.jsx("div",{className:`font-black ${r?"text-sm":"text-lg"} ${h<=3?"text-slate-800 dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:o.score})})]},u)})})})]}),P8=({onBack:n,userProfile:e,onOpenHumanBenchmark:t})=>{const[s,r]=z.useState("utbk"),[o,u]=z.useState([]),[h,m]=z.useState({}),[p,v]=z.useState(!1),[_,T]=z.useState(!1),A=Jd.find(V=>V.id===s)||Jd[0];z.useEffect(()=>{(async()=>{if(A.mode!=="BENCHMARK"){v(!0),u([]),m({});try{if(A.mode==="SINGLE"){const N=await $d(A.type,A.sub||"General");u(N)}else if(A.mode==="SPLIT_SKD"){const[N,G]=await Promise.all([$d("SKD","CPNS"),$d("SKD","KEDINASAN")]);m({CPNS:N,KEDINASAN:G})}else if(A.mode==="SPLIT_KECERMATAN"){const N=["ANGKA","HURUF","SIMBOL_HILANG","SAMA_BEDA","MATCHING","GROUPING"],G=N.map(Q=>$d("KECERMATAN",Q)),Y=await Promise.all(G),ne={};N.forEach((Q,M)=>{ne[Q]=Y[M]}),m(ne)}}catch(N){console.error("Error fetching leaderboard",N)}finally{v(!1)}}})()},[s]);const k=V=>{oe.play("click"),r(V),T(!1)},I=(()=>{if(!(e!=null&&e.uid)||A.mode!=="SINGLE")return null;const V=o.findIndex(N=>N.uid===e.uid);return V!==-1?{rank:V+1,data:o[V]}:null})();return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row transition-colors h-screen overflow-hidden",children:[c.jsxs("div",{className:"hidden md:flex w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex-col shrink-0 z-20",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[c.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition text-slate-500 dark:text-slate-400",children:c.jsx(Et,{size:20})}),c.jsxs("h2",{className:"font-black text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[c.jsx(Sl,{className:"text-amber-500",size:20})," Global Rank"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:Jd.map(V=>c.jsxs("button",{onClick:()=>k(V.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all text-left ${s===V.id?`${V.color} text-white shadow-md`:"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${s===V.id?"bg-white":V.color}`}),V.label]},V.id))})]}),c.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 z-30 sticky top-0",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 font-bold text-sm",children:[c.jsx(Et,{size:18,className:"mr-1"})," Menu"]}),c.jsxs("div",{className:"text-sm font-black text-slate-800 dark:text-white flex items-center gap-1",children:[c.jsx(Sl,{size:16,className:"text-amber-500"})," Global Leaderboard"]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>T(!_),className:"w-full flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700 rounded-xl font-bold text-slate-700 dark:text-white",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${A.color}`}),A.label]}),c.jsx(iO,{size:18,className:`transition-transform ${_?"rotate-180":""}`})]}),_&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-down max-h-[60vh] overflow-y-auto",children:Jd.map(V=>c.jsxs("button",{onClick:()=>k(V.id),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-bold transition-all text-left border-b border-slate-50 dark:border-slate-700 last:border-0 ${s===V.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${V.color}`}),V.label]},V.id))})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col h-full relative overflow-hidden bg-slate-50 dark:bg-slate-900",onClick:()=>T(!1),children:[c.jsxs("div",{className:"p-6 pb-4 hidden md:block",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A.label}),c.jsx("p",{className:"text-slate-500 text-sm",children:A.description})]}),p&&c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[c.jsx(Fn,{className:"animate-spin text-indigo-600 mb-4",size:40}),c.jsx("p",{className:"text-slate-500 font-medium",children:"Memuat data ranking..."})]}),!p&&c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-24 scrollbar-hide",children:[A.mode==="BENCHMARK"&&c.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 max-w-md w-full",children:[c.jsx(Ns,{size:64,className:"mx-auto mb-6 text-indigo-500 animate-bounce-slow"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Human Benchmark"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Peringkat untuk game kognitif (Reaction Time, Memory, dll) tersedia di dashboard khusus."}),c.jsxs("button",{onClick:()=>{oe.play("click"),t()},className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg",children:[c.jsx(gO,{size:20})," Buka Dashboard"]})]})}),A.mode==="SINGLE"&&c.jsx("div",{className:"max-w-3xl mx-auto",children:c.jsx(rr,{title:`Ranking ${A.label}`,data:o,currentUserId:e==null?void 0:e.uid,colorClass:A.color})}),A.mode==="SPLIT_SKD"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[c.jsx(rr,{title:"SKD CPNS Umum",data:h.CPNS||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-amber-500"}),c.jsx(rr,{title:"SKD Kedinasan",data:h.KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-orange-500"})]}),A.mode==="SPLIT_KECERMATAN"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:[c.jsx(rr,{title:"Angka Hilang",data:h.ANGKA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-emerald-500",compact:!0}),c.jsx(rr,{title:"Huruf Hilang",data:h.HURUF||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-teal-500",compact:!0}),c.jsx(rr,{title:"Simbol Hilang",data:h.SIMBOL_HILANG||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-cyan-500",compact:!0}),c.jsx(rr,{title:"Sama Beda Simbol",data:h.SAMA_BEDA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-500",compact:!0}),c.jsx(rr,{title:"Matching",data:h.MATCHING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-indigo-500",compact:!0}),c.jsx(rr,{title:"Grouping",data:h.GROUPING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-violet-500",compact:!0})]})]}),I&&A.mode==="SINGLE"&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 shadow-[0_-5px_20px_rgba(0,0,0,0.05)] z-30 animate-slide-up",children:c.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Rank"}),c.jsxs("div",{className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black px-3 py-1 rounded-lg",children:["#",I.rank]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Score"}),c.jsx("div",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:I.data.score})]})]})})]})]})},L8=({user:n})=>{var s,r;const[e,t]=z.useState(!1);return z.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?c.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):c.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:[" ",((r=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:r.toUpperCase())||"T"," "]})},$1=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return c.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},U8=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",r=e==="success"?c.jsx(ks,{size:20}):e==="error"?c.jsx(Bh,{size:20}):c.jsx(jO,{size:20});return z.useEffect(()=>{const o=setTimeout(t,3e3);return()=>clearTimeout(o)},[t]),c.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[" ",r," ",c.jsx("span",{className:"font-bold text-sm",children:n})," ",c.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:c.jsx(jl,{size:18})})," "]})},j8=({session:n,onResume:e,onDiscard:t})=>{const s=Math.round(Object.keys(n.answerMap).length/n.questions.length*100);return c.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:[" ",c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[" ",c.jsxs("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:[" ",c.jsx(Ef,{size:32})," "]})," ",c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Tes Belum Selesai"})," ",c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:[" Ditemukan sesi ",c.jsx("b",{children:n.packageTitle||n.category})," yang belum diselesaikan. Ingin melanjutkan? "]})," ",c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left",children:[" ",c.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",c.jsx("span",{children:"Progress"})," ",c.jsxs("span",{children:[s,"%"]})," "]})," ",c.jsxs("div",{className:"w-full bg-slate-200 dark:bg-slate-600 h-2 rounded-full overflow-hidden",children:[" ",c.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s}%`}})," "]})," "]})," ",c.jsxs("div",{className:"flex flex-col gap-3",children:[" ",c.jsxs("button",{onClick:e,className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" ",c.jsx(xu,{size:20})," Lanjutkan Tes "]})," ",c.jsxs("button",{onClick:t,className:"w-full py-3.5 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition flex items-center justify-center gap-2",children:[" ",c.jsx(lo,{size:20})," Hapus & Menu Utama "]})," "]})," "]})," "]})},V8=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[" ",c.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"})," ",c.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"})," ",c.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"})," ",c.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})," "]}),O8=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:[" ",c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[" ",t&&c.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[" ",c.jsx(Fn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"})," ",c.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})," "]})," ",c.jsxs("div",{className:"mb-8 flex justify-center",children:[" ",c.jsx("img",{src:uh,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})," "]})," ",c.jsxs("div",{className:"text-center mb-8",children:[" ",c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"})," ",c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})," "]})," ",c.jsxs("div",{className:"space-y-4",children:[" ",c.jsxs("button",{onClick:n,className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[" ",c.jsx("div",{className:"absolute left-4",children:c.jsx(V8,{})})," ",c.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})," "]})," ",c.jsxs("div",{className:"relative flex py-2 items-center",children:[" ",c.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," ",c.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"})," ",c.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," "]})," ",c.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" Masuk sebagai Tamu ",c.jsx(Za,{size:20})," "]})," ",c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" *Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard. "})," "]})," "]})," "]}),G8=({onSubmit:n,isLoading:e})=>{const[t,s]=z.useState(""),[r,o]=z.useState(""),u=h=>{if(h.preventDefault(),t.length<3){o("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){o("Hanya huruf, angka, dan underscore (_).");return}n(t)};return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:[" ",c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[" ",c.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"})," ",c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."})," ",c.jsxs("form",{onSubmit:u,children:[" ",c.jsxs("div",{className:"mb-4",children:[" ",c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"})," ",c.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"Username_Unik",value:t,onChange:h=>{s(h.target.value.replace(/\s/g,"")),o("")},autoFocus:!0})," ",r&&c.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:r})," "]})," ",c.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[" ",e?c.jsx(Fn,{className:"animate-spin"}):c.jsx(ks,{size:20})," Simpan & Lanjut "]})," "]})," "]})," "]})},B8=({result:n,feature:e,onBack:t})=>c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:c.jsxs("div",{className:"max-w-3xl w-full",children:[c.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[c.jsx(Et,{size:18})," Kembali"]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[c.jsx(_f,{size:28,className:"text-indigo-600"})," Hasil ",e]}),c.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:c.jsx($1,{text:n})})]})]})}),H8=({questions:n,onComplete:e})=>{const[t,s]=z.useState(0),[r,o]=z.useState(""),[u,h]=z.useState(null),[m,p]=z.useState(!1),[v,_]=z.useState([]),T=n[t],A=async()=>{if(r.trim()){p(!0);try{const D=await rP(T.content,r);h(D)}catch{alert("Gagal evaluasi.")}finally{p(!1)}}},k=()=>{const D={questionId:T.id,selectedAnswer:r,isCorrect:!0,scoreEarned:(u==null?void 0:u.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:u||void 0},I=[...v,D];_(I),o(""),h(null),t<n.length-1?s(t+1):e(I)};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[c.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),u?c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",u.score,"/100"]}),c.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:u.toneAnalysis})]}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[c.jsx("b",{children:"Feedback:"})," ",u.feedback]}),c.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[c.jsx("b",{children:"Saran Jawaban:"})," ",u.improvedAnswer]})]}),c.jsx("button",{onClick:k,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):c.jsxs(c.Fragment,{children:[c.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:r,onChange:D=>o(D.target.value)}),c.jsxs("button",{onClick:A,disabled:m||!r,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[m?c.jsx(Fn,{className:"animate-spin"}):c.jsx(Sf,{size:18})," Submit Jawaban"]})]})]})})},z8=({flashcards:n,onFinish:e})=>{const[t,s]=z.useState(0),r=o=>{t<n.length-1?s(t+1):e()};return n.length===0?c.jsx("div",{children:"No Flashcards"}):c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[c.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[c.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:c.jsx(Et,{size:20})}),c.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),c.jsx($9,{data:n[t],onNext:r})]})},F8=({topic:n,onFinish:e})=>{const[t,s]=z.useState(""),[r,o]=z.useState(null),[u,h]=z.useState(!1),m=async()=>{h(!0);try{const p=await aP(n,t);o(p)}catch{alert("Error")}finally{h(!1)}};return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",c.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun)."]}),r?c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsx("div",{className:"flex items-center gap-2 mb-4",children:c.jsxs("div",{className:`text-2xl font-bold ${r.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[r.understandingScore,"/100"]})}),c.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[c.jsxs("p",{children:[c.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",r.simplificationQuality]}),c.jsxs("p",{children:[c.jsx("b",{children:"Konsep yang Terlewat:"})," ",r.missingConcepts.join(", ")||"Tidak ada"]}),c.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[c.jsx("b",{children:"Koreksi / Saran:"})," ",r.correction]})]})]}),c.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):c.jsxs(c.Fragment,{children:[c.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:p=>s(p.target.value)}),c.jsx("button",{onClick:m,disabled:u||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:u?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},q8=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,r]=z.useState(0);return c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:c.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[c.jsx("div",{className:"flex justify-center mb-8",children:t.map((o,u)=>c.jsxs("div",{className:`flex items-center ${u<t.length-1?"w-full":""}`,children:[c.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${u<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:o[0]}),u<t.length-1&&c.jsx("div",{className:`h-1 flex-1 ${u<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},o))}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),c.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Lakukan tahap ",t[s],' untuk materi "',n,'".']}),c.jsx("button",{onClick:()=>{s<4?r(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},K8=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:r,onStartTesKoran:o,onStartTesKecermatan:u,onGeneralInputSubmit:h,generalInput:m,setGeneralInput:p,isReadingMaterial:v,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:A,weakTopicsCount:k,loading:D,skdStream:I,onSkdStreamSelect:V,onHistory:N,onStartGeneralSession:G,onStartSkripsiSession:Y,username:ne,isDarkMode:Q,onToggleDarkMode:M}=n,[P,R]=z.useState(""),[O,U]=z.useState(null),[B,j]=z.useState("MEDIUM"),[le,ke]=z.useState("MEDIUM"),[J,he]=z.useState(!1),Te=z.useRef(null),[Me,be]=z.useState(""),[H,ee]=z.useState(5),[pe,ie]=z.useState("Medium"),se=Pe=>{var et;const Ge=(et=Pe.target.files)==null?void 0:et[0];if(Ge){if(Ge.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}U(Ge.name),R(""),he(!0);const zt=new FileReader;zt.onload=ft=>{var st;const Ke=((st=ft.target)==null?void 0:st.result).split(",")[1];setTimeout(()=>{p&&p({type:"pdf",content:Ke,title:Ge.name,lengthPreference:B,difficultyPreference:le}),he(!1)},800)},zt.readAsDataURL(Ge)}},ge=()=>{(m==null?void 0:m.type)==="pdf"?h({...m,lengthPreference:B,difficultyPreference:le}):P?h({type:"text",content:P,title:"Input Manual",lengthPreference:B,difficultyPreference:le}):alert("Mohon masukkan teks atau upload PDF.")},Ne=Pe=>{const Ge=Pe.filter(et=>et.toLowerCase().includes(Me.toLowerCase()));return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),c.jsxs("div",{className:"mb-4 relative",children:[c.jsx(lh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{type:"text",placeholder:"Cari topik...",value:Me,onChange:et=>be(et.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Ge.length>0?Ge.map(et=>c.jsx("button",{onClick:()=>{oe.play("tap"),T(et)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${A===et?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:et},et)):c.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),A&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&c.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[c.jsxs("div",{className:"flex-1 w-full",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),c.jsxs("select",{value:H,onChange:et=>ee(Number(et.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[c.jsx("option",{value:"5",children:"5 Soal"}),c.jsx("option",{value:"10",children:"10 Soal"}),c.jsx("option",{value:"15",children:"15 Soal"}),c.jsx("option",{value:"20",children:"20 Soal"})]})]}),c.jsxs("div",{className:"flex-1 w-full",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),c.jsxs("select",{value:pe,onChange:et=>ie(et.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[c.jsx("option",{value:"Easy",children:"Mudah"}),c.jsx("option",{value:"Medium",children:"Sedang"}),c.jsx("option",{value:"Hard",children:"Sulit"}),c.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),s(Fe.PRACTICE,pe,H)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[c.jsx(KE,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&A&&c.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:c.jsxs("button",{onClick:()=>{oe.play("click"),s(Fe.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[c.jsx(Sf,{size:20})," Mulai Sesi Wawancara"]})})]})};return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors duration-300",children:[c.jsx(K9,{}),c.jsxs("div",{className:"max-w-5xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("button",{onClick:()=>{oe.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[c.jsx(Et,{size:18,className:"mr-2"})," Kembali"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[M&&c.jsx("button",{onClick:()=>{M()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:Q?c.jsx(O1,{size:16}):c.jsx(L1,{size:16})}),c.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[c.jsx(G1,{size:12})," ",ne]})]})]}),c.jsx("div",{className:"flex justify-between items-end mb-8",children:c.jsxs("div",{children:[c.jsxs("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:[e," Dashboard"]}),c.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),D?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[c.jsx(Fn,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),c.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),c.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:c.jsx(J9,{})})]}):c.jsxs(c.Fragment,{children:[e==="KECERMATAN"&&c.jsx("div",{className:"animate-fade-in-up",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),u("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:c.jsx(Ns,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:c.jsx(dr,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:c.jsx(T9,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:c.jsx(kO,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:c.jsx(oo,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),u("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:c.jsx(BO,{size:24})}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&c.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(_f,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),c.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:P,onChange:Pe=>R(Pe.target.value)}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),Y&&Y("TITLE_IDEAS",P)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[c.jsx(qs,{size:24})," Ide Judul"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),Y&&Y("OUTLINE",P)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[c.jsx(dr,{size:24})," Buat Outline"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),Y&&Y("METHODOLOGY",P)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[c.jsx(lh,{size:24})," Cek Metodologi"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),Y&&Y("PARAPHRASE",P)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[c.jsx(vO,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&c.jsx("div",{className:"space-y-8 animate-fade-in-up",children:v?c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[c.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[c.jsx(zE,{size:20})," Materi Belajar"]}),c.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(m==null?void 0:m.type)==="pdf"&&m.content&&c.jsx("div",{className:"mb-6",children:c.jsx("embed",{src:`data:application/pdf;base64,${m.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),c.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:c.jsx($1,{text:(m==null?void 0:m.extractedText)||(m==null?void 0:m.content)||""})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:jk.map(Pe=>{const et={Brain:qs,Repeat:m9,MessageCircle:WO,Share2:S9,Search:lh,GraduationCap:Gg,BookOpen:zE,PenTool:KE}[Pe.icon]||qs;return c.jsxs("button",{onClick:()=>{oe.play("click"),G(Pe.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[c.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:c.jsx(et,{size:24})}),c.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:Pe.name}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Pe.desc})]},Pe.id)})})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[c.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(Bg,{size:20})," Input Materi"]}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),c.jsxs("div",{className:"flex gap-2 mb-4",children:[c.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:O?`PDF Terpilih: ${O}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:P,disabled:!!O,onChange:Pe=>{R(Pe.target.value)}}),c.jsx("input",{type:"file",ref:Te,accept:"application/pdf",className:"hidden",onChange:se}),c.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${O?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var Pe;return(Pe=Te.current)==null?void 0:Pe.click()},children:[c.jsx(dr,{size:20}),c.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),O&&c.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ks,{size:16})," ",c.jsxs("span",{children:["File siap: ",c.jsx("b",{children:O})]})]}),c.jsx("button",{onClick:()=>{U(null),p&&p(null),Te.current&&(Te.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:c.jsx(lo,{size:16})})]}),J?c.jsxs("div",{className:"mb-6 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[c.jsx(Fn,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),c.jsx(Qa,{height:"h-[300px]",className:"rounded-xl"})]}):(m==null?void 0:m.type)==="pdf"&&m.content&&c.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),c.jsx("embed",{src:`data:application/pdf;base64,${m.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),c.jsxs("select",{value:B,onChange:Pe=>j(Pe.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[c.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),c.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),c.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),c.jsxs("select",{value:le,onChange:Pe=>ke(Pe.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[c.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),c.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),c.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),c.jsx("button",{onClick:()=>{oe.play("click"),ge()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(ga,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),c.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),c.jsx(Za,{className:"group-hover:translate-x-2 transition-transform"})]}),Ne(Vk)]}),e==="TPA"&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(qs,{size:24,className:"text-indigo-400"})," Simulasi TPA Full"]}),c.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"65 Soal (TPA & TBI). Durasi 60-100 Menit."})]}),c.jsx(Za,{className:"group-hover:translate-x-2 transition-transform"})]}),Ne(Gk)]}),e==="PSIKOTEST"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),o()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[c.jsx(XV,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[c.jsx(qs,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),c.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),Ne(Bk)]})]}),e==="INTERVIEW"&&Ne(Hk),e==="SKD"&&(I?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("button",{onClick:()=>V(null),className:"underline",children:"Ubah Jalur"})," ",c.jsx(Za,{size:14})," ",c.jsx("b",{children:I})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),r()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(ga,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),c.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),c.jsx(Za,{className:"group-hover:translate-x-2 transition-transform"})]}),Ne(Ok)]}):c.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),V("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[c.jsx(OO,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),V("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[c.jsx(QV,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&c.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),s(Fe.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[c.jsx(xa,{className:"text-amber-500 mb-2"}),c.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),c.jsxs("button",{onClick:()=>{oe.play("click"),s(Fe.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[c.jsx(qs,{className:"text-emerald-500 mb-2"}),c.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),k>0&&c.jsxs("button",{onClick:()=>{oe.play("click"),s(Fe.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[c.jsx(oo,{className:"text-rose-500 mb-2"}),c.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),c.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[k," Topik Lemah"]})]})]})]})]})]})]})},$8=({sessions:n,onBack:e,onResume:t,onDelete:s,loading:r})=>{const[o,u]=z.useState(null),h=m=>{const p=Math.floor(m/60),v=m%60;return`${p}m ${v}s`};return c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:[o&&c.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 mx-auto text-rose-600 dark:text-rose-400",children:c.jsx(lo,{size:24})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Sesi Tersimpan?"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Progres tes ini akan hilang permanen."}),c.jsxs("div",{className:"flex gap-3 w-full",children:[c.jsx("button",{onClick:()=>u(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),c.jsx("button",{onClick:()=>{s(o),u(null)},className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:c.jsx(Et,{size:20})}),c.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Lanjutkan Sesi Belajar"})]}),r?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-500",children:[c.jsx(Fn,{className:"animate-spin text-indigo-600 mb-4",size:40}),c.jsx("p",{children:"Memuat sesi tersimpan..."})]}):n.length===0?c.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[c.jsx(SO,{size:48,className:"mx-auto mb-4 opacity-30"}),c.jsx("p",{className:"text-lg font-medium",children:"Tidak ada sesi yang tersimpan."}),c.jsx("p",{className:"text-sm mt-2 opacity-70",children:'Gunakan tombol "Simpan & Lanjut Nanti" saat mengerjakan tes.'})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>{const p=Object.keys(m.answerMap).length,v=m.questions.length,_=Math.round(p/v*100);let T=m.packageTitle||m.category;return m.category==="SKD"&&m.skdStream&&(T+=` (${m.skdStream})`),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition group relative",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider ${m.category==="UTBK"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300":m.category==="SKD"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"}`,children:m.category}),c.jsx("button",{onClick:A=>{A.stopPropagation(),u(m.id||String(m.timestamp))},className:"text-slate-400 hover:text-rose-500 p-1 rounded-md transition",children:c.jsx(lo,{size:16})})]}),c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2 truncate",title:T,children:T}),c.jsxs("div",{className:"space-y-2 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[c.jsx(I1,{size:12}),new Date(m.timestamp).toLocaleDateString()]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[c.jsx(ga,{size:12}),"Sisa Waktu: ",h(m.timeLeft)]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between text-xs font-bold mb-1 text-slate-600 dark:text-slate-300",children:[c.jsx("span",{children:"Progres"}),c.jsxs("span",{children:[p," / ",v," Soal"]})]}),c.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-indigo-600 rounded-full",style:{width:`${_}%`}})})]}),c.jsxs("button",{onClick:()=>t(m),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition",children:[c.jsx(R1,{size:18})," Lanjutkan"]})]},m.id||m.timestamp)})})]})]})};function Y8(){var Jn;const[n,e]=z.useState("SPLASH"),[t,s]=z.useState(null),[r,o]=z.useState(!1),[u,h]=z.useState(!0),[m,p]=z.useState("DASHBOARD"),[v,_]=z.useState(""),[T,A]=z.useState([]),[k,D]=z.useState(!1),[I,V]=z.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1}),[N,G]=z.useState(null),[Y,ne]=z.useState(!1),[Q,M]=z.useState(null),[P,R]=z.useState(!1),[O,U]=z.useState(""),[B,j]=z.useState(null),[le,ke]=z.useState(null),[J,he]=z.useState(new Set),[Te,Me]=z.useState("ANGKA"),[be,H]=z.useState(null),[ee,pe]=z.useState(null),[ie,se]=z.useState([]),[ge,Ne]=z.useState(null),[Pe,Ge]=z.useState(null),[et,zt]=z.useState(""),[ft,Ke]=z.useState([]),[st,$t]=z.useState(null),[Ft,gn]=z.useState([]),[Ie,_e]=z.useState(!1),[Le,pt]=z.useState(void 0),[tn,Ut]=z.useState([]),[Ct,Kn]=z.useState(!1),[ns,Yt]=z.useState(null),[$n,Ui]=z.useState(void 0),[po,Ta]=z.useState(!1),[Yn,nn]=z.useState([]),[xn,ss]=z.useState(null),[Vt,Ea]=z.useState(null),nt=(K,xe)=>Ea({msg:K,type:xe}),[Sa,jn]=z.useState([..._b,...Tb,...Eb,...wb,...kb,...Sb,...Ab,...Nb]),mi=async K=>{try{const xe=localStorage.getItem("fajmuls_active_session");if(xe){const Ee=JSON.parse(xe);if(Ee.uid===K&&Date.now()-Ee.timestamp<1440*60*1e3)return Yt(Ee),!0;localStorage.removeItem("fajmuls_active_session")}}catch(xe){console.error("Failed to parse saved session",xe),localStorage.removeItem("fajmuls_active_session")}return!1},Xt=K=>{s(K.category),j(K.mode),Ke(K.questions),$t(K.drillContent),K.skdStream&&ke(K.skdStream),K.packageTitle&&Ui(K.packageTitle),pt(K),Yt(null),e("SESSION")},Cs=()=>{localStorage.removeItem("fajmuls_active_session"),Yt(null)},Is=async()=>{if(oe.play("click"),!(N!=null&&N.uid)||N.isGuest){nt("Fitur ini hanya untuk pengguna login.","info");return}Kn(!0),e("RESUME_LIST");try{const K=await TV(N.uid);Ut(K)}catch{nt("Gagal memuat sesi tersimpan.","error")}finally{Kn(!1)}},is=async K=>{oe.play("click"),Xt(K),K.id&&(N!=null&&N.uid)&&await VE(N.uid,K.id)},Vl=async K=>{oe.play("click"),N!=null&&N.uid&&(await VE(N.uid,K),Ut(xe=>xe.filter(Ee=>Ee.id!==K&&String(Ee.timestamp)!==K)),nt("Sesi dihapus.","success"))};z.useEffect(()=>{const K=localStorage.getItem("fajmuls_settings");K?V(JSON.parse(K)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&V(Ee=>({...Ee,darkMode:!0}));const xe=pV(async Ee=>{if(h(!0),Ee)try{const Be=await jE(Ee.uid);if(Be){G({uid:Ee.uid,username:Be.username,email:Ee.email,photoURL:Be.photoURL||Ee.photoURL});const Oe=await SV(Ee.uid);nn(Oe),await mi(Ee.uid),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else G({uid:Ee.uid,username:"",email:Ee.email,photoURL:Ee.photoURL}),e("USERNAME_SETUP")}catch(Be){console.error("Profile fetch error",Be)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const Oe=localStorage.getItem("fajmuls_guest_username"),it="guest-"+(Oe||"user");G({uid:it,username:Oe||"Tamu",email:null,isGuest:!0});const Ue=localStorage.getItem("fajmuls_guest_history");if(Ue)try{nn(JSON.parse(Ue))}catch{}await mi(it),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");h(!1),ne(!1)});return()=>xe()},[]),z.useEffect(()=>{if(v.trim().length===0){A([]),D(!1);return}const K=v.toLowerCase(),xe=[];Hp.forEach(Be=>{(Be.name.toLowerCase().includes(K)||Be.desc.toLowerCase().includes(K))&&xe.push({id:Be.id,label:Be.name,type:"CATEGORY"})}),[{id:"TES_KORAN",label:"Tes Koran / Pauli"},{id:"REACTION",label:"Reaction Time (Benchmark)"},{id:"AIM",label:"Aim Trainer (Benchmark)"},{id:"SEQUENCE",label:"Sequence Memory (Benchmark)"},{id:"CHIMP",label:"Chimp Test (Benchmark)"},{id:"VISUAL",label:"Visual Memory (Benchmark)"},{id:"NUMBER",label:"Number Memory (Benchmark)"},{id:"VERBAL",label:"Verbal Memory (Benchmark)"},{id:"TYPING",label:"Typing Test (Benchmark)"},{id:"BRIDGE",label:"Bridge Memory (Benchmark)"},{id:"MATCH",label:"Match Memory (Benchmark)"},{id:"KECERMATAN_ANGKA",label:"Kecermatan Angka"},{id:"KECERMATAN_HURUF",label:"Kecermatan Huruf"},{id:"KECERMATAN_SIMBOL",label:"Kecermatan Simbol"}].forEach(Be=>{Be.label.toLowerCase().includes(K)&&xe.push({id:Be.id,label:Be.label,type:"FEATURE"})}),A(xe),D(xe.length>0)},[v]);const go=K=>{if(oe.play("click"),_(""),D(!1),K.type==="CATEGORY")xs(K.id);else if(K.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if(K.id.startsWith("KECERMATAN_")){s("KECERMATAN");const xe=K.id.replace("KECERMATAN_","");Gi(xe)}else s("BENCHMARK"),H(K.id),e("BENCHMARK")},Rs=async()=>{Ta(!0);const K=[..._b,...Tb,...Eb,...wb,...kb,...Sb,...Ab,...Nb];try{const xe=await kV(),Ee=new Set(K.map(Oe=>Oe.id)),Be=xe.filter(Oe=>!Ee.has(Oe.id));jn([...K,...Be])}catch(xe){console.error("Failed to load cloud packages",xe),jn(K),nt("Gagal memuat paket online. Menggunakan data offline.","error")}finally{Ta(!1)}};z.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(I)),I.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),oe.syncSettings(I)},[I]);const ji=async()=>{ne(!0);try{const K=await gV();await jE(K.uid)||(G({uid:K.uid,username:"",email:K.email,photoURL:K.photoURL}),e("USERNAME_SETUP"))}catch{nt("Gagal login dengan Google.","error"),ne(!1)}},Ol=()=>{oe.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),G({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const K=localStorage.getItem("fajmuls_guest_history");if(K)try{nn(JSON.parse(K))}catch{}else nn([]);e("HOME")},Vi=async K=>{if(N!=null&&N.uid){ne(!0);try{if(!await yV(K)){nt("Username sudah dipakai. Pilih yang lain.","error"),ne(!1);return}await vV(N.uid,{username:K,email:N.email||"",photoURL:N.photoURL||""}),G(Ee=>Ee?{...Ee,username:K}:null),nn([]),oe.play("success"),e("HOME")}catch{nt("Gagal membuat profil.","error")}finally{ne(!1)}}},Aa=async()=>{oe.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),N!=null&&N.isGuest||await xV(),G(null),nn([]),e("LOGIN")},_r=async K=>{const xe=[K,...Yn];nn(xe),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(xe)):N!=null&&N.uid&&await OE(N.uid,K)},Oi=async K=>{const xe=Yn.filter(Ee=>Ee.id!==K);nn(xe),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(xe)):N!=null&&N.uid&&await AV(N.uid,K),nt("Riwayat berhasil dihapus.","success"),oe.play("click")},Qs=async K=>{if(N!=null&&N.isGuest){K.username&&(G(xe=>xe?{...xe,username:K.username}:null),localStorage.setItem("fajmuls_guest_username",K.username),nt("Nama Tamu diubah.","success"));return}if(N!=null&&N.uid)try{await bV(N.uid,K),G(xe=>xe?{...xe,...K}:null),nt("Profil berhasil diperbarui!","success")}catch(xe){nt(xe.message||"Gagal memperbarui profil.","error")}},xo=async K=>{_e(!0);try{const xe=await oP(K);M({...K,extractedText:xe}),R(!0)}catch{nt("Gagal memproses materi. Coba lagi.","error")}finally{_e(!1)}},ps=async(K,xe)=>{if(!xe.trim()){nt("Mohon isi judul atau topik.","error");return}_e(!0),Ge(K);try{const Ee=await lP(xe,K);zt(Ee),e("SESSION")}catch{nt("Gagal generate konten skripsi.","error")}finally{_e(!1)}},gs=async K=>{if(!Q){nt("Materi hilang. Silakan input ulang.","error");return}_e(!0),pe(K),j(Fe.DRILL);try{if(K==="ACTIVE_RECALL"||K==="PBL"||K==="PRACTICE"||K==="TEACHING"){const xe=await Zn(Fe.DRILL,"GENERAL",Q,5,[],void 0,K);Ke(xe)}else if(K==="SPACED_REPETITION"){const xe=await cP(Q);se(xe)}else if(K==="MIND_MAP"){const xe=await uP(Q);Ne(xe)}e("SESSION")}catch{nt("Gagal memuat materi AI.","error")}finally{_e(!1)}},Jt=async(K,xe,Ee)=>{if(t){if(Ui(void 0),pt(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!O&&K!==Fe.SIMULATION&&K!==Fe.WEAKNESS){nt(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!le){nt("Harap pilih jalur (CPNS / Kedinasan).","error");return}_e(!0),j(K),gn([]),Ke([]),$t(null);try{const Be=O;if(K===Fe.DRILL){const Oe=await dP(t,Be,le||void 0);$t(Oe),Oe&&Oe.question&&Ke([Oe.question])}else if(K===Fe.SIMULATION&&t==="SKD"&&le){const Oe=await lT(le);Ke(Oe||[])}else if(K===Fe.SIMULATION&&t==="UTBK"){const Oe=await cT();Ke(Oe||[])}else if(K===Fe.SIMULATION&&t==="TPA"){const Oe=await hP();Ke(Oe||[])}else if(K===Fe.SIMULATION&&t==="PSIKOTEST"){const Oe=await fP();Ke(Oe||[])}else{let Oe=Ee||5;t==="PSIKOTEST"&&K===Fe.SIMULATION&&(Oe=40),t==="INTERVIEW"&&(Oe=3);const it=await Zn(K,t,Be,Oe,Array.from(J),le||void 0,void 0,xe);Ke(it||[])}e("SESSION")}catch(Be){console.error(Be),nt("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{_e(!1)}}},Ot=(K,xe,Ee=!1)=>{if(xe){const Ue={...xe,isAborted:Ee};if(_r(Ue),!Ee&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)&&xe.category==="KECERMATAN"&&xe.details){const We=xe.details;GE("KECERMATAN",We.mode||"General",xe.score,N.username,N.uid)}(xe.category!=="BENCHMARK"||Ee)&&e("HOME");return}gn(K);let Be=0,Oe=0,it;if(t==="SKD"&&B===Fe.SIMULATION){let Ue=0,We=0,St=0;K.forEach(bt=>{var Sn,Qt,At,Pt,An,rs;const yn=ft.find(ot=>ot.id===bt.questionId);yn&&((Qt=(Sn=yn.metadata)==null?void 0:Sn.subtest)!=null&&Qt.includes("TWK")&&(Ue+=bt.scoreEarned),(Pt=(At=yn.metadata)==null?void 0:At.subtest)!=null&&Pt.includes("TIU")&&(We+=bt.scoreEarned),(rs=(An=yn.metadata)==null?void 0:An.subtest)!=null&&rs.includes("TKP")&&(St+=bt.scoreEarned))}),Be=Ue+We+St,Oe=550,it={twk:Ue,tiu:We,tkp:St,total:Be,passed:Ue>=65&&We>=80&&St>=166}}else if(t==="UTBK"&&B===Fe.SIMULATION){const Ue=An=>{const rs=ft.filter(as=>{var Vn,ys;return(ys=(Vn=as.metadata)==null?void 0:Vn.subtest)==null?void 0:ys.includes(An)});if(!rs.length)return 0;const ot=K.filter(as=>{var Vn,ys,wn;return as.isCorrect&&((wn=(ys=(Vn=ft.find(Er=>Er.id===as.questionId))==null?void 0:Vn.metadata)==null?void 0:ys.subtest)==null?void 0:wn.includes(An))}).length;return Math.round(200+ot/rs.length*600)},We=Ue("Penalaran Umum"),St=Ue("PPU"),bt=Ue("PBM"),yn=Ue("Kuantitatif"),Sn=Ue("Literasi B.Indo"),Qt=Ue("Literasi B.Inggris"),At=Ue("Penalaran Matematika"),Pt=Math.round((We+St+bt+yn+Sn+Qt+At)/7);Be=Pt,Oe=1e3,it={pu:We,ppu:St,pbm:bt,pk:yn,lbi:Sn,lbe:Qt,pm:At,average:Pt}}else if(t==="TPA"&&B===Fe.SIMULATION){let Ue=0,We=0,St=0,bt=0;K.forEach(Qt=>{var Pt,An,rs,ot;const At=ft.find(as=>as.id===Qt.questionId);At&&((An=(Pt=At.metadata)==null?void 0:Pt.subtest)!=null&&An.includes("TBI")||(ot=(rs=At.metadata)==null?void 0:rs.subtest)!=null&&ot.includes("Inggris")?(bt++,Qt.isCorrect&&We++):(St++,Qt.isCorrect&&Ue++))});const yn=Math.round(200+Ue/(St||1)*600),Sn=Math.round(We/(bt||1)*100);Be=yn+Sn,Oe=900,it={tpaScore:yn,tbiScore:Sn,tpaCorrect:Ue,tbiCorrect:We}}else if(t==="INTERVIEW"){const Ue=K.map(We=>{var St;return((St=We.interviewFeedback)==null?void 0:St.score)||0});Be=Math.round(Ue.reduce((We,St)=>We+St,0)/(Ue.length||1)),Oe=100}else if(t==="PSIKOTEST"&&B===Fe.SIMULATION){const Ue=K.filter(Sn=>Sn.isCorrect).length,We=ft.length,St=Ue/We,bt=Math.round(70+St*75);let yn=bt>=130?"Very Superior":bt>=120?"Superior":bt>=110?"High Average":bt>=90?"Average":"Low Average";Be=bt,Oe=160,it={iqScore:bt,classification:yn}}else if(t==="GENERAL"){const Ue=K.reduce((We,St)=>We+(St.scoreEarned||0),0);Be=Math.round(Ue/(K.length||1)),Oe=100}else{const Ue=K.filter(We=>We.isCorrect).length;Be=Math.round(Ue/ft.length*100),Oe=100}if(_r({id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:le||void 0,score:Be,maxScore:Oe,details:it,questions:ft,answers:K,isAborted:Ee,packageTitle:$n}),!Ee&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)&&t&&B===Fe.SIMULATION){let Ue="General";t==="SKD"&&le&&(Ue=le),GE(t,Ue,Be,N.username,N.uid,$n)}Ui(void 0),e("RESULTS")},xs=K=>{oe.play("click"),s(K),Ui(void 0),pt(void 0),K==="BUTAWRNA"?e("COLORBLIND"):K==="BENCHMARK"?(H(null),p("DASHBOARD"),e("BENCHMARK")):(e("DASHBOARD"),M(null),R(!1),U(""),ke(null),pe(null),Ge(null),zt(""))},Gi=K=>{Me(K),e("TES_KECERMATAN")},Gl=()=>{if(Yn.length===0){nt("Belum ada riwayat untuk disimpan.","info");return}const K=JSON.stringify(Yn,null,2),xe=new Blob([K],{type:"application/json"}),Ee=URL.createObjectURL(xe),Be=document.createElement("a");Be.href=Ee,Be.download=`Fajmuls_History_${(N==null?void 0:N.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),URL.revokeObjectURL(Ee),nt("Export berhasil!","success")},yo=K=>{const xe=new FileReader;xe.onload=Ee=>{var Be;try{const Oe=(Be=Ee.target)==null?void 0:Be.result,it=JSON.parse(Oe);if(!Array.isArray(it))throw new Error("Format salah");const Ue=new Set(Yn.map(bt=>bt.id)),We=it.filter(bt=>!Ue.has(bt.id)),St=[...Yn,...We].sort((bt,yn)=>new Date(yn.date).getTime()-new Date(bt.date).getTime());nn(St),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(St)):N!=null&&N.uid&&We.forEach(bt=>{OE(N.uid,bt)}),nt(`Berhasil memuat ${We.length} riwayat baru.`,"success")}catch{nt("Gagal membaca file JSON.","error")}},xe.readAsText(K)},vo=K=>{Ke(K.questions),j(Fe.SIMULATION),Ui(K.title),pt(void 0),e("SESSION")},Ms=async K=>{if(t)try{let xe=[],Ee=60;t==="SKD"?(xe=await lT(le||"CPNS"),Ee=100):t==="UTBK"?(xe=await cT(),Ee=195):xe=await Zn(Fe.SIMULATION,t,"SIMULATION",20,[],le||void 0,void 0,"HOTS");const Oe=Sa.filter(We=>We.category===t&&(t==="SKD"?We.skdStream===le:!0)).length+1;let it="";t==="SKD"?le==="CPNS"?it=`TO SKD CPNS ${Oe}`:le==="KEDINASAN"?it=`TO SKD Kedinasan ${Oe}`:it=`TO SKD ${Oe}`:t==="UTBK"?it=`TO UTBK ${Oe}`:t==="TPA"?it=`TO TPA TBI ${Oe}`:t==="PSIKOTEST"?it=`TO Psikotest ${Oe}`:it=`TO ${t} ${Oe}`;const Ue={id:`gen-${Date.now()}`,title:it,category:t,skdStream:le||void 0,questions:xe,durationMinutes:Ee,isAiGenerated:!0,version:"v2",createdAt:new Date().toISOString()};await BE(Ue),jn(We=>[Ue,...We]),nt(`Paket baru "${it}" berhasil dibuat dan disimpan ke database!`,"success")}catch(xe){console.error(xe),nt("Gagal membuat paket soal. Coba lagi.","error")}},Tr=async K=>{if(jn(xe=>xe.filter(Ee=>Ee.id!==K)),K.startsWith("gen-")||K.startsWith("pkg-"))try{await CV(K),nt("Paket dihapus dari database.","success")}catch(xe){console.error(xe)}else nt("Paket dihapus dari tampilan lokal.","success")},Ds=K=>{Array.from(K).forEach(xe=>{const Ee=new FileReader;Ee.onload=async Be=>{var Oe;try{const it=(Oe=Be.target)==null?void 0:Oe.result,Ue=JSON.parse(it);Ue.id&&Ue.questions&&(await BE(Ue),jn(We=>We.find(St=>St.id===Ue.id)?We:[Ue,...We]),nt(`Paket "${Ue.title}" diimpor dan disimpan.`,"success"))}catch{nt("File tidak valid.","error")}},Ee.readAsText(xe)})};return n==="SPLASH"?c.jsx(Q9,{onComplete:()=>e(N?"HOME":"LOGIN")}):u?c.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:c.jsx(Fn,{className:"animate-spin text-indigo-600 w-10 h-10"})}):n==="LOGIN"?c.jsx(O8,{onGoogleLogin:ji,onGuestLogin:Ol,isLoading:Y}):n==="USERNAME_SETUP"?c.jsx(G8,{onSubmit:Vi,isLoading:Y}):c.jsxs(c.Fragment,{children:[Vt&&c.jsx(U8,{message:Vt.msg,type:Vt.type,onClose:()=>Ea(null)}),ns&&c.jsx(j8,{session:ns,onResume:()=>is(ns),onDiscard:Cs}),c.jsx(W9,{isOpen:r,onClose:()=>o(!1),settings:I,onUpdate:V,userProfile:N,onUpdateProfile:Qs}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&c.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex justify-between items-center animate-fade-in-down",children:[c.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{oe.play("click"),e("HOME")},children:[c.jsx("img",{src:uh,alt:"Logo",className:"w-8 h-8 object-contain"}),c.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),c.jsxs("div",{className:"flex-1 max-w-md mx-4 relative",children:[c.jsxs("div",{className:"relative",children:[c.jsx(lh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),c.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari fitur (UTBK, Pauli, dll)...",value:v,onChange:K=>_(K.target.value)})]}),k&&T.length>0&&c.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:T.map(K=>c.jsxs("button",{onClick:()=>go(K),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:K.label}),c.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${K.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:K.type})]},K.id))})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[c.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(N==null?void 0:N.username)||"Tamu"}),c.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:N!=null&&N.isGuest?"Mode Tamu":"Online"})]}),c.jsx(L8,{user:N}),c.jsx("button",{onClick:()=>{oe.play("click"),o(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:c.jsx(V1,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),c.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"?"pt-20":""}`,children:[n==="HOME"&&c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center relative transition-colors duration-300",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("img",{src:uh,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),c.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Hp.map(K=>c.jsxs("button",{onClick:()=>xs(K.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden hover:-translate-y-1 hover:shadow-xl ${K.id==="BENCHMARK"?"bg-white dark:bg-slate-800 border-red-200 dark:border-red-900 hover:border-red-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500"}`,children:[K.id==="BENCHMARK"?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/40 rounded-lg flex items-center justify-center mb-6 group-hover:bg-red-600 transition-colors relative z-10 text-red-600 dark:text-red-400 group-hover:text-white",children:c.jsx(Ns,{size:24})})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),c.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors relative z-10",children:K.id==="GENERAL"?c.jsx(dr,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):K.id==="SKD"?c.jsx(C1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):K.id==="INTERVIEW"?c.jsx(Sf,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):K.id==="BUTAWRNA"?c.jsx(j1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):K.id==="PSIKOTEST"?c.jsx(qs,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):K.id==="SKRIPSI"?c.jsx(_f,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):K.id==="KECERMATAN"?c.jsx(D1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):c.jsx(Gg,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"})})]}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:K.name}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:K.desc})]},K.id))}),c.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[c.jsxs("button",{onClick:()=>{oe.play("click"),e("HISTORY")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[c.jsx(Ef,{size:18})," Riwayat Belajar"]}),c.jsxs("button",{onClick:Is,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 dark:shadow-none border border-indigo-600 font-bold hover:bg-indigo-700 transition",children:[c.jsx(R1,{size:18})," Lanjutkan TO"]}),c.jsxs("button",{onClick:()=>{oe.play("click"),e("GLOBAL_LEADERBOARD")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[c.jsx(Sl,{size:18,className:"text-amber-500"})," Global Rank"]}),c.jsxs("button",{onClick:Aa,className:"flex items-center gap-2 px-6 py-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl shadow-sm border border-rose-100 dark:border-rose-900 font-bold text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition",children:[c.jsx($O,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&c.jsx(K8,{category:t,onBack:()=>{oe.play("back"),e("HOME")},onStartSession:Jt,onOpenTOSelection:()=>{oe.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{oe.play("click"),e("TES_KORAN")},onStartTesKecermatan:Gi,onGeneralInputSubmit:xo,generalInput:Q,setGeneralInput:M,isReadingMaterial:P,onResetMaterial:()=>{R(!1),M(null)},onSubtestSelect:U,selectedSubtest:O,weakTopicsCount:J.size,loading:Ie,skdStream:le,onSkdStreamSelect:ke,onHistory:()=>{oe.play("click"),e("HISTORY")},onStartGeneralSession:gs,onStartSkripsiSession:ps,username:(N==null?void 0:N.username)||"Guest",isDarkMode:I.darkMode,onToggleDarkMode:()=>{V(K=>({...K,darkMode:!K.darkMode}))}}),n==="TO_SELECTION"&&c.jsx(Z9,{category:t,skdStream:le||void 0,availablePackages:Sa,history:Yn,onSelectPackage:vo,onGenerateNew:Ms,onDeletePackage:Tr,onImportPackage:Ds,onBack:()=>{oe.play("back"),e("DASHBOARD")},showToast:nt,confirmEnabled:I.confirmActions,onRefresh:Rs,isLoading:po}),n==="RESUME_LIST"&&c.jsx($8,{sessions:tn,onBack:()=>{oe.play("back"),e("HOME")},onResume:is,onDelete:Vl,loading:Ct}),n==="SESSION"&&(t==="SKRIPSI"?c.jsx(B8,{result:et,feature:Pe,onBack:()=>{oe.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?c.jsx(H8,{questions:ft,onComplete:K=>Ot(K)}):t==="GENERAL"&&ee==="SPACED_REPETITION"?c.jsx(z8,{flashcards:ie,onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&ee==="MIND_MAP"?c.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",c.jsxs("button",{onClick:()=>{oe.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[c.jsx(Et,{size:18})," Kembali"]})," ",c.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",c.jsx(Y9,{data:ge})," "]}):t==="GENERAL"&&ee==="FEYNMAN"?c.jsx(F8,{topic:(Q==null?void 0:Q.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&ee==="SQ3R"?c.jsx(q8,{topic:(Q==null?void 0:Q.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):c.jsx(o8,{mode:B,questions:ft,drillContent:st,onComplete:(K,xe,Ee)=>Ot(K,xe,Ee),isSkdSimulation:B===Fe.SIMULATION&&t==="SKD",isUtbkSimulation:B===Fe.SIMULATION&&t==="UTBK",category:t,showToast:nt,initialState:Le,userId:N==null?void 0:N.uid,skdStream:le,packageTitle:$n,onSaveAndExit:()=>e("HOME")})),n==="TES_KORAN"&&c.jsx(h8,{onBack:()=>e("DASHBOARD"),onComplete:K=>Ot([],K)}),n==="TES_KECERMATAN"&&c.jsx(f8,{initialMode:Te,onBack:()=>e("DASHBOARD"),onComplete:K=>Ot([],K)}),n==="BENCHMARK"&&c.jsx(M8,{onBack:()=>e("HOME"),onComplete:K=>Ot([],K),username:(N==null?void 0:N.username)||"Guest",history:Yn,isGuest:N==null?void 0:N.isGuest,initialMode:be||void 0,initialTab:m}),n==="GLOBAL_LEADERBOARD"&&c.jsx(P8,{onBack:()=>{oe.play("back"),e("HOME")},userProfile:N,onOpenHumanBenchmark:()=>{oe.play("click"),s("BENCHMARK"),H(null),p("RANKING"),e("BENCHMARK")}}),n==="RESULTS"&&c.jsx(t8,{answers:Ft,questions:ft,onHome:()=>{oe.play("back"),e("HOME")},onRetry:()=>{oe.play("click"),Jt(B)},category:t,details:(Jn=Yn[0])==null?void 0:Jn.details}),n==="HISTORY"&&c.jsx(s8,{history:Yn,onBack:()=>{oe.play("back"),e("HOME")},onReview:K=>{oe.play("click"),ss(K),e("REVIEW")},username:(N==null?void 0:N.username)||"Guest",onExport:Gl,onImport:yo,isDarkMode:I.darkMode,onDelete:Oi}),n==="REVIEW"&&c.jsx(i8,{item:xn,onBack:()=>{oe.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&c.jsx(p8,{onBack:()=>{oe.play("back"),e("HOME")},onComplete:K=>Ot([],K)})]})]})}const Y1=document.getElementById("root");if(!Y1)throw new Error("Could not find root element to mount to");const J8=Uk.createRoot(Y1);J8.render(c.jsx(kk.StrictMode,{children:c.jsx(Y8,{})}));
