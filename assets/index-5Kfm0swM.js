(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function OE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var P0={exports:{}},Kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function n2(){if(Db)return Kc;Db=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:l}}return Kc.Fragment=e,Kc.jsx=t,Kc.jsxs=t,Kc}var Pb;function s2(){return Pb||(Pb=1,P0.exports=n2()),P0.exports}var o=s2(),j0={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function i2(){if(jb)return st;jb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function E(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function j(H,ne,le){this.props=H,this.context=ne,this.refs=C,this.updater=le||I}j.prototype.isReactComponent={},j.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},j.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function R(){}R.prototype=j.prototype;function z(H,ne,le){this.props=H,this.context=ne,this.refs=C,this.updater=le||I}var $=z.prototype=new R;$.constructor=z,k($,j.prototype),$.isPureReactComponent=!0;var J=Array.isArray;function Y(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function M(H,ne,le){var ae=le.ref;return{$$typeof:n,type:H,key:ne,ref:ae!==void 0?ae:null,props:le}}function L(H,ne){return M(H.type,ne,H.props)}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function B(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(le){return ne[le]})}var U=/\/+/g;function Te(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):ne.toString(36)}function Ce(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Y,Y):(H.status="pending",H.then(function(ne){H.status==="pending"&&(H.status="fulfilled",H.value=ne)},function(ne){H.status==="pending"&&(H.status="rejected",H.reason=ne)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function q(H,ne,le,ae,de){var ce=typeof H;(ce==="undefined"||ce==="boolean")&&(H=null);var Ae=!1;if(H===null)Ae=!0;else switch(ce){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(H.$$typeof){case n:case e:Ae=!0;break;case v:return Ae=H._init,q(Ae(H._payload),ne,le,ae,de)}}if(Ae)return de=de(H),Ae=ae===""?"."+Te(H,0):ae,J(de)?(le="",Ae!=null&&(le=Ae.replace(U,"$&/")+"/"),q(de,ne,le,"",function(Pe){return Pe})):de!=null&&(O(de)&&(de=L(de,le+(de.key==null||H&&H.key===de.key?"":(""+de.key).replace(U,"$&/")+"/")+Ae)),ne.push(de)),1;Ae=0;var lt=ae===""?".":ae+":";if(J(H))for(var ue=0;ue<H.length;ue++)ae=H[ue],ce=lt+Te(ae,ue),Ae+=q(ae,ne,le,ce,de);else if(ue=E(H),typeof ue=="function")for(H=ue.call(H),ue=0;!(ae=H.next()).done;)ae=ae.value,ce=lt+Te(ae,ue++),Ae+=q(ae,ne,le,ce,de);else if(ce==="object"){if(typeof H.then=="function")return q(Ce(H),ne,le,ae,de);throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ie(H,ne,le){if(H==null)return H;var ae=[],de=0;return q(H,ae,"","",function(ce){return ne.call(le,ce,de++)}),ae}function pe(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(le){(H._status===0||H._status===-1)&&(H._status=1,H._result=le)},function(le){(H._status===0||H._status===-1)&&(H._status=2,H._result=le)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var Ue=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},he={map:ie,forEach:function(H,ne,le){ie(H,function(){ne.apply(this,arguments)},le)},count:function(H){var ne=0;return ie(H,function(){ne++}),ne},toArray:function(H){return ie(H,function(ne){return ne})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return st.Activity=_,st.Children=he,st.Component=j,st.Fragment=t,st.Profiler=a,st.PureComponent=z,st.StrictMode=s,st.Suspense=p,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,st.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},st.cache=function(H){return function(){return H.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(H,ne,le){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ae=k({},H.props),de=H.key;if(ne!=null)for(ce in ne.key!==void 0&&(de=""+ne.key),ne)!N.call(ne,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ne.ref===void 0||(ae[ce]=ne[ce]);var ce=arguments.length-2;if(ce===1)ae.children=le;else if(1<ce){for(var Ae=Array(ce),lt=0;lt<ce;lt++)Ae[lt]=arguments[lt+2];ae.children=Ae}return M(H.type,de,ae)},st.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},st.createElement=function(H,ne,le){var ae,de={},ce=null;if(ne!=null)for(ae in ne.key!==void 0&&(ce=""+ne.key),ne)N.call(ne,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(de[ae]=ne[ae]);var Ae=arguments.length-2;if(Ae===1)de.children=le;else if(1<Ae){for(var lt=Array(Ae),ue=0;ue<Ae;ue++)lt[ue]=arguments[ue+2];de.children=lt}if(H&&H.defaultProps)for(ae in Ae=H.defaultProps,Ae)de[ae]===void 0&&(de[ae]=Ae[ae]);return M(H,ce,de)},st.createRef=function(){return{current:null}},st.forwardRef=function(H){return{$$typeof:h,render:H}},st.isValidElement=O,st.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:pe}},st.memo=function(H,ne){return{$$typeof:f,type:H,compare:ne===void 0?null:ne}},st.startTransition=function(H){var ne=D.T,le={};D.T=le;try{var ae=H(),de=D.S;de!==null&&de(le,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Y,Ue)}catch(ce){Ue(ce)}finally{ne!==null&&le.types!==null&&(ne.types=le.types),D.T=ne}},st.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},st.use=function(H){return D.H.use(H)},st.useActionState=function(H,ne,le){return D.H.useActionState(H,ne,le)},st.useCallback=function(H,ne){return D.H.useCallback(H,ne)},st.useContext=function(H){return D.H.useContext(H)},st.useDebugValue=function(){},st.useDeferredValue=function(H,ne){return D.H.useDeferredValue(H,ne)},st.useEffect=function(H,ne){return D.H.useEffect(H,ne)},st.useEffectEvent=function(H){return D.H.useEffectEvent(H)},st.useId=function(){return D.H.useId()},st.useImperativeHandle=function(H,ne,le){return D.H.useImperativeHandle(H,ne,le)},st.useInsertionEffect=function(H,ne){return D.H.useInsertionEffect(H,ne)},st.useLayoutEffect=function(H,ne){return D.H.useLayoutEffect(H,ne)},st.useMemo=function(H,ne){return D.H.useMemo(H,ne)},st.useOptimistic=function(H,ne){return D.H.useOptimistic(H,ne)},st.useReducer=function(H,ne,le){return D.H.useReducer(H,ne,le)},st.useRef=function(H){return D.H.useRef(H)},st.useState=function(H){return D.H.useState(H)},st.useSyncExternalStore=function(H,ne,le){return D.H.useSyncExternalStore(H,ne,le)},st.useTransition=function(){return D.H.useTransition()},st.version="19.2.3",st}var Lb;function Jp(){return Lb||(Lb=1,j0.exports=i2()),j0.exports}var G=Jp();const VE=OE(G);var L0={exports:{}},$c={},U0={exports:{}},O0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function a2(){return Ub||(Ub=1,(function(n){function e(q,ie){var pe=q.length;q.push(ie);e:for(;0<pe;){var Ue=pe-1>>>1,he=q[Ue];if(0<a(he,ie))q[Ue]=ie,q[pe]=he,pe=Ue;else break e}}function t(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var ie=q[0],pe=q.pop();if(pe!==ie){q[0]=pe;e:for(var Ue=0,he=q.length,H=he>>>1;Ue<H;){var ne=2*(Ue+1)-1,le=q[ne],ae=ne+1,de=q[ae];if(0>a(le,pe))ae<he&&0>a(de,le)?(q[Ue]=de,q[ae]=pe,Ue=ae):(q[Ue]=le,q[ne]=pe,Ue=ne);else if(ae<he&&0>a(de,pe))q[Ue]=de,q[ae]=pe,Ue=ae;else break e}}return ie}function a(q,ie){var pe=q.sortIndex-ie.sortIndex;return pe!==0?pe:q.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],f=[],v=1,_=null,T=3,E=!1,I=!1,k=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function $(q){for(var ie=t(f);ie!==null;){if(ie.callback===null)s(f);else if(ie.startTime<=q)s(f),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=t(f)}}function J(q){if(k=!1,$(q),!I)if(t(p)!==null)I=!0,Y||(Y=!0,B());else{var ie=t(f);ie!==null&&Ce(J,ie.startTime-q)}}var Y=!1,D=-1,N=5,M=-1;function L(){return C?!0:!(n.unstable_now()-M<N)}function O(){if(C=!1,Y){var q=n.unstable_now();M=q;var ie=!0;try{e:{I=!1,k&&(k=!1,R(D),D=-1),E=!0;var pe=T;try{t:{for($(q),_=t(p);_!==null&&!(_.expirationTime>q&&L());){var Ue=_.callback;if(typeof Ue=="function"){_.callback=null,T=_.priorityLevel;var he=Ue(_.expirationTime<=q);if(q=n.unstable_now(),typeof he=="function"){_.callback=he,$(q),ie=!0;break t}_===t(p)&&s(p),$(q)}else s(p);_=t(p)}if(_!==null)ie=!0;else{var H=t(f);H!==null&&Ce(J,H.startTime-q),ie=!1}}break e}finally{_=null,T=pe,E=!1}ie=void 0}}finally{ie?B():Y=!1}}}var B;if(typeof z=="function")B=function(){z(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Te=U.port2;U.port1.onmessage=O,B=function(){Te.postMessage(null)}}else B=function(){j(O,0)};function Ce(q,ie){D=j(function(){q(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(q){switch(T){case 1:case 2:case 3:var ie=3;break;default:ie=T}var pe=T;T=ie;try{return q()}finally{T=pe}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(q,ie){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var pe=T;T=q;try{return ie()}finally{T=pe}},n.unstable_scheduleCallback=function(q,ie,pe){var Ue=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ue+pe:Ue):pe=Ue,q){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=pe+he,q={id:v++,callback:ie,priorityLevel:q,startTime:pe,expirationTime:he,sortIndex:-1},pe>Ue?(q.sortIndex=pe,e(f,q),t(p)===null&&q===t(f)&&(k?(R(D),D=-1):k=!0,Ce(J,pe-Ue))):(q.sortIndex=he,e(p,q),I||E||(I=!0,Y||(Y=!0,B()))),q},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(q){var ie=T;return function(){var pe=T;T=ie;try{return q.apply(this,arguments)}finally{T=pe}}}})(O0)),O0}var Ob;function r2(){return Ob||(Ob=1,U0.exports=a2()),U0.exports}var V0={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vb;function o2(){if(Vb)return Wn;Vb=1;var n=Jp();function e(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,f,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:f,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Wn.createPortal=function(p,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(p,f,null,v)},Wn.flushSync=function(p){var f=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=f,s.p=v,s.d.f()}},Wn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(p,f))},Wn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Wn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var v=f.as,_=h(v,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;v==="style"?s.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:E}):v==="script"&&s.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Wn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var v=h(f.as,f.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(p)},Wn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var v=f.as,_=h(v,f.crossOrigin);s.d.L(p,v,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Wn.preloadModule=function(p,f){if(typeof p=="string")if(f){var v=h(f.as,f.crossOrigin);s.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(p)},Wn.requestFormReset=function(p){s.d.r(p)},Wn.unstable_batchedUpdates=function(p,f){return p(f)},Wn.useFormState=function(p,f,v){return u.H.useFormState(p,f,v)},Wn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Wn.version="19.2.3",Wn}var Bb;function l2(){if(Bb)return V0.exports;Bb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),V0.exports=o2(),V0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function c2(){if(Gb)return $c;Gb=1;var n=r2(),e=Jp(),t=l2();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var c=i,d=r;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return p(y),i;if(b===d)return p(y),r;b=b.sibling}throw Error(s(188))}if(c.return!==d.return)c=y,d=b;else{for(var w=!1,P=y.child;P;){if(P===c){w=!0,c=y,d=b;break}if(P===d){w=!0,d=y,c=b;break}P=P.sibling}if(!w){for(P=b.child;P;){if(P===c){w=!0,c=b,d=y;break}if(P===d){w=!0,d=b,c=y;break}P=P.sibling}if(!w)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),z=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var U=Symbol.for("react.client.reference");function Te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===U?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case j:return"Profiler";case C:return"StrictMode";case J:return"Suspense";case Y:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case z:return i.displayName||"Context";case R:return(i._context.displayName||"Context")+".Consumer";case $:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:Te(i.type)||"Memo";case N:r=i._payload,i=i._init;try{return Te(i(r))}catch{}}return null}var Ce=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ue=[],he=-1;function H(i){return{current:i}}function ne(i){0>he||(i.current=Ue[he],Ue[he]=null,he--)}function le(i,r){he++,Ue[he]=i.current,i.current=r}var ae=H(null),de=H(null),ce=H(null),Ae=H(null);function lt(i,r){switch(le(ce,r),le(de,i),le(ae,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?nb(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=nb(r),i=sb(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(ae),le(ae,i)}function ue(){ne(ae),ne(de),ne(ce)}function Pe(i){i.memoizedState!==null&&le(Ae,i);var r=ae.current,c=sb(r,i.type);r!==c&&(le(de,i),le(ae,c))}function Je(i){de.current===i&&(ne(ae),ne(de)),Ae.current===i&&(ne(Ae),zc._currentValue=pe)}var Me,Qe;function Fe(i){if(Me===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Me=r&&r[1]||"",Qe=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Me+i+Qe}var ct=!1;function kt(i,r){if(!i||ct)return"";ct=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(oe){var se=oe}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(oe){se=oe}i.call(ye.prototype)}}else{try{throw Error()}catch(oe){se=oe}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(oe){if(oe&&se&&typeof oe.stack=="string")return[oe.stack,se.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),w=b[0],P=b[1];if(w&&P){var F=w.split(`
`),te=P.split(`
`);for(y=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;y<te.length&&!te[y].includes("DetermineComponentFrameRoot");)y++;if(d===F.length||y===te.length)for(d=F.length-1,y=te.length-1;1<=d&&0<=y&&F[d]!==te[y];)y--;for(;1<=d&&0<=y;d--,y--)if(F[d]!==te[y]){if(d!==1||y!==1)do if(d--,y--,0>y||F[d]!==te[y]){var fe=`
`+F[d].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=d&&0<=y);break}}}finally{ct=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Fe(c):""}function Kt(i,r){switch(i.tag){case 26:case 27:case 5:return Fe(i.type);case 16:return Fe("Lazy");case 13:return i.child!==r&&r!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return kt(i.type,!1);case 11:return kt(i.type.render,!1);case 1:return kt(i.type,!0);case 31:return Fe("Activity");default:return""}}function $t(i){try{var r="",c=null;do r+=Kt(i,c),c=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var be=Object.prototype.hasOwnProperty,me=n.unstable_scheduleCallback,Ee=n.unstable_cancelCallback,nt=n.unstable_shouldYield,Rt=n.unstable_requestPaint,pt=n.unstable_now,cn=n.unstable_getCurrentPriorityLevel,Ps=n.unstable_ImmediatePriority,Nn=n.unstable_UserBlockingPriority,vs=n.unstable_NormalPriority,js=n.unstable_LowPriority,Xi=n.unstable_IdlePriority,Ei=n.log,en=n.unstable_setDisableYieldValue,pn=null,Xt=null;function Jn(i){if(typeof Ei=="function"&&en(i),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(pn,i)}catch{}}var zt=Math.clz32?Math.clz32:Br,ii=Math.log,La=Math.LN2;function Br(i){return i>>>=0,i===0?32:31-(ii(i)/La|0)|0}var Yt=256,Vn=262144,tn=4194304;function Ls(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function cs(i,r,c){var d=i.pendingLanes;if(d===0)return 0;var y=0,b=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var P=d&134217727;return P!==0?(d=P&~b,d!==0?y=Ls(d):(w&=P,w!==0?y=Ls(w):c||(c=P&~i,c!==0&&(y=Ls(c))))):(P=d&~b,P!==0?y=Ls(P):w!==0?y=Ls(w):c||(c=d&~i,c!==0&&(y=Ls(c)))),y===0?0:r!==0&&r!==y&&(r&b)===0&&(b=y&-y,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:y}function us(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function ut(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(){var i=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),i}function Qn(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function wi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function sc(i,r,c,d,y,b){var w=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var P=i.entanglements,F=i.expirationTimes,te=i.hiddenUpdates;for(c=w&~c;0<c;){var fe=31-zt(c),ye=1<<fe;P[fe]=0,F[fe]=-1;var se=te[fe];if(se!==null)for(te[fe]=null,fe=0;fe<se.length;fe++){var oe=se[fe];oe!==null&&(oe.lane&=-536870913)}c&=~ye}d!==0&&Zi(i,d,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(w&~r))}function Zi(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-zt(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function zr(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var d=31-zt(c),y=1<<d;y&r|i[d]&r&&(i[d]|=r),c&=~y}}function Ua(i,r){var c=r&-r;return c=(c&42)!==0?1:ea(c),(c&(i.suspendedLanes|r))!==0?0:c}function ea(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ai(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Lo(){var i=ie.p;return i!==0?i:(i=window.event,i===void 0?32:Nb(i.type))}function bs(i,r){var c=ie.p;try{return ie.p=i,r()}finally{ie.p=c}}var _s=Math.random().toString(36).slice(2),nn="__reactFiber$"+_s,gn="__reactProps$"+_s,Us="__reactContainer$"+_s,Oa="__reactEvents$"+_s,Uo="__reactListeners$"+_s,Oo="__reactHandles$"+_s,Vo="__reactResources$"+_s,Os="__reactMarker$"+_s;function Va(i){delete i[nn],delete i[gn],delete i[Oa],delete i[Uo],delete i[Oo]}function Ts(i){var r=i[nn];if(r)return r;for(var c=i.parentNode;c;){if(r=c[Us]||c[nn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=ub(i);i!==null;){if(c=i[nn])return c;i=ub(i)}return r}i=c,c=i.parentNode}return null}function An(i){if(i=i[nn]||i[Us]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Mn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Ss(i){var r=i[Vo];return r||(r=i[Vo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function sn(i){i[Os]=!0}var Hr=new Set,Fr={};function Vs(i,r){Bs(i,r),Bs(i+"Capture",r)}function Bs(i,r){for(Fr[i]=r,i=0;i<r.length;i++)Hr.add(r[i])}var qr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ba={},Q={};function Se(i){return be.call(Q,i)?!0:be.call(Ba,i)?!1:qr.test(i)?Q[i]=!0:(Ba[i]=!0,!1)}function Oe(i,r,c){if(Se(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function Be(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function we(i,r,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+d)}}function Le(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Xe(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function $e(i,r,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return y.call(this)},set:function(w){c=""+w,b.call(this,w)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function De(i){if(!i._valueTracker){var r=Xe(i)?"checked":"value";i._valueTracker=$e(i,r,""+i[r])}}function Ze(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return i&&(d=Xe(i)?i.checked?"true":"false":i.value),i=d,i!==c?(r.setValue(i),!0):!1}function ht(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var jt=/[\n"\\]/g;function St(i){return i.replace(jt,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function xn(i,r,c,d,y,b,w,P){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),r!=null?w==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Le(r)):i.value!==""+Le(r)&&(i.value=""+Le(r)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),r!=null?yn(i,w,Le(r)):c!=null?yn(i,w,Le(c)):d!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+Le(P):i.removeAttribute("name")}function Dn(i,r,c,d,y,b,w,P){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){De(i);return}c=c!=null?""+Le(c):"",r=r!=null?""+Le(r):c,P||r===i.value||(i.value=r),i.defaultValue=r}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=P?i.checked:!!d,i.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),De(i)}function yn(i,r,c){r==="number"&&ht(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function kn(i,r,c,d){if(i=i.options,r){r={};for(var y=0;y<c.length;y++)r["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=r.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Le(c),r=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,d&&(i[y].defaultSelected=!0);return}r!==null||i[y].disabled||(r=i[y])}r!==null&&(r.selected=!0)}}function Ni(i,r,c){if(r!=null&&(r=""+Le(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+Le(c):""}function Gs(i,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(s(92));if(Ce(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=Le(r),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),De(i)}function Cn(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var Ai=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ri(i,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,c):typeof c!="number"||c===0||Ai.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function Ga(i,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var y in r)d=r[y],r.hasOwnProperty(y)&&c[y]!==d&&ri(i,y,d)}else for(var b in r)r.hasOwnProperty(b)&&ri(i,b,r[b])}function za(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ha=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bo(i){return Ha.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function oi(){}var ic=null;function zs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fa=null,ki=null;function Kr(i){var r=An(i);if(r&&(i=r.stateNode)){var c=i[gn]||null;e:switch(i=r.stateNode,r.type){case"input":if(xn(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+St(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==i&&d.form===i.form){var y=d[gn]||null;if(!y)throw Error(s(90));xn(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===i.form&&Ze(d)}break e;case"textarea":Ni(i,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&kn(i,!!c.multiple,r,!1)}}}var Go=!1;function qa(i,r,c){if(Go)return i(r,c);Go=!0;try{var d=i(r);return d}finally{if(Go=!1,(Fa!==null||ki!==null)&&(Ad(),Fa&&(r=Fa,i=ki,ki=Fa=null,Kr(r),i)))for(r=0;r<i.length;r++)Kr(i[r])}}function li(i,r){var c=i.stateNode;if(c===null)return null;var d=c[gn]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(Hs)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){$r=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{$r=!1}var Ci=null,ac=null,Yr=null;function rc(){if(Yr)return Yr;var i,r=ac,c=r.length,d,y="value"in Ci?Ci.value:Ci.textContent,b=y.length;for(i=0;i<c&&r[i]===y[i];i++);var w=c-i;for(d=1;d<=w&&r[c-d]===y[b-d];d++);return Yr=y.slice(i,1<d?1-d:void 0)}function Jr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ta(){return!0}function ci(){return!1}function Bn(i){function r(c,d,y,b,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(c=i[P],this[P]=c?c(b):b[P]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ta:ci,this.isPropagationStopped=ci,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),r}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=Bn(na),Ka=_({},na,{view:0,detail:0}),oc=Bn(Ka),$a,zo,Ri,Ho=_({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ri&&(Ri&&i.type==="mousemove"?($a=i.screenX-Ri.screenX,zo=i.screenY-Ri.screenY):zo=$a=0,Ri=i),$a)},movementY:function(i){return"movementY"in i?i.movementY:zo}}),lc=Bn(Ho),Qr=_({},Ho,{dataTransfer:0}),ju=Bn(Qr),Lu=_({},Ka,{relatedTarget:0}),Wr=Bn(Lu),cc=_({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),Uu=Bn(cc),Fo=_({},na,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ou=Bn(Fo),Vu=_({},na,{data:0}),Mi=Bn(Vu),Bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=zu[i])?!!r[i]:!1}function Ya(){return Hu}var is=_({},Ka,{key:function(i){if(i.key){var r=Bu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Jr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Gu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(i){return i.type==="keypress"?Jr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Jr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Fu=Bn(is),qu=_({},Ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sa=Bn(qu),x=_({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),S=Bn(x),A=_({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=Bn(A),X=_({},Ho,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Bn(X),Ne=_({},na,{newState:0,oldState:0}),at=Bn(Ne),un=[9,13,27,32],Ct=Hs&&"CompositionEvent"in window,Jt=null;Hs&&"documentMode"in document&&(Jt=document.documentMode);var Fs=Hs&&"TextEvent"in window&&!Jt,Di=Hs&&(!Ct||Jt&&8<Jt&&11>=Jt),ui=" ",di=!1;function Xr(i,r){switch(i){case"keyup":return un.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ko=!1;function NA(i,r){switch(i){case"compositionend":return qo(r);case"keypress":return r.which!==32?null:(di=!0,ui);case"textInput":return i=r.data,i===ui&&di?null:i;default:return null}}function AA(i,r){if(Ko)return i==="compositionend"||!Ct&&Xr(i,r)?(i=rc(),Yr=ac=Ci=null,Ko=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Di&&r.locale!=="ko"?null:r.data;default:return null}}var kA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fx(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!kA[i.type]:r==="textarea"}function mx(i,r,c,d){Fa?ki?ki.push(d):ki=[d]:Fa=d,r=Pd(r,"onChange"),0<r.length&&(c=new Ii("onChange","change",null,c,d),i.push({event:c,listeners:r}))}var uc=null,dc=null;function CA(i){Qv(i,0)}function Ku(i){var r=Mn(i);if(Ze(r))return i}function px(i,r){if(i==="change")return r}var gx=!1;if(Hs){var Gf;if(Hs){var zf="oninput"in document;if(!zf){var xx=document.createElement("div");xx.setAttribute("oninput","return;"),zf=typeof xx.oninput=="function"}Gf=zf}else Gf=!1;gx=Gf&&(!document.documentMode||9<document.documentMode)}function yx(){uc&&(uc.detachEvent("onpropertychange",vx),dc=uc=null)}function vx(i){if(i.propertyName==="value"&&Ku(dc)){var r=[];mx(r,dc,i,zs(i)),qa(CA,r)}}function IA(i,r,c){i==="focusin"?(yx(),uc=r,dc=c,uc.attachEvent("onpropertychange",vx)):i==="focusout"&&yx()}function RA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ku(dc)}function MA(i,r){if(i==="click")return Ku(r)}function DA(i,r){if(i==="input"||i==="change")return Ku(r)}function PA(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Es=typeof Object.is=="function"?Object.is:PA;function hc(i,r){if(Es(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!be.call(r,y)||!Es(i[y],r[y]))return!1}return!0}function bx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function _x(i,r){var c=bx(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=r&&d>=r)return{node:c,offset:r-i};i=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=bx(c)}}function Tx(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Tx(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Sx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ht(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=ht(i.document)}return r}function Hf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var jA=Hs&&"documentMode"in document&&11>=document.documentMode,$o=null,Ff=null,fc=null,qf=!1;function Ex(i,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;qf||$o==null||$o!==ht(d)||(d=$o,"selectionStart"in d&&Hf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),fc&&hc(fc,d)||(fc=d,d=Pd(Ff,"onSelect"),0<d.length&&(r=new Ii("onSelect","select",null,r,c),i.push({event:r,listeners:d}),r.target=$o)))}function Zr(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Yo={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},Kf={},wx={};Hs&&(wx=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function eo(i){if(Kf[i])return Kf[i];if(!Yo[i])return i;var r=Yo[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in wx)return Kf[i]=r[c];return i}var Nx=eo("animationend"),Ax=eo("animationiteration"),kx=eo("animationstart"),LA=eo("transitionrun"),UA=eo("transitionstart"),OA=eo("transitioncancel"),Cx=eo("transitionend"),Ix=new Map,$f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$f.push("scrollEnd");function hi(i,r){Ix.set(i,r),Vs(r,[i])}var $u=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qs=[],Jo=0,Yf=0;function Yu(){for(var i=Jo,r=Yf=Jo=0;r<i;){var c=qs[r];qs[r++]=null;var d=qs[r];qs[r++]=null;var y=qs[r];qs[r++]=null;var b=qs[r];if(qs[r++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}b!==0&&Rx(c,y,b)}}function Ju(i,r,c,d){qs[Jo++]=i,qs[Jo++]=r,qs[Jo++]=c,qs[Jo++]=d,Yf|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Jf(i,r,c,d){return Ju(i,r,c,d),Qu(i)}function to(i,r){return Ju(i,null,null,r),Qu(i)}function Rx(i,r,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=i.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&r!==null&&(y=31-zt(c),i=b.hiddenUpdates,d=i[y],d===null?i[y]=[r]:d.push(r),r.lane=c|536870912),b):null}function Qu(i){if(50<jc)throw jc=0,i0=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Qo={};function VA(i,r,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(i,r,c,d){return new VA(i,r,c,d)}function Qf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ia(i,r){var c=i.alternate;return c===null?(c=ws(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Mx(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Wu(i,r,c,d,y,b){var w=0;if(d=i,typeof i=="function")Qf(i)&&(w=1);else if(typeof i=="string")w=Fk(i,c,ae.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=ws(31,c,r,y),i.elementType=M,i.lanes=b,i;case k:return no(c.children,y,b,r);case C:w=8,y|=24;break;case j:return i=ws(12,c,r,y|2),i.elementType=j,i.lanes=b,i;case J:return i=ws(13,c,r,y),i.elementType=J,i.lanes=b,i;case Y:return i=ws(19,c,r,y),i.elementType=Y,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:w=10;break e;case R:w=9;break e;case $:w=11;break e;case D:w=14;break e;case N:w=16,d=null;break e}w=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return r=ws(w,c,r,y),r.elementType=i,r.type=d,r.lanes=b,r}function no(i,r,c,d){return i=ws(7,i,d,r),i.lanes=c,i}function Wf(i,r,c){return i=ws(6,i,null,r),i.lanes=c,i}function Dx(i){var r=ws(18,null,null,0);return r.stateNode=i,r}function Xf(i,r,c){return r=ws(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Px=new WeakMap;function Ks(i,r){if(typeof i=="object"&&i!==null){var c=Px.get(i);return c!==void 0?c:(r={value:i,source:r,stack:$t(r)},Px.set(i,r),r)}return{value:i,source:r,stack:$t(r)}}var Wo=[],Xo=0,Xu=null,mc=0,$s=[],Ys=0,Ja=null,Pi=1,ji="";function aa(i,r){Wo[Xo++]=mc,Wo[Xo++]=Xu,Xu=i,mc=r}function jx(i,r,c){$s[Ys++]=Pi,$s[Ys++]=ji,$s[Ys++]=Ja,Ja=i;var d=Pi;i=ji;var y=32-zt(d)-1;d&=~(1<<y),c+=1;var b=32-zt(r)+y;if(30<b){var w=y-y%5;b=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Pi=1<<32-zt(r)+y|c<<y|d,ji=b+i}else Pi=1<<b|c<<y|d,ji=i}function Zf(i){i.return!==null&&(aa(i,1),jx(i,1,0))}function em(i){for(;i===Xu;)Xu=Wo[--Xo],Wo[Xo]=null,mc=Wo[--Xo],Wo[Xo]=null;for(;i===Ja;)Ja=$s[--Ys],$s[Ys]=null,ji=$s[--Ys],$s[Ys]=null,Pi=$s[--Ys],$s[Ys]=null}function Lx(i,r){$s[Ys++]=Pi,$s[Ys++]=ji,$s[Ys++]=Ja,Pi=r.id,ji=r.overflow,Ja=i}var Gn=null,Ht=null,_t=!1,Qa=null,Js=!1,tm=Error(s(519));function Wa(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pc(Ks(r,i)),tm}function Ux(i){var r=i.stateNode,c=i.type,d=i.memoizedProps;switch(r[nn]=i,r[gn]=d,c){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(c=0;c<Uc.length;c++)mt(Uc[c],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":mt("invalid",r),Dn(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":mt("invalid",r);break;case"textarea":mt("invalid",r),Gs(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||eb(r.textContent,c)?(d.popover!=null&&(mt("beforetoggle",r),mt("toggle",r)),d.onScroll!=null&&mt("scroll",r),d.onScrollEnd!=null&&mt("scrollend",r),d.onClick!=null&&(r.onclick=oi),r=!0):r=!1,r||Wa(i,!0)}function Ox(i){for(Gn=i.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:Js=!1;return;case 27:case 3:Js=!0;return;default:Gn=Gn.return}}function Zo(i){if(i!==Gn)return!1;if(!_t)return Ox(i),_t=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||v0(i.type,i.memoizedProps)),c=!c),c&&Ht&&Wa(i),Ox(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ht=cb(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ht=cb(i)}else r===27?(r=Ht,dr(i.type)?(i=E0,E0=null,Ht=i):Ht=r):Ht=Gn?Ws(i.stateNode.nextSibling):null;return!0}function so(){Ht=Gn=null,_t=!1}function nm(){var i=Qa;return i!==null&&(ms===null?ms=i:ms.push.apply(ms,i),Qa=null),i}function pc(i){Qa===null?Qa=[i]:Qa.push(i)}var sm=H(null),io=null,ra=null;function Xa(i,r,c){le(sm,r._currentValue),r._currentValue=c}function oa(i){i._currentValue=sm.current,ne(sm)}function im(i,r,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===c)break;i=i.return}}function am(i,r,c,d){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var w=y.child;b=b.firstContext;e:for(;b!==null;){var P=b;b=y;for(var F=0;F<r.length;F++)if(P.context===r[F]){b.lanes|=c,P=b.alternate,P!==null&&(P.lanes|=c),im(b.return,c,i),d||(w=null);break e}b=P.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(s(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),im(w,c,i),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===i){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function el(i,r,c,d){i=null;for(var y=r,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var P=y.type;Es(y.pendingProps.value,w.value)||(i!==null?i.push(P):i=[P])}}else if(y===Ae.current){if(w=y.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(zc):i=[zc])}y=y.return}i!==null&&am(r,i,c,d),r.flags|=262144}function Zu(i){for(i=i.firstContext;i!==null;){if(!Es(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ao(i){io=i,ra=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function zn(i){return Vx(io,i)}function ed(i,r){return io===null&&ao(i),Vx(i,r)}function Vx(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},ra===null){if(i===null)throw Error(s(308));ra=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ra=ra.next=r;return c}var BA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},GA=n.unstable_scheduleCallback,zA=n.unstable_NormalPriority,vn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rm(){return{controller:new BA,data:new Map,refCount:0}}function gc(i){i.refCount--,i.refCount===0&&GA(zA,function(){i.controller.abort()})}var xc=null,om=0,tl=0,nl=null;function HA(i,r){if(xc===null){var c=xc=[];om=0,tl=u0(),nl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return om++,r.then(Bx,Bx),r}function Bx(){if(--om===0&&xc!==null){nl!==null&&(nl.status="fulfilled");var i=xc;xc=null,tl=0,nl=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function FA(i,r){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var y=0;y<c.length;y++)(0,c[y])(r)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var Gx=q.S;q.S=function(i,r){Ev=pt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&HA(i,r),Gx!==null&&Gx(i,r)};var ro=H(null);function lm(){var i=ro.current;return i!==null?i:Bt.pooledCache}function td(i,r){r===null?le(ro,ro.current):le(ro,r.pool)}function zx(){var i=lm();return i===null?null:{parent:vn._currentValue,pool:i}}var sl=Error(s(460)),cm=Error(s(474)),nd=Error(s(542)),sd={then:function(){}};function Hx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fx(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(oi,oi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Kx(i),i;default:if(typeof r.status=="string")r.then(oi,oi);else{if(i=Bt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=d}},function(d){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Kx(i),i}throw lo=r,sl}}function oo(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(lo=c,sl):c}}var lo=null;function qx(){if(lo===null)throw Error(s(459));var i=lo;return lo=null,i}function Kx(i){if(i===sl||i===nd)throw Error(s(483))}var il=null,yc=0;function id(i){var r=yc;return yc+=1,il===null&&(il=[]),Fx(il,i,r)}function vc(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ad(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function $x(i){function r(W,K){if(i){var ee=W.deletions;ee===null?(W.deletions=[K],W.flags|=16):ee.push(K)}}function c(W,K){if(!i)return null;for(;K!==null;)r(W,K),K=K.sibling;return null}function d(W){for(var K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function y(W,K){return W=ia(W,K),W.index=0,W.sibling=null,W}function b(W,K,ee){return W.index=ee,i?(ee=W.alternate,ee!==null?(ee=ee.index,ee<K?(W.flags|=67108866,K):ee):(W.flags|=67108866,K)):(W.flags|=1048576,K)}function w(W){return i&&W.alternate===null&&(W.flags|=67108866),W}function P(W,K,ee,ge){return K===null||K.tag!==6?(K=Wf(ee,W.mode,ge),K.return=W,K):(K=y(K,ee),K.return=W,K)}function F(W,K,ee,ge){var ze=ee.type;return ze===k?fe(W,K,ee.props.children,ge,ee.key):K!==null&&(K.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===N&&oo(ze)===K.type)?(K=y(K,ee.props),vc(K,ee),K.return=W,K):(K=Wu(ee.type,ee.key,ee.props,null,W.mode,ge),vc(K,ee),K.return=W,K)}function te(W,K,ee,ge){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=Xf(ee,W.mode,ge),K.return=W,K):(K=y(K,ee.children||[]),K.return=W,K)}function fe(W,K,ee,ge,ze){return K===null||K.tag!==7?(K=no(ee,W.mode,ge,ze),K.return=W,K):(K=y(K,ee),K.return=W,K)}function ye(W,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Wf(""+K,W.mode,ee),K.return=W,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case E:return ee=Wu(K.type,K.key,K.props,null,W.mode,ee),vc(ee,K),ee.return=W,ee;case I:return K=Xf(K,W.mode,ee),K.return=W,K;case N:return K=oo(K),ye(W,K,ee)}if(Ce(K)||B(K))return K=no(K,W.mode,ee,null),K.return=W,K;if(typeof K.then=="function")return ye(W,id(K),ee);if(K.$$typeof===z)return ye(W,ed(W,K),ee);ad(W,K)}return null}function se(W,K,ee,ge){var ze=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ze!==null?null:P(W,K,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case E:return ee.key===ze?F(W,K,ee,ge):null;case I:return ee.key===ze?te(W,K,ee,ge):null;case N:return ee=oo(ee),se(W,K,ee,ge)}if(Ce(ee)||B(ee))return ze!==null?null:fe(W,K,ee,ge,null);if(typeof ee.then=="function")return se(W,K,id(ee),ge);if(ee.$$typeof===z)return se(W,K,ed(W,ee),ge);ad(W,ee)}return null}function oe(W,K,ee,ge,ze){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return W=W.get(ee)||null,P(K,W,""+ge,ze);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case E:return W=W.get(ge.key===null?ee:ge.key)||null,F(K,W,ge,ze);case I:return W=W.get(ge.key===null?ee:ge.key)||null,te(K,W,ge,ze);case N:return ge=oo(ge),oe(W,K,ee,ge,ze)}if(Ce(ge)||B(ge))return W=W.get(ee)||null,fe(K,W,ge,ze,null);if(typeof ge.then=="function")return oe(W,K,ee,id(ge),ze);if(ge.$$typeof===z)return oe(W,K,ee,ed(K,ge),ze);ad(K,ge)}return null}function Ve(W,K,ee,ge){for(var ze=null,wt=null,Ge=K,ot=K=0,xt=null;Ge!==null&&ot<ee.length;ot++){Ge.index>ot?(xt=Ge,Ge=null):xt=Ge.sibling;var Nt=se(W,Ge,ee[ot],ge);if(Nt===null){Ge===null&&(Ge=xt);break}i&&Ge&&Nt.alternate===null&&r(W,Ge),K=b(Nt,K,ot),wt===null?ze=Nt:wt.sibling=Nt,wt=Nt,Ge=xt}if(ot===ee.length)return c(W,Ge),_t&&aa(W,ot),ze;if(Ge===null){for(;ot<ee.length;ot++)Ge=ye(W,ee[ot],ge),Ge!==null&&(K=b(Ge,K,ot),wt===null?ze=Ge:wt.sibling=Ge,wt=Ge);return _t&&aa(W,ot),ze}for(Ge=d(Ge);ot<ee.length;ot++)xt=oe(Ge,W,ot,ee[ot],ge),xt!==null&&(i&&xt.alternate!==null&&Ge.delete(xt.key===null?ot:xt.key),K=b(xt,K,ot),wt===null?ze=xt:wt.sibling=xt,wt=xt);return i&&Ge.forEach(function(gr){return r(W,gr)}),_t&&aa(W,ot),ze}function Ke(W,K,ee,ge){if(ee==null)throw Error(s(151));for(var ze=null,wt=null,Ge=K,ot=K=0,xt=null,Nt=ee.next();Ge!==null&&!Nt.done;ot++,Nt=ee.next()){Ge.index>ot?(xt=Ge,Ge=null):xt=Ge.sibling;var gr=se(W,Ge,Nt.value,ge);if(gr===null){Ge===null&&(Ge=xt);break}i&&Ge&&gr.alternate===null&&r(W,Ge),K=b(gr,K,ot),wt===null?ze=gr:wt.sibling=gr,wt=gr,Ge=xt}if(Nt.done)return c(W,Ge),_t&&aa(W,ot),ze;if(Ge===null){for(;!Nt.done;ot++,Nt=ee.next())Nt=ye(W,Nt.value,ge),Nt!==null&&(K=b(Nt,K,ot),wt===null?ze=Nt:wt.sibling=Nt,wt=Nt);return _t&&aa(W,ot),ze}for(Ge=d(Ge);!Nt.done;ot++,Nt=ee.next())Nt=oe(Ge,W,ot,Nt.value,ge),Nt!==null&&(i&&Nt.alternate!==null&&Ge.delete(Nt.key===null?ot:Nt.key),K=b(Nt,K,ot),wt===null?ze=Nt:wt.sibling=Nt,wt=Nt);return i&&Ge.forEach(function(t2){return r(W,t2)}),_t&&aa(W,ot),ze}function Vt(W,K,ee,ge){if(typeof ee=="object"&&ee!==null&&ee.type===k&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case E:e:{for(var ze=ee.key;K!==null;){if(K.key===ze){if(ze=ee.type,ze===k){if(K.tag===7){c(W,K.sibling),ge=y(K,ee.props.children),ge.return=W,W=ge;break e}}else if(K.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===N&&oo(ze)===K.type){c(W,K.sibling),ge=y(K,ee.props),vc(ge,ee),ge.return=W,W=ge;break e}c(W,K);break}else r(W,K);K=K.sibling}ee.type===k?(ge=no(ee.props.children,W.mode,ge,ee.key),ge.return=W,W=ge):(ge=Wu(ee.type,ee.key,ee.props,null,W.mode,ge),vc(ge,ee),ge.return=W,W=ge)}return w(W);case I:e:{for(ze=ee.key;K!==null;){if(K.key===ze)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){c(W,K.sibling),ge=y(K,ee.children||[]),ge.return=W,W=ge;break e}else{c(W,K);break}else r(W,K);K=K.sibling}ge=Xf(ee,W.mode,ge),ge.return=W,W=ge}return w(W);case N:return ee=oo(ee),Vt(W,K,ee,ge)}if(Ce(ee))return Ve(W,K,ee,ge);if(B(ee)){if(ze=B(ee),typeof ze!="function")throw Error(s(150));return ee=ze.call(ee),Ke(W,K,ee,ge)}if(typeof ee.then=="function")return Vt(W,K,id(ee),ge);if(ee.$$typeof===z)return Vt(W,K,ed(W,ee),ge);ad(W,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,K!==null&&K.tag===6?(c(W,K.sibling),ge=y(K,ee),ge.return=W,W=ge):(c(W,K),ge=Wf(ee,W.mode,ge),ge.return=W,W=ge),w(W)):c(W,K)}return function(W,K,ee,ge){try{yc=0;var ze=Vt(W,K,ee,ge);return il=null,ze}catch(Ge){if(Ge===sl||Ge===nd)throw Ge;var wt=ws(29,Ge,null,W.mode);return wt.lanes=ge,wt.return=W,wt}finally{}}}var co=$x(!0),Yx=$x(!1),Za=!1;function um(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function er(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function tr(i,r,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(It&2)!==0){var y=d.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),d.pending=r,r=Qu(i),Rx(i,null,c),r}return Ju(i,d,r,c),Qu(i)}function bc(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,zr(i,c)}}function hm(i,r){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?y=b=r:b=b.next=r}else y=b=r;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var fm=!1;function _c(){if(fm){var i=nl;if(i!==null)throw i}}function Tc(i,r,c,d){fm=!1;var y=i.updateQueue;Za=!1;var b=y.firstBaseUpdate,w=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var F=P,te=F.next;F.next=null,w===null?b=te:w.next=te,w=F;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,P=fe.lastBaseUpdate,P!==w&&(P===null?fe.firstBaseUpdate=te:P.next=te,fe.lastBaseUpdate=F))}if(b!==null){var ye=y.baseState;w=0,fe=te=F=null,P=b;do{var se=P.lane&-536870913,oe=se!==P.lane;if(oe?(gt&se)===se:(d&se)===se){se!==0&&se===tl&&(fm=!0),fe!==null&&(fe=fe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ve=i,Ke=P;se=r;var Vt=c;switch(Ke.tag){case 1:if(Ve=Ke.payload,typeof Ve=="function"){ye=Ve.call(Vt,ye,se);break e}ye=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Ke.payload,se=typeof Ve=="function"?Ve.call(Vt,ye,se):Ve,se==null)break e;ye=_({},ye,se);break e;case 2:Za=!0}}se=P.callback,se!==null&&(i.flags|=64,oe&&(i.flags|=8192),oe=y.callbacks,oe===null?y.callbacks=[se]:oe.push(se))}else oe={lane:se,tag:P.tag,payload:P.payload,callback:P.callback,next:null},fe===null?(te=fe=oe,F=ye):fe=fe.next=oe,w|=se;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;oe=P,P=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);fe===null&&(F=ye),y.baseState=F,y.firstBaseUpdate=te,y.lastBaseUpdate=fe,b===null&&(y.shared.lanes=0),rr|=w,i.lanes=w,i.memoizedState=ye}}function Jx(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Qx(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Jx(c[i],r)}var al=H(null),rd=H(0);function Wx(i,r){i=ga,le(rd,i),le(al,r),ga=i|r.baseLanes}function mm(){le(rd,ga),le(al,al.current)}function pm(){ga=rd.current,ne(al),ne(rd)}var Ns=H(null),Qs=null;function nr(i){var r=i.alternate;le(dn,dn.current&1),le(Ns,i),Qs===null&&(r===null||al.current!==null||r.memoizedState!==null)&&(Qs=i)}function gm(i){le(dn,dn.current),le(Ns,i),Qs===null&&(Qs=i)}function Xx(i){i.tag===22?(le(dn,dn.current),le(Ns,i),Qs===null&&(Qs=i)):sr()}function sr(){le(dn,dn.current),le(Ns,Ns.current)}function As(i){ne(Ns),Qs===i&&(Qs=null),ne(dn)}var dn=H(0);function od(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||T0(c)||S0(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var la=0,rt=null,Ut=null,bn=null,ld=!1,rl=!1,uo=!1,cd=0,Sc=0,ol=null,qA=0;function an(){throw Error(s(321))}function xm(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!Es(i[c],r[c]))return!1;return!0}function ym(i,r,c,d,y,b){return la=b,rt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,q.H=i===null||i.memoizedState===null?jy:Dm,uo=!1,b=c(d,y),uo=!1,rl&&(b=ey(r,c,d,y)),Zx(i),b}function Zx(i){q.H=Nc;var r=Ut!==null&&Ut.next!==null;if(la=0,bn=Ut=rt=null,ld=!1,Sc=0,ol=null,r)throw Error(s(300));i===null||_n||(i=i.dependencies,i!==null&&Zu(i)&&(_n=!0))}function ey(i,r,c,d){rt=i;var y=0;do{if(rl&&(ol=null),Sc=0,rl=!1,25<=y)throw Error(s(301));if(y+=1,bn=Ut=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}q.H=Ly,b=r(c,d)}while(rl);return b}function KA(){var i=q.H,r=i.useState()[0];return r=typeof r.then=="function"?Ec(r):r,i=i.useState()[0],(Ut!==null?Ut.memoizedState:null)!==i&&(rt.flags|=1024),r}function vm(){var i=cd!==0;return cd=0,i}function bm(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function _m(i){if(ld){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ld=!1}la=0,bn=Ut=rt=null,rl=!1,Sc=cd=0,ol=null}function as(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?rt.memoizedState=bn=i:bn=bn.next=i,bn}function hn(){if(Ut===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=Ut.next;var r=bn===null?rt.memoizedState:bn.next;if(r!==null)bn=r,Ut=i;else{if(i===null)throw rt.alternate===null?Error(s(467)):Error(s(310));Ut=i,i={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},bn===null?rt.memoizedState=bn=i:bn=bn.next=i}return bn}function ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(i){var r=Sc;return Sc+=1,ol===null&&(ol=[]),i=Fx(ol,i,r),r=rt,(bn===null?r.memoizedState:bn.next)===null&&(r=r.alternate,q.H=r===null||r.memoizedState===null?jy:Dm),i}function dd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ec(i);if(i.$$typeof===z)return zn(i)}throw Error(s(438,String(i)))}function Tm(i){var r=null,c=rt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=rt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=ud(),rt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),d=0;d<i;d++)c[d]=L;return r.index++,c}function ca(i,r){return typeof r=="function"?r(i):r}function hd(i){var r=hn();return Sm(r,Ut,i)}function Sm(i,r,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var y=i.baseQueue,b=d.pending;if(b!==null){if(y!==null){var w=y.next;y.next=b.next,b.next=w}r.baseQueue=y=b,d.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{r=y.next;var P=w=null,F=null,te=r,fe=!1;do{var ye=te.lane&-536870913;if(ye!==te.lane?(gt&ye)===ye:(la&ye)===ye){var se=te.revertLane;if(se===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),ye===tl&&(fe=!0);else if((la&se)===se){te=te.next,se===tl&&(fe=!0);continue}else ye={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(P=F=ye,w=b):F=F.next=ye,rt.lanes|=se,rr|=se;ye=te.action,uo&&c(b,ye),b=te.hasEagerState?te.eagerState:c(b,ye)}else se={lane:ye,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},F===null?(P=F=se,w=b):F=F.next=se,rt.lanes|=ye,rr|=ye;te=te.next}while(te!==null&&te!==r);if(F===null?w=b:F.next=P,!Es(b,i.memoizedState)&&(_n=!0,fe&&(c=nl,c!==null)))throw c;i.memoizedState=b,i.baseState=w,i.baseQueue=F,d.lastRenderedState=b}return y===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Em(i){var r=hn(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,y=c.pending,b=r.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do b=i(b,w.action),w=w.next;while(w!==y);Es(b,r.memoizedState)||(_n=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,d]}function ty(i,r,c){var d=rt,y=hn(),b=_t;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=r();var w=!Es((Ut||y).memoizedState,c);if(w&&(y.memoizedState=c,_n=!0),y=y.queue,Am(iy.bind(null,d,y,i),[i]),y.getSnapshot!==r||w||bn!==null&&bn.memoizedState.tag&1){if(d.flags|=2048,ll(9,{destroy:void 0},sy.bind(null,d,y,c,r),null),Bt===null)throw Error(s(349));b||(la&127)!==0||ny(d,r,c)}return c}function ny(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=rt.updateQueue,r===null?(r=ud(),rt.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function sy(i,r,c,d){r.value=c,r.getSnapshot=d,ay(r)&&ry(i)}function iy(i,r,c){return c(function(){ay(r)&&ry(i)})}function ay(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!Es(i,c)}catch{return!0}}function ry(i){var r=to(i,2);r!==null&&ps(r,i,2)}function wm(i){var r=as();if(typeof i=="function"){var c=i;if(i=c(),uo){Jn(!0);try{c()}finally{Jn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:i},r}function oy(i,r,c,d){return i.baseState=c,Sm(i,Ut,typeof d=="function"?d:ca)}function $A(i,r,c,d,y){if(pd(i))throw Error(s(485));if(i=r.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};q.T!==null?c(!0):b.isTransition=!1,d(b),c=r.pending,c===null?(b.next=r.pending=b,ly(r,b)):(b.next=c.next,r.pending=c.next=b)}}function ly(i,r){var c=r.action,d=r.payload,y=i.state;if(r.isTransition){var b=q.T,w={};q.T=w;try{var P=c(y,d),F=q.S;F!==null&&F(w,P),cy(i,r,P)}catch(te){Nm(i,r,te)}finally{b!==null&&w.types!==null&&(b.types=w.types),q.T=b}}else try{b=c(y,d),cy(i,r,b)}catch(te){Nm(i,r,te)}}function cy(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){uy(i,r,d)},function(d){return Nm(i,r,d)}):uy(i,r,c)}function uy(i,r,c){r.status="fulfilled",r.value=c,dy(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,ly(i,c)))}function Nm(i,r,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,dy(r),r=r.next;while(r!==d)}i.action=null}function dy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function hy(i,r){return r}function fy(i,r){if(_t){var c=Bt.formState;if(c!==null){e:{var d=rt;if(_t){if(Ht){t:{for(var y=Ht,b=Js;y.nodeType!==8;){if(!b){y=null;break t}if(y=Ws(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Ht=Ws(y.nextSibling),d=y.data==="F!";break e}}Wa(d)}d=!1}d&&(r=c[0])}}return c=as(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hy,lastRenderedState:r},c.queue=d,c=My.bind(null,rt,d),d.dispatch=c,d=wm(!1),b=Mm.bind(null,rt,!1,d.queue),d=as(),y={state:r,dispatch:null,action:i,pending:null},d.queue=y,c=$A.bind(null,rt,y,b,c),y.dispatch=c,d.memoizedState=i,[r,c,!1]}function my(i){var r=hn();return py(r,Ut,i)}function py(i,r,c){if(r=Sm(i,r,hy)[0],i=hd(ca)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Ec(r)}catch(w){throw w===sl?nd:w}else d=r;r=hn();var y=r.queue,b=y.dispatch;return c!==r.memoizedState&&(rt.flags|=2048,ll(9,{destroy:void 0},YA.bind(null,y,c),null)),[d,b,i]}function YA(i,r){i.action=r}function gy(i){var r=hn(),c=Ut;if(c!==null)return py(r,c,i);hn(),r=r.memoizedState,c=hn();var d=c.queue.dispatch;return c.memoizedState=i,[r,d,!1]}function ll(i,r,c,d){return i={tag:i,create:c,deps:d,inst:r,next:null},r=rt.updateQueue,r===null&&(r=ud(),rt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,r.lastEffect=i),i}function xy(){return hn().memoizedState}function fd(i,r,c,d){var y=as();rt.flags|=i,y.memoizedState=ll(1|r,{destroy:void 0},c,d===void 0?null:d)}function md(i,r,c,d){var y=hn();d=d===void 0?null:d;var b=y.memoizedState.inst;Ut!==null&&d!==null&&xm(d,Ut.memoizedState.deps)?y.memoizedState=ll(r,b,c,d):(rt.flags|=i,y.memoizedState=ll(1|r,b,c,d))}function yy(i,r){fd(8390656,8,i,r)}function Am(i,r){md(2048,8,i,r)}function JA(i){rt.flags|=4;var r=rt.updateQueue;if(r===null)r=ud(),rt.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function vy(i){var r=hn().memoizedState;return JA({ref:r,nextImpl:i}),function(){if((It&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function by(i,r){return md(4,2,i,r)}function _y(i,r){return md(4,4,i,r)}function Ty(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Sy(i,r,c){c=c!=null?c.concat([i]):null,md(4,4,Ty.bind(null,r,i),c)}function km(){}function Ey(i,r){var c=hn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&xm(r,d[1])?d[0]:(c.memoizedState=[i,r],i)}function wy(i,r){var c=hn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&xm(r,d[1]))return d[0];if(d=i(),uo){Jn(!0);try{i()}finally{Jn(!1)}}return c.memoizedState=[d,r],d}function Cm(i,r,c){return c===void 0||(la&1073741824)!==0&&(gt&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=Nv(),rt.lanes|=i,rr|=i,c)}function Ny(i,r,c,d){return Es(c,r)?c:al.current!==null?(i=Cm(i,c,d),Es(i,r)||(_n=!0),i):(la&42)===0||(la&1073741824)!==0&&(gt&261930)===0?(_n=!0,i.memoizedState=c):(i=Nv(),rt.lanes|=i,rr|=i,r)}function Ay(i,r,c,d,y){var b=ie.p;ie.p=b!==0&&8>b?b:8;var w=q.T,P={};q.T=P,Mm(i,!1,r,c);try{var F=y(),te=q.S;if(te!==null&&te(P,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var fe=FA(F,d);wc(i,r,fe,Is(i))}else wc(i,r,d,Is(i))}catch(ye){wc(i,r,{then:function(){},status:"rejected",reason:ye},Is())}finally{ie.p=b,w!==null&&P.types!==null&&(w.types=P.types),q.T=w}}function QA(){}function Im(i,r,c,d){if(i.tag!==5)throw Error(s(476));var y=ky(i).queue;Ay(i,y,r,pe,c===null?QA:function(){return Cy(i),c(d)})}function ky(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:pe},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Cy(i){var r=ky(i);r.next===null&&(r=i.alternate.memoizedState),wc(i,r.next.queue,{},Is())}function Rm(){return zn(zc)}function Iy(){return hn().memoizedState}function Ry(){return hn().memoizedState}function WA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Is();i=er(c);var d=tr(r,i,c);d!==null&&(ps(d,r,c),bc(d,r,c)),r={cache:rm()},i.payload=r;return}r=r.return}}function XA(i,r,c){var d=Is();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},pd(i)?Dy(r,c):(c=Jf(i,r,c,d),c!==null&&(ps(c,i,d),Py(c,r,d)))}function My(i,r,c){var d=Is();wc(i,r,c,d)}function wc(i,r,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(pd(i))Dy(r,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var w=r.lastRenderedState,P=b(w,c);if(y.hasEagerState=!0,y.eagerState=P,Es(P,w))return Ju(i,r,y,0),Bt===null&&Yu(),!1}catch{}finally{}if(c=Jf(i,r,y,d),c!==null)return ps(c,i,d),Py(c,r,d),!0}return!1}function Mm(i,r,c,d){if(d={lane:2,revertLane:u0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},pd(i)){if(r)throw Error(s(479))}else r=Jf(i,c,d,2),r!==null&&ps(r,i,2)}function pd(i){var r=i.alternate;return i===rt||r!==null&&r===rt}function Dy(i,r){rl=ld=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function Py(i,r,c){if((c&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,zr(i,c)}}var Nc={readContext:zn,use:dd,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};Nc.useEffectEvent=an;var jy={readContext:zn,use:dd,useCallback:function(i,r){return as().memoizedState=[i,r===void 0?null:r],i},useContext:zn,useEffect:yy,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,fd(4194308,4,Ty.bind(null,r,i),c)},useLayoutEffect:function(i,r){return fd(4194308,4,i,r)},useInsertionEffect:function(i,r){fd(4,2,i,r)},useMemo:function(i,r){var c=as();r=r===void 0?null:r;var d=i();if(uo){Jn(!0);try{i()}finally{Jn(!1)}}return c.memoizedState=[d,r],d},useReducer:function(i,r,c){var d=as();if(c!==void 0){var y=c(r);if(uo){Jn(!0);try{c(r)}finally{Jn(!1)}}}else y=r;return d.memoizedState=d.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},d.queue=i,i=i.dispatch=XA.bind(null,rt,i),[d.memoizedState,i]},useRef:function(i){var r=as();return i={current:i},r.memoizedState=i},useState:function(i){i=wm(i);var r=i.queue,c=My.bind(null,rt,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:km,useDeferredValue:function(i,r){var c=as();return Cm(c,i,r)},useTransition:function(){var i=wm(!1);return i=Ay.bind(null,rt,i.queue,!0,!1),as().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var d=rt,y=as();if(_t){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),Bt===null)throw Error(s(349));(gt&127)!==0||ny(d,r,c)}y.memoizedState=c;var b={value:c,getSnapshot:r};return y.queue=b,yy(iy.bind(null,d,b,i),[i]),d.flags|=2048,ll(9,{destroy:void 0},sy.bind(null,d,b,c,r),null),c},useId:function(){var i=as(),r=Bt.identifierPrefix;if(_t){var c=ji,d=Pi;c=(d&~(1<<32-zt(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=cd++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=qA++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Rm,useFormState:fy,useActionState:fy,useOptimistic:function(i){var r=as();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Mm.bind(null,rt,!0,c),c.dispatch=r,[i,r]},useMemoCache:Tm,useCacheRefresh:function(){return as().memoizedState=WA.bind(null,rt)},useEffectEvent:function(i){var r=as(),c={impl:i};return r.memoizedState=c,function(){if((It&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},Dm={readContext:zn,use:dd,useCallback:Ey,useContext:zn,useEffect:Am,useImperativeHandle:Sy,useInsertionEffect:by,useLayoutEffect:_y,useMemo:wy,useReducer:hd,useRef:xy,useState:function(){return hd(ca)},useDebugValue:km,useDeferredValue:function(i,r){var c=hn();return Ny(c,Ut.memoizedState,i,r)},useTransition:function(){var i=hd(ca)[0],r=hn().memoizedState;return[typeof i=="boolean"?i:Ec(i),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:Rm,useFormState:my,useActionState:my,useOptimistic:function(i,r){var c=hn();return oy(c,Ut,i,r)},useMemoCache:Tm,useCacheRefresh:Ry};Dm.useEffectEvent=vy;var Ly={readContext:zn,use:dd,useCallback:Ey,useContext:zn,useEffect:Am,useImperativeHandle:Sy,useInsertionEffect:by,useLayoutEffect:_y,useMemo:wy,useReducer:Em,useRef:xy,useState:function(){return Em(ca)},useDebugValue:km,useDeferredValue:function(i,r){var c=hn();return Ut===null?Cm(c,i,r):Ny(c,Ut.memoizedState,i,r)},useTransition:function(){var i=Em(ca)[0],r=hn().memoizedState;return[typeof i=="boolean"?i:Ec(i),r]},useSyncExternalStore:ty,useId:Iy,useHostTransitionStatus:Rm,useFormState:gy,useActionState:gy,useOptimistic:function(i,r){var c=hn();return Ut!==null?oy(c,Ut,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Tm,useCacheRefresh:Ry};Ly.useEffectEvent=vy;function Pm(i,r,c,d){r=i.memoizedState,c=c(d,r),c=c==null?r:_({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var jm={enqueueSetState:function(i,r,c){i=i._reactInternals;var d=Is(),y=er(d);y.payload=r,c!=null&&(y.callback=c),r=tr(i,y,d),r!==null&&(ps(r,i,d),bc(r,i,d))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var d=Is(),y=er(d);y.tag=1,y.payload=r,c!=null&&(y.callback=c),r=tr(i,y,d),r!==null&&(ps(r,i,d),bc(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Is(),d=er(c);d.tag=2,r!=null&&(d.callback=r),r=tr(i,d,c),r!==null&&(ps(r,i,c),bc(r,i,c))}};function Uy(i,r,c,d,y,b,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,w):r.prototype&&r.prototype.isPureReactComponent?!hc(c,d)||!hc(y,b):!0}function Oy(i,r,c,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==i&&jm.enqueueReplaceState(r,r.state,null)}function ho(i,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(i=i.defaultProps){c===r&&(c=_({},c));for(var y in i)c[y]===void 0&&(c[y]=i[y])}return c}function Vy(i){$u(i)}function By(i){console.error(i)}function Gy(i){$u(i)}function gd(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function zy(i,r,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Lm(i,r,c){return c=er(c),c.tag=3,c.payload={element:null},c.callback=function(){gd(i,r)},c}function Hy(i){return i=er(i),i.tag=3,i}function Fy(i,r,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;i.payload=function(){return y(b)},i.callback=function(){zy(r,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){zy(r,c,d),typeof y!="function"&&(or===null?or=new Set([this]):or.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})})}function ZA(i,r,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&el(r,c,y,!0),c=Ns.current,c!==null){switch(c.tag){case 31:case 13:return Qs===null?kd():c.alternate===null&&rn===0&&(rn=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===sd?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),o0(i,d,y)),!1;case 22:return c.flags|=65536,d===sd?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),o0(i,d,y)),!1}throw Error(s(435,c.tag))}return o0(i,d,y),kd(),!1}if(_t)return r=Ns.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,d!==tm&&(i=Error(s(422),{cause:d}),pc(Ks(i,c)))):(d!==tm&&(r=Error(s(423),{cause:d}),pc(Ks(r,c))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,d=Ks(d,c),y=Lm(i.stateNode,d,y),hm(i,y),rn!==4&&(rn=2)),!1;var b=Error(s(520),{cause:d});if(b=Ks(b,c),Pc===null?Pc=[b]:Pc.push(b),rn!==4&&(rn=2),r===null)return!0;d=Ks(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=y&-y,c.lanes|=i,i=Lm(c.stateNode,d,i),hm(c,i),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(or===null||!or.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=Hy(y),Fy(y,i,c,d),hm(c,y),!1}c=c.return}while(c!==null);return!1}var Um=Error(s(461)),_n=!1;function Hn(i,r,c,d){r.child=i===null?Yx(r,null,c,d):co(r,i.child,c,d)}function qy(i,r,c,d,y){c=c.render;var b=r.ref;if("ref"in d){var w={};for(var P in d)P!=="ref"&&(w[P]=d[P])}else w=d;return ao(r),d=ym(i,r,c,w,b,y),P=vm(),i!==null&&!_n?(bm(i,r,y),ua(i,r,y)):(_t&&P&&Zf(r),r.flags|=1,Hn(i,r,d,y),r.child)}function Ky(i,r,c,d,y){if(i===null){var b=c.type;return typeof b=="function"&&!Qf(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,$y(i,r,b,d,y)):(i=Wu(c.type,null,d,r,r.mode,y),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!qm(i,y)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:hc,c(w,d)&&i.ref===r.ref)return ua(i,r,y)}return r.flags|=1,i=ia(b,d),i.ref=r.ref,i.return=r,r.child=i}function $y(i,r,c,d,y){if(i!==null){var b=i.memoizedProps;if(hc(b,d)&&i.ref===r.ref)if(_n=!1,r.pendingProps=d=b,qm(i,y))(i.flags&131072)!==0&&(_n=!0);else return r.lanes=i.lanes,ua(i,r,y)}return Om(i,r,c,d,y)}function Yy(i,r,c,d){var y=d.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(d=r.child=i.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~b}else d=0,r.child=null;return Jy(i,r,b,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&td(r,b!==null?b.cachePool:null),b!==null?Wx(r,b):mm(),Xx(r);else return d=r.lanes=536870912,Jy(i,r,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(td(r,b.cachePool),Wx(r,b),sr(),r.memoizedState=null):(i!==null&&td(r,null),mm(),sr());return Hn(i,r,y,c),r.child}function Ac(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Jy(i,r,c,d,y){var b=lm();return b=b===null?null:{parent:vn._currentValue,pool:b},r.memoizedState={baseLanes:c,cachePool:b},i!==null&&td(r,null),mm(),Xx(r),i!==null&&el(i,r,d,!0),r.childLanes=y,null}function xd(i,r){return r=vd({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Qy(i,r,c){return co(r,i.child,null,c),i=xd(r,r.pendingProps),i.flags|=2,As(r),r.memoizedState=null,i}function ek(i,r,c){var d=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(_t){if(d.mode==="hidden")return i=xd(r,d),r.lanes=536870912,Ac(null,i);if(gm(r),(i=Ht)?(i=lb(i,Js),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ja!==null?{id:Pi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},c=Dx(i),c.return=r,r.child=c,Gn=r,Ht=null)):i=null,i===null)throw Wa(r);return r.lanes=536870912,null}return xd(r,d)}var b=i.memoizedState;if(b!==null){var w=b.dehydrated;if(gm(r),y)if(r.flags&256)r.flags&=-257,r=Qy(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(_n||el(i,r,c,!1),y=(c&i.childLanes)!==0,_n||y){if(d=Bt,d!==null&&(w=Ua(d,c),w!==0&&w!==b.retryLane))throw b.retryLane=w,to(i,w),ps(d,i,w),Um;kd(),r=Qy(i,r,c)}else i=b.treeContext,Ht=Ws(w.nextSibling),Gn=r,_t=!0,Qa=null,Js=!1,i!==null&&Lx(r,i),r=xd(r,d),r.flags|=4096;return r}return i=ia(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function yd(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function Om(i,r,c,d,y){return ao(r),c=ym(i,r,c,d,void 0,y),d=vm(),i!==null&&!_n?(bm(i,r,y),ua(i,r,y)):(_t&&d&&Zf(r),r.flags|=1,Hn(i,r,c,y),r.child)}function Wy(i,r,c,d,y,b){return ao(r),r.updateQueue=null,c=ey(r,d,c,y),Zx(i),d=vm(),i!==null&&!_n?(bm(i,r,b),ua(i,r,b)):(_t&&d&&Zf(r),r.flags|=1,Hn(i,r,c,b),r.child)}function Xy(i,r,c,d,y){if(ao(r),r.stateNode===null){var b=Qo,w=c.contextType;typeof w=="object"&&w!==null&&(b=zn(w)),b=new c(d,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=jm,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=d,b.state=r.memoizedState,b.refs={},um(r),w=c.contextType,b.context=typeof w=="object"&&w!==null?zn(w):Qo,b.state=r.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Pm(r,c,w,d),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&jm.enqueueReplaceState(b,b.state,null),Tc(r,d,b,y),_c(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){b=r.stateNode;var P=r.memoizedProps,F=ho(c,P);b.props=F;var te=b.context,fe=c.contextType;w=Qo,typeof fe=="object"&&fe!==null&&(w=zn(fe));var ye=c.getDerivedStateFromProps;fe=typeof ye=="function"||typeof b.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,fe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P||te!==w)&&Oy(r,b,d,w),Za=!1;var se=r.memoizedState;b.state=se,Tc(r,d,b,y),_c(),te=r.memoizedState,P||se!==te||Za?(typeof ye=="function"&&(Pm(r,c,ye,d),te=r.memoizedState),(F=Za||Uy(r,c,F,d,se,te,w))?(fe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=te),b.props=d,b.state=te,b.context=w,d=F):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{b=r.stateNode,dm(i,r),w=r.memoizedProps,fe=ho(c,w),b.props=fe,ye=r.pendingProps,se=b.context,te=c.contextType,F=Qo,typeof te=="object"&&te!==null&&(F=zn(te)),P=c.getDerivedStateFromProps,(te=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==ye||se!==F)&&Oy(r,b,d,F),Za=!1,se=r.memoizedState,b.state=se,Tc(r,d,b,y),_c();var oe=r.memoizedState;w!==ye||se!==oe||Za||i!==null&&i.dependencies!==null&&Zu(i.dependencies)?(typeof P=="function"&&(Pm(r,c,P,d),oe=r.memoizedState),(fe=Za||Uy(r,c,fe,d,se,oe,F)||i!==null&&i.dependencies!==null&&Zu(i.dependencies))?(te||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,oe,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,oe,F)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===i.memoizedProps&&se===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&se===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=oe),b.props=d,b.state=oe,b.context=F,d=fe):(typeof b.componentDidUpdate!="function"||w===i.memoizedProps&&se===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&se===i.memoizedState||(r.flags|=1024),d=!1)}return b=d,yd(i,r),d=(r.flags&128)!==0,b||d?(b=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&d?(r.child=co(r,i.child,null,y),r.child=co(r,null,c,y)):Hn(i,r,c,y),r.memoizedState=b.state,i=r.child):i=ua(i,r,y),i}function Zy(i,r,c,d){return so(),r.flags|=256,Hn(i,r,c,d),r.child}var Vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(i){return{baseLanes:i,cachePool:zx()}}function Gm(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=Cs),i}function ev(i,r,c){var d=r.pendingProps,y=!1,b=(r.flags&128)!==0,w;if((w=b)||(w=i!==null&&i.memoizedState===null?!1:(dn.current&2)!==0),w&&(y=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,i===null){if(_t){if(y?nr(r):sr(),(i=Ht)?(i=lb(i,Js),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ja!==null?{id:Pi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},c=Dx(i),c.return=r,r.child=c,Gn=r,Ht=null)):i=null,i===null)throw Wa(r);return S0(i)?r.lanes=32:r.lanes=536870912,null}var P=d.children;return d=d.fallback,y?(sr(),y=r.mode,P=vd({mode:"hidden",children:P},y),d=no(d,y,c,null),P.return=r,d.return=r,P.sibling=d,r.child=P,d=r.child,d.memoizedState=Bm(c),d.childLanes=Gm(i,w,c),r.memoizedState=Vm,Ac(null,d)):(nr(r),zm(r,P))}var F=i.memoizedState;if(F!==null&&(P=F.dehydrated,P!==null)){if(b)r.flags&256?(nr(r),r.flags&=-257,r=Hm(i,r,c)):r.memoizedState!==null?(sr(),r.child=i.child,r.flags|=128,r=null):(sr(),P=d.fallback,y=r.mode,d=vd({mode:"visible",children:d.children},y),P=no(P,y,c,null),P.flags|=2,d.return=r,P.return=r,d.sibling=P,r.child=d,co(r,i.child,null,c),d=r.child,d.memoizedState=Bm(c),d.childLanes=Gm(i,w,c),r.memoizedState=Vm,r=Ac(null,d));else if(nr(r),S0(P)){if(w=P.nextSibling&&P.nextSibling.dataset,w)var te=w.dgst;w=te,d=Error(s(419)),d.stack="",d.digest=w,pc({value:d,source:null,stack:null}),r=Hm(i,r,c)}else if(_n||el(i,r,c,!1),w=(c&i.childLanes)!==0,_n||w){if(w=Bt,w!==null&&(d=Ua(w,c),d!==0&&d!==F.retryLane))throw F.retryLane=d,to(i,d),ps(w,i,d),Um;T0(P)||kd(),r=Hm(i,r,c)}else T0(P)?(r.flags|=192,r.child=i.child,r=null):(i=F.treeContext,Ht=Ws(P.nextSibling),Gn=r,_t=!0,Qa=null,Js=!1,i!==null&&Lx(r,i),r=zm(r,d.children),r.flags|=4096);return r}return y?(sr(),P=d.fallback,y=r.mode,F=i.child,te=F.sibling,d=ia(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,te!==null?P=ia(te,P):(P=no(P,y,c,null),P.flags|=2),P.return=r,d.return=r,d.sibling=P,r.child=d,Ac(null,d),d=r.child,P=i.child.memoizedState,P===null?P=Bm(c):(y=P.cachePool,y!==null?(F=vn._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=zx(),P={baseLanes:P.baseLanes|c,cachePool:y}),d.memoizedState=P,d.childLanes=Gm(i,w,c),r.memoizedState=Vm,Ac(i.child,d)):(nr(r),c=i.child,i=c.sibling,c=ia(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,i!==null&&(w=r.deletions,w===null?(r.deletions=[i],r.flags|=16):w.push(i)),r.child=c,r.memoizedState=null,c)}function zm(i,r){return r=vd({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function vd(i,r){return i=ws(22,i,null,r),i.lanes=0,i}function Hm(i,r,c){return co(r,i.child,null,c),i=zm(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function tv(i,r,c){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),im(i.return,r,c)}function Fm(i,r,c,d,y,b){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:b}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=y,w.treeForkCount=b)}function nv(i,r,c){var d=r.pendingProps,y=d.revealOrder,b=d.tail;d=d.children;var w=dn.current,P=(w&2)!==0;if(P?(w=w&1|2,r.flags|=128):w&=1,le(dn,w),Hn(i,r,d,c),d=_t?mc:0,!P&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&tv(i,c,r);else if(i.tag===19)tv(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(c=r.child,y=null;c!==null;)i=c.alternate,i!==null&&od(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=r.child,r.child=null):(y=c.sibling,c.sibling=null),Fm(r,!1,y,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=r.child,r.child=null;y!==null;){if(i=y.alternate,i!==null&&od(i)===null){r.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}Fm(r,!0,c,null,b,d);break;case"together":Fm(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function ua(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),rr|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(el(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,c=ia(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=ia(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function qm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Zu(i)))}function tk(i,r,c){switch(r.tag){case 3:lt(r,r.stateNode.containerInfo),Xa(r,vn,i.memoizedState.cache),so();break;case 27:case 5:Pe(r);break;case 4:lt(r,r.stateNode.containerInfo);break;case 10:Xa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,gm(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(nr(r),r.flags|=128,null):(c&r.child.childLanes)!==0?ev(i,r,c):(nr(r),i=ua(i,r,c),i!==null?i.sibling:null);nr(r);break;case 19:var y=(i.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(el(i,r,c,!1),d=(c&r.childLanes)!==0),y){if(d)return nv(i,r,c);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(dn,dn.current),d)break;return null;case 22:return r.lanes=0,Yy(i,r,c,r.pendingProps);case 24:Xa(r,vn,i.memoizedState.cache)}return ua(i,r,c)}function sv(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)_n=!0;else{if(!qm(i,c)&&(r.flags&128)===0)return _n=!1,tk(i,r,c);_n=(i.flags&131072)!==0}else _n=!1,_t&&(r.flags&1048576)!==0&&jx(r,mc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=oo(r.elementType),r.type=i,typeof i=="function")Qf(i)?(d=ho(i,d),r.tag=1,r=Xy(null,r,i,d,c)):(r.tag=0,r=Om(null,r,i,d,c));else{if(i!=null){var y=i.$$typeof;if(y===$){r.tag=11,r=qy(null,r,i,d,c);break e}else if(y===D){r.tag=14,r=Ky(null,r,i,d,c);break e}}throw r=Te(i)||i,Error(s(306,r,""))}}return r;case 0:return Om(i,r,r.type,r.pendingProps,c);case 1:return d=r.type,y=ho(d,r.pendingProps),Xy(i,r,d,y,c);case 3:e:{if(lt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));d=r.pendingProps;var b=r.memoizedState;y=b.element,dm(i,r),Tc(r,d,null,c);var w=r.memoizedState;if(d=w.cache,Xa(r,vn,d),d!==b.cache&&am(r,[vn],c,!0),_c(),d=w.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=Zy(i,r,d,c);break e}else if(d!==y){y=Ks(Error(s(424)),r),pc(y),r=Zy(i,r,d,c);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ht=Ws(i.firstChild),Gn=r,_t=!0,Qa=null,Js=!0,c=Yx(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(so(),d===y){r=ua(i,r,c);break e}Hn(i,r,d,c)}r=r.child}return r;case 26:return yd(i,r),i===null?(c=mb(r.type,null,r.pendingProps,null))?r.memoizedState=c:_t||(c=r.type,i=r.pendingProps,d=jd(ce.current).createElement(c),d[nn]=r,d[gn]=i,Fn(d,c,i),sn(d),r.stateNode=d):r.memoizedState=mb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Pe(r),i===null&&_t&&(d=r.stateNode=db(r.type,r.pendingProps,ce.current),Gn=r,Js=!0,y=Ht,dr(r.type)?(E0=y,Ht=Ws(d.firstChild)):Ht=y),Hn(i,r,r.pendingProps.children,c),yd(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&_t&&((y=d=Ht)&&(d=Rk(d,r.type,r.pendingProps,Js),d!==null?(r.stateNode=d,Gn=r,Ht=Ws(d.firstChild),Js=!1,y=!0):y=!1),y||Wa(r)),Pe(r),y=r.type,b=r.pendingProps,w=i!==null?i.memoizedProps:null,d=b.children,v0(y,b)?d=null:w!==null&&v0(y,w)&&(r.flags|=32),r.memoizedState!==null&&(y=ym(i,r,KA,null,null,c),zc._currentValue=y),yd(i,r),Hn(i,r,d,c),r.child;case 6:return i===null&&_t&&((i=c=Ht)&&(c=Mk(c,r.pendingProps,Js),c!==null?(r.stateNode=c,Gn=r,Ht=null,i=!0):i=!1),i||Wa(r)),null;case 13:return ev(i,r,c);case 4:return lt(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=co(r,null,d,c):Hn(i,r,d,c),r.child;case 11:return qy(i,r,r.type,r.pendingProps,c);case 7:return Hn(i,r,r.pendingProps,c),r.child;case 8:return Hn(i,r,r.pendingProps.children,c),r.child;case 12:return Hn(i,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,Xa(r,r.type,d.value),Hn(i,r,d.children,c),r.child;case 9:return y=r.type._context,d=r.pendingProps.children,ao(r),y=zn(y),d=d(y),r.flags|=1,Hn(i,r,d,c),r.child;case 14:return Ky(i,r,r.type,r.pendingProps,c);case 15:return $y(i,r,r.type,r.pendingProps,c);case 19:return nv(i,r,c);case 31:return ek(i,r,c);case 22:return Yy(i,r,c,r.pendingProps);case 24:return ao(r),d=zn(vn),i===null?(y=lm(),y===null&&(y=Bt,b=rm(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),r.memoizedState={parent:d,cache:y},um(r),Xa(r,vn,y)):((i.lanes&c)!==0&&(dm(i,r),Tc(r,null,null,c),_c()),y=i.memoizedState,b=r.memoizedState,y.parent!==d?(y={parent:d,cache:d},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Xa(r,vn,d)):(d=b.cache,Xa(r,vn,d),d!==y.cache&&am(r,[vn],c,!0))),Hn(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function da(i){i.flags|=4}function Km(i,r,c,d,y){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Iv())i.flags|=8192;else throw lo=sd,cm}else i.flags&=-16777217}function iv(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!vb(r))if(Iv())i.flags|=8192;else throw lo=sd,cm}function bd(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Gr():536870912,i.lanes|=r,hl|=r)}function kc(i,r){if(!_t)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ft(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(r)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=d,i.childLanes=c,r}function nk(i,r,c){var d=r.pendingProps;switch(em(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Ft(r),null;case 3:return c=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),oa(vn),ue(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Zo(r)?da(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,nm())),Ft(r),null;case 26:var y=r.type,b=r.memoizedState;return i===null?(da(r),b!==null?(Ft(r),iv(r,b)):(Ft(r),Km(r,y,null,d,c))):b?b!==i.memoizedState?(da(r),Ft(r),iv(r,b)):(Ft(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&da(r),Ft(r),Km(r,y,i,d,c)),null;case 27:if(Je(r),c=ce.current,y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&da(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Ft(r),null}i=ae.current,Zo(r)?Ux(r):(i=db(y,d,c),r.stateNode=i,da(r))}return Ft(r),null;case 5:if(Je(r),y=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&da(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Ft(r),null}if(b=ae.current,Zo(r))Ux(r);else{var w=jd(ce.current);switch(b){case 1:b=w.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=w.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=w.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?w.createElement(y,{is:d.is}):w.createElement(y)}}b[nn]=r,b[gn]=d;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)b.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=b;e:switch(Fn(b,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&da(r)}}return Ft(r),Km(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&da(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(i=ce.current,Zo(r)){if(i=r.stateNode,c=r.memoizedProps,d=null,y=Gn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}i[nn]=r,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||eb(i.nodeValue,c)),i||Wa(r,!0)}else i=jd(i).createTextNode(d),i[nn]=r,r.stateNode=i}return Ft(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(d=Zo(r),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[nn]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),i=!1}else c=nm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(As(r),r):(As(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Ft(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Zo(r),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[nn]=r}else so(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),y=!1}else y=nm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(As(r),r):(As(r),null)}return As(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=r.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),bd(r,r.updateQueue),Ft(r),null);case 4:return ue(),i===null&&m0(r.stateNode.containerInfo),Ft(r),null;case 10:return oa(r.type),Ft(r),null;case 19:if(ne(dn),d=r.memoizedState,d===null)return Ft(r),null;if(y=(r.flags&128)!==0,b=d.rendering,b===null)if(y)kc(d,!1);else{if(rn!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=od(i),b!==null){for(r.flags|=128,kc(d,!1),i=b.updateQueue,r.updateQueue=i,bd(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)Mx(c,i),c=c.sibling;return le(dn,dn.current&1|2),_t&&aa(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&pt()>wd&&(r.flags|=128,y=!0,kc(d,!1),r.lanes=4194304)}else{if(!y)if(i=od(b),i!==null){if(r.flags|=128,y=!0,i=i.updateQueue,r.updateQueue=i,bd(r,i),kc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!_t)return Ft(r),null}else 2*pt()-d.renderingStartTime>wd&&c!==536870912&&(r.flags|=128,y=!0,kc(d,!1),r.lanes=4194304);d.isBackwards?(b.sibling=r.child,r.child=b):(i=d.last,i!==null?i.sibling=b:r.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=pt(),i.sibling=null,c=dn.current,le(dn,y?c&1|2:c&1),_t&&aa(r,d.treeForkCount),i):(Ft(r),null);case 22:case 23:return As(r),pm(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),c=r.updateQueue,c!==null&&bd(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),i!==null&&ne(ro),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),oa(vn),Ft(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function sk(i,r){switch(em(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return oa(vn),ue(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Je(r),null;case 31:if(r.memoizedState!==null){if(As(r),r.alternate===null)throw Error(s(340));so()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(As(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));so()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ne(dn),null;case 4:return ue(),null;case 10:return oa(r.type),null;case 22:case 23:return As(r),pm(),i!==null&&ne(ro),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return oa(vn),null;case 25:return null;default:return null}}function av(i,r){switch(em(r),r.tag){case 3:oa(vn),ue();break;case 26:case 27:case 5:Je(r);break;case 4:ue();break;case 31:r.memoizedState!==null&&As(r);break;case 13:As(r);break;case 19:ne(dn);break;case 10:oa(r.type);break;case 22:case 23:As(r),pm(),i!==null&&ne(ro);break;case 24:oa(vn)}}function Cc(i,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&i)===i){d=void 0;var b=c.create,w=c.inst;d=b(),w.destroy=d}c=c.next}while(c!==y)}}catch(P){Pt(r,r.return,P)}}function ir(i,r,c){try{var d=r.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&i)===i){var w=d.inst,P=w.destroy;if(P!==void 0){w.destroy=void 0,y=r;var F=c,te=P;try{te()}catch(fe){Pt(y,F,fe)}}}d=d.next}while(d!==b)}}catch(fe){Pt(r,r.return,fe)}}function rv(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{Qx(r,c)}catch(d){Pt(i,i.return,d)}}}function ov(i,r,c){c.props=ho(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){Pt(i,r,d)}}function Ic(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(y){Pt(i,r,y)}}function Li(i,r){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){Pt(i,r,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Pt(i,r,y)}else c.current=null}function lv(i){var r=i.type,c=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){Pt(i,i.return,y)}}function $m(i,r,c){try{var d=i.stateNode;wk(d,i.type,c,r),d[gn]=r}catch(y){Pt(i,i.return,y)}}function cv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&dr(i.type)||i.tag===4}function Ym(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||cv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&dr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jm(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=oi));else if(d!==4&&(d===27&&dr(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(Jm(i,r,c),i=i.sibling;i!==null;)Jm(i,r,c),i=i.sibling}function _d(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(d!==4&&(d===27&&dr(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(_d(i,r,c),i=i.sibling;i!==null;)_d(i,r,c),i=i.sibling}function uv(i){var r=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Fn(r,d,c),r[nn]=i,r[gn]=c}catch(b){Pt(i,i.return,b)}}var ha=!1,Tn=!1,Qm=!1,dv=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function ik(i,r){if(i=i.containerInfo,x0=zd,i=Sx(i),Hf(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,P=-1,F=-1,te=0,fe=0,ye=i,se=null;t:for(;;){for(var oe;ye!==c||y!==0&&ye.nodeType!==3||(P=w+y),ye!==b||d!==0&&ye.nodeType!==3||(F=w+d),ye.nodeType===3&&(w+=ye.nodeValue.length),(oe=ye.firstChild)!==null;)se=ye,ye=oe;for(;;){if(ye===i)break t;if(se===c&&++te===y&&(P=w),se===b&&++fe===d&&(F=w),(oe=ye.nextSibling)!==null)break;ye=se,se=ye.parentNode}ye=oe}c=P===-1||F===-1?null:{start:P,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(y0={focusedElem:i,selectionRange:c},zd=!1,Pn=r;Pn!==null;)if(r=Pn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Pn=i;else for(;Pn!==null;){switch(r=Pn,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)y=i[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=r,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Ve=ho(c.type,y);i=d.getSnapshotBeforeUpdate(Ve,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ke){Pt(c,c.return,Ke)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)_0(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":_0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Pn=i;break}Pn=r.return}}function hv(i,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ma(i,c),d&4&&Cc(5,c);break;case 1:if(ma(i,c),d&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(w){Pt(c,c.return,w)}else{var y=ho(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(y,r,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Pt(c,c.return,w)}}d&64&&rv(c),d&512&&Ic(c,c.return);break;case 3:if(ma(i,c),d&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Qx(i,r)}catch(w){Pt(c,c.return,w)}}break;case 27:r===null&&d&4&&uv(c);case 26:case 5:ma(i,c),r===null&&d&4&&lv(c),d&512&&Ic(c,c.return);break;case 12:ma(i,c);break;case 31:ma(i,c),d&4&&pv(i,c);break;case 13:ma(i,c),d&4&&gv(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=fk.bind(null,c),Dk(i,c))));break;case 22:if(d=c.memoizedState!==null||ha,!d){r=r!==null&&r.memoizedState!==null||Tn,y=ha;var b=Tn;ha=d,(Tn=r)&&!b?pa(i,c,(c.subtreeFlags&8772)!==0):ma(i,c),ha=y,Tn=b}break;case 30:break;default:ma(i,c)}}function fv(i){var r=i.alternate;r!==null&&(i.alternate=null,fv(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Va(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Qt=null,ds=!1;function fa(i,r,c){for(c=c.child;c!==null;)mv(i,r,c),c=c.sibling}function mv(i,r,c){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(pn,c)}catch{}switch(c.tag){case 26:Tn||Li(c,r),fa(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Tn||Li(c,r);var d=Qt,y=ds;dr(c.type)&&(Qt=c.stateNode,ds=!1),fa(i,r,c),Vc(c.stateNode),Qt=d,ds=y;break;case 5:Tn||Li(c,r);case 6:if(d=Qt,y=ds,Qt=null,fa(i,r,c),Qt=d,ds=y,Qt!==null)if(ds)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(c.stateNode)}catch(b){Pt(c,r,b)}else try{Qt.removeChild(c.stateNode)}catch(b){Pt(c,r,b)}break;case 18:Qt!==null&&(ds?(i=Qt,rb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),bl(i)):rb(Qt,c.stateNode));break;case 4:d=Qt,y=ds,Qt=c.stateNode.containerInfo,ds=!0,fa(i,r,c),Qt=d,ds=y;break;case 0:case 11:case 14:case 15:ir(2,c,r),Tn||ir(4,c,r),fa(i,r,c);break;case 1:Tn||(Li(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&ov(c,r,d)),fa(i,r,c);break;case 21:fa(i,r,c);break;case 22:Tn=(d=Tn)||c.memoizedState!==null,fa(i,r,c),Tn=d;break;default:fa(i,r,c)}}function pv(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{bl(i)}catch(c){Pt(r,r.return,c)}}}function gv(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{bl(i)}catch(c){Pt(r,r.return,c)}}function ak(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new dv),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new dv),r;default:throw Error(s(435,i.tag))}}function Td(i,r){var c=ak(i);r.forEach(function(d){if(!c.has(d)){c.add(d);var y=mk.bind(null,i,d);d.then(y,y)}})}function hs(i,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=i,w=r,P=w;e:for(;P!==null;){switch(P.tag){case 27:if(dr(P.type)){Qt=P.stateNode,ds=!1;break e}break;case 5:Qt=P.stateNode,ds=!1;break e;case 3:case 4:Qt=P.stateNode.containerInfo,ds=!0;break e}P=P.return}if(Qt===null)throw Error(s(160));mv(b,w,y),Qt=null,ds=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)xv(r,i),r=r.sibling}var fi=null;function xv(i,r){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:hs(r,i),fs(i),d&4&&(ir(3,i,i.return),Cc(3,i),ir(5,i,i.return));break;case 1:hs(r,i),fs(i),d&512&&(Tn||c===null||Li(c,c.return)),d&64&&ha&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=fi;if(hs(r,i),fs(i),d&512&&(Tn||c===null||Li(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){e:{d=i.type,c=i.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Os]||b[nn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),Fn(b,d,c),b[nn]=i,sn(b),d=b;break e;case"link":var w=xb("link","href",y).get(d+(c.href||""));if(w){for(var P=0;P<w.length;P++)if(b=w[P],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(P,1);break t}}b=y.createElement(d),Fn(b,d,c),y.head.appendChild(b);break;case"meta":if(w=xb("meta","content",y).get(d+(c.content||""))){for(P=0;P<w.length;P++)if(b=w[P],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(P,1);break t}}b=y.createElement(d),Fn(b,d,c),y.head.appendChild(b);break;default:throw Error(s(468,d))}b[nn]=i,sn(b),d=b}i.stateNode=d}else yb(y,i.type,i.stateNode);else i.stateNode=gb(y,d,i.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?yb(y,i.type,i.stateNode):gb(y,d,i.memoizedProps)):d===null&&i.stateNode!==null&&$m(i,i.memoizedProps,c.memoizedProps)}break;case 27:hs(r,i),fs(i),d&512&&(Tn||c===null||Li(c,c.return)),c!==null&&d&4&&$m(i,i.memoizedProps,c.memoizedProps);break;case 5:if(hs(r,i),fs(i),d&512&&(Tn||c===null||Li(c,c.return)),i.flags&32){y=i.stateNode;try{Cn(y,"")}catch(Ve){Pt(i,i.return,Ve)}}d&4&&i.stateNode!=null&&(y=i.memoizedProps,$m(i,y,c!==null?c.memoizedProps:y)),d&1024&&(Qm=!0);break;case 6:if(hs(r,i),fs(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Ve){Pt(i,i.return,Ve)}}break;case 3:if(Od=null,y=fi,fi=Ld(r.containerInfo),hs(r,i),fi=y,fs(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{bl(r.containerInfo)}catch(Ve){Pt(i,i.return,Ve)}Qm&&(Qm=!1,yv(i));break;case 4:d=fi,fi=Ld(i.stateNode.containerInfo),hs(r,i),fs(i),fi=d;break;case 12:hs(r,i),fs(i);break;case 31:hs(r,i),fs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Td(i,d)));break;case 13:hs(r,i),fs(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ed=pt()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Td(i,d)));break;case 22:y=i.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,te=ha,fe=Tn;if(ha=te||y,Tn=fe||F,hs(r,i),Tn=fe,ha=te,fs(i),d&8192)e:for(r=i.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(c===null||F||ha||Tn||fo(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){F=c=r;try{if(b=F.stateNode,y)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{P=F.stateNode;var ye=F.memoizedProps.style,se=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;P.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ve){Pt(F,F.return,Ve)}}}else if(r.tag===6){if(c===null){F=r;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(Ve){Pt(F,F.return,Ve)}}}else if(r.tag===18){if(c===null){F=r;try{var oe=F.stateNode;y?ob(oe,!0):ob(F.stateNode,!1)}catch(Ve){Pt(F,F.return,Ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Td(i,c))));break;case 19:hs(r,i),fs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Td(i,d)));break;case 30:break;case 21:break;default:hs(r,i),fs(i)}}function fs(i){var r=i.flags;if(r&2){try{for(var c,d=i.return;d!==null;){if(cv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var y=c.stateNode,b=Ym(i);_d(i,b,y);break;case 5:var w=c.stateNode;c.flags&32&&(Cn(w,""),c.flags&=-33);var P=Ym(i);_d(i,P,w);break;case 3:case 4:var F=c.stateNode.containerInfo,te=Ym(i);Jm(i,te,F);break;default:throw Error(s(161))}}catch(fe){Pt(i,i.return,fe)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function yv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;yv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ma(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)hv(i,r.alternate,r),r=r.sibling}function fo(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ir(4,r,r.return),fo(r);break;case 1:Li(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&ov(r,r.return,c),fo(r);break;case 27:Vc(r.stateNode);case 26:case 5:Li(r,r.return),fo(r);break;case 22:r.memoizedState===null&&fo(r);break;case 30:fo(r);break;default:fo(r)}i=i.sibling}}function pa(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,y=i,b=r,w=b.flags;switch(b.tag){case 0:case 11:case 15:pa(y,b,c),Cc(4,b);break;case 1:if(pa(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(te){Pt(d,d.return,te)}if(d=b,y=d.updateQueue,y!==null){var P=d.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)Jx(F[y],P)}catch(te){Pt(d,d.return,te)}}c&&w&64&&rv(b),Ic(b,b.return);break;case 27:uv(b);case 26:case 5:pa(y,b,c),c&&d===null&&w&4&&lv(b),Ic(b,b.return);break;case 12:pa(y,b,c);break;case 31:pa(y,b,c),c&&w&4&&pv(y,b);break;case 13:pa(y,b,c),c&&w&4&&gv(y,b);break;case 22:b.memoizedState===null&&pa(y,b,c),Ic(b,b.return);break;case 30:break;default:pa(y,b,c)}r=r.sibling}}function Wm(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&gc(c))}function Xm(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&gc(i))}function mi(i,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)vv(i,r,c,d),r=r.sibling}function vv(i,r,c,d){var y=r.flags;switch(r.tag){case 0:case 11:case 15:mi(i,r,c,d),y&2048&&Cc(9,r);break;case 1:mi(i,r,c,d);break;case 3:mi(i,r,c,d),y&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&gc(i)));break;case 12:if(y&2048){mi(i,r,c,d),i=r.stateNode;try{var b=r.memoizedProps,w=b.id,P=b.onPostCommit;typeof P=="function"&&P(w,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){Pt(r,r.return,F)}}else mi(i,r,c,d);break;case 31:mi(i,r,c,d);break;case 13:mi(i,r,c,d);break;case 23:break;case 22:b=r.stateNode,w=r.alternate,r.memoizedState!==null?b._visibility&2?mi(i,r,c,d):Rc(i,r):b._visibility&2?mi(i,r,c,d):(b._visibility|=2,cl(i,r,c,d,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Wm(w,r);break;case 24:mi(i,r,c,d),y&2048&&Xm(r.alternate,r);break;default:mi(i,r,c,d)}}function cl(i,r,c,d,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,w=r,P=c,F=d,te=w.flags;switch(w.tag){case 0:case 11:case 15:cl(b,w,P,F,y),Cc(8,w);break;case 23:break;case 22:var fe=w.stateNode;w.memoizedState!==null?fe._visibility&2?cl(b,w,P,F,y):Rc(b,w):(fe._visibility|=2,cl(b,w,P,F,y)),y&&te&2048&&Wm(w.alternate,w);break;case 24:cl(b,w,P,F,y),y&&te&2048&&Xm(w.alternate,w);break;default:cl(b,w,P,F,y)}r=r.sibling}}function Rc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,d=r,y=d.flags;switch(d.tag){case 22:Rc(c,d),y&2048&&Wm(d.alternate,d);break;case 24:Rc(c,d),y&2048&&Xm(d.alternate,d);break;default:Rc(c,d)}r=r.sibling}}var Mc=8192;function ul(i,r,c){if(i.subtreeFlags&Mc)for(i=i.child;i!==null;)bv(i,r,c),i=i.sibling}function bv(i,r,c){switch(i.tag){case 26:ul(i,r,c),i.flags&Mc&&i.memoizedState!==null&&qk(c,fi,i.memoizedState,i.memoizedProps);break;case 5:ul(i,r,c);break;case 3:case 4:var d=fi;fi=Ld(i.stateNode.containerInfo),ul(i,r,c),fi=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=Mc,Mc=16777216,ul(i,r,c),Mc=d):ul(i,r,c));break;default:ul(i,r,c)}}function _v(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Dc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];Pn=d,Sv(d,i)}_v(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Tv(i),i=i.sibling}function Tv(i){switch(i.tag){case 0:case 11:case 15:Dc(i),i.flags&2048&&ir(9,i,i.return);break;case 3:Dc(i);break;case 12:Dc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Sd(i)):Dc(i);break;default:Dc(i)}}function Sd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];Pn=d,Sv(d,i)}_v(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ir(8,r,r.return),Sd(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Sd(r));break;default:Sd(r)}i=i.sibling}}function Sv(i,r){for(;Pn!==null;){var c=Pn;switch(c.tag){case 0:case 11:case 15:ir(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:gc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Pn=d;else e:for(c=i;Pn!==null;){d=Pn;var y=d.sibling,b=d.return;if(fv(d),d===c){Pn=null;break e}if(y!==null){y.return=b,Pn=y;break e}Pn=b}}}var rk={getCacheForType:function(i){var r=zn(vn),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return zn(vn).controller.signal}},ok=typeof WeakMap=="function"?WeakMap:Map,It=0,Bt=null,ft=null,gt=0,Dt=0,ks=null,ar=!1,dl=!1,Zm=!1,ga=0,rn=0,rr=0,mo=0,e0=0,Cs=0,hl=0,Pc=null,ms=null,t0=!1,Ed=0,Ev=0,wd=1/0,Nd=null,or=null,In=0,lr=null,fl=null,xa=0,n0=0,s0=null,wv=null,jc=0,i0=null;function Is(){return(It&2)!==0&&gt!==0?gt&-gt:q.T!==null?u0():Lo()}function Nv(){if(Cs===0)if((gt&536870912)===0||_t){var i=Vn;Vn<<=1,(Vn&3932160)===0&&(Vn=262144),Cs=i}else Cs=536870912;return i=Ns.current,i!==null&&(i.flags|=32),Cs}function ps(i,r,c){(i===Bt&&(Dt===2||Dt===9)||i.cancelPendingCommit!==null)&&(ml(i,0),cr(i,gt,Cs,!1)),wi(i,c),((It&2)===0||i!==Bt)&&(i===Bt&&((It&2)===0&&(mo|=c),rn===4&&cr(i,gt,Cs,!1)),Ui(i))}function Av(i,r,c){if((It&6)!==0)throw Error(s(327));var d=!c&&(r&127)===0&&(r&i.expiredLanes)===0||us(i,r),y=d?uk(i,r):r0(i,r,!0),b=d;do{if(y===0){dl&&!d&&cr(i,r,0,!1);break}else{if(c=i.current.alternate,b&&!lk(c)){y=r0(i,r,!1),b=!1;continue}if(y===2){if(b=r,i.errorRecoveryDisabledLanes&b)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var P=i;y=Pc;var F=P.current.memoizedState.isDehydrated;if(F&&(ml(P,w).flags|=256),w=r0(P,w,!1),w!==2){if(Zm&&!F){P.errorRecoveryDisabledLanes|=b,mo|=b,y=4;break e}b=ms,ms=y,b!==null&&(ms===null?ms=b:ms.push.apply(ms,b))}y=w}if(b=!1,y!==2)continue}}if(y===1){ml(i,0),cr(i,r,0,!0);break}e:{switch(d=i,b=y,b){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:cr(d,r,Cs,!ar);break e;case 2:ms=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(y=Ed+300-pt(),10<y)){if(cr(d,r,Cs,!ar),cs(d,0,!0)!==0)break e;xa=r,d.timeoutHandle=ib(kv.bind(null,d,c,ms,Nd,t0,r,Cs,mo,hl,ar,b,"Throttled",-0,0),y);break e}kv(d,c,ms,Nd,t0,r,Cs,mo,hl,ar,b,null,-0,0)}}break}while(!0);Ui(i)}function kv(i,r,c,d,y,b,w,P,F,te,fe,ye,se,oe){if(i.timeoutHandle=-1,ye=r.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},bv(r,b,ye);var Ve=(b&62914560)===b?Ed-pt():(b&4194048)===b?Ev-pt():0;if(Ve=Kk(ye,Ve),Ve!==null){xa=b,i.cancelPendingCommit=Ve(Lv.bind(null,i,r,b,c,d,y,w,P,F,fe,ye,null,se,oe)),cr(i,b,w,!te);return}}Lv(i,r,b,c,d,y,w,P,F)}function lk(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!Es(b(),y))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cr(i,r,c,d){r&=~e0,r&=~mo,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var y=r;0<y;){var b=31-zt(y),w=1<<b;d[b]=-1,y&=~w}c!==0&&Zi(i,c,r)}function Ad(){return(It&6)===0?(Lc(0),!1):!0}function a0(){if(ft!==null){if(Dt===0)var i=ft.return;else i=ft,ra=io=null,_m(i),il=null,yc=0,i=ft;for(;i!==null;)av(i.alternate,i),i=i.return;ft=null}}function ml(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,kk(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),xa=0,a0(),Bt=i,ft=c=ia(i.current,null),gt=r,Dt=0,ks=null,ar=!1,dl=us(i,r),Zm=!1,hl=Cs=e0=mo=rr=rn=0,ms=Pc=null,t0=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var y=31-zt(d),b=1<<y;r|=i[y],d&=~b}return ga=r,Yu(),c}function Cv(i,r){rt=null,q.H=Nc,r===sl||r===nd?(r=qx(),Dt=3):r===cm?(r=qx(),Dt=4):Dt=r===Um?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ks=r,ft===null&&(rn=1,gd(i,Ks(r,i.current)))}function Iv(){var i=Ns.current;return i===null?!0:(gt&4194048)===gt?Qs===null:(gt&62914560)===gt||(gt&536870912)!==0?i===Qs:!1}function Rv(){var i=q.H;return q.H=Nc,i===null?Nc:i}function Mv(){var i=q.A;return q.A=rk,i}function kd(){rn=4,ar||(gt&4194048)!==gt&&Ns.current!==null||(dl=!0),(rr&134217727)===0&&(mo&134217727)===0||Bt===null||cr(Bt,gt,Cs,!1)}function r0(i,r,c){var d=It;It|=2;var y=Rv(),b=Mv();(Bt!==i||gt!==r)&&(Nd=null,ml(i,r)),r=!1;var w=rn;e:do try{if(Dt!==0&&ft!==null){var P=ft,F=ks;switch(Dt){case 8:a0(),w=6;break e;case 3:case 2:case 9:case 6:Ns.current===null&&(r=!0);var te=Dt;if(Dt=0,ks=null,pl(i,P,F,te),c&&dl){w=0;break e}break;default:te=Dt,Dt=0,ks=null,pl(i,P,F,te)}}ck(),w=rn;break}catch(fe){Cv(i,fe)}while(!0);return r&&i.shellSuspendCounter++,ra=io=null,It=d,q.H=y,q.A=b,ft===null&&(Bt=null,gt=0,Yu()),w}function ck(){for(;ft!==null;)Dv(ft)}function uk(i,r){var c=It;It|=2;var d=Rv(),y=Mv();Bt!==i||gt!==r?(Nd=null,wd=pt()+500,ml(i,r)):dl=us(i,r);e:do try{if(Dt!==0&&ft!==null){r=ft;var b=ks;t:switch(Dt){case 1:Dt=0,ks=null,pl(i,r,b,1);break;case 2:case 9:if(Hx(b)){Dt=0,ks=null,Pv(r);break}r=function(){Dt!==2&&Dt!==9||Bt!==i||(Dt=7),Ui(i)},b.then(r,r);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:Hx(b)?(Dt=0,ks=null,Pv(r)):(Dt=0,ks=null,pl(i,r,b,7));break;case 5:var w=null;switch(ft.tag){case 26:w=ft.memoizedState;case 5:case 27:var P=ft;if(w?vb(w):P.stateNode.complete){Dt=0,ks=null;var F=P.sibling;if(F!==null)ft=F;else{var te=P.return;te!==null?(ft=te,Cd(te)):ft=null}break t}}Dt=0,ks=null,pl(i,r,b,5);break;case 6:Dt=0,ks=null,pl(i,r,b,6);break;case 8:a0(),rn=6;break e;default:throw Error(s(462))}}dk();break}catch(fe){Cv(i,fe)}while(!0);return ra=io=null,q.H=d,q.A=y,It=c,ft!==null?0:(Bt=null,gt=0,Yu(),rn)}function dk(){for(;ft!==null&&!nt();)Dv(ft)}function Dv(i){var r=sv(i.alternate,i,ga);i.memoizedProps=i.pendingProps,r===null?Cd(i):ft=r}function Pv(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=Wy(c,r,r.pendingProps,r.type,void 0,gt);break;case 11:r=Wy(c,r,r.pendingProps,r.type.render,r.ref,gt);break;case 5:_m(r);default:av(c,r),r=ft=Mx(r,ga),r=sv(c,r,ga)}i.memoizedProps=i.pendingProps,r===null?Cd(i):ft=r}function pl(i,r,c,d){ra=io=null,_m(r),il=null,yc=0;var y=r.return;try{if(ZA(i,y,r,c,gt)){rn=1,gd(i,Ks(c,i.current)),ft=null;return}}catch(b){if(y!==null)throw ft=y,b;rn=1,gd(i,Ks(c,i.current)),ft=null;return}r.flags&32768?(_t||d===1?i=!0:dl||(gt&536870912)!==0?i=!1:(ar=i=!0,(d===2||d===9||d===3||d===6)&&(d=Ns.current,d!==null&&d.tag===13&&(d.flags|=16384))),jv(r,i)):Cd(r)}function Cd(i){var r=i;do{if((r.flags&32768)!==0){jv(r,ar);return}i=r.return;var c=nk(r.alternate,r,ga);if(c!==null){ft=c;return}if(r=r.sibling,r!==null){ft=r;return}ft=r=i}while(r!==null);rn===0&&(rn=5)}function jv(i,r){do{var c=sk(i.alternate,i);if(c!==null){c.flags&=32767,ft=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){ft=i;return}ft=i=c}while(i!==null);rn=6,ft=null}function Lv(i,r,c,d,y,b,w,P,F){i.cancelPendingCommit=null;do Id();while(In!==0);if((It&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(b=r.lanes|r.childLanes,b|=Yf,sc(i,c,b,w,P,F),i===Bt&&(ft=Bt=null,gt=0),fl=r,lr=i,xa=c,n0=b,s0=y,wv=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,pk(vs,function(){return Gv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,y=ie.p,ie.p=2,w=It,It|=4;try{ik(i,r,c)}finally{It=w,ie.p=y,q.T=d}}In=1,Uv(),Ov(),Vv()}}function Uv(){if(In===1){In=0;var i=lr,r=fl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=q.T,q.T=null;var d=ie.p;ie.p=2;var y=It;It|=4;try{xv(r,i);var b=y0,w=Sx(i.containerInfo),P=b.focusedElem,F=b.selectionRange;if(w!==P&&P&&P.ownerDocument&&Tx(P.ownerDocument.documentElement,P)){if(F!==null&&Hf(P)){var te=F.start,fe=F.end;if(fe===void 0&&(fe=te),"selectionStart"in P)P.selectionStart=te,P.selectionEnd=Math.min(fe,P.value.length);else{var ye=P.ownerDocument||document,se=ye&&ye.defaultView||window;if(se.getSelection){var oe=se.getSelection(),Ve=P.textContent.length,Ke=Math.min(F.start,Ve),Vt=F.end===void 0?Ke:Math.min(F.end,Ve);!oe.extend&&Ke>Vt&&(w=Vt,Vt=Ke,Ke=w);var W=_x(P,Ke),K=_x(P,Vt);if(W&&K&&(oe.rangeCount!==1||oe.anchorNode!==W.node||oe.anchorOffset!==W.offset||oe.focusNode!==K.node||oe.focusOffset!==K.offset)){var ee=ye.createRange();ee.setStart(W.node,W.offset),oe.removeAllRanges(),Ke>Vt?(oe.addRange(ee),oe.extend(K.node,K.offset)):(ee.setEnd(K.node,K.offset),oe.addRange(ee))}}}}for(ye=[],oe=P;oe=oe.parentNode;)oe.nodeType===1&&ye.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ye.length;P++){var ge=ye[P];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}zd=!!x0,y0=x0=null}finally{It=y,ie.p=d,q.T=c}}i.current=r,In=2}}function Ov(){if(In===2){In=0;var i=lr,r=fl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=q.T,q.T=null;var d=ie.p;ie.p=2;var y=It;It|=4;try{hv(i,r.alternate,r)}finally{It=y,ie.p=d,q.T=c}}In=3}}function Vv(){if(In===4||In===3){In=0,Rt();var i=lr,r=fl,c=xa,d=wv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?In=5:(In=0,fl=lr=null,Bv(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(or=null),ai(c),r=r.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(pn,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=q.T,y=ie.p,ie.p=2,q.T=null;try{for(var b=i.onRecoverableError,w=0;w<d.length;w++){var P=d[w];b(P.value,{componentStack:P.stack})}}finally{q.T=r,ie.p=y}}(xa&3)!==0&&Id(),Ui(i),y=i.pendingLanes,(c&261930)!==0&&(y&42)!==0?i===i0?jc++:(jc=0,i0=i):jc=0,Lc(0)}}function Bv(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,gc(r)))}function Id(){return Uv(),Ov(),Vv(),Gv()}function Gv(){if(In!==5)return!1;var i=lr,r=n0;n0=0;var c=ai(xa),d=q.T,y=ie.p;try{ie.p=32>c?32:c,q.T=null,c=s0,s0=null;var b=lr,w=xa;if(In=0,fl=lr=null,xa=0,(It&6)!==0)throw Error(s(331));var P=It;if(It|=4,Tv(b.current),vv(b,b.current,w,c),It=P,Lc(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(pn,b)}catch{}return!0}finally{ie.p=y,q.T=d,Bv(i,r)}}function zv(i,r,c){r=Ks(c,r),r=Lm(i.stateNode,r,2),i=tr(i,r,2),i!==null&&(wi(i,2),Ui(i))}function Pt(i,r,c){if(i.tag===3)zv(i,i,c);else for(;r!==null;){if(r.tag===3){zv(r,i,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(or===null||!or.has(d))){i=Ks(c,i),c=Hy(2),d=tr(r,c,2),d!==null&&(Fy(c,d,r,i),wi(d,2),Ui(d));break}}r=r.return}}function o0(i,r,c){var d=i.pingCache;if(d===null){d=i.pingCache=new ok;var y=new Set;d.set(r,y)}else y=d.get(r),y===void 0&&(y=new Set,d.set(r,y));y.has(c)||(Zm=!0,y.add(c),i=hk.bind(null,i,r,c),r.then(i,i))}function hk(i,r,c){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Bt===i&&(gt&c)===c&&(rn===4||rn===3&&(gt&62914560)===gt&&300>pt()-Ed?(It&2)===0&&ml(i,0):e0|=c,hl===gt&&(hl=0)),Ui(i)}function Hv(i,r){r===0&&(r=Gr()),i=to(i,r),i!==null&&(wi(i,r),Ui(i))}function fk(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),Hv(i,c)}function mk(i,r){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),Hv(i,c)}function pk(i,r){return me(i,r)}var Rd=null,gl=null,l0=!1,Md=!1,c0=!1,ur=0;function Ui(i){i!==gl&&i.next===null&&(gl===null?Rd=gl=i:gl=gl.next=i),Md=!0,l0||(l0=!0,xk())}function Lc(i,r){if(!c0&&Md){c0=!0;do for(var c=!1,d=Rd;d!==null;){if(i!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var w=d.suspendedLanes,P=d.pingedLanes;b=(1<<31-zt(42|i)+1)-1,b&=y&~(w&~P),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,$v(d,b))}else b=gt,b=cs(d,d===Bt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||us(d,b)||(c=!0,$v(d,b));d=d.next}while(c);c0=!1}}function gk(){Fv()}function Fv(){Md=l0=!1;var i=0;ur!==0&&Ak()&&(i=ur);for(var r=pt(),c=null,d=Rd;d!==null;){var y=d.next,b=qv(d,r);b===0?(d.next=null,c===null?Rd=y:c.next=y,y===null&&(gl=c)):(c=d,(i!==0||(b&3)!==0)&&(Md=!0)),d=y}In!==0&&In!==5||Lc(i),ur!==0&&(ur=0)}function qv(i,r){for(var c=i.suspendedLanes,d=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var w=31-zt(b),P=1<<w,F=y[w];F===-1?((P&c)===0||(P&d)!==0)&&(y[w]=ut(P,r)):F<=r&&(i.expiredLanes|=P),b&=~P}if(r=Bt,c=gt,c=cs(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===r&&(Dt===2||Dt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Ee(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||us(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(d!==null&&Ee(d),ai(c)){case 2:case 8:c=Nn;break;case 32:c=vs;break;case 268435456:c=Xi;break;default:c=vs}return d=Kv.bind(null,i),c=me(c,d),i.callbackPriority=r,i.callbackNode=c,r}return d!==null&&d!==null&&Ee(d),i.callbackPriority=2,i.callbackNode=null,2}function Kv(i,r){if(In!==0&&In!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Id()&&i.callbackNode!==c)return null;var d=gt;return d=cs(i,i===Bt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Av(i,d,r),qv(i,pt()),i.callbackNode!=null&&i.callbackNode===c?Kv.bind(null,i):null)}function $v(i,r){if(Id())return null;Av(i,r,!0)}function xk(){Ck(function(){(It&6)!==0?me(Ps,gk):Fv()})}function u0(){if(ur===0){var i=tl;i===0&&(i=Yt,Yt<<=1,(Yt&261888)===0&&(Yt=256)),ur=i}return ur}function Yv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Bo(""+i)}function Jv(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function yk(i,r,c,d,y){if(r==="submit"&&c&&c.stateNode===y){var b=Yv((y[gn]||null).action),w=d.submitter;w&&(r=(r=w[gn]||null)?Yv(r.formAction):w.getAttribute("formAction"),r!==null&&(b=r,w=null));var P=new Ii("action","action",null,d,y);i.push({event:P,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ur!==0){var F=w?Jv(y,w):new FormData(y);Im(c,{pending:!0,data:F,method:y.method,action:b},null,F)}}else typeof b=="function"&&(P.preventDefault(),F=w?Jv(y,w):new FormData(y),Im(c,{pending:!0,data:F,method:y.method,action:b},b,F))},currentTarget:y}]})}}for(var d0=0;d0<$f.length;d0++){var h0=$f[d0],vk=h0.toLowerCase(),bk=h0[0].toUpperCase()+h0.slice(1);hi(vk,"on"+bk)}hi(Nx,"onAnimationEnd"),hi(Ax,"onAnimationIteration"),hi(kx,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(LA,"onTransitionRun"),hi(UA,"onTransitionStart"),hi(OA,"onTransitionCancel"),hi(Cx,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_k=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function Qv(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],y=d.event;d=d.listeners;e:{var b=void 0;if(r)for(var w=d.length-1;0<=w;w--){var P=d[w],F=P.instance,te=P.currentTarget;if(P=P.listener,F!==b&&y.isPropagationStopped())break e;b=P,y.currentTarget=te;try{b(y)}catch(fe){$u(fe)}y.currentTarget=null,b=F}else for(w=0;w<d.length;w++){if(P=d[w],F=P.instance,te=P.currentTarget,P=P.listener,F!==b&&y.isPropagationStopped())break e;b=P,y.currentTarget=te;try{b(y)}catch(fe){$u(fe)}y.currentTarget=null,b=F}}}}function mt(i,r){var c=r[Oa];c===void 0&&(c=r[Oa]=new Set);var d=i+"__bubble";c.has(d)||(Wv(r,i,2,!1),c.add(d))}function f0(i,r,c){var d=0;r&&(d|=4),Wv(c,i,d,r)}var Dd="_reactListening"+Math.random().toString(36).slice(2);function m0(i){if(!i[Dd]){i[Dd]=!0,Hr.forEach(function(c){c!=="selectionchange"&&(_k.has(c)||f0(c,!1,i),f0(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Dd]||(r[Dd]=!0,f0("selectionchange",!1,r))}}function Wv(i,r,c,d){switch(Nb(r)){case 2:var y=Jk;break;case 8:y=Qk;break;default:y=C0}c=y.bind(null,r,c,i),y=void 0,!$r||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),d?y!==void 0?i.addEventListener(r,c,{capture:!0,passive:y}):i.addEventListener(r,c,!0):y!==void 0?i.addEventListener(r,c,{passive:y}):i.addEventListener(r,c,!1)}function p0(i,r,c,d,y){var b=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var P=d.stateNode.containerInfo;if(P===y)break;if(w===4)for(w=d.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;P!==null;){if(w=Ts(P),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){d=b=w;continue e}P=P.parentNode}}d=d.return}qa(function(){var te=b,fe=zs(c),ye=[];e:{var se=Ix.get(i);if(se!==void 0){var oe=Ii,Ve=i;switch(i){case"keypress":if(Jr(c)===0)break e;case"keydown":case"keyup":oe=Fu;break;case"focusin":Ve="focus",oe=Wr;break;case"focusout":Ve="blur",oe=Wr;break;case"beforeblur":case"afterblur":oe=Wr;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=S;break;case Nx:case Ax:case kx:oe=Uu;break;case Cx:oe=V;break;case"scroll":case"scrollend":oe=oc;break;case"wheel":oe=re;break;case"copy":case"cut":case"paste":oe=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=sa;break;case"toggle":case"beforetoggle":oe=at}var Ke=(r&4)!==0,Vt=!Ke&&(i==="scroll"||i==="scrollend"),W=Ke?se!==null?se+"Capture":null:se;Ke=[];for(var K=te,ee;K!==null;){var ge=K;if(ee=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ee===null||W===null||(ge=li(K,W),ge!=null&&Ke.push(Oc(K,ge,ee))),Vt)break;K=K.return}0<Ke.length&&(se=new oe(se,Ve,null,c,fe),ye.push({event:se,listeners:Ke}))}}if((r&7)===0){e:{if(se=i==="mouseover"||i==="pointerover",oe=i==="mouseout"||i==="pointerout",se&&c!==ic&&(Ve=c.relatedTarget||c.fromElement)&&(Ts(Ve)||Ve[Us]))break e;if((oe||se)&&(se=fe.window===fe?fe:(se=fe.ownerDocument)?se.defaultView||se.parentWindow:window,oe?(Ve=c.relatedTarget||c.toElement,oe=te,Ve=Ve?Ts(Ve):null,Ve!==null&&(Vt=l(Ve),Ke=Ve.tag,Ve!==Vt||Ke!==5&&Ke!==27&&Ke!==6)&&(Ve=null)):(oe=null,Ve=te),oe!==Ve)){if(Ke=lc,ge="onMouseLeave",W="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&(Ke=sa,ge="onPointerLeave",W="onPointerEnter",K="pointer"),Vt=oe==null?se:Mn(oe),ee=Ve==null?se:Mn(Ve),se=new Ke(ge,K+"leave",oe,c,fe),se.target=Vt,se.relatedTarget=ee,ge=null,Ts(fe)===te&&(Ke=new Ke(W,K+"enter",Ve,c,fe),Ke.target=ee,Ke.relatedTarget=Vt,ge=Ke),Vt=ge,oe&&Ve)t:{for(Ke=Tk,W=oe,K=Ve,ee=0,ge=W;ge;ge=Ke(ge))ee++;ge=0;for(var ze=K;ze;ze=Ke(ze))ge++;for(;0<ee-ge;)W=Ke(W),ee--;for(;0<ge-ee;)K=Ke(K),ge--;for(;ee--;){if(W===K||K!==null&&W===K.alternate){Ke=W;break t}W=Ke(W),K=Ke(K)}Ke=null}else Ke=null;oe!==null&&Xv(ye,se,oe,Ke,!1),Ve!==null&&Vt!==null&&Xv(ye,Vt,Ve,Ke,!0)}}e:{if(se=te?Mn(te):window,oe=se.nodeName&&se.nodeName.toLowerCase(),oe==="select"||oe==="input"&&se.type==="file")var wt=px;else if(fx(se))if(gx)wt=DA;else{wt=RA;var Ge=IA}else oe=se.nodeName,!oe||oe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&za(te.elementType)&&(wt=px):wt=MA;if(wt&&(wt=wt(i,te))){mx(ye,wt,c,fe);break e}Ge&&Ge(i,se,te),i==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&yn(se,"number",se.value)}switch(Ge=te?Mn(te):window,i){case"focusin":(fx(Ge)||Ge.contentEditable==="true")&&($o=Ge,Ff=te,fc=null);break;case"focusout":fc=Ff=$o=null;break;case"mousedown":qf=!0;break;case"contextmenu":case"mouseup":case"dragend":qf=!1,Ex(ye,c,fe);break;case"selectionchange":if(jA)break;case"keydown":case"keyup":Ex(ye,c,fe)}var ot;if(Ct)e:{switch(i){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Ko?Xr(i,c)&&(xt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(xt="onCompositionStart");xt&&(Di&&c.locale!=="ko"&&(Ko||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Ko&&(ot=rc()):(Ci=fe,ac="value"in Ci?Ci.value:Ci.textContent,Ko=!0)),Ge=Pd(te,xt),0<Ge.length&&(xt=new Mi(xt,i,null,c,fe),ye.push({event:xt,listeners:Ge}),ot?xt.data=ot:(ot=qo(c),ot!==null&&(xt.data=ot)))),(ot=Fs?NA(i,c):AA(i,c))&&(xt=Pd(te,"onBeforeInput"),0<xt.length&&(Ge=new Mi("onBeforeInput","beforeinput",null,c,fe),ye.push({event:Ge,listeners:xt}),Ge.data=ot)),yk(ye,i,te,c,fe)}Qv(ye,r)})}function Oc(i,r,c){return{instance:i,listener:r,currentTarget:c}}function Pd(i,r){for(var c=r+"Capture",d=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=li(i,c),y!=null&&d.unshift(Oc(i,y,b)),y=li(i,r),y!=null&&d.push(Oc(i,y,b))),i.tag===3)return d;i=i.return}return[]}function Tk(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Xv(i,r,c,d,y){for(var b=r._reactName,w=[];c!==null&&c!==d;){var P=c,F=P.alternate,te=P.stateNode;if(P=P.tag,F!==null&&F===d)break;P!==5&&P!==26&&P!==27||te===null||(F=te,y?(te=li(c,b),te!=null&&w.unshift(Oc(c,te,F))):y||(te=li(c,b),te!=null&&w.push(Oc(c,te,F)))),c=c.return}w.length!==0&&i.push({event:r,listeners:w})}var Sk=/\r\n?/g,Ek=/\u0000|\uFFFD/g;function Zv(i){return(typeof i=="string"?i:""+i).replace(Sk,`
`).replace(Ek,"")}function eb(i,r){return r=Zv(r),Zv(i)===r}function Ot(i,r,c,d,y,b){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Cn(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Cn(i,""+d);break;case"className":Be(i,"class",d);break;case"tabIndex":Be(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Be(i,c,d);break;case"style":Ga(i,d,b);break;case"data":if(r!=="object"){Be(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Bo(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&Ot(i,r,"name",y.name,y,null),Ot(i,r,"formEncType",y.formEncType,y,null),Ot(i,r,"formMethod",y.formMethod,y,null),Ot(i,r,"formTarget",y.formTarget,y,null)):(Ot(i,r,"encType",y.encType,y,null),Ot(i,r,"method",y.method,y,null),Ot(i,r,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Bo(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=oi);break;case"onScroll":d!=null&&mt("scroll",i);break;case"onScrollEnd":d!=null&&mt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=Bo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":mt("beforetoggle",i),mt("toggle",i),Oe(i,"popover",d);break;case"xlinkActuate":we(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":we(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":we(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":we(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":we(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":we(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":we(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":we(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":we(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Oe(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Pu.get(c)||c,Oe(i,c,d))}}function g0(i,r,c,d,y,b){switch(c){case"style":Ga(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?Cn(i,d):(typeof d=="number"||typeof d=="bigint")&&Cn(i,""+d);break;case"onScroll":d!=null&&mt("scroll",i);break;case"onScrollEnd":d!=null&&mt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fr.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),r=c.slice(2,y?c.length-7:void 0),b=i[gn]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(r,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,d,y);break e}c in i?i[c]=d:d===!0?i.setAttribute(c,""):Oe(i,c,d)}}}function Fn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",i),mt("load",i);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ot(i,r,b,w,c,null)}}y&&Ot(i,r,"srcSet",c.srcSet,c,null),d&&Ot(i,r,"src",c.src,c,null);return;case"input":mt("invalid",i);var P=b=w=y=null,F=null,te=null;for(d in c)if(c.hasOwnProperty(d)){var fe=c[d];if(fe!=null)switch(d){case"name":y=fe;break;case"type":w=fe;break;case"checked":F=fe;break;case"defaultChecked":te=fe;break;case"value":b=fe;break;case"defaultValue":P=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,r));break;default:Ot(i,r,d,fe,c,null)}}Dn(i,b,P,F,te,w,y,!1);return;case"select":mt("invalid",i),d=w=b=null;for(y in c)if(c.hasOwnProperty(y)&&(P=c[y],P!=null))switch(y){case"value":b=P;break;case"defaultValue":w=P;break;case"multiple":d=P;default:Ot(i,r,y,P,c,null)}r=b,c=w,i.multiple=!!d,r!=null?kn(i,!!d,r,!1):c!=null&&kn(i,!!d,c,!0);return;case"textarea":mt("invalid",i),b=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(P=c[w],P!=null))switch(w){case"value":d=P;break;case"defaultValue":y=P;break;case"children":b=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:Ot(i,r,w,P,c,null)}Gs(i,d,y,b);return;case"option":for(F in c)if(c.hasOwnProperty(F)&&(d=c[F],d!=null))switch(F){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ot(i,r,F,d,c,null)}return;case"dialog":mt("beforetoggle",i),mt("toggle",i),mt("cancel",i),mt("close",i);break;case"iframe":case"object":mt("load",i);break;case"video":case"audio":for(d=0;d<Uc.length;d++)mt(Uc[d],i);break;case"image":mt("error",i),mt("load",i);break;case"details":mt("toggle",i);break;case"embed":case"source":case"link":mt("error",i),mt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(d=c[te],d!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ot(i,r,te,d,c,null)}return;default:if(za(r)){for(fe in c)c.hasOwnProperty(fe)&&(d=c[fe],d!==void 0&&g0(i,r,fe,d,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(d=c[P],d!=null&&Ot(i,r,P,d,c,null))}function wk(i,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,w=null,P=null,F=null,te=null,fe=null;for(oe in c){var ye=c[oe];if(c.hasOwnProperty(oe)&&ye!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":F=ye;default:d.hasOwnProperty(oe)||Ot(i,r,oe,null,d,ye)}}for(var se in d){var oe=d[se];if(ye=c[se],d.hasOwnProperty(se)&&(oe!=null||ye!=null))switch(se){case"type":b=oe;break;case"name":y=oe;break;case"checked":te=oe;break;case"defaultChecked":fe=oe;break;case"value":w=oe;break;case"defaultValue":P=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,r));break;default:oe!==ye&&Ot(i,r,se,oe,d,ye)}}xn(i,w,P,F,te,fe,b,y);return;case"select":oe=w=P=se=null;for(b in c)if(F=c[b],c.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":oe=F;default:d.hasOwnProperty(b)||Ot(i,r,b,null,d,F)}for(y in d)if(b=d[y],F=c[y],d.hasOwnProperty(y)&&(b!=null||F!=null))switch(y){case"value":se=b;break;case"defaultValue":P=b;break;case"multiple":w=b;default:b!==F&&Ot(i,r,y,b,d,F)}r=P,c=w,d=oe,se!=null?kn(i,!!c,se,!1):!!d!=!!c&&(r!=null?kn(i,!!c,r,!0):kn(i,!!c,c?[]:"",!1));return;case"textarea":oe=se=null;for(P in c)if(y=c[P],c.hasOwnProperty(P)&&y!=null&&!d.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ot(i,r,P,null,d,y)}for(w in d)if(y=d[w],b=c[w],d.hasOwnProperty(w)&&(y!=null||b!=null))switch(w){case"value":se=y;break;case"defaultValue":oe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==b&&Ot(i,r,w,y,d,b)}Ni(i,se,oe);return;case"option":for(var Ve in c)if(se=c[Ve],c.hasOwnProperty(Ve)&&se!=null&&!d.hasOwnProperty(Ve))switch(Ve){case"selected":i.selected=!1;break;default:Ot(i,r,Ve,null,d,se)}for(F in d)if(se=d[F],oe=c[F],d.hasOwnProperty(F)&&se!==oe&&(se!=null||oe!=null))switch(F){case"selected":i.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Ot(i,r,F,se,d,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in c)se=c[Ke],c.hasOwnProperty(Ke)&&se!=null&&!d.hasOwnProperty(Ke)&&Ot(i,r,Ke,null,d,se);for(te in d)if(se=d[te],oe=c[te],d.hasOwnProperty(te)&&se!==oe&&(se!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:Ot(i,r,te,se,d,oe)}return;default:if(za(r)){for(var Vt in c)se=c[Vt],c.hasOwnProperty(Vt)&&se!==void 0&&!d.hasOwnProperty(Vt)&&g0(i,r,Vt,void 0,d,se);for(fe in d)se=d[fe],oe=c[fe],!d.hasOwnProperty(fe)||se===oe||se===void 0&&oe===void 0||g0(i,r,fe,se,d,oe);return}}for(var W in c)se=c[W],c.hasOwnProperty(W)&&se!=null&&!d.hasOwnProperty(W)&&Ot(i,r,W,null,d,se);for(ye in d)se=d[ye],oe=c[ye],!d.hasOwnProperty(ye)||se===oe||se==null&&oe==null||Ot(i,r,ye,se,d,oe)}function tb(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],b=y.transferSize,w=y.initiatorType,P=y.duration;if(b&&P&&tb(w)){for(w=0,P=y.responseEnd,d+=1;d<c.length;d++){var F=c[d],te=F.startTime;if(te>P)break;var fe=F.transferSize,ye=F.initiatorType;fe&&tb(ye)&&(F=F.responseEnd,w+=fe*(F<P?1:(P-te)/(F-te)))}if(--d,r+=8*(b+w)/(y.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var x0=null,y0=null;function jd(i){return i.nodeType===9?i:i.ownerDocument}function nb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sb(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function v0(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var b0=null;function Ak(){var i=window.event;return i&&i.type==="popstate"?i===b0?!1:(b0=i,!0):(b0=null,!1)}var ib=typeof setTimeout=="function"?setTimeout:void 0,kk=typeof clearTimeout=="function"?clearTimeout:void 0,ab=typeof Promise=="function"?Promise:void 0,Ck=typeof queueMicrotask=="function"?queueMicrotask:typeof ab<"u"?function(i){return ab.resolve(null).then(i).catch(Ik)}:ib;function Ik(i){setTimeout(function(){throw i})}function dr(i){return i==="head"}function rb(i,r){var c=r,d=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(y),bl(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Vc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Vc(c);for(var b=c.firstChild;b;){var w=b.nextSibling,P=b.nodeName;b[Os]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=w}}else c==="body"&&Vc(i.ownerDocument.body);c=y}while(c);bl(r)}function ob(i,r){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function _0(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":_0(c),Va(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Rk(i,r,c,d){for(;i.nodeType===1;){var y=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Os])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Ws(i.nextSibling),i===null)break}return null}function Mk(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Ws(i.nextSibling),i===null))return null;return i}function lb(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Ws(i.nextSibling),i===null))return null;return i}function T0(i){return i.data==="$?"||i.data==="$~"}function S0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Dk(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Ws(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var E0=null;function cb(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return Ws(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function ub(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function db(i,r,c){switch(r=jd(c),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Vc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Va(i)}var Xs=new Map,hb=new Set;function Ld(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ya=ie.d;ie.d={f:Pk,r:jk,D:Lk,C:Uk,L:Ok,m:Vk,X:Gk,S:Bk,M:zk};function Pk(){var i=ya.f(),r=Ad();return i||r}function jk(i){var r=An(i);r!==null&&r.tag===5&&r.type==="form"?Cy(r):ya.r(i)}var xl=typeof document>"u"?null:document;function fb(i,r,c){var d=xl;if(d&&typeof r=="string"&&r){var y=St(r);y='link[rel="'+i+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),hb.has(y)||(hb.add(y),i={rel:i,crossOrigin:c,href:r},d.querySelector(y)===null&&(r=d.createElement("link"),Fn(r,"link",i),sn(r),d.head.appendChild(r)))}}function Lk(i){ya.D(i),fb("dns-prefetch",i,null)}function Uk(i,r){ya.C(i,r),fb("preconnect",i,r)}function Ok(i,r,c){ya.L(i,r,c);var d=xl;if(d&&i&&r){var y='link[rel="preload"][as="'+St(r)+'"]';r==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+St(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+St(c.imageSizes)+'"]')):y+='[href="'+St(i)+'"]';var b=y;switch(r){case"style":b=yl(i);break;case"script":b=vl(i)}Xs.has(b)||(i=_({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),Xs.set(b,i),d.querySelector(y)!==null||r==="style"&&d.querySelector(Bc(b))||r==="script"&&d.querySelector(Gc(b))||(r=d.createElement("link"),Fn(r,"link",i),sn(r),d.head.appendChild(r)))}}function Vk(i,r){ya.m(i,r);var c=xl;if(c&&i){var d=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+St(d)+'"][href="'+St(i)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=vl(i)}if(!Xs.has(b)&&(i=_({rel:"modulepreload",href:i},r),Xs.set(b,i),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Gc(b)))return}d=c.createElement("link"),Fn(d,"link",i),sn(d),c.head.appendChild(d)}}}function Bk(i,r,c){ya.S(i,r,c);var d=xl;if(d&&i){var y=Ss(d).hoistableStyles,b=yl(i);r=r||"default";var w=y.get(b);if(!w){var P={loading:0,preload:null};if(w=d.querySelector(Bc(b)))P.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":r},c),(c=Xs.get(b))&&w0(i,c);var F=w=d.createElement("link");sn(F),Fn(F,"link",i),F._p=new Promise(function(te,fe){F.onload=te,F.onerror=fe}),F.addEventListener("load",function(){P.loading|=1}),F.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Ud(w,r,d)}w={type:"stylesheet",instance:w,count:1,state:P},y.set(b,w)}}}function Gk(i,r){ya.X(i,r);var c=xl;if(c&&i){var d=Ss(c).hoistableScripts,y=vl(i),b=d.get(y);b||(b=c.querySelector(Gc(y)),b||(i=_({src:i,async:!0},r),(r=Xs.get(y))&&N0(i,r),b=c.createElement("script"),sn(b),Fn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function zk(i,r){ya.M(i,r);var c=xl;if(c&&i){var d=Ss(c).hoistableScripts,y=vl(i),b=d.get(y);b||(b=c.querySelector(Gc(y)),b||(i=_({src:i,async:!0,type:"module"},r),(r=Xs.get(y))&&N0(i,r),b=c.createElement("script"),sn(b),Fn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function mb(i,r,c,d){var y=(y=ce.current)?Ld(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=yl(c.href),c=Ss(y).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=yl(c.href);var b=Ss(y).hoistableStyles,w=b.get(i);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,w),(b=y.querySelector(Bc(i)))&&!b._p&&(w.instance=b,w.state.loading=5),Xs.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Xs.set(i,c),b||Hk(y,i,c,w.state))),r&&d===null)throw Error(s(528,""));return w}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=vl(c),c=Ss(y).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function yl(i){return'href="'+St(i)+'"'}function Bc(i){return'link[rel="stylesheet"]['+i+"]"}function pb(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function Hk(i,r,c,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Fn(r,"link",c),sn(r),i.head.appendChild(r))}function vl(i){return'[src="'+St(i)+'"]'}function Gc(i){return"script[async]"+i}function gb(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+St(c.href)+'"]');if(d)return r.instance=d,sn(d),d;var y=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),sn(d),Fn(d,"style",y),Ud(d,c.precedence,i),r.instance=d;case"stylesheet":y=yl(c.href);var b=i.querySelector(Bc(y));if(b)return r.state.loading|=4,r.instance=b,sn(b),b;d=pb(c),(y=Xs.get(y))&&w0(d,y),b=(i.ownerDocument||i).createElement("link"),sn(b);var w=b;return w._p=new Promise(function(P,F){w.onload=P,w.onerror=F}),Fn(b,"link",d),r.state.loading|=4,Ud(b,c.precedence,i),r.instance=b;case"script":return b=vl(c.src),(y=i.querySelector(Gc(b)))?(r.instance=y,sn(y),y):(d=c,(y=Xs.get(b))&&(d=_({},c),N0(d,y)),i=i.ownerDocument||i,y=i.createElement("script"),sn(y),Fn(y,"link",d),i.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Ud(d,c.precedence,i));return r.instance}function Ud(i,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,w=0;w<d.length;w++){var P=d[w];if(P.dataset.precedence===r)b=P;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function w0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function N0(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Od=null;function xb(i,r,c){if(Od===null){var d=new Map,y=Od=new Map;y.set(c,d)}else y=Od,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),y=0;y<c.length;y++){var b=c[y];if(!(b[Os]||b[nn]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(r)||"";w=i+w;var P=d.get(w);P?P.push(b):d.set(w,[b])}}return d}function yb(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function Fk(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function vb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function qk(i,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=yl(d.href),b=r.querySelector(Bc(y));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Vd.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=b,sn(b);return}b=r.ownerDocument||r,d=pb(d),(y=Xs.get(y))&&w0(d,y),b=b.createElement("link"),sn(b);var w=b;w._p=new Promise(function(P,F){w.onload=P,w.onerror=F}),Fn(b,"link",d),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Vd.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var A0=0;function Kk(i,r){return i.stylesheets&&i.count===0&&Gd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Gd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&A0===0&&(A0=62500*Nk());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>A0?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function Vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bd=null;function Gd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bd=new Map,r.forEach($k,i),Bd=null,Vd.call(i))}function $k(i,r){if(!(r.state.loading&4)){var c=Bd.get(i);if(c)var d=c.get(null);else{c=new Map,Bd.set(i,c);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var w=y[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=r.instance,w=y.getAttribute("data-precedence"),b=c.get(w)||d,b===d&&c.set(null,y),c.set(w,y),this.count++,d=Vd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),r.state.loading|=4}}var zc={$$typeof:z,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Yk(i,r,c,d,y,b,w,P,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qn(0),this.hiddenUpdates=Qn(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function bb(i,r,c,d,y,b,w,P,F,te,fe,ye){return i=new Yk(i,r,c,w,F,te,fe,ye,P),r=1,b===!0&&(r|=24),b=ws(3,null,null,r),i.current=b,b.stateNode=i,r=rm(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:r},um(b),i}function _b(i){return i?(i=Qo,i):Qo}function Tb(i,r,c,d,y,b){y=_b(y),d.context===null?d.context=y:d.pendingContext=y,d=er(r),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=tr(i,d,r),c!==null&&(ps(c,i,r),bc(c,i,r))}function Sb(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function k0(i,r){Sb(i,r),(i=i.alternate)&&Sb(i,r)}function Eb(i){if(i.tag===13||i.tag===31){var r=to(i,67108864);r!==null&&ps(r,i,67108864),k0(i,67108864)}}function wb(i){if(i.tag===13||i.tag===31){var r=Is();r=ea(r);var c=to(i,r);c!==null&&ps(c,i,r),k0(i,r)}}var zd=!0;function Jk(i,r,c,d){var y=q.T;q.T=null;var b=ie.p;try{ie.p=2,C0(i,r,c,d)}finally{ie.p=b,q.T=y}}function Qk(i,r,c,d){var y=q.T;q.T=null;var b=ie.p;try{ie.p=8,C0(i,r,c,d)}finally{ie.p=b,q.T=y}}function C0(i,r,c,d){if(zd){var y=I0(d);if(y===null)p0(i,r,d,Hd,c),Ab(i,d);else if(Xk(y,i,r,c,d))d.stopPropagation();else if(Ab(i,d),r&4&&-1<Wk.indexOf(i)){for(;y!==null;){var b=An(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=Ls(b.pendingLanes);if(w!==0){var P=b;for(P.pendingLanes|=2,P.entangledLanes|=2;w;){var F=1<<31-zt(w);P.entanglements[1]|=F,w&=~F}Ui(b),(It&6)===0&&(wd=pt()+500,Lc(0))}}break;case 31:case 13:P=to(b,2),P!==null&&ps(P,b,2),Ad(),k0(b,2)}if(b=I0(d),b===null&&p0(i,r,d,Hd,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else p0(i,r,d,null,c)}}function I0(i){return i=zs(i),R0(i)}var Hd=null;function R0(i){if(Hd=null,i=Ts(i),i!==null){var r=l(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=u(r),i!==null)return i;i=null}else if(c===31){if(i=h(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Hd=i,null}function Nb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cn()){case Ps:return 2;case Nn:return 8;case vs:case js:return 32;case Xi:return 268435456;default:return 32}default:return 32}}var M0=!1,hr=null,fr=null,mr=null,Hc=new Map,Fc=new Map,pr=[],Wk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ab(i,r){switch(i){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Hc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(r.pointerId)}}function qc(i,r,c,d,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},r!==null&&(r=An(r),r!==null&&Eb(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),i)}function Xk(i,r,c,d,y){switch(r){case"focusin":return hr=qc(hr,i,r,c,d,y),!0;case"dragenter":return fr=qc(fr,i,r,c,d,y),!0;case"mouseover":return mr=qc(mr,i,r,c,d,y),!0;case"pointerover":var b=y.pointerId;return Hc.set(b,qc(Hc.get(b)||null,i,r,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,Fc.set(b,qc(Fc.get(b)||null,i,r,c,d,y)),!0}return!1}function kb(i){var r=Ts(i.target);if(r!==null){var c=l(r);if(c!==null){if(r=c.tag,r===13){if(r=u(c),r!==null){i.blockedOn=r,bs(i.priority,function(){wb(c)});return}}else if(r===31){if(r=h(c),r!==null){i.blockedOn=r,bs(i.priority,function(){wb(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Fd(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=I0(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);ic=d,c.target.dispatchEvent(d),ic=null}else return r=An(c),r!==null&&Eb(r),i.blockedOn=c,!1;r.shift()}return!0}function Cb(i,r,c){Fd(i)&&c.delete(r)}function Zk(){M0=!1,hr!==null&&Fd(hr)&&(hr=null),fr!==null&&Fd(fr)&&(fr=null),mr!==null&&Fd(mr)&&(mr=null),Hc.forEach(Cb),Fc.forEach(Cb)}function qd(i,r){i.blockedOn===r&&(i.blockedOn=null,M0||(M0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Zk)))}var Kd=null;function Ib(i){Kd!==i&&(Kd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kd===i&&(Kd=null);for(var r=0;r<i.length;r+=3){var c=i[r],d=i[r+1],y=i[r+2];if(typeof d!="function"){if(R0(d||c)===null)continue;break}var b=An(c);b!==null&&(i.splice(r,3),r-=3,Im(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function bl(i){function r(F){return qd(F,i)}hr!==null&&qd(hr,i),fr!==null&&qd(fr,i),mr!==null&&qd(mr,i),Hc.forEach(r),Fc.forEach(r);for(var c=0;c<pr.length;c++){var d=pr[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<pr.length&&(c=pr[0],c.blockedOn===null);)kb(c),c.blockedOn===null&&pr.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],w=y[gn]||null;if(typeof b=="function")w||Ib(c);else if(w){var P=null;if(b&&b.hasAttribute("formAction")){if(y=b,w=b[gn]||null)P=w.formAction;else if(R0(y)!==null)continue}else P=w.action;typeof P=="function"?c[d+1]=P:(c.splice(d,3),d-=3),Ib(c)}}}function Rb(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(w){return y=w})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function D0(i){this._internalRoot=i}$d.prototype.render=D0.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,d=Is();Tb(c,d,i,r,null,null)},$d.prototype.unmount=D0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Tb(i.current,2,null,i,null,null),Ad(),r[Us]=null}};function $d(i){this._internalRoot=i}$d.prototype.unstable_scheduleHydration=function(i){if(i){var r=Lo();i={blockedOn:null,target:i,priority:r};for(var c=0;c<pr.length&&r!==0&&r<pr[c].priority;c++);pr.splice(c,0,i),c===0&&kb(i)}};var Mb=e.version;if(Mb!=="19.2.3")throw Error(s(527,Mb,"19.2.3"));ie.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var e2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{pn=Yd.inject(e2),Xt=Yd}catch{}}return $c.createRoot=function(i,r){if(!a(i))throw Error(s(299));var c=!1,d="",y=Vy,b=By,w=Gy;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=bb(i,1,!1,null,null,c,d,null,y,b,w,Rb),i[Us]=r.current,m0(i),new D0(r)},$c.hydrateRoot=function(i,r,c){if(!a(i))throw Error(s(299));var d=!1,y="",b=Vy,w=By,P=Gy,F=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),r=bb(i,1,!0,r,c??null,d,y,F,b,w,P,Rb),r.context=_b(null),c=r.current,d=Is(),d=ea(d),y=er(d),y.callback=null,tr(c,y,d),c=d,r.current.lanes=c,wi(r,c),Ui(r),i[Us]=r.current,m0(i),new $d(r)},$c.version="19.2.3",$c}var zb;function u2(){if(zb)return L0.exports;zb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),L0.exports=c2(),L0.exports}var d2=u2();const h2=OE(d2);var qe=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(qe||{});const Th="https://files.catbox.moe/02xqjo.png",Hb={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3",levelUp:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pucker.mp3"},Fb=[{level:1,title:"Pemula"},{level:5,title:"Pelajar Tekun"},{level:10,title:"Pejuang UTBK"},{level:20,title:"Ahli Strategi"},{level:30,title:"Master SKD"},{level:50,title:"Grandmaster"},{level:75,title:"Warlord"},{level:100,title:"Legenda Abadi"}],Yi=(n,e,t,s="ASC",a="")=>{const l=["Bronze","Silver","Gold","Platinum","Diamond","Master","Grandmaster","Legend","Godlike","Impossible"];return t.map((u,h)=>h>=l.length?null:{id:`bench_${n.toLowerCase()}_${h+1}`,title:`${n}: ${l[h]}`,description:s==="DESC"?`Capai skor < ${u} ${a}`:`Capai skor > ${u} ${a}`,icon:e,xpReward:(h+1)*100,condition:p=>{var f,v,_,T,E;return((f=p[0])==null?void 0:f.category)==="BENCHMARK"&&((_=(v=p[0])==null?void 0:v.details)==null?void 0:_.game)===n&&(s==="DESC"?((T=p[0])==null?void 0:T.score)<=u:((E=p[0])==null?void 0:E.score)>=u)}}).filter(u=>u!==null)},f2=(n,e,t="Star")=>({id:`level_${n}`,title:`Level ${n}`,description:`Mencapai Level ${n}`,icon:t,xpReward:e,condition:(s,a)=>a.level>=n}),m2=(n,e)=>({id:`streak_${n}`,title:`Konsisten ${n} Hari`,description:`Login ${n} hari berturut-turut.`,icon:"Flame",xpReward:e,condition:(t,s)=>s.streak>=n}),p2=(n,e)=>({id:`total_tests_${n}`,title:`Veteran ${n}`,description:`Menyelesaikan total ${n} tes.`,icon:"Layers",xpReward:e,condition:t=>t.length>=n}),Ji=(n,e,t,s,a="Award",l)=>({id:`${n}_${t}`,title:`${l?l.toUpperCase():e} ${t}+`,description:`Mencapai skor ${l?l.toUpperCase():"Total"} > ${t} di ${e}.`,icon:a,xpReward:s,condition:u=>{var h,p,f,v;return((h=u[0])==null?void 0:h.category)===e&&(l?((f=(p=u[0])==null?void 0:p.details)==null?void 0:f[l])>=t:((v=u[0])==null?void 0:v.score)>=t)}}),g2=Yi("REACTION","Zap",[400,350,300,275,250,225,200,180,160,150],"DESC","ms"),x2=Yi("AIM","Target",[600,550,500,450,400,350,300,250,220,200],"DESC","ms"),y2=Yi("SEQUENCE","Grid",[5,8,10,12,15,18,20,25,30,40],"ASC"),v2=Yi("CHIMP","Brain",[7,9,11,13,15,18,21,25,30,40],"ASC"),b2=Yi("VISUAL","Eye",[5,7,9,11,13,15,17,20,25,30],"ASC"),_2=Yi("NUMBER","Hash",[5,7,9,11,13,15,18,22,30,50],"ASC"),T2=Yi("VERBAL","Book",[10,20,30,40,50,70,100,150,200,300],"ASC"),S2=Yi("TYPING","FileText",[30,40,50,60,70,80,90,100,120,140],"ASC","WPM"),E2=Yi("BRIDGE","Map",[5,8,12,15,20,25,30,40,50,60],"ASC"),w2=Yi("MATCH","Copy",[3,5,8,10,15,20,25,30,40,50],"ASC"),N2=[300,350,375,400,425,450,475,500,525].map(n=>Ji("skd_tot","SKD",n,n,"Briefcase")),A2=Ji("skd_max","SKD",550,5e3,"Crown"),k2=[100,110,120,130,140,150].map(n=>Ji("skd_twk","SKD",n,n,"Book","twk")),C2=[100,120,130,140,150,160,175].map(n=>Ji("skd_tiu","SKD",n,n,"Brain","tiu")),I2=[180,190,200,210,220,225].map(n=>Ji("skd_tkp","SKD",n,n,"Users","tkp")),R2=[500,600,650,700,750,800,850,900].map(n=>Ji("utbk_avg","UTBK",n,n,"GraduationCap","average")),M2=Ji("utbk_max","UTBK",1e3,5e3,"Crown","average"),D2=["pu","ppu","pbm","pk","lbi","lbe","pm"],P2=D2.flatMap(n=>[700,800,900,1e3].map(e=>Ji(`utbk_${n}`,"UTBK",e,Math.round(e/2),"FileText",n))),j2=[150,200,220,240,260].map(n=>Ji("tpa_tot","TPA",n,n,"Zap")),L2=Ji("tpa_max","TPA",280,2500,"Crown"),U2=Array.from({length:20},(n,e)=>(e+1)*5),O2=U2.map(n=>f2(n,n*50)),V2=[3,7,14,21,30,60,90,100,150,200,365],B2=V2.map(n=>m2(n,n*20)),G2=[1,5,10,25,50,75,100,150,200,300,400,500,1e3],z2=G2.map(n=>p2(n,n*10)),H2=[{id:"pauli_speed_30",title:"Pauli Speed 30",description:"Kecepatan > 30/menit.",icon:"Activity",xpReward:100,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=30}},{id:"pauli_speed_40",title:"Pauli Speed 40",description:"Kecepatan > 40/menit.",icon:"Activity",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=40}},{id:"pauli_speed_50",title:"Pauli Speed 50",description:"Kecepatan > 50/menit.",icon:"Activity",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=50}},{id:"pauli_speed_60",title:"Human Calculator",description:"Pauli Speed > 60/menit.",icon:"Activity",xpReward:1e3,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.speedPerMinute)>=60}},{id:"pauli_perfect",title:"Teliti Banget",description:"Akurasi 100% di Tes Koran.",icon:"CheckCircle",xpReward:500,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="PSIKOTEST"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_acc_100",title:"Mata Elang",description:"Akurasi 100% Kecermatan.",icon:"Eye",xpReward:200,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100}},{id:"kecer_speed_40",title:"Cepat & Tepat",description:"Speed > 40 & Akurasi > 95%.",icon:"Zap",xpReward:300,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.averageSpeed)>=40&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.accuracy)>=95}},{id:"kecer_god",title:"Mata Dewa",description:"Kecermatan Akurasi 100% & Speed > 50.",icon:"Eye",xpReward:1e3,condition:n=>{var e,t,s,a,l;return((e=n[0])==null?void 0:e.category)==="KECERMATAN"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.accuracy)===100&&((l=(a=n[0])==null?void 0:a.details)==null?void 0:l.averageSpeed)>=50}},{id:"night_owl",title:"Night Owl",description:"Belajar di atas jam 10 malam.",icon:"Moon",xpReward:50,condition:n=>n.length>0&&(new Date(n[0].date).getHours()>=22||new Date(n[0].date).getHours()<4)},{id:"early_bird",title:"Early Bird",description:"Belajar sebelum jam 6 pagi.",icon:"Sun",xpReward:50,condition:n=>n.length>0&&new Date(n[0].date).getHours()>=4&&new Date(n[0].date).getHours()<6},{id:"weekend_warrior",title:"Weekend Warrior",description:"Belajar di hari Sabtu/Minggu.",icon:"Coffee",xpReward:100,condition:n=>{const e=new Date,t=e.getDay();return(t===0||t===6)&&n.length>0&&new Date(n[0].date).getDate()===e.getDate()}},{id:"lunch_break",title:"Lunch Break",description:"Belajar jam 12:00-13:00.",icon:"Sun",xpReward:100,condition:n=>new Date().getHours()===12&&n.length>0},{id:"first_step",title:"Langkah Pertama",description:"Menyelesaikan tes pertama Anda.",icon:"Footprints",xpReward:50,condition:n=>n.length>=1},{id:"skd_pass",title:"Lulus SKD",description:"Lulus Passing Grade SKD.",icon:"Briefcase",xpReward:300,condition:n=>{var e,t,s;return((e=n[0])==null?void 0:e.category)==="SKD"&&((s=(t=n[0])==null?void 0:t.details)==null?void 0:s.passed)}}],sp=[...g2,...x2,...y2,...v2,...b2,..._2,...T2,...S2,...E2,...w2,...N2,A2,...k2,...C2,...I2,...R2,M2,...P2,...j2,L2,...O2,...B2,...z2,...H2],qb=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],ip=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"Seleksi Lanjutan I",desc:"TPA, TBI, & Psikotes Kedinasan"},{id:"PSIKOTEST",name:"Tes Koran & IQ",desc:"IQ, Koran/Pauli, & Kognitif"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],F2=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],q2=["Penalaran Umum","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],K2=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],$2=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],Y2=["TIU - Verbal & Numerik","TIU - Logika (Silogisme/Analitis)","Tes Logika Gambar (Abstrak)","Tes Kepribadian (EPPS/Sikap Kerja)"],J2=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],Q2=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],Kb=[],$b=[],Yb=[],Jb=[],Qb=[],Wb=[],Xb=[],Zb=[],Oi=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var W2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let X2,Z2;function eC(){return{geminiUrl:X2,vertexUrl:Z2}}function tC(n,e,t,s){var a,l;if(!(n!=null&&n.baseUrl)){const u=eC();return e?(a=u.vertexUrl)!==null&&a!==void 0?a:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ra{}function Re(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const h=u.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[h])){const p=n[h];if(Array.isArray(t))for(let f=0;f<p.length;f++){const v=p[f];g(v,e.slice(l+1),t[f])}else for(const f of p)g(f,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const h=u.slice(0,-3);h in n||(n[h]=[{}]);const p=n[h];g(p[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function m(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(h=>m(h,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function nC(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),l=s.split("."),u=new Set;let h=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){h=p;break}if(h!==-1&&l.length>h)for(let p=h;p<l.length;p++){const f=l[p];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&u.add(f)}ap(n,a,l,0,u)}}function ap(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),h=n;if(u in h&&Array.isArray(h[u]))for(const p of h[u])ap(p,e,t,s+1,a)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,h=Object.keys(u).filter(f=>!f.startsWith("_")&&!a.has(f)),p={};for(const f of h)p[f]=u[f];for(const[f,v]of Object.entries(p)){const _=[];for(const T of t.slice(s))T==="*"?_.push(f):_.push(T);g(u,_,v)}for(const f of h)delete u[f]}}else{const u=n;l in u&&ap(u[l],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sC(n){const e={},t=m(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=m(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function iC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],rC(u)),e}function aC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],oC(u)),e}function rC(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>lC(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function oC(n){const e={},t=m(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>cC(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function lC(n){const e={},t=m(n,["video"]);return t!=null&&g(e,["video"],pC(t)),e}function cC(n){const e={},t=m(n,["_self"]);return t!=null&&g(e,["video"],gC(t)),e}function uC(n){const e={},t=m(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function dC(n){const e={},t=m(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function hC(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],fC(u)),e}function fC(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function BE(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],mC(u)),e}function mC(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function pC(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Qp(s));const a=m(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function gC(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Qp(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var e_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(e_||(e_={}));var t_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(t_||(t_={}));var n_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(n_||(n_={}));var ke;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ke||(ke={}));var s_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(s_||(s_={}));var i_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(i_||(i_={}));var a_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(a_||(a_={}));var r_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(r_||(r_={}));var o_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(o_||(o_={}));var l_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(l_||(l_={}));var c_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(c_||(c_={}));var u_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(u_||(u_={}));var d_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(d_||(d_={}));var h_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(h_||(h_={}));var f_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(f_||(f_={}));var m_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(m_||(m_={}));var p_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(p_||(p_={}));var g_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(g_||(g_={}));var x_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(x_||(x_={}));var y_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(y_||(y_={}));var v_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(v_||(v_={}));var Sh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Sh||(Sh={}));var b_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(b_||(b_={}));var __;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(__||(__={}));var T_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(T_||(T_={}));var rp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rp||(rp={}));var S_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(S_||(S_={}));var E_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(E_||(E_={}));var w_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(w_||(w_={}));var N_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(N_||(N_={}));var A_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(A_||(A_={}));var k_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(k_||(k_={}));var C_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(C_||(C_={}));var I_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(I_||(I_={}));var R_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(R_||(R_={}));var M_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(M_||(M_={}));var D_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(D_||(D_={}));var P_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(P_||(P_={}));var j_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(j_||(j_={}));var L_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(L_||(L_={}));var U_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(U_||(U_={}));var O_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(O_||(O_={}));var V_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(V_||(V_={}));var B_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(B_||(B_={}));var G_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(G_||(G_={}));var z_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(z_||(z_={}));var H_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(H_||(H_={}));var F_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(F_||(F_={}));var q_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(q_||(q_={}));var K_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(K_||(K_={}));var $_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})($_||($_={}));var Y_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Y_||(Y_={}));var J_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(J_||(J_={}));var Q_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Q_||(Q_={}));var Al;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Al||(Al={}));class op{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Yc{get text(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",v=!1;const _=[];for(const T of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[E,I]of Object.entries(T))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(I!==null||I!==void 0)&&_.push(E);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,f+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?f:void 0}get data(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const v=[];for(const _ of(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)!==null&&p!==void 0?p:[]){for(const[T,E]of Object.entries(_))T!=="inlineData"&&(E!==null||E!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(f+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,s,a,l,u,h,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,s,a,l,u,h,p,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(f=v==null?void 0:v[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,s,a,l,u,h,p,f;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(h=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||h===void 0?void 0:h.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(f=v==null?void 0:v[0])===null||f===void 0?void 0:f.output}}class W_{}class X_{}class xC{}class yC{}class vC{}class bC{}class Z_{}class eT{}class tT{}class _C{}class Eh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Eh;let a;const l=e;return t?a=aC(l):a=iC(l),Object.assign(s,a),s}}class nT{}class sT{}class iT{}class aT{}class TC{}class SC{}class EC{}class Wp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Wp,l=hC(e);return Object.assign(s,l),s}}class wC{}class NC{}class AC{}class rT{}class kC{get text(){var e,t,s;let a="",l=!1;const u=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,f]of Object.entries(h))p!=="text"&&p!=="thought"&&f!==null&&u.push(p);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,t,s;let a="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,p]of Object.entries(u))h!=="inlineData"&&p!==null&&l.push(h);u.inlineData&&typeof u.inlineData.data=="string"&&(a+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class CC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Xp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Xp,l=BE(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function GE(n,e){const t=At(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zE(n){return Array.isArray(n)?n.map(e=>wh(e)):[wh(n)]}function wh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function HE(n){const e=wh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FE(n){const e=wh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function oT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function qE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>oT(e)):[oT(n)]}function lp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function lT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function cT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ts(n){if(n==null)throw new Error("ContentUnion is required");return lp(n)?n:{role:"user",parts:qE(n)}}function Zp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=ts(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=ts(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ts(t)):[ts(e)]}function ei(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(lT(n)||cT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ts(n)]}const e=[],t=[],s=lp(n[0]);for(const a of n){const l=lp(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(lT(a)||cT(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:qE(t)}),e}function IC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(ke).includes(t[0].toUpperCase())?t[0].toUpperCase():ke.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(ke).includes(s.toUpperCase())?s.toUpperCase():ke.TYPE_UNSPECIFIED})}}function Cl(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&IC(n.type,e);for(const[u,h]of Object.entries(n))if(h!=null)if(u=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(ke).includes(h.toUpperCase())?h.toUpperCase():ke.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Cl(h);else if(s.includes(u)){const p=[];for(const f of h){if(f.type=="null"){e.nullable=!0;continue}p.push(Cl(f))}e[u]=p}else if(a.includes(u)){const p={};for(const[f,v]of Object.entries(h))p[f]=Cl(v);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=h}return e}function eg(n){return Cl(n)}function tg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ng(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ql(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Cl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Cl(e.response));return n}function Kl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function RC(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function Ma(n,e){if(typeof e!="string")throw new Error("name must be a string");return RC(n,e,"cachedContents")}function KE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Lr(n){return Qp(n)}function MC(n){return n!=null&&typeof n=="object"&&"name"in n}function DC(n){return n!=null&&typeof n=="object"&&"video"in n}function PC(n){return n!=null&&typeof n=="object"&&"uri"in n}function $E(n){var e;let t;if(MC(n)&&(t=n.name),!(PC(n)&&(t=n.uri,t===void 0))&&!(DC(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function YE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function JE(n){for(const e of["models","tunedModels","publisherModels"])if(jC(n,e))return n[e];return[]}function jC(n,e){return n!==null&&typeof n=="object"&&e in n}function LC(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function UC(n,e={}){const t=[],s=new Set;for(const a of n){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=LC(a,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function QE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function OC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function WE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let l=!1;for(const u of a){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function $l(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function XE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VC(n){const e={},t=m(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=m(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>vI(u))),g(e,["inlinedResponses"],l)}const a=m(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["inlinedEmbedContentResponses"],l)}return e}function BC(n){const e={},t=m(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=m(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=m(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function GC(n){const e={},t=m(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=m(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=m(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function lh(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["metadata","state"]);a!=null&&g(e,["state"],XE(a));const l=m(n,["metadata","createTime"]);l!=null&&g(e,["createTime"],l);const u=m(n,["metadata","endTime"]);u!=null&&g(e,["endTime"],u);const h=m(n,["metadata","updateTime"]);h!=null&&g(e,["updateTime"],h);const p=m(n,["metadata","model"]);p!=null&&g(e,["model"],p);const f=m(n,["metadata","output"]);return f!=null&&g(e,["dest"],VC(WE(f))),e}function cp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["state"]);a!=null&&g(e,["state"],XE(a));const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["createTime"]);u!=null&&g(e,["createTime"],u);const h=m(n,["startTime"]);h!=null&&g(e,["startTime"],h);const p=m(n,["endTime"]);p!=null&&g(e,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(e,["updateTime"],f);const v=m(n,["model"]);v!=null&&g(e,["model"],v);const _=m(n,["inputConfig"]);_!=null&&g(e,["src"],zC(_));const T=m(n,["outputConfig"]);T!=null&&g(e,["dest"],BC(WE(T)));const E=m(n,["completionStats"]);return E!=null&&g(e,["completionStats"],E),e}function zC(n){const e={},t=m(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=m(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=m(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function HC(n,e){const t={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=m(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=m(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>yI(n,u))),g(t,["requests","requests"],l)}return t}function FC(n){const e={},t=m(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=m(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=m(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qC(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function KC(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],$l(n,s)),t}function $C(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],$l(n,s)),t}function YC(n){const e={},t=m(n,["content"]);t!=null&&g(e,["content"],t);const s=m(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],JC(s));const a=m(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=m(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=m(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=m(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=m(n,["index"]);p!=null&&g(e,["index"],p);const f=m(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const v=m(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=m(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function JC(n){const e={},t=m(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function ZE(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>NI(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function QC(n,e){const t={},s=m(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),m(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function WC(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],GC(OC(a))),t}function uT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["src"]);a!=null&&g(t,["batch","inputConfig"],HC(n,QE(n,a)));const l=m(e,["config"]);return l!=null&&QC(l,t),t}function XC(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],At(n,s));const a=m(e,["src"]);a!=null&&g(t,["inputConfig"],FC(QE(n,a)));const l=m(e,["config"]);return l!=null&&WC(l,t),t}function ZC(n,e){const t={},s=m(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function eI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["src"]);a!=null&&g(t,["batch","inputConfig"],oI(n,a));const l=m(e,["config"]);return l!=null&&ZC(l,t),t}function tI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],$l(n,s)),t}function nI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],$l(n,s)),t}function sI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);return l!=null&&g(e,["error"],l),e}function iI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);return l!=null&&g(e,["error"],l),e}function aI(n,e){const t={},s=m(e,["contents"]);if(s!=null){let l=Zp(n,s);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["requests[]","request","content"],l)}const a=m(e,["config"]);return a!=null&&(g(t,["_self"],rI(a,t)),nC(t,{"requests[].*":"requests[].request.*"})),t}function rI(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=m(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function oI(n,e){const t={},s=m(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=m(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],aI(n,a)),t}function lI(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function cI(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uI(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dI(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],ZE(ts(a)));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const v=m(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const I=m(e,["frequencyPenalty"]);I!=null&&g(s,["frequencyPenalty"],I);const k=m(e,["seed"]);k!=null&&g(s,["seed"],k);const C=m(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const j=m(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],eg(j));const R=m(e,["responseJsonSchema"]);if(R!=null&&g(s,["responseJsonSchema"],R),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=m(e,["safetySettings"]);if(t!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(Te=>AI(Te))),g(t,["safetySettings"],U)}const $=m(e,["tools"]);if(t!==void 0&&$!=null){let U=Kl($);Array.isArray(U)&&(U=U.map(Te=>CI(ql(Te)))),g(t,["tools"],U)}const J=m(e,["toolConfig"]);if(t!==void 0&&J!=null&&g(t,["toolConfig"],kI(J)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=m(e,["cachedContent"]);t!==void 0&&Y!=null&&g(t,["cachedContent"],Ma(n,Y));const D=m(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const M=m(e,["speechConfig"]);if(M!=null&&g(s,["speechConfig"],tg(M)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=m(e,["thinkingConfig"]);L!=null&&g(s,["thinkingConfig"],L);const O=m(e,["imageConfig"]);O!=null&&g(s,["imageConfig"],xI(O));const B=m(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function hI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>YC(f))),g(e,["candidates"],p)}const a=m(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=m(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=m(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=m(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function fI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],$l(n,s)),t}function mI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],$l(n,s)),t}function pI(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function gI(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function xI(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["request","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let h=ei(a);Array.isArray(h)&&(h=h.map(p=>ZE(p))),g(t,["request","contents"],h)}const l=m(e,["metadata"]);l!=null&&g(t,["metadata"],l);const u=m(e,["config"]);return u!=null&&g(t,["request","generationConfig"],dI(n,u,m(t,["request"],{}))),t}function vI(n){const e={},t=m(n,["response"]);t!=null&&g(e,["response"],hI(t));const s=m(n,["error"]);return s!=null&&g(e,["error"],s),e}function bI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),m(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function _I(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=m(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),t}function TI(n){const e={},t=m(n,["config"]);return t!=null&&bI(t,e),e}function SI(n){const e={},t=m(n,["config"]);return t!=null&&_I(t,e),e}function EI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>lh(u))),g(e,["batchJobs"],l)}return e}function wI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>cp(u))),g(e,["batchJobs"],l)}return e}function NI(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],lI(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],cI(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],qC(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const v=m(n,["thought"]);v!=null&&g(e,["thought"],v);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function AI(n){const e={},t=m(n,["category"]);if(t!=null&&g(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function kI(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],uI(s)),e}function CI(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],pI(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],gI(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sa;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Sa||(Sa={}));class Ro{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(a=u.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class II extends Ra{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Sa.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=uT(this.apiClient,e),s=t._url,a=Re("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,p=h.requests,f=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const E=_.request;E.systemInstruction=T,_.request=E}f.push(_)}return h.requests=f,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(u)s.dest=`${u}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=XC(this.apiClient,e);return h=Re("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>cp(v))}else{const f=uT(this.apiClient,e);return h=Re("{model}:batchGenerateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>lh(v))}}async createEmbeddingsInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=eI(this.apiClient,e);return l=Re("{model}:asyncBatchEmbedContent",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>lh(p))}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=mI(this.apiClient,e);return h=Re("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>cp(v))}else{const f=fI(this.apiClient,e);return h=Re("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>lh(v))}}async cancel(e){var t,s,a,l;let u="",h={};if(this.apiClient.isVertexAI()){const p=$C(this.apiClient,e);u=Re("batchPredictionJobs/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=KC(this.apiClient,e);u=Re("batches/{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=SI(e);return h=Re("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=wI(v),T=new rT;return Object.assign(T,_),T})}else{const f=TI(e);return h=Re("batches",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=EI(v),T=new rT;return Object.assign(T,_),T})}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=nI(this.apiClient,e);return h=Re("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>iI(v))}else{const f=tI(this.apiClient,e);return h=Re("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>sI(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RI(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function dT(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>eR(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function MI(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=m(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=m(n,["contents"]);if(e!==void 0&&u!=null){let v=ei(u);Array.isArray(v)&&(v=v.map(_=>dT(_))),g(e,["contents"],v)}const h=m(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],dT(ts(h)));const p=m(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>nR(_))),g(e,["tools"],v)}const f=m(n,["toolConfig"]);if(e!==void 0&&f!=null&&g(e,["toolConfig"],tR(f)),m(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function DI(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const l=m(n,["displayName"]);e!==void 0&&l!=null&&g(e,["displayName"],l);const u=m(n,["contents"]);if(e!==void 0&&u!=null){let _=ei(u);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const h=m(n,["systemInstruction"]);e!==void 0&&h!=null&&g(e,["systemInstruction"],ts(h));const p=m(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>sR(T))),g(e,["tools"],_)}const f=m(n,["toolConfig"]);e!==void 0&&f!=null&&g(e,["toolConfig"],f);const v=m(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function PI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],GE(n,s));const a=m(e,["config"]);return a!=null&&MI(a,t),t}function jI(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["model"],GE(n,s));const a=m(e,["config"]);return a!=null&&DI(a,t),t}function LI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function UI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function OI(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function VI(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function BI(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function GI(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zI(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HI(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function FI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function qI(n,e){const t={},s=m(e,["name"]);return s!=null&&g(t,["_url","name"],Ma(n,s)),t}function KI(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function $I(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function YI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function JI(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function QI(n){const e={},t=m(n,["config"]);return t!=null&&YI(t,e),e}function WI(n){const e={},t=m(n,["config"]);return t!=null&&JI(t,e),e}function XI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function ZI(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["cachedContents"],l)}return e}function eR(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],BI(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],GI(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],RI(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const v=m(n,["thought"]);v!=null&&g(e,["thought"],v);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function tR(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],zI(s)),e}function nR(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],KI(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],$I(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function sR(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>HI(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const v=m(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function iR(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function aR(n,e){const t={},s=m(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=m(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function rR(n,e){const t={},s=m(e,["name"]);s!=null&&g(t,["_url","name"],Ma(n,s));const a=m(e,["config"]);return a!=null&&iR(a,t),t}function oR(n,e){const t={},s=m(e,["name"]);s!=null&&g(t,["_url","name"],Ma(n,s));const a=m(e,["config"]);return a!=null&&aR(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lR extends Ra{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Sa.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=jI(this.apiClient,e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const f=PI(this.apiClient,e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=qI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const f=FI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=UI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=VI(v),T=new iT;return Object.assign(T,_),T})}else{const f=LI(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=OI(v),T=new iT;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=oR(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const f=rR(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=WI(e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=ZI(v),T=new aT;return Object.assign(T,_),T})}else{const f=QI(e);return h=Re("cachedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=XI(v),T=new aT;return Object.assign(T,_),T})}}}function Nh(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function hT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function et(n){return this instanceof et?(this.v=n,this):new et(n)}function yi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",u),a[Symbol.asyncIterator]=function(){return this},a;function u(E){return function(I){return Promise.resolve(I).then(E,_)}}function h(E,I){s[E]&&(a[E]=function(k){return new Promise(function(C,j){l.push([E,k,C,j])>1||p(E,k)})},I&&(a[E]=I(a[E])))}function p(E,I){try{f(s[E](I))}catch(k){T(l[0][3],k)}}function f(E){E.value instanceof et?Promise.resolve(E.value.v).then(v,_):T(l[0][2],E)}function v(E){p("next",E)}function _(E){p("throw",E)}function T(E,I){E(I),l.shift(),l.length&&p(l[0][0],l[0][1])}}function vi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof hT=="function"?hT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(h,p){u=n[l](u),a(h,p,u.done,u.value)})}}function a(l,u,h,p){Promise.resolve(p).then(function(f){l({value:f,done:h})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:e1(t)}function e1(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function uR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function fT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let l=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),l&&!e1(n[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class dR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new hR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class hR{constructor(e,t,s,a={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),uR(l)}async sendMessage(e){var t;await this.sendPromise;const s=ts(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,h;const p=await a,f=(u=(l=p.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(h=v.slice(_))!==null&&h!==void 0?h:[]);const E=f?[f]:[];this.recordHistory(s,E,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=ts(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?fT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return yi(this,arguments,function*(){var a,l,u,h,p,f;const v=[];try{for(var _=!0,T=vi(e),E;E=yield et(T.next()),a=E.done,!a;_=!0){h=E.value,_=!1;const I=h;if(cR(I)){const k=(f=(p=I.candidates)===null||p===void 0?void 0:p[0])===null||f===void 0?void 0:f.content;k!==void 0&&v.push(k)}yield yield et(I)}}catch(I){l={error:I}}finally{try{!_&&!a&&(u=T.return)&&(yield et(u.call(T)))}finally{if(l)throw l.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(l=>l.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...fT(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,tf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fR(n){const e={},t=m(n,["file"]);return t!=null&&g(e,["file"],t),e}function mR(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function pR(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","file"],$E(t)),e}function gR(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function xR(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","file"],$E(t)),e}function yR(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function vR(n){const e={},t=m(n,["config"]);return t!=null&&yR(t,e),e}function bR(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _R extends Ra{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Sa.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vR(e);return l=Re("files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const v=f;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const f=bR(p),v=new wC;return Object.assign(v,f),v})}}async createInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fR(e);return l=Re("upload/v1beta/files",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=mR(p),v=new NC;return Object.assign(v,f),v})}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xR(e);return l=Re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pR(e);return l=Re("files/{file}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const v=f;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const f=gR(p),v=new AC;return Object.assign(v,f),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ch(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function TR(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>OR(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function SR(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ER(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wR(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function NR(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=m(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=m(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=m(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=m(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=m(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=m(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const f=m(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const v=m(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=m(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=m(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=m(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const I=m(n,["responseModalities"]);I!=null&&g(e,["responseModalities"],I);const k=m(n,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const C=m(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const j=m(n,["seed"]);j!=null&&g(e,["seed"],j);const R=m(n,["speechConfig"]);R!=null&&g(e,["speechConfig"],R);const z=m(n,["stopSequences"]);z!=null&&g(e,["stopSequences"],z);const $=m(n,["temperature"]);$!=null&&g(e,["temperature"],$);const J=m(n,["thinkingConfig"]);J!=null&&g(e,["thinkingConfig"],J);const Y=m(n,["topK"]);Y!=null&&g(e,["topK"],Y);const D=m(n,["topP"]);if(D!=null&&g(e,["topP"],D),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function AR(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function kR(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function CR(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const v=m(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],ng(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=m(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],TR(ts(I)));const k=m(n,["tools"]);if(e!==void 0&&k!=null){let Y=Kl(k);Array.isArray(Y)&&(Y=Y.map(D=>BR(ql(D)))),g(e,["setup","tools"],Y)}const C=m(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],VR(C));const j=m(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const R=m(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&g(e,["setup","outputAudioTranscription"],R);const z=m(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&g(e,["setup","realtimeInputConfig"],z);const $=m(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const J=m(n,["proactivity"]);if(e!==void 0&&J!=null&&g(e,["setup","proactivity"],J),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function IR(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],NR(s));const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const v=m(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],ng(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=m(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],ts(I));const k=m(n,["tools"]);if(e!==void 0&&k!=null){let D=Kl(k);Array.isArray(D)&&(D=D.map(N=>GR(ql(N)))),g(e,["setup","tools"],D)}const C=m(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],C);const j=m(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const R=m(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&g(e,["setup","outputAudioTranscription"],R);const z=m(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&g(e,["setup","realtimeInputConfig"],z);const $=m(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const J=m(n,["proactivity"]);e!==void 0&&J!=null&&g(e,["setup","proactivity"],J);const Y=m(n,["explicitVadSignal"]);return e!==void 0&&Y!=null&&g(e,["setup","explicitVadSignal"],Y),t}function RR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],At(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],CR(a,t)),t}function MR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],At(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],IR(a,t)),t}function DR(n){const e={},t=m(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function PR(n){const e={},t=m(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function jR(n){const e={},t=m(n,["media"]);if(t!=null){let f=zE(t);Array.isArray(f)&&(f=f.map(v=>ch(v))),g(e,["mediaChunks"],f)}const s=m(n,["audio"]);s!=null&&g(e,["audio"],ch(FE(s)));const a=m(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=m(n,["video"]);l!=null&&g(e,["video"],ch(HE(l)));const u=m(n,["text"]);u!=null&&g(e,["text"],u);const h=m(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=m(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function LR(n){const e={},t=m(n,["media"]);if(t!=null){let f=zE(t);Array.isArray(f)&&(f=f.map(v=>v)),g(e,["mediaChunks"],f)}const s=m(n,["audio"]);s!=null&&g(e,["audio"],FE(s));const a=m(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const l=m(n,["video"]);l!=null&&g(e,["video"],HE(l));const u=m(n,["text"]);u!=null&&g(e,["text"],u);const h=m(n,["activityStart"]);h!=null&&g(e,["activityStart"],h);const p=m(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function UR(n){const e={},t=m(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=m(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=m(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const l=m(n,["toolCallCancellation"]);l!=null&&g(e,["toolCallCancellation"],l);const u=m(n,["usageMetadata"]);u!=null&&g(e,["usageMetadata"],zR(u));const h=m(n,["goAway"]);h!=null&&g(e,["goAway"],h);const p=m(n,["sessionResumptionUpdate"]);p!=null&&g(e,["sessionResumptionUpdate"],p);const f=m(n,["voiceActivityDetectionSignal"]);return f!=null&&g(e,["voiceActivityDetectionSignal"],f),e}function OR(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],SR(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],ER(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],ch(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const v=m(n,["thought"]);v!=null&&g(e,["thought"],v);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function VR(n){const e={},t=m(n,["handle"]);if(t!=null&&g(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BR(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],AR(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],kR(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function GR(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>wR(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const v=m(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function zR(n){const e={},t=m(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=m(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=m(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const l=m(n,["toolUsePromptTokenCount"]);l!=null&&g(e,["toolUsePromptTokenCount"],l);const u=m(n,["thoughtsTokenCount"]);u!=null&&g(e,["thoughtsTokenCount"],u);const h=m(n,["totalTokenCount"]);h!=null&&g(e,["totalTokenCount"],h);const p=m(n,["promptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["promptTokensDetails"],E)}const f=m(n,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["cacheTokensDetails"],E)}const v=m(n,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["responseTokensDetails"],E)}const _=m(n,["toolUsePromptTokensDetails"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["toolUsePromptTokensDetails"],E)}const T=m(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HR(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function FR(n){const e={},t=m(n,["content"]);t!=null&&g(e,["content"],t);const s=m(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],qR(s));const a=m(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const l=m(n,["finishReason"]);l!=null&&g(e,["finishReason"],l);const u=m(n,["avgLogprobs"]);u!=null&&g(e,["avgLogprobs"],u);const h=m(n,["groundingMetadata"]);h!=null&&g(e,["groundingMetadata"],h);const p=m(n,["index"]);p!=null&&g(e,["index"],p);const f=m(n,["logprobsResult"]);f!=null&&g(e,["logprobsResult"],f);const v=m(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["safetyRatings"],T)}const _=m(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function qR(n){const e={},t=m(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function KR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let l=ei(a);Array.isArray(l)&&(l=l.map(u=>u)),g(t,["contents"],l)}return t}function $R(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["tokensInfo"],a)}return e}function YR(n){const e={},t=m(n,["values"]);t!=null&&g(e,["values"],t);const s=m(n,["statistics"]);return s!=null&&g(e,["statistics"],JR(s)),e}function JR(n){const e={},t=m(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=m(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function nf(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>i4(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function QR(n){const e={},t=m(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=m(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function WR(n){const e={};if(m(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function XR(n,e){const t={},s=m(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],ts(s));const a=m(n,["tools"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>i1(h))),g(e,["tools"],u)}const l=m(n,["generationConfig"]);return e!==void 0&&l!=null&&g(e,["generationConfig"],HM(l)),t}function ZR(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let u=ei(a);Array.isArray(u)&&(u=u.map(h=>nf(h))),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&WR(l),t}function eM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let u=ei(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&XR(l,t),t}function tM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=m(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function nM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function sM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function iM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function aM(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function rM(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function oM(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=m(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=m(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const f=m(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const v=m(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=m(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=m(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=m(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const I=m(n,["outputMimeType"]);e!==void 0&&I!=null&&g(e,["parameters","outputOptions","mimeType"],I);const k=m(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const C=m(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const j=m(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const R=m(n,["editMode"]);e!==void 0&&R!=null&&g(e,["parameters","editMode"],R);const z=m(n,["baseSteps"]);return e!==void 0&&z!=null&&g(e,["parameters","editConfig","baseSteps"],z),t}function lM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>u4(p))),g(t,["instances[0]","referenceImages"],h)}const u=m(e,["config"]);return u!=null&&oM(u,t),t}function cM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>sf(l))),g(e,["generatedImages"],a)}return e}function uM(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const l=m(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&g(e,["requests[]","outputDimensionality"],l),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function dM(n,e){const t={},s=m(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=m(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const l=m(n,["outputDimensionality"]);e!==void 0&&l!=null&&g(e,["parameters","outputDimensionality"],l);const u=m(n,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const h=m(n,["autoTruncate"]);return e!==void 0&&h!=null&&g(e,["parameters","autoTruncate"],h),t}function hM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let h=Zp(n,a);Array.isArray(h)&&(h=h.map(p=>p)),g(t,["requests[]","content"],h)}const l=m(e,["config"]);l!=null&&uM(l,t);const u=m(e,["model"]);return u!==void 0&&g(t,["requests[]","model"],At(n,u)),t}function fM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let u=Zp(n,a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["instances[]","content"],u)}const l=m(e,["config"]);return l!=null&&dM(l,t),t}function mM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["embeddings"],l)}const a=m(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function pM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>YR(u))),g(e,["embeddings"],l)}const a=m(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function gM(n){const e={},t=m(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=m(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function xM(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function yM(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vM(n){const e={},t=m(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=m(n,["mode"]);if(s!=null&&g(e,["mode"],s),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bM(n){const e={},t=m(n,["description"]);t!=null&&g(e,["description"],t);const s=m(n,["name"]);s!=null&&g(e,["name"],s);const a=m(n,["parameters"]);a!=null&&g(e,["parameters"],a);const l=m(n,["parametersJsonSchema"]);l!=null&&g(e,["parametersJsonSchema"],l);const u=m(n,["response"]);u!=null&&g(e,["response"],u);const h=m(n,["responseJsonSchema"]);if(h!=null&&g(e,["responseJsonSchema"],h),m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function _M(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],nf(ts(a)));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const v=m(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const I=m(e,["frequencyPenalty"]);I!=null&&g(s,["frequencyPenalty"],I);const k=m(e,["seed"]);k!=null&&g(s,["seed"],k);const C=m(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const j=m(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],eg(j));const R=m(e,["responseJsonSchema"]);if(R!=null&&g(s,["responseJsonSchema"],R),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=m(e,["safetySettings"]);if(t!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map(Te=>d4(Te))),g(t,["safetySettings"],U)}const $=m(e,["tools"]);if(t!==void 0&&$!=null){let U=Kl($);Array.isArray(U)&&(U=U.map(Te=>y4(ql(Te)))),g(t,["tools"],U)}const J=m(e,["toolConfig"]);if(t!==void 0&&J!=null&&g(t,["toolConfig"],x4(J)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=m(e,["cachedContent"]);t!==void 0&&Y!=null&&g(t,["cachedContent"],Ma(n,Y));const D=m(e,["responseModalities"]);D!=null&&g(s,["responseModalities"],D);const N=m(e,["mediaResolution"]);N!=null&&g(s,["mediaResolution"],N);const M=m(e,["speechConfig"]);if(M!=null&&g(s,["speechConfig"],tg(M)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=m(e,["thinkingConfig"]);L!=null&&g(s,["thinkingConfig"],L);const O=m(e,["imageConfig"]);O!=null&&g(s,["imageConfig"],YM(O));const B=m(e,["enableEnhancedCivicAnswers"]);return B!=null&&g(s,["enableEnhancedCivicAnswers"],B),s}function TM(n,e,t){const s={},a=m(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],ts(a));const l=m(e,["temperature"]);l!=null&&g(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&g(s,["topP"],u);const h=m(e,["topK"]);h!=null&&g(s,["topK"],h);const p=m(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&g(s,["maxOutputTokens"],f);const v=m(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=m(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=m(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const E=m(e,["presencePenalty"]);E!=null&&g(s,["presencePenalty"],E);const I=m(e,["frequencyPenalty"]);I!=null&&g(s,["frequencyPenalty"],I);const k=m(e,["seed"]);k!=null&&g(s,["seed"],k);const C=m(e,["responseMimeType"]);C!=null&&g(s,["responseMimeType"],C);const j=m(e,["responseSchema"]);j!=null&&g(s,["responseSchema"],eg(j));const R=m(e,["responseJsonSchema"]);R!=null&&g(s,["responseJsonSchema"],R);const z=m(e,["routingConfig"]);z!=null&&g(s,["routingConfig"],z);const $=m(e,["modelSelectionConfig"]);$!=null&&g(s,["modelConfig"],$);const J=m(e,["safetySettings"]);if(t!==void 0&&J!=null){let q=J;Array.isArray(q)&&(q=q.map(ie=>ie)),g(t,["safetySettings"],q)}const Y=m(e,["tools"]);if(t!==void 0&&Y!=null){let q=Kl(Y);Array.isArray(q)&&(q=q.map(ie=>i1(ql(ie)))),g(t,["tools"],q)}const D=m(e,["toolConfig"]);t!==void 0&&D!=null&&g(t,["toolConfig"],D);const N=m(e,["labels"]);t!==void 0&&N!=null&&g(t,["labels"],N);const M=m(e,["cachedContent"]);t!==void 0&&M!=null&&g(t,["cachedContent"],Ma(n,M));const L=m(e,["responseModalities"]);L!=null&&g(s,["responseModalities"],L);const O=m(e,["mediaResolution"]);O!=null&&g(s,["mediaResolution"],O);const B=m(e,["speechConfig"]);B!=null&&g(s,["speechConfig"],tg(B));const U=m(e,["audioTimestamp"]);U!=null&&g(s,["audioTimestamp"],U);const Te=m(e,["thinkingConfig"]);Te!=null&&g(s,["thinkingConfig"],Te);const Ce=m(e,["imageConfig"]);if(Ce!=null&&g(s,["imageConfig"],JM(Ce)),m(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function mT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let u=ei(a);Array.isArray(u)&&(u=u.map(h=>nf(h))),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&g(t,["generationConfig"],_M(n,l,t)),t}function pT(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["contents"]);if(a!=null){let u=ei(a);Array.isArray(u)&&(u=u.map(h=>h)),g(t,["contents"],u)}const l=m(e,["config"]);return l!=null&&g(t,["generationConfig"],TM(n,l,t)),t}function gT(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(f=>FR(f))),g(e,["candidates"],p)}const a=m(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=m(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const u=m(n,["responseId"]);u!=null&&g(e,["responseId"],u);const h=m(n,["usageMetadata"]);return h!=null&&g(e,["usageMetadata"],h),e}function xT(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["candidates"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(v=>v)),g(e,["candidates"],f)}const a=m(n,["createTime"]);a!=null&&g(e,["createTime"],a);const l=m(n,["modelVersion"]);l!=null&&g(e,["modelVersion"],l);const u=m(n,["promptFeedback"]);u!=null&&g(e,["promptFeedback"],u);const h=m(n,["responseId"]);h!=null&&g(e,["responseId"],h);const p=m(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function SM(n,e){const t={};if(m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=m(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=m(n,["guidanceScale"]);if(e!==void 0&&l!=null&&g(e,["parameters","guidanceScale"],l),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=m(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const h=m(n,["personGeneration"]);e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h);const p=m(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const f=m(n,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);const v=m(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=m(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=m(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),m(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=m(n,["imageSize"]);if(e!==void 0&&E!=null&&g(e,["parameters","sampleImageSize"],E),m(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function EM(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const l=m(n,["numberOfImages"]);e!==void 0&&l!=null&&g(e,["parameters","sampleCount"],l);const u=m(n,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const h=m(n,["guidanceScale"]);e!==void 0&&h!=null&&g(e,["parameters","guidanceScale"],h);const p=m(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const f=m(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const v=m(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=m(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=m(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const E=m(n,["language"]);e!==void 0&&E!=null&&g(e,["parameters","language"],E);const I=m(n,["outputMimeType"]);e!==void 0&&I!=null&&g(e,["parameters","outputOptions","mimeType"],I);const k=m(n,["outputCompressionQuality"]);e!==void 0&&k!=null&&g(e,["parameters","outputOptions","compressionQuality"],k);const C=m(n,["addWatermark"]);e!==void 0&&C!=null&&g(e,["parameters","addWatermark"],C);const j=m(n,["labels"]);e!==void 0&&j!=null&&g(e,["labels"],j);const R=m(n,["imageSize"]);e!==void 0&&R!=null&&g(e,["parameters","sampleImageSize"],R);const z=m(n,["enhancePrompt"]);return e!==void 0&&z!=null&&g(e,["parameters","enhancePrompt"],z),t}function wM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["config"]);return l!=null&&SM(l,t),t}function NM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["config"]);return l!=null&&EM(l,t),t}function AM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>VM(u))),g(e,["generatedImages"],l)}const a=m(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],n1(a)),e}function kM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>sf(u))),g(e,["generatedImages"],l)}const a=m(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],s1(a)),e}function CM(n,e){const t={},s=m(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=m(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const u=m(n,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const h=m(n,["personGeneration"]);if(e!==void 0&&h!=null&&g(e,["parameters","personGeneration"],h),m(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=m(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const f=m(n,["enhancePrompt"]);if(e!==void 0&&f!=null&&g(e,["parameters","enhancePrompt"],f),m(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=m(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],af(v));const _=m(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(E=>R4(E))),g(e,["instances[0]","referenceImages"],T)}if(m(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function IM(n,e){const t={},s=m(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=m(n,["fps"]);e!==void 0&&l!=null&&g(e,["parameters","fps"],l);const u=m(n,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const h=m(n,["seed"]);e!==void 0&&h!=null&&g(e,["parameters","seed"],h);const p=m(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const f=m(n,["resolution"]);e!==void 0&&f!=null&&g(e,["parameters","resolution"],f);const v=m(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=m(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=m(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const E=m(n,["enhancePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","enhancePrompt"],E);const I=m(n,["generateAudio"]);e!==void 0&&I!=null&&g(e,["parameters","generateAudio"],I);const k=m(n,["lastFrame"]);e!==void 0&&k!=null&&g(e,["instances[0]","lastFrame"],Si(k));const C=m(n,["referenceImages"]);if(e!==void 0&&C!=null){let z=C;Array.isArray(z)&&(z=z.map($=>M4($))),g(e,["instances[0]","referenceImages"],z)}const j=m(n,["mask"]);e!==void 0&&j!=null&&g(e,["instances[0]","mask"],I4(j));const R=m(n,["compressionQuality"]);return e!==void 0&&R!=null&&g(e,["parameters","compressionQuality"],R),t}function RM(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response","generateVideoResponse"]);return u!=null&&g(e,["response"],jM(u)),e}function MM(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],LM(u)),e}function DM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["image"]);l!=null&&g(t,["instances[0]","image"],af(l));const u=m(e,["video"]);u!=null&&g(t,["instances[0]","video"],a1(u));const h=m(e,["source"]);h!=null&&UM(h,t);const p=m(e,["config"]);return p!=null&&CM(p,t),t}function PM(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const l=m(e,["image"]);l!=null&&g(t,["instances[0]","image"],Si(l));const u=m(e,["video"]);u!=null&&g(t,["instances[0]","video"],r1(u));const h=m(e,["source"]);h!=null&&OM(h,t);const p=m(e,["config"]);return p!=null&&IM(p,t),t}function jM(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>GM(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function LM(n){const e={},t=m(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>zM(u))),g(e,["generatedVideos"],l)}const s=m(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=m(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function UM(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],af(a));const l=m(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],a1(l)),t}function OM(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Si(a));const l=m(n,["video"]);return e!==void 0&&l!=null&&g(e,["instances[0]","video"],r1(l)),t}function VM(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["image"],QM(t));const s=m(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=m(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],n1(a)),e}function sf(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["image"],t1(t));const s=m(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=m(n,["_self"]);a!=null&&g(e,["safetyAttributes"],s1(a));const l=m(n,["prompt"]);return l!=null&&g(e,["enhancedPrompt"],l),e}function BM(n){const e={},t=m(n,["_self"]);t!=null&&g(e,["mask"],t1(t));const s=m(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["labels"],a)}return e}function GM(n){const e={},t=m(n,["video"]);return t!=null&&g(e,["video"],k4(t)),e}function zM(n){const e={},t=m(n,["_self"]);return t!=null&&g(e,["video"],C4(t)),e}function HM(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=m(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=m(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const l=m(n,["candidateCount"]);l!=null&&g(e,["candidateCount"],l);const u=m(n,["enableAffectiveDialog"]);u!=null&&g(e,["enableAffectiveDialog"],u);const h=m(n,["frequencyPenalty"]);h!=null&&g(e,["frequencyPenalty"],h);const p=m(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const f=m(n,["maxOutputTokens"]);f!=null&&g(e,["maxOutputTokens"],f);const v=m(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=m(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=m(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const E=m(n,["responseMimeType"]);E!=null&&g(e,["responseMimeType"],E);const I=m(n,["responseModalities"]);I!=null&&g(e,["responseModalities"],I);const k=m(n,["responseSchema"]);k!=null&&g(e,["responseSchema"],k);const C=m(n,["routingConfig"]);C!=null&&g(e,["routingConfig"],C);const j=m(n,["seed"]);j!=null&&g(e,["seed"],j);const R=m(n,["speechConfig"]);R!=null&&g(e,["speechConfig"],R);const z=m(n,["stopSequences"]);z!=null&&g(e,["stopSequences"],z);const $=m(n,["temperature"]);$!=null&&g(e,["temperature"],$);const J=m(n,["thinkingConfig"]);J!=null&&g(e,["thinkingConfig"],J);const Y=m(n,["topK"]);Y!=null&&g(e,["topK"],Y);const D=m(n,["topP"]);if(D!=null&&g(e,["topP"],D),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function FM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function qM(n,e){const t={},s=m(e,["model"]);return s!=null&&g(t,["_url","name"],At(n,s)),t}function KM(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function $M(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function YM(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),m(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function JM(n){const e={},t=m(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=m(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=m(n,["personGeneration"]);a!=null&&g(e,["personGeneration"],a);const l=m(n,["outputMimeType"]);l!=null&&g(e,["imageOutputOptions","mimeType"],l);const u=m(n,["outputCompressionQuality"]);return u!=null&&g(e,["imageOutputOptions","compressionQuality"],u),e}function QM(n){const e={},t=m(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],Lr(t));const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function t1(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],Lr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function af(n){const e={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=m(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],Lr(t));const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Si(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Lr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function WM(n,e,t){const s={},a=m(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=m(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],YE(n,h)),s}function XM(n,e,t){const s={},a=m(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const l=m(e,["pageToken"]);t!==void 0&&l!=null&&g(t,["_query","pageToken"],l);const u=m(e,["filter"]);t!==void 0&&u!=null&&g(t,["_query","filter"],u);const h=m(e,["queryBase"]);return t!==void 0&&h!=null&&g(t,["_url","models_url"],YE(n,h)),s}function ZM(n,e){const t={},s=m(e,["config"]);return s!=null&&WM(n,s,t),t}function e4(n,e){const t={},s=m(e,["config"]);return s!=null&&XM(n,s,t),t}function t4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["_self"]);if(a!=null){let l=JE(a);Array.isArray(l)&&(l=l.map(u=>up(u))),g(e,["models"],l)}return e}function n4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["_self"]);if(a!=null){let l=JE(a);Array.isArray(l)&&(l=l.map(u=>dp(u))),g(e,["models"],l)}return e}function s4(n){const e={},t=m(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=m(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=m(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function up(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);a!=null&&g(e,["description"],a);const l=m(n,["version"]);l!=null&&g(e,["version"],l);const u=m(n,["_self"]);u!=null&&g(e,["tunedModelInfo"],v4(u));const h=m(n,["inputTokenLimit"]);h!=null&&g(e,["inputTokenLimit"],h);const p=m(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const f=m(n,["supportedGenerationMethods"]);f!=null&&g(e,["supportedActions"],f);const v=m(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=m(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=m(n,["topP"]);T!=null&&g(e,["topP"],T);const E=m(n,["topK"]);E!=null&&g(e,["topK"],E);const I=m(n,["thinking"]);return I!=null&&g(e,["thinking"],I),e}function dp(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);a!=null&&g(e,["description"],a);const l=m(n,["versionId"]);l!=null&&g(e,["version"],l);const u=m(n,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>gM(T))),g(e,["endpoints"],_)}const h=m(n,["labels"]);h!=null&&g(e,["labels"],h);const p=m(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],b4(p));const f=m(n,["defaultCheckpointId"]);f!=null&&g(e,["defaultCheckpointId"],f);const v=m(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function i4(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],xM(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],yM(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],HR(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const v=m(n,["thought"]);v!=null&&g(e,["thought"],v);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function a4(n){const e={},t=m(n,["productImage"]);return t!=null&&g(e,["image"],Si(t)),e}function r4(n,e){const t={},s=m(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=m(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const l=m(n,["outputGcsUri"]);e!==void 0&&l!=null&&g(e,["parameters","storageUri"],l);const u=m(n,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const h=m(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const p=m(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const f=m(n,["addWatermark"]);e!==void 0&&f!=null&&g(e,["parameters","addWatermark"],f);const v=m(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=m(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=m(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const E=m(n,["labels"]);return e!==void 0&&E!=null&&g(e,["labels"],E),t}function o4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["source"]);a!=null&&c4(a,t);const l=m(e,["config"]);return l!=null&&r4(l,t),t}function l4(n){const e={},t=m(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>sf(a))),g(e,["generatedImages"],s)}return e}function c4(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],Si(a));const l=m(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>a4(h))),g(e,["instances[0]","productImages"],u)}return t}function u4(n){const e={},t=m(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Si(t));const s=m(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=m(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const l=m(n,["maskImageConfig"]);l!=null&&g(e,["maskImageConfig"],s4(l));const u=m(n,["controlImageConfig"]);u!=null&&g(e,["controlImageConfig"],QR(u));const h=m(n,["styleImageConfig"]);h!=null&&g(e,["styleImageConfig"],h);const p=m(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function n1(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=m(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=m(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function s1(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=m(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=m(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function d4(n){const e={},t=m(n,["category"]);if(t!=null&&g(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function h4(n){const e={},t=m(n,["image"]);return t!=null&&g(e,["image"],Si(t)),e}function f4(n,e){const t={},s=m(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=m(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const l=m(n,["confidenceThreshold"]);e!==void 0&&l!=null&&g(e,["parameters","confidenceThreshold"],l);const u=m(n,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const h=m(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&g(e,["parameters","binaryColorThreshold"],h);const p=m(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function m4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["source"]);a!=null&&g4(a,t);const l=m(e,["config"]);return l!=null&&f4(l,t),t}function p4(n){const e={},t=m(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>BM(a))),g(e,["generatedMasks"],s)}return e}function g4(n,e){const t={},s=m(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=m(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Si(a));const l=m(n,["scribbleImage"]);return e!==void 0&&l!=null&&g(e,["instances[0]","scribble"],h4(l)),t}function x4(n){const e={},t=m(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=m(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],vM(s)),e}function y4(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],KM(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],$M(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function i1(n){const e={},t=m(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=m(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=m(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const l=m(n,["enterpriseWebSearch"]);l!=null&&g(e,["enterpriseWebSearch"],l);const u=m(n,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(T=>bM(T))),g(e,["functionDeclarations"],_)}const h=m(n,["googleMaps"]);h!=null&&g(e,["googleMaps"],h);const p=m(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const f=m(n,["googleSearchRetrieval"]);f!=null&&g(e,["googleSearchRetrieval"],f);const v=m(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function v4(n){const e={},t=m(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=m(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=m(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function b4(n){const e={},t=m(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=m(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=m(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function _4(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function T4(n,e){const t={},s=m(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=m(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const l=m(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&g(e,["defaultCheckpointId"],l),t}function S4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","name"],At(n,s));const a=m(e,["config"]);return a!=null&&_4(a,t),t}function E4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["config"]);return a!=null&&T4(a,t),t}function w4(n,e){const t={},s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=m(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const l=m(n,["personGeneration"]);e!==void 0&&l!=null&&g(e,["parameters","personGeneration"],l);const u=m(n,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const h=m(n,["outputMimeType"]);e!==void 0&&h!=null&&g(e,["parameters","outputOptions","mimeType"],h);const p=m(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const f=m(n,["enhanceInputImage"]);e!==void 0&&f!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],f);const v=m(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=m(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=m(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const E=m(n,["mode"]);return e!==void 0&&E!=null&&g(e,["parameters","mode"],E),t}function N4(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["_url","model"],At(n,s));const a=m(e,["image"]);a!=null&&g(t,["instances[0]","image"],Si(a));const l=m(e,["upscaleFactor"]);l!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=m(e,["config"]);return u!=null&&w4(u,t),t}function A4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>sf(l))),g(e,["generatedImages"],a)}return e}function k4(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],Lr(s));const a=m(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function C4(n){const e={},t=m(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=m(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],Lr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function I4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["_self"],Si(t));const s=m(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function R4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["image"],af(t));const s=m(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function M4(n){const e={},t=m(n,["image"]);t!=null&&g(e,["image"],Si(t));const s=m(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function a1(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["uri"],t);const s=m(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],Lr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function r1(n){const e={},t=m(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=m(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],Lr(s));const a=m(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D4(n,e){const t={},s=m(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function P4(n){const e={},t=m(n,["config"]);return t!=null&&D4(t,e),e}function j4(n,e){const t={},s=m(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function L4(n){const e={},t=m(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=m(n,["config"]);return s!=null&&j4(s,e),e}function U4(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function O4(n,e){const t={},s=m(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["customMetadata"],l)}const a=m(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function V4(n){const e={},t=m(n,["name"]);t!=null&&g(e,["name"],t);const s=m(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=m(n,["done"]);a!=null&&g(e,["done"],a);const l=m(n,["error"]);l!=null&&g(e,["error"],l);const u=m(n,["response"]);return u!=null&&g(e,["response"],G4(u)),e}function B4(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=m(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=m(n,["config"]);return a!=null&&O4(a,e),e}function G4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["parent"]);s!=null&&g(e,["parent"],s);const a=m(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function z4(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function H4(n){const e={},t=m(n,["config"]);return t!=null&&z4(t,e),e}function F4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["fileSearchStores"],l)}return e}function o1(n,e){const t={},s=m(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=m(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=m(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>p)),g(e,["customMetadata"],h)}const u=m(n,["chunkingConfig"]);return e!==void 0&&u!=null&&g(e,["chunkingConfig"],u),t}function q4(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=m(n,["config"]);return s!=null&&o1(s,e),e}function K4(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $4="Content-Type",Y4="X-Server-Timeout",J4="User-Agent",hp="x-goog-api-client",Q4="1.35.0",W4=`google-genai-sdk/${Q4}`,X4="v1beta1",Z4="v1beta";class eD{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:X4,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Z4,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,h]of Object.entries(e.queryParams))a.searchParams.append(u,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(t))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&tD(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await yT(a),new op(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await yT(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return yi(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let u="";const h="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:v}=yield et(a.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const I=JSON.parse(_);if("error"in I){const k=JSON.parse(JSON.stringify(I.error)),C=k.status,j=k.code,R=`got status: ${C}. ${JSON.stringify(I)}`;if(j>=400&&j<600)throw new tf({message:R,status:j})}}catch(I){if(I.name==="ApiError")throw I}u+=_;let T=-1,E=0;for(;;){T=-1,E=0;for(const C of p){const j=u.indexOf(C);j!==-1&&(T===-1||j<T)&&(T=j,E=C.length)}if(T===-1)break;const I=u.substring(0,T);u=u.substring(T+E);const k=I.trim();if(k.startsWith(h)){const C=k.substring(h.length).trim();try{const j=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield et(new op(j))}catch(j){throw new Error(`exception parsing stream chunk ${C}. ${j}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=W4+" "+this.clientOptions.userAgentExtra;return e[J4]=t,e[hp]=t,e[$4]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(Y4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);a.sizeBytes=String(u.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const p={file:a},f=this.getFileName(e),v=Re("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,f,p,t==null?void 0:t.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const l=this.clientOptions.uploader,u=await l.stat(t),h=String(u.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&o1(s,_);const T=await this.fetchUploadUrl(f,h,p,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,l,u){var h;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const f=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:p});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=f==null?void 0:f.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function yT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new tf({message:a,status:t}):new Error(a)}}function tD(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const h=Object.assign({},l);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const f=u[p],v=h[p];f&&typeof f=="object"&&!Array.isArray(f)&&v&&typeof v=="object"&&!Array.isArray(v)?h[p]=s(v,f):(v&&f&&typeof v!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof f}. Overwriting.`),h[p]=f)}return h}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nD="mcp_used/unknown";let sD=!1;function l1(n){for(const e of n)if(iD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return sD}function c1(n){var e;const t=(e=n[hp])!==null&&e!==void 0?e:"";n[hp]=(t+` ${nD}`).trimStart()}function iD(n){return n!==null&&typeof n=="object"&&n instanceof sg}function aD(n){return yi(this,arguments,function*(t,s=100){let a,l=0;for(;l<s;){const u=yield et(t.listTools({cursor:a}));for(const h of u.tools)yield yield et(h),l++;if(!u.nextCursor)break;a=u.nextCursor}})}class sg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new sg(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var h=!0,p=(t=void 0,vi(aD(v))),f;f=await p.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const _=a;u.push(_);const T=_.name;if(l[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);l[T]=v}}catch(_){t={error:_}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),UC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await a.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function rD(n,e,t){const s=new CC;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class oD{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=uD(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let f=()=>{};const v=new Promise(z=>{f=z}),_=e.callbacks,T=function(){f({})},E=this.apiClient,I={onopen:T,onmessage:z=>{rD(E,_.onmessage,z)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(z){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(z){}},k=this.webSocketFactory.create(p,cD(u),I);k.connect(),await v;const R={setup:{model:At(this.apiClient,e.model)}};return k.send(JSON.stringify(R)),new lD(k,this.apiClient)}}class lD{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=PR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=DR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Al.PLAY)}pause(){this.sendPlaybackControl(Al.PAUSE)}stop(){this.sendPlaybackControl(Al.STOP)}resetContext(){this.sendPlaybackControl(Al.RESET_CONTEXT)}close(){this.conn.close()}}function cD(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function uD(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hD(n,e,t){const s=new kC;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const l=JSON.parse(a);if(n.isVertexAI()){const u=UR(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class fD{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new oD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,l,u,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&l1(e.config.tools)&&c1(_);const T=xD(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const M=this.apiClient.getApiKey();let L="BidiGenerateContent",O="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",O="access_token"),v=`${p}/ws/google.ai.generativelanguage.${f}.GenerativeService.${L}?${O}=${M}`}let E=()=>{};const I=new Promise(M=>{E=M}),k=e.callbacks,C=function(){var M;(M=k==null?void 0:k.onopen)===null||M===void 0||M.call(k),E({})},j=this.apiClient,R={onopen:C,onmessage:M=>{hD(j,k.onmessage,M)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(M){},onclose:(s=k==null?void 0:k.onclose)!==null&&s!==void 0?s:function(M){}},z=this.webSocketFactory.create(v,gD(T),R);z.connect(),await I;let $=At(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const M=this.apiClient.getProject(),L=this.apiClient.getLocation();$=`projects/${M}/locations/${L}/`+$}let J={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sh.AUDIO]}:e.config.responseModalities=[Sh.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(h=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[],D=[];for(const M of Y)if(this.isCallableTool(M)){const L=M;D.push(await L.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const N={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=MR(this.apiClient,N):J=RR(this.apiClient,N),delete J.config,z.send(JSON.stringify(J)),new pD(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const mD={turnComplete:!0};class pD{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=ei(t.turns),e.isVertexAI()||(s=s.map(a=>nf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(dD)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},mD),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:LR(e)}:t={realtimeInput:jR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function gD(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function xD(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vT=10;function bT(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Il(u)){a=!0;break}if(!a)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Il(n){return"callTool"in n&&typeof n.callTool=="function"}function yD(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>Il(a)))!==null&&s!==void 0?s:!1}function _T(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(Il(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(a)}),t}function TT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vD extends Ra{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,l,u,h;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!yD(t)||bT(t.config))return await this.generateContentInternal(p);const f=_T(t);if(f.length>0){const k=f.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let v,_;const T=ei(p.contents),E=(l=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:vT;let I=0;for(;I<E&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const k=v.candidates[0].content,C=[];for(const j of(h=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&h!==void 0?h:[])if(Il(j)){const z=await j.callTool(v.functionCalls);C.push(...z)}I++,_={role:"user",parts:C},p.contents=ei(p.contents),p.contents.push(k),p.contents.push(_),TT(p.config)&&(T.push(k),T.push(_))}return TT(p.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var s,a,l,u,h;if(this.maybeMoveToResponseJsonSchem(t),bT(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=_T(t);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(l=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(f&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let l;const u=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:u.push(p);let h;return l?h={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ro(Sa.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,l,u,h,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((p=(h=t.source)===null||h===void 0?void 0:h.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async p=>Il(p)?await p.tool():p)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(h.config.tools=u,e.config&&e.config.tools&&l1(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let f=Object.assign({},p);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),c1(f),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return h}async initAfcToolsMap(e){var t,s,a;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Il(u)){const h=u,p=await h.tool();for(const f of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!f.name)throw new Error("Function declaration name is required.");if(l.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);l.set(f.name,h)}}return l}async processAfcStream(e){var t,s,a;const l=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:vT;let u=!1,h=0;const p=await this.initAfcToolsMap(e);return(function(f,v,_){return yi(this,arguments,function*(){for(var T,E,I,k,C,j;h<l;){u&&(h++,u=!1);const J=yield et(f.processParamsMaybeAddMcpUsage(_)),Y=yield et(f.generateContentStreamInternal(J)),D=[],N=[];try{for(var R=!0,z=(E=void 0,vi(Y)),$;$=yield et(z.next()),T=$.done,!T;R=!0){k=$.value,R=!1;const M=k;if(yield yield et(M),M.candidates&&(!((C=M.candidates[0])===null||C===void 0)&&C.content)){N.push(M.candidates[0].content);for(const L of(j=M.candidates[0].content.parts)!==null&&j!==void 0?j:[])if(h<l&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const O=yield et(v.get(L.functionCall.name).callTool([L.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(M){E={error:M}}finally{try{!R&&!T&&(I=z.return)&&(yield et(I.call(z)))}finally{if(E)throw E.error}}if(D.length>0){u=!0;const M=new Yc;M.candidates=[{content:{role:"user",parts:D}}],yield yield et(M);const L=[];L.push(...N),L.push({role:"user",parts:D});const O=ei(_.contents).concat(L);_.contents=O}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=pT(this.apiClient,e);return h=Re("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=xT(v),T=new Yc;return Object.assign(T,_),T})}else{const f=mT(this.apiClient,e);return h=Re("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=gT(v),T=new Yc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=pT(this.apiClient,e);return h=Re("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return yi(this,arguments,function*(){var T,E,I,k;try{for(var C=!0,j=vi(_),R;R=yield et(j.next()),T=R.done,!T;C=!0){k=R.value,C=!1;const z=k,$=xT(yield et(z.json()));$.sdkHttpResponse={headers:z.headers};const J=new Yc;Object.assign(J,$),yield yield et(J)}}catch(z){E={error:z}}finally{try{!C&&!T&&(I=j.return)&&(yield et(I.call(j)))}finally{if(E)throw E.error}}})})}else{const f=mT(this.apiClient,e);return h=Re("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.requestStream({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(_){return yi(this,arguments,function*(){var T,E,I,k;try{for(var C=!0,j=vi(_),R;R=yield et(j.next()),T=R.done,!T;C=!0){k=R.value,C=!1;const z=k,$=gT(yield et(z.json()));$.sdkHttpResponse={headers:z.headers};const J=new Yc;Object.assign(J,$),yield yield et(J)}}catch(z){E={error:z}}finally{try{!C&&!T&&(I=j.return)&&(yield et(I.call(j)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=fM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=pM(v),T=new W_;return Object.assign(T,_),T})}else{const f=hM(this.apiClient,e);return h=Re("{model}:batchEmbedContents",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=mM(v),T=new W_;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=NM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=kM(v),T=new X_;return Object.assign(T,_),T})}else{const f=wM(this.apiClient,e);return h=Re("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=AM(v),T=new X_;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=lM(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const v=f;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const f=cM(p),v=new xC;return Object.assign(v,f),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=N4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const v=f;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const f=A4(p),v=new yC;return Object.assign(v,f),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=o4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=l4(p),v=new vC;return Object.assign(v,f),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=m4(this.apiClient,e);return l=Re("{model}:predict",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=p4(p),v=new bC;return Object.assign(v,f),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=qM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>dp(v))}else{const f=FM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>up(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=e4(this.apiClient,e);return h=Re("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=n4(v),T=new Z_;return Object.assign(T,_),T})}else{const f=ZM(this.apiClient,e);return h=Re("{models_url}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=t4(v),T=new Z_;return Object.assign(T,_),T})}}async update(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=E4(this.apiClient,e);return h=Re("{model}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>dp(v))}else{const f=S4(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>up(v))}}async delete(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=iM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=rM(v),T=new eT;return Object.assign(T,_),T})}else{const f=sM(this.apiClient,e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=aM(v),T=new eT;return Object.assign(T,_),T})}}async countTokens(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=eM(this.apiClient,e);return h=Re("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=nM(v),T=new tT;return Object.assign(T,_),T})}else{const f=ZR(this.apiClient,e);return h=Re("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=tM(v),T=new tT;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=KR(this.apiClient,e);return l=Re("{model}:computeTokens",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const v=f;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const f=$R(p),v=new _C;return Object.assign(v,f),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=PM(this.apiClient,e);return h=Re("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const _=MM(v),T=new Eh;return Object.assign(T,_),T})}else{const f=DM(this.apiClient,e);return h=Re("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const _=RM(v),T=new Eh;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bD extends Ra{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=dC(e);return h=Re("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const f=uC(e);return h=Re("{operationName}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=sC(e);return l=Re("{resourceName}:fetchPredictOperation",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _D(n){const e={},t=m(n,["data"]);if(t!=null&&g(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function TD(n){const e={},t=m(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>RD(l))),g(e,["parts"],a)}const s=m(n,["role"]);return s!=null&&g(e,["role"],s),e}function SD(n,e,t){const s={},a=m(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const l=m(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&g(t,["newSessionExpireTime"],l);const u=m(e,["uses"]);t!==void 0&&u!=null&&g(t,["uses"],u);const h=m(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&g(t,["bidiGenerateContentSetup"],ID(n,h));const p=m(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function ED(n,e){const t={},s=m(e,["config"]);return s!=null&&g(t,["config"],SD(n,s,t)),t}function wD(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=m(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ND(n){const e={},t=m(n,["id"]);t!=null&&g(e,["id"],t);const s=m(n,["args"]);s!=null&&g(e,["args"],s);const a=m(n,["name"]);if(a!=null&&g(e,["name"],a),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AD(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function kD(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function CD(n,e){const t={},s=m(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=m(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const l=m(n,["temperature"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","temperature"],l);const u=m(n,["topP"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topP"],u);const h=m(n,["topK"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","topK"],h);const p=m(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(n,["mediaResolution"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","mediaResolution"],f);const v=m(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=m(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],ng(_));const T=m(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const E=m(n,["enableAffectiveDialog"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],E);const I=m(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],TD(ts(I)));const k=m(n,["tools"]);if(e!==void 0&&k!=null){let Y=Kl(k);Array.isArray(Y)&&(Y=Y.map(D=>DD(ql(D)))),g(e,["setup","tools"],Y)}const C=m(n,["sessionResumption"]);e!==void 0&&C!=null&&g(e,["setup","sessionResumption"],MD(C));const j=m(n,["inputAudioTranscription"]);e!==void 0&&j!=null&&g(e,["setup","inputAudioTranscription"],j);const R=m(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&g(e,["setup","outputAudioTranscription"],R);const z=m(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&g(e,["setup","realtimeInputConfig"],z);const $=m(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const J=m(n,["proactivity"]);if(e!==void 0&&J!=null&&g(e,["setup","proactivity"],J),m(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function ID(n,e){const t={},s=m(e,["model"]);s!=null&&g(t,["setup","model"],At(n,s));const a=m(e,["config"]);return a!=null&&g(t,["config"],CD(a,t)),t}function RD(n){const e={},t=m(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=m(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=m(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const l=m(n,["fileData"]);l!=null&&g(e,["fileData"],wD(l));const u=m(n,["functionCall"]);u!=null&&g(e,["functionCall"],ND(u));const h=m(n,["functionResponse"]);h!=null&&g(e,["functionResponse"],h);const p=m(n,["inlineData"]);p!=null&&g(e,["inlineData"],_D(p));const f=m(n,["text"]);f!=null&&g(e,["text"],f);const v=m(n,["thought"]);v!=null&&g(e,["thought"],v);const _=m(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=m(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function MD(n){const e={},t=m(n,["handle"]);if(t!=null&&g(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function DD(n){const e={};if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=m(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=m(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=m(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=m(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const u=m(n,["googleMaps"]);u!=null&&g(e,["googleMaps"],AD(u));const h=m(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],kD(h));const p=m(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const f=m(n,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PD(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${t}.${l}`);e.push(...a)}else e.push(t)}return e.join(",")}function jD(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const l=PD(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(f=>u.includes(f)?`generationConfig.${f}`:f));const p=[];l&&p.push(l),h.length>0&&p.push(...h),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class LD extends Ra{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=ED(this.apiClient,e);l=Re("auth_tokens",h._url),u=h._query,delete h.config,delete h._url,delete h._query;const p=jD(h,e.config);return a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UD(n,e){const t={},s=m(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function OD(n){const e={},t=m(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=m(n,["config"]);return s!=null&&UD(s,e),e}function VD(n){const e={},t=m(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function BD(n,e){const t={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function GD(n){const e={},t=m(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=m(n,["config"]);return s!=null&&BD(s,e),e}function zD(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=m(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=m(n,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>u)),g(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HD extends Ra{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ro(Sa.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=VD(e);return l=Re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OD(e);a=Re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=GD(e);return l=Re("{parent}/documents",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=zD(p),v=new TC;return Object.assign(v,f),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FD extends Ra{constructor(e,t=new HD(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Ro(Sa.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=P4(e);return l=Re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=U4(e);return l=Re("{name}",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=L4(e);a=Re("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=H4(e);return l=Re("fileSearchStores",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=F4(p),v=new SC;return Object.assign(v,f),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=q4(e);return l=Re("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=K4(p),v=new EC;return Object.assign(v,f),v})}}async importFile(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=B4(e);return l=Re("{file_search_store_name}:importFile",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const f=V4(p),v=new Wp;return Object.assign(v,f),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let u1=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return u1=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const qD=()=>u1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const mp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ni extends Error{}class ls extends ni{constructor(e,t,s,a){super(`${ls.makeMessage(e,t,s)}`),this.status=e,this.headers=a,this.error=t}static makeMessage(e,t,s){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,s,a){if(!e||!a)return new rf({message:s,cause:mp(t)});const l=t;return e===400?new h1(e,l,s,a):e===401?new f1(e,l,s,a):e===403?new m1(e,l,s,a):e===404?new p1(e,l,s,a):e===409?new g1(e,l,s,a):e===422?new x1(e,l,s,a):e===429?new y1(e,l,s,a):e>=500?new v1(e,l,s,a):new ls(e,l,s,a)}}class pp extends ls{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class rf extends ls{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class d1 extends rf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class h1 extends ls{}class f1 extends ls{}class m1 extends ls{}class p1 extends ls{}class g1 extends ls{}class x1 extends ls{}class y1 extends ls{}class v1 extends ls{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KD=/^[a-z][a-z0-9+.-]*:/i,$D=n=>KD.test(n);let gp=n=>(gp=Array.isArray,gp(n));const YD=gp;let JD=YD;const ST=JD;function QD(n){if(!n)return!0;for(const e in n)return!1;return!0}function WD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const XD=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ni(`${n} must be an integer`);if(e<0)throw new ni(`${n} must be a positive integer`);return e},ZD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e5=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t5(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const n5=()=>{var n,e,t,s,a;const l=t5();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":wT(Deno.build.os),"X-Stainless-Arch":ET(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":wT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":ET((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const u=s5();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Tl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function s5(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${a}.${l}.${u}`}}}return null}const ET=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",wT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Jd;const i5=()=>Jd??(Jd=n5());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function b1(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function r5(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return b1({start(){},async pull(t){const{done:s,value:a}=await e.next();s?t.close():t.enqueue(a)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function _1(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function o5(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l5=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T1=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function B0(n,e,t){return T1(),new File(n,e??"unknown_file",t)}function c5(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const u5=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S1=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",d5=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&S1(n),h5=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function f5(n,e,t){if(T1(),n=await n,d5(n))return n instanceof File?n:B0([await n.arrayBuffer()],n.name);if(h5(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),B0(await xp(a),e,t)}const s=await xp(n);if(e||(e=c5(n)),!(t!=null&&t.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(t=Object.assign(Object.assign({},t),{type:a}))}return B0(s,e,t)}async function xp(n){var e,t,s,a,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(S1(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(u5(n))try{for(var h=!0,p=vi(n),f;f=await p.next(),e=f.done,!e;h=!0){a=f.value,h=!1;const v=a;u.push(...await xp(v))}}catch(v){t={error:v}}finally{try{!h&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}else{const v=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${m5(n)}`)}return u}function m5(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E1{constructor(e){this._client=e}}E1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const NT=Object.freeze(Object.create(null)),p5=(n=w1)=>(function(t,...s){if(t.length===1)return t[0];let a=!1;const l=[],u=t.reduce((v,_,T)=>{var E,I,k;/[?#]/.test(_)&&(a=!0);const C=s[T];let j=(a?encodeURIComponent:n)(""+C);return T!==s.length&&(C==null||typeof C=="object"&&C.toString===((k=Object.getPrototypeOf((I=Object.getPrototypeOf((E=C.hasOwnProperty)!==null&&E!==void 0?E:NT))!==null&&I!==void 0?I:NT))===null||k===void 0?void 0:k.toString))&&(j=C+"",l.push({start:v.length+_.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":j)},""),h=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=p.exec(h))!==null;)l.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((T,E)=>{const I=" ".repeat(E.start-v),k="^".repeat(E.length);return v=E.start+E.length,T+I+k},"");throw new ni(`Path parameters result in path with invalid segments:
${l.map(T=>T.error).join(`
`)}
${u}
${_}`)}return u}),Qd=p5(w1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N1 extends E1{create(e,t){var s;const{api_version:a=this._client.apiVersion}=e,l=Nh(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ni("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ni("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Qd`/${a}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.delete(Qd`/${a}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.post(Qd`/${a}/interactions/${e}/cancel`,s)}get(e,t={},s){var a;const l=t??{},{api_version:u=this._client.apiVersion}=l,h=Nh(l,["api_version"]);return this._client.get(Qd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=t==null?void 0:t.stream)!==null&&a!==void 0?a:!1}))}}N1._key=Object.freeze(["interactions"]);class A1 extends N1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g5(n){let e=0;for(const a of n)e+=a.length;const t=new Uint8Array(e);let s=0;for(const a of n)t.set(a,s),s+=a.length;return t}let Wd;function ig(n){let e;return(Wd??(e=new globalThis.TextEncoder,Wd=e.encode.bind(e)))(n)}let Xd;function AT(n){let e;return(Xd??(e=new globalThis.TextDecoder,Xd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class of{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ig(e):e;this.buffer=g5([this.buffer,t]);const s=[];let a;for(;(a=x5(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(AT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,u=AT(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}of.NEWLINE_CHARS=new Set([`
`,"\r"]);of.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function x5(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function y5(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ah={off:0,error:200,warn:300,info:400,debug:500},kT=(n,e,t)=>{if(n){if(WD(Ah,n))return n;rs(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ah))}`)}};function Qc(){}function Zd(n,e,t){return!e||Ah[n]>Ah[t]?Qc:e[n].bind(e)}const v5={error:Qc,warn:Qc,info:Qc,debug:Qc};let CT=new WeakMap;function rs(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return v5;const a=CT.get(t);if(a&&a[0]===s)return a[1];const l={error:Zd("error",t,s),warn:Zd("warn",t,s),info:Zd("info",t,s),debug:Zd("debug",t,s)};return CT.set(t,[s,l]),l}const po=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kl{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let a=!1;const l=s?rs(s):console;function u(){return yi(this,arguments,function*(){var p,f,v,_;if(a)throw new ni("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,I=vi(b5(e,t)),k;k=yield et(I.next()),p=k.done,!p;E=!0){_=k.value,E=!1;const C=_;if(!T)if(C.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield et(JSON.parse(C.data))}catch(j){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),j}}}catch(C){f={error:C}}finally{try{!E&&!p&&(v=I.return)&&(yield et(v.call(I)))}finally{if(f)throw f.error}}T=!0}catch(C){if(fp(C))return yield et(void 0);throw C}finally{T||t.abort()}})}return new kl(u,t,s)}static fromReadableStream(e,t,s){let a=!1;function l(){return yi(this,arguments,function*(){var p,f,v,_;const T=new of,E=_1(e);try{for(var I=!0,k=vi(E),C;C=yield et(k.next()),p=C.done,!p;I=!0){_=C.value,I=!1;const j=_;for(const R of T.decode(j))yield yield et(R)}}catch(j){f={error:j}}finally{try{!I&&!p&&(v=k.return)&&(yield et(v.call(k)))}finally{if(f)throw f.error}}for(const j of T.flush())yield yield et(j)})}function u(){return yi(this,arguments,function*(){var p,f,v,_;if(a)throw new ni("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var E=!0,I=vi(l()),k;k=yield et(I.next()),p=k.done,!p;E=!0){_=k.value,E=!1;const C=_;T||C&&(yield yield et(JSON.parse(C)))}}catch(C){f={error:C}}finally{try{!E&&!p&&(v=I.return)&&(yield et(v.call(I)))}finally{if(f)throw f.error}}T=!0}catch(C){if(fp(C))return yield et(void 0);throw C}finally{T||t.abort()}})}return new kl(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),t.push(u)}return l.shift()}});return[new kl(()=>a(e),this.controller,this.client),new kl(()=>a(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return b1({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await t.next();if(l)return s.close();const u=ig(JSON.stringify(a)+`
`);s.enqueue(u)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function b5(n,e){return yi(this,arguments,function*(){var s,a,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ni("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ni("Attempted to iterate over a response with no body");const h=new T5,p=new of,f=_1(n.body);try{for(var v=!0,_=vi(_5(f)),T;T=yield et(_.next()),s=T.done,!s;v=!0){u=T.value,v=!1;const E=u;for(const I of p.decode(E)){const k=h.decode(I);k&&(yield yield et(k))}}}catch(E){a={error:E}}finally{try{!v&&!s&&(l=_.return)&&(yield et(l.call(_)))}finally{if(a)throw a.error}}for(const E of p.flush()){const I=h.decode(E);I&&(yield yield et(I))}})}function _5(n){return yi(this,arguments,function*(){var t,s,a,l;let u=new Uint8Array;try{for(var h=!0,p=vi(n),f;f=yield et(p.next()),t=f.done,!t;h=!0){l=f.value,h=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?ig(v):v;let T=new Uint8Array(u.length+_.length);T.set(u),T.set(_,u.length),u=T;let E;for(;(E=y5(u))!==-1;)yield yield et(u.slice(0,E)),u=u.slice(E)}}catch(v){s={error:v}}finally{try{!h&&!t&&(a=p.return)&&(yield et(a.call(p)))}finally{if(s)throw s.error}}u.length>0&&(yield yield et(u))})}class T5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,a]=S5(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function S5(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function E5(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,u=await(async()=>{var h;if(e.options.stream)return rs(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):kl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),f=(h=p==null?void 0:p.split(";")[0])===null||h===void 0?void 0:h.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await t.json():await t.text()})();return rs(n).debug(`[${s}] response parsed`,po({retryOfRequestLogID:a,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ag extends Promise{constructor(e,t,s=E5){super(a=>{a(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new ag(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k1=Symbol("brand.privateNullableHeaders");function*w5(n){if(!n)return;if(k1 in n){const{values:s,nulls:a}=n;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():ST(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=ST(s[1])?s[1]:[s[1]];let u=!1;for(const h of l)h!==void 0&&(e&&!u&&(u=!0,yield[a,null]),yield[a,h])}}const Jc=n=>{const e=new Headers,t=new Set;for(const s of n){const a=new Set;for(const[l,u]of w5(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),u===null?(e.delete(l),t.add(h)):(e.append(l,u),t.delete(h))}}return{[k1]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G0=n=>{var e,t,s,a,l,u;if(typeof globalThis.process<"u")return(s=(t=(e=W2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var C1;class lf{constructor(e){var t,s,a,l,u,h,p,{baseURL:f=G0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=G0("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=Nh(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(s=E.timeout)!==null&&s!==void 0?s:lf.DEFAULT_TIMEOUT,this.logger=(a=E.logger)!==null&&a!==void 0?a:console;const I="warn";this.logLevel=I,this.logLevel=(u=(l=kT(E.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:kT(G0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:I,this.fetchOptions=E.fetchOptions,this.maxRetries=(h=E.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(p=E.fetch)!==null&&p!==void 0?p:a5(),this.encoder=l5,this._options=E,this.apiKey=v,this.apiVersion=_,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Jc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Jc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Jc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new ni(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Tl}`}defaultIdempotencyKey(){return`stainless-node-retry-${qD()}`}makeStatusError(e,t,s,a){return ls.generate(e,t,s,a)}buildURL(e,t,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=$D(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return QD(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:t},a)))}request(e,t=null){return new ag(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var a,l,u;const h=await e,p=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;t==null&&(t=p),await this.prepareOptions(h);const{req:f,url:v,timeout:_}=await this.buildRequest(h,{retryCount:p-t});await this.prepareRequest(f,{url:v,options:h});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=s===void 0?"":`, retryOf: ${s}`,I=Date.now();if(rs(this).debug(`[${T}] sending request`,po({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:f.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new pp;const k=new AbortController,C=await this.fetchWithTimeout(v,f,_,k).catch(mp),j=Date.now();if(C instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if(!((u=h.signal)===null||u===void 0)&&u.aborted)throw new pp;const $=fp(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(t)return rs(this).info(`[${T}] connection ${$?"timed out":"failed"} - ${z}`),rs(this).debug(`[${T}] connection ${$?"timed out":"failed"} (${z})`,po({retryOfRequestLogID:s,url:v,durationMs:j-I,message:C.message})),this.retryRequest(h,t,s??T);throw rs(this).info(`[${T}] connection ${$?"timed out":"failed"} - error; no more retries left`),rs(this).debug(`[${T}] connection ${$?"timed out":"failed"} (error; no more retries left)`,po({retryOfRequestLogID:s,url:v,durationMs:j-I,message:C.message})),$?new d1:new rf({cause:C})}const R=`[${T}${E}] ${f.method} ${v} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${j-I}ms`;if(!C.ok){const z=await this.shouldRetry(C);if(t&&z){const M=`retrying, ${t} attempts remaining`;return await o5(C.body),rs(this).info(`${R} - ${M}`),rs(this).debug(`[${T}] response error (${M})`,po({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:j-I})),this.retryRequest(h,t,s??T,C.headers)}const $=z?"error; no more retries left":"error; not retryable";rs(this).info(`${R} - ${$}`);const J=await C.text().catch(M=>mp(M).message),Y=ZD(J),D=Y?void 0:J;throw rs(this).debug(`[${T}] response error (${$})`,po({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,message:D,durationMs:Date.now()-I})),this.makeStatusError(C.status,Y,D,C.headers)}return rs(this).info(R),rs(this).debug(`[${T}] response start`,po({retryOfRequestLogID:s,url:C.url,status:C.status,headers:C.headers,durationMs:j-I})),{response:C,options:h,controller:k,requestLogID:T,retryOfRequestLogID:s,startTime:I}}async fetchWithTimeout(e,t,s,a){const l=t||{},{signal:u,method:h}=l,p=Nh(l,["signal","method"]);u&&u.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),s),v=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),p);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(f)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,a){var l;let u;const h=a==null?void 0:a.get("retry-after-ms");if(h){const f=parseFloat(h);Number.isNaN(f)||(u=f)}const p=a==null?void 0:a.get("retry-after");if(p&&!u){const f=parseFloat(p);Number.isNaN(f)?u=Date.parse(p)-Date.now():u=f*1e3}if(!(u&&0<=u&&u<60*1e3)){const f=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,f)}return await e5(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return u*h*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,a,l;const u=Object.assign({},e),{method:h,path:p,query:f,defaultBaseURL:v}=u,_=this.buildURL(p,f,v);"timeout"in u&&XD("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:E}=this.buildBody({options:u}),I=await this.buildHeaders({options:e,method:h,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:I},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let h=Jc([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),i5()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Jc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:r5(e)}:this.encoder({body:e,headers:s})}}lf.DEFAULT_TIMEOUT=6e4;class On extends lf{constructor(){super(...arguments),this.interactions=new A1(this)}}C1=On;On.GeminiNextGenAPIClient=C1;On.GeminiNextGenAPIClientError=ni;On.APIError=ls;On.APIConnectionError=rf;On.APIConnectionTimeoutError=d1;On.APIUserAbortError=pp;On.NotFoundError=p1;On.ConflictError=g1;On.RateLimitError=y1;On.BadRequestError=h1;On.AuthenticationError=f1;On.InternalServerError=v1;On.PermissionDeniedError=m1;On.UnprocessableEntityError=x1;On.toFile=f5;On.Interactions=A1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function A5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function k5(n,e){const t={},s=m(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function C5(n,e){const t={},s=m(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function I5(n,e,t){const s={};if(m(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=m(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),m(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=m(n,["epochCount"]);e!==void 0&&l!=null&&g(e,["tuningTask","hyperparameters","epochCount"],l);const u=m(n,["learningRateMultiplier"]);if(u!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),m(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=m(n,["batchSize"]);e!==void 0&&h!=null&&g(e,["tuningTask","hyperparameters","batchSize"],h);const p=m(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function R5(n,e,t){const s={};let a=m(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const E=m(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec"],IT(E))}else if(a==="PREFERENCE_TUNING"){const E=m(n,["validationDataset"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec"],IT(E))}const l=m(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&g(e,["tunedModelDisplayName"],l);const u=m(n,["description"]);e!==void 0&&u!=null&&g(e,["description"],u);let h=m(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const E=m(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(h==="PREFERENCE_TUNING"){const E=m(n,["epochCount"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}let p=m(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=m(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="PREFERENCE_TUNING"){const E=m(n,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}let f=m(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=m(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(f==="PREFERENCE_TUNING"){const E=m(n,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}let v=m(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const E=m(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(v==="PREFERENCE_TUNING"){const E=m(n,["adapterSize"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}if(m(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=m(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=m(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function M5(n,e){const t={},s=m(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=m(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=m(n,["trainingDataset"]);l!=null&&H5(l);const u=m(n,["config"]);return u!=null&&I5(u,t),t}function D5(n,e){const t={},s=m(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=m(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const l=m(n,["trainingDataset"]);l!=null&&F5(l,t,e);const u=m(n,["config"]);return u!=null&&R5(u,t,e),t}function P5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function j5(n,e){const t={},s=m(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function L5(n,e,t){const s={},a=m(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=m(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=m(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function U5(n,e,t){const s={},a=m(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const l=m(n,["pageToken"]);e!==void 0&&l!=null&&g(e,["_query","pageToken"],l);const u=m(n,["filter"]);return e!==void 0&&u!=null&&g(e,["_query","filter"],u),s}function O5(n,e){const t={},s=m(n,["config"]);return s!=null&&L5(s,t),t}function V5(n,e){const t={},s=m(n,["config"]);return s!=null&&U5(s,t),t}function B5(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=m(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>I1(h))),g(t,["tuningJobs"],u)}return t}function G5(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const l=m(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>yp(h))),g(t,["tuningJobs"],u)}return t}function z5(n,e){const t={},s=m(n,["name"]);s!=null&&g(t,["model"],s);const a=m(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function H5(n,e){const t={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=m(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),g(t,["examples","examples"],a)}return t}function F5(n,e,t){const s={};let a=m(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=m(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=m(n,["gcsUri"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=m(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=m(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=m(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(m(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function I1(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["state"]);l!=null&&g(t,["state"],KE(l));const u=m(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=m(n,["tuningTask","startTime"]);h!=null&&g(t,["startTime"],h);const p=m(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const v=m(n,["description"]);v!=null&&g(t,["description"],v);const _=m(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=m(n,["_self"]);return T!=null&&g(t,["tunedModel"],z5(T)),t}function yp(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["state"]);l!=null&&g(t,["state"],KE(l));const u=m(n,["createTime"]);u!=null&&g(t,["createTime"],u);const h=m(n,["startTime"]);h!=null&&g(t,["startTime"],h);const p=m(n,["endTime"]);p!=null&&g(t,["endTime"],p);const f=m(n,["updateTime"]);f!=null&&g(t,["updateTime"],f);const v=m(n,["error"]);v!=null&&g(t,["error"],v);const _=m(n,["description"]);_!=null&&g(t,["description"],_);const T=m(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const E=m(n,["tunedModel"]);E!=null&&g(t,["tunedModel"],E);const I=m(n,["preTunedModel"]);I!=null&&g(t,["preTunedModel"],I);const k=m(n,["supervisedTuningSpec"]);k!=null&&g(t,["supervisedTuningSpec"],k);const C=m(n,["preferenceOptimizationSpec"]);C!=null&&g(t,["preferenceOptimizationSpec"],C);const j=m(n,["tuningDataStats"]);j!=null&&g(t,["tuningDataStats"],j);const R=m(n,["encryptionSpec"]);R!=null&&g(t,["encryptionSpec"],R);const z=m(n,["partnerModelTuningSpec"]);z!=null&&g(t,["partnerModelTuningSpec"],z);const $=m(n,["customBaseModel"]);$!=null&&g(t,["customBaseModel"],$);const J=m(n,["experiment"]);J!=null&&g(t,["experiment"],J);const Y=m(n,["labels"]);Y!=null&&g(t,["labels"],Y);const D=m(n,["outputUri"]);D!=null&&g(t,["outputUri"],D);const N=m(n,["pipelineJob"]);N!=null&&g(t,["pipelineJob"],N);const M=m(n,["serviceAccount"]);M!=null&&g(t,["serviceAccount"],M);const L=m(n,["tunedModelDisplayName"]);L!=null&&g(t,["tunedModelDisplayName"],L);const O=m(n,["veoTuningSpec"]);return O!=null&&g(t,["veoTuningSpec"],O),t}function q5(n,e){const t={},s=m(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=m(n,["name"]);a!=null&&g(t,["name"],a);const l=m(n,["metadata"]);l!=null&&g(t,["metadata"],l);const u=m(n,["done"]);u!=null&&g(t,["done"],u);const h=m(n,["error"]);return h!=null&&g(t,["error"],h),t}function IT(n,e){const t={},s=m(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=m(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K5 extends Ra{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Sa.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),l=await this.tuneMldevInternal(a);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:rp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=j5(e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>yp(v))}else{const f=P5(e);return h=Re("{name}",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>I1(v))}}async listInternal(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=V5(e);return h=Re("tuningJobs",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=G5(v),T=new nT;return Object.assign(T,_),T})}else{const f=O5(e);return h=Re("tunedModels",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=B5(v),T=new nT;return Object.assign(T,_),T})}}async cancel(e){var t,s,a,l;let u,h="",p={};if(this.apiClient.isVertexAI()){const f=A5(e);return h=Re("{name}:cancel",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=C5(v),T=new sT;return Object.assign(T,_),T})}else{const f=N5(e);return h=Re("{name}:cancel",f._url),p=f._query,delete f._url,delete f._query,u=this.apiClient.request({path:h,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),u.then(v=>{const _=k5(v),T=new sT;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI()){const h=D5(e,e);return l=Re("tuningJobs",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const v=f;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>yp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=M5(e);return l=Re("tunedModels",h._url),u=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(f=>{const v=f;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>q5(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $5{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Y5=1024*1024*8,J5=3,Q5=1e3,W5=2,kh="x-goog-upload-status";async function X5(n,e,t){var s;const a=await R1(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[kh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Z5(n,e,t){var s;const a=await R1(n,e,t),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[kh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=BE(l),h=new Xp;return Object.assign(h,u),h}async function R1(n,e,t){var s,a;let l=0,u=0,h=new op(new Response),p="upload";for(l=n.size;u<l;){const f=Math.min(Y5,l-u),v=n.slice(u,u+f);u+f>=l&&(p+=", finalize");let _=0,T=Q5;for(;_<J5&&(h=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(f)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[kh]));)_++,await tP(T),T=T*W5;if(u+=f,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[kh])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function eP(n){return{size:n.size,type:n.type}}function tP(n){return new Promise(e=>setTimeout(e,n))}class nP{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await X5(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Z5(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sP{create(e,t,s){return new iP(e,t,s)}}class iP{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RT="x-goog-api-key";class aP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(RT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(RT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rP="gl-node/";class oP{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new On({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=tC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new aP(this.apiKey);this.apiClient=new eD({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:rP+"web",uploader:new nP,downloader:new $5}),this.models=new vD(this.apiClient),this.live=new fD(this.apiClient,a,new sP),this.batches=new II(this.apiClient),this.chats=new dR(this.models,this.apiClient),this.caches=new lR(this.apiClient),this.files=new _R(this.apiClient),this.operations=new bD(this.apiClient),this.authTokens=new LD(this.apiClient),this.tunings=new K5(this.apiClient),this.fileSearchStores=new FD(this.apiClient)}}const lP=new oP({apiKey:"AIzaSyBm_oApA7D89kWU7QLCTfoeHn9WaZgHJpI"});function MT(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const M1={type:ke.OBJECT,properties:{id:{type:ke.STRING},type:{type:ke.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:ke.STRING},options:{type:ke.ARRAY,items:{type:ke.STRING}},correctAnswer:{type:ke.STRING},tkpPoints:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{option:{type:ke.STRING},points:{type:ke.INTEGER}}}},explanation:{type:ke.STRING},shortcut:{type:ke.STRING},metadata:{type:ke.OBJECT,properties:{difficulty:{type:ke.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:ke.INTEGER},topic:{type:ke.STRING},subtest:{type:ke.STRING},trapPattern:{type:ke.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},cP={type:ke.OBJECT,properties:{questions:{type:ke.ARRAY,items:M1}},required:["questions"]};async function Qi(n,e,t){const s="gemini-3-flash-preview",a={temperature:.9,topP:.95,topK:40};e&&(a.responseMimeType="application/json",a.responseSchema=e);const l=[];t&&l.push({inlineData:{mimeType:"application/pdf",data:t}}),l.push({text:n});try{const h=(await lP.models.generateContent({model:s,contents:{role:"user",parts:l},config:a})).text;if(!h)throw new Error("Empty response from AI");if(e)try{let p=h.trim();return p.startsWith("```json")?p=p.replace(/^```json\n?/,"").replace(/\n?```$/,""):p.startsWith("```")&&(p=p.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(p)}catch(p){console.error("JSON Parse Error",p);const f=h.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return f?JSON.parse(f[0]):h}return h}catch(u){throw console.error("Gemini API Error:",u),u}}function uP(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0&&(n.options.includes("Sangat Setuju")||n.options.includes("Sangat Tidak Setuju"))||(n.options=MT(n.options))),n}const on=async(n,e,t,s=5,a=[],l,u,h)=>{let p="",f;const v="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let _=cP;const T=e==="TPA"&&typeof t=="string"&&(t.includes("Psikotes")||t.includes("Kepribadian")||t.includes("Logika Gambar"));if(e==="GENERAL"&&u){const k=t,C=k.type==="topic"?`Topic: ${k.content}`:"Material Content";k.type==="pdf"&&(f=k.content);const j=k.difficultyPreference||"MEDIUM",R=`DIFFICULTY LEVEL: ${j}. ${j==="HARD"?"Use complex analysis/HOTS.":j==="EASY"?"Use straightforward recall.":""}`;u==="ACTIVE_RECALL"?p=`Create ${s} Active Recall questions (Short Answer format) based on this: ${C}. 
          ${v} ${R}
          Questions must be specific and require recall of key facts/concepts.`:u==="PBL"?p=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${v} ${R}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${C}. 
          Each question should be a realistic scenario requiring application of the concept.`:p=`Create ${s} practice questions based on: ${C}. ${v} ${R}`,k.type==="text"&&(p+=`

CONTENT: ${k.content}`)}else if(T){const k=t;p=`GENERATE QUESTIONS FOR PSIKOTEST KEDINASAN (PKN STAN).
      Subtest Context: ${k}.
      Count: ${s}.
      
      RULES:
      `,k.includes("Kepribadian")?p+=`
          TYPE: PERSONALITY TEST (Tes Kepribadian).
          Format: Statement with Likert Scale options (Sangat Setuju, Setuju, Ragu-ragu, Tidak Setuju, Sangat Tidak Setuju) OR Forced Choice (A/B).
          Topics: Integritas, Kerjasama, Orientasi Pelayanan, Stabilitas Emosi.
          SCORING (tkpPoints):
          - Assign points 1-5 based on positive/negative traits for ASN/Kemenkeu profile.
          - Consistency is key.
          - NO "correctAnswer" strictly, but define the 5-point option as "correctAnswer" for system compatibility.
          `:k.includes("Gambar")?p+=`
          TYPE: TES LOGIKA GAMBAR (Abstract Reasoning).
          Format: Text description of a visual pattern (since we are text-based).
          Example: "Gambar 1: Segitiga tegak. Gambar 2: Segitiga terbalik. Gambar 3: Segi empat tegak. Gambar 4: ...?"
          Options: Describe the next shape/pattern.
          Focus: Rotasi, Transformasi, Analogi Gambar.
          `:p+=`
          TYPE: TIU (Tes Intelegensi Umum).
          Focus: 
          - Verbal: Sinonim/Antonim (HOTS vocabulary), Analogi.
          - Numerik: Deret Angka (Complex), Aritmatika.
          - Logika: Silogisme, Analitis (Posisi duduk/urutan).
          Time constraint simulation: Questions should be solvable in 60-90s.
          `,p+=`
Language: Bahasa Indonesia. Provide detailed explanation for TIU/Logika.`}else{let k="";e==="SKD"&&typeof t=="string"&&(t.includes("TIU")||t.includes("Intelegensia"));const C=e==="UTBK",j=e==="TPA"&&!T;if(h==="HOTS"?(k=`
          DIFFICULTY DISTRIBUTION RULES (STRICT):
          - **80% of questions MUST be HOTS (High Order Thinking Skills)**.
          - **20% of questions should be VERY HARD**.
          `,C&&(k+=" CONTEXT: UTBK SNBT 2025 (HOTS). Reading & Quant focused."),j&&(k+=" CONTEXT: TPA & TBI (Seleksi Pascasarjana/Kerja). Advanced logic & vocab.")):e==="SKD"&&h==="TKP"?k="CONTEXT: SKD TKP. Focus on professional scenarios.":k="Standard difficulty. Mix of Easy, Medium, Hard.",e==="INTERVIEW")p=`Roleplay Task: Act as a professional HR Interviewer. Context: ${t}. Generate ${s} interview questions.`,_={type:ke.OBJECT,properties:{questions:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{id:{type:ke.STRING},type:{type:ke.STRING,enum:["long_text"]},content:{type:ke.STRING},explanation:{type:ke.STRING},metadata:{type:ke.OBJECT,properties:{topic:{type:ke.STRING}}}},required:["content","type"]}}}};else{const R=`Generate ${s} distinct questions. ${k}. Provide DETAILED explanation.`;typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&h==="TKP"?p=`SKD TKP MODE. ${R} 
           SCORING: 1-5 points. 
           FORMAT: Provide 'tkpPoints' mapping each option to score.`:p=`TRY OUT / PRACTICE. Context: ${e} - ${JSON.stringify(t)}. ${R}`}}return((await Qi(p,_,f)).questions||[]).filter(k=>!!k).map(k=>{const C=uP(k);return e==="INTERVIEW"&&(C.type="long_text",C.options=[]),C})},dP=async(n,e,t)=>{const s={type:ke.OBJECT,properties:{score:{type:ke.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:ke.BOOLEAN,description:"True if score > 70"},feedback:{type:ke.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},a=`Evaluate this answer. 
  Question: ${n}
  Correct Answer / Key Concept: ${e}
  User Answer: ${t}
  
  Provide a score (0-100), boolean correctness, and feedback.`;return Qi(a,s)},hP=async n=>{const e=`The user is weak in these topics: ${n.join(", ")}. Provide a concise, actionable study plan (3 paragraphs max) to improve.`;return Qi(e)},fP=async(n,e)=>{const t={type:ke.OBJECT,properties:{score:{type:ke.INTEGER},feedback:{type:ke.STRING},improvedAnswer:{type:ke.STRING},keyPointsCovered:{type:ke.ARRAY,items:{type:ke.STRING}},toneAnalysis:{type:ke.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate this job interview answer given by a candidate.
  Question: ${n}
  Candidate Answer: ${e}
  
  Act as a senior HR manager. Critique the tone, content, and structure.
  `;return Qi(s,t)},mP=async(n,e)=>{const t={type:ke.OBJECT,properties:{understandingScore:{type:ke.INTEGER},simplificationQuality:{type:ke.STRING},missingConcepts:{type:ke.ARRAY,items:{type:ke.STRING}},correction:{type:ke.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate this Feynman Technique explanation. The user is trying to explain "${n}" to a 5-year old.
  Explanation: ${e}`;return Qi(s,t)},pP=async n=>n.type==="pdf"&&n.content?await Qi("Extract and summarize the main text content from this PDF for study purposes. Ignore headers/footers.",void 0,n.content):n.content,gP=async(n,e)=>{const t=`Context: University Thesis (Skripsi). Topic: ${n}. Task: ${e}. Provide detailed output.`;return Qi(t)},xP=async n=>{const e={type:ke.OBJECT,properties:{flashcards:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{id:{type:ke.STRING},title:{type:ke.STRING,description:"Short title of the concept"},front:{type:ke.STRING},back:{type:ke.STRING}},required:["front","back","title"]}}}},t=`Create 10 flashcards based on this material: ${n.extractedText||n.content}. 
  Ensure each flashcard has a short 'title' representing the concept (e.g. 'Newtons First Law', 'Definition of X').`;return(await Qi(t,e)).flashcards},yP=async n=>{const e={type:ke.OBJECT,properties:{label:{type:ke.STRING},children:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{label:{type:ke.STRING},children:{type:ke.ARRAY,items:{type:ke.OBJECT,properties:{label:{type:ke.STRING}}}}}}}}},t=`Create a hierarchical mind map structure (JSON) for the topic: ${n.title||n.content.substring(0,50)}. Base it on the content.`;return Qi(t,e)},vP=async(n,e,t)=>{const s={type:ke.OBJECT,properties:{topic:{type:ke.STRING},summary:{type:ke.STRING},keyPoints:{type:ke.ARRAY,items:{type:ke.STRING}},question:M1},required:["topic","summary","keyPoints","question"]},a=`Create a Drill Card (Mini Lesson + 1 Question) for ${n} - ${e} ${t?"("+t+")":""}.`;return Qi(a,s)},DT=async n=>{const e=on(qe.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK) - Nasionalisme, Integritas, Bela Negara, Pilar Negara",30,[],n,void 0,"HOTS"),t=on(qe.SIMULATION,"SKD","Tes Intelegensia Umum (TIU) - Verbal, Numerik, Figural",35,[],n,void 0,"HOTS"),s=on(qe.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP) - Pelayanan Publik, Jejaring Kerja, Sosial Budaya, TIK, Profesionalisme, Anti Radikalisme",45,[],n,void 0,"TKP"),[a,l,u]=await Promise.all([e,t,s]);return a.forEach(h=>h.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),l.forEach(h=>h.metadata.subtest="Tes Intelegensia Umum (TIU)"),u.forEach(h=>h.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...a,...l,...u]},PT=async()=>{const n=on(qe.SIMULATION,"UTBK","Penalaran Umum (Induktif, Deduktif, Kuantitatif)",30,[],void 0,void 0,"HOTS"),e=on(qe.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=on(qe.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=on(qe.SIMULATION,"UTBK","Pengetahuan Kuantitatif (Math & Logic)",20,[],void 0,void 0,"HOTS"),a=on(qe.SIMULATION,"UTBK","Literasi Bahasa Indonesia (Teks Panjang)",25,[],void 0,void 0,"HOTS"),l=on(qe.SIMULATION,"UTBK","Literasi Bahasa Inggris (Long Text Analysis)",25,[],void 0,void 0,"HOTS"),u=on(qe.SIMULATION,"UTBK","Penalaran Matematika (Complex Word Problems)",20,[],void 0,void 0,"HOTS"),[h,p,f,v,_,T,E]=await Promise.all([n,e,t,s,a,l,u]);return h.forEach(I=>I.metadata.subtest="Penalaran Umum"),p.forEach(I=>I.metadata.subtest="Pengetahuan dan Pemahaman Umum"),f.forEach(I=>I.metadata.subtest="Pemahaman Bacaan dan Menulis"),v.forEach(I=>I.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(I=>I.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(I=>I.metadata.subtest="Literasi Bahasa Inggris"),E.forEach(I=>I.metadata.subtest="Penalaran Matematika"),[...h,...p,...f,...v,..._,...T,...E]},jT=async()=>{const n=on(qe.SIMULATION,"TPA","Subtest: TPA - Kemampuan Verbal. Topics: Analogi Kata, Sinonim/Antonim, Wacana. Count: 15. Difficulty: HOTS.",15,[],void 0,void 0,"HOTS"),e=on(qe.SIMULATION,"TPA","Subtest: TPA - Kemampuan Kuantitatif. Topics: Deret Angka, Aritmatika, Aljabar, Geometri. Count: 15. Difficulty: HOTS.",15,[],void 0,void 0,"HOTS"),t=on(qe.SIMULATION,"TPA","Subtest: TPA - Kemampuan Penalaran. Topics: Silogisme, Analitis, Figural. Count: 15. Difficulty: HOTS.",15,[],void 0,void 0,"HOTS"),s=on(qe.SIMULATION,"TPA","Subtest: TBI - Tes Bahasa Inggris. Topics: Structure, Reading. Count: 20. Difficulty: TOEFL 550.",20,[],void 0,void 0,"HOTS"),[a,l,u,h]=await Promise.all([n,e,t,s]);return a.forEach(p=>p.metadata.subtest="TPA - Kemampuan Verbal"),l.forEach(p=>p.metadata.subtest="TPA - Kemampuan Kuantitatif"),u.forEach(p=>p.metadata.subtest="TPA - Kemampuan Penalaran"),h.forEach(p=>p.metadata.subtest="TBI - Bahasa Inggris"),[...a,...l,...u,...h]},LT=async()=>{const n=on(qe.SIMULATION,"TPA",`PSIKOTEST KEDINASAN (PKN STAN) - TIU. 
         Topics: Sinonim, Antonim, Analogi, Deret, Aritmatika, Silogisme, Analitis.
         Count: 30 Questions. Time limit tight (60s/soal).`,30,[],void 0,void 0,"HOTS"),e=on(qe.SIMULATION,"TPA",`PSIKOTEST KEDINASAN - TES LOGIKA GAMBAR.
         Topics: Deret Gambar, Pola Bentuk, Rotasi, Transformasi.
         Count: 15 Questions. Visual reasoning.`,15,[],void 0,void 0,"HOTS"),t=on(qe.SIMULATION,"TPA",`PSIKOTEST KEDINASAN - TES KEPRIBADIAN.
         Topics: Sikap Kerja, Kejujuran, Tanggung Jawab, Stabilitas Emosi.
         Format: Likert Scale (Sangat Setuju - Sangat Tidak Setuju).
         Count: 20 Questions.
         Output must include 'tkpPoints' for 1-5 scoring based on ASN values.`,20,[],void 0,void 0,"TKP"),[s,a,l]=await Promise.all([n,e,t]);return s.forEach(u=>u.metadata.subtest="TIU - Verbal & Numerik"),a.forEach(u=>u.metadata.subtest="Tes Logika Gambar (Abstrak)"),l.forEach(u=>u.metadata.subtest="Tes Kepribadian"),[...s,...a,...l]},UT=async()=>on(qe.SIMULATION,"PSIKOTEST","SIMULATION",40,[],void 0,void 0,"HOTS"),bP=()=>{};var OT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},_P=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],h=n[t++],p=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},P1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,p=a+2<n.length,f=p?n[a+2]:0,v=l>>2,_=(l&3)<<4|h>>4;let T=(h&15)<<2|f>>6,E=f&63;p||(E=64,u||(T=64)),s.push(t[v],t[_],t[T],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(D1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_P(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const f=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||h==null||f==null||_==null)throw new TP;const T=l<<2|h>>4;if(s.push(T),f!==64){const E=h<<4&240|f>>2;if(s.push(E),_!==64){const I=f<<6&192|_;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SP=function(n){const e=D1(n);return P1.encodeByteArray(e,!0)},Ch=function(n){return SP(n).replace(/\./g,"")},j1=function(n){try{return P1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=()=>EP().__FIREBASE_DEFAULTS__,NP=()=>{if(typeof process>"u"||typeof OT>"u")return;const n=OT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},AP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&j1(n[1]);return e&&JSON.parse(e)},cf=()=>{try{return bP()||wP()||NP()||AP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},L1=n=>{var e,t;return(t=(e=cf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},kP=n=>{const e=L1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},U1=()=>{var n;return(n=cf())==null?void 0:n.config},O1=n=>{var e;return(e=cf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ch(JSON.stringify(t)),Ch(JSON.stringify(u)),""].join(".")}const tu={};function RP(){const n={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?n.emulator.push(e):n.prod.push(e);return n}function MP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let VT=!1;function B1(n,e){if(typeof window>"u"||typeof document>"u"||!Yl(window.location.host)||tu[n]===e||tu[n]||VT)return;tu[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=RP().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,E){T.setAttribute("width","24"),T.setAttribute("id",E),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{VT=!0,u()},T}function v(T,E){T.setAttribute("id",E),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=MP(s),E=t("text"),I=document.getElementById(E)||document.createElement("span"),k=t("learnmore"),C=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),R=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const z=T.element;h(z),v(C,k);const $=f();p(R,j),z.append(R,I,C,$),document.body.appendChild(z)}l?(I.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ss())}function PP(){var e;const n=(e=cf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function UP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OP(){const n=ss();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VP(){return!PP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BP(){try{return typeof indexedDB=="object"}catch{return!1}}function GP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="FirebaseError";class Da extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=zP,Object.setPrototypeOf(this,Da.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?HP(l,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Da(a,h,s)}}function HP(n,e){return n.replace(FP,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const FP=/\{\$([^}]+)}/g;function qP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Eo(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],u=e[a];if(BT(l)&&BT(u)){if(!Eo(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function BT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function KP(n,e){const t=new $P(n,e);return t.subscribe.bind(t)}class $P{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");YP(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=z0),a.error===void 0&&(a.error=z0),a.complete===void 0&&(a.complete=z0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function z0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(n){return n&&n._delegate?n._delegate:n}class wo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new CP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WP(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:QP(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QP(n){return n===go?void 0:n}function WP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(yt||(yt={}));const ZP={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},ej=yt.INFO,tj={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},nj=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=tj[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rg{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const sj=(n,e)=>e.some(t=>n instanceof t);let GT,zT;function ij(){return GT||(GT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aj(){return zT||(zT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G1=new WeakMap,vp=new WeakMap,z1=new WeakMap,H0=new WeakMap,og=new WeakMap;function rj(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Sr(n.result)),a()},u=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&G1.set(t,n)}).catch(()=>{}),og.set(e,n),e}function oj(n){if(vp.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});vp.set(n,e)}let bp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||z1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Sr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function lj(n){bp=n(bp)}function cj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(F0(this),e,...t);return z1.set(s,e.sort?e.sort():[e]),Sr(s)}:aj().includes(n)?function(...e){return n.apply(F0(this),e),Sr(G1.get(this))}:function(...e){return Sr(n.apply(F0(this),e))}}function uj(n){return typeof n=="function"?cj(n):(n instanceof IDBTransaction&&oj(n),sj(n,ij())?new Proxy(n,bp):n)}function Sr(n){if(n instanceof IDBRequest)return rj(n);if(H0.has(n))return H0.get(n);const e=uj(n);return e!==n&&(H0.set(n,e),og.set(e,n)),e}const F0=n=>og.get(n);function dj(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),h=Sr(u);return s&&u.addEventListener("upgradeneeded",p=>{s(Sr(u.result),p.oldVersion,p.newVersion,Sr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const hj=["get","getKey","getAll","getAllKeys","count"],fj=["put","add","delete","clear"],q0=new Map;function HT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(q0.get(e))return q0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=fj.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||hj.includes(t)))return;const l=async function(u,...h){const p=this.transaction(u,a?"readwrite":"readonly");let f=p.store;return s&&(f=f.index(h.shift())),(await Promise.all([f[t](...h),a&&p.done]))[0]};return q0.set(e,l),l}lj(n=>({...n,get:(e,t,s)=>HT(e,t)||n.get(e,t,s),has:(e,t)=>!!HT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pj(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function pj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _p="@firebase/app",FT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new rg("@firebase/app"),gj="@firebase/app-compat",xj="@firebase/analytics-compat",yj="@firebase/analytics",vj="@firebase/app-check-compat",bj="@firebase/app-check",_j="@firebase/auth",Tj="@firebase/auth-compat",Sj="@firebase/database",Ej="@firebase/data-connect",wj="@firebase/database-compat",Nj="@firebase/functions",Aj="@firebase/functions-compat",kj="@firebase/installations",Cj="@firebase/installations-compat",Ij="@firebase/messaging",Rj="@firebase/messaging-compat",Mj="@firebase/performance",Dj="@firebase/performance-compat",Pj="@firebase/remote-config",jj="@firebase/remote-config-compat",Lj="@firebase/storage",Uj="@firebase/storage-compat",Oj="@firebase/firestore",Vj="@firebase/ai",Bj="@firebase/firestore-compat",Gj="firebase",zj="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="[DEFAULT]",Hj={[_p]:"fire-core",[gj]:"fire-core-compat",[yj]:"fire-analytics",[xj]:"fire-analytics-compat",[bj]:"fire-app-check",[vj]:"fire-app-check-compat",[_j]:"fire-auth",[Tj]:"fire-auth-compat",[Sj]:"fire-rtdb",[Ej]:"fire-data-connect",[wj]:"fire-rtdb-compat",[Nj]:"fire-fn",[Aj]:"fire-fn-compat",[kj]:"fire-iid",[Cj]:"fire-iid-compat",[Ij]:"fire-fcm",[Rj]:"fire-fcm-compat",[Mj]:"fire-perf",[Dj]:"fire-perf-compat",[Pj]:"fire-rc",[jj]:"fire-rc-compat",[Lj]:"fire-gcs",[Uj]:"fire-gcs-compat",[Oj]:"fire-fst",[Bj]:"fire-fst-compat",[Vj]:"fire-vertex","fire-js":"fire-js",[Gj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,Fj=new Map,Sp=new Map;function qT(n,e){try{n.container.addComponent(e)}catch(t){Ea.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jl(n){const e=n.name;if(Sp.has(e))return Ea.debug(`There were multiple attempts to register component ${e}.`),!1;Sp.set(e,n);for(const t of Ih.values())qT(t,n);for(const t of Fj.values())qT(t,n);return!0}function lg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new bu("app","Firebase",qj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=zj;function H1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Tp,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Er.create("bad-app-name",{appName:String(a)});if(t||(t=U1()),!t)throw Er.create("no-options");const l=Ih.get(a);if(l){if(Eo(t,l.options)&&Eo(s,l.config))return l;throw Er.create("duplicate-app",{appName:a})}const u=new XP(a);for(const p of Sp.values())u.addComponent(p);const h=new Kj(t,s,u);return Ih.set(a,h),h}function F1(n=Tp){const e=Ih.get(n);if(!e&&n===Tp&&U1())return H1();if(!e)throw Er.create("no-app",{appName:n});return e}function wr(n,e,t){let s=Hj[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ea.warn(u.join(" "));return}jl(new wo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="firebase-heartbeat-database",Yj=1,ou="firebase-heartbeat-store";let K0=null;function q1(){return K0||(K0=dj($j,Yj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ou)}catch(t){console.warn(t)}}}}).catch(n=>{throw Er.create("idb-open",{originalErrorMessage:n.message})})),K0}async function Jj(n){try{const t=(await q1()).transaction(ou),s=await t.objectStore(ou).get(K1(n));return await t.done,s}catch(e){if(e instanceof Da)Ea.warn(e.message);else{const t=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ea.warn(t.message)}}}async function KT(n,e){try{const s=(await q1()).transaction(ou,"readwrite");await s.objectStore(ou).put(e,K1(n)),await s.done}catch(t){if(t instanceof Da)Ea.warn(t.message);else{const s=Er.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ea.warn(s.message)}}}function K1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=1024,Wj=30;class Xj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$T();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>Wj){const u=t6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ea.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$T(),{heartbeatsToSend:s,unsentEntries:a}=Zj(this._heartbeatsCache.heartbeats),l=Ch(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ea.warn(t),""}}}function $T(){return new Date().toISOString().substring(0,10)}function Zj(n,e=Qj){const t=[];let s=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),YT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),YT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class e6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BP()?GP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Jj(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return KT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return KT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function YT(n){return Ch(JSON.stringify({version:2,heartbeats:n})).length}function t6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(n){jl(new wo("platform-logger",e=>new mj(e),"PRIVATE")),jl(new wo("heartbeat",e=>new Xj(e),"PRIVATE")),wr(_p,FT,n),wr(_p,FT,"esm2020"),wr("fire-js","")}n6("");var s6="firebase",i6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(s6,i6,"app");var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nr,$1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function M(){}M.prototype=N.prototype,D.F=N.prototype,D.prototype=new M,D.prototype.constructor=D,D.D=function(L,O,B){for(var U=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)U[Te-2]=arguments[Te];return N.prototype[O].apply(L,U)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,N,M){M||(M=0);const L=Array(16);if(typeof N=="string")for(var O=0;O<16;++O)L[O]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(O=0;O<16;++O)L[O]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=D.g[0],M=D.g[1],O=D.g[2];let B=D.g[3],U;U=N+(B^M&(O^B))+L[0]+3614090360&4294967295,N=M+(U<<7&4294967295|U>>>25),U=B+(O^N&(M^O))+L[1]+3905402710&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(M^B&(N^M))+L[2]+606105819&4294967295,O=B+(U<<17&4294967295|U>>>15),U=M+(N^O&(B^N))+L[3]+3250441966&4294967295,M=O+(U<<22&4294967295|U>>>10),U=N+(B^M&(O^B))+L[4]+4118548399&4294967295,N=M+(U<<7&4294967295|U>>>25),U=B+(O^N&(M^O))+L[5]+1200080426&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(M^B&(N^M))+L[6]+2821735955&4294967295,O=B+(U<<17&4294967295|U>>>15),U=M+(N^O&(B^N))+L[7]+4249261313&4294967295,M=O+(U<<22&4294967295|U>>>10),U=N+(B^M&(O^B))+L[8]+1770035416&4294967295,N=M+(U<<7&4294967295|U>>>25),U=B+(O^N&(M^O))+L[9]+2336552879&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(M^B&(N^M))+L[10]+4294925233&4294967295,O=B+(U<<17&4294967295|U>>>15),U=M+(N^O&(B^N))+L[11]+2304563134&4294967295,M=O+(U<<22&4294967295|U>>>10),U=N+(B^M&(O^B))+L[12]+1804603682&4294967295,N=M+(U<<7&4294967295|U>>>25),U=B+(O^N&(M^O))+L[13]+4254626195&4294967295,B=N+(U<<12&4294967295|U>>>20),U=O+(M^B&(N^M))+L[14]+2792965006&4294967295,O=B+(U<<17&4294967295|U>>>15),U=M+(N^O&(B^N))+L[15]+1236535329&4294967295,M=O+(U<<22&4294967295|U>>>10),U=N+(O^B&(M^O))+L[1]+4129170786&4294967295,N=M+(U<<5&4294967295|U>>>27),U=B+(M^O&(N^M))+L[6]+3225465664&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^M&(B^N))+L[11]+643717713&4294967295,O=B+(U<<14&4294967295|U>>>18),U=M+(B^N&(O^B))+L[0]+3921069994&4294967295,M=O+(U<<20&4294967295|U>>>12),U=N+(O^B&(M^O))+L[5]+3593408605&4294967295,N=M+(U<<5&4294967295|U>>>27),U=B+(M^O&(N^M))+L[10]+38016083&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^M&(B^N))+L[15]+3634488961&4294967295,O=B+(U<<14&4294967295|U>>>18),U=M+(B^N&(O^B))+L[4]+3889429448&4294967295,M=O+(U<<20&4294967295|U>>>12),U=N+(O^B&(M^O))+L[9]+568446438&4294967295,N=M+(U<<5&4294967295|U>>>27),U=B+(M^O&(N^M))+L[14]+3275163606&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^M&(B^N))+L[3]+4107603335&4294967295,O=B+(U<<14&4294967295|U>>>18),U=M+(B^N&(O^B))+L[8]+1163531501&4294967295,M=O+(U<<20&4294967295|U>>>12),U=N+(O^B&(M^O))+L[13]+2850285829&4294967295,N=M+(U<<5&4294967295|U>>>27),U=B+(M^O&(N^M))+L[2]+4243563512&4294967295,B=N+(U<<9&4294967295|U>>>23),U=O+(N^M&(B^N))+L[7]+1735328473&4294967295,O=B+(U<<14&4294967295|U>>>18),U=M+(B^N&(O^B))+L[12]+2368359562&4294967295,M=O+(U<<20&4294967295|U>>>12),U=N+(M^O^B)+L[5]+4294588738&4294967295,N=M+(U<<4&4294967295|U>>>28),U=B+(N^M^O)+L[8]+2272392833&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^M)+L[11]+1839030562&4294967295,O=B+(U<<16&4294967295|U>>>16),U=M+(O^B^N)+L[14]+4259657740&4294967295,M=O+(U<<23&4294967295|U>>>9),U=N+(M^O^B)+L[1]+2763975236&4294967295,N=M+(U<<4&4294967295|U>>>28),U=B+(N^M^O)+L[4]+1272893353&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^M)+L[7]+4139469664&4294967295,O=B+(U<<16&4294967295|U>>>16),U=M+(O^B^N)+L[10]+3200236656&4294967295,M=O+(U<<23&4294967295|U>>>9),U=N+(M^O^B)+L[13]+681279174&4294967295,N=M+(U<<4&4294967295|U>>>28),U=B+(N^M^O)+L[0]+3936430074&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^M)+L[3]+3572445317&4294967295,O=B+(U<<16&4294967295|U>>>16),U=M+(O^B^N)+L[6]+76029189&4294967295,M=O+(U<<23&4294967295|U>>>9),U=N+(M^O^B)+L[9]+3654602809&4294967295,N=M+(U<<4&4294967295|U>>>28),U=B+(N^M^O)+L[12]+3873151461&4294967295,B=N+(U<<11&4294967295|U>>>21),U=O+(B^N^M)+L[15]+530742520&4294967295,O=B+(U<<16&4294967295|U>>>16),U=M+(O^B^N)+L[2]+3299628645&4294967295,M=O+(U<<23&4294967295|U>>>9),U=N+(O^(M|~B))+L[0]+4096336452&4294967295,N=M+(U<<6&4294967295|U>>>26),U=B+(M^(N|~O))+L[7]+1126891415&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~M))+L[14]+2878612391&4294967295,O=B+(U<<15&4294967295|U>>>17),U=M+(B^(O|~N))+L[5]+4237533241&4294967295,M=O+(U<<21&4294967295|U>>>11),U=N+(O^(M|~B))+L[12]+1700485571&4294967295,N=M+(U<<6&4294967295|U>>>26),U=B+(M^(N|~O))+L[3]+2399980690&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~M))+L[10]+4293915773&4294967295,O=B+(U<<15&4294967295|U>>>17),U=M+(B^(O|~N))+L[1]+2240044497&4294967295,M=O+(U<<21&4294967295|U>>>11),U=N+(O^(M|~B))+L[8]+1873313359&4294967295,N=M+(U<<6&4294967295|U>>>26),U=B+(M^(N|~O))+L[15]+4264355552&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~M))+L[6]+2734768916&4294967295,O=B+(U<<15&4294967295|U>>>17),U=M+(B^(O|~N))+L[13]+1309151649&4294967295,M=O+(U<<21&4294967295|U>>>11),U=N+(O^(M|~B))+L[4]+4149444226&4294967295,N=M+(U<<6&4294967295|U>>>26),U=B+(M^(N|~O))+L[11]+3174756917&4294967295,B=N+(U<<10&4294967295|U>>>22),U=O+(N^(B|~M))+L[2]+718787259&4294967295,O=B+(U<<15&4294967295|U>>>17),U=M+(B^(O|~N))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(O+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+B&4294967295}s.prototype.v=function(D,N){N===void 0&&(N=D.length);const M=N-this.blockSize,L=this.C;let O=this.h,B=0;for(;B<N;){if(O==0)for(;B<=M;)a(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<N;)if(L[O++]=D.charCodeAt(B++),O==this.blockSize){a(this,L),O=0;break}}else for(;B<N;)if(L[O++]=D[B++],O==this.blockSize){a(this,L),O=0;break}}this.h=O,this.o+=N},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var M=D.length-8;M<D.length;++M)D[M]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,M=0;M<4;++M)for(let L=0;L<32;L+=8)D[N++]=this.g[M]>>>L&255;return D};function l(D,N){var M=h;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=N(D)}function u(D,N){this.h=N;const M=[];let L=!0;for(let O=D.length-1;O>=0;O--){const B=D[O]|0;L&&B==N||(M[O]=B,L=!1)}this.g=M}var h={};function p(D){return-128<=D&&D<128?l(D,function(N){return new u([N|0],N<0?-1:0)}):new u([D|0],D<0?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return _;if(D<0)return C(f(-D));const N=[];let M=1;for(let L=0;D>=M;L++)N[L]=D/M|0,M*=4294967296;return new u(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return C(v(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=f(Math.pow(N,8));let L=_;for(let B=0;B<D.length;B+=8){var O=Math.min(8,D.length-B);const U=parseInt(D.substring(B,B+O),N);O<8?(O=f(Math.pow(N,O)),L=L.j(O).add(f(U))):(L=L.j(M),L=L.add(f(U)))}return L}var _=p(0),T=p(1),E=p(16777216);n=u.prototype,n.m=function(){if(k(this))return-C(this).m();let D=0,N=1;for(let M=0;M<this.g.length;M++){const L=this.i(M);D+=(L>=0?L:4294967296+L)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(k(this))return"-"+C(this).toString(D);const N=f(Math.pow(D,6));var M=this;let L="";for(;;){const O=$(M,N).g;M=j(M,O.j(N));let B=((M.g.length>0?M.g[0]:M.h)>>>0).toString(D);if(M=O,I(M))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function k(D){return D.h==-1}n.l=function(D){return D=j(this,D),k(D)?-1:I(D)?0:1};function C(D){const N=D.g.length,M=[];for(let L=0;L<N;L++)M[L]=~D.g[L];return new u(M,~D.h).add(T)}n.abs=function(){return k(this)?C(this):this},n.add=function(D){const N=Math.max(this.g.length,D.g.length),M=[];let L=0;for(let O=0;O<=N;O++){let B=L+(this.i(O)&65535)+(D.i(O)&65535),U=(B>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);L=U>>>16,B&=65535,U&=65535,M[O]=U<<16|B}return new u(M,M[M.length-1]&-2147483648?-1:0)};function j(D,N){return D.add(C(N))}n.j=function(D){if(I(this)||I(D))return _;if(k(this))return k(D)?C(this).j(C(D)):C(C(this).j(D));if(k(D))return C(this.j(C(D)));if(this.l(E)<0&&D.l(E)<0)return f(this.m()*D.m());const N=this.g.length+D.g.length,M=[];for(var L=0;L<2*N;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<D.g.length;O++){const B=this.i(L)>>>16,U=this.i(L)&65535,Te=D.i(O)>>>16,Ce=D.i(O)&65535;M[2*L+2*O]+=U*Ce,R(M,2*L+2*O),M[2*L+2*O+1]+=B*Ce,R(M,2*L+2*O+1),M[2*L+2*O+1]+=U*Te,R(M,2*L+2*O+1),M[2*L+2*O+2]+=B*Te,R(M,2*L+2*O+2)}for(D=0;D<N;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=N;D<2*N;D++)M[D]=0;return new u(M,0)};function R(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function z(D,N){this.g=D,this.h=N}function $(D,N){if(I(N))throw Error("division by zero");if(I(D))return new z(_,_);if(k(D))return N=$(C(D),N),new z(C(N.g),C(N.h));if(k(N))return N=$(D,C(N)),new z(C(N.g),N.h);if(D.g.length>30){if(k(D)||k(N))throw Error("slowDivide_ only works with positive integers.");for(var M=T,L=N;L.l(D)<=0;)M=J(M),L=J(L);var O=Y(M,1),B=Y(L,1);for(L=Y(L,2),M=Y(M,2);!I(L);){var U=B.add(L);U.l(D)<=0&&(O=O.add(M),B=U),L=Y(L,1),M=Y(M,1)}return N=j(D,O.j(N)),new z(O,N)}for(O=_;D.l(N)>=0;){for(M=Math.max(1,Math.floor(D.m()/N.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=f(M),U=B.j(N);k(U)||U.l(D)>0;)M-=L,B=f(M),U=B.j(N);I(B)&&(B=T),O=O.add(B),D=j(D,U)}return new z(O,D)}n.B=function(D){return $(this,D).h},n.and=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let L=0;L<N;L++)M[L]=this.i(L)&D.i(L);return new u(M,this.h&D.h)},n.or=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let L=0;L<N;L++)M[L]=this.i(L)|D.i(L);return new u(M,this.h|D.h)},n.xor=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let L=0;L<N;L++)M[L]=this.i(L)^D.i(L);return new u(M,this.h^D.h)};function J(D){const N=D.g.length+1,M=[];for(let L=0;L<N;L++)M[L]=D.i(L)<<1|D.i(L-1)>>>31;return new u(M,D.h)}function Y(D,N){const M=N>>5;N%=32;const L=D.g.length-M,O=[];for(let B=0;B<L;B++)O[B]=N>0?D.i(B+M)>>>N|D.i(B+M+1)<<32-N:D.i(B+M);return new u(O,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,$1=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=v,Nr=u}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y1,Wc,J1,uh,Ep,Q1,W1,X1;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof eh=="object"&&eh];for(var S=0;S<x.length;++S){var A=x[S];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var s=t(this);function a(x,S){if(S)e:{var A=s;x=x.split(".");for(var V=0;V<x.length-1;V++){var X=x[V];if(!(X in A))break e;A=A[X]}x=x[x.length-1],V=A[x],S=S(V),S!=V&&S!=null&&e(A,x,{configurable:!0,writable:!0,value:S})}}a("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(x){return x||function(S){var A=[],V;for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&A.push([V,S[V]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function h(x){var S=typeof x;return S=="object"&&x!=null||S=="function"}function p(x,S,A){return x.call.apply(x.bind,arguments)}function f(x,S,A){return f=p,f.apply(null,arguments)}function v(x,S){var A=Array.prototype.slice.call(arguments,1);return function(){var V=A.slice();return V.push.apply(V,arguments),x.apply(this,V)}}function _(x,S){function A(){}A.prototype=S.prototype,x.Z=S.prototype,x.prototype=new A,x.prototype.constructor=x,x.Ob=function(V,X,re){for(var Ne=Array(arguments.length-2),at=2;at<arguments.length;at++)Ne[at-2]=arguments[at];return S.prototype[X].apply(V,Ne)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function E(x){const S=x.length;if(S>0){const A=Array(S);for(let V=0;V<S;V++)A[V]=x[V];return A}return[]}function I(x,S){for(let V=1;V<arguments.length;V++){const X=arguments[V];var A=typeof X;if(A=A!="object"?A:X?Array.isArray(X)?"array":A:"null",A=="array"||A=="object"&&typeof X.length=="number"){A=x.length||0;const re=X.length||0;x.length=A+re;for(let Ne=0;Ne<re;Ne++)x[A+Ne]=X[Ne]}else x.push(X)}}class k{constructor(S,A){this.i=S,this.j=A,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function C(x){u.setTimeout(()=>{throw x},0)}function j(){var x=D;let S=null;return x.g&&(S=x.g,x.g=x.g.next,x.g||(x.h=null),S.next=null),S}class R{constructor(){this.h=this.g=null}add(S,A){const V=z.get();V.set(S,A),this.h?this.h.next=V:this.g=V,this.h=V}}var z=new k(()=>new $,x=>x.reset());class ${constructor(){this.next=this.g=this.h=null}set(S,A){this.h=S,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let J,Y=!1,D=new R,N=()=>{const x=Promise.resolve(void 0);J=()=>{x.then(M)}};function M(){for(var x;x=j();){try{x.h.call(x.g)}catch(A){C(A)}var S=z;S.j(x),S.h<100&&(S.h++,x.next=S.g,S.g=x)}Y=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(x,S){this.type=x,this.g=this.target=S,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var x=!1,S=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const A=()=>{};u.addEventListener("test",A,S),u.removeEventListener("test",A,S)}catch{}return x})();function U(x){return/^[\s\xa0]*$/.test(x)}function Te(x,S){O.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,S)}_(Te,O),Te.prototype.init=function(x,S){const A=this.type=x.type,V=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=S,S=x.relatedTarget,S||(A=="mouseover"?S=x.fromElement:A=="mouseout"&&(S=x.toElement)),this.relatedTarget=S,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),q=0;function ie(x,S,A,V,X){this.listener=x,this.proxy=null,this.src=S,this.type=A,this.capture=!!V,this.ha=X,this.key=++q,this.da=this.fa=!1}function pe(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ue(x,S,A){for(const V in x)S.call(A,x[V],V,x)}function he(x,S){for(const A in x)S.call(void 0,x[A],A,x)}function H(x){const S={};for(const A in x)S[A]=x[A];return S}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(x,S){let A,V;for(let X=1;X<arguments.length;X++){V=arguments[X];for(A in V)x[A]=V[A];for(let re=0;re<ne.length;re++)A=ne[re],Object.prototype.hasOwnProperty.call(V,A)&&(x[A]=V[A])}}function ae(x){this.src=x,this.g={},this.h=0}ae.prototype.add=function(x,S,A,V,X){const re=x.toString();x=this.g[re],x||(x=this.g[re]=[],this.h++);const Ne=ce(x,S,V,X);return Ne>-1?(S=x[Ne],A||(S.fa=!1)):(S=new ie(S,this.src,re,!!V,X),S.fa=A,x.push(S)),S};function de(x,S){const A=S.type;if(A in x.g){var V=x.g[A],X=Array.prototype.indexOf.call(V,S,void 0),re;(re=X>=0)&&Array.prototype.splice.call(V,X,1),re&&(pe(S),x.g[A].length==0&&(delete x.g[A],x.h--))}}function ce(x,S,A,V){for(let X=0;X<x.length;++X){const re=x[X];if(!re.da&&re.listener==S&&re.capture==!!A&&re.ha==V)return X}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),lt={};function ue(x,S,A,V,X){if(Array.isArray(S)){for(let re=0;re<S.length;re++)ue(x,S[re],A,V,X);return null}return A=$t(A),x&&x[Ce]?x.J(S,A,h(V)?!!V.capture:!1,X):Pe(x,S,A,!1,V,X)}function Pe(x,S,A,V,X,re){if(!S)throw Error("Invalid event type");const Ne=h(X)?!!X.capture:!!X;let at=kt(x);if(at||(x[Ae]=at=new ae(x)),A=at.add(S,A,V,Ne,re),A.proxy)return A;if(V=Je(),A.proxy=V,V.src=x,V.listener=A,x.addEventListener)B||(X=Ne),X===void 0&&(X=!1),x.addEventListener(S.toString(),V,X);else if(x.attachEvent)x.attachEvent(Fe(S.toString()),V);else if(x.addListener&&x.removeListener)x.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Je(){function x(A){return S.call(x.src,x.listener,A)}const S=ct;return x}function Me(x,S,A,V,X){if(Array.isArray(S))for(var re=0;re<S.length;re++)Me(x,S[re],A,V,X);else V=h(V)?!!V.capture:!!V,A=$t(A),x&&x[Ce]?(x=x.i,re=String(S).toString(),re in x.g&&(S=x.g[re],A=ce(S,A,V,X),A>-1&&(pe(S[A]),Array.prototype.splice.call(S,A,1),S.length==0&&(delete x.g[re],x.h--)))):x&&(x=kt(x))&&(S=x.g[S.toString()],x=-1,S&&(x=ce(S,A,V,X)),(A=x>-1?S[x]:null)&&Qe(A))}function Qe(x){if(typeof x!="number"&&x&&!x.da){var S=x.src;if(S&&S[Ce])de(S.i,x);else{var A=x.type,V=x.proxy;S.removeEventListener?S.removeEventListener(A,V,x.capture):S.detachEvent?S.detachEvent(Fe(A),V):S.addListener&&S.removeListener&&S.removeListener(V),(A=kt(S))?(de(A,x),A.h==0&&(A.src=null,S[Ae]=null)):pe(x)}}}function Fe(x){return x in lt?lt[x]:lt[x]="on"+x}function ct(x,S){if(x.da)x=!0;else{S=new Te(S,this);const A=x.listener,V=x.ha||x.src;x.fa&&Qe(x),x=A.call(V,S)}return x}function kt(x){return x=x[Ae],x instanceof ae?x:null}var Kt="__closure_events_fn_"+(Math.random()*1e9>>>0);function $t(x){return typeof x=="function"?x:(x[Kt]||(x[Kt]=function(S){return x.handleEvent(S)}),x[Kt])}function be(){L.call(this),this.i=new ae(this),this.M=this,this.G=null}_(be,L),be.prototype[Ce]=!0,be.prototype.removeEventListener=function(x,S,A,V){Me(this,x,S,A,V)};function me(x,S){var A,V=x.G;if(V)for(A=[];V;V=V.G)A.push(V);if(x=x.M,V=S.type||S,typeof S=="string")S=new O(S,x);else if(S instanceof O)S.target=S.target||x;else{var X=S;S=new O(V,x),le(S,X)}X=!0;let re,Ne;if(A)for(Ne=A.length-1;Ne>=0;Ne--)re=S.g=A[Ne],X=Ee(re,V,!0,S)&&X;if(re=S.g=x,X=Ee(re,V,!0,S)&&X,X=Ee(re,V,!1,S)&&X,A)for(Ne=0;Ne<A.length;Ne++)re=S.g=A[Ne],X=Ee(re,V,!1,S)&&X}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var x=this.i;for(const S in x.g){const A=x.g[S];for(let V=0;V<A.length;V++)pe(A[V]);delete x.g[S],x.h--}}this.G=null},be.prototype.J=function(x,S,A,V){return this.i.add(String(x),S,!1,A,V)},be.prototype.K=function(x,S,A,V){return this.i.add(String(x),S,!0,A,V)};function Ee(x,S,A,V){if(S=x.i.g[String(S)],!S)return!0;S=S.concat();let X=!0;for(let re=0;re<S.length;++re){const Ne=S[re];if(Ne&&!Ne.da&&Ne.capture==A){const at=Ne.listener,un=Ne.ha||Ne.src;Ne.fa&&de(x.i,Ne),X=at.call(un,V)!==!1&&X}}return X&&!V.defaultPrevented}function nt(x,S){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(x,S||0)}function Rt(x){x.g=nt(()=>{x.g=null,x.i&&(x.i=!1,Rt(x))},x.l);const S=x.h;x.h=null,x.m.apply(null,S)}class pt extends L{constructor(S,A){super(),this.m=S,this.l=A,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(x){L.call(this),this.h=x,this.g={}}_(cn,L);var Ps=[];function Nn(x){Ue(x.g,function(S,A){this.g.hasOwnProperty(A)&&Qe(S)},x),x.g={}}cn.prototype.N=function(){cn.Z.N.call(this),Nn(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=u.JSON.stringify,js=u.JSON.parse,Xi=class{stringify(x){return u.JSON.stringify(x,void 0)}parse(x){return u.JSON.parse(x,void 0)}};function Ei(){}function en(){}var pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){O.call(this,"d")}_(Xt,O);function Jn(){O.call(this,"c")}_(Jn,O);var zt={},ii=null;function La(){return ii=ii||new be}zt.Ia="serverreachability";function Br(x){O.call(this,zt.Ia,x)}_(Br,O);function Yt(x){const S=La();me(S,new Br(S))}zt.STAT_EVENT="statevent";function Vn(x,S){O.call(this,zt.STAT_EVENT,x),this.stat=S}_(Vn,O);function tn(x){const S=La();me(S,new Vn(S,x))}zt.Ja="timingevent";function Ls(x,S){O.call(this,zt.Ja,x),this.size=S}_(Ls,O);function cs(x,S){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){x()},S)}function us(){this.g=!0}us.prototype.ua=function(){this.g=!1};function ut(x,S,A,V,X,re){x.info(function(){if(x.g)if(re){var Ne="",at=re.split("&");for(let Ct=0;Ct<at.length;Ct++){var un=at[Ct].split("=");if(un.length>1){const Jt=un[0];un=un[1];const Fs=Jt.split("_");Ne=Fs.length>=2&&Fs[1]=="type"?Ne+(Jt+"="+un+"&"):Ne+(Jt+"=redacted&")}}}else Ne=null;else Ne=re;return"XMLHTTP REQ ("+V+") [attempt "+X+"]: "+S+`
`+A+`
`+Ne})}function Gr(x,S,A,V,X,re,Ne){x.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+X+"]: "+S+`
`+A+`
`+re+" "+Ne})}function Qn(x,S,A,V){x.info(function(){return"XMLHTTP TEXT ("+S+"): "+sc(x,A)+(V?" "+V:"")})}function wi(x,S){x.info(function(){return"TIMEOUT: "+S})}us.prototype.info=function(){};function sc(x,S){if(!x.g)return S;if(!S)return null;try{const re=JSON.parse(S);if(re){for(x=0;x<re.length;x++)if(Array.isArray(re[x])){var A=re[x];if(!(A.length<2)){var V=A[1];if(Array.isArray(V)&&!(V.length<1)){var X=V[0];if(X!="noop"&&X!="stop"&&X!="close")for(let Ne=1;Ne<V.length;Ne++)V[Ne]=""}}}}return vs(re)}catch{return S}}var Zi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ua;function ea(){}_(ea,Ei),ea.prototype.g=function(){return new XMLHttpRequest},Ua=new ea;function ai(x){return encodeURIComponent(String(x))}function Lo(x){var S=1;x=x.split(":");const A=[];for(;S>0&&x.length;)A.push(x.shift()),S--;return x.length&&A.push(x.join(":")),A}function bs(x,S,A,V){this.j=x,this.i=S,this.l=A,this.S=V||1,this.V=new cn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _s}function _s(){this.i=null,this.g="",this.h=!1}var nn={},gn={};function Us(x,S,A){x.M=1,x.A=Ze(we(S)),x.u=A,x.R=!0,Oa(x,null)}function Oa(x,S){x.F=Date.now(),Os(x),x.B=we(x.A);var A=x.B,V=x.S;Array.isArray(V)||(V=[String(V)]),za(A.i,"t",V),x.C=0,A=x.j.L,x.h=new _s,x.g=zu(x.j,A?S:null,!x.u),x.P>0&&(x.O=new pt(f(x.Y,x,x.g),x.P)),S=x.V,A=x.g,V=x.ba;var X="readystatechange";Array.isArray(X)||(X&&(Ps[0]=X.toString()),X=Ps);for(let re=0;re<X.length;re++){const Ne=ue(A,X[re],V||S.handleEvent,!1,S.h||S);if(!Ne)break;S.g[Ne.key]=Ne}S=x.J?H(x.J):{},x.u?(x.v||(x.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,S)):(x.v="GET",x.g.ea(x.B,x.v,null,S)),Yt(),ut(x.i,x.v,x.B,x.l,x.S,x.u)}bs.prototype.ba=function(x){x=x.target;const S=this.O;S&&ci(x)==3?S.j():this.Y(x)},bs.prototype.Y=function(x){try{if(x==this.g)e:{const at=ci(this.g),un=this.g.ya(),Ct=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||Bn(this.g)))){this.K||at!=4||un==7||(un==8||Ct<=0?Yt(3):Yt(2)),Ts(this);var S=this.g.ca();this.X=S;var A=Uo(this);if(this.o=S==200,Gr(this.i,this.v,this.B,this.l,this.S,at,S),this.o){if(this.U&&!this.L){t:{if(this.g){var V,X=this.g;if((V=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(V)){var re=V;break t}}re=null}if(x=re)Qn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ss(this,x);else{this.o=!1,this.m=3,tn(12),Mn(this),An(this);break e}}if(this.R){x=!0;let Jt;for(;!this.K&&this.C<A.length;)if(Jt=Vo(this,A),Jt==gn){at==4&&(this.m=4,tn(14),x=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==nn){this.m=4,tn(15),Qn(this.i,this.l,A,"[Invalid Chunk]"),x=!1;break}else Qn(this.i,this.l,Jt,null),Ss(this,Jt);if(Oo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||A.length!=0||this.h.h||(this.m=1,tn(16),x=!1),this.o=this.o&&x,!x)Qn(this.i,this.l,A,"[Invalid Chunked Response]"),Mn(this),An(this);else if(A.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),cc(Ne),Ne.P=!0,tn(11))}}else Qn(this.i,this.l,A,null),Ss(this,A);at==4&&Mn(this),this.o&&!this.K&&(at==4?Ou(this.j,this):(this.o=!1,Os(this)))}else na(this.g),S==400&&A.indexOf("Unknown SID")>0?(this.m=3,tn(12)):(this.m=0,tn(13)),Mn(this),An(this)}}}catch{}finally{}};function Uo(x){if(!Oo(x))return x.g.la();const S=Bn(x.g);if(S==="")return"";let A="";const V=S.length,X=ci(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Mn(x),An(x),"";x.h.i=new u.TextDecoder}for(let re=0;re<V;re++)x.h.h=!0,A+=x.h.i.decode(S[re],{stream:!(X&&re==V-1)});return S.length=0,x.h.g+=A,x.C=0,x.h.g}function Oo(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Vo(x,S){var A=x.C,V=S.indexOf(`
`,A);return V==-1?gn:(A=Number(S.substring(A,V)),isNaN(A)?nn:(V+=1,V+A>S.length?gn:(S=S.slice(V,V+A),x.C=V+A,S)))}bs.prototype.cancel=function(){this.K=!0,Mn(this)};function Os(x){x.T=Date.now()+x.H,Va(x,x.H)}function Va(x,S){if(x.D!=null)throw Error("WatchDog timer not null");x.D=cs(f(x.aa,x),S)}function Ts(x){x.D&&(u.clearTimeout(x.D),x.D=null)}bs.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(wi(this.i,this.B),this.M!=2&&(Yt(),tn(17)),Mn(this),this.m=2,An(this)):Va(this,this.T-x)};function An(x){x.j.I==0||x.K||Ou(x.j,x)}function Mn(x){Ts(x);var S=x.O;S&&typeof S.dispose=="function"&&S.dispose(),x.O=null,Nn(x.V),x.g&&(S=x.g,x.g=null,S.abort(),S.dispose())}function Ss(x,S){try{var A=x.j;if(A.I!=0&&(A.g==x||Bs(A.h,x))){if(!x.L&&Bs(A.h,x)&&A.I==3){try{var V=A.Ba.g.parse(S)}catch{V=null}if(Array.isArray(V)&&V.length==3){var X=V;if(X[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<x.F)Fo(A),$a(A);else break e;Wr(A),tn(18)}}else A.xa=X[1],0<A.xa-A.K&&X[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=cs(f(A.Va,A),6e3));Vs(A.h)<=1&&A.ta&&(A.ta=void 0)}else Mi(A,11)}else if((x.L||A.g==x)&&Fo(A),!U(S))for(X=A.Ba.g.parse(S),S=0;S<X.length;S++){let Ct=X[S];const Jt=Ct[0];if(!(Jt<=A.K))if(A.K=Jt,Ct=Ct[1],A.I==2)if(Ct[0]=="c"){A.M=Ct[1],A.ba=Ct[2];const Fs=Ct[3];Fs!=null&&(A.ka=Fs,A.j.info("VER="+A.ka));const Di=Ct[4];Di!=null&&(A.za=Di,A.j.info("SVER="+A.za));const ui=Ct[5];ui!=null&&typeof ui=="number"&&ui>0&&(V=1.5*ui,A.O=V,A.j.info("backChannelRequestTimeoutMs_="+V)),V=A;const di=x.g;if(di){const Xr=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var re=V.h;re.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(qr(re,re.h),re.h=null))}if(V.G){const qo=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(V.wa=qo,De(V.J,V.G,qo))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-x.F,A.j.info("Handshake RTT: "+A.T+"ms")),V=A;var Ne=x;if(V.na=Gu(V,V.L?V.ba:null,V.W),Ne.L){Ba(V.h,Ne);var at=Ne,un=V.O;un&&(at.H=un),at.D&&(Ts(at),Os(at)),V.g=Ne}else Lu(V);A.i.length>0&&Ri(A)}else Ct[0]!="stop"&&Ct[0]!="close"||Mi(A,7);else A.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?Mi(A,7):oc(A):Ct[0]!="noop"&&A.l&&A.l.qa(Ct),A.A=0)}}Yt(4)}catch{}}var sn=class{constructor(x,S){this.g=x,this.map=S}};function Hr(x){this.l=x||10,u.PerformanceNavigationTiming?(x=u.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fr(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Vs(x){return x.h?1:x.g?x.g.size:0}function Bs(x,S){return x.h?x.h==S:x.g?x.g.has(S):!1}function qr(x,S){x.g?x.g.add(S):x.h=S}function Ba(x,S){x.h&&x.h==S?x.h=null:x.g&&x.g.has(S)&&x.g.delete(S)}Hr.prototype.cancel=function(){if(this.i=Q(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Q(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let S=x.i;for(const A of x.g.values())S=S.concat(A.G);return S}return E(x.i)}var Se=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oe(x,S){if(x){x=x.split("&");for(let A=0;A<x.length;A++){const V=x[A].indexOf("=");let X,re=null;V>=0?(X=x[A].substring(0,V),re=x[A].substring(V+1)):X=x[A],S(X,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Be(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;x instanceof Be?(this.l=x.l,Le(this,x.j),this.o=x.o,this.g=x.g,Xe(this,x.u),this.h=x.h,$e(this,Pu(x.i)),this.m=x.m):x&&(S=String(x).match(Se))?(this.l=!1,Le(this,S[1]||"",!0),this.o=ht(S[2]||""),this.g=ht(S[3]||"",!0),Xe(this,S[4]),this.h=ht(S[5]||"",!0),$e(this,S[6]||"",!0),this.m=ht(S[7]||"")):(this.l=!1,this.i=new Gs(null,this.l))}Be.prototype.toString=function(){const x=[];var S=this.j;S&&x.push(jt(S,xn,!0),":");var A=this.g;return(A||S=="file")&&(x.push("//"),(S=this.o)&&x.push(jt(S,xn,!0),"@"),x.push(ai(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&x.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&x.push("/"),x.push(jt(A,A.charAt(0)=="/"?yn:Dn,!0))),(A=this.i.toString())&&x.push("?",A),(A=this.m)&&x.push("#",jt(A,Ni)),x.join("")},Be.prototype.resolve=function(x){const S=we(this);let A=!!x.j;A?Le(S,x.j):A=!!x.o,A?S.o=x.o:A=!!x.g,A?S.g=x.g:A=x.u!=null;var V=x.h;if(A)Xe(S,x.u);else if(A=!!x.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var X=S.h.lastIndexOf("/");X!=-1&&(V=S.h.slice(0,X+1)+V)}if(X=V,X==".."||X==".")V="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){V=X.lastIndexOf("/",0)==0,X=X.split("/");const re=[];for(let Ne=0;Ne<X.length;){const at=X[Ne++];at=="."?V&&Ne==X.length&&re.push(""):at==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),V&&Ne==X.length&&re.push("")):(re.push(at),V=!0)}V=re.join("/")}else V=X}return A?S.h=V:A=x.i.toString()!=="",A?$e(S,Pu(x.i)):A=!!x.m,A&&(S.m=x.m),S};function we(x){return new Be(x)}function Le(x,S,A){x.j=A?ht(S,!0):S,x.j&&(x.j=x.j.replace(/:$/,""))}function Xe(x,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);x.u=S}else x.u=null}function $e(x,S,A){S instanceof Gs?(x.i=S,Bo(x.i,x.l)):(A||(S=jt(S,kn)),x.i=new Gs(S,x.l))}function De(x,S,A){x.i.set(S,A)}function Ze(x){return De(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function ht(x,S){return x?S?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function jt(x,S,A){return typeof x=="string"?(x=encodeURI(x).replace(S,St),A&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function St(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var xn=/[#\/\?@]/g,Dn=/[#\?:]/g,yn=/[#\?]/g,kn=/[#\?@]/g,Ni=/#/g;function Gs(x,S){this.h=this.g=null,this.i=x||null,this.j=!!S}function Cn(x){x.g||(x.g=new Map,x.h=0,x.i&&Oe(x.i,function(S,A){x.add(decodeURIComponent(S.replace(/\+/g," ")),A)}))}n=Gs.prototype,n.add=function(x,S){Cn(this),this.i=null,x=Ha(this,x);let A=this.g.get(x);return A||this.g.set(x,A=[]),A.push(S),this.h+=1,this};function Ai(x,S){Cn(x),S=Ha(x,S),x.g.has(S)&&(x.i=null,x.h-=x.g.get(S).length,x.g.delete(S))}function ri(x,S){return Cn(x),S=Ha(x,S),x.g.has(S)}n.forEach=function(x,S){Cn(this),this.g.forEach(function(A,V){A.forEach(function(X){x.call(S,X,V,this)},this)},this)};function Ga(x,S){Cn(x);let A=[];if(typeof S=="string")ri(x,S)&&(A=A.concat(x.g.get(Ha(x,S))));else for(x=Array.from(x.g.values()),S=0;S<x.length;S++)A=A.concat(x[S]);return A}n.set=function(x,S){return Cn(this),this.i=null,x=Ha(this,x),ri(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[S]),this.h+=1,this},n.get=function(x,S){return x?(x=Ga(this,x),x.length>0?String(x[0]):S):S};function za(x,S,A){Ai(x,S),A.length>0&&(x.i=null,x.g.set(Ha(x,S),E(A)),x.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],S=Array.from(this.g.keys());for(let V=0;V<S.length;V++){var A=S[V];const X=ai(A);A=Ga(this,A);for(let re=0;re<A.length;re++){let Ne=X;A[re]!==""&&(Ne+="="+ai(A[re])),x.push(Ne)}}return this.i=x.join("&")};function Pu(x){const S=new Gs;return S.i=x.i,x.g&&(S.g=new Map(x.g),S.h=x.h),S}function Ha(x,S){return S=String(S),x.j&&(S=S.toLowerCase()),S}function Bo(x,S){S&&!x.j&&(Cn(x),x.i=null,x.g.forEach(function(A,V){const X=V.toLowerCase();V!=X&&(Ai(this,V),za(this,X,A))},x)),x.j=S}function oi(x,S){const A=new us;if(u.Image){const V=new Image;V.onload=v(zs,A,"TestLoadImage: loaded",!0,S,V),V.onerror=v(zs,A,"TestLoadImage: error",!1,S,V),V.onabort=v(zs,A,"TestLoadImage: abort",!1,S,V),V.ontimeout=v(zs,A,"TestLoadImage: timeout",!1,S,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=x}else S(!1)}function ic(x,S){const A=new us,V=new AbortController,X=setTimeout(()=>{V.abort(),zs(A,"TestPingServer: timeout",!1,S)},1e4);fetch(x,{signal:V.signal}).then(re=>{clearTimeout(X),re.ok?zs(A,"TestPingServer: ok",!0,S):zs(A,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(X),zs(A,"TestPingServer: error",!1,S)})}function zs(x,S,A,V,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),V(A)}catch{}}function Fa(){this.g=new Xi}function ki(x){this.i=x.Sb||null,this.h=x.ab||!1}_(ki,Ei),ki.prototype.g=function(){return new Kr(this.i,this.h)};function Kr(x,S){be.call(this),this.H=x,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Kr,be),n=Kr.prototype,n.open=function(x,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=S,this.readyState=1,li(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(S.body=x),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Go(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Go(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var S=x.value?x.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!x.done}))&&(this.response=this.responseText+=S)}x.done?qa(this):li(this),this.readyState==3&&Go(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,qa(this))},n.Na=function(x){this.g&&(this.response=x,qa(this))},n.ga=function(){this.g&&qa(this)};function qa(x){x.readyState=4,x.l=null,x.j=null,x.B=null,li(x)}n.setRequestHeader=function(x,S){this.A.append(x,S)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],S=this.h.entries();for(var A=S.next();!A.done;)A=A.value,x.push(A[0]+": "+A[1]),A=S.next();return x.join(`\r
`)};function li(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Hs(x){let S="";return Ue(x,function(A,V){S+=V,S+=":",S+=A,S+=`\r
`}),S}function $r(x,S,A){e:{for(V in A){var V=!1;break e}V=!0}V||(A=Hs(A),typeof x=="string"?A!=null&&ai(A):De(x,S,A))}function Lt(x){be.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Lt,be);var Ci=/^https?$/i,ac=["POST","PUT"];n=Lt.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,S,A,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);S=S?S.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ua.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(S,String(x),!0),this.B=!1}catch(re){Yr(this,re);return}if(x=A||"",A=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var X in V)A.set(X,V[X]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const re of V.keys())A.set(re,V.get(re));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(A.keys()).find(re=>re.toLowerCase()=="content-type"),X=u.FormData&&x instanceof u.FormData,!(Array.prototype.indexOf.call(ac,S,void 0)>=0)||V||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Ne]of A)this.g.setRequestHeader(re,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(re){Yr(this,re)}};function Yr(x,S){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=S,x.o=5,rc(x),ta(x)}function rc(x){x.A||(x.A=!0,me(x,"complete"),me(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,me(this,"complete"),me(this,"abort"),ta(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ta(this,!0)),Lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Jr(this):this.Xa())},n.Xa=function(){Jr(this)};function Jr(x){if(x.h&&typeof l<"u"){if(x.v&&ci(x)==4)setTimeout(x.Ca.bind(x),0);else if(me(x,"readystatechange"),ci(x)==4){x.h=!1;try{const re=x.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var A;if(!(A=S)){var V;if(V=re===0){let Ne=String(x.D).match(Se)[1]||null;!Ne&&u.self&&u.self.location&&(Ne=u.self.location.protocol.slice(0,-1)),V=!Ci.test(Ne?Ne.toLowerCase():"")}A=V}if(A)me(x,"complete"),me(x,"success");else{x.o=6;try{var X=ci(x)>2?x.g.statusText:""}catch{X=""}x.l=X+" ["+x.ca()+"]",rc(x)}}finally{ta(x)}}}}function ta(x,S){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const A=x.g;x.g=null,S||me(x,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ci(x){return x.g?x.g.readyState:0}n.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var S=this.g.responseText;return x&&S.indexOf(x)==0&&(S=S.substring(x.length)),js(S)}};function Bn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function na(x){const S={};x=(x.g&&ci(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<x.length;V++){if(U(x[V]))continue;var A=Lo(x[V]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const re=S[X]||[];S[X]=re,re.push(A)}he(S,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(x,S,A){return A&&A.internalChannelParams&&A.internalChannelParams[x]||S}function Ka(x){this.za=0,this.i=[],this.j=new us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,x),this.Za=Ii("retryDelaySeedMs",1e4,x),this.Ta=Ii("forwardChannelMaxRetries",2,x),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Hr(x&&x.concurrentRequestLimit),this.Ba=new Fa,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ka.prototype,n.ka=8,n.I=1,n.connect=function(x,S,A,V){tn(0),this.W=x,this.H=S||{},A&&V!==void 0&&(this.H.OSID=A,this.H.OAID=V),this.F=this.X,this.J=Gu(this,null,this.W),Ri(this)};function oc(x){if(zo(x),x.I==3){var S=x.V++,A=we(x.J);if(De(A,"SID",x.M),De(A,"RID",S),De(A,"TYPE","terminate"),Qr(x,A),S=new bs(x,x.j,S),S.M=2,S.A=Ze(we(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!A&&u.Image&&(new Image().src=S.A,A=!0),A||(S.g=zu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Os(S)}Bu(x)}function $a(x){x.g&&(cc(x),x.g.cancel(),x.g=null)}function zo(x){$a(x),x.v&&(u.clearTimeout(x.v),x.v=null),Fo(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&u.clearTimeout(x.m),x.m=null)}function Ri(x){if(!Fr(x.h)&&!x.m){x.m=!0;var S=x.Ea;J||N(),Y||(J(),Y=!0),D.add(S,x),x.D=0}}function Ho(x,S){return Vs(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=S.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=cs(f(x.Ea,x,S),Vu(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const X=new bs(this,this.j,x);let re=this.o;if(this.U&&(re?(re=H(re),le(re,this.U)):re=this.U),this.u!==null||this.R||(X.J=re,re=null),this.S)e:{for(var S=0,A=0;A<this.i.length;A++){t:{var V=this.i[A];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(S+=V,S>4096){S=A;break e}if(S===4096||A===this.i.length-1){S=A+1;break e}}S=1e3}else S=1e3;S=ju(this,X,S),A=we(this.J),De(A,"RID",x),De(A,"CVER",22),this.G&&De(A,"X-HTTP-Session-Id",this.G),Qr(this,A),re&&(this.R?S="headers="+ai(Hs(re))+"&"+S:this.u&&$r(A,this.u,re)),qr(this.h,X),this.Ra&&De(A,"TYPE","init"),this.S?(De(A,"$req",S),De(A,"SID","null"),X.U=!0,Us(X,A,null)):Us(X,A,S),this.I=2}}else this.I==3&&(x?lc(this,x):this.i.length==0||Fr(this.h)||lc(this))};function lc(x,S){var A;S?A=S.l:A=x.V++;const V=we(x.J);De(V,"SID",x.M),De(V,"RID",A),De(V,"AID",x.K),Qr(x,V),x.u&&x.o&&$r(V,x.u,x.o),A=new bs(x,x.j,A,x.D+1),x.u===null&&(A.J=x.o),S&&(x.i=S.G.concat(x.i)),S=ju(x,A,1e3),A.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),qr(x.h,A),Us(A,V,S)}function Qr(x,S){x.H&&Ue(x.H,function(A,V){De(S,V,A)}),x.l&&Ue({},function(A,V){De(S,V,A)})}function ju(x,S,A){A=Math.min(x.i.length,A);const V=x.l?f(x.l.Ka,x.l,x):null;e:{var X=x.i;let at=-1;for(;;){const un=["count="+A];at==-1?A>0?(at=X[0].g,un.push("ofs="+at)):at=0:un.push("ofs="+at);let Ct=!0;for(let Jt=0;Jt<A;Jt++){var re=X[Jt].g;const Fs=X[Jt].map;if(re-=at,re<0)at=Math.max(0,X[Jt].g-100),Ct=!1;else try{re="req"+re+"_"||"";try{var Ne=Fs instanceof Map?Fs:Object.entries(Fs);for(const[Di,ui]of Ne){let di=ui;h(ui)&&(di=vs(ui)),un.push(re+Di+"="+encodeURIComponent(di))}}catch(Di){throw un.push(re+"type="+encodeURIComponent("_badmap")),Di}}catch{V&&V(Fs)}}if(Ct){Ne=un.join("&");break e}}Ne=void 0}return x=x.i.splice(0,A),S.G=x,Ne}function Lu(x){if(!x.g&&!x.v){x.Y=1;var S=x.Da;J||N(),Y||(J(),Y=!0),D.add(S,x),x.A=0}}function Wr(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=cs(f(x.Da,x),Vu(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,Uu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=cs(f(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tn(10),$a(this),Uu(this))};function cc(x){x.B!=null&&(u.clearTimeout(x.B),x.B=null)}function Uu(x){x.g=new bs(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var S=we(x.na);De(S,"RID","rpc"),De(S,"SID",x.M),De(S,"AID",x.K),De(S,"CI",x.F?"0":"1"),!x.F&&x.ia&&De(S,"TO",x.ia),De(S,"TYPE","xmlhttp"),Qr(x,S),x.u&&x.o&&$r(S,x.u,x.o),x.O&&(x.g.H=x.O);var A=x.g;x=x.ba,A.M=1,A.A=Ze(we(S)),A.u=null,A.R=!0,Oa(A,x)}n.Va=function(){this.C!=null&&(this.C=null,$a(this),Wr(this),tn(19))};function Fo(x){x.C!=null&&(u.clearTimeout(x.C),x.C=null)}function Ou(x,S){var A=null;if(x.g==S){Fo(x),cc(x),x.g=null;var V=2}else if(Bs(x.h,S))A=S.G,Ba(x.h,S),V=1;else return;if(x.I!=0){if(S.o)if(V==1){A=S.u?S.u.length:0,S=Date.now()-S.F;var X=x.D;V=La(),me(V,new Ls(V,A)),Ri(x)}else Lu(x);else if(X=S.m,X==3||X==0&&S.X>0||!(V==1&&Ho(x,S)||V==2&&Wr(x)))switch(A&&A.length>0&&(S=x.h,S.i=S.i.concat(A)),X){case 1:Mi(x,5);break;case 4:Mi(x,10);break;case 3:Mi(x,6);break;default:Mi(x,2)}}}function Vu(x,S){let A=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(A*=2),A*S}function Mi(x,S){if(x.j.info("Error code "+S),S==2){var A=f(x.bb,x),V=x.Ua;const X=!V;V=new Be(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Le(V,"https"),Ze(V),X?oi(V.toString(),A):ic(V.toString(),A)}else tn(2);x.I=0,x.l&&x.l.pa(S),Bu(x),zo(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Bu(x){if(x.I=0,x.ja=[],x.l){const S=Q(x.h);(S.length!=0||x.i.length!=0)&&(I(x.ja,S),I(x.ja,x.i),x.h.i.length=0,E(x.i),x.i.length=0),x.l.oa()}}function Gu(x,S,A){var V=A instanceof Be?we(A):new Be(A);if(V.g!="")S&&(V.g=S+"."+V.g),Xe(V,V.u);else{var X=u.location;V=X.protocol,S=S?S+"."+X.hostname:X.hostname,X=+X.port;const re=new Be(null);V&&Le(re,V),S&&(re.g=S),X&&Xe(re,X),A&&(re.h=A),V=re}return A=x.G,S=x.wa,A&&S&&De(V,A,S),De(V,"VER",x.ka),Qr(x,V),V}function zu(x,S,A){if(S&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=x.Aa&&!x.ma?new Lt(new ki({ab:A})):new Lt(x.ma),S.Fa(x.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}n=Hu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ya(){}Ya.prototype.g=function(x,S){return new is(x,S)};function is(x,S){be.call(this),this.g=new Ka(S),this.l=x,this.h=S&&S.messageUrlParams||null,x=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(x?x["X-WebChannel-Content-Type"]=S.messageContentType:x={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(x?x["X-WebChannel-Client-Profile"]=S.sa:x={"X-WebChannel-Client-Profile":S.sa}),this.g.U=x,(x=S&&S.Qb)&&!U(x)&&(this.g.u=x),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!U(S)&&(this.g.G=S,x=this.h,x!==null&&S in x&&(x=this.h,S in x&&delete x[S])),this.j=new sa(this)}_(is,be),is.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},is.prototype.close=function(){oc(this.g)},is.prototype.o=function(x){var S=this.g;if(typeof x=="string"){var A={};A.__data__=x,x=A}else this.v&&(A={},A.__data__=vs(x),x=A);S.i.push(new sn(S.Ya++,x)),S.I==3&&Ri(S)},is.prototype.N=function(){this.g.l=null,delete this.j,oc(this.g),delete this.g,is.Z.N.call(this)};function Fu(x){Xt.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var S=x.__sm__;if(S){e:{for(const A in S){x=A;break e}x=void 0}(this.i=x)&&(x=this.i,S=S!==null&&x in S?S[x]:void 0),this.data=S}else this.data=x}_(Fu,Xt);function qu(){Jn.call(this),this.status=1}_(qu,Jn);function sa(x){this.g=x}_(sa,Hu),sa.prototype.ra=function(){me(this.g,"a")},sa.prototype.qa=function(x){me(this.g,new Fu(x))},sa.prototype.pa=function(x){me(this.g,new qu)},sa.prototype.oa=function(){me(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,is.prototype.send=is.prototype.o,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,X1=function(){return new Ya},W1=function(){return La()},Q1=zt,Ep={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,uh=Zi,zr.COMPLETE="complete",J1=zr,en.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",be.prototype.listen=be.prototype.J,Wc=en,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,Y1=Lt}).apply(typeof eh<"u"?eh:typeof self<"u"?self:typeof window<"u"?window:{});const QT="@firebase/firestore",WT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new rg("@firebase/firestore");function Sl(){return No.logLevel}function je(n,...e){if(No.logLevel<=yt.DEBUG){const t=e.map(cg);No.debug(`Firestore (${Ql}): ${n}`,...t)}}function wa(n,...e){if(No.logLevel<=yt.ERROR){const t=e.map(cg);No.error(`Firestore (${Ql}): ${n}`,...t)}}function Ll(n,...e){if(No.logLevel<=yt.WARN){const t=e.map(cg);No.warn(`Firestore (${Ql}): ${n}`,...t)}}function cg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Z1(n,s,t)}function Z1(n,e,t){let s=`FIRESTORE (${Ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw wa(s),new Error(s)}function Mt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||Z1(e,a,s)}function it(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Da{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zn.UNAUTHENTICATED)))}shutdown(){}}class r6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class o6{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mt(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Ta;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ta,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},h=p=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ta)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Mt(typeof s.accessToken=="string",31837,{l:s}),new ew(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class l6{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c6{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new l6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class XT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mt(this.o===void 0,3512);const s=l=>{l.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,je("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new XT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new XT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=d6(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function vt(n,e){return n<e?-1:n>e?1:0}function wp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return $0(a)===$0(l)?vt(a,l):$0(a)?1:-1}return vt(n.length,e.length)}const h6=55296,f6=57343;function $0(n){const e=n.charCodeAt(0);return e>=h6&&e<=f6}function Ul(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="__name__";class Vi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ye(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Vi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return vt(e.length,t.length)}static compareSegments(e,t){const s=Vi.isNumericId(e),a=Vi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):wp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}}class Gt extends Vi{construct(e,t,s){return new Gt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ie(xe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Gt(t)}static emptyPath(){return new Gt([])}}const m6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Vi{construct(e,t,s){return new Kn(e,t,s)}static isValidIdentifier(e){return m6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ZT}static keyField(){return new Kn([ZT])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new Ie(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new Ie(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ie(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(l(),a++)}if(l(),u)throw new Ie(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(t)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.path=e}static fromPath(e){return new He(Gt.fromString(e))}static fromName(e){return new He(Gt.fromString(e).popFirst(5))}static empty(){return new He(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(n,e,t){if(!t)throw new Ie(xe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p6(n,e,t,s){if(e===!0&&s===!0)throw new Ie(xe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eS(n){if(!He.isDocumentKey(n))throw new Ie(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tS(n){if(He.isDocumentKey(n))throw new Ie(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function uf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function ys(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uf(n);throw new Ie(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function g6(n,e){if(e<=0)throw new Ie(xe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Tu(n,e){if(!nw(n))throw new Ie(xe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new Ie(xe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=-62135596800,sS=1e6;class qt{static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*sS);return new qt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<nS)throw new Ie(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sS}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,qt._jsonSchema))return new qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qt._jsonSchemaVersion="firestore/timestamp/1.0",qt._jsonSchema={type:wn("string",qt._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new qt(0,0))}static max(){return new tt(new qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=-1;function x6(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=tt.fromTimestamp(s===1e9?new qt(t+1,0):new qt(t,s));return new Cr(a,He.empty(),e)}function y6(n){return new Cr(n.readTime,n.key,lu)}class Cr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Cr(tt.min(),He.empty(),lu)}static max(){return new Cr(tt.max(),He.empty(),lu)}}function v6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=He.comparator(n.documentKey,e.documentKey),t!==0?t:vt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n){if(n.code!==xe.FAILED_PRECONDITION||n.message!==b6)throw n;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.reject(t)}static resolve(e){return new ve(((t,s)=>{t(e)}))}static reject(e){return new ve(((t,s)=>{s(e)}))}static waitFor(e){return new ve(((t,s)=>{let a=0,l=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++l,u&&l===a&&t()}),(p=>s(p)))})),u=!0,l===a&&t()}))}static or(e){let t=ve.resolve(!1);for(const s of e)t=t.next((a=>a?ve.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new ve(((s,a)=>{const l=e.length,u=new Array(l);let h=0;for(let p=0;p<l;p++){const f=p;t(e[f]).next((v=>{u[f]=v,++h,h===l&&s(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new ve(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function T6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=-1;function hf(n){return n==null}function Rh(n){return n===0&&1/n==-1/0}function S6(n){return typeof n=="number"&&Number.isInteger(n)&&!Rh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="";function E6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=iS(e)),e=w6(n.get(t),e);return iS(e)}function w6(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case sw:t+="";break;default:t+=l}}return t}function iS(n){return n+sw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ur(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||qn.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}}class th{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??qn.RED,this.left=a??qn.EMPTY,this.right=l??qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new qn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return qn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rS(this.data.getIterator())}getIteratorFrom(e){return new rS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class rS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new Rn(Kn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ul(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new aw("Invalid base64 string: "+l):l}})(e);return new $n(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new $n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const N6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(n){if(Mt(!!n,39018),typeof n=="string"){let e=0;const t=N6.exec(n);if(Mt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rr(n){return typeof n=="string"?$n.fromBase64String(n):$n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="server_timestamp",ow="__type__",lw="__previous_value__",cw="__local_write_time__";function hg(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[ow])==null?void 0:s.stringValue)===rw}function ff(n){const e=n.mapValue.fields[lw];return hg(e)?ff(e):e}function cu(n){const e=Ir(n.mapValue.fields[cw].timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t,s,a,l,u,h,p,f,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=f,this.isUsingEmulator=v}}const Mh="(default)";class uu{constructor(e,t){this.projectId=e,this.database=t||Mh}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="__type__",k6="__max__",nh={mapValue:{}},dw="__vector__",Dh="value";function Mr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hg(n)?4:I6(n)?9007199254740991:C6(n)?10:11:Ye(28295,{value:n})}function Ki(n,e){if(n===e)return!0;const t=Mr(n);if(t!==Mr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cu(n).isEqual(cu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ir(a.timestampValue),h=Ir(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Rr(a.bytesValue).isEqual(Rr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return fn(a.geoPointValue.latitude)===fn(l.geoPointValue.latitude)&&fn(a.geoPointValue.longitude)===fn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return fn(a.integerValue)===fn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=fn(a.doubleValue),h=fn(l.doubleValue);return u===h?Rh(u)===Rh(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return Ul(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(aS(u)!==aS(h))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(h[p]===void 0||!Ki(u[p],h[p])))return!1;return!0})(n,e);default:return Ye(52216,{left:n})}}function du(n,e){return(n.values||[]).find((t=>Ki(t,e)))!==void 0}function Ol(n,e){if(n===e)return 0;const t=Mr(n),s=Mr(e);if(t!==s)return vt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return vt(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const h=fn(l.integerValue||l.doubleValue),p=fn(u.integerValue||u.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return oS(n.timestampValue,e.timestampValue);case 4:return oS(cu(n),cu(e));case 5:return wp(n.stringValue,e.stringValue);case 6:return(function(l,u){const h=Rr(l),p=Rr(u);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const h=l.split("/"),p=u.split("/");for(let f=0;f<h.length&&f<p.length;f++){const v=vt(h[f],p[f]);if(v!==0)return v}return vt(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const h=vt(fn(l.latitude),fn(u.latitude));return h!==0?h:vt(fn(l.longitude),fn(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lS(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,E,I,k;const h=l.fields||{},p=u.fields||{},f=(T=h[Dh])==null?void 0:T.arrayValue,v=(E=p[Dh])==null?void 0:E.arrayValue,_=vt(((I=f==null?void 0:f.values)==null?void 0:I.length)||0,((k=v==null?void 0:v.values)==null?void 0:k.length)||0);return _!==0?_:lS(f,v)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===nh.mapValue&&u===nh.mapValue)return 0;if(l===nh.mapValue)return 1;if(u===nh.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),f=u.fields||{},v=Object.keys(f);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const T=wp(p[_],v[_]);if(T!==0)return T;const E=Ol(h[p[_]],f[v[_]]);if(E!==0)return E}return vt(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ye(23264,{he:t})}}function oS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return vt(n,e);const t=Ir(n),s=Ir(e),a=vt(t.seconds,s.seconds);return a!==0?a:vt(t.nanos,s.nanos)}function lS(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Ol(t[a],s[a]);if(l)return l}return vt(t.length,s.length)}function Vl(n){return Np(n)}function Np(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ir(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Rr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return He.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Np(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Np(t.fields[u])}`;return a+"}"})(n.mapValue):Ye(61005,{value:n})}function dh(n){switch(Mr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(n);return e?16+dh(e):16;case 5:return 2*n.stringValue.length;case 6:return Rr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+dh(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Ur(s.fields,((l,u)=>{a+=l.length+dh(u)})),a})(n.mapValue);default:throw Ye(13486,{value:n})}}function cS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ap(n){return!!n&&"integerValue"in n}function fg(n){return!!n&&"arrayValue"in n}function uS(n){return!!n&&"nullValue"in n}function dS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function C6(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[uw])==null?void 0:s.stringValue)===dw}function nu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ur(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=nu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nu(n.arrayValue.values[t]);return e}return{...n}}function I6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===k6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.value=e}static empty(){return new xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(t)}setAll(e){let t=Kn.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=h.popLast()}u?s[h.lastSegment()]=nu(u):a.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];hh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ur(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new xs(nu(this.value))}}function hw(n){const e=[];return Ur(n.fields,((t,s)=>{const a=new Kn([t]);if(hh(s)){const l=hw(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,s,a,l,u,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(e){return new es(e,0,tt.min(),tt.min(),tt.min(),xs.empty(),0)}static newFoundDocument(e,t,s,a){return new es(e,1,t,tt.min(),s,a,0)}static newNoDocument(e,t){return new es(e,2,t,tt.min(),tt.min(),xs.empty(),0)}static newUnknownDocument(e,t){return new es(e,3,t,tt.min(),tt.min(),xs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof es&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.position=e,this.inclusive=t}}function hS(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?s=He.comparator(He.fromName(u.referenceValue),t.key):s=Ol(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function fS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function R6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{}class En extends fw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new D6(e,t,s):t==="array-contains"?new L6(e,s):t==="in"?new U6(e,s):t==="not-in"?new O6(e,s):t==="array-contains-any"?new V6(e,s):new En(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new P6(e,s):new j6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ol(t,this.value)):t!==null&&Mr(this.value)===Mr(t)&&this.matchesComparison(Ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends fw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ti(e,t)}matches(e){return mw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mw(n){return n.op==="and"}function pw(n){return M6(n)&&mw(n)}function M6(n){for(const e of n.filters)if(e instanceof Ti)return!1;return!0}function kp(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+Vl(n.value);if(pw(n))return n.filters.map((e=>kp(e))).join(",");{const e=n.filters.map((t=>kp(t))).join(",");return`${n.op}(${e})`}}function gw(n,e){return n instanceof En?(function(s,a){return a instanceof En&&s.op===a.op&&s.field.isEqual(a.field)&&Ki(s.value,a.value)})(n,e):n instanceof Ti?(function(s,a){return a instanceof Ti&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,h)=>l&&gw(u,a.filters[h])),!0):!1})(n,e):void Ye(19439)}function xw(n){return n instanceof En?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`})(n):n instanceof Ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(xw).join(" ,")+"}"})(n):"Filter"}class D6 extends En{constructor(e,t,s){super(e,t,s),this.key=He.fromName(s.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.matchesComparison(t)}}class P6 extends En{constructor(e,t){super(e,"in",t),this.keys=yw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class j6 extends En{constructor(e,t){super(e,"not-in",t),this.keys=yw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>He.fromName(s.referenceValue)))}class L6 extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fg(t)&&du(t.arrayValue,this.value)}}class U6 extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&du(this.value.arrayValue,t)}}class O6 extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!du(this.value.arrayValue,t)}}class V6 extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>du(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,t=null,s=[],a=[],l=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Te=null}}function mS(n,e=null,t=[],s=[],a=null,l=null,u=null){return new B6(n,e,t,s,a,l,u)}function mg(n){const e=it(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>kp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Vl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Vl(s))).join(",")),e.Te=t}return e.Te}function pg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!R6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fS(n.startAt,e.startAt)&&fS(n.endAt,e.endAt)}function Cp(n){return He.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,t=null,s=[],a=[],l=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function G6(n,e,t,s,a,l,u,h){return new Zl(n,e,t,s,a,l,u,h)}function mf(n){return new Zl(n)}function pS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vw(n){return n.collectionGroup!==null}function su(n){const e=it(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Rn(Kn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((f=>{f.isInequality()&&(h=h.add(f.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new hu(l,s))})),t.has(Kn.keyField().canonicalString())||e.Ie.push(new hu(Kn.keyField(),s))}return e.Ie}function Gi(n){const e=it(n);return e.Ee||(e.Ee=z6(e,su(n))),e.Ee}function z6(n,e){if(n.limitType==="F")return mS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new hu(a.field,l)}));const t=n.endAt?new Ph(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ph(n.startAt.position,n.startAt.inclusive):null;return mS(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Ip(n,e){const t=n.filters.concat([e]);return new Zl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jh(n,e,t){return new Zl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pf(n,e){return pg(Gi(n),Gi(e))&&n.limitType===e.limitType}function bw(n){return`${mg(Gi(n))}|lt:${n.limitType}`}function El(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>xw(a))).join(", ")}]`),hf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Vl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Vl(a))).join(",")),`Target(${s})`})(Gi(n))}; limitType=${n.limitType})`}function gf(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):He.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of su(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,p){const f=hS(u,h,p);return u.inclusive?f<=0:f<0})(s.startAt,su(s),a)||s.endAt&&!(function(u,h,p){const f=hS(u,h,p);return u.inclusive?f>=0:f>0})(s.endAt,su(s),a))})(n,e)}function H6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _w(n){return(e,t)=>{let s=!1;for(const a of su(n)){const l=F6(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function F6(n,e,t){const s=n.field.isKeyField()?He.comparator(e.key,t.key):(function(l,u,h){const p=u.data.field(l),f=h.data.field(l);return p!==null&&f!==null?Ol(p,f):Ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ur(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return iw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=new Zt(He.comparator);function Na(){return q6}const Tw=new Zt(He.comparator);function Xc(...n){let e=Tw;for(const t of n)e=e.insert(t.key,t);return e}function Sw(n){let e=Tw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function yo(){return iu()}function Ew(){return iu()}function iu(){return new Mo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const K6=new Zt(He.comparator),$6=new Rn(He.comparator);function bt(...n){let e=$6;for(const t of n)e=e.add(t);return e}const Y6=new Rn(vt);function J6(){return Y6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function ww(n){return{integerValue:""+n}}function Q6(n,e){return S6(e)?ww(e):gg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function W6(n,e,t){return n instanceof Lh?(function(a,l){const u={fields:{[ow]:{stringValue:rw},[cw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&hg(l)&&(l=ff(l)),l&&(u.fields[lw]=l),{mapValue:u}})(t,e):n instanceof fu?Aw(n,e):n instanceof mu?kw(n,e):(function(a,l){const u=Nw(a,l),h=gS(u)+gS(a.Ae);return Ap(u)&&Ap(a.Ae)?ww(h):gg(a.serializer,h)})(n,e)}function X6(n,e,t){return n instanceof fu?Aw(n,e):n instanceof mu?kw(n,e):t}function Nw(n,e){return n instanceof Uh?(function(s){return Ap(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Lh extends xf{}class fu extends xf{constructor(e){super(),this.elements=e}}function Aw(n,e){const t=Cw(e);for(const s of n.elements)t.some((a=>Ki(a,s)))||t.push(s);return{arrayValue:{values:t}}}class mu extends xf{constructor(e){super(),this.elements=e}}function kw(n,e){let t=Cw(e);for(const s of n.elements)t=t.filter((a=>!Ki(a,s)));return{arrayValue:{values:t}}}class Uh extends xf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function gS(n){return fn(n.integerValue||n.doubleValue)}function Cw(n){return fg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Z6(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof fu&&a instanceof fu||s instanceof mu&&a instanceof mu?Ul(s.elements,a.elements,Ki):s instanceof Uh&&a instanceof Uh?Ki(s.Ae,a.Ae):s instanceof Lh&&a instanceof Lh})(n.transform,e.transform)}class e3{constructor(e,t){this.version=e,this.transformResults=t}}class ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yf{}function Iw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xg(n.key,ti.none()):new Su(n.key,n.data,ti.none());{const t=n.data,s=xs.empty();let a=new Rn(Kn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Or(n.key,s,new Ms(a.toArray()),ti.none())}}function t3(n,e,t){n instanceof Su?(function(a,l,u){const h=a.value.clone(),p=yS(a.fieldTransforms,l,u.transformResults);h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Or?(function(a,l,u){if(!fh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=yS(a.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(Rw(a)),p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function au(n,e,t,s){return n instanceof Su?(function(l,u,h,p){if(!fh(l.precondition,u))return h;const f=l.value.clone(),v=vS(l.fieldTransforms,p,u);return f.setAll(v),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null})(n,e,t,s):n instanceof Or?(function(l,u,h,p){if(!fh(l.precondition,u))return h;const f=vS(l.fieldTransforms,p,u),v=u.data;return v.setAll(Rw(l)),v.setAll(f),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,u,h){return fh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function n3(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=Nw(s.transform,a||null);l!=null&&(t===null&&(t=xs.empty()),t.set(s.field,l))}return t||null}function xS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ul(s,a,((l,u)=>Z6(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Su extends yf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Or extends yf{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Rw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function yS(n,e,t){const s=new Map;Mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,h=e.data.field(l.field);s.set(l.field,X6(u,h,t[a]))}return s}function vS(n,e,t){const s=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);s.set(a.field,W6(l,u,e))}return s}class xg extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s3 extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&t3(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=au(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ew();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=t.has(a.key)?null:h;const p=Iw(u,h);p!==null&&s.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(tt.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),bt())}isEqual(e){return this.batchId===e.batchId&&Ul(this.mutations,e.mutations,((t,s)=>xS(t,s)))&&Ul(this.baseMutations,e.baseMutations,((t,s)=>xS(t,s)))}}class yg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Mt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return K6})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new yg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,Tt;function o3(n){switch(n){case xe.OK:return Ye(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function Mw(n){if(n===void 0)return wa("GRPC error has no .code"),xe.UNKNOWN;switch(n){case Sn.OK:return xe.OK;case Sn.CANCELLED:return xe.CANCELLED;case Sn.UNKNOWN:return xe.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return xe.INTERNAL;case Sn.UNAVAILABLE:return xe.UNAVAILABLE;case Sn.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Sn.NOT_FOUND:return xe.NOT_FOUND;case Sn.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Sn.ABORTED:return xe.ABORTED;case Sn.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Sn.DATA_LOSS:return xe.DATA_LOSS;default:return Ye(39323,{code:n})}}(Tt=Sn||(Sn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new Nr([4294967295,4294967295],0);function bS(n){const e=l3().encode(n),t=new $1;return t.update(e),new Uint8Array(t.digest())}function _S(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Nr([t,s],0),new Nr([a,l],0)]}class vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Zc(`Invalid padding: ${t}`);if(s<0)throw new Zc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Nr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Nr.fromNumber(s)));return a.compare(c3)===1&&(a=new Nr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=bS(e),[s,a]=_S(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new vg(l,a,t);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const t=bS(e),[s,a]=_S(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new vf(tt.min(),a,new Zt(vt),Na(),bt())}}class Eu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Eu(s,t,bt(),bt(),bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class Dw{constructor(e,t){this.targetId=e,this.Ce=t}}class Pw{constructor(e,t,s=$n.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class TS{constructor(){this.ve=0,this.Fe=SS(),this.Me=$n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),t=bt(),s=bt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ye(38017,{changeType:l})}})),new Eu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=SS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class u3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Na(),this.Je=sh(),this.He=sh(),this.Ye=new Zt(vt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Cp(l))if(s===0){const u=new He(l.path);this.et(t,u,es.newNoDocument(u,tt.min()))}else Mt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const h=this.ut(e),p=h?this.ct(h,e,u):1;if(p!==0){this.it(t);const f=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,h;try{u=Rr(s).toUint8Array()}catch(p){if(p instanceof aw)return Ll("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new vg(u,a,l)}catch(p){return Ll(p instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const h=this.ot(u);if(h){if(l.current&&Cp(h.target)){const p=new He(h.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,es.newNoDocument(p,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=bt();this.He.forEach(((l,u)=>{let h=!0;u.forEachWhile((p=>{const f=this.ot(p);return!f||f.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new vf(e,t,this.Ye,this.je,s);return this.je=Na(),this.Je=sh(),this.He=sh(),this.Ye=new Zt(vt),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new TS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rn(vt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rn(vt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||je("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sh(){return new Zt(He.comparator)}function SS(){return new Zt(He.comparator)}const d3={asc:"ASCENDING",desc:"DESCENDING"},h3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f3={and:"AND",or:"OR"};class m3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rp(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function Oh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p3(n,e){return Oh(n,e.toTimestamp())}function zi(n){return Mt(!!n,49232),tt.fromTimestamp((function(t){const s=Ir(t);return new qt(s.seconds,s.nanos)})(n))}function bg(n,e){return Mp(n,e).canonicalString()}function Mp(n,e){const t=(function(a){return new Gt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Lw(n){const e=Gt.fromString(n);return Mt(Gw(e),10190,{key:e.toString()}),e}function Dp(n,e){return bg(n.databaseId,e.path)}function Y0(n,e){const t=Lw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(Ow(t))}function Uw(n,e){return bg(n.databaseId,e)}function g3(n){const e=Lw(n);return e.length===4?Gt.emptyPath():Ow(e)}function Pp(n){return new Gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ow(n){return Mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ES(n,e,t){return{name:Dp(n,e),fields:t.value.mapValue.fields}}function x3(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ye(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(f,v){return f.useProto3Json?(Mt(v===void 0||typeof v=="string",58123),$n.fromBase64String(v||"")):(Mt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),$n.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(f){const v=f.code===void 0?xe.UNKNOWN:Mw(f.code);return new Ie(v,f.message||"")})(u);t=new Pw(s,a,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Y0(n,s.document.name),l=zi(s.document.updateTime),u=s.document.createTime?zi(s.document.createTime):tt.min(),h=new xs({mapValue:{fields:s.document.fields}}),p=es.newFoundDocument(a,l,u,h),f=s.targetIds||[],v=s.removedTargetIds||[];t=new mh(f,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Y0(n,s.document),l=s.readTime?zi(s.readTime):tt.min(),u=es.newNoDocument(a,l),h=s.removedTargetIds||[];t=new mh([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Y0(n,s.document),l=s.removedTargetIds||[];t=new mh([],l,a,null)}else{if(!("filter"in e))return Ye(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new r3(a,l),h=s.targetId;t=new Dw(h,u)}}return t}function y3(n,e){let t;if(e instanceof Su)t={update:ES(n,e.key,e.value)};else if(e instanceof xg)t={delete:Dp(n,e.key)};else if(e instanceof Or)t={update:ES(n,e.key,e.data),updateMask:A3(e.fieldMask)};else{if(!(e instanceof s3))return Ye(16599,{Vt:e.type});t={verify:Dp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const h=u.transform;if(h instanceof Lh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof fu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof mu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Uh)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Ye(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:p3(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ye(27497)})(n,e.precondition)),t}function v3(n,e){return n&&n.length>0?(Mt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?zi(a.updateTime):zi(l);return u.isEqual(tt.min())&&(u=zi(l)),new e3(u,a.transformResults||[])})(t,e)))):[]}function b3(n,e){return{documents:[Uw(n,e.path)]}}function _3(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Uw(n,a);const l=(function(f){if(f.length!==0)return Bw(Ti.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(f){if(f.length!==0)return f.map((v=>(function(T){return{field:wl(T.field),direction:E3(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Rp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:a}}function T3(n){let e=g3(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Mt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const T=Vw(_);return T instanceof Ti&&pw(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(I){return new hu(Nl(I.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,hf(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(_){const T=!!_.before,E=_.values||[];return new Ph(E,T)})(t.startAt));let f=null;return t.endAt&&(f=(function(_){const T=!_.before,E=_.values||[];return new Ph(E,T)})(t.endAt)),G6(e,a,u,l,h,"F",p,f)}function S3(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Vw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Nl(t.unaryFilter.field);return En.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Nl(t.unaryFilter.field);return En.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Nl(t.unaryFilter.field);return En.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Nl(t.unaryFilter.field);return En.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return En.create(Nl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ti.create(t.compositeFilter.filters.map((s=>Vw(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}})(t.compositeFilter.op))})(n):Ye(30097,{filter:n})}function E3(n){return d3[n]}function w3(n){return h3[n]}function N3(n){return f3[n]}function wl(n){return{fieldPath:n.canonicalString()}}function Nl(n){return Kn.fromServerFormat(n.fieldPath)}function Bw(n){return n instanceof En?(function(t){if(t.op==="=="){if(dS(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NAN"}};if(uS(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dS(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NAN"}};if(uS(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(t.field),op:w3(t.op),value:t.value}}})(n):n instanceof Ti?(function(t){const s=t.getFilters().map((a=>Bw(a)));return s.length===1?s[0]:{compositeFilter:{op:N3(t.op),filters:s}}})(n):Ye(54877,{filter:n})}function A3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Gw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,s,a,l=tt.min(),u=tt.min(),h=$n.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.yt=e}}function C3(n){const e=T3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.Cn=new R3}addToCollectionParentIndex(e,t){return this.Cn.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(Cr.min())}updateCollectionGroup(e,t,s){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class R3{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Rn(Gt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Rn(Gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zw=41943040;class gs{static withCacheSize(e){return new gs(e,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs.DEFAULT_COLLECTION_PERCENTILE=10,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gs.DEFAULT=new gs(zw,gs.DEFAULT_COLLECTION_PERCENTILE,gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gs.DISABLED=new gs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bl(0)}static cr(){return new Bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="LruGarbageCollector",M3=1048576;function AS([n,e],[t,s]){const a=vt(n,t);return a===0?vt(e,s):a}class D3{constructor(e){this.Ir=e,this.buffer=new Rn(AS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();AS(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){je(NS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xl(t)?je(NS,"Ignoring IndexedDB error during garbage collection: ",t):await Wl(t)}await this.Vr(3e5)}))}}class j3{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ve.resolve(df.ce);const s=new D3(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(wS)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,h,p,f;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,h=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(f=Date.now(),Sl()<=yt.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${_} documents in `+(f-p)+`ms
Total Duration: ${f-v}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function L3(n,e){return new j3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.changes=new Mo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,es.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ve.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&au(s.mutation,a,Ms.empty(),qt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,bt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=bt()){const a=yo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=Xc();return l.forEach(((h,p)=>{u=u.insert(h,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=yo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,bt())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,s,a){let l=Na();const u=iu(),h=(function(){return iu()})();return t.forEach(((p,f)=>{const v=s.get(f.key);a.has(f.key)&&(v===void 0||v.mutation instanceof Or)?l=l.insert(f.key,f):v!==void 0?(u.set(f.key,v.mutation.getFieldMask()),au(v.mutation,f,v.mutation.getFieldMask(),qt.now())):u.set(f.key,Ms.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((f,v)=>u.set(f,v))),t.forEach(((f,v)=>h.set(f,new O3(v,u.get(f)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=iu();let a=new Zt(((u,h)=>u-h)),l=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((p=>{const f=t.get(p);if(f===null)return;let v=s.get(p)||Ms.empty();v=h.applyToLocalView(f,v),s.set(p,v);const _=(a.get(h.batchId)||bt()).add(p);a=a.insert(h.batchId,_)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),f=p.key,v=p.value,_=Ew();v.forEach((T=>{if(!l.has(T)){const E=Iw(t.get(T),s.get(T));E!==null&&_.set(T,E),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,f,_))}return ve.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(u){return He.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ve.resolve(yo());let h=lu,p=l;return u.next((f=>ve.forEach(f,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),l.get(v)?ve.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{p=p.insert(v,T)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,p,f,bt()))).next((v=>({batchId:h,changes:Sw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next((s=>{let a=Xc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Xc();return this.indexManager.getCollectionParents(e,l).next((h=>ve.forEach(h,(p=>{const f=(function(_,T){return new Zl(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,s,a).next((v=>{v.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((p,f)=>{const v=f.getKey();u.get(v)===null&&(u=u.insert(v,es.newInvalidDocument(v)))}));let h=Xc();return u.forEach(((p,f)=>{const v=l.get(p);v!==void 0&&au(v.mutation,f,Ms.empty(),qt.now()),gf(t,f)&&(h=h.insert(p,f))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ve.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:zi(a.createTime)}})(t)),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:C3(a.bundledQuery),readTime:zi(a.readTime)}})(t)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.overlays=new Zt(He.comparator),this.qr=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){const s=yo();return ve.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),ve.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ve.resolve()}getOverlaysForCollection(e,t,s){const a=yo(),l=t.length+1,u=new He(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,f=p.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return ve.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Zt(((f,v)=>f-v));const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>s){let v=l.get(f.largestBatchId);v===null&&(v=yo(),l=l.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}const h=yo(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((f,v)=>h.set(f,v))),!(h.size()>=a)););return ve.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new a3(t,s));let l=this.qr.get(t);l===void 0&&(l=bt(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Qr=new Rn(jn.$r),this.Ur=new Rn(jn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new jn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new jn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new He(new Gt([])),s=new jn(t,e),a=new jn(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new He(new Gt([])),s=new jn(t,e),a=new jn(t,e+1);let l=bt();return this.Ur.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new jn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class jn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return He.comparator(e.key,t.key)||vt(e.Yr,t.Yr)}static Kr(e,t){return vt(e.Yr,t.Yr)||He.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rn(jn.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new i3(l,t,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new jn(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ve.resolve(u)}lookupMutationBatch(e,t){return ve.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return ve.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?dg:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new jn(t,0),a=new jn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);l.push(h)})),ve.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Rn(vt);return t.forEach((a=>{const l=new jn(a,0),u=new jn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(h=>{s=s.add(h.Yr)}))})),ve.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;He.isDocumentKey(l)||(l=l.child(""));const u=new jn(new He(l),0);let h=new Rn(vt);return this.Zr.forEachWhile((p=>{const f=p.key.path;return!!s.isPrefixOf(f)&&(f.length===a&&(h=h.add(p.Yr)),!0)}),u),ve.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ve.forEach(t.mutations,(a=>{const l=new jn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new jn(t,0),a=this.Zr.firstAfterOrEqual(s);return ve.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.ri=e,this.docs=(function(){return new Zt(He.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ve.resolve(s?s.document.mutableCopy():es.newInvalidDocument(t))}getEntries(e,t){let s=Na();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():es.newInvalidDocument(a))})),ve.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Na();const u=t.path,h=new He(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:f,value:{document:v}}=p.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||v6(y6(v),s)<=0||(a.has(v.key)||gf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ve.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ye(9500)}ii(e,t){return ve.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new q3(this)}getSize(e){return ve.resolve(this.size)}}class q3 extends U3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),ve.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.persistence=e,this.si=new Mo((t=>mg(t)),pg),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=Bl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ve.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Pr(t),ve.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),ve.waitFor(l).next((()=>a))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ve.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ve.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),ve.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ve.resolve(s)}containsKey(e,t){return ve.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.ui={},this.overlays={},this.ci=new df(0),this.li=!1,this.li=!0,this.hi=new z3,this.referenceDelegate=e(this),this.Pi=new K3(this),this.indexManager=new I3,this.remoteDocumentCache=(function(a){return new F3(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new k3(t),this.Ii=new B3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new G3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new H3(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){je("MemoryPersistence","Starting transaction:",e);const a=new $3(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ve.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class $3 extends _6{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Ri=new _g,this.Vi=null}static mi(e){return new Tg(e)}get fi(){if(this.Vi)return this.Vi;throw Ye(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ve.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,(s=>{const a=He.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,tt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ve.or([()=>ve.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Vh{constructor(e,t){this.persistence=e,this.pi=new Mo((s=>E6(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=L3(this,t)}static mi(e,t){return new Vh(e,t)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ve.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?ve.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((h=>{h||(s++,l.removeEntry(u,tt.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ve.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ve.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dh(e.data.value)),t}br(e,t,s){return ve.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ve.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=bt(),a=bt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Sg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VP()?8:T6(ss())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new Y3;return this.Ss(e,t,u).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,u,h.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(Sl()<=yt.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",El(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(Sl()<=yt.DEBUG&&je("QueryEngine","Query:",El(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Sl()<=yt.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",El(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):ve.resolve())}ys(e,t){if(pS(t))return ve.resolve(null);let s=Gi(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=jh(t,null,"F"),s=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=bt(...l);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((p=>{const f=this.Ds(t,h);return this.Cs(t,f,u,p.readTime)?this.ys(e,jh(t,null,"F")):this.vs(e,f,t,p)}))))})))))}ws(e,t,s,a){return pS(t)||a.isEqual(tt.min())?ve.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?ve.resolve(null):(Sl()<=yt.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),El(t)),this.vs(e,u,t,x6(a,lu)).next((h=>h)))}))}Ds(e,t){let s=new Rn(_w(e));return t.forEach(((a,l)=>{gf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return Sl()<=yt.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",El(t)),this.ps.getDocumentsMatchingQuery(e,t,Cr.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",Q3=3e8;class W3{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Zt(vt),this.xs=new Mo((l=>mg(l)),pg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function X3(n,e,t,s){return new W3(n,e,t,s)}async function Fw(n,e){const t=it(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],h=[];let p=bt();for(const f of a){u.push(f.batchId);for(const v of f.mutations)p=p.add(v.key)}for(const f of l){h.push(f.batchId);for(const v of f.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((f=>({Ls:f,removedBatchIds:u,addedBatchIds:h})))}))}))}function Z3(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,f,v){const _=f.batch,T=_.keys();let E=ve.resolve();return T.forEach((I=>{E=E.next((()=>v.getEntry(p,I))).next((k=>{const C=f.docVersions.get(I);Mt(C!==null,48541),k.version.compareTo(C)<0&&(_.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),v.addEntry(k)))}))})),E.next((()=>h.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let p=bt();for(let f=0;f<h.mutationResults.length;++f)h.mutationResults[f].transformResults.length>0&&(p=p.add(h.batch.mutations[f].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function qw(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function eL(n,e){const t=it(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const T=a.get(_);if(!T)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let E=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken($n.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):v.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(v.resumeToken,s)),a=a.insert(_,E),(function(k,C,j){return k.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Q3?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(T,E,v)&&h.push(t.Pi.updateTargetData(l,E))}));let p=Na(),f=bt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(tL(l,u,e.documentUpdates).next((v=>{p=v.ks,f=v.qs}))),!s.isEqual(tt.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(v)}return ve.waitFor(h).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,f))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function tL(n,e,t){let s=bt(),a=bt();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=Na();return t.forEach(((h,p)=>{const f=l.get(h);p.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(h)),p.isNoDocument()&&p.version.isEqual(tt.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!f.isValidDocument()||p.version.compareTo(f.version)>0||p.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):je(Eg,"Ignoring outdated watch update for ",h,". Current version:",f.version," Watch version:",p.version)})),{ks:u,qs:a}}))}function nL(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=dg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function sL(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,ve.resolve(a)):t.Pi.allocateTargetId(s).next((u=>(a=new Tr(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function jp(n,e,t){const s=it(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Xl(u))throw u;je(Eg,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function kS(n,e,t){const s=it(n);let a=tt.min(),l=bt();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,f,v){const _=it(p),T=_.xs.get(v);return T!==void 0?ve.resolve(_.Ms.get(T)):_.Pi.getTargetData(f,v)})(s,u,Gi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:tt.min(),t?l:bt()))).next((h=>(iL(s,H6(e),h),{documents:h,Qs:l})))))}function iL(n,e,t){let s=n.Os.get(e)||tt.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class CS{constructor(){this.activeTargetIds=J6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aL{constructor(){this.Mo=new CS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new CS,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="ConnectivityMonitor";class RS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){je(IS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){je(IS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih=null;function Lp(){return ih===null?ih=(function(){return 268435456+Math.round(2147483648*Math.random())})():ih++,"0x"+ih.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="RestConnection",oL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Mh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Lp(),h=this.zo(e,t.toUriEncodedString());je(J0,`Sending RPC '${e}' ${u}:`,h,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:f}=new URL(h),v=Yl(f);return this.Jo(e,h,p,s,v).then((_=>(je(J0,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw Ll(J0,`RPC '${e}' ${u} failed with error: `,_,"url: ",h,"request:",s),_}))}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ql})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=oL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class uL extends lL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Lp();return new Promise(((h,p)=>{const f=new Y1;f.setWithCredentials(!0),f.listenOnce(J1.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case uh.NO_ERROR:const _=f.getResponseJson();je(Xn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),h(_);break;case uh.TIMEOUT:je(Xn,`RPC '${e}' ${u} timed out`),p(new Ie(xe.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const T=f.getStatus();if(je(Xn,`RPC '${e}' ${u} failed with status:`,T,"response text:",f.getResponseText()),T>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E==null?void 0:E.error;if(I&&I.status&&I.message){const k=(function(j){const R=j.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(R)>=0?R:xe.UNKNOWN})(I.status);p(new Ie(k,I.message))}else p(new Ie(xe.UNKNOWN,"Server responded with status "+f.getStatus()))}else p(new Ie(xe.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{l_:e,streamId:u,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{je(Xn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);je(Xn,`RPC '${e}' ${u} sending request:`,a),f.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=Lp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=X1(),h=W1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(p.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=l.join("");je(Xn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=u.createWebChannel(v,p);this.I_(_);let T=!1,E=!1;const I=new cL({Yo:C=>{E?je(Xn,`Not sending because RPC '${e}' stream ${a} is closed:`,C):(T||(je(Xn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),T=!0),je(Xn,`RPC '${e}' stream ${a} sending:`,C),_.send(C))},Zo:()=>_.close()}),k=(C,j,R)=>{C.listen(j,(z=>{try{R(z)}catch($){setTimeout((()=>{throw $}),0)}}))};return k(_,Wc.EventType.OPEN,(()=>{E||(je(Xn,`RPC '${e}' stream ${a} transport opened.`),I.o_())})),k(_,Wc.EventType.CLOSE,(()=>{E||(E=!0,je(Xn,`RPC '${e}' stream ${a} transport closed`),I.a_(),this.E_(_))})),k(_,Wc.EventType.ERROR,(C=>{E||(E=!0,Ll(Xn,`RPC '${e}' stream ${a} transport errored. Name:`,C.name,"Message:",C.message),I.a_(new Ie(xe.UNAVAILABLE,"The operation could not be completed")))})),k(_,Wc.EventType.MESSAGE,(C=>{var j;if(!E){const R=C.data[0];Mt(!!R,16349);const z=R,$=(z==null?void 0:z.error)||((j=z[0])==null?void 0:j.error);if($){je(Xn,`RPC '${e}' stream ${a} received error:`,$);const J=$.status;let Y=(function(M){const L=Sn[M];if(L!==void 0)return Mw(L)})(J),D=$.message;Y===void 0&&(Y=xe.INTERNAL,D="Unknown error status: "+J+" with message "+$.message),E=!0,I.a_(new Ie(Y,D)),_.close()}else je(Xn,`RPC '${e}' stream ${a} received:`,R),I.u_(R)}})),k(h,Q1.STAT_EVENT,(C=>{C.stat===Ep.PROXY?je(Xn,`RPC '${e}' stream ${a} detected buffering proxy`):C.stat===Ep.NOPROXY&&je(Xn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Q0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n){return new m3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&je("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="PersistentStream";class $w{constructor(e,t,s,a,l,u,h,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===xe.RESOURCE_EXHAUSTED?(wa(t.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Ie(xe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return je(MS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(je(MS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dL extends $w{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=x3(this.serializer,e),s=(function(l){if(!("targetChange"in l))return tt.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?tt.min():u.readTime?zi(u.readTime):tt.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Pp(this.serializer),t.addTarget=(function(l,u){let h;const p=u.target;if(h=Cp(p)?{documents:b3(l,p)}:{query:_3(l,p).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=jw(l,u.resumeToken);const f=Rp(l,u.expectedCount);f!==null&&(h.expectedCount=f)}else if(u.snapshotVersion.compareTo(tt.min())>0){h.readTime=Oh(l,u.snapshotVersion.toTimestamp());const f=Rp(l,u.expectedCount);f!==null&&(h.expectedCount=f)}return h})(this.serializer,e);const s=S3(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Pp(this.serializer),t.removeTarget=e,this.q_(t)}}class hL extends $w{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=v3(e.writeResults,e.commitTime),s=zi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Pp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>y3(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{}class mL extends fL{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Ie(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Mp(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ie(xe.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Mp(t,s),a,u,h,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(xe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class pL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wa(t),this.aa=!1):je("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class gL{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Do(this)&&(je(Ao,"Restarting streams for network reachability change."),await(async function(p){const f=it(p);f.Ea.add(4),await wu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await _f(f)})(this))}))})),this.Ra=new pL(s,a)}}async function _f(n){if(Do(n))for(const e of n.da)await e(!0)}async function wu(n){for(const e of n.da)await e(!1)}function Yw(n,e){const t=it(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),kg(t)?Ag(t):ec(t).O_()&&Ng(t,e))}function wg(n,e){const t=it(n),s=ec(t);t.Ia.delete(e),s.O_()&&Jw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Do(t)&&t.Ra.set("Unknown"))}function Ng(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ec(n).Y_(e)}function Jw(n,e){n.Va.Ue(e),ec(n).Z_(e)}function Ag(n){n.Va=new u3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ec(n).start(),n.Ra.ua()}function kg(n){return Do(n)&&!ec(n).x_()&&n.Ia.size>0}function Do(n){return it(n).Ea.size===0}function Qw(n){n.Va=void 0}async function xL(n){n.Ra.set("Online")}async function yL(n){n.Ia.forEach(((e,t)=>{Ng(n,e)}))}async function vL(n,e){Qw(n),kg(n)?(n.Ra.ha(e),Ag(n)):n.Ra.set("Unknown")}async function bL(n,e,t){if(n.Ra.set("Online"),e instanceof Pw&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){je(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Bh(n,s)}else if(e instanceof mh?n.Va.Ze(e):e instanceof Dw?n.Va.st(e):n.Va.tt(e),!t.isEqual(tt.min()))try{const s=await qw(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const h=l.Va.Tt(u);return h.targetChanges.forEach(((p,f)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(f);v&&l.Ia.set(f,v.withResumeToken(p.resumeToken,u))}})),h.targetMismatches.forEach(((p,f)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken($n.EMPTY_BYTE_STRING,v.snapshotVersion)),Jw(l,p);const _=new Tr(v.target,p,f,v.sequenceNumber);Ng(l,_)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){je(Ao,"Failed to raise snapshot:",s),await Bh(n,s)}}async function Bh(n,e,t){if(!Xl(e))throw e;n.Ea.add(1),await wu(n),n.Ra.set("Offline"),t||(t=()=>qw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{je(Ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _f(n)}))}function Ww(n,e){return e().catch((t=>Bh(n,t,e)))}async function Tf(n){const e=it(n),t=Dr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dg;for(;_L(e);)try{const a=await nL(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,TL(e,a)}catch(a){await Bh(e,a)}Xw(e)&&Zw(e)}function _L(n){return Do(n)&&n.Ta.length<10}function TL(n,e){n.Ta.push(e);const t=Dr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Xw(n){return Do(n)&&!Dr(n).x_()&&n.Ta.length>0}function Zw(n){Dr(n).start()}async function SL(n){Dr(n).ra()}async function EL(n){const e=Dr(n);for(const t of n.Ta)e.ea(t.mutations)}async function wL(n,e,t){const s=n.Ta.shift(),a=yg.from(s,e,t);await Ww(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Tf(n)}async function NL(n,e){e&&Dr(n).X_&&await(async function(s,a){if((function(u){return o3(u)&&u!==xe.ABORTED})(a.code)){const l=s.Ta.shift();Dr(s).B_(),await Ww(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Tf(s)}})(n,e),Xw(n)&&Zw(n)}async function DS(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),je(Ao,"RemoteStore received new credentials");const s=Do(t);t.Ea.add(3),await wu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _f(t)}async function AL(n,e){const t=it(n);e?(t.Ea.delete(2),await _f(t)):e||(t.Ea.add(2),await wu(t),t.Ra.set("Unknown"))}function ec(n){return n.ma||(n.ma=(function(t,s,a){const l=it(t);return l.sa(),new dL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:xL.bind(null,n),t_:yL.bind(null,n),r_:vL.bind(null,n),H_:bL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),kg(n)?Ag(n):n.Ra.set("Unknown")):(await n.ma.stop(),Qw(n))}))),n.ma}function Dr(n){return n.fa||(n.fa=(function(t,s,a){const l=it(t);return l.sa(),new hL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:SL.bind(null,n),r_:NL.bind(null,n),ta:EL.bind(null,n),na:wL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Tf(n)):(await n.fa.stop(),n.Ta.length>0&&(je(Ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,h=new Cg(e,t,u,a,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(n,e){if(wa("AsyncQueue",`${e}: ${n}`),Xl(n))return new Ie(xe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||He.comparator(t.key,s.key):(t,s)=>He.comparator(t.key,s.key),this.keyedMap=Xc(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Rl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.ga=new Zt(He.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ye(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Gl{constructor(e,t,s,a,l,u,h,p,f){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=f}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new Gl(e,t,Rl.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class CL{constructor(){this.queries=jS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=it(t),l=a.queries;a.queries=jS(),l.forEach(((u,h)=>{for(const p of h.Sa)p.onError(s)}))})(this,new Ie(xe.ABORTED,"Firestore shutting down"))}}function jS(){return new Mo((n=>bw(n)),pf)}async function Rg(n,e){const t=it(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new kL,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=Ig(u,`Initialization of query '${El(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Dg(t)}async function Mg(n,e){const t=it(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function IL(n,e){const t=it(n);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&Dg(t)}function RL(n,e,t){const s=it(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function Dg(n){n.Ca.forEach((e=>{e.next()}))}var Up,LS;(LS=Up||(Up={})).Ma="default",LS.Cache="cache";class Pg{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Gl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.key=e}}class tN{constructor(e){this.key=e}}class ML{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=bt(),this.mutatedKeys=bt(),this.eu=_w(e),this.tu=new Rl(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new PS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const T=a.get(v),E=gf(this.query,_)?_:null,I=!!T&&this.mutatedKeys.has(T.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;T&&E?T.data.isEqual(E.data)?I!==k&&(s.track({type:3,doc:E}),C=!0):this.su(T,E)||(s.track({type:2,doc:E}),C=!0,(p&&this.eu(E,p)>0||f&&this.eu(E,f)<0)&&(h=!0)):!T&&E?(s.track({type:0,doc:E}),C=!0):T&&!E&&(s.track({type:1,doc:T}),C=!0,(p||f)&&(h=!0)),C&&(E?(u=u.add(E),l=k?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,_)=>(function(E,I){const k=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Rt:C})}};return k(E)-k(I)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,f=p!==this.Za;return this.Za=p,u.length!==0||f?{snapshot:new Gl(this.query,e.tu,l,u,e.mutatedKeys,p===0,f,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=bt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new tN(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new eN(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jg="SyncEngine";class DL{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class PL{constructor(e){this.key=e,this.hu=!1}}class jL{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Mo((h=>bw(h)),pf),this.Iu=new Map,this.Eu=new Set,this.du=new Zt(He.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=Bl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LL(n,e,t=!0){const s=oN(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await nN(s,e,t,!0),a}async function UL(n,e){const t=oN(n);await nN(t,e,!0,!1)}async function nN(n,e,t,s){const a=await sL(n.localStore,Gi(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await OL(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Yw(n.remoteStore,a),h}async function OL(n,e,t,s,a){n.pu=(_,T,E)=>(async function(k,C,j,R){let z=C.view.ru(j);z.Cs&&(z=await kS(k.localStore,C.query,!1).then((({documents:D})=>C.view.ru(D,z))));const $=R&&R.targetChanges.get(C.targetId),J=R&&R.targetMismatches.get(C.targetId)!=null,Y=C.view.applyChanges(z,k.isPrimaryClient,$,J);return OS(k,C.targetId,Y.au),Y.snapshot})(n,_,T,E);const l=await kS(n.localStore,e,!0),u=new ML(e,l.Qs),h=u.ru(l.documents),p=Eu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),f=u.applyChanges(h,n.isPrimaryClient,p);OS(n,t,f.au);const v=new DL(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function VL(n,e,t){const s=it(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!pf(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await jp(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&wg(s.remoteStore,a.targetId),Op(s,a.targetId)})).catch(Wl)):(Op(s,a.targetId),await jp(s.localStore,a.targetId,!0))}async function BL(n,e){const t=it(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),wg(t.remoteStore,s.targetId))}async function GL(n,e,t){const s=YL(n);try{const a=await(function(u,h){const p=it(u),f=qt.now(),v=h.reduce(((E,I)=>E.add(I.key)),bt());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let I=Na(),k=bt();return p.Ns.getEntries(E,v).next((C=>{I=C,I.forEach(((j,R)=>{R.isValidDocument()||(k=k.add(j))}))})).next((()=>p.localDocuments.getOverlayedDocuments(E,I))).next((C=>{_=C;const j=[];for(const R of h){const z=n3(R,_.get(R.key).overlayedDocument);z!=null&&j.push(new Or(R.key,z,hw(z.value.mapValue),ti.exists(!0)))}return p.mutationQueue.addMutationBatch(E,f,j,h)})).next((C=>{T=C;const j=C.applyToLocalDocumentSet(_,k);return p.documentOverlayCache.saveOverlays(E,C.batchId,j)}))})).then((()=>({batchId:T.batchId,changes:Sw(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,p){let f=u.Vu[u.currentUser.toKey()];f||(f=new Zt(vt)),f=f.insert(h,p),u.Vu[u.currentUser.toKey()]=f})(s,a.batchId,t),await Nu(s,a.changes),await Tf(s.remoteStore)}catch(a){const l=Ig(a,"Failed to persist write");t.reject(l)}}async function sN(n,e){const t=it(n);try{const s=await eL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Mt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Mt(u.hu,14607):a.removedDocuments.size>0&&(Mt(u.hu,42227),u.hu=!1))})),await Nu(t,s,e)}catch(s){await Wl(s)}}function US(n,e,t){const s=it(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const p=it(u);p.onlineState=h;let f=!1;p.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(h)&&(f=!0)})),f&&Dg(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function zL(n,e,t){const s=it(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new Zt(He.comparator);u=u.insert(l,es.newNoDocument(l,tt.min()));const h=bt().add(l),p=new vf(tt.min(),new Map,new Zt(vt),u,h);await sN(s,p),s.du=s.du.remove(l),s.Au.delete(e),Lg(s)}else await jp(s.localStore,e,!1).then((()=>Op(s,e,t))).catch(Wl)}async function HL(n,e){const t=it(n),s=e.batch.batchId;try{const a=await Z3(t.localStore,e);aN(t,s,null),iN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Nu(t,a)}catch(a){await Wl(a)}}async function FL(n,e,t){const s=it(n);try{const a=await(function(u,h){const p=it(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let v;return p.mutationQueue.lookupMutationBatch(f,h).next((_=>(Mt(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(f,_)))).next((()=>p.mutationQueue.performConsistencyCheck(f))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(f,v,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v))).next((()=>p.localDocuments.getDocuments(f,v)))}))})(s.localStore,e);aN(s,e,t),iN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Nu(s,a)}catch(a){await Wl(a)}}function iN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function aN(n,e,t){const s=it(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Op(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||rN(n,s)}))}function rN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(wg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Lg(n))}function OS(n,e,t){for(const s of t)s instanceof eN?(n.Ru.addReference(s.key,e),qL(n,s)):s instanceof tN?(je(jg,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||rN(n,s.key)):Ye(19791,{wu:s})}function qL(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(je(jg,"New document in limbo: "+t),n.Eu.add(s),Lg(n))}function Lg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new He(Gt.fromString(e)),s=n.fu.next();n.Au.set(s,new PL(t)),n.du=n.du.insert(t,s),Yw(n.remoteStore,new Tr(Gi(mf(t.path)),s,"TargetPurposeLimboResolution",df.ce))}}async function Nu(n,e,t){const s=it(n),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,p)=>{u.push(s.pu(p,e,t).then((f=>{var v;if((f||t)&&s.isPrimaryClient){const _=f?!f.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(f){a.push(f);const _=Sg.As(p.targetId,f);l.push(_)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(p,f){const v=it(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ve.forEach(f,(T=>ve.forEach(T.Es,(E=>v.persistence.referenceDelegate.addReference(_,T.targetId,E))).next((()=>ve.forEach(T.ds,(E=>v.persistence.referenceDelegate.removeReference(_,T.targetId,E)))))))))}catch(_){if(!Xl(_))throw _;je(Eg,"Failed to update sequence numbers: "+_)}for(const _ of f){const T=_.targetId;if(!_.fromCache){const E=v.Ms.get(T),I=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(I);v.Ms=v.Ms.insert(T,k)}}})(s.localStore,l))}async function KL(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){je(jg,"User change. New user:",e.toKey());const s=await Fw(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new Ie(xe.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Nu(t,s.Ls)}}function $L(n,e){const t=it(n),s=t.Au.get(e);if(s&&s.hu)return bt().add(s.key);{let a=bt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const h=t.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function oN(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$L.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zL.bind(null,e),e.Pu.H_=IL.bind(null,e.eventManager),e.Pu.yu=RL.bind(null,e.eventManager),e}function YL(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FL.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return X3(this.persistence,new J3,e.initialUser,this.serializer)}Cu(e){return new Hw(Tg.mi,this.serializer)}Du(e){return new aL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class JL extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Mt(this.persistence.referenceDelegate instanceof Vh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new P3(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gs.withCacheSize(this.cacheSizeBytes):gs.DEFAULT;return new Hw((s=>Vh.mi(s,t)),this.serializer)}}class Vp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>US(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=KL.bind(null,this.syncEngine),await AL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new CL})()}createDatastore(e){const t=bf(e.databaseInfo.databaseId),s=(function(l){return new uL(l)})(e.databaseInfo);return(function(l,u,h,p){return new mL(l,u,h,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,h){return new gL(s,a,l,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>US(this.syncEngine,t,0)),(function(){return RS.v()?new RS:new rL})())}createSyncEngine(e,t){return(function(a,l,u,h,p,f,v){const _=new jL(a,l,u,h,p,f);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=it(a);je(Ao,"RemoteStore shutting down."),l.Ea.add(5),await wu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vp.provider={build:()=>new Vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="FirestoreClient";class QL{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Zn.UNAUTHENTICATED,this.clientId=ug.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{je(Pr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(je(Pr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ig(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function W0(n,e){n.asyncQueue.verifyOperationInProgress(),je(Pr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Fw(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function VS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await WL(n);je(Pr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>DS(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>DS(e.remoteStore,a))),n._onlineComponents=e}async function WL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je(Pr,"Using user provided OfflineComponentProvider");try{await W0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===xe.FAILED_PRECONDITION||a.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ll("Error using user provided cache. Falling back to memory cache: "+t),await W0(n,new Gh)}}else je(Pr,"Using default OfflineComponentProvider"),await W0(n,new JL(void 0));return n._offlineComponents}async function lN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je(Pr,"Using user provided OnlineComponentProvider"),await VS(n,n._uninitializedComponentsProvider._online)):(je(Pr,"Using default OnlineComponentProvider"),await VS(n,new Vp))),n._onlineComponents}function XL(n){return lN(n).then((e=>e.syncEngine))}async function zh(n){const e=await lN(n),t=e.eventManager;return t.onListen=LL.bind(null,e.syncEngine),t.onUnlisten=VL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BL.bind(null,e.syncEngine),t}function ZL(n,e,t={}){const s=new Ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,f){const v=new Ug({next:T=>{v.Nu(),u.enqueueAndForget((()=>Mg(l,_)));const E=T.docs.has(h);!E&&T.fromCache?f.reject(new Ie(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&T.fromCache&&p&&p.source==="server"?f.reject(new Ie(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new Pg(mf(h.path),v,{includeMetadataChanges:!0,qa:!0});return Rg(l,_)})(await zh(n),n.asyncQueue,e,t,s))),s.promise}function eU(n,e,t={}){const s=new Ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,h,p,f){const v=new Ug({next:T=>{v.Nu(),u.enqueueAndForget((()=>Mg(l,_))),T.fromCache&&p.source==="server"?f.reject(new Ie(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),_=new Pg(h,v,{includeMetadataChanges:!0,qa:!0});return Rg(l,_)})(await zh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firestore.googleapis.com",GS=!0;class zS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uN,this.ssl=GS}else this.host=e.host,this.ssl=e.ssl??GS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M3)throw new Ie(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ie(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ie(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ie(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new a6;switch(s.type){case"firstParty":return new c6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ie(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=BS.get(t);s&&(je("ComponentProvider","Removing Datastore"),BS.delete(t),s.terminate())})(this),Promise.resolve()}}function tU(n,e,t,s={}){var f;n=ys(n,Sf);const a=Yl(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(V1(`https://${h}`),B1("Firestore",!0)),l.host!==uN&&l.host!==h&&Ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:a,emulatorOptions:s};if(!Eo(p,u)&&(n._setSettings(p),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Zn.MOCK_USER;else{v=IP(s.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new Ie(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Zn(T)}n._authCredentials=new r6(new ew(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Pa(this.firestore,e,this._query)}}class ln{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Tu(t,ln._jsonSchema))return new ln(e,s||null,new He(Gt.fromString(t.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:wn("string",ln._jsonSchemaVersion),referencePath:wn("string")};class Ar extends Pa{constructor(e,t,s){super(e,t,mf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new He(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Wi(n,e,...t){if(n=Un(n),tw("collection","path",e),n instanceof Sf){const s=Gt.fromString(e,...t);return tS(s),new Ar(n,null,s)}{if(!(n instanceof ln||n instanceof Ar))throw new Ie(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Gt.fromString(e,...t));return tS(s),new Ar(n.firestore,null,s)}}function Wt(n,e,...t){if(n=Un(n),arguments.length===1&&(e=ug.newId()),tw("doc","path",e),n instanceof Sf){const s=Gt.fromString(e,...t);return eS(s),new ln(n,null,new He(s))}{if(!(n instanceof ln||n instanceof Ar))throw new Ie(xe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Gt.fromString(e,...t));return eS(s),new ln(n.firestore,n instanceof Ar?n.converter:null,new He(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="AsyncQueue";class FS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kw(this,"async_queue_retry"),this._c=()=>{const s=Q0();s&&je(HS,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Q0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Q0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xl(e))throw e;je(HS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,wa("INTERNAL UNHANDLED ERROR: ",qS(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Cg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ye(47125,{Pc:qS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Aa extends Sf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new FS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FS(e),this._firestoreClient=void 0,await e}}}function nU(n,e){const t=typeof n=="object"?n:F1(),s=typeof n=="string"?n:Mh,a=lg(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=kP("firestore");l&&tU(a,...l)}return a}function Ef(n){if(n._terminated)throw new Ie(xe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sU(n),n._firestoreClient}function sU(n){var s,a,l;const e=n._freezeSettings(),t=(function(h,p,f,v){return new A6(h,p,f,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,cN(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new QL(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs($n.fromBase64String(e))}catch(t){throw new Ie(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zs($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Zs._jsonSchema))return Zs.fromBase64String(e.bytes)}}Zs._jsonSchemaVersion="firestore/bytes/1.0",Zs._jsonSchema={type:wn("string",Zs._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:wn("string",Hi._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,Fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fi(e.vectorValues);throw new Ie(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fi._jsonSchemaVersion="firestore/vectorValue/1.0",Fi._jsonSchema={type:wn("string",Fi._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=/^__.*__$/;class aU{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Su(e,this.data,t,this.fieldTransforms)}}class dN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Or(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{Ac:n})}}class Vg{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hN(this.Ac)&&iU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rU{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||bf(e)}Cc(e,t,s,a=!1){return new Vg({Ac:e,methodName:t,Dc:s,path:Kn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(n){const e=n._freezeSettings(),t=bf(n._databaseId);return new rU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fN(n,e,t,s,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Bg("Data must be an object, but it was:",u,s);const h=mN(s,u);let p,f;if(l.merge)p=new Ms(u.fieldMask),f=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const T=Bp(e,_,t);if(!u.contains(T))throw new Ie(xe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);gN(v,T)||v.push(T)}p=new Ms(v),f=u.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,f=u.fieldTransforms;return new aU(new xs(h),p,f)}class Af extends Og{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Af}}function oU(n,e,t,s){const a=n.Cc(1,e,t);Bg("Data must be an object, but it was:",a,s);const l=[],u=xs.empty();Ur(s,((p,f)=>{const v=Gg(e,p,t);f=Un(f);const _=a.yc(v);if(f instanceof Af)l.push(v);else{const T=Au(f,_);T!=null&&(l.push(v),u.set(v,T))}}));const h=new Ms(l);return new dN(u,h,a.fieldTransforms)}function lU(n,e,t,s,a,l){const u=n.Cc(1,e,t),h=[Bp(e,s,t)],p=[a];if(l.length%2!=0)throw new Ie(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)h.push(Bp(e,l[T])),p.push(l[T+1]);const f=[],v=xs.empty();for(let T=h.length-1;T>=0;--T)if(!gN(f,h[T])){const E=h[T];let I=p[T];I=Un(I);const k=u.yc(E);if(I instanceof Af)f.push(E);else{const C=Au(I,k);C!=null&&(f.push(E),v.set(E,C))}}const _=new Ms(f);return new dN(v,_,u.fieldTransforms)}function cU(n,e,t,s=!1){return Au(t,n.Cc(s?4:3,e))}function Au(n,e){if(pN(n=Un(n)))return Bg("Unsupported field value:",e,n),mN(n,e);if(n instanceof Og)return(function(s,a){if(!hN(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const h of s){let p=Au(h,a.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=Un(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Q6(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=qt.fromDate(s);return{timestampValue:Oh(a.serializer,l)}}if(s instanceof qt){const l=new qt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(a.serializer,l)}}if(s instanceof Hi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Zs)return{bytesValue:jw(a.serializer,s._byteString)};if(s instanceof ln){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:bg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Fi)return(function(u,h){return{mapValue:{fields:{[uw]:{stringValue:dw},[Dh]:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Sc("VectorValues must only contain numeric values.");return gg(h.serializer,f)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${uf(s)}`)})(n,e)}function mN(n,e){const t={};return iw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ur(n,((s,a)=>{const l=Au(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function pN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qt||n instanceof Hi||n instanceof Zs||n instanceof ln||n instanceof Og||n instanceof Fi)}function Bg(n,e,t){if(!pN(t)||!nw(t)){const s=uf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Bp(n,e,t){if((e=Un(e))instanceof wf)return e._internalPath;if(typeof e=="string")return Gg(n,e);throw Hh("Field path arguments must be of type string or ",n,!1,void 0,t)}const uU=new RegExp("[~\\*/\\[\\]]");function Gg(n,e,t){if(e.search(uU)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wf(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hh(n,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${s}`),u&&(p+=` in document ${a}`),p+=")"),new Ie(xe.INVALID_ARGUMENT,h+n+p)}function gN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dU extends xN{data(){return super.data()}}function kf(n,e){return typeof e=="string"?Gg(n,e):e instanceof wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ie(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class Hg extends zg{}function tc(n,e,...t){let s=[];e instanceof zg&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((p=>p instanceof Fg)).length,h=l.filter((p=>p instanceof Cf)).length;if(u>1||u>0&&h>0)throw new Ie(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class Cf extends Hg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Cf(e,t,s)}_apply(e){const t=this._parse(e);return _N(e._query,t),new Pa(e.firestore,e.converter,Ip(e._query,t))}_parse(e){const t=Nf(e.firestore);return(function(l,u,h,p,f,v,_){let T;if(f.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ie(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){YS(_,v);const I=[];for(const k of _)I.push($S(p,l,k));T={arrayValue:{values:I}}}else T=$S(p,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||YS(_,v),T=cU(h,u,_,v==="in"||v==="not-in");return En.create(f,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zl(n,e,t){const s=e,a=kf("where",n);return Cf._create(a,s,t)}class Fg extends zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const h=l.getFlattenedFilters();for(const p of h)_N(u,p),u=Ip(u,p)})(e._query,t),new Pa(e.firestore,e.converter,Ip(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends Hg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qg(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new Ie(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ie(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hu(l,u)})(e._query,this._field,this._direction);return new Pa(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Zl(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function vN(n,e="asc"){const t=e,s=kf("orderBy",n);return qg._create(s,t)}class Kg extends Hg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Kg(e,t,s)}_apply(e){return new Pa(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}function bN(n){return g6("limit",n),Kg._create("limit",n,"F")}function $S(n,e,t){if(typeof(t=Un(t))=="string"){if(t==="")throw new Ie(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vw(e)&&t.indexOf("/")!==-1)throw new Ie(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Gt.fromString(t));if(!He.isDocumentKey(s))throw new Ie(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return cS(n,new He(s))}if(t instanceof ln)return cS(n,t._key);throw new Ie(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(t)}.`)}function YS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ie(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _N(n,e){const t=(function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ie(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hU{convertValue(e,t="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ur(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[Dh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>fn(u.doubleValue)));return new Fi(t)}convertGeoPoint(e){return new Hi(fn(e.latitude),fn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ff(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const t=Ir(e);return new qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Gt.fromString(e);Mt(Gw(s),9688,{name:e});const a=new uu(s.get(1),s.get(3)),l=new He(s.popFirst(5));return a.isEqual(t)||wa(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bo extends xN{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(kf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",bo._jsonSchema={type:wn("string",bo._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class ph extends bo{data(e={}){return super.data(e)}}class _o{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new eu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ph(this._firestore,this._userDataWriter,s.key,s,new eu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const p=new ph(a._firestore,a._userDataWriter,h.doc.key,h.doc,new eu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new ph(a._firestore,a._userDataWriter,h.doc.key,h.doc,new eu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,v=-1;return h.type!==0&&(f=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),v=u.indexOf(h.doc.key)),{type:fU(h.type),doc:p,oldIndex:f,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ug.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(n){n=ys(n,ln);const e=ys(n.firestore,Aa);return ZL(Ef(e),n._key).then((t=>SN(e,n,t)))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:wn("string",_o._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class $g extends hU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function ja(n){n=ys(n,Pa);const e=ys(n.firestore,Aa),t=Ef(e),s=new $g(e);return yN(n._query),eU(t,n._query).then((a=>new _o(e,s,n,a)))}function ka(n,e,t){n=ys(n,ln);const s=ys(n.firestore,Aa),a=TN(n.converter,e,t);return Rf(s,[fN(Nf(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ti.none())])}function Po(n,e,t,...s){n=ys(n,ln);const a=ys(n.firestore,Aa),l=Nf(a);let u;return u=typeof(e=Un(e))=="string"||e instanceof wf?lU(l,"updateDoc",n._key,e,t,s):oU(l,"updateDoc",n._key,e),Rf(a,[u.toMutation(n._key,ti.exists(!0))])}function ko(n){return Rf(ys(n.firestore,Aa),[new xg(n._key,ti.none())])}function mU(n,e){const t=ys(n.firestore,Aa),s=Wt(n),a=TN(n.converter,e);return Rf(t,[fN(Nf(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,ti.exists(!1))]).then((()=>s))}function pU(n,...e){var p,f,v;n=Un(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||KS(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(KS(e[s])){const _=e[s];e[s]=(p=_.next)==null?void 0:p.bind(_),e[s+1]=(f=_.error)==null?void 0:f.bind(_),e[s+2]=(v=_.complete)==null?void 0:v.bind(_)}let l,u,h;if(n instanceof ln)u=ys(n.firestore,Aa),h=mf(n._key.path),l={next:_=>{e[s]&&e[s](SN(u,n,_))},error:e[s+1],complete:e[s+2]};else{const _=ys(n,Pa);u=ys(_.firestore,Aa),h=_._query;const T=new $g(u);l={next:E=>{e[s]&&e[s](new _o(u,T,_,E))},error:e[s+1],complete:e[s+2]},yN(n._query)}return(function(T,E,I,k){const C=new Ug(k),j=new Pg(E,C,I);return T.asyncQueue.enqueueAndForget((async()=>Rg(await zh(T),j))),()=>{C.Nu(),T.asyncQueue.enqueueAndForget((async()=>Mg(await zh(T),j)))}})(Ef(u),h,a,l)}function Rf(n,e){return(function(s,a){const l=new Ta;return s.asyncQueue.enqueueAndForget((async()=>GL(await XL(s),a,l))),l.promise})(Ef(n),e)}function SN(n,e,t){const s=t.docs.get(e._key),a=new $g(n);return new bo(n,a,e._key,s,new eu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Ql=a})(Jl),jl(new wo("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),h=new Aa(new o6(s.getProvider("auth-internal")),new u6(u,s.getProvider("app-check-internal")),(function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ie(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(f.options.projectId,v)})(u,a),u);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),wr(QT,WT,e),wr(QT,WT,"esm2020")})();function EN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gU=EN,wN=new bu("auth","Firebase",EN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new rg("@firebase/auth");function xU(n,...e){Fh.logLevel<=yt.WARN&&Fh.warn(`Auth (${Jl}): ${n}`,...e)}function gh(n,...e){Fh.logLevel<=yt.ERROR&&Fh.error(`Auth (${Jl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,...e){throw Jg(n,...e)}function bi(n,...e){return Jg(n,...e)}function Yg(n,e,t){const s={...gU(),[e]:t};return new bu("auth","Firebase",s).create(e,{appName:n.name})}function To(n){return Yg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yU(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&$i(n,"argument-error"),Yg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return wN.create(n,...e)}function We(n,e,...t){if(!n)throw Jg(e,...t)}function ba(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gh(e),new Error(e)}function Ca(n,e){n||ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function vU(){return JS()==="http:"||JS()==="https:"}function JS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vU()||LP()||"connection"in navigator)?navigator.onLine:!0}function _U(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ca(t>e,"Short delay should be less than long delay!"),this.isMobile=DP()||UP()}get(){return bU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(n,e){Ca(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EU=new ku(3e4,6e4);function Wg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function nc(n,e,t,s,a={}){return AN(n,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const h=_u({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:p,...l};return jP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Yl(n.emulatorConfig.host)&&(f.credentials="include"),NN.fetch()(await kN(n,n.config.apiHost,t,h),f)})}async function AN(n,e,t){n._canInitEmulator=!1;const s={...TU,...e};try{const a=new NU(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ah(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[p,f]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw ah(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw ah(n,"user-disabled",u);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Yg(n,v,f);$i(n,v)}}catch(a){if(a instanceof Da)throw a;$i(n,"network-request-failed",{message:String(a)})}}async function wU(n,e,t,s,a={}){const l=await nc(n,e,t,s,a);return"mfaPendingCredential"in l&&$i(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function kN(n,e,t,s){const a=`${e}${t}?${s}`,l=n,u=l.config.emulator?Qg(n.config,a):`${n.config.apiScheme}://${a}`;return SU.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class NU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(bi(this.auth,"network-request-failed")),EU.get())})}}function ah(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=bi(n,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(n,e){return nc(n,"POST","/v1/accounts:delete",e)}async function qh(n,e){return nc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kU(n,e=!1){const t=Un(n),s=await t.getIdToken(e),a=Xg(s);We(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:ru(X0(a.auth_time)),issuedAtTime:ru(X0(a.iat)),expirationTime:ru(X0(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function X0(n){return Number(n)*1e3}function Xg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const a=j1(t);return a?JSON.parse(a):(gh("Failed to decode base64 JWT payload"),null)}catch(a){return gh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function QS(n){const e=Xg(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Da&&CU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function CU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(n){var _;const e=n.auth,t=await n.getIdToken(),s=await pu(n,qh(e,{idToken:t}));We(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?CN(a.providerUserInfo):[],u=MU(n.providerData,l),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),f=h?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new zp(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,v)}async function RU(n){const e=Un(n);await Kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MU(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function CN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(n,e){const t=await AN(n,{},async()=>{const s=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await kN(n,a,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:s};return n.emulatorConfig&&Yl(n.emulatorConfig.host)&&(p.credentials="include"),NN.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PU(n,e){return nc(n,"POST","/v2/accounts:revokeToken",Wg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=QS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await DU(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new Ml;return s&&(We(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(We(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(We(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class xi{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new IU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await pu(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kU(this,e)}reload(){return RU(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Kh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(To(this.auth));const e=await this.getIdToken();return await pu(this,AU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,f=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:E,providerData:I,stsTokenManager:k}=t;We(_&&k,e,"internal-error");const C=Ml.fromJSON(this.name,k);We(typeof _=="string",e,"internal-error"),xr(s,e.name),xr(a,e.name),We(typeof T=="boolean",e,"internal-error"),We(typeof E=="boolean",e,"internal-error"),xr(l,e.name),xr(u,e.name),xr(h,e.name),xr(p,e.name),xr(f,e.name),xr(v,e.name);const j=new xi({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:E,photoURL:u,phoneNumber:l,tenantId:h,stsTokenManager:C,createdAt:f,lastLoginAt:v});return I&&Array.isArray(I)&&(j.providerData=I.map(R=>({...R}))),p&&(j._redirectEventId=p),j}static async _fromIdTokenResponse(e,t,s=!1){const a=new Ml;a.updateFromServerResponse(t);const l=new xi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Kh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];We(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?CN(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new Ml;h.updateFromIdToken(s);const p=new xi({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new zp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,f),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Map;function _a(n){Ca(n instanceof Function,"Expected a class definition");let e=WS.get(n);return e?(Ca(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,WS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IN.type="NONE";const XS=IN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(n,e,t){return`firebase:${n}:${e}:${t}`}class Dl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=xh(this.userKey,a.apiKey,l),this.fullPersistenceKey=xh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qh(this.auth,{idToken:e}).catch(()=>{});return t?xi._fromGetAccountInfoResponse(this.auth,t,e):null}return xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Dl(_a(XS),e,s);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||_a(XS);const u=xh(s,e.config.apiKey,e.name);let h=null;for(const f of t)try{const v=await f._get(u);if(v){let _;if(typeof v=="string"){const T=await qh(e,{idToken:v}).catch(()=>{});if(!T)break;_=await xi._fromGetAccountInfoResponse(e,T,v)}else _=xi._fromJSON(e,v);f!==l&&(h=_),l=f;break}}catch{}const p=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Dl(l,e,s):(l=p[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(u)}catch{}})),new Dl(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LN(e))return"Blackberry";if(UN(e))return"Webos";if(MN(e))return"Safari";if((e.includes("chrome/")||DN(e))&&!e.includes("edge/"))return"Chrome";if(jN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function RN(n=ss()){return/firefox\//i.test(n)}function MN(n=ss()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DN(n=ss()){return/crios\//i.test(n)}function PN(n=ss()){return/iemobile/i.test(n)}function jN(n=ss()){return/android/i.test(n)}function LN(n=ss()){return/blackberry/i.test(n)}function UN(n=ss()){return/webos/i.test(n)}function Zg(n=ss()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jU(n=ss()){var e;return Zg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function LU(){return OP()&&document.documentMode===10}function ON(n=ss()){return Zg(n)||jN(n)||UN(n)||LN(n)||/windows phone/i.test(n)||PN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(n,e=[]){let t;switch(n){case"Browser":t=ZS(ss());break;case"Worker":t=`${ZS(ss())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,h)=>{try{const p=e(l);u(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e={}){return nc(n,"GET","/v2/passwordPolicy",Wg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=6;class BU{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eE(this),this.idTokenSubscription=new eE(this),this.beforeStateQueue=new UU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_a(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Dl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qh(this,{idToken:e}),s=await xi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(gi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_U()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(To(this));const t=e?Un(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(To(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(To(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OU(this),t=new BU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await PU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_a(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await Dl.create(this,[_a(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&xU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mf(n){return Un(n)}class eE{constructor(e){this.auth=e,this.observer=null,this.addObserver=KP(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ex={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zU(n){ex=n}function HU(n){return ex.loadJS(n)}function FU(){return ex.gapiScript}function qU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(n,e){const t=lg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Eo(l,e??{}))return a;$i(a,"already-initialized")}return t.initialize({options:e})}function $U(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(_a);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function YU(n,e,t){const s=Mf(n);We(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=BN(e),{host:u,port:h}=JU(e),p=h===null?"":`:${h}`,f={url:`${l}//${u}${p}/`},v=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){We(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),We(Eo(f,s.config.emulator)&&Eo(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=f,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Yl(u)?(V1(`${l}//${u}${p}`),B1("Auth",!0)):QU()}function BN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function JU(n){const e=BN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:tE(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:tE(u)}}}function tE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function QU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ba("not implemented")}_getIdTokenResponse(e){return ba("not implemented")}_linkToIdToken(e,t){return ba("not implemented")}_getReauthenticationResolver(e){return ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n,e){return wU(n,"POST","/v1/accounts:signInWithIdp",Wg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="http://localhost";class Co extends GN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$i("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new Co(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Pl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Pl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pl(e,t)}buildRequest(){const e={requestUri:WU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_u(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Cu{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Co._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return va.credential(t,s)}catch{return null}}}va.GOOGLE_SIGN_IN_METHOD="google.com";va.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Cu{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Cu{constructor(){super("twitter.com")}static credential(e,t){return Co._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return br.credential(t,s)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await xi._fromIdTokenResponse(e,s,a),u=nE(s);return new Hl({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=nE(s);return new Hl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function nE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends Da{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new $h(e,t,s,a)}}function zN(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(n,l,e,s):l})}async function XU(n,e,t=!1){const s=await pu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hl._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZU(n,e,t=!1){const{auth:s}=n;if(gi(s.app))return Promise.reject(To(s));const a="reauthenticate";try{const l=await pu(n,zN(s,a,e,n),t);We(l.idToken,s,"internal-error");const u=Xg(l.idToken);We(u,s,"internal-error");const{sub:h}=u;return We(n.uid===h,s,"user-mismatch"),Hl._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&$i(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(n,e,t=!1){if(gi(n.app))return Promise.reject(To(n));const s="signIn",a=await zN(n,s,e),l=await Hl._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}function tO(n,e,t,s){return Un(n).onIdTokenChanged(e,t,s)}function nO(n,e,t){return Un(n).beforeAuthStateChanged(e,t)}function sO(n,e,t,s){return Un(n).onAuthStateChanged(e,t,s)}function iO(n){return Un(n).signOut()}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=1e3,rO=10;class FN extends HN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ON(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,p)=>{this.notifyListeners(u,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);LU()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,rO):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},aO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FN.type="LOCAL";const oO=FN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN extends HN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qN.type="SESSION";const KN=qN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Df(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async f=>f(t.origin,l)),p=await lO(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,p)=>{const f=nx("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(T.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function uO(n){qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function dO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function fO(){return $N()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="firebaseLocalStorageDb",mO=1,Jh="firebaseLocalStorage",JN="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pf(n,e){return n.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function pO(){const n=indexedDB.deleteDatabase(YN);return new Iu(n).toPromise()}function Hp(){const n=indexedDB.open(YN,mO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Jh,{keyPath:JN})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Jh)?e(s):(s.close(),await pO(),e(await Hp()))})})}async function sE(n,e,t){const s=Pf(n,!0).put({[JN]:e,value:t});return new Iu(s).toPromise()}async function gO(n,e){const t=Pf(n,!1).get(e),s=await new Iu(t).toPromise();return s===void 0?null:s.value}function iE(n,e){const t=Pf(n,!0).delete(e);return new Iu(t).toPromise()}const xO=800,yO=3;class QN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>yO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $N()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(fO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await dO(),!this.activeServiceWorker)return;this.sender=new cO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await sE(e,Yh,"1"),await iE(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>sE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>gO(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Pf(a,!1).getAll();return new Iu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QN.type="LOCAL";const vO=QN;new ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(n,e){return e?_a(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends GN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bO(n){return eO(n.auth,new sx(n),n.bypassAuthState)}function _O(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),ZU(t,new sx(n),n.bypassAuthState)}async function TO(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),XU(t,new sx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bO;case"linkViaPopup":case"linkViaRedirect":return TO;case"reauthViaPopup":case"reauthViaRedirect":return _O;default:$i(this.auth,"internal-error")}}resolve(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=new ku(2e3,1e4);async function EO(n,e,t){if(gi(n.app))return Promise.reject(bi(n,"operation-not-supported-in-this-environment"));const s=Mf(n);yU(n,e,tx);const a=WN(s,t);return new vo(s,"signInViaPopup",e,a).executeNotNull()}class vo extends XN{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Ca(this.filter.length===1,"Popup operations only handle one event");const e=nx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SO.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="pendingRedirect",yh=new Map;class NO extends XN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const s=await AO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AO(n,e){const t=IO(e),s=CO(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function kO(n,e){yh.set(n._key(),e)}function CO(n){return _a(n._redirectPersistence)}function IO(n){return xh(wO,n.config.apiKey,n.name)}async function RO(n,e,t=!1){if(gi(n.app))return Promise.reject(To(n));const s=Mf(n),a=WN(s,e),u=await new NO(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=600*1e3;class DO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!ZN(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(bi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MO&&this.cachedEventUids.clear(),this.cachedEventUids.has(aE(e))}saveEventToCache(e){this.cachedEventUids.add(aE(e)),this.lastProcessedEventTime=Date.now()}}function aE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(n,e={}){return nc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UO=/^https?/;async function OO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await jO(n);for(const t of e)try{if(VO(t))return}catch{}$i(n,"unauthorized-domain")}function VO(n){const e=Gp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!UO.test(t))return!1;if(LO.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new ku(3e4,6e4);function rE(){const n=qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function GO(n){return new Promise((e,t)=>{var a,l,u;function s(){rE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rE(),t(bi(n,"network-request-failed"))},timeout:BO.get()})}if((l=(a=qi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=qi().gapi)!=null&&u.load)s();else{const h=qU("iframefcb");return qi()[h]=()=>{gapi.load?s():t(bi(n,"network-request-failed"))},HU(`${FU()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw vh=null,e})}let vh=null;function zO(n){return vh=vh||GO(n),vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new ku(5e3,15e3),FO="__/auth/iframe",qO="emulator/auth/iframe",KO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$O=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YO(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qg(e,qO):`https://${n.config.authDomain}/${FO}`,s={apiKey:e.apiKey,appName:n.name,v:Jl},a=$O.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${_u(s).slice(1)}`}async function JO(n){const e=await zO(n),t=qi().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:YO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KO,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=bi(n,"network-request-failed"),h=qi().setTimeout(()=>{l(u)},HO.get());function p(){qi().clearTimeout(h),a(s)}s.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WO=500,XO=600,ZO="_blank",eV="http://localhost";class oE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tV(n,e,t,s=WO,a=XO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p={...QO,width:s.toString(),height:a.toString(),top:l,left:u},f=ss().toLowerCase();t&&(h=DN(f)?ZO:t),RN(f)&&(e=e||eV,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[E,I])=>`${T}${E}=${I},`,"");if(jU(f)&&h!=="_self")return nV(e||"",h),new oE(null);const _=window.open(e||"",h,v);We(_,n,"popup-blocked");try{_.focus()}catch{}return new oE(_)}function nV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV="__/auth/handler",iV="emulator/auth/handler",aV=encodeURIComponent("fac");async function lE(n,e,t,s,a,l){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Jl,eventId:a};if(e instanceof tx){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",qP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))u[v]=_}if(e instanceof Cu){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const p=await n._getAppCheckToken(),f=p?`#${aV}=${encodeURIComponent(p)}`:"";return`${rV(n)}?${_u(h).slice(1)}${f}`}function rV({config:n}){return n.emulator?Qg(n,iV):`https://${n.authDomain}/${sV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="webStorageSupport";class oV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KN,this._completeRedirectFn=RO,this._overrideRedirectResult=kO}async _openPopup(e,t,s,a){var u;Ca((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await lE(e,t,s,Gp(),a);return tV(e,l,nx())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await lE(e,t,s,Gp(),a);return uO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ca(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await JO(e),s=new DO(e);return t.register("authEvent",a=>(We(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Z0,{type:Z0},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[Z0];l!==void 0&&t(!!l),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ON()||MN()||Zg()}}const lV=oV;var cE="@firebase/auth",uE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dV(n){jl(new wo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;We(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VN(n)},f=new GU(s,a,l,p);return $U(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),jl(new wo("auth-internal",e=>{const t=Mf(e.getProvider("auth").getImmediate());return(s=>new cV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(cE,uE,uV(n)),wr(cE,uE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=300,fV=O1("authIdTokenMaxAge")||hV;let dE=null;const mV=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>fV)return;const a=t==null?void 0:t.token;dE!==a&&(dE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function pV(n=F1()){const e=lg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=KU(n,{popupRedirectResolver:lV,persistence:[vO,oO,KN]}),s=O1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=mV(l.toString());nO(t,u,()=>u(t.currentUser)),tO(t,h=>u(h))}}const a=L1("auth");return a&&YU(t,`http://${a}`),t}function gV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}zU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=bi("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",gV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dV("Browser");const Qh={xp:0,level:1,streak:0,lastActiveDate:"",unlockedAchievements:[]},xV=(n,e,t,s)=>{let a=0;const l=e.filter(u=>u.isCorrect).length;return a+=l*10,e.length>0&&l===e.length&&(a+=50),t&&(a+=100,s==="SKD"&&n>=350&&(a+=100),s==="UTBK"&&n>=600&&(a+=100)),a},hE=n=>Math.floor(Math.sqrt(n/100))+1,fE=n=>100*Math.pow(n,2),eA=n=>{const e=[...Fb].reverse().find(t=>n>=t.level);return e?e.title:Fb[0].title},yV=n=>{const e=new Date().toISOString().split("T")[0],t=n.lastActiveDate;if(t===e)return n;const s=new Date;s.setDate(s.getDate()-1);const a=s.toISOString().split("T")[0];let l=n.streak;return t===a?l+=1:l=1,{...n,streak:l,lastActiveDate:e}},vV=(n,e)=>{const t=new Set(n.unlockedAchievements),s=[];return sp.forEach(a=>{t.has(a.id)||a.condition&&a.condition(e,n)&&s.push(a)}),s},bV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},tA=H1(bV),Et=nU(tA),ix=pV(tA),_V=new va;console.log("Firebase Service Initialized for: fajmuls-learning");const nA="benchmark_scores",sA="global_leaderboard",ax="test_packages",mn="users",Ru="battles",TV=n=>sO(ix,n),SV=async()=>{try{return(await EO(ix,_V)).user}catch(n){throw console.error("Error signing in with Google",n),n}},EV=async()=>{try{await iO(ix)}catch(n){console.error("Error signing out",n)}},wV=async n=>{const e=tc(Wi(Et,mn),zl("username_lowercase","==",n.toLowerCase()));return(await ja(e)).empty},Fp=async n=>{const e=Wt(Et,mn,n),t=await If(e);if(t.exists()){const s=t.data();return s.gamification?s:{...s,gamification:Qh}}else return null},NV=async(n,e)=>{const t=Wt(Et,mn,n);await ka(t,{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0});const s=await If(t);s.exists()&&!s.data().gamification&&await Po(t,{gamification:Qh})},mE=async(n,e)=>{try{await Po(Wt(Et,mn,n),{gamification:e})}catch(t){console.error("Error updating gamification",t)}},AV=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await Po(Wt(Et,mn,n),t)},jf=n=>{const e=new WeakSet;return JSON.parse(JSON.stringify(n,(t,s)=>{if(typeof s=="object"&&s!==null){if(e.has(s))return;e.add(s)}if(s!==void 0)return s}))},kV=async(n,e)=>{try{const t=e.timestamp?`sess-${e.timestamp}`:`sess-${Date.now()}`,s=jf(e);await ka(Wt(Et,mn,n,"sessions",t),{...s,id:t}),console.log(`Session ${t} saved to cloud`)}catch(t){throw console.error("Error saving session to cloud",t),t}},CV=async n=>{try{const e=tc(Wi(Et,mn,n,"sessions"),vN("timestamp","desc")),t=await ja(e),s=[];return t.forEach(a=>{s.push({...a.data(),id:a.id})}),s}catch(e){return console.error("Error fetching all saved sessions",e),[]}},pE=async(n,e)=>{try{await ko(Wt(Et,mn,n,"sessions",e)),console.log(`Cloud session ${e} deleted`)}catch(t){console.error("Error deleting session from cloud",t)}},IV=async n=>{console.log("clearSessionFromCloud called - Use deleteSavedSession for specific items")},gE=async(n,e)=>{try{const t=jf(e);await ka(Wt(Et,mn,n,"history",e.id),t),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},iA=async n=>{try{const e=tc(Wi(Et,mn,n,"history")),t=await ja(e),s=[];return t.forEach(a=>{s.push(a.data())}),s.sort((a,l)=>new Date(l.date).getTime()-new Date(a.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},RV=async(n,e)=>{try{await ko(Wt(Et,mn,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},xE=async(n,e,t,s,a,l)=>{if(!a||a.startsWith("guest-"))return;const u=`${n}_${e}_${a}`,h=Wt(Et,sA,u);try{const p=await If(h);if(p.exists()){const f=p.data();t>f.score&&await Po(h,{score:t,packageName:l||f.packageName,timestamp:Date.now(),username:s})}else{const f={uid:a,username:s,category:n,subCategory:e,score:t,packageName:l,timestamp:Date.now()};await ka(h,f)}}catch(p){console.error("Error saving to global leaderboard",p)}},_l=async(n,e,t=50)=>{try{const s=tc(Wi(Et,sA),zl("category","==",n),zl("subCategory","==",e),vN("score","desc"),bN(t)),a=await ja(s),l=[];return a.forEach(u=>l.push(u.data())),l}catch(s){return console.error(`Error fetching leaderboard for ${n}/${e}:`,s),[]}},MV=async(n,e,t,s)=>{try{await mU(Wi(Et,nA),{game:n,score:e,username:t,unit:s,timestamp:Date.now()})}catch(a){console.error("Error saving score to Firebase:",a)}},DV=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=tc(Wi(Et,nA),zl("game","==",n)),a=await ja(s),l=[];a.forEach(p=>{l.push({id:p.id,...p.data()})}),l.sort((p,f)=>t?p.score-f.score:f.score-p.score);const u=[],h=new Set;for(const p of l){const f=p.username.toLowerCase().trim();if(h.has(f)||(u.push(p),h.add(f)),u.length>=e)break}return u}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},yE=async n=>{try{const e=jf(n);await ka(Wt(Et,ax,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},PV=async()=>{try{const n=await ja(Wi(Et,ax)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},jV=async n=>{try{await ko(Wt(Et,ax,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}},LV=async n=>{if(!n||n.length<3)return[];try{const e=tc(Wi(Et,mn),zl("username_lowercase",">=",n.toLowerCase()),zl("username_lowercase","<=",n.toLowerCase()+""),bN(10));return(await ja(e)).docs.map(s=>{var l;const a=s.data();return{uid:s.id,username:a.username,photoURL:a.photoURL,level:((l=a.gamification)==null?void 0:l.level)||1,lastActive:a.lastLogin}})}catch(e){return console.error("Error searching users",e),[]}},UV=async(n,e)=>{const t={id:`${n.uid}_${Date.now()}`,fromUid:n.uid,fromUsername:n.username,fromPhotoURL:n.photoURL,fromLevel:n.level,timestamp:Date.now()};await ka(Wt(Et,mn,e,"friend_requests",n.uid),t)},OV=async n=>(await ja(Wi(Et,mn,n,"friend_requests"))).docs.map(t=>t.data()),VV=async(n,e,t)=>{const s={uid:t.fromUid,username:t.fromUsername,photoURL:t.fromPhotoURL,level:t.fromLevel,lastActive:new Date().toISOString()};await ka(Wt(Et,mn,n,"friends",t.fromUid),s),await ka(Wt(Et,mn,t.fromUid,"friends",n),e),await ko(Wt(Et,mn,n,"friend_requests",t.fromUid))},BV=async(n,e)=>{await ko(Wt(Et,mn,n,"friend_requests",e))},GV=async(n,e)=>{try{await ko(Wt(Et,mn,n,"friends",e)),await ko(Wt(Et,mn,e,"friends",n))}catch(t){throw console.error("Error removing friend",t),t}},zV=async n=>{var e;try{const t=await ja(Wi(Et,mn,n,"friends")),s=[];for(const a of t.docs){const l=a.data(),u=await Fp(l.uid);u?s.push({uid:l.uid,username:u.username,photoURL:u.photoURL,level:((e=u.gamification)==null?void 0:e.level)||1,lastActive:u.lastLogin}):s.push(l)}return s}catch(t){return console.error("Error getting friends",t),[]}},HV=async(n,e,t,s)=>{const a=Math.random().toString(36).substring(2,8).toUpperCase(),l={id:a,hostUid:n,hostName:e,guestUid:null,guestName:null,status:"WAITING",category:t,questions:jf(s),scores:{[n]:0},progress:{[n]:0},winner:null,createdAt:Date.now()};return await ka(Wt(Et,Ru,a),l),a},FV=async(n,e,t)=>{const s=Wt(Et,Ru,n),a=await If(s);if(!a.exists())throw new Error("Room not found");const l=a.data();if(l.status!=="WAITING")throw new Error("Game already started or finished");if(l.guestUid)throw new Error("Room is full");return await Po(s,{guestUid:e,guestName:t,status:"STARTING",[`scores.${e}`]:0,[`progress.${e}`]:0}),!0},qV=(n,e)=>pU(Wt(Et,Ru,n),t=>{t.exists()&&e(t.data())}),KV=async(n,e,t,s)=>{const a=Wt(Et,Ru,n);await Po(a,{[`scores.${e}`]:t,[`progress.${e}`]:s})},$V=async(n,e)=>{const t=Wt(Et,Ru,n);await Po(t,{status:"FINISHED",winner:e})};class YV{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(Hb[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const a=this.audioCache[e];a.currentTime=0;const l=a.play();l!==void 0&&l.catch(()=>{});return}const t=Hb[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const Z=new YV;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QV=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),vE=n=>{const e=QV(n);return e.charAt(0).toUpperCase()+e.slice(1)},aA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),WV=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=G.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...h},p)=>G.createElement("svg",{ref:p,...XV,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:aA("lucide",a),...!l&&!WV(h)&&{"aria-hidden":"true"},...h},[...u.map(([f,v])=>G.createElement(f,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(n,e)=>{const t=G.forwardRef(({className:s,...a},l)=>G.createElement(ZV,{ref:l,iconNode:e,className:aA(`lucide-${JV(vE(n))}`,`lucide-${n}`,s),...a}));return t.displayName=vE(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ns=_e("activity",e8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],dt=_e("arrow-left",t8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],s8=_e("arrow-up",n8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],rA=_e("award",i8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],r8=_e("bell-off",a8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],l8=_e("bell",o8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qp=_e("book-open",c8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Lf=_e("book",u8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Rs=_e("brain",d8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Uf=_e("briefcase",h8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],m8=_e("building-2",f8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],g8=_e("calculator",p8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],y8=_e("calendar",x8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],b8=_e("camera",v8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],So=_e("chart-no-axes-column",_8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],S8=_e("chevron-down",T8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_r=_e("chevron-right",E8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],N8=_e("circle-alert",w8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yn=_e("circle-check-big",A8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],C8=_e("circle-play",k8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Vr=_e("circle-x",I8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kr=_e("clock",R8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],bE=_e("cloud-upload",M8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],gu=_e("copy",D8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],j8=_e("crosshair",P8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],U8=_e("crown",L8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],oA=_e("download",O8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],B8=_e("eraser",V8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],z8=_e("external-link",G8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fl=_e("eye",H8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],q8=_e("file-search",F8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_i=_e("file-text",K8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Y8=_e("flag",$8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],lA=_e("flame",J8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],W8=_e("footprints",Q8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Z8=_e("funnel",X8);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],_E=_e("git-compare",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],n9=_e("git-merge",t9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],i9=_e("globe",s9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Mu=_e("graduation-cap",a9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ia=_e("grid-3x3",r9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Wh=_e("hash",o9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Of=_e("heart",l9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Du=_e("history",c9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],d9=_e("info",u9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],f9=_e("landmark",h9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],rx=_e("layers",m9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],g9=_e("layout-grid",p9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],cA=_e("lightbulb",x9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ln=_e("loader-circle",y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uA=_e("lock",v9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_9=_e("log-out",b9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Xh=_e("map",T9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],TE=_e("medal",S9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],w9=_e("message-circle",E9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Vf=_e("message-square",N9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ox=_e("moon",A9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],dA=_e("mouse-pointer-2",k9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],I9=_e("music",C9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],hA=_e("package",R9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],xu=_e("palette",M9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],yu=_e("pause",D9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],SE=_e("pen-tool",P9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],L9=_e("pen",j9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],jo=_e("play",U9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V9=_e("plus",O9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],G9=_e("refresh-cw",B9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],H9=_e("repeat",z9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],q9=_e("rocket",F9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Kp=_e("rotate-ccw",K9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bf=_e("save",$9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bh=_e("search",Y9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fA=_e("settings",J9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],W9=_e("shapes",Q9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Z9=_e("share-2",X9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],t7=_e("shield-check",e7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],s7=_e("shield",n7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],a7=_e("star",i7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],mA=_e("sun",r7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],pA=_e("swords",o7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],jr=_e("target",l7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],$p=_e("timer",c7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Io=_e("trash-2",u7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],h7=_e("trending-up",d7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lx=_e("triangle-alert",f7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ds=_e("trophy",m7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Zh=_e("type",p7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],cx=_e("upload",g7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],y7=_e("user-plus",x7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gA=_e("user",v7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vu=_e("users",b7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],T7=_e("volume-2",_7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],E7=_e("volume-x",S7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ux=_e("x",w7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],dx=_e("youtube",N7);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],si=_e("zap",A7),k7=()=>{const[n,e]=G.useState(!1),[t,s]=G.useState(1500),[a,l]=G.useState(!1),[u,h]=G.useState("focus");G.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),G.useEffect(()=>{let E=null;return a&&t>0?E=setInterval(()=>{s(t-1)},1e3):t===0&&(l(!1),p()),()=>clearInterval(E)},[a,t]);const p=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(I=>console.log("Audio play failed",I)),"Notification"in window&&Notification.permission==="granted"&&new Notification(u==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:u==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},f=()=>l(!a),v=()=>{l(!1),s(u==="focus"?1500:300)},_=()=>{const E=u==="focus"?"break":"focus";h(E),s(E==="focus"?1500:300),l(!1)},T=E=>{const I=Math.floor(E/60),k=E%60;return`${I.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`};return n?o.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[o.jsxs("div",{className:`p-4 ${u==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($p,{size:20}),o.jsx("span",{className:"font-bold",children:u==="focus"?"Fokus":"Istirahat"})]}),o.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:o.jsx(ux,{size:18})})]}),o.jsxs("div",{className:"p-6 flex flex-col items-center",children:[o.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),o.jsxs("div",{className:"flex gap-4 mb-6",children:[o.jsx("button",{onClick:f,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:a?o.jsx(yu,{size:24}):o.jsx(jo,{size:24})}),o.jsx("button",{onClick:v,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:o.jsx(Kp,{size:24})})]}),o.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",u==="focus"?"Istirahat":"Fokus"]})]})]}):o.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[o.jsx($p,{size:24}),o.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},C7=({data:n,onNext:e})=>{const[t,s]=G.useState(!1);return o.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[o.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[o.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:o.jsxs("div",{className:"text-center",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-2 border-b border-slate-100 pb-2",children:n.title}),o.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),o.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),o.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),o.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:o.jsxs("div",{className:"text-center text-white",children:[n.title&&o.jsx("h3",{className:"text-sm font-bold text-white/60 uppercase tracking-widest mb-2 border-b border-white/20 pb-2",children:n.title}),o.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),o.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&o.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[o.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),o.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),o.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},xA=({node:n,depth:e=0})=>o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&o.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),o.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>o.jsxs("div",{className:"flex flex-col items-center relative",children:[o.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),o.jsx(xA,{node:t,depth:e+1})]},s))]})]}),I7=({data:n})=>{const e=n.root||n;return o.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:o.jsx(xA,{node:e})})},xo=({className:n="",height:e="h-4",width:t="w-full"})=>o.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),R7=()=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx(xo,{height:"h-12",width:"w-12",className:"rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(xo,{height:"h-4",width:"w-1/3"}),o.jsx(xo,{height:"h-3",width:"w-1/2"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(xo,{height:"h-4"}),o.jsx(xo,{height:"h-4"}),o.jsx(xo,{height:"h-4",width:"w-2/3"})]})]}),M7=({onComplete:n})=>{const e=()=>{Z.play("click"),n()};return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[o.jsxs("div",{className:"relative mb-8 group",children:[o.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),o.jsx("img",{src:Th,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",o.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),o.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),o.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[o.jsx(q9,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},D7=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:a})=>{var h,p;if(!n)return null;const l=f=>{Z.play("tap"),s({...t,[f]:!t[f]})},u=f=>{s({...t,volume:parseFloat(f.target.value)})};return o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(fA,{size:24,className:"text-slate-400"})," Pengaturan"]}),o.jsx("button",{onClick:()=>{Z.play("back"),e()},children:o.jsx(Vr,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),o.jsxs("div",{className:"space-y-4",children:[a&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-lg overflow-hidden",children:a.photoURL?o.jsx("img",{src:a.photoURL,alt:"Prof",className:"w-full h-full object-cover"}):(p=(h=a.username)==null?void 0:h[0])==null?void 0:p.toUpperCase()}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:a.username}),o.jsx("div",{className:"text-xs text-slate-500",children:a.isGuest?"Mode Tamu":"Akun Terhubung"})]})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.darkMode?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,children:t.darkMode?o.jsx(ox,{size:20}):o.jsx(mA,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Tema Gelap"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Tampilan malam hari."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.darkMode,onChange:()=>l("darkMode")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?o.jsx(T7,{size:20}):o.jsx(E7,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>l("soundEnabled")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:o.jsx(I9,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Musik Latar"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Musik santai saat belajar."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.musicEnabled,onChange:()=>l("musicEnabled")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),o.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:u,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?o.jsx(l8,{size:20}):o.jsx(r8,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>l("funnyNotifications")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:o.jsx(Yn,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>l("confirmActions")}),o.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},P7="Fajmuls22",j7=({category:n,skdStream:e,tpaStream:t,availablePackages:s,history:a,onSelectPackage:l,onGenerateNew:u,onImportPackage:h,onDeletePackage:p,onBack:f,showToast:v,confirmEnabled:_,onRefresh:T,isLoading:E})=>{G.useEffect(()=>{T()},[]);const[I,k]=G.useState(""),[C,j]=G.useState(!1),[R,z]=G.useState(null),[$,J]=G.useState(!1),Y=G.useRef(null),D=(q,ie)=>{const pe=a.filter(he=>he.packageId===q||he.packageTitle&&he.packageTitle.trim()===ie.trim());if(pe.length===0)return{attempts:0,highScore:0,avgScore:0,lastAttemptDate:""};const Ue=pe.map(he=>he.score);return{attempts:pe.length,highScore:Math.max(...Ue),avgScore:Math.round(Ue.reduce((he,H)=>he+H,0)/Ue.length),lastAttemptDate:pe[0].date}},N=(q,ie)=>{Z.play("click"),z({type:q,payload:ie}),k(""),j(!0)},M=()=>{var q;if(!I){v("Masukkan token akses!","error");return}I===P7?(j(!1),Z.play("success"),(R==null?void 0:R.type)==="GENERATE"?L():(R==null?void 0:R.type)==="IMPORT"?(q=Y.current)==null||q.click():(R==null?void 0:R.type)==="DELETE"&&O(R.payload)):(Z.play("error"),v("Token salah! Akses ditolak.","error"))},L=async()=>{J(!0);try{await u("verified_client")}catch(q){console.error(q)}finally{J(!1)}},O=q=>{p(q)},B=(q,ie)=>{q.stopPropagation();const pe=JSON.stringify(ie,null,2),Ue=new Blob([pe],{type:"application/json"}),he=URL.createObjectURL(Ue),H=document.createElement("a");H.href=he,H.download=`${ie.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(he),v("Paket Soal berhasil didownload","success")},U=()=>{Z.play("click"),T()},Te=s.filter(q=>q.category!==n?!1:n==="SKD"&&e?q.skdStream===e:n==="TPA"?t==="PSIKOTEST_KEDINASAN"?q.tpaStream==="PSIKOTEST_KEDINASAN"||q.title&&q.title.toLowerCase().includes("psikotes"):q.tpaStream==="TPA_TBI"||!q.tpaStream&&!q.title.toLowerCase().includes("psikotes"):!0).sort((q,ie)=>q.title.localeCompare(ie.title,void 0,{numeric:!0,sensitivity:"base"}));let Ce=`Pilih Paket Soal ${n}`;return n==="SKD"&&e&&(Ce=`Paket Soal SKD ${e==="CPNS"?"CPNS Umum":"Kedinasan"}`),n==="TPA"&&t==="PSIKOTEST_KEDINASAN"&&(Ce="Paket Psikotes Kedinasan (STAN)"),n==="TPA"&&t==="TPA_TBI"&&(Ce="Paket Soal TPA & TBI"),o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[C&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:o.jsx(t7,{size:32})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),o.jsx("input",{type:"password",placeholder:"Token Akses...",value:I,onChange:q=>k(q.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:q=>q.key==="Enter"&&M()}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),o.jsx("button",{onClick:M,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),o.jsxs("div",{className:"max-w-4xl w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:f,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[o.jsx(dt,{size:20})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:Ce}),o.jsx("button",{onClick:U,disabled:E,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:o.jsx(G9,{size:20,className:E?"animate-spin":""})})]})]}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:Ce}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(uA,{size:18,className:"text-slate-400"})," Admin Zone"]}),o.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[o.jsxs("button",{onClick:()=>N("GENERATE"),disabled:$,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[$?o.jsx(Ln,{className:"animate-spin",size:18}):o.jsx(V9,{size:18}),o.jsx("span",{children:"Buat Paket AI"})]}),o.jsxs("button",{onClick:()=>N("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[o.jsx(cx,{size:18}),o.jsx("span",{children:"Import"})]})]})]}),o.jsx("input",{type:"file",ref:Y,className:"hidden",accept:".json",multiple:!0,onChange:q=>{q.target.files&&q.target.files.length>0&&h(q.target.files),Y.current&&(Y.current.value="")}})]}),E&&Te.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500",children:[o.jsx(Ln,{className:"animate-spin mx-auto mb-2"}),o.jsx("p",{children:"Memuat paket soal terbaru..."})]}):Te.length===0?o.jsxs("div",{className:"py-20 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsx(_i,{className:"mx-auto mb-4 opacity-20",size:48}),o.jsx("p",{children:"Belum ada paket soal untuk kategori ini."}),o.jsx("p",{className:"text-xs mt-2",children:'Gunakan tombol "Buat Paket AI" untuk generate soal baru.'})]}):o.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Te.map(q=>{const ie=D(q.id,q.title);return o.jsxs("button",{onClick:()=>l(q),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[q.isAiGenerated&&o.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:q.title}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{onClick:pe=>B(pe,q),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:o.jsx(oA,{size:18})}),o.jsx("div",{onClick:pe=>{pe.stopPropagation(),N("DELETE",q.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:o.jsx(Io,{size:18})})]})]}),o.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(kr,{size:12})," ",q.durationMinutes," Menit"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(_i,{size:12})," ",q.questions.length," Soal"]}),q.version==="v2"&&o.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),o.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[ie.attempts,"x"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),o.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:ie.highScore})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),o.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:ie.avgScore})]})]})]},q.id)})})]})]})},L7=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},U7=({answers:n,questions:e,onHome:t,onRetry:s,category:a,details:l})=>{const u=n.filter(k=>k.isCorrect).length;let h=(l==null?void 0:l.total)||(l==null?void 0:l.average)||(l==null?void 0:l.iqScore)||Math.round(u/e.length*100);if(a==="GENERAL"&&!l){const k=n.reduce((C,j)=>C+(j.scoreEarned||0),0);h=Math.round(k/(e.length||1))}const[p,f]=G.useState(""),[v,_]=G.useState(!1),T=n.filter(k=>!k.isCorrect),E=Array.from(new Set(T.map(k=>{var j,R;const C=e.find(z=>z.id===k.questionId);return((j=C==null?void 0:C.metadata)==null?void 0:j.subtest)||((R=C==null?void 0:C.metadata)==null?void 0:R.topic)||"General"}))),I=async()=>{_(!0);try{const k=await hP(E);f(k)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return o.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:o.jsxs("div",{className:"max-w-2xl w-full text-center",children:[o.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:h>=(a==="UTBK"?600:70)?o.jsx(rA,{size:48,className:"text-emerald-500"}):o.jsx(ns,{size:48,className:"text-amber-500"})}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),o.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:h})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:a==="GENERAL"?"Poin":"Akurasi"}),o.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:a==="GENERAL"?h:`${Math.round(u/e.length*100)}%`})]})]}),a==="UTBK"&&l&&o.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Umum:"})," ",o.jsx("b",{children:l.pu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PPU:"})," ",o.jsx("b",{children:l.ppu})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"PBM:"})," ",o.jsx("b",{children:l.pbm})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Kuantitatif:"})," ",o.jsx("b",{children:l.pk})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Indo:"})," ",o.jsx("b",{children:l.lbi})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Lit. B.Inggris:"})," ",o.jsx("b",{children:l.lbe})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Penalaran Math:"})," ",o.jsx("b",{children:l.pm})]})]})]}),E.length>0&&o.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[o.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[o.jsx(jr,{size:20})," Topik Perlu Perbaikan"]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:E.slice(0,5).map(k=>o.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:k},k))}),p?o.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[o.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),o.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:o.jsx(L7,{text:p})})]}):o.jsxs("button",{onClick:I,disabled:v,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[v?o.jsx(Ln,{className:"animate-spin",size:14}):o.jsx(cA,{size:14}),"Minta Saran Perbaikan AI"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[o.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.map((k,C)=>{const j=n.find($=>$.questionId===k.id),R=j==null?void 0:j.isCorrect,z=encodeURIComponent(`Pembahasan Soal ${a} ${k.metadata.subtest||k.metadata.topic}`);return o.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-1",children:[o.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",C+1]}),R?o.jsx(Yn,{size:16,className:"text-emerald-500"}):o.jsx(Vr,{size:16,className:"text-rose-500"})]}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2 mb-2",children:k.content}),o.jsxs("div",{className:"flex justify-between items-center",children:[!R&&k.type==="multiple_choice"&&o.jsxs("p",{className:"text-xs text-rose-500",children:["Jawaban: ",(j==null?void 0:j.selectedAnswer)||"-"," (Kunci: ",k.correctAnswer,")"]}),o.jsxs("a",{href:`https://www.youtube.com/results?search_query=${z}`,target:"_blank",rel:"noreferrer",className:"ml-auto text-[10px] flex items-center gap-1 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 px-2 py-1 rounded-full font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition",children:[o.jsx(dx,{size:12})," Tonton Pembahasan"]})]})]},C)})})]}),o.jsxs("div",{className:"flex gap-4 w-full",children:[o.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),o.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},EE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},ef=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,yA=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,_h=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,vA=n=>n.category==="BUTAWRNA",O7=n=>{switch(n){case"UTBK":return{icon:Mu,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Uf,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Rs,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:si,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Fl,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:Vf,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:xu,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:Lf,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:_i,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},Bi=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},wE=(n,e)=>{const t=e>0?n/e*100:0;return Bi(t,"PERCENT").color},NE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},bA=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,V7=({history:n,onBack:e,onReview:t,username:s,onExport:a,onImport:l,onDelete:u})=>{const[h,p]=G.useState("ALL"),[f,v]=G.useState(null),_=G.useRef(null),T=n.filter(R=>h==="ALL"||R.category===h),E=T.length,I=E>0?Math.round(T.reduce((R,z)=>R+z.score,0)/E):0,k=E>0?Math.max(...T.map(R=>R.score)):0,C=(R,z)=>{R.stopPropagation(),Z.play("click"),v(z)},j=()=>{f&&(u(f),v(null))};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[f&&o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:o.jsx(Io,{size:24})}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),o.jsxs("div",{className:"flex gap-3 w-full",children:[o.jsx("button",{onClick:()=>v(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),o.jsx("button",{onClick:j,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(dt,{size:20})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),o.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(gA,{size:12})," ",s]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[o.jsx(oA,{size:14})," Backup"]}),o.jsxs("button",{onClick:()=>{var R;return(R=_.current)==null?void 0:R.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[o.jsx(cx,{size:14})," Restore"]}),o.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:R=>{var z;(z=R.target.files)!=null&&z[0]&&l(R.target.files[0]),_.current&&(_.current.value="")}})]})]}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[o.jsx("button",{onClick:()=>p("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),ip.map(R=>o.jsx("button",{onClick:()=>p(R.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${h===R.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:R.name},R.id))]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(Z8,{size:14})," Total Tes"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:E})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(h7,{size:14})," Avg Skor"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:I})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[o.jsx(rA,{size:14})," Tertinggi"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:k})]})]}),o.jsx("div",{className:"space-y-4",children:T.length===0?o.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[o.jsx(Du,{size:48,className:"mx-auto mb-4 opacity-20"}),o.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(R=>{const z=O7(R.category),$=z.icon,J=R.questions?R.questions.length:0,Y=R.answers?R.answers.length:0,D=R.answers?R.answers.filter(ce=>ce.isCorrect).length:0,N=Y-D,M=R.answers?R.answers.reduce((ce,Ae)=>ce+(Ae.timeTakenSeconds||0),0):0,L=NE(M),O=ef(R),B=yA(R),U=_h(R),Te=vA(R);let Ce=R.category;R.category==="TPA"?Ce="Seleksi Lanjutan I":R.category==="PSIKOTEST"&&ef(R)?Ce="Tes Koran / Pauli":R.category==="PSIKOTEST"&&_h(R)?Ce="Psikotes (IQ & Logika)":R.category==="KECERMATAN"?Ce="Tes Kecermatan":Te&&(Ce="Tes Buta Warna & Visual"),R.packageTitle&&(Ce=R.packageTitle);let q=R.score.toString(),ie="SKOR",pe={text:"-",color:"text-slate-500"};if(B){const ce=R.details;q=ce.accuracy+"%",ie="AKURASI",pe=Bi(ce.accuracy,"PERCENT")}else if(O){const ce=R.details;q=ce.accuracy+"%",ie="AKURASI",pe=Bi(ce.accuracy,"PERCENT")}else if(U){const ce=R.details.iqScore||R.score;q=ce.toString(),ie="IQ SCORE",pe=Bi(ce,"IQ")}else if(Te){const ce=R.details;ce.type==="Ishihara Simulation"?(q=ce.passed?"NORMAL":"DEFECT",ie="STATUS",pe={text:ce.diagnosis,color:ce.passed?"text-emerald-500":"text-rose-500"}):(q=R.score.toString(),ie="SKOR",pe=Bi(R.score,"PERCENT"))}else{const ce=R.maxScore>0?R.score/R.maxScore*100:0;pe=Bi(ce,"PERCENT")}const Ue=pe.color;let he=D,H=N,ne=0,le=0,ae={val:0,index:0},de=[];if(B){const ce=R.details;he=ce.totalCorrect,H=ce.totalWrong,ne=ce.averageSpeed,le=ce.stability,de=ce.sectionData.map(Ae=>Ae.correct)}else if(O){const ce=R.details;he=ce.totalCorrect,H=ce.totalWrong,ne=ce.speedPerMinute,le=ce.consistencyScore,de=ce.intervalData}if(de&&de.length>0){const ce=Math.max(...de),Ae=de.indexOf(ce);ae={val:ce,index:Ae+1}}return o.jsxs("div",{onClick:()=>t(R),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[o.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[R.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),R.details&&R.details.passed!==void 0&&o.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${R.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:R.details.passed?"LULUS":"TIDAK LULUS"})]}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${z.bg} ${z.color} border ${z.border}`,children:o.jsx($,{size:24})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:Ce}),R.packageTitle&&R.packageTitle!==Ce&&o.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[o.jsx(hA,{size:10})," ",R.packageTitle]}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(y8,{size:12})," ",new Date(R.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),R.skdStream&&o.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:R.skdStream}),B&&R.details.mode&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:bA(R.details.mode)}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(kr,{size:10})," ",L]})]}),Te&&R.details.type&&o.jsx("span",{className:"bg-pink-100 dark:bg-pink-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-pink-700 dark:text-pink-400 uppercase",children:R.details.type.replace(" Simulation","").replace("Discrimination","")}),O&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[o.jsx(kr,{size:10})," ",L]})]}),_h(R)&&o.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("div",{className:`text-xl sm:text-2xl font-black ${Ue}`,children:q}),o.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:ie})]})]}),o.jsxs("div",{className:"mt-3",children:[B||O?o.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),o.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:he+H})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),o.jsxs("span",{className:"font-bold",children:[o.jsx("span",{className:"text-emerald-500",children:he})," / ",o.jsx("span",{className:"text-rose-500",children:H})]})]}),o.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),o.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:ne})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),o.jsx("span",{className:"font-black text-amber-500",children:le})]}),o.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),o.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${ae.val} at Interval ${ae.index}`,children:[ae.val,o.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",ae.index]})]})]}),o.jsxs("div",{className:"flex flex-col text-center",children:[o.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),o.jsx("span",{className:`font-black text-[10px] leading-tight ${pe.color}`,children:pe.text})]})]}):o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[Y," ",o.jsxs("span",{className:"text-slate-400",children:["/ ",J]})]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),o.jsxs("span",{className:"font-bold text-emerald-600",children:[D," ",o.jsx("span",{className:"text-slate-400",children:"/"})," ",o.jsx("span",{className:"text-rose-500",children:N})]})]}),Te&&R.details.breakdown&&o.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Analisis"}),o.jsx("span",{className:"font-bold text-[10px] text-slate-700 dark:text-slate-200 uppercase",children:R.details.diagnosis})]}),!Te&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:NE(M)})]}),R.category==="SKD"&&R.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),o.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[o.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",R.details.twk]}),o.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",R.details.tiu]}),o.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",R.details.tkp]})]})]}),R.category==="UTBK"&&R.details&&o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:R.details.average})]})]}),(O||B)&&de.length>0&&o.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:de.map((ce,Ae)=>{const lt=Math.max(...de,1),ue=ce/lt*100;return o.jsx("div",{className:`flex-1 rounded-t-sm ${Ae+1===ae.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${ue}%`}},Ae)})})]})]})]}),o.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:ce=>C(ce,R.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:o.jsx(Io,{size:14})}),o.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:o.jsx(_r,{size:14})})]})]},R.id)})})]})]})},B7=({item:n,onBack:e})=>{if(ef(n)||yA(n)){const t=ef(n),s=n.details;let a=[],l=0,u=0,h=0,p=0,f=0,v="",_={text:"-",color:"text-slate-500"};if(t){const I=s;a=I.intervalData||[],l=I.totalCorrect,u=I.totalWrong,h=I.speedPerMinute,p=I.accuracy,f=I.consistencyScore,v="PAULI / KORAN",_=Bi(I.accuracy,"PERCENT")}else{const I=s;a=I.sectionData.map(k=>k.correct),l=I.totalCorrect,u=I.totalWrong,h=I.averageSpeed,p=I.accuracy,f=I.stability,v=bA(I.mode),_=Bi(I.accuracy,"PERCENT")}let T=0,E=0;return a.length>0&&(T=Math.max(...a),E=a.indexOf(T)+1),o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(dt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:o.jsx(ns,{size:32})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",v]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",o.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:l}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),o.jsx("div",{className:"text-3xl font-black text-rose-500",children:u}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:h}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),o.jsxs("div",{className:`text-3xl font-black ${Bi(p,"PERCENT").color}`,children:[p,"%"]}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:f}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),o.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",E]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),o.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:a.map((I,k)=>{const C=Math.max(...a,10),j=I/C*100,R=I===T;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[o.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${R?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${j}%`}}),o.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:k+1}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",k+1,": ",I]})]},k)})}),o.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",o.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}if(vA(n)){const t=n.details,s=t.type,a=t.passed,l=n.score;return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsxs("button",{onClick:e,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600",children:[o.jsx(dt,{size:16,className:"mr-1"})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${a?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:a?o.jsx(Yn,{size:40}):o.jsx(ns,{size:40})}),o.jsxs("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:[s," Result"]}),o.jsxs("div",{className:`text-4xl font-black mb-2 ${a?"text-emerald-500":"text-rose-500"}`,children:[l," / 100"]}),o.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-300 mb-8",children:t.diagnosis}),s==="Ishihara Simulation"&&t.breakdown&&o.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl text-left",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Red-Green Errors"}),o.jsx("div",{className:"text-2xl font-bold text-rose-500",children:t.breakdown.TOTAL_RG}),o.jsx("p",{className:"text-xs text-slate-500",children:"Protan/Deutan plates missed"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Blue-Yellow Errors"}),o.jsx("div",{className:"text-2xl font-bold text-indigo-500",children:t.breakdown.TOTAL_BY}),o.jsx("p",{className:"text-xs text-slate-500",children:"Tritan plates missed"})]})]}),s!=="Ishihara Simulation"&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl text-sm text-slate-600 dark:text-slate-300 text-left",children:[s==="Hue Discrimination"&&o.jsx("p",{children:"Tes ini mengukur kemampuan Anda membedakan gradasi warna halus. Skor tinggi menunjukkan kemampuan diskriminasi warna yang sangat baik."}),s==="Depth Perception"&&o.jsx("p",{children:"Tes ini mengukur kemampuan Anda memperkirakan jarak objek relatif dalam ruang 3D simulasi. Skor tinggi menunjukkan persepsi kedalaman yang akurat."})]})]})]})})}return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[o.jsx(dt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&o.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),o.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),o.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),o.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),o.jsx("div",{className:`text-3xl font-black ${wE(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),o.jsx("div",{className:`text-3xl font-black ${n.details.tpaScore>=67?"text-emerald-600":"text-rose-500"}`,children:n.details.tpaScore}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 67"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),o.jsx("div",{className:`text-3xl font-black ${n.details.tbiScore>=30?"text-emerald-600":"text-rose-500"}`,children:n.details.tbiScore}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 30"})]}),o.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),o.jsxs("div",{className:"text-center w-full",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),o.jsx("div",{className:`text-xl font-black ${n.details.passed?"text-emerald-600":"text-rose-500"}`,children:n.details.passed?"LULUS":"GAGAL"})]})]}),n.category==="UTBK"&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),o.jsxs("div",{className:`text-xl font-black ${wE(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>o.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[o.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),o.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),_h(n)&&n.details&&o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),o.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${Bi(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),o.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),o.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(si,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),o.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var f;const a=n.answers.find(v=>v.questionId===t.id),l=a==null?void 0:a.isCorrect,u=(a==null?void 0:a.scoreEarned)||0,h=encodeURIComponent(`Pembahasan Soal ${n.category} ${t.metadata.subtest||t.metadata.topic}`);let p="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return u>0?t.tkpPoints?u===5?p="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":p="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":p="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":p="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",o.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),o.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(f=t.metadata)==null?void 0:f.subtest})]}),o.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${p}`,children:[u>0?o.jsx(Yn,{size:12}):o.jsx(Vr,{size:12}),u," Poin"]})]}),o.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:o.jsx(EE,{text:t.content})}),o.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[o.jsxs("div",{className:`p-3 rounded-lg border ${l?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[o.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(a==null?void 0:a.selectedAnswer)||"Tidak dijawab"]}),!l&&!t.tkpPoints&&o.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[o.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&o.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[o.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),o.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((v,_)=>_.points-v.points).map((v,_)=>o.jsxs("li",{className:v.option===(a==null?void 0:a.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[v.points," Poin: ",v.option]},_))})]})]}),o.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block",children:"Pembahasan:"}),o.jsxs("a",{href:`https://www.youtube.com/results?search_query=${h}`,target:"_blank",rel:"noreferrer",className:"text-[10px] flex items-center gap-1 bg-red-50 text-red-600 dark:bg-red-900/20 dark:text-red-400 px-2 py-1 rounded-full font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition",children:[o.jsx(dx,{size:12})," Video"]})]}),o.jsx(EE,{text:t.explanation})]})]},s)})})]})]})})},ep=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},G7=({timeLeft:n,onFinish:e})=>(G.useEffect(()=>{n<=0&&e()},[n,e]),o.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[o.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:o.jsx($p,{size:48,className:"text-white"})}),o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),o.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),o.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),o.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),z7=({isOpen:n,onCancel:e,onConfirm:t,stats:s})=>{if(!n)return null;const a=s.unanswered>0||s.doubtful>0;return o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${a?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`,children:a?o.jsx(lx,{size:32}):o.jsx(Yn,{size:32})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:a?"Yakin Selesai?":"Selesaikan Ujian?"}),a?o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left space-y-2 border border-slate-200 dark:border-slate-600",children:[o.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Periksa kembali jawaban Anda:"}),s.unanswered>0&&o.jsxs("div",{className:"flex items-center justify-between text-rose-600 dark:text-rose-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Vr,{size:14})," Belum Diisi"]}),o.jsxs("span",{className:"font-bold",children:[s.unanswered," Soal"]})]}),s.doubtful>0&&o.jsxs("div",{className:"flex items-center justify-between text-amber-600 dark:text-amber-400 text-sm font-medium",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Y8,{size:14})," Ragu-ragu"]}),o.jsxs("span",{className:"font-bold",children:[s.doubtful," Soal"]})]})]}):o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Semua ",s.total," soal telah dijawab. Waktu akan dihentikan dan skor akan dihitung."]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("button",{onClick:t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition",children:"Ya, Selesai"}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Kembali Mengerjakan"})]})]})})},H7=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},F7=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:a,isUtbkSimulation:l,category:u,showToast:h,initialState:p,userId:f,skdStream:v,tpaStream:_,packageTitle:T,onSaveAndExit:E})=>{var kt,Kt,$t;const[I,k]=G.useState((p==null?void 0:p.utbkSubtestIndex)||0),[C,j]=G.useState(!1),[R,z]=G.useState(0),[$,J]=G.useState((p==null?void 0:p.currentIndex)||0),[Y,D]=G.useState((p==null?void 0:p.answerMap)||{}),[N,M]=G.useState(!1),[L,O]=G.useState(!1),[B,U]=G.useState(!1),[Te,Ce]=G.useState(!1),[q,ie]=G.useState({unanswered:0,doubtful:0,total:0}),pe=G.useRef(Date.now()),Ue=()=>p!=null&&p.timeLeft?p.timeLeft:l&&Oi[0]?Oi[0].duration*60:a?6e3:n===qe.SIMULATION?u==="PSIKOTEST"?2400:u==="TPA"?6e3:3600:0,[he,H]=G.useState(Ue);G.useEffect(()=>{if(!f)return;let be=v;typeof v=="object"&&v!==null&&(be=null);let me=_;typeof _=="object"&&_!==null&&(me=null);const Ee={uid:f,mode:n,category:u,questions:e,answerMap:Y,timeLeft:he,currentIndex:$,utbkSubtestIndex:I,drillContent:t,skdStream:be,tpaStream:me,packageTitle:T,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(Ee,H7()))}catch(nt){nt instanceof TypeError&&nt.message.includes("circular")||console.warn("Failed to save session state",nt)}},[he,Y,$,I,f,v,_]);const ne=()=>{localStorage.removeItem("fajmuls_active_session")},le=G.useMemo(()=>{if(l){const be=Oi[I].name;return e.filter(me=>{var Ee,nt;return(nt=(Ee=me.metadata)==null?void 0:Ee.subtest)==null?void 0:nt.includes(be)})}return e},[e,l,I]);G.useEffect(()=>{let be=null;return C&&R>0?be=setInterval(()=>z(me=>me-1),1e3):C&&R===0?j(!1):he>0&&!N&&n===qe.SIMULATION?be=setInterval(()=>{H(me=>(me<=11&&me>1&&Z.play("tick"),me-1))},1e3):he===0&&n===qe.SIMULATION&&(l?ae():Ae()),()=>clearInterval(be)},[he,N,C,R,n]);const ae=()=>{if(l)if(I<Oi.length-1){Z.play("success");const be=I+1;k(be);const me=Oi[be].duration;H(me*60),J(0),z(30),j(!0)}else Ae();else Ae()},de=()=>{Z.play("click");const be=l&&I<Oi.length-1?le:e;let me=0,Ee=0;be.forEach(nt=>{const Rt=Y[nt.id];!Rt||!Rt.selectedAnswer?me++:Rt.isDoubtful&&Ee++}),ie({unanswered:me,doubtful:Ee,total:be.length}),Ce(!0)},ce=()=>{Ce(!1),l&&I<Oi.length-1?ae():Ae()},Ae=async()=>{if(f&&!f.startsWith("guest-"))try{await IV(f)}catch{}ne(),Z.play("finish"),s(Object.values(Y))},lt=()=>{s(Object.values(Y),void 0,!0)},ue=async()=>{if(!f||f.startsWith("guest-")){h("Fitur simpan ke cloud hanya untuk pengguna login.","error");return}U(!0);let be=v;typeof v=="object"&&v!==null&&(be=null);let me=_;typeof _=="object"&&_!==null&&(me=null);const Ee={uid:f,mode:n,category:u,questions:e,answerMap:Y,timeLeft:he,currentIndex:$,utbkSubtestIndex:I,drillContent:t,skdStream:be,tpaStream:me,packageTitle:T,timestamp:Date.now()};try{await kV(f,Ee),ne(),h("Progres tersimpan di cloud! Anda bisa melanjutkannya nanti.","success"),E?E():s(Object.values(Y),void 0,!0)}catch(nt){console.error(nt),h("Gagal menyimpan ke cloud. Cek koneksi internet.","error")}finally{U(!1)}},Pe=async be=>{var Nn,vs,js,Xi,Ei;const me=le[$];if(!me)return;Z.play("click");let Ee=0,nt=!1;if(u==="SKD")if(me.tkpPoints&&me.tkpPoints.length>0){const en=me.tkpPoints.find(pn=>pn.option===be);Ee=en?en.points:0,nt=Ee===5}else nt=be===me.correctAnswer,Ee=nt?5:0;else if(u==="UTBK"){nt=be===me.correctAnswer;const en=((Nn=me.metadata)==null?void 0:Nn.difficulty)||"Medium";Ee=nt?en==="HOTS"||en==="Hard"?3:en==="Medium"?2:1:0}else if(u==="TPA"){const en=((js=(vs=me.metadata)==null?void 0:vs.subtest)==null?void 0:js.includes("TBI"))||((Ei=(Xi=me.metadata)==null?void 0:Xi.subtest)==null?void 0:Ei.includes("Inggris"));if(_==="PSIKOTEST_KEDINASAN")if(me.tkpPoints&&me.tkpPoints.length>0){const pn=me.tkpPoints.find(Xt=>Xt.option===be);Ee=pn?pn.points:0,nt=Ee===5}else nt=be===me.correctAnswer,Ee=nt?5:0;else nt=be===me.correctAnswer,en?Ee=nt?5:0:Ee=nt?4:-1}else nt=be===me.correctAnswer,Ee=nt?10:0;let Rt="";if(me.type!=="multiple_choice"&&u==="GENERAL")try{const en=await dP(me.content,me.correctAnswer,be);Ee=en.score,nt=en.isCorrect,Rt=en.feedback}catch{console.error("Grading failed")}const pt=Y[me.id],cn=(Date.now()-pe.current)/1e3,Ps={questionId:me.id,selectedAnswer:be,isCorrect:nt,scoreEarned:Ee,timeTakenSeconds:((pt==null?void 0:pt.timeTakenSeconds)||0)+cn,isOverthinking:!1,isGuessing:cn<5,aiEvaluation:Rt,isDoubtful:(pt==null?void 0:pt.isDoubtful)||!1};D(en=>({...en,[me.id]:Ps})),pe.current=Date.now()},Je=()=>{const be=le[$];D(me=>{const Ee=me[be.id];return Ee?{...me,[be.id]:{...Ee,isDoubtful:!Ee.isDoubtful}}:{...me,[be.id]:{questionId:be.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},Me=be=>{const me=Math.floor(be/3600),Ee=Math.floor(be%3600/60),nt=Math.floor(be%60);return`${me>0?me+":":""}${Ee.toString().padStart(2,"0")}:${nt.toString().padStart(2,"0")}`},Qe=(be,me)=>be.length===0?null:o.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:me}),o.jsx("div",{className:"grid grid-cols-5 gap-2",children:be.map((Ee,nt)=>{const Rt=le.findIndex(Ps=>Ps.id===Ee.id),pt=Y[Ee.id];let cn="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return pt!=null&&pt.selectedAnswer&&(cn="bg-emerald-500 border-emerald-500 text-white"),pt!=null&&pt.isDoubtful&&(cn="bg-amber-400 border-amber-400 text-white"),Rt===$&&(cn+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),o.jsx("button",{onClick:()=>{J(Rt),O(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${cn}`,children:Rt+1},Ee.id)})})]});if(C)return o.jsx(G7,{timeLeft:R,onFinish:()=>{j(!1)}});if(le.length===0)return o.jsxs("div",{className:"p-10 text-center",children:[o.jsx(Ln,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const Fe=le[$],ct=Y[Fe.id];return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[o.jsx(z7,{isOpen:Te,onCancel:()=>Ce(!1),onConfirm:ce,stats:q}),N&&o.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[o.jsx(yu,{size:48,className:"mx-auto mb-4 text-indigo-600"}),o.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),o.jsxs("div",{className:"flex flex-col gap-3 justify-center",children:[o.jsxs("button",{onClick:()=>M(!1),className:"w-full px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2",children:[o.jsx(jo,{size:20})," Lanjutkan"]}),!(f!=null&&f.startsWith("guest-"))&&o.jsxs("button",{onClick:ue,disabled:B,className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 flex items-center justify-center gap-2 disabled:opacity-50",children:[B?o.jsx(Ln,{className:"animate-spin"}):o.jsx(bE,{size:20}),"Simpan & Lanjut Nanti"]}),o.jsx("button",{onClick:lt,className:"w-full px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan Lokal)"})]})]})}),o.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[o.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",$+1]}),o.jsxs("div",{className:"flex items-center gap-2",children:[n===qe.SIMULATION&&o.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:Me(he)}),o.jsx("button",{onClick:()=>O(!L),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:o.jsx(Ia,{size:20})})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:o.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===qe.DRILL&&t&&o.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[o.jsx(si,{size:16})," ",t.topic]}),o.jsx("p",{children:t.summary})]}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:l?Oi[I].name:((kt=Fe.metadata)==null?void 0:kt.subtest)||"General"}),((Kt=Fe.metadata)==null?void 0:Kt.difficulty)==="HOTS"&&o.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[o.jsx(si,{size:12})," HOTS"]})]}),o.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100",children:o.jsx(ep,{text:Fe.content})}),Fe.type==="multiple_choice"?o.jsx("div",{className:"space-y-3",children:($t=Fe.options)==null?void 0:$t.map((be,me)=>{var cn;const Ee=String.fromCharCode(65+me),nt=(ct==null?void 0:ct.selectedAnswer)===be;let Rt="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",pt="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return nt&&(Rt="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",pt="bg-indigo-600 text-white"),n!==qe.SIMULATION&&ct&&((Fe.tkpPoints?((cn=Fe.tkpPoints.find(Nn=>Nn.option===be))==null?void 0:cn.points)===5:be===Fe.correctAnswer)?(Rt="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",pt="bg-emerald-500 text-white"):nt&&(Rt="border-rose-500 bg-rose-50 dark:bg-rose-900/20",pt="bg-rose-500 text-white")),o.jsxs("button",{onClick:()=>Pe(be),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${Rt}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${pt}`,children:Ee}),o.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-base",children:o.jsx(ep,{text:be})})]},me)})}):o.jsxs("div",{children:[" ",o.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:(ct==null?void 0:ct.selectedAnswer)||"",onChange:be=>Pe(be.target.value)})," "]})]}),n!==qe.SIMULATION&&ct&&o.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[o.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[o.jsx(cA,{size:20})," Pembahasan"]}),o.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:o.jsx(ep,{text:Fe.explanation})})]})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[o.jsxs("button",{onClick:()=>{J(be=>Math.max(0,be-1))},disabled:$===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[o.jsx(dt,{size:20})," ",o.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[p&&o.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[o.jsx(Bf,{size:12})," Disimpan Otomatis"]}),o.jsxs("button",{onClick:Je,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${ct!=null&&ct.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[o.jsx("input",{type:"checkbox",checked:(ct==null?void 0:ct.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),o.jsx("span",{children:"Ragu-ragu"})]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),$<le.length-1?J(be=>be+1):de()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[o.jsx("span",{className:"hidden sm:inline",children:$===le.length-1?l&&I<Oi.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),o.jsx(_r,{size:20})]})]})})]}),o.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${L?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[o.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex flex-col gap-3 bg-slate-50 dark:bg-slate-800",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"Navigasi Soal"}),o.jsx("button",{onClick:()=>O(!1),className:"md:hidden text-slate-500",children:o.jsx(Vr,{size:24})})]}),!(f!=null&&f.startsWith("guest-"))&&o.jsxs("button",{onClick:ue,disabled:B,className:"w-full flex items-center justify-center gap-2 py-2 bg-emerald-600 text-white rounded-lg font-bold text-xs hover:bg-emerald-700 disabled:opacity-50 transition",children:[B?o.jsx(Ln,{size:14,className:"animate-spin"}):o.jsx(bE,{size:14}),"Kerjakan Lagi Nanti (Cloud)"]}),o.jsxs("button",{onClick:lt,className:"w-full flex items-center justify-center gap-2 py-2 border border-rose-200 dark:border-rose-900 text-rose-600 dark:text-rose-400 rounded-lg font-bold text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20 transition",children:[o.jsx(dt,{size:14})," Keluar (Simpan Lokal)"]})]}),n===qe.SIMULATION&&he>0&&o.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),o.jsxs("button",{onClick:()=>M(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[o.jsx(yu,{size:12})," Jeda"]})]}),o.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:Me(he)})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:a?o.jsxs(o.Fragment,{children:[Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):u==="TPA"&&n===qe.SIMULATION?_==="PSIKOTEST_KEDINASAN"?o.jsxs(o.Fragment,{children:[Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("TIU")}),"TIU - Verbal & Numerik"),Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("Gambar")}),"Tes Logika Gambar"),Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("Kepribadian")}),"Tes Kepribadian")]}):o.jsxs(o.Fragment,{children:[Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("Verbal")}),"TPA - Verbal"),Qe(le.filter(be=>{var me,Ee;return(Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("Kuantitatif")}),"TPA - Kuantitatif"),Qe(le.filter(be=>{var me,Ee,nt,Rt;return((Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("Penalaran"))||((Rt=(nt=be.metadata)==null?void 0:nt.subtest)==null?void 0:Rt.includes("Logika"))}),"TPA - Penalaran"),Qe(le.filter(be=>{var me,Ee,nt,Rt;return((Ee=(me=be.metadata)==null?void 0:me.subtest)==null?void 0:Ee.includes("TBI"))||((Rt=(nt=be.metadata)==null?void 0:nt.subtest)==null?void 0:Rt.includes("Inggris"))}),"TBI - Bahasa Inggris")]}):Qe(le,l?Oi[I].name:u)}),o.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:o.jsx("button",{onClick:de,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),L&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>O(!1)})]})},rh=10,tp=60,q7=500,AE=50,K7=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),$7=(n,e,t,s,a)=>{let l=0;return n>=400?l+=40:n>=300?l+=30:n>=200?l+=20:l+=10,t>=99?l+=20:t>=97?l+=15:t>=95?l+=10:l+=5,s<3?l+=20:s<6?l+=15:s<9?l+=10:l+=5,a==="NAIK"?l+=20:a==="STABIL"?l+=15:l+=5,l>=90?"Sangat Disarankan (Konsisten & Tinggi)":l>=75?"Disarankan (Baik)":l>=60?"Cukup (Perlu Latihan)":a==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},Y7=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),a=t.reduce((h,p)=>h+p,0)/(t.length||1),u=(s.reduce((h,p)=>h+p,0)/(s.length||1)-a)/a*100;return u>5?"NAIK":u<-10?"TURUN":"STABIL"},J7=({onBack:n,onComplete:e})=>{const[t,s]=G.useState("SETUP"),[a,l]=G.useState([]),[u,h]=G.useState(0),[p,f]=G.useState(0),[v,_]=G.useState(0),[T,E]=G.useState(0),[I,k]=G.useState([]),[C,j]=G.useState(0),[R,z]=G.useState(!1),[$,J]=G.useState(rh*60),[Y,D]=G.useState(tp),N=()=>{const he=K7(q7,AE);l(he),h(0),f(0),_(0),E(0),k([]),j(0),J(rh*60),D(tp),s("PLAYING"),Z.play("click")},M=G.useCallback(he=>{if(t!=="PLAYING")return;const H=a[u][p],ne=a[u][p+1];if(ne===void 0){h(ce=>ce+1),f(0);return}const ae=(H+ne)%10;he===ae?(_(ce=>ce+1),j(ce=>ce+1)):(E(ce=>ce+1),Z.play("error")),p<AE-2?f(ce=>ce+1):(h(ce=>ce+1),f(0))},[a,u,p,t]);G.useEffect(()=>{const he=H=>{t==="PLAYING"&&H.key>="0"&&H.key<="9"&&M(parseInt(H.key))};return window.addEventListener("keydown",he),()=>window.removeEventListener("keydown",he)},[t,M]),G.useEffect(()=>{if(t!=="PLAYING")return;const he=setInterval(()=>{J(H=>H<=1?(B(),0):H-1),D(H=>(H<=6&&H>1&&Z.play("tick"),H<=1?(Z.play("success"),O(),tp):H-1))},1e3);return()=>clearInterval(he)},[t,C]);const L=G.useRef(0);G.useEffect(()=>{L.current=C},[C]);const O=()=>{const he=L.current;k(H=>[...H,he]),j(0),z(!0),setTimeout(()=>z(!1),2e3)},B=(he=!1)=>{const H=L.current;H>0&&k(ne=>[...ne,H]),s("FINISHED"),he||Z.play("finish")},U=()=>{const he=v+T,H=(rh*60-$)/60,ne=H<.1?.1:H,le=ne>0?Math.round(v/ne):0,ae=he>0?v/he*100:0;let de=0;if(I.length>0){const lt=I.reduce((Pe,Je)=>Pe+Je,0)/I.length,ue=I.reduce((Pe,Je)=>Pe+Math.pow(Je-lt,2),0)/I.length;de=Math.sqrt(ue)}const ce=Y7(I),Ae=$7(v,le,ae,de,ce);return{totalCorrect:v,totalWrong:T,totalAttempts:he,totalColumns:u,speedPerMinute:le,consistencyScore:parseFloat(de.toFixed(2)),accuracy:Math.round(ae),intervalData:I,interpretation:{verdict:Ae,speedDesc:le>50?"Sangat Cepat":le>35?"Cepat":"Sedang",accDesc:ae>98?"Sangat Teliti":ae>92?"Teliti":"Kurang Teliti",stabDesc:ce==="TURUN"?"Menurun (Lelah)":de<4?"Stabil":"Fluktuatif",trend:ce}}},Te=he=>{const H=Math.floor(he/60),ne=he%60;return`${H}:${ne.toString().padStart(2,"0")}`},Ce=()=>{const he=U(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:he.totalCorrect,maxScore:0,details:he,questions:[],answers:[],isAborted:!0};e(H)};if(t==="SETUP")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[o.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[o.jsx(ns,{size:64,className:"mx-auto mb-4 relative z-10"}),o.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),o.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(kr,{size:18,className:"text-indigo-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Durasi:"})," ",rh," Menit"]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(ns,{size:18,className:"text-emerald-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),o.jsxs("p",{className:"flex items-center gap-3",children:[o.jsx(So,{size:18,className:"text-amber-500 shrink-0"})," ",o.jsxs("span",{children:[o.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),o.jsxs("button",{onClick:N,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[o.jsx(jo,{size:24,fill:"currentColor"})," Mulai Tes"]}),o.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const he=U(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:he.totalCorrect,maxScore:0,details:he,questions:[],answers:[]};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),o.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:he.interpretation.verdict})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(ns,{size:14})," Prestasi (Total)"]}),o.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:he.totalCorrect}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(kr,{size:14})," Tempo"]}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:he.speedPerMinute}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(Yn,{size:14})," Ketelitian"]}),o.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:he.totalWrong}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",he.interpretation.accDesc,")"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[o.jsx(So,{size:14})," Stabilitas"]}),o.jsx("div",{className:"text-3xl font-black text-amber-500",children:he.consistencyScore}),o.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",he.interpretation.trend,")"]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[o.jsx(So,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),o.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:he.intervalData.map((ne,le)=>{const ae=Math.max(...he.intervalData,1),de=ne/ae*100;return o.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${de}%`},children:[o.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:le+1}),o.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:ne})]},le)})}),o.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),o.jsxs("button",{onClick:()=>e(H),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsx(Bf,{size:20})," Simpan & Keluar"]})]})]})})}const q=a[u]||[],ie=q[p],pe=q[p+1],Ue=[1,2,3,4,5,6,7,8,9,0];return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),o.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:Te($)})]}),o.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),o.jsx("div",{className:"text-xl font-bold text-emerald-600",children:v})]})]}),o.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(yu,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),R&&o.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:o.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:p>0?q[p-1]:"-"}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:ie}),o.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),o.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:pe!==void 0?pe:"-"})]}),o.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:q[p+2]!==void 0?q[p+2]:"-"})]})}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[o.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Ue.map(he=>o.jsx("button",{onClick:()=>M(he),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:he},he))}),o.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),o.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:Ce,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},np=10,kE=60,CE=["A","B","C","D","E"],os=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],IE=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},RE=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...os].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((a,l)=>l!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},ME=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>os[Math.floor(Math.random()*os.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const a=Math.floor(Math.random()*n);let l=os[Math.floor(Math.random()*os.length)];for(;l===e[a];)l=os[Math.floor(Math.random()*os.length)];s[a]=l}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=os.find(u=>u!==s[0])||"X"));return{left:e,right:s,isSame:t}},DE=()=>{const e=[...os].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},PE=()=>{const n=os[Math.floor(Math.random()*os.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=os[Math.floor(Math.random()*os.length)];for(;s===n;)s=os[Math.floor(Math.random()*os.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},Q7=({initialMode:n,onBack:e,onComplete:t})=>{var le;const[s,a]=G.useState(n||"ANGKA"),[l,u]=G.useState(1),[h,p]=G.useState(kE),[f,v]=G.useState(!1),[_,T]=G.useState("PLAYING"),[E,I]=G.useState(null),[k,C]=G.useState(null),[j,R]=G.useState(null),[z,$]=G.useState(null),[J,Y]=G.useState([]),[D,N]=G.useState([]),[M,L]=G.useState(0),[O,B]=G.useState(0),[U,Te]=G.useState(null),Ce=G.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(E){const ae=Math.floor(Math.random()*5),de=E.reference.filter((ce,Ae)=>Ae!==ae).sort(()=>.5-Math.random());I({...E,question:de,answer:ae})}else{const ae=RE(s);I(ae)}else if(s==="SAMA_BEDA")C(ME());else if(s==="MATCHING")if(!j)R(DE());else{const ae=Math.floor(Math.random()*5);R({...j,target:j.map[ae],answer:ae})}else s==="GROUPING"&&($(PE()),Y([]))},[s,E,j]),q=G.useCallback(()=>{I(null),R(null),C(null),$(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?I(RE(s)):s==="SAMA_BEDA"?C(ME()):s==="MATCHING"?R(DE()):s==="GROUPING"&&($(PE()),Y([])),p(kE),L(0),B(0)},[s]);G.useEffect(()=>{_==="PLAYING"&&q()},[l,s,_]);const ie=ae=>{if(f)return;let de=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?de=ae===(E==null?void 0:E.answer):s==="SAMA_BEDA"?de=ae===(k==null?void 0:k.isSame):s==="MATCHING"&&(de=ae===(j==null?void 0:j.answer)),de?(L(ce=>ce+1),Te("CORRECT")):(B(ce=>ce+1),Te("WRONG"),Z.play("error")),setTimeout(()=>Te(null),150),Ce()},pe=()=>{if(!z)return;let ae=0,de=0;J.forEach(Ae=>{z.grid[Ae]===z.target?ae++:de++});const ce=z.totalCorrect-ae;L(Ae=>Ae+ae),B(Ae=>Ae+de+ce),de===0&&ce===0?(Te("CORRECT"),Z.play("success")):(Te("WRONG"),Z.play("error")),setTimeout(()=>Te(null),200),Ce()},Ue=ae=>{Z.play("click"),Y(de=>de.includes(ae)?de.filter(ce=>ce!==ae):[...de,ae])};G.useEffect(()=>{if(f||_==="FINISHED")return;const ae=setInterval(()=>{p(de=>(de<=6&&de>1&&Z.play("tick"),de<=1?(he(),0):de-1))},1e3);return()=>clearInterval(ae)},[f,l,_,M,O]);const he=()=>{N(ae=>{if(ae.find(Ae=>Ae.section===l))return ae;const de={section:l,correct:M,wrong:O},ce=[...ae,de];return l>=np?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{u(Ae=>Ae+1),Z.play("success")},0),ce})},H=()=>{const ae=D.length,de=D.reduce((kt,Kt)=>kt+Kt.correct,0),ce=D.reduce((kt,Kt)=>kt+Kt.wrong,0),Ae=ae>0?de/ae:0,lt=de+ce,ue=lt>0?de/lt*100:0,Pe=Ae,Je=D.reduce((kt,Kt)=>kt+Math.pow(Kt.correct-Pe,2),0)/(ae||1),Me=Math.sqrt(Je),Qe=IE(ue,Ae,Me),Fe={mode:s,totalCorrect:de,totalWrong:ce,averageSpeed:parseFloat(Ae.toFixed(1)),accuracy:parseFloat(ue.toFixed(1)),sectionData:D,stability:parseFloat(Me.toFixed(2)),verdict:Qe},ct={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(ue),maxScore:100,details:Fe,questions:[],answers:[]};Z.play("finish"),t(ct)},ne=()=>{const ae={section:l,correct:M,wrong:O},de=[...D];de.find(ct=>ct.section===l)||de.push(ae);const ce=de.reduce((ct,kt)=>ct+kt.correct,0),Ae=de.reduce((ct,kt)=>ct+kt.wrong,0),lt=ce/(de.length||1),ue=ce+Ae,Pe=ue>0?ce/ue*100:0,Qe={mode:s,totalCorrect:ce,totalWrong:Ae,averageSpeed:parseFloat(lt.toFixed(1)),accuracy:parseFloat(Pe.toFixed(1)),sectionData:de,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},Fe={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Pe),maxScore:100,details:Qe,questions:[],answers:[],isAborted:!0};t(Fe)};if(_==="FINISHED"){const ae=D.reduce((Me,Qe)=>Me+Qe.correct,0),de=D.reduce((Me,Qe)=>Me+Qe.wrong,0),ce=ae/D.length,Ae=ae/(ae+de)*100,lt=ce,ue=D.reduce((Me,Qe)=>Me+Math.pow(Qe.correct-lt,2),0)/D.length,Pe=Math.sqrt(ue),Je=IE(Ae,ce,Pe);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),o.jsx("div",{className:"flex justify-center mb-8",children:o.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:Je})}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ce.toFixed(1)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),o.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[Ae.toFixed(1),"%"]})]}),o.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),o.jsx("div",{className:"text-2xl font-black text-amber-500",children:Pe.toFixed(2)}),o.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),o.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:np}).map((Me,Qe)=>{const Fe=D.find($t=>$t.section===Qe+1),ct=Fe?Fe.correct:0,kt=Math.max(...D.map($t=>$t.correct),10),Kt=ct/kt*100;return o.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[o.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${Kt}%`},children:o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",Qe+1,": ",ct]})}),o.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:Qe+1})]},Qe)})})]}),o.jsxs("button",{onClick:H,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[o.jsx(Bf,{size:20})," Simpan Hasil"]})]})})}return o.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),o.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[l,"/",np]})]}),o.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),o.jsxs("span",{className:`text-lg font-mono font-black ${h<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[h,"s"]})]}),o.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),o.jsx("span",{className:"text-lg font-black text-emerald-600",children:M})]})]}),o.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:o.jsx(yu,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),o.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[U&&o.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${U==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:o.jsx("div",{className:`p-4 rounded-full ${U==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:U==="CORRECT"?o.jsx(Yn,{size:64}):o.jsx(Kp,{size:64})})}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[o.jsx("div",{className:"grid grid-cols-5 gap-1",children:(le=s==="MATCHING"?j==null?void 0:j.map:E==null?void 0:E.reference)==null?void 0:le.map((ae,de)=>o.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:o.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:ae})},de))}),o.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:CE.map((ae,de)=>o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:ae},de))})]}),o.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?o.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:o.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:j==null?void 0:j.target})}):o.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:E==null?void 0:E.question.map((ae,de)=>o.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:ae},de))})]})]}),s==="SAMA_BEDA"&&k&&o.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:k.left.map((ae,de)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ae},de))})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:k.right.map((ae,de)=>o.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:ae},de))})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[o.jsxs("button",{onClick:()=>ie(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(Yn,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),o.jsxs("button",{onClick:()=>ie(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[o.jsx(Kp,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),o.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&z&&o.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[o.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",o.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:z.target})]}),o.jsx("button",{onClick:pe,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),o.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:z.grid.map((ae,de)=>{const ce=J.includes(de);return o.jsx("button",{onClick:()=>Ue(de),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${ce?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:ae},de)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&o.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:CE.map((ae,de)=>o.jsx("button",{onClick:()=>ie(de),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:ae})},de))})})}),f&&o.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),o.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),o.jsx("button",{onClick:()=>v(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),o.jsx("button",{onClick:ne,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},W7={RED_GREEN:{fg:["#EA5455","#FF9F43","#E55039","#F8EFBA","#F97F51"],bg:["#2ECC71","#26C6DA","#1ABC9C","#55E6C1","#58B19F","#CAD3C8"]},BLUE_YELLOW:{fg:["#5F27CD","#341F97","#54A0FF","#2E86DE","#0ABDE3"],bg:["#FECA57","#FF9F43","#F8C291","#6AB04C","#BADC58"]},GRAYSCALE:{fg:["#2d3436","#636e72","#b2bec3"],bg:["#dfe6e9","#f5f6fa","#dcdde1"]},PROTANOPIA:{fg:["#833471","#6D214F","#B33771","#3B3B98"],bg:["#182C61","#2C3A47","#58B19F","#2C2C54"]},DEUTERANOPIA:{fg:["#D6A2E8","#82589F","#E056FD","#BE2EDD"],bg:["#95AFC0","#7ED6DF","#22A6B3","#30336B"]}},X7=()=>{const n=[];let e=1;n.push({id:e++,type:"NUMBER",palette:"RED_GREEN",target:12,difficulty:"EASY",description:"Control Plate"});for(let a=0;a<5;a++){const l=Math.floor(Math.random()*90)+10,u=Math.random();let h="RED_GREEN";u>.7?h="DEUTERANOPIA":u>.4&&(h="PROTANOPIA"),n.push({id:e++,type:"NUMBER",palette:h,target:l,difficulty:"MEDIUM",description:"Red-Green Defect Check"})}n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"MEDIUM",description:"Tritanopia Check"}),n.push({id:e++,type:"NUMBER",palette:"GRAYSCALE",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Contrast Sensitivity"}),n.push({id:e++,type:"NUMBER",palette:"BLUE_YELLOW",target:Math.floor(Math.random()*90)+10,difficulty:"HARD",description:"Tritanopia Check"});const s=["curve_simple","snake","loop","spiral","zigzag","square","triangle","infinity"].sort(()=>.5-Math.random());for(let a=0;a<6;a++){const l=s[a%s.length],u=Math.random();let h="RED_GREEN";u>.8?h="GRAYSCALE":u>.6&&(h="BLUE_YELLOW"),n.push({id:e++,type:"PATH",palette:h,target:l,difficulty:a>3?"HARD":"MEDIUM",description:`Path Tracking (${h})`})}return n},Z7=()=>o.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50 overflow-hidden",children:[[...Array(20)].map((n,e)=>o.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",backgroundColor:["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6"][Math.floor(Math.random()*5)],width:"10px",height:"10px",animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*3}s`}},e)),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"animate-bounce-slow text-6xl text-yellow-400 drop-shadow-lg",children:o.jsx(Ds,{size:120,fill:"currentColor"})})})]}),eB=({config:n,onPathGenerated:e})=>{const t=G.useRef(null);return G.useEffect(()=>{const s=t.current;if(!s)return;const a=s.getContext("2d");if(!a)return;const l=document.createElement("canvas");l.width=s.width,l.height=s.height;const u=l.getContext("2d");if(!u)return;u.fillStyle="#000000",u.fillRect(0,0,s.width,s.height),u.fillStyle="#FFFFFF",u.strokeStyle="#FFFFFF";const h=[];if(n.type==="NUMBER"){u.font='bold 180px "Arial Rounded MT Bold", Arial, sans-serif',u.textAlign="center",u.textBaseline="middle";const k=(Math.random()-.5)*.2;u.save(),u.translate(s.width/2,s.height/2),u.rotate(k),u.fillText(n.target.toString(),0,15),u.restore()}else{u.lineWidth=55,u.lineCap="round",u.lineJoin="round",u.beginPath();const k=s.width,C=s.height,j=50;if(n.target==="curve_simple")u.moveTo(j,C/2),u.quadraticCurveTo(k/2,-50,k-j,C/2);else if(n.target==="snake")u.moveTo(j,C/2),u.bezierCurveTo(k/3,0,2*k/3,C,k-j,C/2);else if(n.target==="loop")u.arc(k/2,C/2,k/3,0,Math.PI*2);else if(n.target==="spiral"){const $=k/2,J=C/2;u.moveTo($,J);for(let Y=0;Y<100;Y++){const D=.3*Y,N=2*Y,M=$+N*Math.cos(D),L=J+N*Math.sin(D);if(M<j||M>k-j||L<j||L>C-j)break;u.lineTo(M,L)}}else n.target==="zigzag"?(u.moveTo(j,j),u.lineTo(k/2,C-j),u.lineTo(k-j,j)):n.target==="square"?u.rect(j,j,k-2*j,C-2*j):n.target==="triangle"?(u.moveTo(k/2,j),u.lineTo(k-j,C-j),u.lineTo(j,C-j),u.closePath()):n.target==="infinity"?(u.moveTo(j,C/2),u.bezierCurveTo(k/3,0,k/3,C,k/2,C/2),u.bezierCurveTo(2*k/3,0,2*k/3,C,k-j,C/2)):(u.moveTo(j,C-j),u.bezierCurveTo(k/2,0,k,C/2,k/2,C/2),u.bezierCurveTo(0,C/2,k/2,C,k-j,j));u.stroke();const R=u.getImageData(0,0,k,C),z=20;for(let $=0;$<C;$+=z)for(let J=0;J<k;J+=z)R.data[($*k+J)*4]>200&&h.push({x:J,y:$});e(h)}const f=u.getImageData(0,0,s.width,s.height).data,v=W7[n.palette];a.clearRect(0,0,s.width,s.height);const _=s.width/2,T=s.height/2,E=s.width/2-2,I=3200;for(let k=0;k<I;k++){let C=Math.random()*s.width,j=Math.random()*s.height;if(Math.sqrt(Math.pow(C-_,2)+Math.pow(j-T,2))>E)continue;const z=(Math.floor(j)*s.width+Math.floor(C))*4,$=f[z]>128;let J=Math.random()*3+2;n.difficulty==="HARD"&&(J=Math.random()*2.5+1.5);let Y=$?v.fg:v.bg;n.difficulty==="HARD"&&Math.random()<.08&&(Y=$?v.bg:v.fg);const D=Y[Math.floor(Math.random()*Y.length)];a.beginPath(),a.arc(C,j,J,0,Math.PI*2),a.fillStyle=D,a.fill()}},[n]),o.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-100 dark:bg-slate-800"})},tB=({isActive:n,onStroke:e,clearTrigger:t})=>{const s=G.useRef(null),[a,l]=G.useState(!1);return G.useEffect(()=>{const u=s.current;if(u){const h=u.getContext("2d");h==null||h.clearRect(0,0,u.width,u.height)}},[t]),G.useEffect(()=>{const u=s.current;if(!u||!n)return;const h=u.getContext("2d");if(!h)return;const p=T=>{const E=u.getBoundingClientRect();let I,k;return"touches"in T?(I=T.touches[0].clientX,k=T.touches[0].clientY):(I=T.clientX,k=T.clientY),{x:(I-E.left)*(u.width/E.width),y:(k-E.top)*(u.height/E.height)}},f=T=>{T.preventDefault(),l(!0);const E=p(T);h.beginPath(),h.moveTo(E.x,E.y),h.lineWidth=15,h.lineCap="round",h.lineJoin="round",h.strokeStyle="rgba(0, 0, 255, 0.7)",e(E)},v=T=>{if(!a)return;T.preventDefault();const E=p(T);h.lineTo(E.x,E.y),h.stroke(),e(E)},_=()=>{l(!1),h.closePath()};return u.addEventListener("mousedown",f),u.addEventListener("touchstart",f,{passive:!1}),window.addEventListener("mousemove",v),window.addEventListener("touchmove",v,{passive:!1}),window.addEventListener("mouseup",_),window.addEventListener("touchend",_),()=>{u.removeEventListener("mousedown",f),u.removeEventListener("touchstart",f),window.removeEventListener("mousemove",v),window.removeEventListener("touchmove",v),window.removeEventListener("mouseup",_),window.removeEventListener("touchend",_)}},[n,a,e]),o.jsx("canvas",{ref:s,width:320,height:320,className:"absolute top-0 left-0 cursor-crosshair touch-none z-10"})},nB=({onFinish:n})=>{const[e,t]=G.useState([]),[s,a]=G.useState(null),[l,u]=G.useState(!1),[h,p]=G.useState(0);G.useEffect(()=>{const T=Array.from({length:15},(I,k)=>({id:k,color:`hsl(${k*21.333333333333332}, 65%, 55%)`,correctIndex:k})),E=T.slice(1,14).sort(()=>Math.random()-.5);t([T[0],...E,T[14]])},[]);const f=_=>{if(!l){if(_===0||_===e.length-1){Z.play("error");return}if(s===null)Z.play("tap"),a(_);else{const T=[...e];[T[s],T[_]]=[T[_],T[s]],t(T),a(null),Z.play("click")}}},v=()=>{let _=0;for(let E=0;E<e.length-1;E++){const I=Math.abs(e[E].correctIndex-e[E+1].correctIndex);I>1&&(_+=I-1)}const T=Math.max(0,100-_*3);p(T),u(!0),Z.play("finish")};return l?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl",children:[o.jsx(xu,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Tes Spektrum"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:h}),o.jsx("p",{className:"text-slate-500 mb-6",children:h>=90?"Penglihatan warna sangat akurat!":h>=70?"Diskriminasi warna baik.":"Terindikasi kesulitan membedakan nuansa warna."}),o.jsx("div",{className:"flex justify-center gap-1 mb-6 h-8 rounded-lg overflow-hidden border border-slate-200",children:e.map((_,T)=>o.jsx("div",{className:"flex-1",style:{backgroundColor:_.color}},T))}),o.jsx("button",{onClick:()=>n(h),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"text-center font-bold text-lg mb-4 text-slate-800 dark:text-white flex items-center justify-center gap-2",children:[o.jsx(xu,{size:20})," Urutkan Warna"]}),o.jsxs("p",{className:"text-center text-sm text-slate-500 mb-6",children:["Klik untuk menukar posisi kotak warna agar membentuk gradasi yang halus dari kiri ke kanan.",o.jsx("br",{}),o.jsx("span",{className:"text-xs text-rose-500 font-bold",children:"Kotak pertama dan terakhir terkunci."})]}),o.jsx("div",{className:"grid grid-cols-5 sm:flex sm:flex-nowrap gap-1 mb-8",children:e.map((_,T)=>{const E=T===0||T===e.length-1,I=s===T;return o.jsx("div",{onClick:()=>f(T),className:`
                                h-16 sm:h-24 sm:flex-1 rounded-lg cursor-pointer transition-all transform
                                ${I?"scale-110 ring-4 ring-indigo-500 z-10":"hover:scale-105"}
                                ${E?"opacity-100 ring-2 ring-slate-400 z-0 cursor-default":"opacity-100"}
                            `,style:{backgroundColor:_.color},children:E&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/50",children:o.jsx(lx,{size:16})})},T)})}),o.jsxs("button",{onClick:v,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(Yn,{size:20})," Selesai Mengurutkan"]})]})},sB=({onFinish:n})=>{const[e,t]=G.useState(1),[s,a]=G.useState(0),[l,u]=G.useState([]),[h,p]=G.useState({x:0,y:0}),[f,v]=G.useState(null),[_,T]=G.useState("CLOSEST"),[E,I]=G.useState(!1),k=G.useRef(null),C=10,j=[{base:"#f43f5e",light:"#fb7185",glow:"rgba(244, 63, 94, 0.6)"},{base:"#3b82f6",light:"#60a5fa",glow:"rgba(59, 130, 246, 0.6)"},{base:"#10b981",light:"#34d399",glow:"rgba(16, 185, 129, 0.6)"},{base:"#f59e0b",light:"#fbbf24",glow:"rgba(245, 158, 11, 0.6)"},{base:"#8b5cf6",light:"#a78bfa",glow:"rgba(139, 92, 246, 0.6)"}],R=()=>{v(null);const J=Math.random()>.5?"CLOSEST":"FURTHEST";T(J);const Y=[],D=[-1,0,1].sort(()=>.5-Math.random());for(let N=0;N<3;N++){const M=D[N],L=-100-Math.floor(Math.random()*300),O=Math.floor(Math.random()*j.length);Y.push({id:N,z:L,lane:M,color:JSON.stringify(j[O])})}u(Y)};G.useEffect(()=>{R()},[]);const z=J=>{if(!k.current)return;const Y=k.current.getBoundingClientRect();let D,N;"touches"in J?(D=J.touches[0].clientX,N=J.touches[0].clientY):(D=J.clientX,N=J.clientY);const M=(D-Y.left)/Y.width*2-1,L=(N-Y.top)/Y.height*2-1;p({x:M,y:L})},$=(J,Y)=>{if(E||f!==null)return;v(J);const D=l.map(L=>L.z),N=_==="CLOSEST"?Math.max(...D):Math.min(...D);Y===N?(Z.play("success"),a(L=>L+1)):Z.play("error"),setTimeout(()=>{e<C?(t(L=>L+1),R()):(I(!0),Z.play("finish"))},500)};return E?o.jsxs("div",{className:"text-center p-6 bg-white dark:bg-slate-800 rounded-3xl shadow-xl animate-fade-in",children:[o.jsx(rx,{size:64,className:"mx-auto mb-4 text-indigo-500"}),o.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Hasil Persepsi Kedalaman"}),o.jsx("div",{className:"text-6xl font-black text-indigo-600 dark:text-indigo-400 mb-4",children:s*10}),o.jsx("p",{className:"text-slate-500 mb-6",children:s>=8?"Persepsi kedalaman sangat baik!":"Perlu latihan estimasi jarak visual."}),o.jsx("button",{onClick:()=>n(s*10),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"Lanjut"})]}):o.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 p-6 rounded-3xl shadow-xl overflow-hidden relative select-none",children:[o.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-black/50 px-3 py-1 rounded text-white text-xs font-bold",children:["Round ",e,"/",C]}),o.jsx("h3",{className:"text-center font-bold text-lg mb-8 text-white flex items-center justify-center gap-2 z-10 relative",children:_==="CLOSEST"?"Pilih yang TERDEKAT (Paling Besar/Jelas)":"Pilih yang TERJAUH (Paling Kecil/Buram)"}),o.jsxs("div",{ref:k,className:"h-96 w-full relative flex justify-center items-center bg-gradient-to-b from-slate-800 to-slate-900 overflow-hidden rounded-xl border border-slate-700 cursor-crosshair touch-none perspective-container",onMouseMove:z,onTouchMove:z,children:[o.jsx("div",{className:"absolute bottom-0 w-[200%] h-[100%] left-[-50%] bg-[linear-gradient(rgba(255,255,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:40px_40px]",style:{transform:"perspective(600px) rotateX(60deg) translateY(100px) scale(2)",pointerEvents:"none"}}),l.map(J=>{const D=1e3/(1e3-J.z),N=Math.abs(J.z+100)/100,M=h.x*D*30,L=h.y*D*15,U=J.lane*100+M,Te=L,Ce=1e3+Math.floor(J.z),q=100,ie=JSON.parse(J.color),pe=f===J.id;return o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(calc(-50% + ${U}px), calc(-50% + ${Te}px))`,zIndex:pe?2e3:Ce,width:`${q*D}px`,height:`${q*D}px`,transition:pe?"transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)":"transform 0.1s linear"},children:[o.jsx("div",{className:"absolute bg-black/50 rounded-full blur-md",style:{bottom:"-20%",left:"10%",width:"80%",height:"20%",opacity:.6*D,transform:pe?"scale(1.5)":"scale(1)",transition:"all 0.3s"}}),o.jsxs("div",{onClick:Ue=>{Ue.stopPropagation(),$(J.id,J.z)},className:"w-full h-full rounded-full cursor-pointer touch-manipulation relative",style:{background:`radial-gradient(circle at 30% 30%, ${ie.light}, ${ie.base})`,boxShadow:pe?`0 0 50px 20px ${ie.glow}, inset -10px -10px 20px rgba(0,0,0,0.5)`:"inset -10px -10px 20px rgba(0,0,0,0.5), 0 0 10px rgba(0,0,0,0.3)",filter:pe?"blur(0px)":`blur(${N}px)`,transform:pe?"scale(1.2)":"scale(1)",transition:"all 0.3s ease-out"},children:[o.jsx("div",{className:"absolute top-[15%] left-[15%] w-[25%] h-[25%] bg-white/60 rounded-full blur-[2px] pointer-events-none"}),pe&&o.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white animate-ping opacity-75"})]})]},J.id)})]}),o.jsxs("div",{className:"text-center text-slate-400 text-xs mt-4 flex items-center justify-center gap-2",children:[o.jsx(dA,{size:12})," Gerakkan mouse/jari untuk melihat efek 3D (Paralaks)."]})]})},iB=({onBack:n,onComplete:e})=>{const[t,s]=G.useState("MENU"),[a,l]=G.useState([]),[u,h]=G.useState(0),[p,f]=G.useState([]),[v,_]=G.useState(""),[T,E]=G.useState(!1),[I,k]=G.useState([]),[C,j]=G.useState([]),[R,z]=G.useState(0),$=()=>{const L=X7();l(L),f([]),h(0),E(!1),s("ISHIHARA"),Z.play("click")},J=()=>{Z.play("click");const L=a[u];let O=!1;if(L.type==="NUMBER")O=v.trim(),_("");else{if(I.length===0||C.length===0)O=!1;else{let U=0;const Te=30;I.forEach(q=>{C.some(pe=>Math.sqrt(Math.pow(pe.x-q.x,2)+Math.pow(pe.y-q.y,2))<Te)&&U++}),O=U/I.length>.55}j([]),k([]),z(U=>U+1)}const B=[...p,O];f(B),u<a.length-1?h(U=>U+1):(Z.play("finish"),E(!0),setTimeout(()=>{Y(B)},3500))},Y=L=>{let O=0,B={RED_GREEN:0,BLUE_YELLOW:0,TOTAL_RG:0,TOTAL_BY:0};const U=a.map((ie,pe)=>{const Ue=L[pe];let he=!1;return ie.type==="NUMBER"?he=Ue.toString()===ie.target.toString():he=Ue===!0,he?O++:((ie.palette==="RED_GREEN"||ie.palette==="PROTANOPIA"||ie.palette==="DEUTERANOPIA")&&B.RED_GREEN++,ie.palette==="BLUE_YELLOW"&&B.BLUE_YELLOW++),(ie.palette==="RED_GREEN"||ie.palette==="PROTANOPIA"||ie.palette==="DEUTERANOPIA")&&B.TOTAL_RG++,ie.palette==="BLUE_YELLOW"&&B.TOTAL_BY++,{question:ie,answer:Ue,isCorrect:he}}),Te=O>=12;let Ce="Normal Color Vision";Te||(B.RED_GREEN>2&&B.BLUE_YELLOW<=1?Ce="Possible Red-Green Deficiency (Protan/Deutan)":B.BLUE_YELLOW>1&&B.RED_GREEN<=2?Ce="Possible Blue-Yellow Deficiency (Tritan)":B.RED_GREEN>2&&B.BLUE_YELLOW>1?Ce="Complex/Severe Deficiency":Ce="Mild Deficiency / Inconsistent");const q={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:Math.round(O/a.length*100),maxScore:100,details:{type:"Ishihara Simulation",passed:Te,correctCount:O,diagnosis:Ce,breakdown:B},questions:a.map(ie=>({id:`q-${ie.id}`,type:"short_answer",content:`Plate ${ie.id} (${ie.palette})`,correctAnswer:ie.target.toString(),explanation:ie.description||"",metadata:{difficulty:"Medium",idealTimeSeconds:15,topic:"Color",subtest:ie.palette}})),answers:U.map((ie,pe)=>({questionId:`q-${ie.question.id}`,selectedAnswer:ie.answer.toString(),isCorrect:ie.isCorrect,scoreEarned:ie.isCorrect?1:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1}))};e(q)},D=L=>{const O={id:`hue-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:L,maxScore:100,details:{type:"Hue Discrimination",passed:L>70,diagnosis:L>70?"Good Discrimination":"Weak Discrimination"},questions:[],answers:[]};e(O)},N=L=>{const O={id:`depth-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:L,maxScore:100,details:{type:"Depth Perception",passed:L>70,diagnosis:L>70?"Good Depth Perception":"Poor Depth Estimation"},questions:[],answers:[]};e(O)};if(t==="MENU")return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 hover:text-indigo-600 mb-8 font-bold",children:[o.jsx(dt,{size:20,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx(Fl,{size:64,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400"}),o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Visual"}),o.jsx("p",{className:"text-slate-500 mb-8",children:"Pilih metode pengujian:"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("button",{onClick:$,className:"w-full p-4 bg-indigo-50 dark:bg-indigo-900/20 border-2 border-indigo-100 dark:border-indigo-800 rounded-2xl hover:border-indigo-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-indigo-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(ns,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Simulasi Ishihara"}),o.jsx("p",{className:"text-xs text-slate-500",children:"15 Plate Angka & Jalur (Buta Warna)"})]})]}),o.jsxs("button",{onClick:()=>s("HUE_SORT"),className:"w-full p-4 bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-100 dark:border-emerald-800 rounded-2xl hover:border-emerald-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-emerald-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(xu,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Tes Spektrum Warna"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Farnsworth-Munsell D-15 (Sorting)"})]})]}),o.jsxs("button",{onClick:()=>s("DEPTH"),className:"w-full p-4 bg-sky-50 dark:bg-sky-900/20 border-2 border-sky-100 dark:border-sky-800 rounded-2xl hover:border-sky-500 transition group text-left flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-full text-sky-600 shadow-sm group-hover:scale-110 transition",children:o.jsx(rx,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Persepsi Kedalaman"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Estimasi Jarak Objek 3D"})]})]})]})]})]})});if(t==="HUE_SORT")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(dt,{size:20,className:"mr-2"})," Batal"]}),o.jsx(nB,{onFinish:D})]});if(t==="DEPTH")return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center animate-fade-in",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"absolute top-6 left-6 flex items-center text-slate-500 hover:text-indigo-600 font-bold",children:[o.jsx(dt,{size:20,className:"mr-2"})," Batal"]}),o.jsx(sB,{onFinish:N})]});const M=a[u];return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors relative overflow-hidden",children:[T&&o.jsx(Z7,{}),o.jsxs("div",{className:`w-full max-w-md transition-all duration-500 ${T?"scale-90 opacity-0":"scale-100 opacity-100"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>s("MENU"),className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[o.jsx(dt,{size:18,className:"mr-2"})," Keluar"]}),o.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[u+1," / ",a.length]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center select-none relative",children:[o.jsx("div",{className:"mb-6 flex justify-center py-2 relative",children:o.jsxs("div",{className:"relative inline-block",children:[o.jsx(eB,{config:M,onPathGenerated:L=>k(L)}),M.type==="PATH"&&o.jsx(tB,{isActive:!0,onStroke:L=>j(O=>[...O,L]),clearTrigger:R})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:M.type==="NUMBER"?"Angka berapa yang terlihat?":"Ikuti jalur dengan jari/kursor!"}),o.jsx("div",{className:"flex justify-center gap-2 mt-2",children:o.jsx("span",{className:"text-[10px] bg-slate-100 dark:bg-slate-700 text-slate-500 px-2 py-1 rounded font-bold uppercase",children:M.palette.replace("_"," ")})})]}),M.type==="NUMBER"?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:v,onChange:L=>_(L.target.value),autoFocus:!0,onKeyDown:L=>L.key==="Enter"&&v&&J()}),o.jsx("button",{onClick:J,disabled:!v,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}):o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>z(L=>L+1),className:"px-4 py-3 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-300 transition flex items-center justify-center gap-2",children:[o.jsx(B8,{size:18})," Hapus"]}),o.jsxs("button",{onClick:J,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2",children:[o.jsx(Yn,{size:18})," Selesai Gambar"]})]}),M.type==="NUMBER"&&o.jsx("div",{className:"mt-4 flex justify-center",children:o.jsxs("button",{onClick:()=>_("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline flex items-center gap-1",children:[o.jsx(Fl,{size:12})," Tidak terlihat apa-apa (Isi 0)"]})})]}),M.type==="PATH"&&o.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-slate-500 animate-pulse",children:[o.jsx(dA,{size:12})," Tarik garis di atas gambar."]})]})]})},hx=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},aB=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",Yp=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},_A=n=>{switch(n){case"REACTION":return o.jsx(si,{size:20});case"SEQUENCE":return o.jsx(Ia,{size:20});case"AIM":return o.jsx(jr,{size:20});case"CHIMP":return o.jsx(Rs,{size:20});case"VISUAL":return o.jsx(Ia,{size:20});case"NUMBER":return o.jsx(Wh,{size:20});case"VERBAL":return o.jsx(Zh,{size:20});case"TYPING":return o.jsx(_i,{size:20});case"BRIDGE":return o.jsx(Xh,{size:20});case"MATCH":return o.jsx(gu,{size:20});default:return o.jsx(ns,{size:20})}},TA=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},rB=()=>o.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:o.jsx(ns,{size:64})}),oB=({percentile:n,score:e,unit:t,game:s})=>{const u=n/100*300;return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[o.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[o.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),o.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),o.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),o.jsx("line",{x1:u,y1:"10",x2:u,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),o.jsx("circle",{cx:u,cy:"10",r:"4",fill:"#ef4444"})]}),o.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),o.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[o.jsx("span",{children:"Bottom 1%"}),o.jsx("span",{children:"Average"}),o.jsx("span",{children:"Top 1%"})]})]})},lB=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const a=hx(t,s),l=aB(a);let u="pts";return(t==="REACTION"||t==="AIM")&&(u="ms"),t==="TYPING"&&(u="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(u="lvl"),o.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(So,{className:"text-indigo-500"})," Statistik Anda"]}),o.jsx("button",{onClick:()=>{Z.play("back"),e()},children:o.jsx(ux,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),o.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",o.jsx("span",{className:"text-lg font-medium text-slate-400",children:u})]}),o.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",a,"% orang"]})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[o.jsx(oB,{percentile:a,score:s,unit:u,game:t}),o.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:l})]})]}):o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},cB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState("WAITING"),[a,l]=G.useState(0),[u,h]=G.useState([]),[p,f]=G.useState(0),v=G.useRef(null);G.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=()=>{s("READY");const C=Math.floor(Math.random()*3e3)+2e3;v.current=window.setTimeout(()=>{l(Date.now()),s("GO")},C)},T=()=>{if(t==="WAITING")_();else if(t==="READY")v.current&&clearTimeout(v.current),s("TOO_SOON");else if(t==="GO"){const C=Date.now()-a;f(C);const j=[...u,C];h(j),j.length>=5?(s("FINAL_SCORE"),Z.play("finish")):(s("RESULT"),Z.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},E=u.length>0?Math.round(u.reduce((C,j)=>C+j,0)/u.length):0;let I,k="bg-slate-900";return t==="WAITING"?(I=o.jsxs(o.Fragment,{children:[o.jsx(si,{size:80,className:"mx-auto mb-6 text-amber-400"}),o.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),o.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",u.length+1," dari 5"]}),o.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),k="bg-slate-800"):t==="READY"?(I=o.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),k="bg-rose-600"):t==="GO"?(I=o.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),k="bg-emerald-500"):t==="RESULT"?(I=o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[p," ms"]}),o.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),k="bg-indigo-600"):t==="FINAL_SCORE"?(I=o.jsxs(o.Fragment,{children:[o.jsx(ns,{size:64,className:"mx-auto mb-4 text-emerald-400"}),o.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),o.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[E," ms"]}),o.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[o.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(E),children:"Simpan Skor"}),o.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{h([]),s("WAITING")},children:"Coba Lagi"})]})]}),k="bg-slate-800"):t==="TOO_SOON"&&(I=o.jsxs(o.Fragment,{children:[o.jsx(rB,{}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),o.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),k="bg-slate-800"),o.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${k}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[o.jsx("button",{onClick:C=>{C.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),I]})},uB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState([]),[a,l]=G.useState([]),[u,h]=G.useState(1),[p,f]=G.useState("START"),[v,_]=G.useState(null),T=async(I,k)=>{f("WATCHING"),l([]);const C=Math.floor(Math.random()*9),j=[...k,C];s(j),await new Promise(R=>setTimeout(R,800));for(let R=0;R<j.length;R++)_(j[R]),Z.play("click"),await new Promise(z=>setTimeout(z,600)),_(null),await new Promise(z=>setTimeout(z,200));f("PLAYING")},E=async I=>{if(p!=="PLAYING")return;_(I),Z.play("tap"),setTimeout(()=>_(null),200);const k=[...a,I];if(l(k),k[k.length-1]!==t[k.length-1]){f("GAMEOVER"),Z.play("error");return}k.length===t.length&&(f("WATCHING"),Z.play("success"),await new Promise(C=>setTimeout(C,800)),h(C=>C+1),T(u+1,t))};return p==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Ia,{size:80,className:"mx-auto mb-6 text-indigo-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),o.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Ia,{size:64,className:"mx-auto mb-6 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:u})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{h(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(1,u-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",u]}),o.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:p==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((I,k)=>o.jsx("div",{onClick:()=>E(k),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${v===k?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},k))})]})},dB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState("IDLE"),[a,l]=G.useState(30),[u,h]=G.useState({top:"50%",left:"50%"}),[p,f]=G.useState([]),v=G.useRef(null),[_,T]=G.useState(0),[E,I]=G.useState(0),[k,C]=G.useState(0),[j,R]=G.useState(null),z=()=>{if(!v.current)return;const M=v.current.getBoundingClientRect(),L=96,O=50,B=M.width-L-O,U=M.height-L-O,Te=Math.max(O,Math.random()*B),Ce=Math.max(O,Math.random()*U);h({top:`${Ce}px`,left:`${Te}px`})},$=()=>{s("PLAYING"),l(30),f([]),T(0),I(0),z()};G.useEffect(()=>{if(t==="PLAYING"&&E>0){const M=setInterval(()=>{T(Date.now()-E)},50);return R(M),()=>clearInterval(M)}},[t,E]);const J=M=>{if(M.stopPropagation(),t!=="PLAYING")return;const L=Date.now();if(E===0){I(L),C(L),l(B=>B-1),z(),Z.play("click");return}const O=L-k;f(B=>[...B,O]),C(L),Z.play("click"),a<=1?(clearInterval(j),s("FINISHED"),Z.play("finish")):(l(B=>B-1),z())},Y=()=>{t==="PLAYING"&&E>0&&Z.play("error")},D=p.length>0?Math.round(p.reduce((M,L)=>M+L,0)/p.length):0,N=p.length>0?Math.round(p.reduce((M,L)=>M+L,0)/p.length):0;return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:Y,children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),t==="IDLE"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:M=>M.stopPropagation(),children:[o.jsx(jr,{size:80,className:"mx-auto mb-6 text-orange-500"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),o.jsx("button",{onClick:$,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),o.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:a})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),o.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),o.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[N," ms"]})]})]}),o.jsx("div",{ref:v,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:o.jsxs("div",{onMouseDown:J,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:u.top,left:u.left},children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),o.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),o.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&o.jsxs("div",{className:"text-center text-white cursor-default",onClick:M=>M.stopPropagation(),children:[o.jsx(jr,{size:64,className:"mx-auto mb-4 text-orange-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),o.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),o.jsxs("h1",{className:"text-7xl font-black mb-8",children:[D," ms"]}),o.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>n(D),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),o.jsx("button",{onClick:$,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},hB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(4),[a,l]=G.useState([]),[u,h]=G.useState("IDLE"),[p,f]=G.useState(1),[v,_]=G.useState(!1),T=I=>{const C=Array.from({length:40},(R,z)=>z).sort(()=>.5-Math.random()),j=Array.from({length:I},(R,z)=>({id:z+1,pos:C[z],visible:!0}));l(j),f(1),_(!1),h("PLAYING")},E=I=>{u==="PLAYING"&&(I===p?(Z.play("click"),I===1&&_(!0),l(k=>k.map(C=>C.id===I?{...C,visible:!1}:C)),I===a.length?(Z.play("success"),setTimeout(()=>{s(k=>k+1),T(t+1)},500)):f(k=>k+1)):(Z.play("error"),h("GAMEOVER")))};return o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),u==="IDLE"&&o.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[o.jsx(Rs,{size:80,className:"mx-auto mb-6 text-teal-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),o.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),u==="PLAYING"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),o.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((I,k)=>{const C=a.find(j=>j.pos===k);return!C||!C.visible?o.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},k):o.jsx("button",{onMouseDown:()=>E(C.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${v&&C.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:v&&C.id>1?"":C.id},k)})})]}),u==="GAMEOVER"&&o.jsxs("div",{className:"text-center text-white",children:[o.jsx(Rs,{size:64,className:"mx-auto mb-4 text-rose-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),o.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[o.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},fB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(3),[u,h]=G.useState(3),[p,f]=G.useState([]),[v,_]=G.useState([]),[T,E]=G.useState([]),[I,k]=G.useState("START"),C=R=>{let z=3;R>2&&(z=4),R>5&&(z=5),R>10&&(z=6),R>20&&(z=7),h(z);const $=Math.min(Math.floor(z*z/2),R+2),J=[];for(;J.length<$;){const Y=Math.floor(Math.random()*(z*z));J.includes(Y)||J.push(Y)}f(J),_([]),E([]),k("SHOWING"),setTimeout(()=>k("PLAYING"),1e3+R*100)},j=R=>{if(I==="PLAYING"&&!(v.includes(R)||T.includes(R)))if(p.includes(R)){Z.play("tap");const z=[...v,R];_(z),z.length===p.length&&(Z.play("success"),setTimeout(()=>{s($=>$+1),C(t+1)},500))}else{Z.play("error");const z=a-1;l(z),E($=>[...$,R]),z<=0&&setTimeout(()=>k("GAMEOVER"),500)}};return I==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Ia,{size:80,className:"mx-auto mb-6 text-sky-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),o.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):I==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[o.jsx(Ia,{size:64,className:"mx-auto mb-6 text-sky-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{s(1),l(3),C(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((R,z)=>o.jsx(Of,{size:24,className:z<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},z))})]}),o.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:u*u}).map((R,z)=>{const $=p.includes(z),J=v.includes(z),Y=T.includes(z);let D="bg-slate-700 hover:bg-slate-600";return I==="SHOWING"&&$&&(D="bg-white shadow-[0_0_15px_white] scale-95"),I==="PLAYING"&&J&&(D="bg-white"),I==="PLAYING"&&Y&&(D="bg-slate-900 border-2 border-rose-900"),o.jsx("div",{onMouseDown:()=>j(z),className:`rounded-lg transition-all duration-200 cursor-pointer ${D}`},z)})})]})},mB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(""),[u,h]=G.useState(""),[p,f]=G.useState("START"),[v,_]=G.useState(0),[T,E]=G.useState(100),I=R=>{let z="";for(let $=0;$<R;$++)z+=Math.floor(Math.random()*10);return z},k=()=>{s(1),C(1)},C=R=>{const z=I(R);l(z),f("SHOWING"),E(100);const $=1e3+R*500;_($),setTimeout(()=>{E(0)},50),setTimeout(()=>{f("INPUT")},$)},j=R=>{R==null||R.preventDefault(),u===a?(Z.play("success"),f("RESULT"),setTimeout(()=>{s(z=>z+1),h(""),C(t+1)},1e3)):(Z.play("error"),f("GAMEOVER"))};return p==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Wh,{size:80,className:"mx-auto mb-6 text-blue-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),o.jsx("button",{onClick:k,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Wh,{size:64,className:"mx-auto mb-6 text-blue-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),o.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[o.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),o.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:a}),o.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),o.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:u})]}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:k,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),p==="SHOWING"&&o.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[o.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:a}),o.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${v}ms`,opacity:T>0?1:.2}})})]}),p==="INPUT"&&o.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[o.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),o.jsxs("form",{onSubmit:j,children:[o.jsx("input",{type:"number",autoFocus:!0,value:u,onChange:R=>h(R.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),p==="RESULT"&&o.jsxs("div",{className:"text-center",children:[o.jsx(Yn,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},pB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(0),[a,l]=G.useState(3),[u,h]=G.useState(""),[p,f]=G.useState(new Set),[v,_]=G.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],E=()=>{const C=p.size>0&&Math.random()<.4;let j="";if(C){const R=Array.from(p);j=R[Math.floor(Math.random()*R.length)]}else{let R=0;do j=T[Math.floor(Math.random()*T.length)],R++;while(p.has(j)&&R<100)}h(j)},I=C=>{const j=p.has(u);if(C==="SEEN"&&j||C==="NEW"&&!j)s(z=>z+1),C==="NEW"&&f(z=>new Set(z).add(u)),Z.play("click"),E();else{const z=a-1;l(z),Z.play("error"),C==="NEW"&&f($=>new Set($).add(u)),z<=0?_("GAMEOVER"):E()}},k=()=>{s(0),l(3),f(new Set),_("PLAYING"),E()};return v==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Zh,{size:80,className:"mx-auto mb-6 text-purple-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),o.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",o.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",o.jsx("strong",{children:"SUDAH"}),"."]}),o.jsx("button",{onClick:k,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Zh,{size:64,className:"mx-auto mb-6 text-purple-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:k,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[o.jsxs("div",{children:["Skor: ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((C,j)=>o.jsx(Of,{size:24,className:j<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},j))})]}),o.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:u}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>I("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),o.jsx("button",{onClick:()=>I("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},gB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(""),[a,l]=G.useState(""),[u,h]=G.useState(null),[p,f]=G.useState(0),[v,_]=G.useState(0),[T,E]=G.useState("START");G.useEffect(()=>{const C=qb,j=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(j||"")},[]),G.useEffect(()=>{let C;return T==="PLAYING"&&u&&(C=setInterval(()=>{const R=(Date.now()-u)/1e3;_(Math.floor(R));const z=a.length,$=R/60;$>0&&f(Math.round(z/5/$))},1e3)),()=>clearInterval(C)},[T,u,a]);const I=C=>{const j=C.target.value;if(T==="START"&&(h(Date.now()),E("PLAYING")),l(j),j===t){const R=(Date.now()-(u||Date.now()))/6e4,z=Math.round(t.length/5/R);f(z),E("FINISHED"),Z.play("finish")}else j.length%5===0&&Z.play("tap")},k=()=>{const C=qb,j=C.length>0?C[Math.floor(Math.random()*C.length)]:"";s(j||""),l(""),h(null),f(0),_(0),E("START")};return T==="FINISHED"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(_i,{size:64,className:"mx-auto mb-6 text-slate-400"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),o.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[p," ",o.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:k,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>n(p),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[o.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[o.jsxs("div",{children:["WPM: ",o.jsx("span",{className:"font-bold text-emerald-400",children:p})]}),o.jsxs("div",{children:["Time: ",o.jsxs("span",{className:"font-bold text-emerald-400",children:[v,"s"]})]})]}),o.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[o.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((C,j)=>{let R="text-slate-500";return j<a.length&&(R=a[j]===C?"text-white":"text-rose-500 bg-rose-500/20"),o.jsx("span",{className:R,children:C},j)})}),o.jsx("textarea",{value:a,onChange:I,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},xB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(3),[u,h]=G.useState(5),[p,f]=G.useState(4),[v,_]=G.useState([]),[T,E]=G.useState("START"),[I,k]=G.useState(0),[C,j]=G.useState(100),[R,z]=G.useState(1500),$=D=>{const M=4+Math.floor(D/2);h(5),f(M);const L=[];let O=M-1,B=Math.floor(5/2);for(L.push({row:O,col:B});O>0;){O--;const U=[B];B>0&&U.push(B-1),B<4&&U.push(B+1),B=U[Math.floor(Math.random()*U.length)],L.push({row:O,col:B})}_(L)},J=D=>{$(D),E("SHOWING"),j(100);const N=1500;z(N),setTimeout(()=>j(0),50),setTimeout(()=>{E("PLAYING"),k(0)},N)},Y=(D,N)=>{if(T!=="PLAYING")return;const M=v[I];if(D===M.row&&N===M.col){Z.play("click");const L=I+1;k(L),L===v.length&&(Z.play("success"),setTimeout(()=>{s(O=>O+1),J(t+1)},500))}else Z.play("error"),l(L=>L-1),a<=1?E("GAMEOVER"):(E("SHOWING"),j(100),setTimeout(()=>j(0),50),setTimeout(()=>{E("PLAYING"),k(0)},R))};return T==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(Xh,{size:80,className:"mx-auto mb-6 text-emerald-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(3),J(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(Xh,{size:64,className:"mx-auto mb-6 text-emerald-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(3),J(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{Z.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((D,N)=>o.jsx(Of,{size:24,className:N<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},N))})]}),o.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:o.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${C}%`,transitionDuration:`${R}ms`}})}),o.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:o.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${u}, 1fr)`,gridTemplateRows:`repeat(${p}, 1fr)`},children:Array.from({length:p}).map((D,N)=>Array.from({length:u}).map((M,L)=>{const O=v.findIndex(Ce=>Ce.row===N&&Ce.col===L),B=O!==-1,U=B&&O<I;let Te="bg-slate-700";return T==="SHOWING"&&B?Te="bg-emerald-400":T==="PLAYING"&&(U?Te="bg-emerald-600":B&&O===I&&(Te="bg-slate-700 active:bg-emerald-400")),o.jsx("div",{onMouseDown:()=>Y(N,L),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${Te} hover:opacity-90`},`${N}-${L}`)}))})}),o.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[o.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),o.jsx(s8,{size:32})]})]})},yB=({onFinish:n,onExit:e})=>{const[t,s]=G.useState(1),[a,l]=G.useState(5),[u,h]=G.useState([]),[p,f]=G.useState([]),[v,_]=G.useState("START"),[T,E]=G.useState(!1),[I,k]=G.useState(3),C=["","","","","","","","","","","","","","","",""],j=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],R=J=>{const Y=J+2,D=Y*2,N=Math.ceil(Math.sqrt(D));k(N);const M=[...C].sort(()=>Math.random()-.5).slice(0,Y);let L=[];for(let O=0;O<Y;O++){const B=M[O],U=j[O%j.length];L.push({id:O*2,icon:B,flipped:!0,matched:!1,color:U}),L.push({id:O*2+1,icon:B,flipped:!0,matched:!1,color:U})}L=L.sort(()=>Math.random()-.5).map((O,B)=>({...O,id:B})),h(L),_("PREVIEW")},z=()=>{Z.play("click"),h(J=>J.map(Y=>({...Y,flipped:!1}))),_("PLAYING")},$=J=>{if(v!=="PLAYING"||T)return;const Y=u.find(M=>M.id===J);if(!Y||Y.flipped||Y.matched)return;Z.play("click");const D=u.map(M=>M.id===J?{...M,flipped:!0}:M);h(D);const N=[...p,J];if(f(N),N.length===2){E(!0);const M=D.find(O=>O.id===N[0]),L=D.find(O=>O.id===N[1]);M&&L&&M.icon===L.icon?(Z.play("success"),setTimeout(()=>{h(O=>O.map(B=>N.includes(B.id)?{...B,matched:!0}:B)),f([]),E(!1),D.filter(O=>!O.matched&&!N.includes(O.id)).length===0&&setTimeout(()=>{s(O=>O+1),R(t+1)},500)},500)):setTimeout(()=>{Z.play("error"),h(O=>O.map(B=>N.includes(B.id)?{...B,flipped:!1}:B)),f([]),E(!1),l(O=>{const B=O-1;return B<=0&&_("GAMEOVER"),B})},1e3)}};return v==="START"?o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center max-w-md p-6",children:[o.jsx(gu,{size:80,className:"mx-auto mb-6 text-pink-400"}),o.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),o.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(5),R(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?o.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[o.jsx(gu,{size:64,className:"mx-auto mb-6 text-pink-500"}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),o.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",o.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>{Z.play("click"),s(1),l(5),R(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),o.jsx("button",{onClick:()=>{Z.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):o.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[o.jsx("button",{onClick:()=>{Z.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:o.jsx(dt,{size:24})}),o.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[o.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),o.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((J,Y)=>o.jsx(Of,{size:24,className:Y<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},Y))}),v==="PREVIEW"&&o.jsx("button",{onClick:z,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),o.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${I}, minmax(0, 1fr))`},children:u.map(J=>o.jsx("div",{onClick:()=>$(J.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${J.flipped||J.matched?`${J.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:J.flipped||J.matched?J.icon:""},J.id))})]})},vB=({username:n,history:e})=>{const[t,s]=G.useState({}),[a,l]=G.useState(!0),[u,h]=G.useState(!0),p=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];G.useEffect(()=>{(async()=>{if(!u)return;l(!0);const _={};await Promise.all(p.map(async T=>{try{const E=await DV(T);_[T]=E}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),l(!1)})()},[u]);const f=v=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===v);return v==="REACTION"||v==="AIM"?_.sort((T,E)=>T.score-E.score):_.sort((T,E)=>E.score-T.score),_.slice(0,5).map(T=>{const E=T.details;return{name:n,score:T.score,unit:(E==null?void 0:E.unit)||""}})};return o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Ds,{className:"text-amber-500"})," Leaderboard"]}),o.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[o.jsxs("button",{onClick:()=>h(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[o.jsx(i9,{size:14,className:"inline mr-1"})," Global"]}),o.jsxs("button",{onClick:()=>h(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${u?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[o.jsx(vu,{size:14,className:"inline mr-1"})," Personal"]})]})]}),a&&u?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[o.jsx(Ln,{size:40,className:"animate-spin mb-4 text-indigo-500"}),o.jsx("p",{children:"Memuat Data Global Rank..."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(v=>{let _=[];u?_=t[v]||[]:_=f(v);const T=Yp(v);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[o.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:_A(v)}),o.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:TA(v)})]}),o.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((E,I)=>o.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${I===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`font-bold w-4 text-center ${I===0?"text-amber-500":I===1?"text-slate-400":I===2?"text-orange-700":"text-slate-500"}`,children:I+1}),o.jsxs("span",{className:`font-medium truncate max-w-[120px] ${E.username===n||E.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[E.name||E.username," ",E.username===n||E.name===n?"(You)":""]})]}),o.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[E.score,o.jsx("span",{className:"text-xs text-slate-400 ml-1",children:E.unit})]})]},I)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},v)})})]})},bB=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?o.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:o.jsx(Du,{size:32,className:"text-slate-400"})}),o.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):o.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[o.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(ns,{className:"text-indigo-500"})," Recent Activity"]}),o.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const a=s.game,l=t.score,u=s.unit||"",h=hx(a,l);return o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${Yp(a)}`,children:_A(a)}),o.jsx("span",{className:`font-bold text-base ${Yp(a).split(" ")[0]}`,children:TA(a)})]})}),o.jsx("td",{className:"p-5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),o.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),o.jsx("td",{className:"p-5 text-right",children:o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[l,u]}),o.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${h>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",h,"%"]})]})})]},t.id)})})]})})})]})},_B=({onBack:n,username:e,history:t,onComplete:s,isGuest:a,initialMode:l,initialTab:u})=>{const[h,p]=G.useState("MENU"),[f,v]=G.useState(u||"DASHBOARD");G.useEffect(()=>{l&&p(l)},[l]),G.useEffect(()=>{u&&v(u)},[u]);const[_,T]=G.useState(!1),[E,I]=G.useState("REACTION"),k=async(R,z)=>{let $="pts";(z==="REACTION"||z==="AIM")&&($="ms"),(z==="SEQUENCE"||z==="NUMBER"||z==="CHIMP"||z==="VISUAL"||z==="BRIDGE"||z==="MATCH")&&($="lvl"),z==="TYPING"&&($="wpm"),a||MV(z,R,e,$).catch(Y=>console.error("Cloud save failed",Y));const J={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:R,maxScore:0,details:{game:z,unit:$},questions:[],answers:[]};s(J),p("MENU")},C=R=>{const z=t.filter(Y=>Y.category!=="BENCHMARK"||!Y.details?!1:Y.details.game===R).map(Y=>{const D=Y.details;return{id:Y.id,game:D.game,score:Y.score,unit:D.unit,date:Y.date}});if(z.length===0)return{best:null,percentile:0};let $;R==="REACTION"||R==="AIM"?$=Math.min(...z.map(Y=>Y.score)):$=Math.max(...z.map(Y=>Y.score));const J=hx(R,$);return{best:$,percentile:J}};if(h!=="MENU")switch(h){case"REACTION":return o.jsx(cB,{onFinish:R=>k(R,"REACTION"),onExit:()=>p("MENU")});case"SEQUENCE":return o.jsx(uB,{onFinish:R=>k(R,"SEQUENCE"),onExit:()=>p("MENU")});case"AIM":return o.jsx(dB,{onFinish:R=>k(R,"AIM"),onExit:()=>p("MENU")});case"CHIMP":return o.jsx(hB,{onFinish:R=>k(R,"CHIMP"),onExit:()=>p("MENU")});case"VISUAL":return o.jsx(fB,{onFinish:R=>k(R,"VISUAL"),onExit:()=>p("MENU")});case"NUMBER":return o.jsx(mB,{onFinish:R=>k(R,"NUMBER"),onExit:()=>p("MENU")});case"VERBAL":return o.jsx(pB,{onFinish:R=>k(R,"VERBAL"),onExit:()=>p("MENU")});case"TYPING":return o.jsx(gB,{onFinish:R=>k(R,"TYPING"),onExit:()=>p("MENU")});case"BRIDGE":return o.jsx(xB,{onFinish:R=>k(R,"BRIDGE"),onExit:()=>p("MENU")});case"MATCH":return o.jsx(yB,{onFinish:R=>k(R,"MATCH"),onExit:()=>p("MENU")});default:return p("MENU"),null}const j=({game:R,title:z,desc:$,icon:J,colorClass:Y,btnColorClass:D})=>{const{best:N,percentile:M}=C(R);let L="pts";return(R==="REACTION"||R==="AIM")&&(L="ms"),R==="TYPING"&&(L="wpm"),(R==="SEQUENCE"||R==="NUMBER"||R==="CHIMP"||R==="VISUAL"||R==="BRIDGE"||R==="MATCH")&&(L="lvl"),o.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[o.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${Y}`}),o.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[o.jsx("div",{className:`p-4 rounded-2xl ${Y} bg-opacity-10 text-opacity-100 shrink-0`,children:o.jsx("div",{className:`${Y.replace("bg-","text-")}`,children:J})}),o.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:z}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:$}),o.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${Y}`,style:{width:`${M}%`}})}),o.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[o.jsxs("span",{children:["Best: ",N!==null?`${N} ${L}`:"-"]}),o.jsx("span",{children:M>0?`Top ${M}%`:"-"})]})]}),o.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[o.jsxs("button",{onClick:O=>{O.stopPropagation(),Z.play("click"),p(R)},className:`flex-1 sm:flex-none px-6 py-2.5 ${D} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[o.jsx(jo,{size:16,fill:"currentColor"})," MAIN"]}),o.jsxs("button",{onClick:O=>{O.stopPropagation(),Z.play("click"),I(R),T(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[o.jsx(So,{size:14})," Stats"]})]})]})]})};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:o.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[o.jsx(lB,{isOpen:_,onClose:()=>T(!1),game:E,bestScore:C(E).best}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:o.jsxs("button",{onClick:()=>{Z.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[o.jsx(dt,{size:20,className:"mr-2"})," Menu Utama"]})}),o.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[o.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[o.jsx(ns,{className:"text-rose-500",size:40})," Human Benchmark"]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",o.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),a&&o.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),o.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[o.jsx("button",{onClick:()=>v("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${f==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),o.jsx("button",{onClick:()=>v("RANKING"),className:`pb-3 px-4 font-bold transition-all ${f==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),f==="DASHBOARD"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[o.jsx(j,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:o.jsx(si,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),o.jsx(j,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:o.jsx(Ia,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),o.jsx(j,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:o.jsx(jr,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),o.jsx(j,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:o.jsx(Rs,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),o.jsx(j,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:o.jsx(Ia,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),o.jsx(j,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:o.jsx(Wh,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),o.jsx(j,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:o.jsx(Zh,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),o.jsx(j,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:o.jsx(_i,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),o.jsx(j,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:o.jsx(Xh,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),o.jsx(j,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:o.jsx(gu,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),o.jsx(bB,{history:t})]}):o.jsx(vB,{username:e,history:t})]})})},oh=[{id:"utbk",label:"UTBK SNBT",type:"UTBK",sub:"General",mode:"SINGLE",color:"bg-rose-500",description:"Ranking berdasarkan skor IRT rata-rata."},{id:"skd_combined",label:"SKD CPNS & Kedinasan",type:"SKD",mode:"SPLIT_SKD",color:"bg-amber-500",description:"Ranking jalur CPNS Umum dan Sekolah Kedinasan."},{id:"tpa_combined",label:"Seleksi Lanjutan I",type:"TPA",mode:"SPLIT_TPA",color:"bg-blue-600",description:"Ranking TPA/TBI dan Psikotes Kedinasan."},{id:"psikotest",label:"Tes Koran & IQ",type:"PSIKOTEST",sub:"General",mode:"SINGLE",color:"bg-purple-500",description:"Ranking berdasarkan estimasi IQ & Tes Pauli."},{id:"kecermatan_combined",label:"Tes Kecermatan",type:"KECERMATAN",mode:"SPLIT_KECERMATAN",color:"bg-emerald-600",description:"Ranking ketelitian di berbagai mode tes."},{id:"benchmark",label:"Human Benchmark",type:"BENCHMARK",mode:"BENCHMARK",color:"bg-slate-800",description:"Ranking game kognitif khusus."}],TB=({rank:n})=>n===1?o.jsx(U8,{size:24,className:"text-amber-400 fill-amber-400"}):n===2?o.jsx(TE,{size:24,className:"text-slate-400 fill-slate-400"}):n===3?o.jsx(TE,{size:24,className:"text-orange-400 fill-orange-400"}):o.jsx("span",{className:"font-black text-slate-400 text-lg w-6 text-center",children:n}),pi=({title:n,data:e,currentUserId:t,colorClass:s,compact:a})=>e.length===0?o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 flex flex-col items-center justify-center text-center h-full min-h-[200px]",children:[o.jsx("div",{className:`p-3 rounded-full ${s.replace("bg-","bg-opacity-10 text-")} mb-3`,children:o.jsx(Ds,{size:24})}),o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-1",children:n}),o.jsx("p",{className:"text-xs text-slate-500",children:"Belum ada data ranking."})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col h-full",children:[o.jsx("div",{className:`p-4 border-b border-slate-100 dark:border-slate-700 ${s} bg-opacity-10`,children:o.jsxs("h3",{className:`font-bold ${s.replace("bg-","text-")} flex items-center gap-2`,children:[o.jsx(Ds,{size:18})," ",n]})}),o.jsx("div",{className:"flex-1 overflow-y-auto max-h-[500px] p-2 scrollbar-hide",children:o.jsx("div",{className:"space-y-2",children:e.map((l,u)=>{const h=u+1,p=t===l.uid;return o.jsxs("div",{className:`flex items-center p-3 rounded-xl border transition-all ${p?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800 shadow-sm":"bg-white dark:bg-slate-800/50 border-slate-100 dark:border-slate-700"}`,children:[o.jsx("div",{className:"w-8 shrink-0 flex justify-center mr-2",children:o.jsx(TB,{rank:h})}),o.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-500 dark:text-slate-400 mr-3 text-xs shrink-0",children:l.username[0].toUpperCase()}),o.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[o.jsxs("div",{className:`font-bold text-sm truncate ${p?"text-indigo-700 dark:text-indigo-300":"text-slate-800 dark:text-white"}`,children:[l.username," ",p&&"(You)"]}),!a&&l.packageName&&o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-0.5",children:[o.jsx(hA,{size:10})," ",l.packageName]})]}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`font-black ${a?"text-sm":"text-lg"} ${h<=3?"text-slate-800 dark:text-white":"text-slate-600 dark:text-slate-300"}`,children:l.score})})]},u)})})})]}),SB=({onBack:n,userProfile:e,onOpenHumanBenchmark:t})=>{const[s,a]=G.useState("utbk"),[l,u]=G.useState([]),[h,p]=G.useState({}),[f,v]=G.useState(!1),[_,T]=G.useState(!1),E=oh.find(j=>j.id===s)||oh[0];G.useEffect(()=>{(async()=>{if(E.mode!=="BENCHMARK"){v(!0),u([]),p({});try{if(E.mode==="SINGLE"){const R=await _l(E.type,E.sub||"General");u(R)}else if(E.mode==="SPLIT_SKD"){const[R,z]=await Promise.all([_l("SKD","CPNS"),_l("SKD","KEDINASAN")]);p({CPNS:R,KEDINASAN:z})}else if(E.mode==="SPLIT_TPA"){const[R,z]=await Promise.all([_l("TPA","TPA_TBI"),_l("TPA","PSIKOTEST_KEDINASAN")]);p({TPA_TBI:R,PSIKOTEST_KEDINASAN:z})}else if(E.mode==="SPLIT_KECERMATAN"){const R=["ANGKA","HURUF","SIMBOL_HILANG","SAMA_BEDA","MATCHING","GROUPING"],z=R.map(Y=>_l("KECERMATAN",Y)),$=await Promise.all(z),J={};R.forEach((Y,D)=>{J[Y]=$[D]}),p(J)}}catch(R){console.error("Error fetching leaderboard",R)}finally{v(!1)}}})()},[s]);const I=j=>{Z.play("click"),a(j),T(!1)},C=(()=>{if(!(e!=null&&e.uid)||E.mode!=="SINGLE")return null;const j=l.findIndex(R=>R.uid===e.uid);return j!==-1?{rank:j+1,data:l[j]}:null})();return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row transition-colors h-screen overflow-hidden",children:[o.jsxs("div",{className:"hidden md:flex w-64 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex-col shrink-0 z-20",children:[o.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition text-slate-500 dark:text-slate-400",children:o.jsx(dt,{size:20})}),o.jsxs("h2",{className:"font-black text-lg text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Ds,{className:"text-amber-500",size:20})," Global Rank"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:oh.map(j=>o.jsxs("button",{onClick:()=>I(j.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all text-left ${s===j.id?`${j.color} text-white shadow-md`:"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${s===j.id?"bg-white":j.color}`}),j.label]},j.id))})]}),o.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 z-30 sticky top-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 font-bold text-sm",children:[o.jsx(dt,{size:18,className:"mr-1"})," Menu"]}),o.jsxs("div",{className:"text-sm font-black text-slate-800 dark:text-white flex items-center gap-1",children:[o.jsx(Ds,{size:16,className:"text-amber-500"})," Global Leaderboard"]})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>T(!_),className:"w-full flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700 rounded-xl font-bold text-slate-700 dark:text-white",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${E.color}`}),E.label]}),o.jsx(S8,{size:18,className:`transition-transform ${_?"rotate-180":""}`})]}),_&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-down max-h-[60vh] overflow-y-auto",children:oh.map(j=>o.jsxs("button",{onClick:()=>I(j.id),className:`w-full flex items-center gap-3 px-4 py-3 text-sm font-bold transition-all text-left border-b border-slate-50 dark:border-slate-700 last:border-0 ${s===j.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${j.color}`}),j.label]},j.id))})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col h-full relative overflow-hidden bg-slate-50 dark:bg-slate-900",onClick:()=>T(!1),children:[o.jsxs("div",{className:"p-6 pb-4 hidden md:block",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:E.label}),o.jsx("p",{className:"text-slate-500 text-sm",children:E.description})]}),f&&o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[o.jsx(Ln,{className:"animate-spin text-indigo-600 mb-4",size:40}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Memuat data ranking..."})]}),!f&&o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-24 scrollbar-hide",children:[E.mode==="BENCHMARK"&&o.jsx("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 max-w-md w-full",children:[o.jsx(ns,{size:64,className:"mx-auto mb-6 text-indigo-500 animate-bounce-slow"}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-4",children:"Human Benchmark"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Peringkat untuk game kognitif (Reaction Time, Memory, dll) tersedia di dashboard khusus."}),o.jsxs("button",{onClick:()=>{Z.play("click"),t()},className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(z8,{size:20})," Buka Dashboard"]})]})}),E.mode==="SINGLE"&&o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsx(pi,{title:`Ranking ${E.label}`,data:l,currentUserId:e==null?void 0:e.uid,colorClass:E.color})}),E.mode==="SPLIT_SKD"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(pi,{title:"SKD CPNS Umum",data:h.CPNS||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-amber-500"}),o.jsx(pi,{title:"SKD Kedinasan",data:h.KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-orange-500"})]}),E.mode==="SPLIT_TPA"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto h-full",children:[o.jsx(pi,{title:"TPA & TBI (Standar)",data:h.TPA_TBI||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-600"}),o.jsx(pi,{title:"Psikotes Kedinasan",data:h.PSIKOTEST_KEDINASAN||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-purple-600"})]}),E.mode==="SPLIT_KECERMATAN"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-7xl mx-auto",children:[o.jsx(pi,{title:"Angka Hilang",data:h.ANGKA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-emerald-500",compact:!0}),o.jsx(pi,{title:"Huruf Hilang",data:h.HURUF||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-teal-500",compact:!0}),o.jsx(pi,{title:"Simbol Hilang",data:h.SIMBOL_HILANG||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-cyan-500",compact:!0}),o.jsx(pi,{title:"Sama Beda Simbol",data:h.SAMA_BEDA||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-blue-500",compact:!0}),o.jsx(pi,{title:"Matching",data:h.MATCHING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-indigo-500",compact:!0}),o.jsx(pi,{title:"Grouping",data:h.GROUPING||[],currentUserId:e==null?void 0:e.uid,colorClass:"bg-violet-500",compact:!0})]})]}),C&&E.mode==="SINGLE"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 shadow-[0_-5px_20px_rgba(0,0,0,0.05)] z-30 animate-slide-up",children:o.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Rank"}),o.jsxs("div",{className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black px-3 py-1 rounded-lg",children:["#",C.rank]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Your Score"}),o.jsx("div",{className:"text-2xl font-black text-indigo-600 dark:text-indigo-400",children:C.data.score})]})]})})]})]})},SA={Footprints:W8,Flame:lA,Zap:si,Crosshair:j8,Activity:ns,Eye:Fl,Moon:ox,Layers:rx,Trophy:Ds},EB=({profile:n,onOpenAchievements:e})=>{const t=fE(n.level),s=fE(n.level-1),a=(n.xp-s)/(t-s)*100,l=eA(n.level);return o.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-slate-800 p-2 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm animate-fade-in-down w-full md:w-auto overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg border border-orange-100 dark:border-orange-800",children:[o.jsx(lA,{size:16,className:"fill-orange-500 animate-pulse"}),o.jsx("span",{className:"font-black text-sm",children:n.streak})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center min-w-[100px]",children:[o.jsxs("div",{className:"flex justify-between items-end mb-1",children:[o.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:["Lvl ",n.level,": ",l]}),o.jsxs("span",{className:"text-[9px] text-slate-400 font-mono",children:[n.xp," / ",t," XP"]})]}),o.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out",style:{width:`${Math.min(100,Math.max(0,a))}%`}})})]}),o.jsx("button",{onClick:e,className:"p-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 rounded-lg hover:bg-yellow-100 dark:hover:bg-yellow-900/40 transition border border-yellow-100 dark:border-yellow-800",children:o.jsx(Ds,{size:18})})]})},wB=({isOpen:n,onClose:e,profile:t})=>n?o.jsx("div",{className:"fixed inset-0 z-[80] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Ds,{className:"text-yellow-500 fill-yellow-500"})," Pencapaian"]}),o.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Terkumpul: ",t.unlockedAchievements.length," / ",sp.length]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-500",children:o.jsx(ux,{size:24})})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:sp.map(s=>{const a=t.unlockedAchievements.includes(s.id),l=SA[s.icon]||Ds;return o.jsxs("div",{className:`p-4 rounded-2xl border-2 flex items-center gap-4 transition-all ${a?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800":"bg-slate-50 dark:bg-slate-800 border-slate-100 dark:border-slate-700 opacity-60 grayscale"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shrink-0 ${a?"bg-white dark:bg-slate-800 text-indigo-600 shadow-md":"bg-slate-200 dark:bg-slate-700 text-slate-400"}`,children:a?o.jsx(l,{size:24}):o.jsx(uA,{size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold ${a?"text-slate-900 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:s.title}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight mb-1",children:s.description}),o.jsxs("span",{className:"text-[10px] font-bold bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-600 dark:text-slate-300",children:["+",s.xpReward," XP"]})]})]},s.id)})})]})}):null,NB=({newLevel:n,onClose:e})=>o.jsx("div",{className:"fixed inset-0 z-[90] bg-black/80 backdrop-blur-md flex items-center justify-center p-6 animate-fade-in",onClick:e,children:o.jsxs("div",{className:"text-center relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-[100px] rounded-full pointer-events-none"}),o.jsx(a7,{size:120,className:"text-yellow-400 fill-yellow-400 mx-auto mb-6 animate-bounce-slow drop-shadow-[0_0_30px_rgba(250,204,21,0.6)]"}),o.jsx("h2",{className:"text-5xl font-black text-white mb-2 tracking-tight animate-scale-up",children:"LEVEL UP!"}),o.jsxs("div",{className:"text-2xl font-bold text-indigo-300 mb-8",children:["Level ",n,": ",eA(n)]}),o.jsx("button",{onClick:e,className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 transition shadow-xl",children:"Lanjut Belajar"})]})}),AB=({achievement:n,onClose:e})=>{const t=SA[n.icon]||Ds;return VE.useEffect(()=>{const s=setTimeout(e,4e3);return()=>clearTimeout(s)},[]),o.jsxs("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-[100] bg-slate-900 text-white p-4 rounded-2xl shadow-2xl border border-yellow-500/30 flex items-center gap-4 animate-slide-up w-max max-w-[90vw]",children:[o.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center shrink-0 text-slate-900 animate-pulse",children:o.jsx(t,{size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-bold text-yellow-400 uppercase tracking-wider mb-0.5",children:"Achievement Unlocked!"}),o.jsx("div",{className:"font-bold text-lg",children:n.title}),o.jsxs("div",{className:"text-xs text-slate-400",children:["+",n.xpReward," XP"]})]})]})},jE={kedokteran:750,informatika:720,"ilmu komputer":710,hukum:680,manajemen:690,psikologi:670,akuntansi:685,"teknik sipil":660,"teknik mesin":665,"teknik elektro":675,komunikasi:695,farmasi:650},kB=({history:n,category:e,onBack:t,onStartSmartReview:s})=>{const[a,l]=G.useState(""),[u,h]=G.useState(""),[p,f]=G.useState(0),[v,_]=G.useState(0),[T,E]=G.useState([]);G.useEffect(()=>{const C=n.filter(R=>R.category===e);if(C.length>0){const R=C.reduce((z,$)=>z+$.score,0);_(Math.round(R/C.length))}const j={};n.forEach(R=>{R.category===e&&R.answers.forEach(z=>{if(!z.isCorrect){const $=R.questions.find(J=>J.id===z.questionId);$&&(j[$.id]=$)}})}),E(Object.values(j))},[n,e]);const I=C=>{const j=C.target.value;h(j);const R=j.toLowerCase();let z=600;Object.keys(jE).forEach(J=>{R.includes(J)&&(z=jE[J])});const $=a.toLowerCase();($.includes("ui")||$.includes("itb")||$.includes("ugm"))&&(z+=50),f(z)},k=p>0?Math.min(100,Math.round(v/p*100)):0;return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(dt,{size:20})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[o.jsx(Mu,{className:"text-indigo-600 dark:text-indigo-400"}),"Analisis Akademik ",e]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Target skor & perbaikan kelemahan."})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(jr,{className:"text-rose-500"})," Target Score Calculator"]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Universitas Impian"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Universitas Indonesia",value:a,onChange:C=>l(C.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Jurusan / Prodi"}),o.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",placeholder:"Contoh: Pendidikan Dokter",value:u,onChange:I})]})]}),u&&o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-5 rounded-2xl animate-fade-in-up border border-indigo-100 dark:border-indigo-800",children:[o.jsxs("div",{className:"flex justify-between items-end mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-bold uppercase",children:"Estimasi Target"}),o.jsx("div",{className:"text-3xl font-black text-indigo-700 dark:text-indigo-300",children:p})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold uppercase",children:"Skor Saat Ini"}),o.jsx("div",{className:"text-xl font-bold text-slate-700 dark:text-slate-200",children:v})]})]}),o.jsx("div",{className:"w-full h-3 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-2",children:o.jsx("div",{className:`h-full transition-all duration-1000 ${k>=100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${k}%`}})}),o.jsx("div",{className:"text-xs text-center font-medium text-slate-600 dark:text-slate-400",children:k>=100?"Hebat! Skor rata-ratamu sudah melampaui target.":`Kamu butuh +${p-v} poin lagi untuk aman.`})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-6 flex items-center gap-2",children:[o.jsx(qp,{className:"text-emerald-500"})," Smart Review"]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center mb-6",children:[o.jsxs("div",{className:"w-24 h-24 bg-rose-50 dark:bg-rose-900/20 rounded-full flex items-center justify-center mb-4 relative",children:[o.jsx(N8,{size:48,className:"text-rose-500"}),o.jsx("div",{className:"absolute top-0 right-0 bg-rose-600 text-white text-xs font-bold px-2 py-1 rounded-full border-2 border-white dark:border-slate-800",children:T.length})]}),o.jsx("h4",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Bank Kesalahan"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 max-w-xs",children:["Sistem mengumpulkan ",T.length," soal yang pernah kamu jawab salah. Kerjakan ulang untuk memastikan pemahaman."]})]}),o.jsxs("button",{onClick:()=>s(T),disabled:T.length===0,className:"w-full py-4 bg-slate-900 dark:bg-indigo-600 text-white rounded-xl font-bold hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2 shadow-lg",children:[o.jsx(jo,{size:20,fill:"currentColor"}),"Kerjakan ",T.length," Soal Salah"]})]})]}),o.jsxs("div",{className:"mt-6 bg-gradient-to-r from-red-500 to-red-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-10 -mt-10 blur-2xl"}),o.jsxs("div",{className:"relative z-10 flex items-center gap-6",children:[o.jsx("div",{className:"p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:o.jsx(dx,{size:40})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold mb-1",children:"Video Pembahasan Terintegrasi"}),o.jsx("p",{className:"text-red-100 text-sm max-w-lg",children:"Bingung dengan penjelasan teks? Sekarang setiap soal dilengkapi tombol pencarian otomatis ke YouTube untuk menemukan video pembahasan konsep terkait dari tutor terbaik."}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Yn,{size:12})," Auto-Search Topic"]}),o.jsxs("span",{className:"text-xs bg-black/20 px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Yn,{size:12})," Curated Keywords"]})]})]})]})]})]})})},CB=({userProfile:n,history:e,onBack:t,onUpdateProfile:s})=>{var ae,de,ce,Ae,lt;const[a,l]=G.useState("PROFILE"),[u,h]=G.useState([]),[p,f]=G.useState([]),[v,_]=G.useState([]),[T,E]=G.useState(""),[I,k]=G.useState(!1),[C,j]=G.useState(null),[R,z]=G.useState(null),[$,J]=G.useState(!1),[Y,D]=G.useState(n.username),[N,M]=G.useState(null),[L,O]=G.useState(!1),B=G.useRef(null);G.useEffect(()=>{(a==="FRIENDS"||a==="REQUESTS")&&U()},[a]);const U=async()=>{if(n.uid){k(!0);try{const ue=await zV(n.uid);h(ue);const Pe=await OV(n.uid);f(Pe)}catch(ue){console.error(ue)}finally{k(!1)}}},Te=ue=>{var Je;const Pe=(Je=ue.target.files)==null?void 0:Je[0];if(Pe){if(Pe.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const Me=new FileReader;Me.onload=Qe=>{var ct;const Fe=new Image;Fe.onload=()=>{const kt=document.createElement("canvas"),Kt=kt.getContext("2d");if(!Kt)return;const $t=200;let be=Fe.width,me=Fe.height;be>me?be>$t&&(me*=$t/be,be=$t):me>$t&&(be*=$t/me,me=$t),kt.width=be,kt.height=me,Kt.drawImage(Fe,0,0,be,me),M(kt.toDataURL("image/jpeg",.8))},Fe.src=(ct=Qe.target)==null?void 0:ct.result},Me.readAsDataURL(Pe)}},Ce=async()=>{O(!0);try{const ue={};Y!==n.username&&(ue.username=Y),N&&(ue.photoURL=N),Object.keys(ue).length>0&&await s(ue),J(!1),M(null)}catch{alert("Gagal menyimpan profil.")}finally{O(!1)}},q=async()=>{if(!(T.length<3)){k(!0);try{const ue=await LV(T),Pe=new Set(u.map(Je=>Je.uid));_(ue.filter(Je=>Je.uid!==n.uid&&!Pe.has(Je.uid)))}catch(ue){console.error(ue)}finally{k(!1)}}},ie=async ue=>{var Pe;try{await UV({uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Pe=n.gamification)==null?void 0:Pe.level)||1},ue.uid),alert("Permintaan pertemanan dikirim!"),_(Je=>Je.filter(Me=>Me.uid!==ue.uid))}catch{alert("Gagal mengirim request.")}},pe=async ue=>{var Pe;try{await VV(n.uid,{uid:n.uid,username:n.username,photoURL:n.photoURL||void 0,level:((Pe=n.gamification)==null?void 0:Pe.level)||1},ue),U()}catch{alert("Error accepting")}},Ue=async ue=>{try{await BV(n.uid,ue.fromUid),f(Pe=>Pe.filter(Je=>Je.id!==ue.id))}catch{alert("Error rejecting")}},he=async ue=>{if(window.confirm("Hapus teman ini?"))try{await GV(n.uid,ue),h(Pe=>Pe.filter(Je=>Je.uid!==ue))}catch{alert("Gagal menghapus teman.")}},H=ue=>ue&&Date.now()-new Date(ue).getTime()<900*1e3?"online":"offline",ne=async ue=>{k(!0);try{const Pe=await iA(ue.uid),Je={utbk:Math.max(0,...Pe.filter(Me=>Me.category==="UTBK").map(Me=>Me.score)),skd:Math.max(0,...Pe.filter(Me=>Me.category==="SKD").map(Me=>Me.score)),tpa:Math.max(0,...Pe.filter(Me=>Me.category==="TPA").map(Me=>Me.score)),psikotest:Math.max(0,...Pe.filter(Me=>Me.category==="PSIKOTEST").map(Me=>Me.score)),kecermatan:Math.max(0,...Pe.filter(Me=>Me.category==="KECERMATAN").map(Me=>Me.score)),benchmark:Math.max(0,...Pe.filter(Me=>Me.category==="BENCHMARK").map(Me=>Me.score))};z(Je),j(ue)}catch{alert("Gagal mengambil data teman.")}finally{k(!1)}},le=ue=>{const Pe=e.filter(Je=>Je.category===ue);return Pe.length===0?0:Math.max(...Pe.map(Je=>Je.score))};return C&&R?o.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col p-6 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center mb-8",children:[o.jsx("button",{onClick:()=>j(null),className:"p-2 bg-white/10 rounded-full text-white mr-4",children:o.jsx(dt,{})}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Perbandingan Statistik"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 text-center text-white",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-500 mb-2 overflow-hidden border-2 border-white",children:n.photoURL?o.jsx("img",{src:n.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-2xl font-bold",children:n.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full",children:n.username})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(_E,{size:32,className:"text-indigo-400"})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-16 h-16 rounded-full bg-rose-500 mb-2 overflow-hidden border-2 border-white",children:C.photoURL?o.jsx("img",{src:C.photoURL,className:"w-full h-full object-cover"}):o.jsx("span",{className:"flex items-center justify-center h-full text-2xl font-bold",children:C.username[0]})}),o.jsx("span",{className:"font-bold truncate w-full",children:C.username})]})]}),o.jsx("div",{className:"space-y-4",children:[{label:"UTBK SNBT",key:"utbk",myScore:le("UTBK"),friendScore:R.utbk},{label:"SKD CPNS",key:"skd",myScore:le("SKD"),friendScore:R.skd},{label:"TPA & TBI",key:"tpa",myScore:le("TPA"),friendScore:R.tpa},{label:"Psikotes",key:"psikotest",myScore:le("PSIKOTEST"),friendScore:R.psikotest},{label:"Kecermatan",key:"kecermatan",myScore:le("KECERMATAN"),friendScore:R.kecermatan},{label:"Benchmark",key:"benchmark",myScore:le("BENCHMARK"),friendScore:R.benchmark}].map(ue=>o.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700",children:[o.jsx("div",{className:"text-center text-slate-400 text-xs font-bold uppercase mb-2",children:ue.label}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-black",children:[o.jsx("span",{className:ue.myScore>ue.friendScore?"text-emerald-400":"text-white",children:ue.myScore}),o.jsx("div",{className:"h-1 flex-1 mx-4 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${ue.myScore>ue.friendScore?"bg-emerald-500":"bg-rose-500"}`,style:{width:`${ue.myScore/(ue.myScore+ue.friendScore||1)*100}%`}})}),o.jsx("span",{className:ue.friendScore>ue.myScore?"text-emerald-400":"text-white",children:ue.friendScore})]})]},ue.key))})]}):o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(dt,{size:20})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Social Hub"})]}),o.jsxs("div",{className:"flex gap-4 mb-8 border-b border-slate-200 dark:border-slate-700 overflow-x-auto",children:[o.jsx("button",{onClick:()=>l("PROFILE"),className:`pb-3 px-4 font-bold text-sm border-b-2 ${a==="PROFILE"?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500"}`,children:"Profile"}),o.jsx("button",{onClick:()=>l("FRIENDS"),className:`pb-3 px-4 font-bold text-sm border-b-2 ${a==="FRIENDS"?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500"}`,children:"My Friends"}),o.jsxs("button",{onClick:()=>l("REQUESTS"),className:`pb-3 px-4 font-bold text-sm border-b-2 ${a==="REQUESTS"?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500"}`,children:["Requests ",p.length>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-rose-500 text-white rounded-full text-[10px]",children:p.length})]})]}),a==="PROFILE"&&o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-lg border border-slate-200 dark:border-slate-700 mb-8 flex flex-col md:flex-row items-center gap-8 relative overflow-hidden",children:[o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 p-1 cursor-pointer",onClick:()=>{var ue;return $&&((ue=B.current)==null?void 0:ue.click())},children:o.jsxs("div",{className:"w-full h-full rounded-full bg-white dark:bg-slate-800 flex items-center justify-center overflow-hidden relative",children:[N||n.photoURL?o.jsx("img",{src:N||n.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx("span",{className:"text-4xl font-bold text-indigo-500",children:(ae=n.username[0])==null?void 0:ae.toUpperCase()}),$&&o.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:o.jsx(b8,{className:"text-white"})})]})}),!$&&o.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full font-bold text-xs shadow-md border-2 border-white dark:border-slate-800",children:["Lvl ",((de=n.gamification)==null?void 0:de.level)||1]}),o.jsx("input",{type:"file",ref:B,className:"hidden",accept:"image/*",onChange:Te})]}),o.jsx("div",{className:"text-center md:text-left flex-1 w-full",children:$?o.jsxs("div",{className:"flex flex-col gap-3 max-w-sm mx-auto md:mx-0",children:[o.jsx("input",{value:Y,onChange:ue=>D(ue.target.value),className:"p-3 border rounded-xl dark:bg-slate-900 dark:border-slate-600 dark:text-white",placeholder:"Username"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:Ce,disabled:L,className:"flex-1 bg-indigo-600 text-white py-2 rounded-xl font-bold flex items-center justify-center gap-2",children:[L?o.jsx(Ln,{className:"animate-spin",size:16}):o.jsx(Bf,{size:16})," Simpan"]}),o.jsx("button",{onClick:()=>{J(!1),D(n.username),M(null)},className:"flex-1 border border-slate-300 dark:border-slate-600 py-2 rounded-xl font-bold dark:text-white",children:"Batal"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-2",children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:n.username}),o.jsx("button",{onClick:()=>J(!0),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full text-slate-400",children:o.jsx(L9,{size:16})})]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6 flex items-center justify-center md:justify-start gap-2",children:[o.jsx(s7,{size:16})," ",n.isGuest?"Guest User":"Verified Student"]}),o.jsx("div",{className:"flex gap-4 justify-center md:justify-start",children:o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-xl border border-indigo-100 dark:border-indigo-800",children:[o.jsx("div",{className:"text-xs text-indigo-500 font-bold uppercase",children:"XP Total"}),o.jsx("div",{className:"text-xl font-black text-indigo-700 dark:text-indigo-300",children:((ce=n.gamification)==null?void 0:ce.xp)||0})]})})]})})]}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(So,{size:20})," Performance Stats"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[{label:"Best UTBK",score:le("UTBK")},{label:"Best SKD",score:le("SKD")},{label:"Best TPA & TBI",score:le("TPA")},{label:"Best Psikotes",score:le("PSIKOTEST")},{label:"Best Kecermatan",score:le("KECERMATAN")},{label:"Best Benchmark",score:le("BENCHMARK")},{label:"Total Battles",score:((Ae=n.gamification)==null?void 0:Ae.battlesPlayed)||0},{label:"Battle Win Rate",score:`${(lt=n.gamification)!=null&&lt.battlesPlayed?Math.round((n.gamification.battlesWon||0)/n.gamification.battlesPlayed*100):0}%`}].map((ue,Pe)=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase mb-2",children:ue.label}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ue.score})]},Pe))})]}),a==="REQUESTS"&&o.jsx("div",{className:"space-y-3",children:p.length===0?o.jsx("div",{className:"text-center py-10 text-slate-400",children:"Tidak ada permintaan pertemanan."}):p.map(ue=>o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center font-bold text-indigo-600",children:ue.fromPhotoURL?o.jsx("img",{src:ue.fromPhotoURL,className:"w-full h-full rounded-full object-cover"}):ue.fromUsername[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:ue.fromUsername}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Level ",ue.fromLevel]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>pe(ue),className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:o.jsx(Yn,{size:20})}),o.jsx("button",{onClick:()=>Ue(ue),className:"p-2 bg-rose-100 text-rose-600 rounded-lg",children:o.jsx(Vr,{size:20})})]})]},ue.id))}),a==="FRIENDS"&&o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-8",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4",children:"Cari Teman"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Username...",value:T,onChange:ue=>E(ue.target.value),onKeyDown:ue=>ue.key==="Enter"&&q(),className:"flex-1 p-3 bg-slate-50 dark:bg-slate-900 border-none rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white"}),o.jsx("button",{onClick:q,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold",children:"Search"})]}),v.length>0&&o.jsx("div",{className:"mt-4 space-y-2",children:v.map(ue=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-900 rounded-xl",children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:ue.username}),o.jsxs("button",{onClick:()=>ie(ue),className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-lg text-xs font-bold flex items-center gap-1",children:[o.jsx(y7,{size:14})," Add"]})]},ue.uid))})]}),o.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(vu,{size:20})," Teman Saya"]}),o.jsx("div",{className:"space-y-3",children:u.length===0?o.jsx("div",{className:"text-center py-10 text-slate-400",children:"Belum ada teman."}):u.map(ue=>{const Pe=H(ue.lastActive);return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl border border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center font-bold text-indigo-600 overflow-hidden",children:ue.photoURL?o.jsx("img",{src:ue.photoURL,className:"w-full h-full object-cover"}):ue.username[0]}),o.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white dark:border-slate-800 ${Pe==="online"?"bg-emerald-500":"bg-slate-400"}`})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:ue.username}),o.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:["Lvl ",ue.level,"  ",o.jsx("span",{className:Pe==="online"?"text-emerald-500":"text-slate-400",children:Pe==="online"?"Online":"Offline"})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>ne(ue),className:"p-2 text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg",title:"Bandingkan Stats",children:o.jsx(_E,{size:18})}),o.jsxs("button",{disabled:Pe!=="online",className:"px-3 py-1.5 bg-rose-50 text-rose-600 dark:bg-rose-900/20 dark:text-rose-400 rounded-lg font-bold text-xs flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-rose-100",children:[o.jsx(si,{size:14})," Duel"]}),o.jsx("button",{onClick:()=>he(ue.uid),className:"p-2 text-slate-400 hover:text-rose-500 transition",children:o.jsx(Io,{size:18})})]})]},ue.uid)})})]})]})})},LE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-white leading-relaxed"})},IB=({userProfile:n,onBack:e,category:t})=>{var O;const[s,a]=G.useState("LOBBY"),[l,u]=G.useState(""),[h,p]=G.useState(""),[f,v]=G.useState(null),[_,T]=G.useState(!1),[E,I]=G.useState(""),[k,C]=G.useState(0),[j,R]=G.useState(3),[z,$]=G.useState(!1),J=G.useRef(null);G.useEffect(()=>()=>{J.current&&J.current()},[]);const Y=async()=>{T(!0),$(!0);try{const B=await on("DRILL",t,`1v1 Battle Mode - ${t}. Fast paced questions.`,10,[],t==="SKD"?"CPNS":void 0),U=await HV(n.uid,n.username,t,B);u(U),N(U)}catch{I("Gagal membuat room. Coba lagi.")}finally{T(!1),$(!1)}},D=async()=>{if(h){T(!0);try{await FV(h.toUpperCase(),n.uid,n.username),u(h.toUpperCase()),N(h.toUpperCase())}catch(B){I(B.message||"Gagal join room.")}finally{T(!1)}}},N=B=>{J.current&&J.current(),J.current=qV(B,U=>{v(U),U.status==="STARTING"&&s==="LOBBY"&&(a("GAME"),Z.play("success")),U.status==="FINISHED"&&(a("RESULT"),Z.play("finish"))})},M=async B=>{if(!f)return;const U=f.questions[k],Te=B===U.correctAnswer,Ce=Te?10:-2,q=f.scores[n.uid]||0,ie=Math.max(0,q+Ce);Te?Z.play("success"):Z.play("error"),await KV(f.id,n.uid,ie,k+1),k<f.questions.length-1?C(pe=>pe+1):L(ie)},L=async B=>{if(!f)return;const U=f.hostUid===n.uid?f.guestUid:f.hostUid;if(!U)return;const Te=f.scores[U]||0;if((f.progress[U]||0)>=f.questions.length){const q=B>Te?n.uid:Te>B?U:"DRAW";await $V(f.id,q)}};if(s==="LOBBY")return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col p-6",children:[o.jsxs("button",{onClick:e,className:"self-start flex items-center text-slate-400 hover:text-white mb-8",children:[o.jsx(dt,{size:20,className:"mr-2"})," Quit Battle"]}),o.jsxs("div",{className:"max-w-md w-full mx-auto text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(79,70,229,0.5)] animate-pulse",children:o.jsx(pA,{size:40})}),o.jsx("h1",{className:"text-4xl font-black mb-2 uppercase italic tracking-wider",children:"Battle Arena"}),o.jsxs("p",{className:"text-slate-400 mb-8",children:[t," 1v1 Duel"]}),l?o.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl border border-indigo-500/50 shadow-2xl",children:[o.jsx("h2",{className:"text-xl font-bold mb-6 text-slate-300",children:"Waiting for Opponent..."}),o.jsxs("div",{className:"bg-slate-900 p-6 rounded-xl mb-6 border border-slate-700",children:[o.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-widest mb-2",children:"Room Code"}),o.jsxs("div",{className:"text-5xl font-mono font-black text-indigo-400 tracking-widest flex items-center justify-center gap-4",children:[l,o.jsx("button",{onClick:()=>navigator.clipboard.writeText(l),className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(gu,{size:20})})]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-4 animate-pulse",children:[o.jsx(vu,{size:24,className:"text-emerald-400"}),o.jsx("span",{className:"text-lg font-bold",children:"1/2 Players"})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Create Room"}),o.jsxs("button",{onClick:Y,disabled:_,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-bold transition flex items-center justify-center gap-2",children:[_?o.jsx(Ln,{className:"animate-spin"}):o.jsx(si,{size:20}),"Host Match"]})]}),o.jsxs("div",{className:"relative flex py-2 items-center",children:[o.jsx("div",{className:"flex-grow border-t border-slate-700"}),o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-500 text-xs",children:"OR JOIN"}),o.jsx("div",{className:"flex-grow border-t border-slate-700"})]}),o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4",children:"Join Room"}),o.jsx("input",{type:"text",placeholder:"Enter Room Code",value:h,onChange:B=>p(B.target.value.toUpperCase()),className:"w-full bg-slate-900 border border-slate-600 rounded-xl p-4 text-center font-mono text-xl tracking-widest mb-4 focus:border-indigo-500 outline-none"}),o.jsx("button",{onClick:D,disabled:!h||_,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-500 rounded-xl font-bold transition disabled:opacity-50",children:"Join Fight"})]}),E&&o.jsx("p",{className:"text-rose-500 font-bold animate-pulse",children:E})]})]})]});if(s==="GAME"&&f){const B=f.hostUid===n.uid,U=B?f.guestUid:f.hostUid,Te=B?f.guestName:f.hostName,Ce=f.scores[n.uid]||0,q=U&&f.scores[U]||0,ie=U&&f.progress[U]||0,pe=f.questions[k],Ue=k>=f.questions.length||f.progress[n.uid]>=f.questions.length;return o.jsxs("div",{className:"min-h-screen bg-slate-900 text-white flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-800 p-4 shadow-md flex justify-between items-center z-10 border-b border-slate-700",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs text-indigo-400 font-bold",children:"YOU"}),o.jsx("span",{className:"text-2xl font-black",children:Ce})]}),o.jsx("div",{className:"flex flex-col items-center",children:o.jsx("div",{className:"text-xs font-bold bg-rose-600 px-3 py-1 rounded-full animate-pulse",children:"LIVE"})}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx("span",{className:"text-xs text-rose-400 font-bold truncate max-w-[100px]",children:Te||"Opponent"}),o.jsx("span",{className:"text-2xl font-black",children:q})]})]}),o.jsxs("div",{className:"h-2 bg-slate-700 w-full flex",children:[o.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-500",style:{width:`${k/f.questions.length*50}%`}}),o.jsx("div",{className:"h-full bg-rose-500 transition-all duration-500 ml-auto",style:{width:`${ie/f.questions.length*50}%`}})]}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6 relative",children:Ue?o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Waiting for results..."}),o.jsx(Ln,{size:48,className:"animate-spin text-indigo-500 mx-auto"})]}):o.jsxs("div",{className:"w-full max-w-2xl",children:[o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 mb-6 shadow-xl",children:[o.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:["Question ",k+1,"/",f.questions.length]}),o.jsx("h3",{className:"text-xl md:text-2xl font-bold leading-relaxed",children:o.jsx(LE,{text:pe.content})})]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:(O=pe.options)==null?void 0:O.map((he,H)=>o.jsx("button",{onClick:()=>M(he),className:"p-4 rounded-xl border-2 border-slate-700 bg-slate-800 hover:bg-indigo-600 hover:border-indigo-500 hover:scale-[1.02] transition-all text-left font-medium",children:o.jsx(LE,{text:he})},H))})]})})]})}if(s==="RESULT"&&f){const B=f.winner===n.uid,U=f.winner==="DRAW";return o.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6 text-white text-center",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl ${B?"bg-emerald-500 shadow-emerald-500/50":"bg-rose-500 shadow-rose-500/50"}`,children:B?o.jsx(Ds,{size:64}):U?o.jsx(vu,{size:64}):o.jsx(Vr,{size:64})}),o.jsx("h1",{className:"text-5xl font-black mb-2 italic uppercase",children:B?"VICTORY!":U?"DRAW":"DEFEAT"}),o.jsx("p",{className:"text-slate-400 mb-8 text-lg",children:B?"+100 XP":"+20 XP"}),o.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-4 mb-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"You"}),o.jsx("div",{className:"text-3xl font-black text-indigo-400",children:f.scores[n.uid]})]}),o.jsx("div",{className:"text-xl font-black text-slate-600",children:"VS"}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase",children:"Opponent"}),o.jsx("div",{className:"text-3xl font-black text-rose-400",children:f.scores[f.hostUid===n.uid?f.guestUid:f.hostUid]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-white text-slate-900 font-bold rounded-xl hover:scale-105 transition",children:"Back to Menu"})]})]})})}return null},RB=({user:n})=>{var s,a;const[e,t]=G.useState(!1);return G.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?o.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):o.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:[" ",((a=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:a.toUpperCase())||"T"," "]})},EA=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return o.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},MB=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",a=e==="success"?o.jsx(Yn,{size:20}):e==="error"?o.jsx(lx,{size:20}):o.jsx(d9,{size:20});return G.useEffect(()=>{const l=setTimeout(t,3e3);return()=>clearTimeout(l)},[t]),o.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[" ",a," ",o.jsx("span",{className:"font-bold text-sm",children:n})," ",o.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:o.jsx(Vr,{size:18})})," "]})},DB=({session:n,onResume:e,onDiscard:t})=>{const s=Math.round(Object.keys(n.answerMap).length/n.questions.length*100);return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700 text-center",children:[" ",o.jsxs("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:[" ",o.jsx(Du,{size:32})," "]})," ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Tes Belum Selesai"})," ",o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:[" Ditemukan sesi ",o.jsx("b",{children:n.packageTitle||n.category})," yang belum diselesaikan. Ingin melanjutkan? "]})," ",o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-6 text-left",children:[" ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[s,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-200 dark:bg-slate-600 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex flex-col gap-3",children:[" ",o.jsxs("button",{onClick:e,className:"w-full py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" ",o.jsx(jo,{size:20})," Lanjutkan Tes "]})," ",o.jsxs("button",{onClick:t,className:"w-full py-3.5 bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition flex items-center justify-center gap-2",children:[" ",o.jsx(Io,{size:20})," Hapus & Menu Utama "]})," "]})," "]})," "]})},PB=()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[" ",o.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"})," ",o.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"})," ",o.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"})," ",o.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})," "]}),jB=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[" ",t&&o.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[" ",o.jsx(Ln,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"})," ",o.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})," "]})," ",o.jsxs("div",{className:"mb-8 flex justify-center",children:[" ",o.jsx("img",{src:Th,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})," "]})," ",o.jsxs("div",{className:"text-center mb-8",children:[" ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})," "]})," ",o.jsxs("div",{className:"space-y-4",children:[" ",o.jsxs("button",{onClick:n,className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[" ",o.jsx("div",{className:"absolute left-4",children:o.jsx(PB,{})})," ",o.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})," "]})," ",o.jsxs("div",{className:"relative flex py-2 items-center",children:[" ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," ",o.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"})," ",o.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})," "]})," ",o.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[" Masuk sebagai Tamu ",o.jsx(_r,{size:20})," "]})," ",o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:" *Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard. "})," "]})," "]})," "]}),LB=({onSubmit:n,isLoading:e})=>{const[t,s]=G.useState(""),[a,l]=G.useState(""),u=h=>{if(h.preventDefault(),t.length<3){l("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){l("Hanya huruf, angka, dan underscore (_).");return}n(t)};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:[" ",o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[" ",o.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"})," ",o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."})," ",o.jsxs("form",{onSubmit:u,children:[" ",o.jsxs("div",{className:"mb-4",children:[" ",o.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"})," ",o.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"Username_Unik",value:t,onChange:h=>{s(h.target.value.replace(/\s/g,"")),l("")},autoFocus:!0})," ",a&&o.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:a})," "]})," ",o.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[" ",e?o.jsx(Ln,{className:"animate-spin"}):o.jsx(Yn,{size:20})," Simpan & Lanjut "]})," "]})," "]})," "]})},UB=({result:n,feature:e,onBack:t})=>o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:o.jsxs("div",{className:"max-w-3xl w-full",children:[o.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[o.jsx(dt,{size:18})," Kembali"]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(Lf,{size:28,className:"text-indigo-600"})," Hasil ",e]}),o.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:o.jsx(EA,{text:n})})]})]})}),OB=({questions:n,onComplete:e})=>{const[t,s]=G.useState(0),[a,l]=G.useState(""),[u,h]=G.useState(null),[p,f]=G.useState(!1),[v,_]=G.useState([]),T=n[t],E=async()=>{if(a.trim()){f(!0);try{const k=await fP(T.content,a);h(k)}catch{alert("Gagal evaluasi.")}finally{f(!1)}}},I=()=>{const k={questionId:T.id,selectedAnswer:a,isCorrect:!0,scoreEarned:(u==null?void 0:u.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:u||void 0},C=[...v,k];_(C),l(""),h(null),t<n.length-1?s(t+1):e(C)};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),u?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",u.score,"/100"]}),o.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:u.toneAnalysis})]}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[o.jsx("b",{children:"Feedback:"})," ",u.feedback]}),o.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[o.jsx("b",{children:"Saran Jawaban:"})," ",u.improvedAnswer]})]}),o.jsx("button",{onClick:I,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:a,onChange:k=>l(k.target.value)}),o.jsxs("button",{onClick:E,disabled:p||!a,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[p?o.jsx(Ln,{className:"animate-spin"}):o.jsx(Vf,{size:18})," Submit Jawaban"]})]})]})})},VB=({flashcards:n,onFinish:e})=>{const[t,s]=G.useState(0),a=l=>{t<n.length-1?s(t+1):e()};return n.length===0?o.jsx("div",{children:"No Flashcards"}):o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[o.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[o.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:o.jsx(dt,{size:20})}),o.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),o.jsx(C7,{data:n[t],onNext:a})]})},BB=({topic:n,onFinish:e})=>{const[t,s]=G.useState(""),[a,l]=G.useState(null),[u,h]=G.useState(!1),p=async()=>{h(!0);try{const f=await mP(n,t);l(f)}catch{alert("Error")}finally{h(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",o.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun)."]}),a?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4",children:o.jsxs("div",{className:`text-2xl font-bold ${a.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[a.understandingScore,"/100"]})}),o.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[o.jsxs("p",{children:[o.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",a.simplificationQuality]}),o.jsxs("p",{children:[o.jsx("b",{children:"Konsep yang Terlewat:"})," ",a.missingConcepts.join(", ")||"Tidak ada"]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[o.jsx("b",{children:"Koreksi / Saran:"})," ",a.correction]})]})]}),o.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:f=>s(f.target.value)}),o.jsx("button",{onClick:p,disabled:u||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:u?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},GB=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,a]=G.useState(0);return o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[o.jsx("div",{className:"flex justify-center mb-8",children:t.map((l,u)=>o.jsxs("div",{className:`flex items-center ${u<t.length-1?"w-full":""}`,children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${u<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:l[0]}),u<t.length-1&&o.jsx("div",{className:`h-1 flex-1 ${u<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},l))}),o.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),o.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Lakukan tahap ",t[s],' untuk materi "',n,'".']}),o.jsx("button",{onClick:()=>{s<4?a(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},UE=()=>{const n=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(n.has(t))return;n.add(t)}return t}},zB=({sessions:n,onBack:e,onResume:t,onDelete:s,loading:a})=>{const l=h=>{switch(h){case"UTBK":return{icon:Mu,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:Uf,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Rs,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:si,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:Fl,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};default:return{icon:_i,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},u=h=>{const p=Math.floor(h/3600),f=Math.floor(h%3600/60),v=Math.floor(h%60);return`${p>0?p+":":""}${f.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:[" ",o.jsxs("div",{className:"max-w-5xl mx-auto",children:[" ",o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[" ",o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:o.jsx(dt,{size:20})})," ",o.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Lanjutkan Sesi Tersimpan"})," "]})," ",a?o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(Ln,{className:"animate-spin text-indigo-600 w-8 h-8"})}):n.length===0?o.jsxs("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[" ",o.jsx(Du,{size:48,className:"mx-auto mb-4 opacity-20"})," ",o.jsx("p",{children:"Tidak ada sesi tersimpan."})," "]}):o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[" ",n.map(h=>{const p=Math.round(Object.keys(h.answerMap).length/h.questions.length*100),f=l(h.category),v=f.icon;return o.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-3xl border-2 ${f.border} shadow-sm flex flex-col gap-4 animate-fade-in-up hover:shadow-md transition-all`,children:[" ",o.jsxs("div",{className:"flex justify-between items-start",children:[" ",o.jsxs("div",{className:`p-3 rounded-xl ${f.bg} ${f.color}`,children:[" ",o.jsx(v,{size:24})," "]})," ",o.jsxs("div",{className:"text-right",children:[" ",o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1",children:"SISA WAKTU"})," ",o.jsxs("div",{className:`font-mono text-xl font-bold ${h.timeLeft<300?"text-rose-500":"text-slate-800 dark:text-white"}`,children:[" ",u(h.timeLeft)," "]})," "]})," "]})," ",o.jsxs("div",{children:[" ",o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[" ",o.jsxs("span",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",title:h.packageTitle||h.category,children:[" ",h.packageTitle||h.category," "]})," "]})," ",o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block mb-3",children:[" ",new Date(h.timestamp).toLocaleDateString(),"  ",h.questions.length," Soal "]})," ",o.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1",children:[" ",o.jsx("span",{children:"Progress"})," ",o.jsxs("span",{children:[p,"%"]})," "]})," ",o.jsxs("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full overflow-hidden",children:[" ",o.jsx("div",{className:`h-full ${h.category==="UTBK"?"bg-rose-500":"bg-indigo-500"}`,style:{width:`${p}%`}})," "]})," "]})," ",o.jsxs("div",{className:"flex gap-2 mt-2",children:[" ",o.jsxs("button",{onClick:()=>s(h.id),className:"p-3 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition border border-rose-200 dark:border-rose-900/50",children:[" ",o.jsx(Io,{size:20})," "]})," ",o.jsxs("button",{onClick:()=>t(h),className:"flex-1 px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[" ",o.jsx(jo,{size:18,fill:"currentColor"})," Lanjutkan "]})," "]})," "]},h.id||h.timestamp)})," "]})," "]})," "]})},HB=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:a,onStartTesKoran:l,onStartTesKecermatan:u,onGeneralInputSubmit:h,generalInput:p,setGeneralInput:f,isReadingMaterial:v,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:E,weakTopicsCount:I,loading:k,skdStream:C,onSkdStreamSelect:j,onHistory:R,onStartGeneralSession:z,onStartSkripsiSession:$,username:J,isDarkMode:Y,onToggleDarkMode:D,tpaStream:N,onTpaStreamSelect:M,onOpenAcademicHub:L,onBattle:O}=n,[B,U]=G.useState(""),[Te,Ce]=G.useState(null),[q,ie]=G.useState("MEDIUM"),[pe,Ue]=G.useState("MEDIUM"),[he,H]=G.useState(!1),ne=G.useRef(null),[le,ae]=G.useState(""),[de,ce]=G.useState(5),[Ae,lt]=G.useState("Medium"),ue=Me=>{var Fe;const Qe=(Fe=Me.target.files)==null?void 0:Fe[0];if(Qe){if(Qe.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}Ce(Qe.name),U(""),H(!0);const ct=new FileReader;ct.onload=kt=>{var $t;const Kt=(($t=kt.target)==null?void 0:$t.result).split(",")[1];setTimeout(()=>{f&&f({type:"pdf",content:Kt,title:Qe.name,lengthPreference:q,difficultyPreference:pe}),H(!1)},800)},ct.readAsDataURL(Qe)}},Pe=()=>{(p==null?void 0:p.type)==="pdf"?h({...p,lengthPreference:q,difficultyPreference:pe}):B?h({type:"text",content:B,title:"Input Manual",lengthPreference:q,difficultyPreference:pe}):alert("Mohon masukkan teks atau upload PDF.")},Je=Me=>{const Qe=Me.filter(Fe=>Fe.toLowerCase().includes(le.toLowerCase()));return o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),o.jsxs("div",{className:"mb-4 relative",children:[o.jsx(bh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),o.jsx("input",{type:"text",placeholder:"Cari topik...",value:le,onChange:Fe=>ae(Fe.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Qe.length>0?Qe.map(Fe=>o.jsx("button",{onClick:()=>{Z.play("tap"),T(Fe)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${E===Fe?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Fe},Fe)):o.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),E&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),o.jsxs("select",{value:de,onChange:Fe=>ce(Number(Fe.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"5",children:"5 Soal"}),o.jsx("option",{value:"10",children:"10 Soal"}),o.jsx("option",{value:"15",children:"15 Soal"}),o.jsx("option",{value:"20",children:"20 Soal"})]})]}),o.jsxs("div",{className:"flex-1 w-full",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),o.jsxs("select",{value:Ae,onChange:Fe=>lt(Fe.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[o.jsx("option",{value:"Easy",children:"Mudah"}),o.jsx("option",{value:"Medium",children:"Sedang"}),o.jsx("option",{value:"Hard",children:"Sulit"}),o.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),s(qe.PRACTICE,Ae,de)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(SE,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&E&&o.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:o.jsxs("button",{onClick:()=>{Z.play("click"),s(qe.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[o.jsx(Vf,{size:20})," Mulai Sesi Wawancara"]})})]})};return o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors duration-300",children:[o.jsx(k7,{}),o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("button",{onClick:()=>{Z.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[o.jsx(dt,{size:18,className:"mr-2"})," Kembali"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[D&&o.jsx("button",{onClick:()=>{D()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:Y?o.jsx(mA,{size:16}):o.jsx(ox,{size:16})}),o.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[o.jsx(gA,{size:12})," ",J]})]})]}),o.jsx("div",{className:"flex justify-between items-end mb-8",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:e==="TPA"?"Seleksi Lanjutan":e+" Dashboard"}),o.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),k?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[o.jsx(Ln,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),o.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:o.jsx(R7,{})})]}):o.jsxs(o.Fragment,{children:[e==="KECERMATAN"&&o.jsx("div",{className:"animate-fade-in-up",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),u("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:o.jsx(ns,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:o.jsx(_i,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:o.jsx(W9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:o.jsx(n9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:o.jsx(jr,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),u("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:o.jsx(g9,{size:24})}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&o.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(Lf,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),o.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:B,onChange:Me=>U(Me.target.value)}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),$&&$("TITLE_IDEAS",B)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[o.jsx(Rs,{size:24})," Ide Judul"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),$&&$("OUTLINE",B)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[o.jsx(_i,{size:24})," Buat Outline"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),$&&$("METHODOLOGY",B)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[o.jsx(bh,{size:24})," Cek Metodologi"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),$&&$("PARAPHRASE",B)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[o.jsx(q8,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&o.jsx("div",{className:"space-y-8 animate-fade-in-up",children:v?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(qp,{size:20})," Materi Belajar"]}),o.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(p==null?void 0:p.type)==="pdf"&&p.content&&o.jsx("div",{className:"mb-6",children:o.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),o.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:o.jsx(EA,{text:(p==null?void 0:p.extractedText)||(p==null?void 0:p.content)||""})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:F2.map(Me=>{const Fe={Brain:Rs,Repeat:H9,MessageCircle:w9,Share2:Z9,Search:bh,GraduationCap:Mu,BookOpen:qp,PenTool:SE}[Me.icon]||Rs;return o.jsxs("button",{onClick:()=>{Z.play("click"),z(Me.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[o.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:o.jsx(Fe,{size:24})}),o.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:Me.name}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Me.desc})]},Me.id)})})]})]}):o.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(cx,{size:20})," Input Materi"]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:Te?`PDF Terpilih: ${Te}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:B,disabled:!!Te,onChange:Me=>{U(Me.target.value)}}),o.jsx("input",{type:"file",ref:ne,accept:"application/pdf",className:"hidden",onChange:ue}),o.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${Te?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var Me;return(Me=ne.current)==null?void 0:Me.click()},children:[o.jsx(_i,{size:20}),o.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),Te&&o.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{size:16})," ",o.jsxs("span",{children:["File siap: ",o.jsx("b",{children:Te})]})]}),o.jsx("button",{onClick:()=>{Ce(null),f&&f(null),ne.current&&(ne.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:o.jsx(Io,{size:16})})]}),he?o.jsxs("div",{className:"mb-6 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[o.jsx(Ln,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),o.jsx(xo,{height:"h-[300px]",className:"rounded-xl"})]}):(p==null?void 0:p.type)==="pdf"&&p.content&&o.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),o.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),o.jsxs("select",{value:q,onChange:Me=>ie(Me.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),o.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),o.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),o.jsxs("select",{value:pe,onChange:Me=>Ue(Me.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[o.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),o.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),o.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),o.jsx("button",{onClick:()=>{Z.play("click"),Pe()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(kr,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),o.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),o.jsx(_r,{className:"group-hover:translate-x-2 transition-transform"})]}),Je(q2)]}),e==="TPA"&&o.jsx(o.Fragment,{children:N?o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>{Z.play("click"),M&&M(null)},className:"underline hover:text-indigo-600",children:"Ubah Jalur"}),o.jsx(_r,{size:14}),o.jsx("b",{className:"uppercase",children:N==="TPA_TBI"?"TPA & TBI":"Psikotes PKN STAN"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(kr,{size:24,className:"text-amber-400"}),"Simulasi ",N==="TPA_TBI"?"TPA & TBI":"Psikotes"," Full"]}),o.jsx("p",{className:"text-slate-400 text-sm mt-1",children:N==="TPA_TBI"?"65 Soal. 100 Menit.":"TIU, Logika Gambar, Kepribadian."})]}),o.jsx(_r,{className:"group-hover:translate-x-2 transition-transform"})]}),Je(N==="TPA_TBI"?$2:Y2)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 animate-fade-in-up",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),M&&M("TPA_TBI")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-blue-500 dark:hover:border-blue-500 transition text-center group shadow-sm",children:[o.jsx(Rs,{size:48,className:"mx-auto mb-4 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"TPA & TBI"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Pascasarjana & Umum"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),M&&M("PSIKOTEST_KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 transition text-center group shadow-sm",children:[o.jsx(Uf,{size:48,className:"mx-auto mb-4 text-purple-600 dark:text-purple-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Seleksi Lanjutan I PKN STAN"})]})]})}),e==="PSIKOTEST"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),l()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[o.jsx(g8,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[o.jsx(Rs,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),o.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),Je(J2)]})]}),e==="INTERVIEW"&&Je(Q2),e==="SKD"&&(C?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[o.jsx("button",{onClick:()=>j(null),className:"underline",children:"Ubah Jalur"})," ",o.jsx(_r,{size:14})," ",o.jsx("b",{children:C})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(kr,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),o.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),o.jsx(_r,{className:"group-hover:translate-x-2 transition-transform"})]}),Je(K2)]}):o.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),j("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(f9,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),j("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[o.jsx(m8,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&o.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),s(qe.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(si,{className:"text-amber-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),s(qe.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(Rs,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),I>0&&o.jsxs("button",{onClick:()=>{Z.play("click"),s(qe.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[o.jsx(jr,{className:"text-rose-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[I," Topik Lemah"]})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),L&&L()},className:"p-4 bg-white dark:bg-slate-800 border border-emerald-200 dark:border-emerald-900 rounded-xl hover:border-emerald-500 hover:shadow-md transition text-left",children:[o.jsx(So,{className:"text-emerald-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Analisis Akademik"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Target Skor & Review"})]}),o.jsxs("button",{onClick:()=>{Z.play("click"),O&&O()},className:"p-4 bg-white dark:bg-slate-800 border border-indigo-200 dark:border-indigo-900 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[o.jsx(pA,{className:"text-indigo-500 mb-2"}),o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Battle Arena"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"1v1 Duel"})]})]})]})]})]})]})};function FB(){var Ba;const[n,e]=G.useState("SPLASH"),[t,s]=G.useState(null),[a,l]=G.useState(!1),[u,h]=G.useState(!0),[p,f]=G.useState("DASHBOARD"),[v,_]=G.useState(!1),[T,E]=G.useState(null),[I,k]=G.useState(null),[C,j]=G.useState(""),[R,z]=G.useState([]),[$,J]=G.useState(!1),[Y,D]=G.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1}),[N,M]=G.useState(null),[L,O]=G.useState(!1),[B,U]=G.useState(null),[Te,Ce]=G.useState(!1),[q,ie]=G.useState(""),[pe,Ue]=G.useState(null),[he,H]=G.useState(null),[ne,le]=G.useState(null),[ae,de]=G.useState(new Set),[ce,Ae]=G.useState("ANGKA"),[lt,ue]=G.useState(null),[Pe,Je]=G.useState(null),[Me,Qe]=G.useState([]),[Fe,ct]=G.useState(null),[kt,Kt]=G.useState(null),[$t,be]=G.useState(""),[me,Ee]=G.useState([]),[nt,Rt]=G.useState(null),[pt,cn]=G.useState([]),[Ps,Nn]=G.useState(!1),[vs,js]=G.useState(void 0),[Xi,Ei]=G.useState([]),[en,pn]=G.useState(!1),[Xt,Jn]=G.useState(null),[zt,ii]=G.useState(void 0),[La,Br]=G.useState(!1),[Yt,Vn]=G.useState([]),[tn,Ls]=G.useState(null),[cs,us]=G.useState(null),ut=(Q,Se)=>us({msg:Q,type:Se}),[Gr,Qn]=G.useState([...Kb,...$b,...Yb,...Wb,...Zb,...Jb,...Qb,...Xb]),wi=async Q=>{try{const Se=localStorage.getItem("fajmuls_active_session");if(Se){const Oe=JSON.parse(Se);if(Oe.uid===Q&&Date.now()-Oe.timestamp<1440*60*1e3)return Jn(Oe),!0;localStorage.removeItem("fajmuls_active_session")}}catch(Se){console.error("Failed to parse saved session",Se),localStorage.removeItem("fajmuls_active_session")}return!1},sc=Q=>{s(Q.category),Ue(Q.mode),Ee(Q.questions),Rt(Q.drillContent),Q.skdStream&&H(Q.skdStream),Q.tpaStream&&le(Q.tpaStream),Q.packageTitle&&ii(Q.packageTitle),js(Q),Jn(null),e("SESSION")},Zi=()=>{localStorage.removeItem("fajmuls_active_session"),Jn(null)},zr=async()=>{if(Z.play("click"),!(N!=null&&N.uid)||N.isGuest){ut("Fitur ini hanya untuk pengguna login.","info");return}pn(!0),e("RESUME_LIST");try{const Q=await CV(N.uid);Ei(Q)}catch{ut("Gagal memuat sesi tersimpan.","error")}finally{pn(!1)}},Ua=async Q=>{Z.play("click"),sc(Q),Q.id&&(N!=null&&N.uid)&&await pE(N.uid,Q.id)},ea=async Q=>{Z.play("click"),N!=null&&N.uid&&(await pE(N.uid,Q),Ei(Se=>Se.filter(Oe=>Oe.id!==Q&&String(Oe.timestamp)!==Q)),ut("Sesi dihapus.","success"))};G.useEffect(()=>{const Q=localStorage.getItem("fajmuls_settings");Q?D(JSON.parse(Q)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&D(Oe=>({...Oe,darkMode:!0}));const Se=TV(async Oe=>{if(h(!0),Oe)try{const Be=await Fp(Oe.uid);if(Be){let we=Be;if(Be.gamification){const Xe=yV(Be.gamification);Xe.streak!==Be.gamification.streak&&(await mE(Oe.uid,Xe),we={...Be,gamification:Xe})}M({uid:Oe.uid,username:we.username,email:Oe.email,photoURL:we.photoURL||Oe.photoURL,gamification:we.gamification});const Le=await iA(Oe.uid);Vn(Le),await wi(Oe.uid),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else M({uid:Oe.uid,username:"",email:Oe.email,photoURL:Oe.photoURL}),e("USERNAME_SETUP")}catch(Be){console.error("Profile fetch error",Be)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const we=localStorage.getItem("fajmuls_guest_username"),Le="guest-"+(we||"user");M({uid:Le,username:we||"Tamu",email:null,isGuest:!0});const Xe=localStorage.getItem("fajmuls_guest_history");if(Xe)try{Vn(JSON.parse(Xe))}catch{}await wi(Le),(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");h(!1),O(!1)});return()=>Se()},[]),G.useEffect(()=>{if(C.trim().length===0){z([]),J(!1);return}const Q=C.toLowerCase(),Se=[];ip.forEach(Be=>{(Be.name.toLowerCase().includes(Q)||Be.desc.toLowerCase().includes(Q))&&Se.push({id:Be.id,label:Be.name,type:"CATEGORY"})}),[{id:"TES_KORAN",label:"Tes Koran / Pauli"},{id:"REACTION",label:"Reaction Time (Benchmark)"},{id:"AIM",label:"Aim Trainer (Benchmark)"},{id:"SEQUENCE",label:"Sequence Memory (Benchmark)"},{id:"CHIMP",label:"Chimp Test (Benchmark)"},{id:"VISUAL",label:"Visual Memory (Benchmark)"},{id:"NUMBER",label:"Number Memory (Benchmark)"},{id:"VERBAL",label:"Verbal Memory (Benchmark)"},{id:"TYPING",label:"Typing Test (Benchmark)"},{id:"BRIDGE",label:"Bridge Memory (Benchmark)"},{id:"MATCH",label:"Match Memory (Benchmark)"},{id:"KECERMATAN_ANGKA",label:"Kecermatan Angka Hilang"},{id:"KECERMATAN_HURUF",label:"Kecermatan Huruf Hilang"},{id:"KECERMATAN_SIMBOL",label:"Kecermatan Simbol Hilang"},{id:"KECERMATAN_SAMA_BEDA",label:"Kecermatan Sama Beda"},{id:"KECERMATAN_MATCHING",label:"Kecermatan Matching"},{id:"KECERMATAN_GROUPING",label:"Kecermatan Grouping"},{id:"UTBK_PU",label:"UTBK Penalaran Umum"},{id:"UTBK_PBM",label:"UTBK Pemahaman Bacaan & Menulis"},{id:"SKD_TWK",label:"SKD Tes Wawasan Kebangsaan"},{id:"SKD_TIU",label:"SKD Tes Intelegensia Umum"},{id:"SKD_TKP",label:"SKD Tes Karakteristik Pribadi"}].forEach(Be=>{Be.label.toLowerCase().includes(Q)&&Se.push({id:Be.id,label:Be.label,type:"FEATURE"})}),z(Se),J(Se.length>0)},[C]);const ai=Q=>{if(Z.play("click"),j(""),J(!1),Q.type==="CATEGORY")Mn(Q.id);else if(Q.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if(Q.id.startsWith("KECERMATAN_")){s("KECERMATAN");const Se=Q.id.replace("KECERMATAN_","");Ss(Se)}else Q.id.startsWith("UTBK_")?Mn("UTBK"):Q.id.startsWith("SKD_")?Mn("SKD"):(s("BENCHMARK"),ue(Q.id),e("BENCHMARK"))},Lo=async()=>{Br(!0);const Q=[...Kb,...$b,...Yb,...Wb,...Zb,...Jb,...Qb,...Xb];try{const Se=await PV(),Oe=new Set(Q.map(we=>we.id)),Be=Se.filter(we=>!Oe.has(we.id));Qn([...Q,...Be])}catch(Se){console.error("Failed to load cloud packages",Se),Qn(Q),ut("Gagal memuat paket online. Menggunakan data offline.","error")}finally{Br(!1)}};G.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(Y)),Y.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),Z.syncSettings(Y)},[Y]);const bs=async()=>{O(!0);try{const Q=await SV();await Fp(Q.uid)||(M({uid:Q.uid,username:"",email:Q.email,photoURL:Q.photoURL}),e("USERNAME_SETUP"))}catch{ut("Gagal login dengan Google.","error"),O(!1)}},_s=()=>{Z.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),M({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const Q=localStorage.getItem("fajmuls_guest_history");if(Q)try{Vn(JSON.parse(Q))}catch{}else Vn([]);e("HOME")},nn=async Q=>{if(N!=null&&N.uid){O(!0);try{if(!await wV(Q)){ut("Username sudah dipakai. Pilih yang lain.","error"),O(!1);return}await NV(N.uid,{username:Q,email:N.email||"",photoURL:N.photoURL||""}),M(Oe=>Oe?{...Oe,username:Q,gamification:Qh}:null),Vn([]),Z.play("success"),e("HOME")}catch{ut("Gagal membuat profil.","error")}finally{O(!1)}}},gn=async()=>{Z.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),N!=null&&N.isGuest||await EV(),M(null),Vn([]),e("LOGIN")},Us=async Q=>{const Se=[Q,...Yt];Vn(Se),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(Se,UE())):N!=null&&N.uid&&await gE(N.uid,Q)},Oa=async Q=>{const Se=Yt.filter(Oe=>Oe.id!==Q);Vn(Se),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(Se)):N!=null&&N.uid&&await RV(N.uid,Q),ut("Riwayat berhasil dihapus.","success"),Z.play("click")},Uo=async Q=>{if(N!=null&&N.isGuest){Q.username&&(M(Se=>Se?{...Se,username:Q.username}:null),localStorage.setItem("fajmuls_guest_username",Q.username),ut("Nama Tamu diubah.","success"));return}if(N!=null&&N.uid)try{await AV(N.uid,Q),M(Se=>Se?{...Se,...Q}:null),ut("Profil berhasil diperbarui!","success")}catch(Se){ut(Se.message||"Gagal memperbarui profil.","error")}},Oo=async Q=>{Nn(!0);try{const Se=await pP(Q);U({...Q,extractedText:Se}),Ce(!0)}catch{ut("Gagal memproses materi. Coba lagi.","error")}finally{Nn(!1)}},Vo=async(Q,Se)=>{if(!Se.trim()){ut("Mohon isi judul atau topik.","error");return}Nn(!0),Kt(Q);try{const Oe=await gP(Se,Q);be(Oe),e("SESSION")}catch{ut("Gagal generate konten skripsi.","error")}finally{Nn(!1)}},Os=async Q=>{if(!B){ut("Materi hilang. Silakan input ulang.","error");return}Nn(!0),Je(Q),Ue(qe.DRILL);try{if(Q==="ACTIVE_RECALL"||Q==="PBL"||Q==="PRACTICE"||Q==="TEACHING"){const Se=await on(qe.DRILL,"GENERAL",B,5,[],void 0,Q);Ee(Se)}else if(Q==="SPACED_REPETITION"){const Se=await xP(B);Qe(Se)}else if(Q==="MIND_MAP"){const Se=await yP(B);ct(Se)}e("SESSION")}catch{ut("Gagal memuat materi AI.","error")}finally{Nn(!1)}},Va=Q=>{if(Q.length===0){ut("Tidak ada soal salah untuk dikerjakan.","info");return}Ee(Q),Ue(qe.DRILL),ii("Smart Review: Weakness Attack"),js(void 0),e("SESSION")},Ts=async(Q,Se,Oe)=>{if(t){if(ii(void 0),js(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!q&&Q!==qe.SIMULATION&&Q!==qe.WEAKNESS){ut(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!he){ut("Harap pilih jalur (CPNS / Kedinasan).","error");return}Nn(!0),Ue(Q),cn([]),Ee([]),Rt(null);try{const Be=q;if(Q===qe.DRILL){const we=await vP(t,Be,he||void 0);Rt(we),we&&we.question&&Ee([we.question])}else if(Q===qe.SIMULATION&&t==="SKD"&&he){const we=await DT(he);Ee(we||[])}else if(Q===qe.SIMULATION&&t==="UTBK"){const we=await PT();Ee(we||[])}else if(Q===qe.SIMULATION&&t==="TPA")if(ne==="PSIKOTEST_KEDINASAN"){const we=await LT();Ee(we||[])}else{const we=await jT();Ee(we||[])}else if(Q===qe.SIMULATION&&t==="PSIKOTEST"){const we=await UT();Ee(we||[])}else{let we=Oe||5;t==="PSIKOTEST"&&Q===qe.SIMULATION&&(we=40),t==="INTERVIEW"&&(we=3);const Le=await on(Q,t,Be,we,Array.from(ae),he||void 0,void 0,Se);Ee(Le||[])}e("SESSION")}catch(Be){console.error(Be),ut("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{Nn(!1)}}},An=async(Q,Se,Oe=!1)=>{let Be;if(Se)Be={...Se,isAborted:Oe};else{cn(Q);let we=0,Le=0,Xe;if(t==="SKD"&&pe===qe.SIMULATION){let $e=0,De=0,Ze=0;Q.forEach(ht=>{var St,xn,Dn,yn,kn,Ni;const jt=me.find(Gs=>Gs.id===ht.questionId);jt&&((xn=(St=jt.metadata)==null?void 0:St.subtest)!=null&&xn.includes("TWK")&&($e+=ht.scoreEarned),(yn=(Dn=jt.metadata)==null?void 0:Dn.subtest)!=null&&yn.includes("TIU")&&(De+=ht.scoreEarned),(Ni=(kn=jt.metadata)==null?void 0:kn.subtest)!=null&&Ni.includes("TKP")&&(Ze+=ht.scoreEarned))}),we=$e+De+Ze,Le=550,Xe={twk:$e,tiu:De,tkp:Ze,total:we,passed:$e>=65&&De>=80&&Ze>=166}}else if(t==="UTBK"&&pe===qe.SIMULATION){const $e=kn=>{const Ni=me.filter(Cn=>{var Ai,ri;return(ri=(Ai=Cn.metadata)==null?void 0:Ai.subtest)==null?void 0:ri.includes(kn)});if(!Ni.length)return 0;const Gs=Q.filter(Cn=>{var Ai,ri,Ga;return Cn.isCorrect&&((Ga=(ri=(Ai=me.find(za=>za.id===Cn.questionId))==null?void 0:Ai.metadata)==null?void 0:ri.subtest)==null?void 0:Ga.includes(kn))}).length;return Math.round(200+Gs/Ni.length*600)},De=$e("Penalaran Umum"),Ze=$e("PPU"),ht=$e("PBM"),jt=$e("Kuantitatif"),St=$e("Literasi B.Indo"),xn=$e("Literasi B.Inggris"),Dn=$e("Penalaran Matematika"),yn=Math.round((De+Ze+ht+jt+St+xn+Dn)/7);we=yn,Le=1e3,Xe={pu:De,ppu:Ze,pbm:ht,pk:jt,lbi:St,lbe:xn,pm:Dn,average:yn}}else if(t==="TPA"&&pe===qe.SIMULATION)if(ne==="PSIKOTEST_KEDINASAN"){let $e=0,De=0,Ze=0,ht=0;Q.forEach(Dn=>{const yn=me.find(kn=>kn.id===Dn.questionId);yn&&(yn.metadata.subtest.includes("TIU")?$e+=Dn.scoreEarned:yn.metadata.subtest.includes("Gambar")||yn.metadata.subtest.includes("Figural")?De+=Dn.scoreEarned:yn.metadata.subtest.includes("Kepribadian")&&(Ze+=Dn.scoreEarned,ht++))});const jt=ht*5,St=jt>0?Math.round(Ze/jt*100):0;we=$e+De+St,Le=500;const xn=St>=70;Xe={tiuScore:$e,figuralScore:De,personalityScore:St,passed:xn,verdict:xn?"MEMENUHI SYARAT":"TIDAK MEMENUHI SYARAT"}}else{let $e=0,De=0;Q.forEach(ht=>{var St,xn,Dn,yn;const jt=me.find(kn=>kn.id===ht.questionId);jt&&(((xn=(St=jt.metadata)==null?void 0:St.subtest)==null?void 0:xn.includes("TBI"))||((yn=(Dn=jt.metadata)==null?void 0:Dn.subtest)==null?void 0:yn.includes("Inggris"))?ht.isCorrect&&(De+=5):ht.selectedAnswer&&(ht.isCorrect?$e+=4:$e-=1))});const Ze=$e>=67&&De>=30;we=$e+De,Le=280,Xe={tpaScore:$e,tbiScore:De,passed:Ze}}else if(t==="INTERVIEW"){const $e=Q.map(De=>{var Ze;return((Ze=De.interviewFeedback)==null?void 0:Ze.score)||0});we=Math.round($e.reduce((De,Ze)=>De+Ze,0)/($e.length||1)),Le=100}else if(t==="PSIKOTEST"&&pe===qe.SIMULATION){const $e=Q.filter(St=>St.isCorrect).length,De=me.length,Ze=$e/De,ht=Math.round(70+Ze*75);let jt=ht>=130?"Very Superior":ht>=120?"Superior":ht>=110?"High Average":ht>=90?"Average":"Low Average";we=ht,Le=160,Xe={iqScore:ht,classification:jt}}else if(t==="GENERAL"){const $e=Q.reduce((De,Ze)=>De+(Ze.scoreEarned||0),0);we=Math.round($e/(Q.length||1)),Le=100}else{const $e=Q.filter(De=>De.isCorrect).length;we=Math.round($e/me.length*100),Le=100}Be={id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:he||void 0,tpaStream:ne||void 0,score:we,maxScore:Le,details:Xe,questions:me,answers:Q,isAborted:Oe,packageTitle:zt}}if(await Us(Be),!Oe&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)&&N.gamification){const we=xV(Be.score,Be.answers||[],pe===qe.SIMULATION,Be.category||"");let Le={...N.gamification};Le.xp+=we;const Xe=hE(Le.xp);Xe>Le.level&&(Le.level=Xe,Z.play("levelUp"),E({level:Xe}));const $e=[Be,...Yt],De=vV(Le,$e);if(De.length>0){const Ze=De.map(St=>St.id);Le.unlockedAchievements=[...Le.unlockedAchievements,...Ze];const ht=De.reduce((St,xn)=>St+xn.xpReward,0);Le.xp+=ht;const jt=hE(Le.xp);jt>Le.level&&(Le.level=jt,T||(Z.play("levelUp"),E({level:jt}))),k(De[0]),Z.play("success")}await mE(N.uid,Le),M({...N,gamification:Le})}if(!Oe&&!(N!=null&&N.isGuest)&&(N!=null&&N.uid)){if(Be.category==="KECERMATAN"&&Be.details){const we=Be.details;xE("KECERMATAN",we.mode||"General",Be.score,N.username,N.uid)}else if(t&&pe===qe.SIMULATION){let we="General";t==="SKD"&&he&&(we=he),t==="TPA"&&ne&&(we=ne),xE(t,we,Be.score,N.username,N.uid,zt)}}ii(void 0),Se?(Se.category!=="BENCHMARK"||Oe)&&e("HOME"):e("RESULTS")},Mn=Q=>{Z.play("click"),s(Q),ii(void 0),js(void 0),Q==="BUTAWRNA"?e("COLORBLIND"):Q==="BENCHMARK"?(ue(null),f("DASHBOARD"),e("BENCHMARK")):(e("DASHBOARD"),U(null),Ce(!1),ie(""),H(null),le(null),Je(null),Kt(null),be(""))},Ss=Q=>{Ae(Q),e("TES_KECERMATAN")},sn=()=>{if(Yt.length===0){ut("Belum ada riwayat untuk disimpan.","info");return}const Q=JSON.stringify(Yt,UE(),2),Se=new Blob([Q],{type:"application/json"}),Oe=URL.createObjectURL(Se),Be=document.createElement("a");Be.href=Oe,Be.download=`Fajmuls_History_${(N==null?void 0:N.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),URL.revokeObjectURL(Oe),ut("Export berhasil!","success")},Hr=Q=>{const Se=new FileReader;Se.onload=Oe=>{var Be;try{const we=(Be=Oe.target)==null?void 0:Be.result,Le=JSON.parse(we);if(!Array.isArray(Le))throw new Error("Format salah");const Xe=new Set(Yt.map(Ze=>Ze.id)),$e=Le.filter(Ze=>!Xe.has(Ze.id)),De=[...Yt,...$e].sort((Ze,ht)=>new Date(ht.date).getTime()-new Date(Ze.date).getTime());Vn(De),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(De)):N!=null&&N.uid&&$e.forEach(Ze=>{gE(N.uid,Ze)}),ut(`Berhasil memuat ${$e.length} riwayat baru.`,"success")}catch{ut("Gagal membaca file JSON.","error")}},Se.readAsText(Q)},Fr=Q=>{Ee(Q.questions),Ue(qe.SIMULATION),ii(Q.title),js(void 0),e("SESSION")},Vs=async Q=>{if(t)try{let Se=[],Oe=60;t==="SKD"?(Se=await DT(he||"CPNS"),Oe=100):t==="UTBK"?(Se=await PT(),Oe=195):t==="TPA"?ne==="PSIKOTEST_KEDINASAN"?(Se=await LT(),Oe=90):(Se=await jT(),Oe=100):t==="PSIKOTEST"?(Se=await UT(),Oe=40):Se=await on(qe.SIMULATION,t,"SIMULATION",20,[],he||void 0,void 0,"HOTS");const we=Gr.filter(Ze=>Ze.category!==t?!1:t==="SKD"?Ze.skdStream===he:t==="TPA"?Ze.tpaStream===ne:!0).length+1;let Le="",Xe="gen";t==="SKD"?he==="CPNS"?(Le=`TO SKD CPNS ${we}`,Xe+="-skd-cpns"):he==="KEDINASAN"?(Le=`TO SKD Kedinasan ${we}`,Xe+="-skd-kedinasan"):(Le=`TO SKD ${we}`,Xe+="-skd-general"):t==="UTBK"?(Le=`TO UTBK ${we}`,Xe+="-utbk"):t==="TPA"?ne==="PSIKOTEST_KEDINASAN"?(Le=`TO Psikotes Kedinasan ${we}`,Xe+="-tpa-psikotest_kedinasan"):(Le=`TO TPA TBI ${we}`,Xe+="-tpa-tbi"):t==="PSIKOTEST"?(Le=`TO Psikotest ${we}`,Xe+="-psikotest"):(Le=`TO ${t} ${we}`,Xe+=`-${t.toLowerCase()}`);const De={id:`${Xe}-${we}-${Date.now()}`,title:Le,category:t,skdStream:he||void 0,tpaStream:ne||void 0,questions:Se,durationMinutes:Oe,isAiGenerated:!0,version:"v2",createdAt:new Date().toISOString()};await yE(De),Qn(Ze=>[De,...Ze]),ut(`Paket baru "${Le}" berhasil dibuat dan disimpan ke database!`,"success")}catch(Se){console.error(Se),ut("Gagal membuat paket soal. Coba lagi.","error")}},Bs=async Q=>{if(Qn(Se=>Se.filter(Oe=>Oe.id!==Q)),Q.startsWith("gen-")||Q.startsWith("pkg-"))try{await jV(Q),ut("Paket dihapus dari database.","success")}catch(Se){console.error(Se)}else ut("Paket dihapus dari tampilan lokal.","success")},qr=Q=>{Array.from(Q).forEach(Se=>{const Oe=new FileReader;Oe.onload=async Be=>{var we;try{const Le=(we=Be.target)==null?void 0:we.result,Xe=JSON.parse(Le);Xe.id&&Xe.questions&&(await yE(Xe),Qn($e=>$e.find(De=>De.id===Xe.id)?$e:[Xe,...$e]),ut(`Paket "${Xe.title}" diimpor dan disimpan.`,"success"))}catch{ut("File tidak valid.","error")}},Oe.readAsDataURL(Se)})};return n==="SPLASH"?o.jsx(M7,{onComplete:()=>e(N?"HOME":"LOGIN")}):u?o.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:o.jsx(Ln,{className:"animate-spin text-indigo-600 w-10 h-10"})}):n==="LOGIN"?o.jsx(jB,{onGoogleLogin:bs,onGuestLogin:_s,isLoading:L}):n==="USERNAME_SETUP"?o.jsx(LB,{onSubmit:nn,isLoading:L}):o.jsxs(o.Fragment,{children:[cs&&o.jsx(MB,{message:cs.msg,type:cs.type,onClose:()=>us(null)}),I&&o.jsx(AB,{achievement:I,onClose:()=>k(null)}),T&&o.jsx(NB,{newLevel:T.level,onClose:()=>E(null)}),o.jsx(wB,{isOpen:v,onClose:()=>_(!1),profile:(N==null?void 0:N.gamification)||Qh}),Xt&&o.jsx(DB,{session:Xt,onResume:()=>Ua(Xt),onDiscard:Zi}),o.jsx(D7,{isOpen:a,onClose:()=>l(!1),settings:Y,onUpdate:D,userProfile:N,onUpdateProfile:Uo}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"&&o.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex flex-col sm:flex-row justify-between items-center animate-fade-in-down gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto cursor-pointer",onClick:()=>{Z.play("click"),e("HOME")},children:[o.jsx("img",{src:Th,alt:"Logo",className:"w-8 h-8 object-contain"}),o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),o.jsxs("div",{className:"flex-1 max-w-lg relative w-full sm:w-auto mx-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(bh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),o.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari: UTBK, Pauli, Reaction Time...",value:C,onChange:Q=>j(Q.target.value)})]}),$&&R.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:R.map(Q=>o.jsxs("button",{onClick:()=>ai(Q),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:Q.label}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${Q.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:Q.type})]},Q.id))})]}),!(N!=null&&N.isGuest)&&(N==null?void 0:N.gamification)&&o.jsx("div",{className:"w-full sm:w-auto flex justify-center",children:o.jsx(EB,{profile:N.gamification,onOpenAchievements:()=>{Z.play("click"),_(!0)}})}),o.jsxs("div",{className:"flex items-center gap-3 hidden sm:flex",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 p-2 rounded-xl transition",onClick:()=>{!(N!=null&&N.uid)||N.isGuest?ut("Login untuk akses Social Hub","info"):(Z.play("click"),e("SOCIAL_HUB"))},children:[o.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[o.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(N==null?void 0:N.username)||"Tamu"}),o.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:N!=null&&N.isGuest?"Mode Tamu":"Online"})]}),o.jsx(RB,{user:N})]}),o.jsx("button",{onClick:()=>{Z.play("click"),l(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:o.jsx(fA,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),o.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&n!=="GLOBAL_LEADERBOARD"&&n!=="ACADEMIC_HUB"&&n!=="SOCIAL_HUB"&&n!=="BATTLE"?"pt-32 sm:pt-20":""}`,children:[n==="HOME"&&o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center relative transition-colors duration-300",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("img",{src:Th,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),o.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:ip.map(Q=>o.jsxs("button",{onClick:()=>Mn(Q.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden hover:-translate-y-1 hover:shadow-xl ${Q.id==="BENCHMARK"?"bg-white dark:bg-slate-800 border-red-200 dark:border-red-900 hover:border-red-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500"}`,children:[Q.id==="BENCHMARK"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),o.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/40 rounded-lg flex items-center justify-center mb-6 group-hover:bg-red-600 transition-colors relative z-10 text-red-600 dark:text-red-400 group-hover:text-white",children:o.jsx(ns,{size:24})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),o.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors relative z-10",children:Q.id==="GENERAL"?o.jsx(_i,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="SKD"?o.jsx(Uf,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="INTERVIEW"?o.jsx(Vf,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="BUTAWRNA"?o.jsx(xu,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="PSIKOTEST"?o.jsx(Rs,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="SKRIPSI"?o.jsx(Lf,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Q.id==="KECERMATAN"?o.jsx(Fl,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):o.jsx(Mu,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"})})]}),o.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:Q.name}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:Q.desc})]},Q.id))}),o.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[o.jsxs("button",{onClick:()=>{Z.play("click"),e("HISTORY")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[o.jsx(Du,{size:18})," Riwayat"]}),o.jsxs("button",{onClick:zr,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 dark:shadow-none border border-indigo-600 font-bold hover:bg-indigo-700 transition",children:[o.jsx(C8,{size:18})," Lanjutkan TO"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),e("GLOBAL_LEADERBOARD")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[o.jsx(Ds,{size:18,className:"text-amber-500"})," Global Rank"]}),o.jsxs("button",{onClick:()=>{Z.play("click"),!(N!=null&&N.uid)||N.isGuest?ut("Login diperlukan untuk fitur sosial.","info"):e("SOCIAL_HUB")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[o.jsx(vu,{size:18,className:"text-blue-500"})," Social"]}),o.jsxs("button",{onClick:gn,className:"flex items-center gap-2 px-6 py-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl shadow-sm border border-rose-100 dark:border-rose-900 font-bold text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition",children:[o.jsx(_9,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&o.jsx(HB,{category:t,onBack:()=>{Z.play("back"),e("HOME")},onStartSession:Ts,onOpenTOSelection:()=>{Z.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{Z.play("click"),e("TES_KORAN")},onStartTesKecermatan:Ss,onGeneralInputSubmit:Oo,generalInput:B,setGeneralInput:U,isReadingMaterial:Te,onResetMaterial:()=>{Ce(!1),U(null)},onSubtestSelect:ie,selectedSubtest:q,weakTopicsCount:ae.size,loading:Ps,skdStream:he,onSkdStreamSelect:H,onHistory:()=>{Z.play("click"),e("HISTORY")},onStartGeneralSession:Os,onStartSkripsiSession:Vo,username:(N==null?void 0:N.username)||"Guest",isDarkMode:Y.darkMode,onToggleDarkMode:()=>{D(Q=>({...Q,darkMode:!Q.darkMode}))},tpaStream:ne,onTpaStreamSelect:le,onOpenAcademicHub:()=>{Z.play("click"),e("ACADEMIC_HUB")},onBattle:()=>{!(N!=null&&N.uid)||N.isGuest?ut("Login diperlukan untuk Battle Mode.","info"):(Z.play("click"),e("BATTLE"))}}),n==="TO_SELECTION"&&o.jsx(j7,{category:t,skdStream:he||void 0,tpaStream:ne||void 0,availablePackages:Gr,history:Yt,onSelectPackage:Fr,onGenerateNew:Vs,onDeletePackage:Bs,onImportPackage:qr,onBack:()=>{Z.play("back"),e("DASHBOARD")},showToast:ut,confirmEnabled:Y.confirmActions,onRefresh:Lo,isLoading:La}),n==="RESUME_LIST"&&o.jsx(zB,{sessions:Xi,onBack:()=>{Z.play("back"),e("HOME")},onResume:Ua,onDelete:ea,loading:en}),n==="ACADEMIC_HUB"&&o.jsx(kB,{history:Yt,category:t,onBack:()=>{Z.play("back"),e("DASHBOARD")},onStartSmartReview:Va}),n==="SOCIAL_HUB"&&N&&o.jsx(CB,{userProfile:N,history:Yt,onBack:()=>{Z.play("back"),e("HOME")},onUpdateProfile:Uo}),n==="BATTLE"&&N&&o.jsx(IB,{userProfile:N,category:t||"SKD",onBack:()=>{Z.play("back"),e("DASHBOARD")}}),n==="SESSION"&&(t==="SKRIPSI"?o.jsx(UB,{result:$t,feature:kt,onBack:()=>{Z.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?o.jsx(OB,{questions:me,onComplete:Q=>An(Q)}):t==="GENERAL"&&Pe==="SPACED_REPETITION"?o.jsx(VB,{flashcards:Me,onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&Pe==="MIND_MAP"?o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",o.jsxs("button",{onClick:()=>{Z.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[o.jsx(dt,{size:18})," Kembali"]})," ",o.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",o.jsx(I7,{data:Fe})," "]}):t==="GENERAL"&&Pe==="FEYNMAN"?o.jsx(BB,{topic:(B==null?void 0:B.content)||"",onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&Pe==="SQ3R"?o.jsx(GB,{topic:(B==null?void 0:B.content)||"",onFinish:()=>{Z.play("back"),e("DASHBOARD")}}):o.jsx(F7,{mode:pe,questions:me,drillContent:nt,onComplete:(Q,Se,Oe)=>An(Q,Se,Oe),isSkdSimulation:pe===qe.SIMULATION&&t==="SKD",isUtbkSimulation:pe===qe.SIMULATION&&t==="UTBK",category:t,showToast:ut,initialState:vs,userId:N==null?void 0:N.uid,skdStream:he,tpaStream:ne,packageTitle:zt,onSaveAndExit:()=>e("HOME")})),n==="TES_KORAN"&&o.jsx(J7,{onBack:()=>e("DASHBOARD"),onComplete:Q=>An([],Q)}),n==="TES_KECERMATAN"&&o.jsx(Q7,{initialMode:ce,onBack:()=>e("DASHBOARD"),onComplete:Q=>An([],Q)}),n==="BENCHMARK"&&o.jsx(_B,{onBack:()=>e("HOME"),onComplete:Q=>An([],Q),username:(N==null?void 0:N.username)||"Guest",history:Yt,isGuest:N==null?void 0:N.isGuest,initialMode:lt||void 0,initialTab:p}),n==="GLOBAL_LEADERBOARD"&&o.jsx(SB,{onBack:()=>{Z.play("back"),e("HOME")},userProfile:N,onOpenHumanBenchmark:()=>{Z.play("click"),s("BENCHMARK"),ue(null),f("RANKING"),e("BENCHMARK")}}),n==="RESULTS"&&o.jsx(U7,{answers:pt,questions:me,onHome:()=>{Z.play("back"),e("HOME")},onRetry:()=>{Z.play("click"),Ts(pe)},category:t,details:(Ba=Yt[0])==null?void 0:Ba.details}),n==="HISTORY"&&o.jsx(V7,{history:Yt,onBack:()=>{Z.play("back"),e("HOME")},onReview:Q=>{Z.play("click"),Ls(Q),e("REVIEW")},username:(N==null?void 0:N.username)||"Guest",onExport:sn,onImport:Hr,isDarkMode:Y.darkMode,onDelete:Oa}),n==="REVIEW"&&o.jsx(B7,{item:tn,onBack:()=>{Z.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&o.jsx(iB,{onBack:()=>{Z.play("back"),e("HOME")},onComplete:Q=>An([],Q)})]})]})}const wA=document.getElementById("root");if(!wA)throw new Error("Could not find root element to mount to");const qB=h2.createRoot(wA);qB.render(o.jsx(VE.StrictMode,{children:o.jsx(FB,{})}));
