(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function qE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lp={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function cC(){if(eb)return Sc;eb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var f in a)f!=="key"&&(o[f]=a[f])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:o}}return Sc.Fragment=e,Sc.jsx=t,Sc.jsxs=t,Sc}var tb;function uC(){return tb||(tb=1,lp.exports=cC()),lp.exports}var u=uC(),cp={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function dC(){if(nb)return Ye;nb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=T&&H[T]||H["@@iterator"],typeof H=="function"?H:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,N={};function L(H,re,he){this.props=H,this.context=re,this.refs=N,this.updater=he||C}L.prototype.isReactComponent={},L.prototype.setState=function(H,re){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,re,"setState")},L.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function U(){}U.prototype=L.prototype;function B(H,re,he){this.props=H,this.context=re,this.refs=N,this.updater=he||C}var $=B.prototype=new U;$.constructor=B,D($,L.prototype),$.isPureReactComponent=!0;var ee=Array.isArray;function se(){}var R={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function k(H,re,he){var X=he.ref;return{$$typeof:n,type:H,key:re,ref:X!==void 0?X:null,props:he}}function O(H,re){return k(H.type,re,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function G(H){var re={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(he){return re[he]})}var j=/\/+/g;function pe(H,re){return typeof H=="object"&&H!==null&&H.key!=null?G(""+H.key):re.toString(36)}function we(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(se,se):(H.status="pending",H.then(function(re){H.status==="pending"&&(H.status="fulfilled",H.value=re)},function(re){H.status==="pending"&&(H.status="rejected",H.reason=re)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function Y(H,re,he,X,ne){var ye=typeof H;(ye==="undefined"||ye==="boolean")&&(H=null);var Ie=!1;if(H===null)Ie=!0;else switch(ye){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(H.$$typeof){case n:case e:Ie=!0;break;case v:return Ie=H._init,Y(Ie(H._payload),re,he,X,ne)}}if(Ie)return ne=ne(H),Ie=X===""?"."+pe(H,0):X,ee(ne)?(he="",Ie!=null&&(he=Ie.replace(j,"$&/")+"/"),Y(ne,re,he,"",function(Te){return Te})):ne!=null&&(V(ne)&&(ne=O(ne,he+(ne.key==null||H&&H.key===ne.key?"":(""+ne.key).replace(j,"$&/")+"/")+Ie)),re.push(ne)),1;Ie=0;var ge=X===""?".":X+":";if(ee(H))for(var xe=0;xe<H.length;xe++)X=H[xe],ye=ge+pe(X,xe),Ie+=Y(X,re,he,ye,ne);else if(xe=A(H),typeof xe=="function")for(H=xe.call(H),xe=0;!(X=H.next()).done;)X=X.value,ye=ge+pe(X,xe++),Ie+=Y(X,re,he,ye,ne);else if(ye==="object"){if(typeof H.then=="function")return Y(we(H),re,he,X,ne);throw re=String(H),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ce(H,re,he){if(H==null)return H;var X=[],ne=0;return Y(H,X,"","",function(ye){return re.call(he,ye,ne++)}),X}function Se(H){if(H._status===-1){var re=H._result;re=re(),re.then(function(he){(H._status===0||H._status===-1)&&(H._status=1,H._result=he)},function(he){(H._status===0||H._status===-1)&&(H._status=2,H._result=he)}),H._status===-1&&(H._status=0,H._result=re)}if(H._status===1)return H._result.default;throw H._result}var Ue=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},be={map:ce,forEach:function(H,re,he){ce(H,function(){re.apply(this,arguments)},he)},count:function(H){var re=0;return ce(H,function(){re++}),re},toArray:function(H){return ce(H,function(re){return re})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ye.Activity=_,Ye.Children=be,Ye.Component=L,Ye.Fragment=t,Ye.Profiler=a,Ye.PureComponent=B,Ye.StrictMode=s,Ye.Suspense=p,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(H){return R.H.useMemoCache(H)}},Ye.cache=function(H){return function(){return H.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(H,re,he){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var X=D({},H.props),ne=H.key;if(re!=null)for(ye in re.key!==void 0&&(ne=""+re.key),re)!M.call(re,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&re.ref===void 0||(X[ye]=re[ye]);var ye=arguments.length-2;if(ye===1)X.children=he;else if(1<ye){for(var Ie=Array(ye),ge=0;ge<ye;ge++)Ie[ge]=arguments[ge+2];X.children=Ie}return k(H.type,ne,X)},Ye.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},Ye.createElement=function(H,re,he){var X,ne={},ye=null;if(re!=null)for(X in re.key!==void 0&&(ye=""+re.key),re)M.call(re,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ne[X]=re[X]);var Ie=arguments.length-2;if(Ie===1)ne.children=he;else if(1<Ie){for(var ge=Array(Ie),xe=0;xe<Ie;xe++)ge[xe]=arguments[xe+2];ne.children=ge}if(H&&H.defaultProps)for(X in Ie=H.defaultProps,Ie)ne[X]===void 0&&(ne[X]=Ie[X]);return k(H,ye,ne)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(H){return{$$typeof:f,render:H}},Ye.isValidElement=V,Ye.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:Se}},Ye.memo=function(H,re){return{$$typeof:m,type:H,compare:re===void 0?null:re}},Ye.startTransition=function(H){var re=R.T,he={};R.T=he;try{var X=H(),ne=R.S;ne!==null&&ne(he,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(se,Ue)}catch(ye){Ue(ye)}finally{re!==null&&he.types!==null&&(re.types=he.types),R.T=re}},Ye.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ye.use=function(H){return R.H.use(H)},Ye.useActionState=function(H,re,he){return R.H.useActionState(H,re,he)},Ye.useCallback=function(H,re){return R.H.useCallback(H,re)},Ye.useContext=function(H){return R.H.useContext(H)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(H,re){return R.H.useDeferredValue(H,re)},Ye.useEffect=function(H,re){return R.H.useEffect(H,re)},Ye.useEffectEvent=function(H){return R.H.useEffectEvent(H)},Ye.useId=function(){return R.H.useId()},Ye.useImperativeHandle=function(H,re,he){return R.H.useImperativeHandle(H,re,he)},Ye.useInsertionEffect=function(H,re){return R.H.useInsertionEffect(H,re)},Ye.useLayoutEffect=function(H,re){return R.H.useLayoutEffect(H,re)},Ye.useMemo=function(H,re){return R.H.useMemo(H,re)},Ye.useOptimistic=function(H,re){return R.H.useOptimistic(H,re)},Ye.useReducer=function(H,re,he){return R.H.useReducer(H,re,he)},Ye.useRef=function(H){return R.H.useRef(H)},Ye.useState=function(H){return R.H.useState(H)},Ye.useSyncExternalStore=function(H,re,he){return R.H.useSyncExternalStore(H,re,he)},Ye.useTransition=function(){return R.H.useTransition()},Ye.version="19.2.3",Ye}var sb;function T0(){return sb||(sb=1,cp.exports=dC()),cp.exports}var F=T0();const fC=qE(F);var up={exports:{}},Ac={},dp={exports:{}},fp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function hC(){return ib||(ib=1,(function(n){function e(Y,ce){var Se=Y.length;Y.push(ce);e:for(;0<Se;){var Ue=Se-1>>>1,be=Y[Ue];if(0<a(be,ce))Y[Ue]=ce,Y[Se]=be,Se=Ue;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ce=Y[0],Se=Y.pop();if(Se!==ce){Y[0]=Se;e:for(var Ue=0,be=Y.length,H=be>>>1;Ue<H;){var re=2*(Ue+1)-1,he=Y[re],X=re+1,ne=Y[X];if(0>a(he,Se))X<be&&0>a(ne,he)?(Y[Ue]=ne,Y[X]=Se,Ue=X):(Y[Ue]=he,Y[re]=Se,Ue=re);else if(X<be&&0>a(ne,Se))Y[Ue]=ne,Y[X]=Se,Ue=X;else break e}}return ce}function a(Y,ce){var Se=Y.sortIndex-ce.sortIndex;return Se!==0?Se:Y.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],m=[],v=1,_=null,T=3,A=!1,C=!1,D=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function $(Y){for(var ce=t(m);ce!==null;){if(ce.callback===null)s(m);else if(ce.startTime<=Y)s(m),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(m)}}function ee(Y){if(D=!1,$(Y),!C)if(t(p)!==null)C=!0,se||(se=!0,G());else{var ce=t(m);ce!==null&&we(ee,ce.startTime-Y)}}var se=!1,R=-1,M=5,k=-1;function O(){return N?!0:!(n.unstable_now()-k<M)}function V(){if(N=!1,se){var Y=n.unstable_now();k=Y;var ce=!0;try{e:{C=!1,D&&(D=!1,U(R),R=-1),A=!0;var Se=T;try{t:{for($(Y),_=t(p);_!==null&&!(_.expirationTime>Y&&O());){var Ue=_.callback;if(typeof Ue=="function"){_.callback=null,T=_.priorityLevel;var be=Ue(_.expirationTime<=Y);if(Y=n.unstable_now(),typeof be=="function"){_.callback=be,$(Y),ce=!0;break t}_===t(p)&&s(p),$(Y)}else s(p);_=t(p)}if(_!==null)ce=!0;else{var H=t(m);H!==null&&we(ee,H.startTime-Y),ce=!1}}break e}finally{_=null,T=Se,A=!1}ce=void 0}}finally{ce?G():se=!1}}}var G;if(typeof B=="function")G=function(){B(V)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,pe=j.port2;j.port1.onmessage=V,G=function(){pe.postMessage(null)}}else G=function(){L(V,0)};function we(Y,ce){R=L(function(){Y(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var Se=T;T=ce;try{return Y()}finally{T=Se}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(Y,ce){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Se=T;T=Y;try{return ce()}finally{T=Se}},n.unstable_scheduleCallback=function(Y,ce,Se){var Ue=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ue+Se:Ue):Se=Ue,Y){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Se+be,Y={id:v++,callback:ce,priorityLevel:Y,startTime:Se,expirationTime:be,sortIndex:-1},Se>Ue?(Y.sortIndex=Se,e(m,Y),t(p)===null&&Y===t(m)&&(D?(U(R),R=-1):D=!0,we(ee,Se-Ue))):(Y.sortIndex=be,e(p,Y),C||A||(C=!0,se||(se=!0,G()))),Y},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Y){var ce=T;return function(){var Se=T;T=ce;try{return Y.apply(this,arguments)}finally{T=Se}}}})(fp)),fp}var rb;function mC(){return rb||(rb=1,dp.exports=hC()),dp.exports}var hp={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function pC(){if(ab)return Mn;ab=1;var n=T0();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(p,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Mn.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(p,m,null,v)},Mn.flushSync=function(p){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=m,s.p=v,s.d.f()}},Mn.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},Mn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Mn.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(p,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Mn.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},Mn.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=f(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Mn.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},Mn.requestFormReset=function(p){s.d.r(p)},Mn.unstable_batchedUpdates=function(p,m){return p(m)},Mn.useFormState=function(p,m,v){return c.H.useFormState(p,m,v)},Mn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Mn.version="19.2.3",Mn}var ob;function gC(){if(ob)return hp.exports;ob=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hp.exports=pC(),hp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb;function yC(){if(lb)return Ac;lb=1;var n=mC(),e=T0(),t=gC();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(o(i)!==i)throw Error(s(188))}function m(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,d=r;;){var x=l.return;if(x===null)break;var b=x.alternate;if(b===null){if(d=x.return,d!==null){l=d;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===l)return p(x),i;if(b===d)return p(x),r;b=b.sibling}throw Error(s(188))}if(l.return!==d.return)l=x,d=b;else{for(var S=!1,I=x.child;I;){if(I===l){S=!0,l=x,d=b;break}if(I===d){S=!0,d=x,l=b;break}I=I.sibling}if(!S){for(I=b.child;I;){if(I===l){S=!0,l=b,d=x;break}if(I===d){S=!0,d=b,l=x;break}I=I.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function v(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=v(i),r!==null)return r;i=i.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),B=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var j=Symbol.for("react.client.reference");function pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===j?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case L:return"Profiler";case N:return"StrictMode";case ee:return"Suspense";case se:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case B:return i.displayName||"Context";case U:return(i._context.displayName||"Context")+".Consumer";case $:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return r=i.displayName||null,r!==null?r:pe(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return pe(i(r))}catch{}}return null}var we=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Ue=[],be=-1;function H(i){return{current:i}}function re(i){0>be||(i.current=Ue[be],Ue[be]=null,be--)}function he(i,r){be++,Ue[be]=i.current,i.current=r}var X=H(null),ne=H(null),ye=H(null),Ie=H(null);function ge(i,r){switch(he(ye,r),he(ne,i),he(X,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Ev(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Ev(r),i=Sv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}re(X),he(X,i)}function xe(){re(X),re(ne),re(ye)}function Te(i){i.memoizedState!==null&&he(Ie,i);var r=X.current,l=Sv(r,i.type);r!==l&&(he(ne,i),he(X,l))}function Be(i){ne.current===i&&(re(X),re(ne)),Ie.current===i&&(re(Ie),bc._currentValue=Se)}var ft,ze;function ht(i){if(ft===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);ft=r&&r[1]||"",ze=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+i+ze}var Ot=!1;function Mt(i,r){if(!i||Ot)return"";Ot=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var te=ae}Reflect.construct(i,[],de)}else{try{de.call()}catch(ae){te=ae}i.call(de.prototype)}}else{try{throw Error()}catch(ae){te=ae}(de=i())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],I=b[1];if(S&&I){var z=S.split(`
`),W=I.split(`
`);for(x=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(d===z.length||x===W.length)for(d=z.length-1,x=W.length-1;1<=d&&0<=x&&z[d]!==W[x];)x--;for(;1<=d&&0<=x;d--,x--)if(z[d]!==W[x]){if(d!==1||x!==1)do if(d--,x--,0>x||z[d]!==W[x]){var le=`
`+z[d].replace(" at new "," at ");return i.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",i.displayName)),le}while(1<=d&&0<=x);break}}}finally{Ot=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?ht(l):""}function nt(i,r){switch(i.tag){case 26:case 27:case 5:return ht(i.type);case 16:return ht("Lazy");case 13:return i.child!==r&&r!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return Mt(i.type,!1);case 11:return Mt(i.type.render,!1);case 1:return Mt(i.type,!0);case 31:return ht("Activity");default:return""}}function Fn(i){try{var r="",l=null;do r+=nt(i,l),l=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Lt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,qn=n.unstable_cancelCallback,kl=n.unstable_shouldYield,ua=n.unstable_requestPaint,Dt=n.unstable_now,bn=n.unstable_getCurrentPriorityLevel,da=n.unstable_ImmediatePriority,fa=n.unstable_UserBlockingPriority,gs=n.unstable_NormalPriority,lo=n.unstable_LowPriority,mt=n.unstable_IdlePriority,ha=n.log,ri=n.unstable_setDisableYieldValue,Kn=null,fn=null;function $n(i){if(typeof ha=="function"&&ri(i),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Kn,i)}catch{}}var Ht=Math.clz32?Math.clz32:uo,co=Math.log,cr=Math.LN2;function uo(i){return i>>>=0,i===0?32:31-(co(i)/cr|0)|0}var is=256,Ni=262144,Kt=4194304;function ys(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xs(i,r,l){var d=i.pendingLanes;if(d===0)return 0;var x=0,b=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var I=d&134217727;return I!==0?(d=I&~b,d!==0?x=ys(d):(S&=I,S!==0?x=ys(S):l||(l=I&~i,l!==0&&(x=ys(l))))):(I=d&~b,I!==0?x=ys(I):S!==0?x=ys(S):l||(l=d&~i,l!==0&&(x=ys(l)))),x===0?0:r!==0&&r!==x&&(r&b)===0&&(b=x&-x,l=r&-r,b>=l||b===32&&(l&4194048)!==0)?r:x}function rs(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function fo(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gs(){var i=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),i}function as(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function ai(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Rl(i,r,l,d,x,b){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var I=i.entanglements,z=i.expirationTimes,W=i.hiddenUpdates;for(l=S&~l;0<l;){var le=31-Ht(l),de=1<<le;I[le]=0,z[le]=-1;var te=W[le];if(te!==null)for(W[le]=null,le=0;le<te.length;le++){var ae=te[le];ae!==null&&(ae.lane&=-536870913)}l&=~de}d!==0&&Ci(i,d,0),b!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=b&~(S&~r))}function Ci(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-Ht(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function ma(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var d=31-Ht(l),x=1<<d;x&r|i[d]&r&&(i[d]|=r),l&=~x}}function pa(i,r){var l=r&-r;return l=(l&42)!==0?1:Ii(l),(l&(i.suspendedLanes|r))!==0?0:l}function Ii(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ga(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:$v(i.type))}function Z(i,r){var l=ce.p;try{return ce.p=i,r()}finally{ce.p=l}}var ve=Math.random().toString(36).slice(2),Ee="__reactFiber$"+ve,Me="__reactProps$"+ve,Le="__reactContainer$"+ve,ut="__reactEvents$"+ve,Fe="__reactListeners$"+ve,Ze="__reactHandles$"+ve,bt="__reactResources$"+ve,st="__reactMarker$"+ve;function Qt(i){delete i[Ee],delete i[Me],delete i[ut],delete i[Fe],delete i[Ze]}function Wt(i){var r=i[Ee];if(r)return r;for(var l=i.parentNode;l;){if(r=l[Le]||l[Ee]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=Rv(i);i!==null;){if(l=i[Ee])return l;i=Rv(i)}return r}i=l,l=i.parentNode}return null}function $t(i){if(i=i[Ee]||i[Le]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function zt(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function hn(i){var r=i[bt];return r||(r=i[bt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Tt(i){i[st]=!0}var Yn=new Set,vs={};function _n(i,r){Rn(i,r),Rn(i+"Capture",r)}function Rn(i,r){for(vs[i]=r,i=0;i<r.length;i++)Yn.add(r[i])}var Hs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ur={},ya={};function cu(i){return Lt.call(ya,i)?!0:Lt.call(ur,i)?!1:Hs.test(i)?ya[i]=!0:(ur[i]=!0,!1)}function ho(i,r,l){if(cu(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function os(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function sn(i,r,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+d)}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function dr(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ml(i,r,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,b=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return x.call(this)},set:function(S){l=""+S,b.call(this,S)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Et(i){if(!i._valueTracker){var r=dr(i)?"checked":"value";i._valueTracker=Ml(i,r,""+i[r])}}function xa(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return i&&(d=dr(i)?i.checked?"true":"false":i.value),i=d,i!==l?(r.setValue(i),!0):!1}function oi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var va=/[\n"\\]/g;function Jn(i){return i.replace(va,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function mo(i,r,l,d,x,b,S,I){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+gn(r)):i.value!==""+gn(r)&&(i.value=""+gn(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?Dl(i,S,gn(r)):l!=null?Dl(i,S,gn(l)):d!=null&&i.removeAttribute("value"),x==null&&b!=null&&(i.defaultChecked=!!b),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+gn(I):i.removeAttribute("name")}function uu(i,r,l,d,x,b,S,I){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){Et(i);return}l=l!=null?""+gn(l):"",r=r!=null?""+gn(r):l,I||r===i.value||(i.value=r),i.defaultValue=r}d=d??x,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=I?i.checked:!!d,i.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Et(i)}function Dl(i,r,l){r==="number"&&oi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function fr(i,r,l,d){if(i=i.options,r){r={};for(var x=0;x<l.length;x++)r["$"+l[x]]=!0;for(l=0;l<i.length;l++)x=r.hasOwnProperty("$"+i[l].value),i[l].selected!==x&&(i[l].selected=x),x&&d&&(i[l].defaultSelected=!0)}else{for(l=""+gn(l),r=null,x=0;x<i.length;x++){if(i[x].value===l){i[x].selected=!0,d&&(i[x].defaultSelected=!0);return}r!==null||i[x].disabled||(r=i[x])}r!==null&&(r.selected=!0)}}function du(i,r,l){if(r!=null&&(r=""+gn(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+gn(l):""}function hr(i,r,l,d){if(r==null){if(d!=null){if(l!=null)throw Error(s(92));if(we(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),r=l}l=gn(r),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),Et(i)}function Qn(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var fu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(i,r,l){var d=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,l):typeof l!="number"||l===0||fu.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function Ll(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var x in r)d=r[x],r.hasOwnProperty(x)&&l[x]!==d&&Pl(i,x,d)}else for(var b in r)r.hasOwnProperty(b)&&Pl(i,b,r[b])}function po(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function go(i){return mr.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function zs(){}var Ul=null;function bs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var pr=null,li=null;function ba(i){var r=$t(i);if(r&&(i=r.stateNode)){var l=i[Me]||null;e:switch(i=r.stateNode,r.type){case"input":if(mo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Jn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==i&&d.form===i.form){var x=d[Me]||null;if(!x)throw Error(s(90));mo(d,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(r=0;r<l.length;r++)d=l[r],d.form===i.form&&xa(d)}break e;case"textarea":du(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&fr(i,!!l.multiple,r,!1)}}}var yo=!1;function gr(i,r,l){if(yo)return i(r,l);yo=!0;try{var d=i(r);return d}finally{if(yo=!1,(pr!==null||li!==null)&&(ad(),pr&&(r=pr,i=li,li=pr=null,ba(r),i)))for(r=0;r<i.length;r++)ba(i[r])}}function Fs(i,r){var l=i.stateNode;if(l===null)return null;var d=l[Me]||null;if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=!1;if(_s)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){_a=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{_a=!1}var ci=null,Vl=null,Ta=null;function jl(){if(Ta)return Ta;var i,r=Vl,l=r.length,d,x="value"in ci?ci.value:ci.textContent,b=x.length;for(i=0;i<l&&r[i]===x[i];i++);var S=l-i;for(d=1;d<=S&&r[l-d]===x[b-d];d++);return Ta=x.slice(i,1<d?1-d:void 0)}function Ea(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function ki(){return!0}function qs(){return!1}function Tn(i){function r(l,d,x,b,S){this._reactName=l,this._targetInst=x,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(l=i[I],this[I]=l?l(b):b[I]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ki:qs,this.isPropagationStopped=qs,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),r}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=Tn(Ri),yr=_({},Ri,{view:0,detail:0}),Ol=Tn(yr),xr,xo,di,vo=_({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==di&&(di&&i.type==="mousemove"?(xr=i.screenX-di.screenX,xo=i.screenY-di.screenY):xo=xr=0,di=i),xr)},movementY:function(i){return"movementY"in i?i.movementY:xo}}),Gl=Tn(vo),Sa=_({},vo,{dataTransfer:0}),mu=Tn(Sa),pu=_({},yr,{relatedTarget:0}),Aa=Tn(pu),Bl=_({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),gu=Tn(Bl),bo=_({},Ri,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),yu=Tn(bo),xu=_({},Ri,{data:0}),fi=Tn(xu),vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=_u[i])?!!r[i]:!1}function vr(){return Tu}var jn=_({},yr,{key:function(i){if(i.key){var r=vu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ea(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?bu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(i){return i.type==="keypress"?Ea(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ea(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Eu=Tn(jn),Su=_({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mi=Tn(Su),y=_({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),E=Tn(y),w=_({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=Tn(w),J=_({},vo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=Tn(J),_e=_({},Ri,{newState:0,oldState:0}),Qe=Tn(_e),Xt=[9,13,27,32],xt=_s&&"CompositionEvent"in window,Gt=null;_s&&"documentMode"in document&&(Gt=document.documentMode);var Ts=_s&&"TextEvent"in window&&!Gt,hi=_s&&(!xt||Gt&&8<Gt&&11>=Gt),Ks=" ",$s=!1;function wa(i,r){switch(i){case"keyup":return Xt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _o(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var To=!1;function D1(i,r){switch(i){case"compositionend":return _o(r);case"keypress":return r.which!==32?null:($s=!0,Ks);case"textInput":return i=r.data,i===Ks&&$s?null:i;default:return null}}function P1(i,r){if(To)return i==="compositionend"||!xt&&wa(i,r)?(i=jl(),Ta=Vl=ci=null,To=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return hi&&r.locale!=="ko"?null:r.data;default:return null}}var L1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!L1[i.type]:r==="textarea"}function Lg(i,r,l,d){pr?li?li.push(d):li=[d]:pr=d,r=hd(r,"onChange"),0<r.length&&(l=new ui("onChange","change",null,l,d),i.push({event:l,listeners:r}))}var Hl=null,zl=null;function U1(i){yv(i,0)}function Au(i){var r=zt(i);if(xa(r))return i}function Ug(i,r){if(i==="change")return r}var Vg=!1;if(_s){var ph;if(_s){var gh="oninput"in document;if(!gh){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),gh=typeof jg.oninput=="function"}ph=gh}else ph=!1;Vg=ph&&(!document.documentMode||9<document.documentMode)}function Og(){Hl&&(Hl.detachEvent("onpropertychange",Gg),zl=Hl=null)}function Gg(i){if(i.propertyName==="value"&&Au(zl)){var r=[];Lg(r,zl,i,bs(i)),gr(U1,r)}}function V1(i,r,l){i==="focusin"?(Og(),Hl=r,zl=l,Hl.attachEvent("onpropertychange",Gg)):i==="focusout"&&Og()}function j1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Au(zl)}function O1(i,r){if(i==="click")return Au(r)}function G1(i,r){if(i==="input"||i==="change")return Au(r)}function B1(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ls=typeof Object.is=="function"?Object.is:B1;function Fl(i,r){if(ls(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var x=l[d];if(!Lt.call(r,x)||!ls(i[x],r[x]))return!1}return!0}function Bg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Hg(i,r){var l=Bg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=r&&d>=r)return{node:l,offset:r-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bg(l)}}function zg(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?zg(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Fg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=oi(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=oi(i.document)}return r}function yh(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var H1=_s&&"documentMode"in document&&11>=document.documentMode,Eo=null,xh=null,ql=null,vh=!1;function qg(i,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vh||Eo==null||Eo!==oi(d)||(d=Eo,"selectionStart"in d&&yh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ql&&Fl(ql,d)||(ql=d,d=hd(xh,"onSelect"),0<d.length&&(r=new ui("onSelect","select",null,r,l),i.push({event:r,listeners:d}),r.target=Eo)))}function Na(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var So={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionrun:Na("Transition","TransitionRun"),transitionstart:Na("Transition","TransitionStart"),transitioncancel:Na("Transition","TransitionCancel"),transitionend:Na("Transition","TransitionEnd")},bh={},Kg={};_s&&(Kg=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Ca(i){if(bh[i])return bh[i];if(!So[i])return i;var r=So[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in Kg)return bh[i]=r[l];return i}var $g=Ca("animationend"),Yg=Ca("animationiteration"),Jg=Ca("animationstart"),z1=Ca("transitionrun"),F1=Ca("transitionstart"),q1=Ca("transitioncancel"),Qg=Ca("transitionend"),Wg=new Map,_h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_h.push("scrollEnd");function Ys(i,r){Wg.set(i,r),_n(r,[i])}var wu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Es=[],Ao=0,Th=0;function Nu(){for(var i=Ao,r=Th=Ao=0;r<i;){var l=Es[r];Es[r++]=null;var d=Es[r];Es[r++]=null;var x=Es[r];Es[r++]=null;var b=Es[r];if(Es[r++]=null,d!==null&&x!==null){var S=d.pending;S===null?x.next=x:(x.next=S.next,S.next=x),d.pending=x}b!==0&&Xg(l,x,b)}}function Cu(i,r,l,d){Es[Ao++]=i,Es[Ao++]=r,Es[Ao++]=l,Es[Ao++]=d,Th|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Eh(i,r,l,d){return Cu(i,r,l,d),Iu(i)}function Ia(i,r){return Cu(i,null,null,r),Iu(i)}function Xg(i,r,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var x=!1,b=i.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(x=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,x&&r!==null&&(x=31-Ht(l),i=b.hiddenUpdates,d=i[x],d===null?i[x]=[r]:d.push(r),r.lane=l|536870912),b):null}function Iu(i){if(50<hc)throw hc=0,Mm=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var wo={};function K1(i,r,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(i,r,l,d){return new K1(i,r,l,d)}function Sh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Di(i,r){var l=i.alternate;return l===null?(l=cs(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Zg(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ku(i,r,l,d,x,b){var S=0;if(d=i,typeof i=="function")Sh(i)&&(S=1);else if(typeof i=="string")S=WN(i,l,X.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=cs(31,l,r,x),i.elementType=k,i.lanes=b,i;case D:return ka(l.children,x,b,r);case N:S=8,x|=24;break;case L:return i=cs(12,l,r,x|2),i.elementType=L,i.lanes=b,i;case ee:return i=cs(13,l,r,x),i.elementType=ee,i.lanes=b,i;case se:return i=cs(19,l,r,x),i.elementType=se,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:S=10;break e;case U:S=9;break e;case $:S=11;break e;case R:S=14;break e;case M:S=16,d=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),d=null}return r=cs(S,l,r,x),r.elementType=i,r.type=d,r.lanes=b,r}function ka(i,r,l,d){return i=cs(7,i,d,r),i.lanes=l,i}function Ah(i,r,l){return i=cs(6,i,null,r),i.lanes=l,i}function ey(i){var r=cs(18,null,null,0);return r.stateNode=i,r}function wh(i,r,l){return r=cs(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var ty=new WeakMap;function Ss(i,r){if(typeof i=="object"&&i!==null){var l=ty.get(i);return l!==void 0?l:(r={value:i,source:r,stack:Fn(r)},ty.set(i,r),r)}return{value:i,source:r,stack:Fn(r)}}var No=[],Co=0,Ru=null,Kl=0,As=[],ws=0,br=null,mi=1,pi="";function Pi(i,r){No[Co++]=Kl,No[Co++]=Ru,Ru=i,Kl=r}function ny(i,r,l){As[ws++]=mi,As[ws++]=pi,As[ws++]=br,br=i;var d=mi;i=pi;var x=32-Ht(d)-1;d&=~(1<<x),l+=1;var b=32-Ht(r)+x;if(30<b){var S=x-x%5;b=(d&(1<<S)-1).toString(32),d>>=S,x-=S,mi=1<<32-Ht(r)+x|l<<x|d,pi=b+i}else mi=1<<b|l<<x|d,pi=i}function Nh(i){i.return!==null&&(Pi(i,1),ny(i,1,0))}function Ch(i){for(;i===Ru;)Ru=No[--Co],No[Co]=null,Kl=No[--Co],No[Co]=null;for(;i===br;)br=As[--ws],As[ws]=null,pi=As[--ws],As[ws]=null,mi=As[--ws],As[ws]=null}function sy(i,r){As[ws++]=mi,As[ws++]=pi,As[ws++]=br,mi=r.id,pi=r.overflow,br=i}var En=null,Ut=null,ct=!1,_r=null,Ns=!1,Ih=Error(s(519));function Tr(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $l(Ss(r,i)),Ih}function iy(i){var r=i.stateNode,l=i.type,d=i.memoizedProps;switch(r[Ee]=i,r[Me]=d,l){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(l=0;l<pc.length;l++)tt(pc[l],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":tt("invalid",r),uu(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":tt("invalid",r);break;case"textarea":tt("invalid",r),hr(r,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||d.suppressHydrationWarning===!0||_v(r.textContent,l)?(d.popover!=null&&(tt("beforetoggle",r),tt("toggle",r)),d.onScroll!=null&&tt("scroll",r),d.onScrollEnd!=null&&tt("scrollend",r),d.onClick!=null&&(r.onclick=zs),r=!0):r=!1,r||Tr(i,!0)}function ry(i){for(En=i.return;En;)switch(En.tag){case 5:case 31:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:En=En.return}}function Io(i){if(i!==En)return!1;if(!ct)return ry(i),ct=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||$m(i.type,i.memoizedProps)),l=!l),l&&Ut&&Tr(i),ry(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ut=kv(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ut=kv(i)}else r===27?(r=Ut,Ur(i.type)?(i=Xm,Xm=null,Ut=i):Ut=r):Ut=En?Is(i.stateNode.nextSibling):null;return!0}function Ra(){Ut=En=null,ct=!1}function kh(){var i=_r;return i!==null&&(es===null?es=i:es.push.apply(es,i),_r=null),i}function $l(i){_r===null?_r=[i]:_r.push(i)}var Rh=H(null),Ma=null,Li=null;function Er(i,r,l){he(Rh,r._currentValue),r._currentValue=l}function Ui(i){i._currentValue=Rh.current,re(Rh)}function Mh(i,r,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===l)break;i=i.return}}function Dh(i,r,l,d){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var b=x.dependencies;if(b!==null){var S=x.child;b=b.firstContext;e:for(;b!==null;){var I=b;b=x;for(var z=0;z<r.length;z++)if(I.context===r[z]){b.lanes|=l,I=b.alternate,I!==null&&(I.lanes|=l),Mh(b.return,l,i),d||(S=null);break e}b=I.next}}else if(x.tag===18){if(S=x.return,S===null)throw Error(s(341));S.lanes|=l,b=S.alternate,b!==null&&(b.lanes|=l),Mh(S,l,i),S=null}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===i){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}}function ko(i,r,l,d){i=null;for(var x=r,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var S=x.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var I=x.type;ls(x.pendingProps.value,S.value)||(i!==null?i.push(I):i=[I])}}else if(x===Ie.current){if(S=x.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(bc):i=[bc])}x=x.return}i!==null&&Dh(r,i,l,d),r.flags|=262144}function Mu(i){for(i=i.firstContext;i!==null;){if(!ls(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Da(i){Ma=i,Li=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Sn(i){return ay(Ma,i)}function Du(i,r){return Ma===null&&Da(i),ay(i,r)}function ay(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Li===null){if(i===null)throw Error(s(308));Li=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Li=Li.next=r;return l}var $1=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},Y1=n.unstable_scheduleCallback,J1=n.unstable_NormalPriority,rn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new $1,data:new Map,refCount:0}}function Yl(i){i.refCount--,i.refCount===0&&Y1(J1,function(){i.controller.abort()})}var Jl=null,Lh=0,Ro=0,Mo=null;function Q1(i,r){if(Jl===null){var l=Jl=[];Lh=0,Ro=jm(),Mo={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Lh++,r.then(oy,oy),r}function oy(){if(--Lh===0&&Jl!==null){Mo!==null&&(Mo.status="fulfilled");var i=Jl;Jl=null,Ro=0,Mo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function W1(i,r){var l=[],d={status:"pending",value:null,reason:null,then:function(x){l.push(x)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var x=0;x<l.length;x++)(0,l[x])(r)},function(x){for(d.status="rejected",d.reason=x,x=0;x<l.length;x++)(0,l[x])(void 0)}),d}var ly=Y.S;Y.S=function(i,r){qx=Dt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Q1(i,r),ly!==null&&ly(i,r)};var Pa=H(null);function Uh(){var i=Pa.current;return i!==null?i:Rt.pooledCache}function Pu(i,r){r===null?he(Pa,Pa.current):he(Pa,r.pool)}function cy(){var i=Uh();return i===null?null:{parent:rn._currentValue,pool:i}}var Do=Error(s(460)),Vh=Error(s(474)),Lu=Error(s(542)),Uu={then:function(){}};function uy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function dy(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(zs,zs),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,hy(i),i;default:if(typeof r.status=="string")r.then(zs,zs);else{if(i=Rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var x=r;x.status="fulfilled",x.value=d}},function(d){if(r.status==="pending"){var x=r;x.status="rejected",x.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,hy(i),i}throw Ua=r,Do}}function La(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ua=l,Do):l}}var Ua=null;function fy(){if(Ua===null)throw Error(s(459));var i=Ua;return Ua=null,i}function hy(i){if(i===Do||i===Lu)throw Error(s(483))}var Po=null,Ql=0;function Vu(i){var r=Ql;return Ql+=1,Po===null&&(Po=[]),dy(Po,i,r)}function Wl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ju(i,r){throw r.$$typeof===T?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function my(i){function r(K,q){if(i){var Q=K.deletions;Q===null?(K.deletions=[q],K.flags|=16):Q.push(q)}}function l(K,q){if(!i)return null;for(;q!==null;)r(K,q),q=q.sibling;return null}function d(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function x(K,q){return K=Di(K,q),K.index=0,K.sibling=null,K}function b(K,q,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<q?(K.flags|=67108866,q):Q):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function S(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function I(K,q,Q,ue){return q===null||q.tag!==6?(q=Ah(Q,K.mode,ue),q.return=K,q):(q=x(q,Q),q.return=K,q)}function z(K,q,Q,ue){var Ve=Q.type;return Ve===D?le(K,q,Q.props.children,ue,Q.key):q!==null&&(q.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===M&&La(Ve)===q.type)?(q=x(q,Q.props),Wl(q,Q),q.return=K,q):(q=ku(Q.type,Q.key,Q.props,null,K.mode,ue),Wl(q,Q),q.return=K,q)}function W(K,q,Q,ue){return q===null||q.tag!==4||q.stateNode.containerInfo!==Q.containerInfo||q.stateNode.implementation!==Q.implementation?(q=wh(Q,K.mode,ue),q.return=K,q):(q=x(q,Q.children||[]),q.return=K,q)}function le(K,q,Q,ue,Ve){return q===null||q.tag!==7?(q=ka(Q,K.mode,ue,Ve),q.return=K,q):(q=x(q,Q),q.return=K,q)}function de(K,q,Q){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ah(""+q,K.mode,Q),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return Q=ku(q.type,q.key,q.props,null,K.mode,Q),Wl(Q,q),Q.return=K,Q;case C:return q=wh(q,K.mode,Q),q.return=K,q;case M:return q=La(q),de(K,q,Q)}if(we(q)||G(q))return q=ka(q,K.mode,Q,null),q.return=K,q;if(typeof q.then=="function")return de(K,Vu(q),Q);if(q.$$typeof===B)return de(K,Du(K,q),Q);ju(K,q)}return null}function te(K,q,Q,ue){var Ve=q!==null?q.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ve!==null?null:I(K,q,""+Q,ue);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return Q.key===Ve?z(K,q,Q,ue):null;case C:return Q.key===Ve?W(K,q,Q,ue):null;case M:return Q=La(Q),te(K,q,Q,ue)}if(we(Q)||G(Q))return Ve!==null?null:le(K,q,Q,ue,null);if(typeof Q.then=="function")return te(K,q,Vu(Q),ue);if(Q.$$typeof===B)return te(K,q,Du(K,Q),ue);ju(K,Q)}return null}function ae(K,q,Q,ue,Ve){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return K=K.get(Q)||null,I(q,K,""+ue,Ve);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case A:return K=K.get(ue.key===null?Q:ue.key)||null,z(q,K,ue,Ve);case C:return K=K.get(ue.key===null?Q:ue.key)||null,W(q,K,ue,Ve);case M:return ue=La(ue),ae(K,q,Q,ue,Ve)}if(we(ue)||G(ue))return K=K.get(Q)||null,le(q,K,ue,Ve,null);if(typeof ue.then=="function")return ae(K,q,Q,Vu(ue),Ve);if(ue.$$typeof===B)return ae(K,q,Q,Du(q,ue),Ve);ju(q,ue)}return null}function De(K,q,Q,ue){for(var Ve=null,pt=null,Pe=q,Xe=q=0,rt=null;Pe!==null&&Xe<Q.length;Xe++){Pe.index>Xe?(rt=Pe,Pe=null):rt=Pe.sibling;var gt=te(K,Pe,Q[Xe],ue);if(gt===null){Pe===null&&(Pe=rt);break}i&&Pe&&gt.alternate===null&&r(K,Pe),q=b(gt,q,Xe),pt===null?Ve=gt:pt.sibling=gt,pt=gt,Pe=rt}if(Xe===Q.length)return l(K,Pe),ct&&Pi(K,Xe),Ve;if(Pe===null){for(;Xe<Q.length;Xe++)Pe=de(K,Q[Xe],ue),Pe!==null&&(q=b(Pe,q,Xe),pt===null?Ve=Pe:pt.sibling=Pe,pt=Pe);return ct&&Pi(K,Xe),Ve}for(Pe=d(Pe);Xe<Q.length;Xe++)rt=ae(Pe,K,Xe,Q[Xe],ue),rt!==null&&(i&&rt.alternate!==null&&Pe.delete(rt.key===null?Xe:rt.key),q=b(rt,q,Xe),pt===null?Ve=rt:pt.sibling=rt,pt=rt);return i&&Pe.forEach(function(Br){return r(K,Br)}),ct&&Pi(K,Xe),Ve}function Oe(K,q,Q,ue){if(Q==null)throw Error(s(151));for(var Ve=null,pt=null,Pe=q,Xe=q=0,rt=null,gt=Q.next();Pe!==null&&!gt.done;Xe++,gt=Q.next()){Pe.index>Xe?(rt=Pe,Pe=null):rt=Pe.sibling;var Br=te(K,Pe,gt.value,ue);if(Br===null){Pe===null&&(Pe=rt);break}i&&Pe&&Br.alternate===null&&r(K,Pe),q=b(Br,q,Xe),pt===null?Ve=Br:pt.sibling=Br,pt=Br,Pe=rt}if(gt.done)return l(K,Pe),ct&&Pi(K,Xe),Ve;if(Pe===null){for(;!gt.done;Xe++,gt=Q.next())gt=de(K,gt.value,ue),gt!==null&&(q=b(gt,q,Xe),pt===null?Ve=gt:pt.sibling=gt,pt=gt);return ct&&Pi(K,Xe),Ve}for(Pe=d(Pe);!gt.done;Xe++,gt=Q.next())gt=ae(Pe,K,Xe,gt.value,ue),gt!==null&&(i&&gt.alternate!==null&&Pe.delete(gt.key===null?Xe:gt.key),q=b(gt,q,Xe),pt===null?Ve=gt:pt.sibling=gt,pt=gt);return i&&Pe.forEach(function(lC){return r(K,lC)}),ct&&Pi(K,Xe),Ve}function It(K,q,Q,ue){if(typeof Q=="object"&&Q!==null&&Q.type===D&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:e:{for(var Ve=Q.key;q!==null;){if(q.key===Ve){if(Ve=Q.type,Ve===D){if(q.tag===7){l(K,q.sibling),ue=x(q,Q.props.children),ue.return=K,K=ue;break e}}else if(q.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===M&&La(Ve)===q.type){l(K,q.sibling),ue=x(q,Q.props),Wl(ue,Q),ue.return=K,K=ue;break e}l(K,q);break}else r(K,q);q=q.sibling}Q.type===D?(ue=ka(Q.props.children,K.mode,ue,Q.key),ue.return=K,K=ue):(ue=ku(Q.type,Q.key,Q.props,null,K.mode,ue),Wl(ue,Q),ue.return=K,K=ue)}return S(K);case C:e:{for(Ve=Q.key;q!==null;){if(q.key===Ve)if(q.tag===4&&q.stateNode.containerInfo===Q.containerInfo&&q.stateNode.implementation===Q.implementation){l(K,q.sibling),ue=x(q,Q.children||[]),ue.return=K,K=ue;break e}else{l(K,q);break}else r(K,q);q=q.sibling}ue=wh(Q,K.mode,ue),ue.return=K,K=ue}return S(K);case M:return Q=La(Q),It(K,q,Q,ue)}if(we(Q))return De(K,q,Q,ue);if(G(Q)){if(Ve=G(Q),typeof Ve!="function")throw Error(s(150));return Q=Ve.call(Q),Oe(K,q,Q,ue)}if(typeof Q.then=="function")return It(K,q,Vu(Q),ue);if(Q.$$typeof===B)return It(K,q,Du(K,Q),ue);ju(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,q!==null&&q.tag===6?(l(K,q.sibling),ue=x(q,Q),ue.return=K,K=ue):(l(K,q),ue=Ah(Q,K.mode,ue),ue.return=K,K=ue),S(K)):l(K,q)}return function(K,q,Q,ue){try{Ql=0;var Ve=It(K,q,Q,ue);return Po=null,Ve}catch(Pe){if(Pe===Do||Pe===Lu)throw Pe;var pt=cs(29,Pe,null,K.mode);return pt.lanes=ue,pt.return=K,pt}finally{}}}var Va=my(!0),py=my(!1),Sr=!1;function jh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oh(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ar(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wr(i,r,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(vt&2)!==0){var x=d.pending;return x===null?r.next=r:(r.next=x.next,x.next=r),d.pending=r,r=Iu(i),Xg(i,null,l),r}return Cu(i,d,r,l),Iu(i)}function Xl(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,ma(i,l)}}function Gh(i,r){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var x=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?x=b=S:b=b.next=S,l=l.next}while(l!==null);b===null?x=b=r:b=b.next=r}else x=b=r;l={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var Bh=!1;function Zl(){if(Bh){var i=Mo;if(i!==null)throw i}}function ec(i,r,l,d){Bh=!1;var x=i.updateQueue;Sr=!1;var b=x.firstBaseUpdate,S=x.lastBaseUpdate,I=x.shared.pending;if(I!==null){x.shared.pending=null;var z=I,W=z.next;z.next=null,S===null?b=W:S.next=W,S=z;var le=i.alternate;le!==null&&(le=le.updateQueue,I=le.lastBaseUpdate,I!==S&&(I===null?le.firstBaseUpdate=W:I.next=W,le.lastBaseUpdate=z))}if(b!==null){var de=x.baseState;S=0,le=W=z=null,I=b;do{var te=I.lane&-536870913,ae=te!==I.lane;if(ae?(it&te)===te:(d&te)===te){te!==0&&te===Ro&&(Bh=!0),le!==null&&(le=le.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var De=i,Oe=I;te=r;var It=l;switch(Oe.tag){case 1:if(De=Oe.payload,typeof De=="function"){de=De.call(It,de,te);break e}de=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Oe.payload,te=typeof De=="function"?De.call(It,de,te):De,te==null)break e;de=_({},de,te);break e;case 2:Sr=!0}}te=I.callback,te!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=x.callbacks,ae===null?x.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},le===null?(W=le=ae,z=de):le=le.next=ae,S|=te;if(I=I.next,I===null){if(I=x.shared.pending,I===null)break;ae=I,I=ae.next,ae.next=null,x.lastBaseUpdate=ae,x.shared.pending=null}}while(!0);le===null&&(z=de),x.baseState=z,x.firstBaseUpdate=W,x.lastBaseUpdate=le,b===null&&(x.shared.lanes=0),Rr|=S,i.lanes=S,i.memoizedState=de}}function gy(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function yy(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)gy(l[i],r)}var Lo=H(null),Ou=H(0);function xy(i,r){i=qi,he(Ou,i),he(Lo,r),qi=i|r.baseLanes}function Hh(){he(Ou,qi),he(Lo,Lo.current)}function zh(){qi=Ou.current,re(Lo),re(Ou)}var us=H(null),Cs=null;function Nr(i){var r=i.alternate;he(Zt,Zt.current&1),he(us,i),Cs===null&&(r===null||Lo.current!==null||r.memoizedState!==null)&&(Cs=i)}function Fh(i){he(Zt,Zt.current),he(us,i),Cs===null&&(Cs=i)}function vy(i){i.tag===22?(he(Zt,Zt.current),he(us,i),Cs===null&&(Cs=i)):Cr()}function Cr(){he(Zt,Zt.current),he(us,us.current)}function ds(i){re(us),Cs===i&&(Cs=null),re(Zt)}var Zt=H(0);function Gu(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Qm(l)||Wm(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Vi=0,We=null,Nt=null,an=null,Bu=!1,Uo=!1,ja=!1,Hu=0,tc=0,Vo=null,X1=0;function Yt(){throw Error(s(321))}function qh(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!ls(i[l],r[l]))return!1;return!0}function Kh(i,r,l,d,x,b){return Vi=b,We=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=i===null||i.memoizedState===null?nx:om,ja=!1,b=l(d,x),ja=!1,Uo&&(b=_y(r,l,d,x)),by(i),b}function by(i){Y.H=ic;var r=Nt!==null&&Nt.next!==null;if(Vi=0,an=Nt=We=null,Bu=!1,tc=0,Vo=null,r)throw Error(s(300));i===null||on||(i=i.dependencies,i!==null&&Mu(i)&&(on=!0))}function _y(i,r,l,d){We=i;var x=0;do{if(Uo&&(Vo=null),tc=0,Uo=!1,25<=x)throw Error(s(301));if(x+=1,an=Nt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}Y.H=sx,b=r(l,d)}while(Uo);return b}function Z1(){var i=Y.H,r=i.useState()[0];return r=typeof r.then=="function"?nc(r):r,i=i.useState()[0],(Nt!==null?Nt.memoizedState:null)!==i&&(We.flags|=1024),r}function $h(){var i=Hu!==0;return Hu=0,i}function Yh(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function Jh(i){if(Bu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Bu=!1}Vi=0,an=Nt=We=null,Uo=!1,tc=Hu=0,Vo=null}function On(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?We.memoizedState=an=i:an=an.next=i,an}function en(){if(Nt===null){var i=We.alternate;i=i!==null?i.memoizedState:null}else i=Nt.next;var r=an===null?We.memoizedState:an.next;if(r!==null)an=r,Nt=i;else{if(i===null)throw We.alternate===null?Error(s(467)):Error(s(310));Nt=i,i={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},an===null?We.memoizedState=an=i:an=an.next=i}return an}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nc(i){var r=tc;return tc+=1,Vo===null&&(Vo=[]),i=dy(Vo,i,r),r=We,(an===null?r.memoizedState:an.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?nx:om),i}function Fu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return nc(i);if(i.$$typeof===B)return Sn(i)}throw Error(s(438,String(i)))}function Qh(i){var r=null,l=We.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var d=We.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(x){return x.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=zu(),We.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),d=0;d<i;d++)l[d]=O;return r.index++,l}function ji(i,r){return typeof r=="function"?r(i):r}function qu(i){var r=en();return Wh(r,Nt,i)}function Wh(i,r,l){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var x=i.baseQueue,b=d.pending;if(b!==null){if(x!==null){var S=x.next;x.next=b.next,b.next=S}r.baseQueue=x=b,d.pending=null}if(b=i.baseState,x===null)i.memoizedState=b;else{r=x.next;var I=S=null,z=null,W=r,le=!1;do{var de=W.lane&-536870913;if(de!==W.lane?(it&de)===de:(Vi&de)===de){var te=W.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),de===Ro&&(le=!0);else if((Vi&te)===te){W=W.next,te===Ro&&(le=!0);continue}else de={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(I=z=de,S=b):z=z.next=de,We.lanes|=te,Rr|=te;de=W.action,ja&&l(b,de),b=W.hasEagerState?W.eagerState:l(b,de)}else te={lane:de,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(I=z=te,S=b):z=z.next=te,We.lanes|=de,Rr|=de;W=W.next}while(W!==null&&W!==r);if(z===null?S=b:z.next=I,!ls(b,i.memoizedState)&&(on=!0,le&&(l=Mo,l!==null)))throw l;i.memoizedState=b,i.baseState=S,i.baseQueue=z,d.lastRenderedState=b}return x===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Xh(i){var r=en(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=l.dispatch,x=l.pending,b=r.memoizedState;if(x!==null){l.pending=null;var S=x=x.next;do b=i(b,S.action),S=S.next;while(S!==x);ls(b,r.memoizedState)||(on=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),l.lastRenderedState=b}return[b,d]}function Ty(i,r,l){var d=We,x=en(),b=ct;if(b){if(l===void 0)throw Error(s(407));l=l()}else l=r();var S=!ls((Nt||x).memoizedState,l);if(S&&(x.memoizedState=l,on=!0),x=x.queue,tm(Ay.bind(null,d,x,i),[i]),x.getSnapshot!==r||S||an!==null&&an.memoizedState.tag&1){if(d.flags|=2048,jo(9,{destroy:void 0},Sy.bind(null,d,x,l,r),null),Rt===null)throw Error(s(349));b||(Vi&127)!==0||Ey(d,r,l)}return l}function Ey(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=We.updateQueue,r===null?(r=zu(),We.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Sy(i,r,l,d){r.value=l,r.getSnapshot=d,wy(r)&&Ny(i)}function Ay(i,r,l){return l(function(){wy(r)&&Ny(i)})}function wy(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!ls(i,l)}catch{return!0}}function Ny(i){var r=Ia(i,2);r!==null&&ts(r,i,2)}function Zh(i){var r=On();if(typeof i=="function"){var l=i;if(i=l(),ja){$n(!0);try{l()}finally{$n(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:i},r}function Cy(i,r,l,d){return i.baseState=l,Wh(i,Nt,typeof d=="function"?d:ji)}function eN(i,r,l,d,x){if(Yu(i))throw Error(s(485));if(i=r.action,i!==null){var b={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};Y.T!==null?l(!0):b.isTransition=!1,d(b),l=r.pending,l===null?(b.next=r.pending=b,Iy(r,b)):(b.next=l.next,r.pending=l.next=b)}}function Iy(i,r){var l=r.action,d=r.payload,x=i.state;if(r.isTransition){var b=Y.T,S={};Y.T=S;try{var I=l(x,d),z=Y.S;z!==null&&z(S,I),ky(i,r,I)}catch(W){em(i,r,W)}finally{b!==null&&S.types!==null&&(b.types=S.types),Y.T=b}}else try{b=l(x,d),ky(i,r,b)}catch(W){em(i,r,W)}}function ky(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Ry(i,r,d)},function(d){return em(i,r,d)}):Ry(i,r,l)}function Ry(i,r,l){r.status="fulfilled",r.value=l,My(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Iy(i,l)))}function em(i,r,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=l,My(r),r=r.next;while(r!==d)}i.action=null}function My(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Dy(i,r){return r}function Py(i,r){if(ct){var l=Rt.formState;if(l!==null){e:{var d=We;if(ct){if(Ut){t:{for(var x=Ut,b=Ns;x.nodeType!==8;){if(!b){x=null;break t}if(x=Is(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){Ut=Is(x.nextSibling),d=x.data==="F!";break e}}Tr(d)}d=!1}d&&(r=l[0])}}return l=On(),l.memoizedState=l.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dy,lastRenderedState:r},l.queue=d,l=Zy.bind(null,We,d),d.dispatch=l,d=Zh(!1),b=am.bind(null,We,!1,d.queue),d=On(),x={state:r,dispatch:null,action:i,pending:null},d.queue=x,l=eN.bind(null,We,x,b,l),x.dispatch=l,d.memoizedState=i,[r,l,!1]}function Ly(i){var r=en();return Uy(r,Nt,i)}function Uy(i,r,l){if(r=Wh(i,r,Dy)[0],i=qu(ji)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=nc(r)}catch(S){throw S===Do?Lu:S}else d=r;r=en();var x=r.queue,b=x.dispatch;return l!==r.memoizedState&&(We.flags|=2048,jo(9,{destroy:void 0},tN.bind(null,x,l),null)),[d,b,i]}function tN(i,r){i.action=r}function Vy(i){var r=en(),l=Nt;if(l!==null)return Uy(r,l,i);en(),r=r.memoizedState,l=en();var d=l.queue.dispatch;return l.memoizedState=i,[r,d,!1]}function jo(i,r,l,d){return i={tag:i,create:l,deps:d,inst:r,next:null},r=We.updateQueue,r===null&&(r=zu(),We.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,r.lastEffect=i),i}function jy(){return en().memoizedState}function Ku(i,r,l,d){var x=On();We.flags|=i,x.memoizedState=jo(1|r,{destroy:void 0},l,d===void 0?null:d)}function $u(i,r,l,d){var x=en();d=d===void 0?null:d;var b=x.memoizedState.inst;Nt!==null&&d!==null&&qh(d,Nt.memoizedState.deps)?x.memoizedState=jo(r,b,l,d):(We.flags|=i,x.memoizedState=jo(1|r,b,l,d))}function Oy(i,r){Ku(8390656,8,i,r)}function tm(i,r){$u(2048,8,i,r)}function nN(i){We.flags|=4;var r=We.updateQueue;if(r===null)r=zu(),We.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function Gy(i){var r=en().memoizedState;return nN({ref:r,nextImpl:i}),function(){if((vt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function By(i,r){return $u(4,2,i,r)}function Hy(i,r){return $u(4,4,i,r)}function zy(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Fy(i,r,l){l=l!=null?l.concat([i]):null,$u(4,4,zy.bind(null,r,i),l)}function nm(){}function qy(i,r){var l=en();r=r===void 0?null:r;var d=l.memoizedState;return r!==null&&qh(r,d[1])?d[0]:(l.memoizedState=[i,r],i)}function Ky(i,r){var l=en();r=r===void 0?null:r;var d=l.memoizedState;if(r!==null&&qh(r,d[1]))return d[0];if(d=i(),ja){$n(!0);try{i()}finally{$n(!1)}}return l.memoizedState=[d,r],d}function sm(i,r,l){return l===void 0||(Vi&1073741824)!==0&&(it&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=$x(),We.lanes|=i,Rr|=i,l)}function $y(i,r,l,d){return ls(l,r)?l:Lo.current!==null?(i=sm(i,l,d),ls(i,r)||(on=!0),i):(Vi&42)===0||(Vi&1073741824)!==0&&(it&261930)===0?(on=!0,i.memoizedState=l):(i=$x(),We.lanes|=i,Rr|=i,r)}function Yy(i,r,l,d,x){var b=ce.p;ce.p=b!==0&&8>b?b:8;var S=Y.T,I={};Y.T=I,am(i,!1,r,l);try{var z=x(),W=Y.S;if(W!==null&&W(I,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var le=W1(z,d);sc(i,r,le,ms(i))}else sc(i,r,d,ms(i))}catch(de){sc(i,r,{then:function(){},status:"rejected",reason:de},ms())}finally{ce.p=b,S!==null&&I.types!==null&&(S.types=I.types),Y.T=S}}function sN(){}function im(i,r,l,d){if(i.tag!==5)throw Error(s(476));var x=Jy(i).queue;Yy(i,x,r,Se,l===null?sN:function(){return Qy(i),l(d)})}function Jy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:Se},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Qy(i){var r=Jy(i);r.next===null&&(r=i.alternate.memoizedState),sc(i,r.next.queue,{},ms())}function rm(){return Sn(bc)}function Wy(){return en().memoizedState}function Xy(){return en().memoizedState}function iN(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=ms();i=Ar(l);var d=wr(r,i,l);d!==null&&(ts(d,r,l),Xl(d,r,l)),r={cache:Ph()},i.payload=r;return}r=r.return}}function rN(i,r,l){var d=ms();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yu(i)?ex(r,l):(l=Eh(i,r,l,d),l!==null&&(ts(l,i,d),tx(l,r,d)))}function Zy(i,r,l){var d=ms();sc(i,r,l,d)}function sc(i,r,l,d){var x={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yu(i))ex(r,x);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var S=r.lastRenderedState,I=b(S,l);if(x.hasEagerState=!0,x.eagerState=I,ls(I,S))return Cu(i,r,x,0),Rt===null&&Nu(),!1}catch{}finally{}if(l=Eh(i,r,x,d),l!==null)return ts(l,i,d),tx(l,r,d),!0}return!1}function am(i,r,l,d){if(d={lane:2,revertLane:jm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Yu(i)){if(r)throw Error(s(479))}else r=Eh(i,l,d,2),r!==null&&ts(r,i,2)}function Yu(i){var r=i.alternate;return i===We||r!==null&&r===We}function ex(i,r){Uo=Bu=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function tx(i,r,l){if((l&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,ma(i,l)}}var ic={readContext:Sn,use:Fu,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};ic.useEffectEvent=Yt;var nx={readContext:Sn,use:Fu,useCallback:function(i,r){return On().memoizedState=[i,r===void 0?null:r],i},useContext:Sn,useEffect:Oy,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Ku(4194308,4,zy.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Ku(4194308,4,i,r)},useInsertionEffect:function(i,r){Ku(4,2,i,r)},useMemo:function(i,r){var l=On();r=r===void 0?null:r;var d=i();if(ja){$n(!0);try{i()}finally{$n(!1)}}return l.memoizedState=[d,r],d},useReducer:function(i,r,l){var d=On();if(l!==void 0){var x=l(r);if(ja){$n(!0);try{l(r)}finally{$n(!1)}}}else x=r;return d.memoizedState=d.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},d.queue=i,i=i.dispatch=rN.bind(null,We,i),[d.memoizedState,i]},useRef:function(i){var r=On();return i={current:i},r.memoizedState=i},useState:function(i){i=Zh(i);var r=i.queue,l=Zy.bind(null,We,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:nm,useDeferredValue:function(i,r){var l=On();return sm(l,i,r)},useTransition:function(){var i=Zh(!1);return i=Yy.bind(null,We,i.queue,!0,!1),On().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var d=We,x=On();if(ct){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Rt===null)throw Error(s(349));(it&127)!==0||Ey(d,r,l)}x.memoizedState=l;var b={value:l,getSnapshot:r};return x.queue=b,Oy(Ay.bind(null,d,b,i),[i]),d.flags|=2048,jo(9,{destroy:void 0},Sy.bind(null,d,b,l,r),null),l},useId:function(){var i=On(),r=Rt.identifierPrefix;if(ct){var l=pi,d=mi;l=(d&~(1<<32-Ht(d)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Hu++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=X1++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:rm,useFormState:Py,useActionState:Py,useOptimistic:function(i){var r=On();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=am.bind(null,We,!0,l),l.dispatch=r,[i,r]},useMemoCache:Qh,useCacheRefresh:function(){return On().memoizedState=iN.bind(null,We)},useEffectEvent:function(i){var r=On(),l={impl:i};return r.memoizedState=l,function(){if((vt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},om={readContext:Sn,use:Fu,useCallback:qy,useContext:Sn,useEffect:tm,useImperativeHandle:Fy,useInsertionEffect:By,useLayoutEffect:Hy,useMemo:Ky,useReducer:qu,useRef:jy,useState:function(){return qu(ji)},useDebugValue:nm,useDeferredValue:function(i,r){var l=en();return $y(l,Nt.memoizedState,i,r)},useTransition:function(){var i=qu(ji)[0],r=en().memoizedState;return[typeof i=="boolean"?i:nc(i),r]},useSyncExternalStore:Ty,useId:Wy,useHostTransitionStatus:rm,useFormState:Ly,useActionState:Ly,useOptimistic:function(i,r){var l=en();return Cy(l,Nt,i,r)},useMemoCache:Qh,useCacheRefresh:Xy};om.useEffectEvent=Gy;var sx={readContext:Sn,use:Fu,useCallback:qy,useContext:Sn,useEffect:tm,useImperativeHandle:Fy,useInsertionEffect:By,useLayoutEffect:Hy,useMemo:Ky,useReducer:Xh,useRef:jy,useState:function(){return Xh(ji)},useDebugValue:nm,useDeferredValue:function(i,r){var l=en();return Nt===null?sm(l,i,r):$y(l,Nt.memoizedState,i,r)},useTransition:function(){var i=Xh(ji)[0],r=en().memoizedState;return[typeof i=="boolean"?i:nc(i),r]},useSyncExternalStore:Ty,useId:Wy,useHostTransitionStatus:rm,useFormState:Vy,useActionState:Vy,useOptimistic:function(i,r){var l=en();return Nt!==null?Cy(l,Nt,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Qh,useCacheRefresh:Xy};sx.useEffectEvent=Gy;function lm(i,r,l,d){r=i.memoizedState,l=l(d,r),l=l==null?r:_({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var cm={enqueueSetState:function(i,r,l){i=i._reactInternals;var d=ms(),x=Ar(d);x.payload=r,l!=null&&(x.callback=l),r=wr(i,x,d),r!==null&&(ts(r,i,d),Xl(r,i,d))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var d=ms(),x=Ar(d);x.tag=1,x.payload=r,l!=null&&(x.callback=l),r=wr(i,x,d),r!==null&&(ts(r,i,d),Xl(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=ms(),d=Ar(l);d.tag=2,r!=null&&(d.callback=r),r=wr(i,d,l),r!==null&&(ts(r,i,l),Xl(r,i,l))}};function ix(i,r,l,d,x,b,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,b,S):r.prototype&&r.prototype.isPureReactComponent?!Fl(l,d)||!Fl(x,b):!0}function rx(i,r,l,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==i&&cm.enqueueReplaceState(r,r.state,null)}function Oa(i,r){var l=r;if("ref"in r){l={};for(var d in r)d!=="ref"&&(l[d]=r[d])}if(i=i.defaultProps){l===r&&(l=_({},l));for(var x in i)l[x]===void 0&&(l[x]=i[x])}return l}function ax(i){wu(i)}function ox(i){console.error(i)}function lx(i){wu(i)}function Ju(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function cx(i,r,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function um(i,r,l){return l=Ar(l),l.tag=3,l.payload={element:null},l.callback=function(){Ju(i,r)},l}function ux(i){return i=Ar(i),i.tag=3,i}function dx(i,r,l,d){var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var b=d.value;i.payload=function(){return x(b)},i.callback=function(){cx(r,l,d)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){cx(r,l,d),typeof x!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function aN(i,r,l,d,x){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=l.alternate,r!==null&&ko(r,l,x,!0),l=us.current,l!==null){switch(l.tag){case 31:case 13:return Cs===null?od():l.alternate===null&&Jt===0&&(Jt=3),l.flags&=-257,l.flags|=65536,l.lanes=x,d===Uu?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([d]):r.add(d),Lm(i,d,x)),!1;case 22:return l.flags|=65536,d===Uu?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([d]):l.add(d)),Lm(i,d,x)),!1}throw Error(s(435,l.tag))}return Lm(i,d,x),od(),!1}if(ct)return r=us.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=x,d!==Ih&&(i=Error(s(422),{cause:d}),$l(Ss(i,l)))):(d!==Ih&&(r=Error(s(423),{cause:d}),$l(Ss(r,l))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,d=Ss(d,l),x=um(i.stateNode,d,x),Gh(i,x),Jt!==4&&(Jt=2)),!1;var b=Error(s(520),{cause:d});if(b=Ss(b,l),fc===null?fc=[b]:fc.push(b),Jt!==4&&(Jt=2),r===null)return!0;d=Ss(d,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=x&-x,l.lanes|=i,i=um(l.stateNode,d,i),Gh(l,i),!1;case 1:if(r=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Mr===null||!Mr.has(b))))return l.flags|=65536,x&=-x,l.lanes|=x,x=ux(x),dx(x,i,l,d),Gh(l,x),!1}l=l.return}while(l!==null);return!1}var dm=Error(s(461)),on=!1;function An(i,r,l,d){r.child=i===null?py(r,null,l,d):Va(r,i.child,l,d)}function fx(i,r,l,d,x){l=l.render;var b=r.ref;if("ref"in d){var S={};for(var I in d)I!=="ref"&&(S[I]=d[I])}else S=d;return Da(r),d=Kh(i,r,l,S,b,x),I=$h(),i!==null&&!on?(Yh(i,r,x),Oi(i,r,x)):(ct&&I&&Nh(r),r.flags|=1,An(i,r,d,x),r.child)}function hx(i,r,l,d,x){if(i===null){var b=l.type;return typeof b=="function"&&!Sh(b)&&b.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=b,mx(i,r,b,d,x)):(i=ku(l.type,null,d,r,r.mode,x),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!vm(i,x)){var S=b.memoizedProps;if(l=l.compare,l=l!==null?l:Fl,l(S,d)&&i.ref===r.ref)return Oi(i,r,x)}return r.flags|=1,i=Di(b,d),i.ref=r.ref,i.return=r,r.child=i}function mx(i,r,l,d,x){if(i!==null){var b=i.memoizedProps;if(Fl(b,d)&&i.ref===r.ref)if(on=!1,r.pendingProps=d=b,vm(i,x))(i.flags&131072)!==0&&(on=!0);else return r.lanes=i.lanes,Oi(i,r,x)}return fm(i,r,l,d,x)}function px(i,r,l,d){var x=d.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,i!==null){for(d=r.child=i.child,x=0;d!==null;)x=x|d.lanes|d.childLanes,d=d.sibling;d=x&~b}else d=0,r.child=null;return gx(i,r,b,l,d)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Pu(r,b!==null?b.cachePool:null),b!==null?xy(r,b):Hh(),vy(r);else return d=r.lanes=536870912,gx(i,r,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Pu(r,b.cachePool),xy(r,b),Cr(),r.memoizedState=null):(i!==null&&Pu(r,null),Hh(),Cr());return An(i,r,x,l),r.child}function rc(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function gx(i,r,l,d,x){var b=Uh();return b=b===null?null:{parent:rn._currentValue,pool:b},r.memoizedState={baseLanes:l,cachePool:b},i!==null&&Pu(r,null),Hh(),vy(r),i!==null&&ko(i,r,d,!0),r.childLanes=x,null}function Qu(i,r){return r=Xu({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function yx(i,r,l){return Va(r,i.child,null,l),i=Qu(r,r.pendingProps),i.flags|=2,ds(r),r.memoizedState=null,i}function oN(i,r,l){var d=r.pendingProps,x=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(ct){if(d.mode==="hidden")return i=Qu(r,d),r.lanes=536870912,rc(null,i);if(Fh(r),(i=Ut)?(i=Iv(i,Ns),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:br!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},l=ey(i),l.return=r,r.child=l,En=r,Ut=null)):i=null,i===null)throw Tr(r);return r.lanes=536870912,null}return Qu(r,d)}var b=i.memoizedState;if(b!==null){var S=b.dehydrated;if(Fh(r),x)if(r.flags&256)r.flags&=-257,r=yx(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(on||ko(i,r,l,!1),x=(l&i.childLanes)!==0,on||x){if(d=Rt,d!==null&&(S=pa(d,l),S!==0&&S!==b.retryLane))throw b.retryLane=S,Ia(i,S),ts(d,i,S),dm;od(),r=yx(i,r,l)}else i=b.treeContext,Ut=Is(S.nextSibling),En=r,ct=!0,_r=null,Ns=!1,i!==null&&sy(r,i),r=Qu(r,d),r.flags|=4096;return r}return i=Di(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Wu(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function fm(i,r,l,d,x){return Da(r),l=Kh(i,r,l,d,void 0,x),d=$h(),i!==null&&!on?(Yh(i,r,x),Oi(i,r,x)):(ct&&d&&Nh(r),r.flags|=1,An(i,r,l,x),r.child)}function xx(i,r,l,d,x,b){return Da(r),r.updateQueue=null,l=_y(r,d,l,x),by(i),d=$h(),i!==null&&!on?(Yh(i,r,b),Oi(i,r,b)):(ct&&d&&Nh(r),r.flags|=1,An(i,r,l,b),r.child)}function vx(i,r,l,d,x){if(Da(r),r.stateNode===null){var b=wo,S=l.contextType;typeof S=="object"&&S!==null&&(b=Sn(S)),b=new l(d,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=cm,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=d,b.state=r.memoizedState,b.refs={},jh(r),S=l.contextType,b.context=typeof S=="object"&&S!==null?Sn(S):wo,b.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(lm(r,l,S,d),b.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&cm.enqueueReplaceState(b,b.state,null),ec(r,d,b,x),Zl(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){b=r.stateNode;var I=r.memoizedProps,z=Oa(l,I);b.props=z;var W=b.context,le=l.contextType;S=wo,typeof le=="object"&&le!==null&&(S=Sn(le));var de=l.getDerivedStateFromProps;le=typeof de=="function"||typeof b.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I||W!==S)&&rx(r,b,d,S),Sr=!1;var te=r.memoizedState;b.state=te,ec(r,d,b,x),Zl(),W=r.memoizedState,I||te!==W||Sr?(typeof de=="function"&&(lm(r,l,de,d),W=r.memoizedState),(z=Sr||ix(r,l,z,d,te,W,S))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=W),b.props=d,b.state=W,b.context=S,d=z):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{b=r.stateNode,Oh(i,r),S=r.memoizedProps,le=Oa(l,S),b.props=le,de=r.pendingProps,te=b.context,W=l.contextType,z=wo,typeof W=="object"&&W!==null&&(z=Sn(W)),I=l.getDerivedStateFromProps,(W=typeof I=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==de||te!==z)&&rx(r,b,d,z),Sr=!1,te=r.memoizedState,b.state=te,ec(r,d,b,x),Zl();var ae=r.memoizedState;S!==de||te!==ae||Sr||i!==null&&i.dependencies!==null&&Mu(i.dependencies)?(typeof I=="function"&&(lm(r,l,I,d),ae=r.memoizedState),(le=Sr||ix(r,l,le,d,te,ae,z)||i!==null&&i.dependencies!==null&&Mu(i.dependencies))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ae,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ae,z)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ae),b.props=d,b.state=ae,b.context=z,d=le):(typeof b.componentDidUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&te===i.memoizedState||(r.flags|=1024),d=!1)}return b=d,Wu(i,r),d=(r.flags&128)!==0,b||d?(b=r.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&d?(r.child=Va(r,i.child,null,x),r.child=Va(r,null,l,x)):An(i,r,l,x),r.memoizedState=b.state,i=r.child):i=Oi(i,r,x),i}function bx(i,r,l,d){return Ra(),r.flags|=256,An(i,r,l,d),r.child}var hm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mm(i){return{baseLanes:i,cachePool:cy()}}function pm(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=hs),i}function _x(i,r,l){var d=r.pendingProps,x=!1,b=(r.flags&128)!==0,S;if((S=b)||(S=i!==null&&i.memoizedState===null?!1:(Zt.current&2)!==0),S&&(x=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(ct){if(x?Nr(r):Cr(),(i=Ut)?(i=Iv(i,Ns),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:br!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},l=ey(i),l.return=r,r.child=l,En=r,Ut=null)):i=null,i===null)throw Tr(r);return Wm(i)?r.lanes=32:r.lanes=536870912,null}var I=d.children;return d=d.fallback,x?(Cr(),x=r.mode,I=Xu({mode:"hidden",children:I},x),d=ka(d,x,l,null),I.return=r,d.return=r,I.sibling=d,r.child=I,d=r.child,d.memoizedState=mm(l),d.childLanes=pm(i,S,l),r.memoizedState=hm,rc(null,d)):(Nr(r),gm(r,I))}var z=i.memoizedState;if(z!==null&&(I=z.dehydrated,I!==null)){if(b)r.flags&256?(Nr(r),r.flags&=-257,r=ym(i,r,l)):r.memoizedState!==null?(Cr(),r.child=i.child,r.flags|=128,r=null):(Cr(),I=d.fallback,x=r.mode,d=Xu({mode:"visible",children:d.children},x),I=ka(I,x,l,null),I.flags|=2,d.return=r,I.return=r,d.sibling=I,r.child=d,Va(r,i.child,null,l),d=r.child,d.memoizedState=mm(l),d.childLanes=pm(i,S,l),r.memoizedState=hm,r=rc(null,d));else if(Nr(r),Wm(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var W=S.dgst;S=W,d=Error(s(419)),d.stack="",d.digest=S,$l({value:d,source:null,stack:null}),r=ym(i,r,l)}else if(on||ko(i,r,l,!1),S=(l&i.childLanes)!==0,on||S){if(S=Rt,S!==null&&(d=pa(S,l),d!==0&&d!==z.retryLane))throw z.retryLane=d,Ia(i,d),ts(S,i,d),dm;Qm(I)||od(),r=ym(i,r,l)}else Qm(I)?(r.flags|=192,r.child=i.child,r=null):(i=z.treeContext,Ut=Is(I.nextSibling),En=r,ct=!0,_r=null,Ns=!1,i!==null&&sy(r,i),r=gm(r,d.children),r.flags|=4096);return r}return x?(Cr(),I=d.fallback,x=r.mode,z=i.child,W=z.sibling,d=Di(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,W!==null?I=Di(W,I):(I=ka(I,x,l,null),I.flags|=2),I.return=r,d.return=r,d.sibling=I,r.child=d,rc(null,d),d=r.child,I=i.child.memoizedState,I===null?I=mm(l):(x=I.cachePool,x!==null?(z=rn._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=cy(),I={baseLanes:I.baseLanes|l,cachePool:x}),d.memoizedState=I,d.childLanes=pm(i,S,l),r.memoizedState=hm,rc(i.child,d)):(Nr(r),l=i.child,i=l.sibling,l=Di(l,{mode:"visible",children:d.children}),l.return=r,l.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=l,r.memoizedState=null,l)}function gm(i,r){return r=Xu({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Xu(i,r){return i=cs(22,i,null,r),i.lanes=0,i}function ym(i,r,l){return Va(r,i.child,null,l),i=gm(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Tx(i,r,l){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),Mh(i.return,r,l)}function xm(i,r,l,d,x,b){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:x,treeForkCount:b}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=x,S.treeForkCount=b)}function Ex(i,r,l){var d=r.pendingProps,x=d.revealOrder,b=d.tail;d=d.children;var S=Zt.current,I=(S&2)!==0;if(I?(S=S&1|2,r.flags|=128):S&=1,he(Zt,S),An(i,r,d,l),d=ct?Kl:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Tx(i,l,r);else if(i.tag===19)Tx(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(x){case"forwards":for(l=r.child,x=null;l!==null;)i=l.alternate,i!==null&&Gu(i)===null&&(x=l),l=l.sibling;l=x,l===null?(x=r.child,r.child=null):(x=l.sibling,l.sibling=null),xm(r,!1,x,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,x=r.child,r.child=null;x!==null;){if(i=x.alternate,i!==null&&Gu(i)===null){r.child=x;break}i=x.sibling,x.sibling=l,l=x,x=i}xm(r,!0,l,null,b,d);break;case"together":xm(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Oi(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),Rr|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(ko(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=Di(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Di(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function vm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Mu(i)))}function lN(i,r,l){switch(r.tag){case 3:ge(r,r.stateNode.containerInfo),Er(r,rn,i.memoizedState.cache),Ra();break;case 27:case 5:Te(r);break;case 4:ge(r,r.stateNode.containerInfo);break;case 10:Er(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Fh(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Nr(r),r.flags|=128,null):(l&r.child.childLanes)!==0?_x(i,r,l):(Nr(r),i=Oi(i,r,l),i!==null?i.sibling:null);Nr(r);break;case 19:var x=(i.flags&128)!==0;if(d=(l&r.childLanes)!==0,d||(ko(i,r,l,!1),d=(l&r.childLanes)!==0),x){if(d)return Ex(i,r,l);r.flags|=128}if(x=r.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),he(Zt,Zt.current),d)break;return null;case 22:return r.lanes=0,px(i,r,l,r.pendingProps);case 24:Er(r,rn,i.memoizedState.cache)}return Oi(i,r,l)}function Sx(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)on=!0;else{if(!vm(i,l)&&(r.flags&128)===0)return on=!1,lN(i,r,l);on=(i.flags&131072)!==0}else on=!1,ct&&(r.flags&1048576)!==0&&ny(r,Kl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=La(r.elementType),r.type=i,typeof i=="function")Sh(i)?(d=Oa(i,d),r.tag=1,r=vx(null,r,i,d,l)):(r.tag=0,r=fm(null,r,i,d,l));else{if(i!=null){var x=i.$$typeof;if(x===$){r.tag=11,r=fx(null,r,i,d,l);break e}else if(x===R){r.tag=14,r=hx(null,r,i,d,l);break e}}throw r=pe(i)||i,Error(s(306,r,""))}}return r;case 0:return fm(i,r,r.type,r.pendingProps,l);case 1:return d=r.type,x=Oa(d,r.pendingProps),vx(i,r,d,x,l);case 3:e:{if(ge(r,r.stateNode.containerInfo),i===null)throw Error(s(387));d=r.pendingProps;var b=r.memoizedState;x=b.element,Oh(i,r),ec(r,d,null,l);var S=r.memoizedState;if(d=S.cache,Er(r,rn,d),d!==b.cache&&Dh(r,[rn],l,!0),Zl(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=bx(i,r,d,l);break e}else if(d!==x){x=Ss(Error(s(424)),r),$l(x),r=bx(i,r,d,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ut=Is(i.firstChild),En=r,ct=!0,_r=null,Ns=!0,l=py(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ra(),d===x){r=Oi(i,r,l);break e}An(i,r,d,l)}r=r.child}return r;case 26:return Wu(i,r),i===null?(l=Lv(r.type,null,r.pendingProps,null))?r.memoizedState=l:ct||(l=r.type,i=r.pendingProps,d=md(ye.current).createElement(l),d[Ee]=r,d[Me]=i,wn(d,l,i),Tt(d),r.stateNode=d):r.memoizedState=Lv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Te(r),i===null&&ct&&(d=r.stateNode=Mv(r.type,r.pendingProps,ye.current),En=r,Ns=!0,x=Ut,Ur(r.type)?(Xm=x,Ut=Is(d.firstChild)):Ut=x),An(i,r,r.pendingProps.children,l),Wu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&ct&&((x=d=Ut)&&(d=jN(d,r.type,r.pendingProps,Ns),d!==null?(r.stateNode=d,En=r,Ut=Is(d.firstChild),Ns=!1,x=!0):x=!1),x||Tr(r)),Te(r),x=r.type,b=r.pendingProps,S=i!==null?i.memoizedProps:null,d=b.children,$m(x,b)?d=null:S!==null&&$m(x,S)&&(r.flags|=32),r.memoizedState!==null&&(x=Kh(i,r,Z1,null,null,l),bc._currentValue=x),Wu(i,r),An(i,r,d,l),r.child;case 6:return i===null&&ct&&((i=l=Ut)&&(l=ON(l,r.pendingProps,Ns),l!==null?(r.stateNode=l,En=r,Ut=null,i=!0):i=!1),i||Tr(r)),null;case 13:return _x(i,r,l);case 4:return ge(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=Va(r,null,d,l):An(i,r,d,l),r.child;case 11:return fx(i,r,r.type,r.pendingProps,l);case 7:return An(i,r,r.pendingProps,l),r.child;case 8:return An(i,r,r.pendingProps.children,l),r.child;case 12:return An(i,r,r.pendingProps.children,l),r.child;case 10:return d=r.pendingProps,Er(r,r.type,d.value),An(i,r,d.children,l),r.child;case 9:return x=r.type._context,d=r.pendingProps.children,Da(r),x=Sn(x),d=d(x),r.flags|=1,An(i,r,d,l),r.child;case 14:return hx(i,r,r.type,r.pendingProps,l);case 15:return mx(i,r,r.type,r.pendingProps,l);case 19:return Ex(i,r,l);case 31:return oN(i,r,l);case 22:return px(i,r,l,r.pendingProps);case 24:return Da(r),d=Sn(rn),i===null?(x=Uh(),x===null&&(x=Rt,b=Ph(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=l),x=b),r.memoizedState={parent:d,cache:x},jh(r),Er(r,rn,x)):((i.lanes&l)!==0&&(Oh(i,r),ec(r,null,null,l),Zl()),x=i.memoizedState,b=r.memoizedState,x.parent!==d?(x={parent:d,cache:d},r.memoizedState=x,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=x),Er(r,rn,d)):(d=b.cache,Er(r,rn,d),d!==x.cache&&Dh(r,[rn],l,!0))),An(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Gi(i){i.flags|=4}function bm(i,r,l,d,x){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(x&335544128)===x)if(i.stateNode.complete)i.flags|=8192;else if(Wx())i.flags|=8192;else throw Ua=Uu,Vh}else i.flags&=-16777217}function Ax(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Gv(r))if(Wx())i.flags|=8192;else throw Ua=Uu,Vh}function Zu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Gs():536870912,i.lanes|=r,Ho|=r)}function ac(i,r){if(!ct)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Vt(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(r)for(var x=i.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags&65011712,d|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=d,i.childLanes=l,r}function cN(i,r,l){var d=r.pendingProps;switch(Ch(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(r),null;case 1:return Vt(r),null;case 3:return l=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Ui(rn),xe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Io(r)?Gi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,kh())),Vt(r),null;case 26:var x=r.type,b=r.memoizedState;return i===null?(Gi(r),b!==null?(Vt(r),Ax(r,b)):(Vt(r),bm(r,x,null,d,l))):b?b!==i.memoizedState?(Gi(r),Vt(r),Ax(r,b)):(Vt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&Gi(r),Vt(r),bm(r,x,i,d,l)),null;case 27:if(Be(r),l=ye.current,x=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Gi(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Vt(r),null}i=X.current,Io(r)?iy(r):(i=Mv(x,d,l),r.stateNode=i,Gi(r))}return Vt(r),null;case 5:if(Be(r),x=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Gi(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Vt(r),null}if(b=X.current,Io(r))iy(r);else{var S=md(ye.current);switch(b){case 1:b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=S.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=S.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=S.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?S.createElement(x,{is:d.is}):S.createElement(x)}}b[Ee]=r,b[Me]=d;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)b.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=b;e:switch(wn(b,x,d),x){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Gi(r)}}return Vt(r),bm(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&Gi(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(i=ye.current,Io(r)){if(i=r.stateNode,l=r.memoizedProps,d=null,x=En,x!==null)switch(x.tag){case 27:case 5:d=x.memoizedProps}i[Ee]=r,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||_v(i.nodeValue,l)),i||Tr(r,!0)}else i=md(i).createTextNode(d),i[Ee]=r,r.stateNode=i}return Vt(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(d=Io(r),l!==null){if(i===null){if(!d)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ee]=r}else Ra(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vt(r),i=!1}else l=kh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(ds(r),r):(ds(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Vt(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=Io(r),d!==null&&d.dehydrated!==null){if(i===null){if(!x)throw Error(s(318));if(x=r.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(s(317));x[Ee]=r}else Ra(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vt(r),x=!1}else x=kh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return r.flags&256?(ds(r),r):(ds(r),null)}return ds(r),(r.flags&128)!==0?(r.lanes=l,r):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=r.child,x=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(x=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==x&&(d.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),Zu(r,r.updateQueue),Vt(r),null);case 4:return xe(),i===null&&Hm(r.stateNode.containerInfo),Vt(r),null;case 10:return Ui(r.type),Vt(r),null;case 19:if(re(Zt),d=r.memoizedState,d===null)return Vt(r),null;if(x=(r.flags&128)!==0,b=d.rendering,b===null)if(x)ac(d,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=Gu(i),b!==null){for(r.flags|=128,ac(d,!1),i=b.updateQueue,r.updateQueue=i,Zu(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)Zg(l,i),l=l.sibling;return he(Zt,Zt.current&1|2),ct&&Pi(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&Dt()>id&&(r.flags|=128,x=!0,ac(d,!1),r.lanes=4194304)}else{if(!x)if(i=Gu(b),i!==null){if(r.flags|=128,x=!0,i=i.updateQueue,r.updateQueue=i,Zu(r,i),ac(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!ct)return Vt(r),null}else 2*Dt()-d.renderingStartTime>id&&l!==536870912&&(r.flags|=128,x=!0,ac(d,!1),r.lanes=4194304);d.isBackwards?(b.sibling=r.child,r.child=b):(i=d.last,i!==null?i.sibling=b:r.child=b,d.last=b)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Dt(),i.sibling=null,l=Zt.current,he(Zt,x?l&1|2:l&1),ct&&Pi(r,d.treeForkCount),i):(Vt(r),null);case 22:case 23:return ds(r),zh(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(l&536870912)!==0&&(r.flags&128)===0&&(Vt(r),r.subtreeFlags&6&&(r.flags|=8192)):Vt(r),l=r.updateQueue,l!==null&&Zu(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==l&&(r.flags|=2048),i!==null&&re(Pa),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ui(rn),Vt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function uN(i,r){switch(Ch(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ui(rn),xe(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Be(r),null;case 31:if(r.memoizedState!==null){if(ds(r),r.alternate===null)throw Error(s(340));Ra()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(ds(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ra()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return re(Zt),null;case 4:return xe(),null;case 10:return Ui(r.type),null;case 22:case 23:return ds(r),zh(),i!==null&&re(Pa),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ui(rn),null;case 25:return null;default:return null}}function wx(i,r){switch(Ch(r),r.tag){case 3:Ui(rn),xe();break;case 26:case 27:case 5:Be(r);break;case 4:xe();break;case 31:r.memoizedState!==null&&ds(r);break;case 13:ds(r);break;case 19:re(Zt);break;case 10:Ui(r.type);break;case 22:case 23:ds(r),zh(),i!==null&&re(Pa);break;case 24:Ui(rn)}}function oc(i,r){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var x=d.next;l=x;do{if((l.tag&i)===i){d=void 0;var b=l.create,S=l.inst;d=b(),S.destroy=d}l=l.next}while(l!==x)}}catch(I){At(r,r.return,I)}}function Ir(i,r,l){try{var d=r.updateQueue,x=d!==null?d.lastEffect:null;if(x!==null){var b=x.next;d=b;do{if((d.tag&i)===i){var S=d.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,x=r;var z=l,W=I;try{W()}catch(le){At(x,z,le)}}}d=d.next}while(d!==b)}}catch(le){At(r,r.return,le)}}function Nx(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{yy(r,l)}catch(d){At(i,i.return,d)}}}function Cx(i,r,l){l.props=Oa(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){At(i,r,d)}}function lc(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(x){At(i,r,x)}}function gi(i,r){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(x){At(i,r,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(x){At(i,r,x)}else l.current=null}function Ix(i){var r=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(x){At(i,i.return,x)}}function _m(i,r,l){try{var d=i.stateNode;MN(d,i.type,l,r),d[Me]=r}catch(x){At(i,i.return,x)}}function kx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ur(i.type)||i.tag===4}function Tm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||kx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ur(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Em(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=zs));else if(d!==4&&(d===27&&Ur(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(Em(i,r,l),i=i.sibling;i!==null;)Em(i,r,l),i=i.sibling}function ed(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(d!==4&&(d===27&&Ur(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(ed(i,r,l),i=i.sibling;i!==null;)ed(i,r,l),i=i.sibling}function Rx(i){var r=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,x=r.attributes;x.length;)r.removeAttributeNode(x[0]);wn(r,d,l),r[Ee]=i,r[Me]=l}catch(b){At(i,i.return,b)}}var Bi=!1,ln=!1,Sm=!1,Mx=typeof WeakSet=="function"?WeakSet:Set,yn=null;function dN(i,r){if(i=i.containerInfo,qm=_d,i=Fg(i),yh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var x=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var S=0,I=-1,z=-1,W=0,le=0,de=i,te=null;t:for(;;){for(var ae;de!==l||x!==0&&de.nodeType!==3||(I=S+x),de!==b||d!==0&&de.nodeType!==3||(z=S+d),de.nodeType===3&&(S+=de.nodeValue.length),(ae=de.firstChild)!==null;)te=de,de=ae;for(;;){if(de===i)break t;if(te===l&&++W===x&&(I=S),te===b&&++le===d&&(z=S),(ae=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=ae}l=I===-1||z===-1?null:{start:I,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Km={focusedElem:i,selectionRange:l},_d=!1,yn=r;yn!==null;)if(r=yn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,yn=i;else for(;yn!==null;){switch(r=yn,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)x=i[l],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,l=r,x=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var De=Oa(l.type,x);i=d.getSnapshotBeforeUpdate(De,b),d.__reactInternalSnapshotBeforeUpdate=i}catch(Oe){At(l,l.return,Oe)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)Jm(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,yn=i;break}yn=r.return}}function Dx(i,r,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:zi(i,l),d&4&&oc(5,l);break;case 1:if(zi(i,l),d&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(S){At(l,l.return,S)}else{var x=Oa(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(x,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){At(l,l.return,S)}}d&64&&Nx(l),d&512&&lc(l,l.return);break;case 3:if(zi(i,l),d&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{yy(i,r)}catch(S){At(l,l.return,S)}}break;case 27:r===null&&d&4&&Rx(l);case 26:case 5:zi(i,l),r===null&&d&4&&Ix(l),d&512&&lc(l,l.return);break;case 12:zi(i,l);break;case 31:zi(i,l),d&4&&Ux(i,l);break;case 13:zi(i,l),d&4&&Vx(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=bN.bind(null,l),GN(i,l))));break;case 22:if(d=l.memoizedState!==null||Bi,!d){r=r!==null&&r.memoizedState!==null||ln,x=Bi;var b=ln;Bi=d,(ln=r)&&!b?Fi(i,l,(l.subtreeFlags&8772)!==0):zi(i,l),Bi=x,ln=b}break;case 30:break;default:zi(i,l)}}function Px(i){var r=i.alternate;r!==null&&(i.alternate=null,Px(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Qt(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Bt=null,Wn=!1;function Hi(i,r,l){for(l=l.child;l!==null;)Lx(i,r,l),l=l.sibling}function Lx(i,r,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Kn,l)}catch{}switch(l.tag){case 26:ln||gi(l,r),Hi(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ln||gi(l,r);var d=Bt,x=Wn;Ur(l.type)&&(Bt=l.stateNode,Wn=!1),Hi(i,r,l),yc(l.stateNode),Bt=d,Wn=x;break;case 5:ln||gi(l,r);case 6:if(d=Bt,x=Wn,Bt=null,Hi(i,r,l),Bt=d,Wn=x,Bt!==null)if(Wn)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(l.stateNode)}catch(b){At(l,r,b)}else try{Bt.removeChild(l.stateNode)}catch(b){At(l,r,b)}break;case 18:Bt!==null&&(Wn?(i=Bt,Nv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Qo(i)):Nv(Bt,l.stateNode));break;case 4:d=Bt,x=Wn,Bt=l.stateNode.containerInfo,Wn=!0,Hi(i,r,l),Bt=d,Wn=x;break;case 0:case 11:case 14:case 15:Ir(2,l,r),ln||Ir(4,l,r),Hi(i,r,l);break;case 1:ln||(gi(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Cx(l,r,d)),Hi(i,r,l);break;case 21:Hi(i,r,l);break;case 22:ln=(d=ln)||l.memoizedState!==null,Hi(i,r,l),ln=d;break;default:Hi(i,r,l)}}function Ux(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Qo(i)}catch(l){At(r,r.return,l)}}}function Vx(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Qo(i)}catch(l){At(r,r.return,l)}}function fN(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Mx),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Mx),r;default:throw Error(s(435,i.tag))}}function td(i,r){var l=fN(i);r.forEach(function(d){if(!l.has(d)){l.add(d);var x=_N.bind(null,i,d);d.then(x,x)}})}function Xn(i,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var x=l[d],b=i,S=r,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(Ur(I.type)){Bt=I.stateNode,Wn=!1;break e}break;case 5:Bt=I.stateNode,Wn=!1;break e;case 3:case 4:Bt=I.stateNode.containerInfo,Wn=!0;break e}I=I.return}if(Bt===null)throw Error(s(160));Lx(b,S,x),Bt=null,Wn=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)jx(r,i),r=r.sibling}var Js=null;function jx(i,r){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Xn(r,i),Zn(i),d&4&&(Ir(3,i,i.return),oc(3,i),Ir(5,i,i.return));break;case 1:Xn(r,i),Zn(i),d&512&&(ln||l===null||gi(l,l.return)),d&64&&Bi&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var x=Js;if(Xn(r,i),Zn(i),d&512&&(ln||l===null||gi(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,x=x.ownerDocument||x;t:switch(d){case"title":b=x.getElementsByTagName("title")[0],(!b||b[st]||b[Ee]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(d),x.head.insertBefore(b,x.querySelector("head > title"))),wn(b,d,l),b[Ee]=i,Tt(b),d=b;break e;case"link":var S=jv("link","href",x).get(d+(l.href||""));if(S){for(var I=0;I<S.length;I++)if(b=S[I],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(I,1);break t}}b=x.createElement(d),wn(b,d,l),x.head.appendChild(b);break;case"meta":if(S=jv("meta","content",x).get(d+(l.content||""))){for(I=0;I<S.length;I++)if(b=S[I],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(I,1);break t}}b=x.createElement(d),wn(b,d,l),x.head.appendChild(b);break;default:throw Error(s(468,d))}b[Ee]=i,Tt(b),d=b}i.stateNode=d}else Ov(x,i.type,i.stateNode);else i.stateNode=Vv(x,d,i.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?Ov(x,i.type,i.stateNode):Vv(x,d,i.memoizedProps)):d===null&&i.stateNode!==null&&_m(i,i.memoizedProps,l.memoizedProps)}break;case 27:Xn(r,i),Zn(i),d&512&&(ln||l===null||gi(l,l.return)),l!==null&&d&4&&_m(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Xn(r,i),Zn(i),d&512&&(ln||l===null||gi(l,l.return)),i.flags&32){x=i.stateNode;try{Qn(x,"")}catch(De){At(i,i.return,De)}}d&4&&i.stateNode!=null&&(x=i.memoizedProps,_m(i,x,l!==null?l.memoizedProps:x)),d&1024&&(Sm=!0);break;case 6:if(Xn(r,i),Zn(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(De){At(i,i.return,De)}}break;case 3:if(yd=null,x=Js,Js=pd(r.containerInfo),Xn(r,i),Js=x,Zn(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Qo(r.containerInfo)}catch(De){At(i,i.return,De)}Sm&&(Sm=!1,Ox(i));break;case 4:d=Js,Js=pd(i.stateNode.containerInfo),Xn(r,i),Zn(i),Js=d;break;case 12:Xn(r,i),Zn(i);break;case 31:Xn(r,i),Zn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,td(i,d)));break;case 13:Xn(r,i),Zn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sd=Dt()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,td(i,d)));break;case 22:x=i.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,W=Bi,le=ln;if(Bi=W||x,ln=le||z,Xn(r,i),ln=le,Bi=W,Zn(i),d&8192)e:for(r=i.stateNode,r._visibility=x?r._visibility&-2:r._visibility|1,x&&(l===null||z||Bi||ln||Ga(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){z=l=r;try{if(b=z.stateNode,x)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=z.stateNode;var de=z.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(De){At(z,z.return,De)}}}else if(r.tag===6){if(l===null){z=r;try{z.stateNode.nodeValue=x?"":z.memoizedProps}catch(De){At(z,z.return,De)}}}else if(r.tag===18){if(l===null){z=r;try{var ae=z.stateNode;x?Cv(ae,!0):Cv(z.stateNode,!1)}catch(De){At(z,z.return,De)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,td(i,l))));break;case 19:Xn(r,i),Zn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,td(i,d)));break;case 30:break;case 21:break;default:Xn(r,i),Zn(i)}}function Zn(i){var r=i.flags;if(r&2){try{for(var l,d=i.return;d!==null;){if(kx(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var x=l.stateNode,b=Tm(i);ed(i,b,x);break;case 5:var S=l.stateNode;l.flags&32&&(Qn(S,""),l.flags&=-33);var I=Tm(i);ed(i,I,S);break;case 3:case 4:var z=l.stateNode.containerInfo,W=Tm(i);Em(i,W,z);break;default:throw Error(s(161))}}catch(le){At(i,i.return,le)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Ox(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Ox(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function zi(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Dx(i,r.alternate,r),r=r.sibling}function Ga(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ir(4,r,r.return),Ga(r);break;case 1:gi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Cx(r,r.return,l),Ga(r);break;case 27:yc(r.stateNode);case 26:case 5:gi(r,r.return),Ga(r);break;case 22:r.memoizedState===null&&Ga(r);break;case 30:Ga(r);break;default:Ga(r)}i=i.sibling}}function Fi(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,x=i,b=r,S=b.flags;switch(b.tag){case 0:case 11:case 15:Fi(x,b,l),oc(4,b);break;case 1:if(Fi(x,b,l),d=b,x=d.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){At(d,d.return,W)}if(d=b,x=d.updateQueue,x!==null){var I=d.stateNode;try{var z=x.shared.hiddenCallbacks;if(z!==null)for(x.shared.hiddenCallbacks=null,x=0;x<z.length;x++)gy(z[x],I)}catch(W){At(d,d.return,W)}}l&&S&64&&Nx(b),lc(b,b.return);break;case 27:Rx(b);case 26:case 5:Fi(x,b,l),l&&d===null&&S&4&&Ix(b),lc(b,b.return);break;case 12:Fi(x,b,l);break;case 31:Fi(x,b,l),l&&S&4&&Ux(x,b);break;case 13:Fi(x,b,l),l&&S&4&&Vx(x,b);break;case 22:b.memoizedState===null&&Fi(x,b,l),lc(b,b.return);break;case 30:break;default:Fi(x,b,l)}r=r.sibling}}function Am(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Yl(l))}function wm(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Yl(i))}function Qs(i,r,l,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Gx(i,r,l,d),r=r.sibling}function Gx(i,r,l,d){var x=r.flags;switch(r.tag){case 0:case 11:case 15:Qs(i,r,l,d),x&2048&&oc(9,r);break;case 1:Qs(i,r,l,d);break;case 3:Qs(i,r,l,d),x&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Yl(i)));break;case 12:if(x&2048){Qs(i,r,l,d),i=r.stateNode;try{var b=r.memoizedProps,S=b.id,I=b.onPostCommit;typeof I=="function"&&I(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){At(r,r.return,z)}}else Qs(i,r,l,d);break;case 31:Qs(i,r,l,d);break;case 13:Qs(i,r,l,d);break;case 23:break;case 22:b=r.stateNode,S=r.alternate,r.memoizedState!==null?b._visibility&2?Qs(i,r,l,d):cc(i,r):b._visibility&2?Qs(i,r,l,d):(b._visibility|=2,Oo(i,r,l,d,(r.subtreeFlags&10256)!==0||!1)),x&2048&&Am(S,r);break;case 24:Qs(i,r,l,d),x&2048&&wm(r.alternate,r);break;default:Qs(i,r,l,d)}}function Oo(i,r,l,d,x){for(x=x&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,S=r,I=l,z=d,W=S.flags;switch(S.tag){case 0:case 11:case 15:Oo(b,S,I,z,x),oc(8,S);break;case 23:break;case 22:var le=S.stateNode;S.memoizedState!==null?le._visibility&2?Oo(b,S,I,z,x):cc(b,S):(le._visibility|=2,Oo(b,S,I,z,x)),x&&W&2048&&Am(S.alternate,S);break;case 24:Oo(b,S,I,z,x),x&&W&2048&&wm(S.alternate,S);break;default:Oo(b,S,I,z,x)}r=r.sibling}}function cc(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,d=r,x=d.flags;switch(d.tag){case 22:cc(l,d),x&2048&&Am(d.alternate,d);break;case 24:cc(l,d),x&2048&&wm(d.alternate,d);break;default:cc(l,d)}r=r.sibling}}var uc=8192;function Go(i,r,l){if(i.subtreeFlags&uc)for(i=i.child;i!==null;)Bx(i,r,l),i=i.sibling}function Bx(i,r,l){switch(i.tag){case 26:Go(i,r,l),i.flags&uc&&i.memoizedState!==null&&XN(l,Js,i.memoizedState,i.memoizedProps);break;case 5:Go(i,r,l);break;case 3:case 4:var d=Js;Js=pd(i.stateNode.containerInfo),Go(i,r,l),Js=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=uc,uc=16777216,Go(i,r,l),uc=d):Go(i,r,l));break;default:Go(i,r,l)}}function Hx(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function dc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];yn=d,Fx(d,i)}Hx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)zx(i),i=i.sibling}function zx(i){switch(i.tag){case 0:case 11:case 15:dc(i),i.flags&2048&&Ir(9,i,i.return);break;case 3:dc(i);break;case 12:dc(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,nd(i)):dc(i);break;default:dc(i)}}function nd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];yn=d,Fx(d,i)}Hx(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ir(8,r,r.return),nd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,nd(r));break;default:nd(r)}i=i.sibling}}function Fx(i,r){for(;yn!==null;){var l=yn;switch(l.tag){case 0:case 11:case 15:Ir(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Yl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,yn=d;else e:for(l=i;yn!==null;){d=yn;var x=d.sibling,b=d.return;if(Px(d),d===l){yn=null;break e}if(x!==null){x.return=b,yn=x;break e}yn=b}}}var hN={getCacheForType:function(i){var r=Sn(rn),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return Sn(rn).controller.signal}},mN=typeof WeakMap=="function"?WeakMap:Map,vt=0,Rt=null,et=null,it=0,St=0,fs=null,kr=!1,Bo=!1,Nm=!1,qi=0,Jt=0,Rr=0,Ba=0,Cm=0,hs=0,Ho=0,fc=null,es=null,Im=!1,sd=0,qx=0,id=1/0,rd=null,Mr=null,mn=0,Dr=null,zo=null,Ki=0,km=0,Rm=null,Kx=null,hc=0,Mm=null;function ms(){return(vt&2)!==0&&it!==0?it&-it:Y.T!==null?jm():ga()}function $x(){if(hs===0)if((it&536870912)===0||ct){var i=Ni;Ni<<=1,(Ni&3932160)===0&&(Ni=262144),hs=i}else hs=536870912;return i=us.current,i!==null&&(i.flags|=32),hs}function ts(i,r,l){(i===Rt&&(St===2||St===9)||i.cancelPendingCommit!==null)&&(Fo(i,0),Pr(i,it,hs,!1)),ai(i,l),((vt&2)===0||i!==Rt)&&(i===Rt&&((vt&2)===0&&(Ba|=l),Jt===4&&Pr(i,it,hs,!1)),yi(i))}function Yx(i,r,l){if((vt&6)!==0)throw Error(s(327));var d=!l&&(r&127)===0&&(r&i.expiredLanes)===0||rs(i,r),x=d?yN(i,r):Pm(i,r,!0),b=d;do{if(x===0){Bo&&!d&&Pr(i,r,0,!1);break}else{if(l=i.current.alternate,b&&!pN(l)){x=Pm(i,r,!1),b=!1;continue}if(x===2){if(b=r,i.errorRecoveryDisabledLanes&b)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var I=i;x=fc;var z=I.current.memoizedState.isDehydrated;if(z&&(Fo(I,S).flags|=256),S=Pm(I,S,!1),S!==2){if(Nm&&!z){I.errorRecoveryDisabledLanes|=b,Ba|=b,x=4;break e}b=es,es=x,b!==null&&(es===null?es=b:es.push.apply(es,b))}x=S}if(b=!1,x!==2)continue}}if(x===1){Fo(i,0),Pr(i,r,0,!0);break}e:{switch(d=i,b=x,b){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Pr(d,r,hs,!kr);break e;case 2:es=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(x=sd+300-Dt(),10<x)){if(Pr(d,r,hs,!kr),xs(d,0,!0)!==0)break e;Ki=r,d.timeoutHandle=Av(Jx.bind(null,d,l,es,rd,Im,r,hs,Ba,Ho,kr,b,"Throttled",-0,0),x);break e}Jx(d,l,es,rd,Im,r,hs,Ba,Ho,kr,b,null,-0,0)}}break}while(!0);yi(i)}function Jx(i,r,l,d,x,b,S,I,z,W,le,de,te,ae){if(i.timeoutHandle=-1,de=r.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zs},Bx(r,b,de);var De=(b&62914560)===b?sd-Dt():(b&4194048)===b?qx-Dt():0;if(De=ZN(de,De),De!==null){Ki=b,i.cancelPendingCommit=De(sv.bind(null,i,r,b,l,d,x,S,I,z,le,de,null,te,ae)),Pr(i,b,S,!W);return}}sv(i,r,b,l,d,x,S,I,z)}function pN(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var x=l[d],b=x.getSnapshot;x=x.value;try{if(!ls(b(),x))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Pr(i,r,l,d){r&=~Cm,r&=~Ba,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var x=r;0<x;){var b=31-Ht(x),S=1<<b;d[b]=-1,x&=~S}l!==0&&Ci(i,l,r)}function ad(){return(vt&6)===0?(mc(0),!1):!0}function Dm(){if(et!==null){if(St===0)var i=et.return;else i=et,Li=Ma=null,Jh(i),Po=null,Ql=0,i=et;for(;i!==null;)wx(i.alternate,i),i=i.return;et=null}}function Fo(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,LN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ki=0,Dm(),Rt=i,et=l=Di(i.current,null),it=r,St=0,fs=null,kr=!1,Bo=rs(i,r),Nm=!1,Ho=hs=Cm=Ba=Rr=Jt=0,es=fc=null,Im=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var x=31-Ht(d),b=1<<x;r|=i[x],d&=~b}return qi=r,Nu(),l}function Qx(i,r){We=null,Y.H=ic,r===Do||r===Lu?(r=fy(),St=3):r===Vh?(r=fy(),St=4):St=r===dm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,fs=r,et===null&&(Jt=1,Ju(i,Ss(r,i.current)))}function Wx(){var i=us.current;return i===null?!0:(it&4194048)===it?Cs===null:(it&62914560)===it||(it&536870912)!==0?i===Cs:!1}function Xx(){var i=Y.H;return Y.H=ic,i===null?ic:i}function Zx(){var i=Y.A;return Y.A=hN,i}function od(){Jt=4,kr||(it&4194048)!==it&&us.current!==null||(Bo=!0),(Rr&134217727)===0&&(Ba&134217727)===0||Rt===null||Pr(Rt,it,hs,!1)}function Pm(i,r,l){var d=vt;vt|=2;var x=Xx(),b=Zx();(Rt!==i||it!==r)&&(rd=null,Fo(i,r)),r=!1;var S=Jt;e:do try{if(St!==0&&et!==null){var I=et,z=fs;switch(St){case 8:Dm(),S=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(r=!0);var W=St;if(St=0,fs=null,qo(i,I,z,W),l&&Bo){S=0;break e}break;default:W=St,St=0,fs=null,qo(i,I,z,W)}}gN(),S=Jt;break}catch(le){Qx(i,le)}while(!0);return r&&i.shellSuspendCounter++,Li=Ma=null,vt=d,Y.H=x,Y.A=b,et===null&&(Rt=null,it=0,Nu()),S}function gN(){for(;et!==null;)ev(et)}function yN(i,r){var l=vt;vt|=2;var d=Xx(),x=Zx();Rt!==i||it!==r?(rd=null,id=Dt()+500,Fo(i,r)):Bo=rs(i,r);e:do try{if(St!==0&&et!==null){r=et;var b=fs;t:switch(St){case 1:St=0,fs=null,qo(i,r,b,1);break;case 2:case 9:if(uy(b)){St=0,fs=null,tv(r);break}r=function(){St!==2&&St!==9||Rt!==i||(St=7),yi(i)},b.then(r,r);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:uy(b)?(St=0,fs=null,tv(r)):(St=0,fs=null,qo(i,r,b,7));break;case 5:var S=null;switch(et.tag){case 26:S=et.memoizedState;case 5:case 27:var I=et;if(S?Gv(S):I.stateNode.complete){St=0,fs=null;var z=I.sibling;if(z!==null)et=z;else{var W=I.return;W!==null?(et=W,ld(W)):et=null}break t}}St=0,fs=null,qo(i,r,b,5);break;case 6:St=0,fs=null,qo(i,r,b,6);break;case 8:Dm(),Jt=6;break e;default:throw Error(s(462))}}xN();break}catch(le){Qx(i,le)}while(!0);return Li=Ma=null,Y.H=d,Y.A=x,vt=l,et!==null?0:(Rt=null,it=0,Nu(),Jt)}function xN(){for(;et!==null&&!kl();)ev(et)}function ev(i){var r=Sx(i.alternate,i,qi);i.memoizedProps=i.pendingProps,r===null?ld(i):et=r}function tv(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=xx(l,r,r.pendingProps,r.type,void 0,it);break;case 11:r=xx(l,r,r.pendingProps,r.type.render,r.ref,it);break;case 5:Jh(r);default:wx(l,r),r=et=Zg(r,qi),r=Sx(l,r,qi)}i.memoizedProps=i.pendingProps,r===null?ld(i):et=r}function qo(i,r,l,d){Li=Ma=null,Jh(r),Po=null,Ql=0;var x=r.return;try{if(aN(i,x,r,l,it)){Jt=1,Ju(i,Ss(l,i.current)),et=null;return}}catch(b){if(x!==null)throw et=x,b;Jt=1,Ju(i,Ss(l,i.current)),et=null;return}r.flags&32768?(ct||d===1?i=!0:Bo||(it&536870912)!==0?i=!1:(kr=i=!0,(d===2||d===9||d===3||d===6)&&(d=us.current,d!==null&&d.tag===13&&(d.flags|=16384))),nv(r,i)):ld(r)}function ld(i){var r=i;do{if((r.flags&32768)!==0){nv(r,kr);return}i=r.return;var l=cN(r.alternate,r,qi);if(l!==null){et=l;return}if(r=r.sibling,r!==null){et=r;return}et=r=i}while(r!==null);Jt===0&&(Jt=5)}function nv(i,r){do{var l=uN(i.alternate,i);if(l!==null){l.flags&=32767,et=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){et=i;return}et=i=l}while(i!==null);Jt=6,et=null}function sv(i,r,l,d,x,b,S,I,z){i.cancelPendingCommit=null;do cd();while(mn!==0);if((vt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(b=r.lanes|r.childLanes,b|=Th,Rl(i,l,b,S,I,z),i===Rt&&(et=Rt=null,it=0),zo=r,Dr=i,Ki=l,km=b,Rm=x,Kx=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,TN(gs,function(){return lv(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,x=ce.p,ce.p=2,S=vt,vt|=4;try{dN(i,r,l)}finally{vt=S,ce.p=x,Y.T=d}}mn=1,iv(),rv(),av()}}function iv(){if(mn===1){mn=0;var i=Dr,r=zo,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var d=ce.p;ce.p=2;var x=vt;vt|=4;try{jx(r,i);var b=Km,S=Fg(i.containerInfo),I=b.focusedElem,z=b.selectionRange;if(S!==I&&I&&I.ownerDocument&&zg(I.ownerDocument.documentElement,I)){if(z!==null&&yh(I)){var W=z.start,le=z.end;if(le===void 0&&(le=W),"selectionStart"in I)I.selectionStart=W,I.selectionEnd=Math.min(le,I.value.length);else{var de=I.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var ae=te.getSelection(),De=I.textContent.length,Oe=Math.min(z.start,De),It=z.end===void 0?Oe:Math.min(z.end,De);!ae.extend&&Oe>It&&(S=It,It=Oe,Oe=S);var K=Hg(I,Oe),q=Hg(I,It);if(K&&q&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var Q=de.createRange();Q.setStart(K.node,K.offset),ae.removeAllRanges(),Oe>It?(ae.addRange(Q),ae.extend(q.node,q.offset)):(Q.setEnd(q.node,q.offset),ae.addRange(Q))}}}}for(de=[],ae=I;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<de.length;I++){var ue=de[I];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}_d=!!qm,Km=qm=null}finally{vt=x,ce.p=d,Y.T=l}}i.current=r,mn=2}}function rv(){if(mn===2){mn=0;var i=Dr,r=zo,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var d=ce.p;ce.p=2;var x=vt;vt|=4;try{Dx(i,r.alternate,r)}finally{vt=x,ce.p=d,Y.T=l}}mn=3}}function av(){if(mn===4||mn===3){mn=0,ua();var i=Dr,r=zo,l=Ki,d=Kx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?mn=5:(mn=0,zo=Dr=null,ov(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(Mr=null),Bs(l),r=r.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Kn,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=Y.T,x=ce.p,ce.p=2,Y.T=null;try{for(var b=i.onRecoverableError,S=0;S<d.length;S++){var I=d[S];b(I.value,{componentStack:I.stack})}}finally{Y.T=r,ce.p=x}}(Ki&3)!==0&&cd(),yi(i),x=i.pendingLanes,(l&261930)!==0&&(x&42)!==0?i===Mm?hc++:(hc=0,Mm=i):hc=0,mc(0)}}function ov(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Yl(r)))}function cd(){return iv(),rv(),av(),lv()}function lv(){if(mn!==5)return!1;var i=Dr,r=km;km=0;var l=Bs(Ki),d=Y.T,x=ce.p;try{ce.p=32>l?32:l,Y.T=null,l=Rm,Rm=null;var b=Dr,S=Ki;if(mn=0,zo=Dr=null,Ki=0,(vt&6)!==0)throw Error(s(331));var I=vt;if(vt|=4,zx(b.current),Gx(b,b.current,S,l),vt=I,mc(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Kn,b)}catch{}return!0}finally{ce.p=x,Y.T=d,ov(i,r)}}function cv(i,r,l){r=Ss(l,r),r=um(i.stateNode,r,2),i=wr(i,r,2),i!==null&&(ai(i,2),yi(i))}function At(i,r,l){if(i.tag===3)cv(i,i,l);else for(;r!==null;){if(r.tag===3){cv(r,i,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Mr===null||!Mr.has(d))){i=Ss(l,i),l=ux(2),d=wr(r,l,2),d!==null&&(dx(l,d,r,i),ai(d,2),yi(d));break}}r=r.return}}function Lm(i,r,l){var d=i.pingCache;if(d===null){d=i.pingCache=new mN;var x=new Set;d.set(r,x)}else x=d.get(r),x===void 0&&(x=new Set,d.set(r,x));x.has(l)||(Nm=!0,x.add(l),i=vN.bind(null,i,r,l),r.then(i,i))}function vN(i,r,l){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Rt===i&&(it&l)===l&&(Jt===4||Jt===3&&(it&62914560)===it&&300>Dt()-sd?(vt&2)===0&&Fo(i,0):Cm|=l,Ho===it&&(Ho=0)),yi(i)}function uv(i,r){r===0&&(r=Gs()),i=Ia(i,r),i!==null&&(ai(i,r),yi(i))}function bN(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),uv(i,l)}function _N(i,r){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,x=i.memoizedState;x!==null&&(l=x.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),uv(i,l)}function TN(i,r){return qt(i,r)}var ud=null,Ko=null,Um=!1,dd=!1,Vm=!1,Lr=0;function yi(i){i!==Ko&&i.next===null&&(Ko===null?ud=Ko=i:Ko=Ko.next=i),dd=!0,Um||(Um=!0,SN())}function mc(i,r){if(!Vm&&dd){Vm=!0;do for(var l=!1,d=ud;d!==null;){if(i!==0){var x=d.pendingLanes;if(x===0)var b=0;else{var S=d.suspendedLanes,I=d.pingedLanes;b=(1<<31-Ht(42|i)+1)-1,b&=x&~(S&~I),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,mv(d,b))}else b=it,b=xs(d,d===Rt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||rs(d,b)||(l=!0,mv(d,b));d=d.next}while(l);Vm=!1}}function EN(){dv()}function dv(){dd=Um=!1;var i=0;Lr!==0&&PN()&&(i=Lr);for(var r=Dt(),l=null,d=ud;d!==null;){var x=d.next,b=fv(d,r);b===0?(d.next=null,l===null?ud=x:l.next=x,x===null&&(Ko=l)):(l=d,(i!==0||(b&3)!==0)&&(dd=!0)),d=x}mn!==0&&mn!==5||mc(i),Lr!==0&&(Lr=0)}function fv(i,r){for(var l=i.suspendedLanes,d=i.pingedLanes,x=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var S=31-Ht(b),I=1<<S,z=x[S];z===-1?((I&l)===0||(I&d)!==0)&&(x[S]=fo(I,r)):z<=r&&(i.expiredLanes|=I),b&=~I}if(r=Rt,l=it,l=xs(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===r&&(St===2||St===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&qn(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||rs(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(d!==null&&qn(d),Bs(l)){case 2:case 8:l=fa;break;case 32:l=gs;break;case 268435456:l=mt;break;default:l=gs}return d=hv.bind(null,i),l=qt(l,d),i.callbackPriority=r,i.callbackNode=l,r}return d!==null&&d!==null&&qn(d),i.callbackPriority=2,i.callbackNode=null,2}function hv(i,r){if(mn!==0&&mn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(cd()&&i.callbackNode!==l)return null;var d=it;return d=xs(i,i===Rt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Yx(i,d,r),fv(i,Dt()),i.callbackNode!=null&&i.callbackNode===l?hv.bind(null,i):null)}function mv(i,r){if(cd())return null;Yx(i,r,!0)}function SN(){UN(function(){(vt&6)!==0?qt(da,EN):dv()})}function jm(){if(Lr===0){var i=Ro;i===0&&(i=is,is<<=1,(is&261888)===0&&(is=256)),Lr=i}return Lr}function pv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:go(""+i)}function gv(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function AN(i,r,l,d,x){if(r==="submit"&&l&&l.stateNode===x){var b=pv((x[Me]||null).action),S=d.submitter;S&&(r=(r=S[Me]||null)?pv(r.formAction):S.getAttribute("formAction"),r!==null&&(b=r,S=null));var I=new ui("action","action",null,d,x);i.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Lr!==0){var z=S?gv(x,S):new FormData(x);im(l,{pending:!0,data:z,method:x.method,action:b},null,z)}}else typeof b=="function"&&(I.preventDefault(),z=S?gv(x,S):new FormData(x),im(l,{pending:!0,data:z,method:x.method,action:b},b,z))},currentTarget:x}]})}}for(var Om=0;Om<_h.length;Om++){var Gm=_h[Om],wN=Gm.toLowerCase(),NN=Gm[0].toUpperCase()+Gm.slice(1);Ys(wN,"on"+NN)}Ys($g,"onAnimationEnd"),Ys(Yg,"onAnimationIteration"),Ys(Jg,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(z1,"onTransitionRun"),Ys(F1,"onTransitionStart"),Ys(q1,"onTransitionCancel"),Ys(Qg,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function yv(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],x=d.event;d=d.listeners;e:{var b=void 0;if(r)for(var S=d.length-1;0<=S;S--){var I=d[S],z=I.instance,W=I.currentTarget;if(I=I.listener,z!==b&&x.isPropagationStopped())break e;b=I,x.currentTarget=W;try{b(x)}catch(le){wu(le)}x.currentTarget=null,b=z}else for(S=0;S<d.length;S++){if(I=d[S],z=I.instance,W=I.currentTarget,I=I.listener,z!==b&&x.isPropagationStopped())break e;b=I,x.currentTarget=W;try{b(x)}catch(le){wu(le)}x.currentTarget=null,b=z}}}}function tt(i,r){var l=r[ut];l===void 0&&(l=r[ut]=new Set);var d=i+"__bubble";l.has(d)||(xv(r,i,2,!1),l.add(d))}function Bm(i,r,l){var d=0;r&&(d|=4),xv(l,i,d,r)}var fd="_reactListening"+Math.random().toString(36).slice(2);function Hm(i){if(!i[fd]){i[fd]=!0,Yn.forEach(function(l){l!=="selectionchange"&&(CN.has(l)||Bm(l,!1,i),Bm(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[fd]||(r[fd]=!0,Bm("selectionchange",!1,r))}}function xv(i,r,l,d){switch($v(r)){case 2:var x=nC;break;case 8:x=sC;break;default:x=sp}l=x.bind(null,r,l,i),x=void 0,!_a||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(x=!0),d?x!==void 0?i.addEventListener(r,l,{capture:!0,passive:x}):i.addEventListener(r,l,!0):x!==void 0?i.addEventListener(r,l,{passive:x}):i.addEventListener(r,l,!1)}function zm(i,r,l,d,x){var b=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var I=d.stateNode.containerInfo;if(I===x)break;if(S===4)for(S=d.return;S!==null;){var z=S.tag;if((z===3||z===4)&&S.stateNode.containerInfo===x)return;S=S.return}for(;I!==null;){if(S=Wt(I),S===null)return;if(z=S.tag,z===5||z===6||z===26||z===27){d=b=S;continue e}I=I.parentNode}}d=d.return}gr(function(){var W=b,le=bs(l),de=[];e:{var te=Wg.get(i);if(te!==void 0){var ae=ui,De=i;switch(i){case"keypress":if(Ea(l)===0)break e;case"keydown":case"keyup":ae=Eu;break;case"focusin":De="focus",ae=Aa;break;case"focusout":De="blur",ae=Aa;break;case"beforeblur":case"afterblur":ae=Aa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=E;break;case $g:case Yg:case Jg:ae=gu;break;case Qg:ae=P;break;case"scroll":case"scrollend":ae=Ol;break;case"wheel":ae=ie;break;case"copy":case"cut":case"paste":ae=yu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Mi;break;case"toggle":case"beforetoggle":ae=Qe}var Oe=(r&4)!==0,It=!Oe&&(i==="scroll"||i==="scrollend"),K=Oe?te!==null?te+"Capture":null:te;Oe=[];for(var q=W,Q;q!==null;){var ue=q;if(Q=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Q===null||K===null||(ue=Fs(q,K),ue!=null&&Oe.push(gc(q,ue,Q))),It)break;q=q.return}0<Oe.length&&(te=new ae(te,De,null,l,le),de.push({event:te,listeners:Oe}))}}if((r&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",te&&l!==Ul&&(De=l.relatedTarget||l.fromElement)&&(Wt(De)||De[Le]))break e;if((ae||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(De=l.relatedTarget||l.toElement,ae=W,De=De?Wt(De):null,De!==null&&(It=o(De),Oe=De.tag,De!==It||Oe!==5&&Oe!==27&&Oe!==6)&&(De=null)):(ae=null,De=W),ae!==De)){if(Oe=Gl,ue="onMouseLeave",K="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=Mi,ue="onPointerLeave",K="onPointerEnter",q="pointer"),It=ae==null?te:zt(ae),Q=De==null?te:zt(De),te=new Oe(ue,q+"leave",ae,l,le),te.target=It,te.relatedTarget=Q,ue=null,Wt(le)===W&&(Oe=new Oe(K,q+"enter",De,l,le),Oe.target=Q,Oe.relatedTarget=It,ue=Oe),It=ue,ae&&De)t:{for(Oe=IN,K=ae,q=De,Q=0,ue=K;ue;ue=Oe(ue))Q++;ue=0;for(var Ve=q;Ve;Ve=Oe(Ve))ue++;for(;0<Q-ue;)K=Oe(K),Q--;for(;0<ue-Q;)q=Oe(q),ue--;for(;Q--;){if(K===q||q!==null&&K===q.alternate){Oe=K;break t}K=Oe(K),q=Oe(q)}Oe=null}else Oe=null;ae!==null&&vv(de,te,ae,Oe,!1),De!==null&&It!==null&&vv(de,It,De,Oe,!0)}}e:{if(te=W?zt(W):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var pt=Ug;else if(Pg(te))if(Vg)pt=G1;else{pt=j1;var Pe=V1}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&po(W.elementType)&&(pt=Ug):pt=O1;if(pt&&(pt=pt(i,W))){Lg(de,pt,l,le);break e}Pe&&Pe(i,te,W),i==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&Dl(te,"number",te.value)}switch(Pe=W?zt(W):window,i){case"focusin":(Pg(Pe)||Pe.contentEditable==="true")&&(Eo=Pe,xh=W,ql=null);break;case"focusout":ql=xh=Eo=null;break;case"mousedown":vh=!0;break;case"contextmenu":case"mouseup":case"dragend":vh=!1,qg(de,l,le);break;case"selectionchange":if(H1)break;case"keydown":case"keyup":qg(de,l,le)}var Xe;if(xt)e:{switch(i){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else To?wa(i,l)&&(rt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(rt="onCompositionStart");rt&&(hi&&l.locale!=="ko"&&(To||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&To&&(Xe=jl()):(ci=le,Vl="value"in ci?ci.value:ci.textContent,To=!0)),Pe=hd(W,rt),0<Pe.length&&(rt=new fi(rt,i,null,l,le),de.push({event:rt,listeners:Pe}),Xe?rt.data=Xe:(Xe=_o(l),Xe!==null&&(rt.data=Xe)))),(Xe=Ts?D1(i,l):P1(i,l))&&(rt=hd(W,"onBeforeInput"),0<rt.length&&(Pe=new fi("onBeforeInput","beforeinput",null,l,le),de.push({event:Pe,listeners:rt}),Pe.data=Xe)),AN(de,i,W,l,le)}yv(de,r)})}function gc(i,r,l){return{instance:i,listener:r,currentTarget:l}}function hd(i,r){for(var l=r+"Capture",d=[];i!==null;){var x=i,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=Fs(i,l),x!=null&&d.unshift(gc(i,x,b)),x=Fs(i,r),x!=null&&d.push(gc(i,x,b))),i.tag===3)return d;i=i.return}return[]}function IN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function vv(i,r,l,d,x){for(var b=r._reactName,S=[];l!==null&&l!==d;){var I=l,z=I.alternate,W=I.stateNode;if(I=I.tag,z!==null&&z===d)break;I!==5&&I!==26&&I!==27||W===null||(z=W,x?(W=Fs(l,b),W!=null&&S.unshift(gc(l,W,z))):x||(W=Fs(l,b),W!=null&&S.push(gc(l,W,z)))),l=l.return}S.length!==0&&i.push({event:r,listeners:S})}var kN=/\r\n?/g,RN=/\u0000|\uFFFD/g;function bv(i){return(typeof i=="string"?i:""+i).replace(kN,`
`).replace(RN,"")}function _v(i,r){return r=bv(r),bv(i)===r}function Ct(i,r,l,d,x,b){switch(l){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Qn(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Qn(i,""+d);break;case"className":os(i,"class",d);break;case"tabIndex":os(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":os(i,l,d);break;case"style":Ll(i,d,b);break;case"data":if(r!=="object"){os(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=go(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(r!=="input"&&Ct(i,r,"name",x.name,x,null),Ct(i,r,"formEncType",x.formEncType,x,null),Ct(i,r,"formMethod",x.formMethod,x,null),Ct(i,r,"formTarget",x.formTarget,x,null)):(Ct(i,r,"encType",x.encType,x,null),Ct(i,r,"method",x.method,x,null),Ct(i,r,"target",x.target,x,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=go(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=zs);break;case"onScroll":d!=null&&tt("scroll",i);break;case"onScrollEnd":d!=null&&tt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=go(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":tt("beforetoggle",i),tt("toggle",i),ho(i,"popover",d);break;case"xlinkActuate":sn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":sn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":sn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":sn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":sn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":sn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":sn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":sn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":sn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ho(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=hu.get(l)||l,ho(i,l,d))}}function Fm(i,r,l,d,x,b){switch(l){case"style":Ll(i,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(x.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof d=="string"?Qn(i,d):(typeof d=="number"||typeof d=="bigint")&&Qn(i,""+d);break;case"onScroll":d!=null&&tt("scroll",i);break;case"onScrollEnd":d!=null&&tt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=zs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(x=l.endsWith("Capture"),r=l.slice(2,x?l.length-7:void 0),b=i[Me]||null,b=b!=null?b[l]:null,typeof b=="function"&&i.removeEventListener(r,b,x),typeof d=="function")){typeof b!="function"&&b!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,d,x);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):ho(i,l,d)}}}function wn(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",i),tt("load",i);var d=!1,x=!1,b;for(b in l)if(l.hasOwnProperty(b)){var S=l[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ct(i,r,b,S,l,null)}}x&&Ct(i,r,"srcSet",l.srcSet,l,null),d&&Ct(i,r,"src",l.src,l,null);return;case"input":tt("invalid",i);var I=b=S=x=null,z=null,W=null;for(d in l)if(l.hasOwnProperty(d)){var le=l[d];if(le!=null)switch(d){case"name":x=le;break;case"type":S=le;break;case"checked":z=le;break;case"defaultChecked":W=le;break;case"value":b=le;break;case"defaultValue":I=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,r));break;default:Ct(i,r,d,le,l,null)}}uu(i,b,I,z,W,S,x,!1);return;case"select":tt("invalid",i),d=S=b=null;for(x in l)if(l.hasOwnProperty(x)&&(I=l[x],I!=null))switch(x){case"value":b=I;break;case"defaultValue":S=I;break;case"multiple":d=I;default:Ct(i,r,x,I,l,null)}r=b,l=S,i.multiple=!!d,r!=null?fr(i,!!d,r,!1):l!=null&&fr(i,!!d,l,!0);return;case"textarea":tt("invalid",i),b=x=d=null;for(S in l)if(l.hasOwnProperty(S)&&(I=l[S],I!=null))switch(S){case"value":d=I;break;case"defaultValue":x=I;break;case"children":b=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:Ct(i,r,S,I,l,null)}hr(i,d,x,b);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ct(i,r,z,d,l,null)}return;case"dialog":tt("beforetoggle",i),tt("toggle",i),tt("cancel",i),tt("close",i);break;case"iframe":case"object":tt("load",i);break;case"video":case"audio":for(d=0;d<pc.length;d++)tt(pc[d],i);break;case"image":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"embed":case"source":case"link":tt("error",i),tt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(d=l[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ct(i,r,W,d,l,null)}return;default:if(po(r)){for(le in l)l.hasOwnProperty(le)&&(d=l[le],d!==void 0&&Fm(i,r,le,d,l,void 0));return}}for(I in l)l.hasOwnProperty(I)&&(d=l[I],d!=null&&Ct(i,r,I,d,l,null))}function MN(i,r,l,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,S=null,I=null,z=null,W=null,le=null;for(ae in l){var de=l[ae];if(l.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":z=de;default:d.hasOwnProperty(ae)||Ct(i,r,ae,null,d,de)}}for(var te in d){var ae=d[te];if(de=l[te],d.hasOwnProperty(te)&&(ae!=null||de!=null))switch(te){case"type":b=ae;break;case"name":x=ae;break;case"checked":W=ae;break;case"defaultChecked":le=ae;break;case"value":S=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:ae!==de&&Ct(i,r,te,ae,d,de)}}mo(i,S,I,z,W,le,b,x);return;case"select":ae=S=I=te=null;for(b in l)if(z=l[b],l.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":ae=z;default:d.hasOwnProperty(b)||Ct(i,r,b,null,d,z)}for(x in d)if(b=d[x],z=l[x],d.hasOwnProperty(x)&&(b!=null||z!=null))switch(x){case"value":te=b;break;case"defaultValue":I=b;break;case"multiple":S=b;default:b!==z&&Ct(i,r,x,b,d,z)}r=I,l=S,d=ae,te!=null?fr(i,!!l,te,!1):!!d!=!!l&&(r!=null?fr(i,!!l,r,!0):fr(i,!!l,l?[]:"",!1));return;case"textarea":ae=te=null;for(I in l)if(x=l[I],l.hasOwnProperty(I)&&x!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Ct(i,r,I,null,d,x)}for(S in d)if(x=d[S],b=l[S],d.hasOwnProperty(S)&&(x!=null||b!=null))switch(S){case"value":te=x;break;case"defaultValue":ae=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:x!==b&&Ct(i,r,S,x,d,b)}du(i,te,ae);return;case"option":for(var De in l)if(te=l[De],l.hasOwnProperty(De)&&te!=null&&!d.hasOwnProperty(De))switch(De){case"selected":i.selected=!1;break;default:Ct(i,r,De,null,d,te)}for(z in d)if(te=d[z],ae=l[z],d.hasOwnProperty(z)&&te!==ae&&(te!=null||ae!=null))switch(z){case"selected":i.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Ct(i,r,z,te,d,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in l)te=l[Oe],l.hasOwnProperty(Oe)&&te!=null&&!d.hasOwnProperty(Oe)&&Ct(i,r,Oe,null,d,te);for(W in d)if(te=d[W],ae=l[W],d.hasOwnProperty(W)&&te!==ae&&(te!=null||ae!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:Ct(i,r,W,te,d,ae)}return;default:if(po(r)){for(var It in l)te=l[It],l.hasOwnProperty(It)&&te!==void 0&&!d.hasOwnProperty(It)&&Fm(i,r,It,void 0,d,te);for(le in d)te=d[le],ae=l[le],!d.hasOwnProperty(le)||te===ae||te===void 0&&ae===void 0||Fm(i,r,le,te,d,ae);return}}for(var K in l)te=l[K],l.hasOwnProperty(K)&&te!=null&&!d.hasOwnProperty(K)&&Ct(i,r,K,null,d,te);for(de in d)te=d[de],ae=l[de],!d.hasOwnProperty(de)||te===ae||te==null&&ae==null||Ct(i,r,de,te,d,ae)}function Tv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var x=l[d],b=x.transferSize,S=x.initiatorType,I=x.duration;if(b&&I&&Tv(S)){for(S=0,I=x.responseEnd,d+=1;d<l.length;d++){var z=l[d],W=z.startTime;if(W>I)break;var le=z.transferSize,de=z.initiatorType;le&&Tv(de)&&(z=z.responseEnd,S+=le*(z<I?1:(I-W)/(z-W)))}if(--d,r+=8*(b+S)/(x.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var qm=null,Km=null;function md(i){return i.nodeType===9?i:i.ownerDocument}function Ev(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function $m(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ym=null;function PN(){var i=window.event;return i&&i.type==="popstate"?i===Ym?!1:(Ym=i,!0):(Ym=null,!1)}var Av=typeof setTimeout=="function"?setTimeout:void 0,LN=typeof clearTimeout=="function"?clearTimeout:void 0,wv=typeof Promise=="function"?Promise:void 0,UN=typeof queueMicrotask=="function"?queueMicrotask:typeof wv<"u"?function(i){return wv.resolve(null).then(i).catch(VN)}:Av;function VN(i){setTimeout(function(){throw i})}function Ur(i){return i==="head"}function Nv(i,r){var l=r,d=0;do{var x=l.nextSibling;if(i.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(x),Qo(r);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")yc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,yc(l);for(var b=l.firstChild;b;){var S=b.nextSibling,I=b.nodeName;b[st]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=S}}else l==="body"&&yc(i.ownerDocument.body);l=x}while(l);Qo(r)}function Cv(i,r){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function Jm(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Jm(l),Qt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function jN(i,r,l,d){for(;i.nodeType===1;){var x=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[st])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Is(i.nextSibling),i===null)break}return null}function ON(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Is(i.nextSibling),i===null))return null;return i}function Iv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Is(i.nextSibling),i===null))return null;return i}function Qm(i){return i.data==="$?"||i.data==="$~"}function Wm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function GN(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var d=function(){r(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Is(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Xm=null;function kv(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return Is(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function Rv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function Mv(i,r,l){switch(r=md(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function yc(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Qt(i)}var ks=new Map,Dv=new Set;function pd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var $i=ce.d;ce.d={f:BN,r:HN,D:zN,C:FN,L:qN,m:KN,X:YN,S:$N,M:JN};function BN(){var i=$i.f(),r=ad();return i||r}function HN(i){var r=$t(i);r!==null&&r.tag===5&&r.type==="form"?Qy(r):$i.r(i)}var $o=typeof document>"u"?null:document;function Pv(i,r,l){var d=$o;if(d&&typeof r=="string"&&r){var x=Jn(r);x='link[rel="'+i+'"][href="'+x+'"]',typeof l=="string"&&(x+='[crossorigin="'+l+'"]'),Dv.has(x)||(Dv.add(x),i={rel:i,crossOrigin:l,href:r},d.querySelector(x)===null&&(r=d.createElement("link"),wn(r,"link",i),Tt(r),d.head.appendChild(r)))}}function zN(i){$i.D(i),Pv("dns-prefetch",i,null)}function FN(i,r){$i.C(i,r),Pv("preconnect",i,r)}function qN(i,r,l){$i.L(i,r,l);var d=$o;if(d&&i&&r){var x='link[rel="preload"][as="'+Jn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(x+='[imagesrcset="'+Jn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(x+='[imagesizes="'+Jn(l.imageSizes)+'"]')):x+='[href="'+Jn(i)+'"]';var b=x;switch(r){case"style":b=Yo(i);break;case"script":b=Jo(i)}ks.has(b)||(i=_({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),ks.set(b,i),d.querySelector(x)!==null||r==="style"&&d.querySelector(xc(b))||r==="script"&&d.querySelector(vc(b))||(r=d.createElement("link"),wn(r,"link",i),Tt(r),d.head.appendChild(r)))}}function KN(i,r){$i.m(i,r);var l=$o;if(l&&i){var d=r&&typeof r.as=="string"?r.as:"script",x='link[rel="modulepreload"][as="'+Jn(d)+'"][href="'+Jn(i)+'"]',b=x;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Jo(i)}if(!ks.has(b)&&(i=_({rel:"modulepreload",href:i},r),ks.set(b,i),l.querySelector(x)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vc(b)))return}d=l.createElement("link"),wn(d,"link",i),Tt(d),l.head.appendChild(d)}}}function $N(i,r,l){$i.S(i,r,l);var d=$o;if(d&&i){var x=hn(d).hoistableStyles,b=Yo(i);r=r||"default";var S=x.get(b);if(!S){var I={loading:0,preload:null};if(S=d.querySelector(xc(b)))I.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":r},l),(l=ks.get(b))&&Zm(i,l);var z=S=d.createElement("link");Tt(z),wn(z,"link",i),z._p=new Promise(function(W,le){z.onload=W,z.onerror=le}),z.addEventListener("load",function(){I.loading|=1}),z.addEventListener("error",function(){I.loading|=2}),I.loading|=4,gd(S,r,d)}S={type:"stylesheet",instance:S,count:1,state:I},x.set(b,S)}}}function YN(i,r){$i.X(i,r);var l=$o;if(l&&i){var d=hn(l).hoistableScripts,x=Jo(i),b=d.get(x);b||(b=l.querySelector(vc(x)),b||(i=_({src:i,async:!0},r),(r=ks.get(x))&&ep(i,r),b=l.createElement("script"),Tt(b),wn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function JN(i,r){$i.M(i,r);var l=$o;if(l&&i){var d=hn(l).hoistableScripts,x=Jo(i),b=d.get(x);b||(b=l.querySelector(vc(x)),b||(i=_({src:i,async:!0,type:"module"},r),(r=ks.get(x))&&ep(i,r),b=l.createElement("script"),Tt(b),wn(b,"link",i),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(x,b))}}function Lv(i,r,l,d){var x=(x=ye.current)?pd(x):null;if(!x)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Yo(l.href),l=hn(x).hoistableStyles,d=l.get(r),d||(d={type:"style",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Yo(l.href);var b=hn(x).hoistableStyles,S=b.get(i);if(S||(x=x.ownerDocument||x,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,S),(b=x.querySelector(xc(i)))&&!b._p&&(S.instance=b,S.state.loading=5),ks.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ks.set(i,l),b||QN(x,i,l,S.state))),r&&d===null)throw Error(s(528,""));return S}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Jo(l),l=hn(x).hoistableScripts,d=l.get(r),d||(d={type:"script",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Yo(i){return'href="'+Jn(i)+'"'}function xc(i){return'link[rel="stylesheet"]['+i+"]"}function Uv(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function QN(i,r,l,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),wn(r,"link",l),Tt(r),i.head.appendChild(r))}function Jo(i){return'[src="'+Jn(i)+'"]'}function vc(i){return"script[async]"+i}function Vv(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+Jn(l.href)+'"]');if(d)return r.instance=d,Tt(d),d;var x=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Tt(d),wn(d,"style",x),gd(d,l.precedence,i),r.instance=d;case"stylesheet":x=Yo(l.href);var b=i.querySelector(xc(x));if(b)return r.state.loading|=4,r.instance=b,Tt(b),b;d=Uv(l),(x=ks.get(x))&&Zm(d,x),b=(i.ownerDocument||i).createElement("link"),Tt(b);var S=b;return S._p=new Promise(function(I,z){S.onload=I,S.onerror=z}),wn(b,"link",d),r.state.loading|=4,gd(b,l.precedence,i),r.instance=b;case"script":return b=Jo(l.src),(x=i.querySelector(vc(b)))?(r.instance=x,Tt(x),x):(d=l,(x=ks.get(b))&&(d=_({},l),ep(d,x)),i=i.ownerDocument||i,x=i.createElement("script"),Tt(x),wn(x,"link",d),i.head.appendChild(x),r.instance=x);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,gd(d,l.precedence,i));return r.instance}function gd(i,r,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=d.length?d[d.length-1]:null,b=x,S=0;S<d.length;S++){var I=d[S];if(I.dataset.precedence===r)b=I;else if(b!==x)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function Zm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function ep(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var yd=null;function jv(i,r,l){if(yd===null){var d=new Map,x=yd=new Map;x.set(l,d)}else x=yd,d=x.get(l),d||(d=new Map,x.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),x=0;x<l.length;x++){var b=l[x];if(!(b[st]||b[Ee]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(r)||"";S=i+S;var I=d.get(S);I?I.push(b):d.set(S,[b])}}return d}function Ov(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function WN(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Gv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function XN(i,r,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=Yo(d.href),b=r.querySelector(xc(x));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=xd.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=b,Tt(b);return}b=r.ownerDocument||r,d=Uv(d),(x=ks.get(x))&&Zm(d,x),b=b.createElement("link"),Tt(b);var S=b;S._p=new Promise(function(I,z){S.onload=I,S.onerror=z}),wn(b,"link",d),l.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=xd.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var tp=0;function ZN(i,r){return i.stylesheets&&i.count===0&&bd(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&bd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&tp===0&&(tp=62500*DN());var x=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&bd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>tp?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(x)}}:null}function xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var vd=null;function bd(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,vd=new Map,r.forEach(eC,i),vd=null,xd.call(i))}function eC(i,r){if(!(r.state.loading&4)){var l=vd.get(i);if(l)var d=l.get(null);else{l=new Map,vd.set(i,l);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var S=x[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),d=S)}d&&l.set(null,d)}x=r.instance,S=x.getAttribute("data-precedence"),b=l.get(S)||d,b===d&&l.set(null,x),l.set(S,x),this.count++,d=xd.bind(this),x.addEventListener("load",d),x.addEventListener("error",d),b?b.parentNode.insertBefore(x,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),r.state.loading|=4}}var bc={$$typeof:B,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function tC(i,r,l,d,x,b,S,I,z){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=as(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.hiddenUpdates=as(null),this.identifierPrefix=d,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Bv(i,r,l,d,x,b,S,I,z,W,le,de){return i=new tC(i,r,l,S,z,W,le,de,I),r=1,b===!0&&(r|=24),b=cs(3,null,null,r),i.current=b,b.stateNode=i,r=Ph(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:r},jh(b),i}function Hv(i){return i?(i=wo,i):wo}function zv(i,r,l,d,x,b){x=Hv(x),d.context===null?d.context=x:d.pendingContext=x,d=Ar(r),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=wr(i,d,r),l!==null&&(ts(l,i,r),Xl(l,i,r))}function Fv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function np(i,r){Fv(i,r),(i=i.alternate)&&Fv(i,r)}function qv(i){if(i.tag===13||i.tag===31){var r=Ia(i,67108864);r!==null&&ts(r,i,67108864),np(i,67108864)}}function Kv(i){if(i.tag===13||i.tag===31){var r=ms();r=Ii(r);var l=Ia(i,r);l!==null&&ts(l,i,r),np(i,r)}}var _d=!0;function nC(i,r,l,d){var x=Y.T;Y.T=null;var b=ce.p;try{ce.p=2,sp(i,r,l,d)}finally{ce.p=b,Y.T=x}}function sC(i,r,l,d){var x=Y.T;Y.T=null;var b=ce.p;try{ce.p=8,sp(i,r,l,d)}finally{ce.p=b,Y.T=x}}function sp(i,r,l,d){if(_d){var x=ip(d);if(x===null)zm(i,r,d,Td,l),Yv(i,d);else if(rC(x,i,r,l,d))d.stopPropagation();else if(Yv(i,d),r&4&&-1<iC.indexOf(i)){for(;x!==null;){var b=$t(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=ys(b.pendingLanes);if(S!==0){var I=b;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var z=1<<31-Ht(S);I.entanglements[1]|=z,S&=~z}yi(b),(vt&6)===0&&(id=Dt()+500,mc(0))}}break;case 31:case 13:I=Ia(b,2),I!==null&&ts(I,b,2),ad(),np(b,2)}if(b=ip(d),b===null&&zm(i,r,d,Td,l),b===x)break;x=b}x!==null&&d.stopPropagation()}else zm(i,r,d,null,l)}}function ip(i){return i=bs(i),rp(i)}var Td=null;function rp(i){if(Td=null,i=Wt(i),i!==null){var r=o(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===31){if(i=f(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Td=i,null}function $v(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bn()){case da:return 2;case fa:return 8;case gs:case lo:return 32;case mt:return 268435456;default:return 32}default:return 32}}var ap=!1,Vr=null,jr=null,Or=null,_c=new Map,Tc=new Map,Gr=[],iC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yv(i,r){switch(i){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":_c.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(r.pointerId)}}function Ec(i,r,l,d,x,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[x]},r!==null&&(r=$t(r),r!==null&&qv(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,x!==null&&r.indexOf(x)===-1&&r.push(x),i)}function rC(i,r,l,d,x){switch(r){case"focusin":return Vr=Ec(Vr,i,r,l,d,x),!0;case"dragenter":return jr=Ec(jr,i,r,l,d,x),!0;case"mouseover":return Or=Ec(Or,i,r,l,d,x),!0;case"pointerover":var b=x.pointerId;return _c.set(b,Ec(_c.get(b)||null,i,r,l,d,x)),!0;case"gotpointercapture":return b=x.pointerId,Tc.set(b,Ec(Tc.get(b)||null,i,r,l,d,x)),!0}return!1}function Jv(i){var r=Wt(i.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,Z(i.priority,function(){Kv(l)});return}}else if(r===31){if(r=f(l),r!==null){i.blockedOn=r,Z(i.priority,function(){Kv(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ed(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=ip(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Ul=d,l.target.dispatchEvent(d),Ul=null}else return r=$t(l),r!==null&&qv(r),i.blockedOn=l,!1;r.shift()}return!0}function Qv(i,r,l){Ed(i)&&l.delete(r)}function aC(){ap=!1,Vr!==null&&Ed(Vr)&&(Vr=null),jr!==null&&Ed(jr)&&(jr=null),Or!==null&&Ed(Or)&&(Or=null),_c.forEach(Qv),Tc.forEach(Qv)}function Sd(i,r){i.blockedOn===r&&(i.blockedOn=null,ap||(ap=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aC)))}var Ad=null;function Wv(i){Ad!==i&&(Ad=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ad===i&&(Ad=null);for(var r=0;r<i.length;r+=3){var l=i[r],d=i[r+1],x=i[r+2];if(typeof d!="function"){if(rp(d||l)===null)continue;break}var b=$t(l);b!==null&&(i.splice(r,3),r-=3,im(b,{pending:!0,data:x,method:l.method,action:d},d,x))}}))}function Qo(i){function r(z){return Sd(z,i)}Vr!==null&&Sd(Vr,i),jr!==null&&Sd(jr,i),Or!==null&&Sd(Or,i),_c.forEach(r),Tc.forEach(r);for(var l=0;l<Gr.length;l++){var d=Gr[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Gr.length&&(l=Gr[0],l.blockedOn===null);)Jv(l),l.blockedOn===null&&Gr.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var x=l[d],b=l[d+1],S=x[Me]||null;if(typeof b=="function")S||Wv(l);else if(S){var I=null;if(b&&b.hasAttribute("formAction")){if(x=b,S=b[Me]||null)I=S.formAction;else if(rp(x)!==null)continue}else I=S.action;typeof I=="function"?l[d+1]=I:(l.splice(d,3),d-=3),Wv(l)}}}function Xv(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(S){return x=S})},focusReset:"manual",scroll:"manual"})}function r(){x!==null&&(x(),x=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,x=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),x!==null&&(x(),x=null)}}}function op(i){this._internalRoot=i}wd.prototype.render=op.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,d=ms();zv(l,d,i,r,null,null)},wd.prototype.unmount=op.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;zv(i.current,2,null,i,null,null),ad(),r[Le]=null}};function wd(i){this._internalRoot=i}wd.prototype.unstable_scheduleHydration=function(i){if(i){var r=ga();i={blockedOn:null,target:i,priority:r};for(var l=0;l<Gr.length&&r!==0&&r<Gr[l].priority;l++);Gr.splice(l,0,i),l===0&&Jv(i)}};var Zv=e.version;if(Zv!=="19.2.3")throw Error(s(527,Zv,"19.2.3"));ce.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(r),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var oC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{Kn=Nd.inject(oC),fn=Nd}catch{}}return Ac.createRoot=function(i,r){if(!a(i))throw Error(s(299));var l=!1,d="",x=ax,b=ox,S=lx;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(x=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=Bv(i,1,!1,null,null,l,d,null,x,b,S,Xv),i[Le]=r.current,Hm(i),new op(r)},Ac.hydrateRoot=function(i,r,l){if(!a(i))throw Error(s(299));var d=!1,x="",b=ax,S=ox,I=lx,z=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),r=Bv(i,1,!0,r,l??null,d,x,z,b,S,I,Xv),r.context=Hv(null),l=r.current,d=ms(),d=Ii(d),x=Ar(d),x.callback=null,wr(l,x,d),l=d,r.current.lanes=l,ai(r,l),yi(r),i[Le]=r.current,Hm(i),new wd(r)},Ac.version="19.2.3",Ac}var cb;function xC(){if(cb)return up.exports;cb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),up.exports=yC(),up.exports}var vC=xC();const bC=qE(vC);var qe=(n=>(n.DRILL="Learn & Drill",n.ACTIVE_RECALL="Active Recall",n.SIMULATION="Test Simulation",n.WEAKNESS="Weakness Attack",n.EXAMPLE="Contoh Soal",n.PRACTICE="Latihan Kustom",n))(qe||{});const ef="https://files.catbox.moe/02xqjo.png",ub={click:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",tap:"",back:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/arrow.mp3",success:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/gem-collect.mp3",error:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/loss.mp3",tick:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3",intro:"",finish:"https://codeskulptor-demos.commondatastorage.googleapis.com/pang/frozen_missile.mp3"},db=["Pendidikan adalah senjata paling mematikan di dunia, karena dengan pendidikan, Anda dapat mengubah dunia. Nelson Mandela pernah berkata demikian untuk menekankan pentingnya ilmu pengetahuan.","Kecerdasan buatan bukanlah pengganti kecerdasan manusia, melainkan alat untuk memperkuat kemampuan kita. Kuncinya adalah bagaimana kita berkolaborasi dengan teknologi.","Keberhasilan bukanlah akhir, kegagalan bukanlah hal yang fatal: keberanian untuk melanjutkanlah yang terpenting. Jangan takut untuk memulai hal baru setiap harinya.","Hutan hujan tropis Indonesia adalah salah satu paru-paru dunia. Menjaganya bukan hanya tanggung jawab pemerintah, tetapi tugas kita bersama demi masa depan bumi.","The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. It is commonly used to test typewriters and computer keyboards.","Dalam dunia yang berubah sangat cepat, satu-satunya strategi yang dijamin gagal adalah tidak mengambil risiko. Mark Zuckerberg mengingatkan kita untuk berani berinovasi.","Sabar itu ilmu tingkat tinggi. Belajarnya setiap hari, latihannya setiap saat, ujiannya sering mendadak, sekolahnya seumur hidup.","Technology is a useful servant but a dangerous master. We must ensure that we control technology, rather than letting it control our lives and decisions.","Bhinneka Tunggal Ika berbeda-beda tetapi tetap satu jua. Semboyan ini menggambarkan persatuan dan kesatuan Bangsa dan Negara Kesatuan Republik Indonesia.","Membaca adalah jendela dunia. Dengan membaca, kita bisa menjelajahi tempat-tempat yang belum pernah kita kunjungi dan memahami pemikiran orang-orang hebat."],Rp=[{id:"BENCHMARK",name:"Human Benchmark",desc:"Tes Kognitif: Reaction Time & Sequence Memory"},{id:"SKRIPSI",name:"Skripsi Helper",desc:"Bantuan Judul, Outline, & Metodologi"},{id:"UTBK",name:"UTBK SNBT",desc:"Tes Potensi Skolastik & Literasi (2025)"},{id:"SKD",name:"SKD CPNS/Kedinasan",desc:"TWK, TIU, TKP"},{id:"TPA",name:"TPA & TBI",desc:"Tes Potensi Akademik & B.Inggris (Seleksi Lanjutan)"},{id:"PSIKOTEST",name:"Psikotes Lengkap",desc:"IQ, Koran/Pauli, Gambar, & Kepribadian"},{id:"KECERMATAN",name:"Tes Kecermatan",desc:"Angka/Huruf Hilang (Khas Polri/Kedinasan)"},{id:"INTERVIEW",name:"Wawancara Tulis",desc:"Simulasi Jawab Interview & Review AI"},{id:"BUTAWRNA",name:"Tes Buta Warna",desc:"Simulasi Ishihara & Warna"},{id:"GENERAL",name:"Materi Umum",desc:"Belajar Apapun: PDF, Topik, Hafalan"}],_C=[{id:"ACTIVE_RECALL",name:"Active Recall",desc:"Paksa otak mengingat tanpa melihat catatan.",icon:"Brain"},{id:"PRACTICE",name:"Latihan Soal",desc:"Drill soal pilihan ganda dari materi.",icon:"PenTool"},{id:"SPACED_REPETITION",name:"Spaced Repetition",desc:"Flashcards untuk hafalan jangka panjang.",icon:"Repeat"},{id:"FEYNMAN",name:"Feynman Technique",desc:"Jelaskan materi seolah ke anak kecil.",icon:"MessageCircle"},{id:"MIND_MAP",name:"Mind Mapping",desc:"Visualisasikan hubungan antar konsep.",icon:"Share2"},{id:"PBL",name:"Problem-Based",desc:"Belajar lewat studi kasus nyata.",icon:"Search"},{id:"TEACHING",name:"Teaching Method",desc:"Simulasi mengajar murid (AI).",icon:"GraduationCap"},{id:"SQ3R",name:"SQ3R Method",desc:"Survey, Question, Read, Recite, Review.",icon:"BookOpen"}],TC=["Penalaran Umum (Induktif)","Penalaran Umum (Deduktif)","Penalaran Umum (Kuantitatif)","Pengetahuan & Pemahaman Umum","Pemahaman Bacaan & Menulis","Pengetahuan Kuantitatif","Literasi Bahasa Indonesia","Literasi Bahasa Inggris","Penalaran Matematika"],EC=["Tes Wawasan Kebangsaan (TWK)","Tes Intelegensia Umum (TIU)","Tes Karakteristik Pribadi (TKP)"],SC=["Verbal (Analogi, Silogisme)","Numerik (Deret, Aritmatika)","Penalaran Logis & Analitis","Spasial (Gambar)","Tes Bahasa Inggris (TBI)"],AC=["Kognitif & Logika (Verbal, Analitik)","Tes Koran/Pauli (Hitungan Cepat)","Tes Spasial (Analogi Gambar)","Tes Kepribadian (EPPS/DISC)"],wC=["Pertanyaan Personal (Kelebihan/Kekurangan)","Motivasi & Komitmen","Studi Kasus & Problem Solving","Wawasan Kebangsaan & Integritas"],fb=[],hb=[],mb=[],pb=[],gb=[],yb=[],xb=[],vb=[],Hr=[{name:"Penalaran Umum",duration:30,count:30},{name:"Pengetahuan dan Pemahaman Umum",duration:15,count:20},{name:"Pemahaman Bacaan dan Menulis",duration:25,count:20},{name:"Pengetahuan Kuantitatif",duration:20,count:20},{name:"Literasi Bahasa Indonesia",duration:37.5,count:25},{name:"Literasi Bahasa Inggris",duration:37.5,count:25},{name:"Penalaran Matematika",duration:30,count:20}];var NC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let CC,IC;function kC(){return{geminiUrl:CC,vertexUrl:IC}}function RC(n,e,t,s){var a,o;if(!(n!=null&&n.baseUrl)){const c=kC();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:t:(o=c.geminiUrl)!==null&&o!==void 0?o:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ar{}function Ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const o=e[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function g(n,e,t){for(let o=0;o<e.length-1;o++){const c=e[o];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const p=n[f];if(Array.isArray(t))for(let m=0;m<p.length;m++){const v=p[m];g(v,e.slice(o+1),t[m])}else for(const m of p)g(m,e.slice(o+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const p=n[f];g(p[0],e.slice(o+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===a)return;if(typeof a=="object"&&typeof t=="object"&&a!==null&&t!==null)Object.assign(a,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function h(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const a=e[s];if(a.endsWith("[]")){const o=a.slice(0,-2);if(o in n){const c=n[o];return Array.isArray(c)?c.map(f=>h(f,e.slice(s+1),t)):t}else return t}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function MC(n,e){for(const[t,s]of Object.entries(e)){const a=t.split("."),o=s.split("."),c=new Set;let f=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){f=p;break}if(f!==-1&&o.length>f)for(let p=f;p<o.length;p++){const m=o[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Mp(n,a,o,0,c)}}function Mp(n,e,t,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const o=e[s];if(o.endsWith("[]")){const c=o.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const p of f[c])Mp(p,e,t,s+1,a)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(m=>!m.startsWith("_")&&!a.has(m)),p={};for(const m of f)p[m]=c[m];for(const[m,v]of Object.entries(p)){const _=[];for(const T of t.slice(s))T==="*"?_.push(m):_.push(T);g(c,_,v)}for(const m of f)delete c[m]}}else{const c=n;o in c&&Mp(c[o],e,t,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E0(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DC(n){const e={},t=h(n,["operationName"]);t!=null&&g(e,["operationName"],t);const s=h(n,["resourceName"]);return s!=null&&g(e,["_url","resourceName"],s),e}function PC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],UC(c)),e}function LC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],VC(c)),e}function UC(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>jC(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function VC(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>OC(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function jC(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],qC(t)),e}function OC(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],KC(t)),e}function GC(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function BC(n){const e={},t=h(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function HC(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],zC(c)),e}function zC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const a=h(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function KE(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],FC(c)),e}function FC(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const a=h(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function qC(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],E0(s));const a=h(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function KC(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],E0(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(bb||(bb={}));var _b;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(_b||(_b={}));var Tb;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Tb||(Tb={}));var Ne;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ne||(Ne={}));var Eb;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Eb||(Eb={}));var Sb;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Sb||(Sb={}));var Ab;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ab||(Ab={}));var wb;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(wb||(wb={}));var Nb;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Nb||(Nb={}));var Cb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Cb||(Cb={}));var Ib;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Ib||(Ib={}));var kb;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(kb||(kb={}));var Rb;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Rb||(Rb={}));var Mb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Mb||(Mb={}));var Db;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Db||(Db={}));var Pb;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Pb||(Pb={}));var Lb;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Lb||(Lb={}));var Ub;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ub||(Ub={}));var Vb;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Vb||(Vb={}));var jb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(jb||(jb={}));var Ob;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ob||(Ob={}));var tf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(tf||(tf={}));var Gb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gb||(Gb={}));var Bb;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Bb||(Bb={}));var Hb;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Hb||(Hb={}));var Dp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Dp||(Dp={}));var zb;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(zb||(zb={}));var Fb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Fb||(Fb={}));var qb;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(qb||(qb={}));var Kb;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Kb||(Kb={}));var $b;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($b||($b={}));var Yb;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Yb||(Yb={}));var Jb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Jb||(Jb={}));var Qb;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Qb||(Qb={}));var Wb;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Wb||(Wb={}));var Xb;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Xb||(Xb={}));var Zb;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Zb||(Zb={}));var e_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(e_||(e_={}));var t_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(t_||(t_={}));var n_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(n_||(n_={}));var s_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(s_||(s_={}));var i_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(i_||(i_={}));var r_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(r_||(r_={}));var a_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(a_||(a_={}));var o_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(o_||(o_={}));var l_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(l_||(l_={}));var c_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(c_||(c_={}));var u_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(u_||(u_={}));var d_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(d_||(d_={}));var f_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(f_||(f_={}));var h_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(h_||(h_={}));var m_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(m_||(m_={}));var p_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(p_||(p_={}));var g_;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(g_||(g_={}));var nl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(nl||(nl={}));class Pp{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class wc{get text(){var e,t,s,a,o,c,f,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[A,C]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(C!==null||C!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,s,a,o,c,f,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,s,a,o,c,f,p;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,s,a,o,c,f,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,s,a,o,c,f,p,m;if(((a=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(p=(f=(c=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class y_{}class x_{}class $C{}class YC{}class JC{}class QC{}class v_{}class b_{}class __{}class WC{}class nf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new nf;let a;const o=e;return t?a=LC(o):a=PC(o),Object.assign(s,a),s}}class T_{}class E_{}class S_{}class A_{}class XC{}class ZC{}class eI{}class S0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new S0,o=HC(e);return Object.assign(s,o),s}}class tI{}class nI{}class sI{}class w_{}class iI{get text(){var e,t,s;let a="",o=!1;const c=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,m]of Object.entries(f))p!=="text"&&p!=="thought"&&m!==null&&c.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;o=!0,a+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var e,t,s;let a="";const o=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,p]of Object.entries(c))f!=="inlineData"&&p!==null&&o.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class rI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class A0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new A0,o=KE(e);return Object.assign(s,o),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $E(n,e){const t=yt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function YE(n){return Array.isArray(n)?n.map(e=>sf(e)):[sf(n)]}function sf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function JE(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QE(n){const e=sf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function N_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function WE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>N_(e)):[N_(n)]}function Lp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function C_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function I_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Un(n){if(n==null)throw new Error("ContentUnion is required");return Lp(n)?n:{role:"user",parts:WE(n)}}function w0(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Un(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=Un(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Un(t)):[Un(e)]}function Ds(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(C_(n)||I_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Un(n)]}const e=[],t=[],s=Lp(n[0]);for(const a of n){const o=Lp(a);if(o!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(a);else{if(C_(a)||I_(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(a)}}return s||e.push({role:"user",parts:WE(t)}),e}function aI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Ne).includes(t[0].toUpperCase())?t[0].toUpperCase():Ne.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Ne).includes(s.toUpperCase())?s.toUpperCase():Ne.TYPE_UNSPECIFIED})}}function il(n){const e={},t=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&aI(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ne).includes(f.toUpperCase())?f.toUpperCase():Ne.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=il(f);else if(s.includes(c)){const p=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}p.push(il(m))}e[c]=p}else if(a.includes(c)){const p={};for(const[m,v]of Object.entries(f))p[m]=il(v);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=f}return e}function N0(n){return il(n)}function C0(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function I0(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function vl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=il(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=il(e.response));return n}function bl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function oI(n,e,t,s=1){const a=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:a?`${t}/${e}`:e}function or(n,e){if(typeof e!="string")throw new Error("name must be a string");return oI(n,e,"cachedContents")}function XE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function aa(n){return E0(n)}function lI(n){return n!=null&&typeof n=="object"&&"name"in n}function cI(n){return n!=null&&typeof n=="object"&&"video"in n}function uI(n){return n!=null&&typeof n=="object"&&"uri"in n}function ZE(n){var e;let t;if(lI(n)&&(t=n.name),!(uI(n)&&(t=n.uri,t===void 0))&&!(cI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const a=t.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${t}`);t=a[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function eS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function tS(n){for(const e of["models","tunedModels","publisherModels"])if(dI(n,e))return n[e];return[]}function dI(n,e){return n!==null&&typeof n=="object"&&e in n}function fI(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function hI(n,e={}){const t=[],s=new Set;for(const a of n){const o=a.name;if(s.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);s.add(o);const c=fI(a,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function nS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,a=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function mI(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function sS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const a=t.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let o=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function _l(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function iS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pI(n){const e={},t=h(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const s=h(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>JI(c))),g(e,["inlinedResponses"],o)}const a=h(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["inlinedEmbedContentResponses"],o)}return e}function gI(n){const e={},t=h(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsDestination","outputUriPrefix"]);s!=null&&g(e,["gcsUri"],s);const a=h(n,["bigqueryDestination","outputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function yI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsDestination","outputUriPrefix"],s);const a=h(n,["bigqueryUri"]);if(a!=null&&g(e,["bigqueryDestination","outputUri"],a),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Gd(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata","displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["metadata","state"]);a!=null&&g(e,["state"],iS(a));const o=h(n,["metadata","createTime"]);o!=null&&g(e,["createTime"],o);const c=h(n,["metadata","endTime"]);c!=null&&g(e,["endTime"],c);const f=h(n,["metadata","updateTime"]);f!=null&&g(e,["updateTime"],f);const p=h(n,["metadata","model"]);p!=null&&g(e,["model"],p);const m=h(n,["metadata","output"]);return m!=null&&g(e,["dest"],pI(sS(m))),e}function Up(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["state"]);a!=null&&g(e,["state"],iS(a));const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["createTime"]);c!=null&&g(e,["createTime"],c);const f=h(n,["startTime"]);f!=null&&g(e,["startTime"],f);const p=h(n,["endTime"]);p!=null&&g(e,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=h(n,["model"]);v!=null&&g(e,["model"],v);const _=h(n,["inputConfig"]);_!=null&&g(e,["src"],xI(_));const T=h(n,["outputConfig"]);T!=null&&g(e,["dest"],gI(sS(T)));const A=h(n,["completionStats"]);return A!=null&&g(e,["completionStats"],A),e}function xI(n){const e={},t=h(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const s=h(n,["gcsSource","uris"]);s!=null&&g(e,["gcsUri"],s);const a=h(n,["bigquerySource","inputUri"]);return a!=null&&g(e,["bigqueryUri"],a),e}function vI(n,e){const t={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=h(e,["fileName"]);s!=null&&g(t,["fileName"],s);const a=h(e,["inlinedRequests"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>YI(n,c))),g(t,["requests","requests"],o)}return t}function bI(n){const e={},t=h(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const s=h(n,["gcsUri"]);s!=null&&g(e,["gcsSource","uris"],s);const a=h(n,["bigqueryUri"]);if(a!=null&&g(e,["bigquerySource","inputUri"],a),h(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _I(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function TI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],_l(n,s)),t}function EI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],_l(n,s)),t}function SI(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],AI(s));const a=h(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const c=h(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=h(n,["index"]);p!=null&&g(e,["index"],p);const m=h(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function AI(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function rS(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>nk(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function wI(n,e){const t={},s=h(n,["displayName"]);if(e!==void 0&&s!=null&&g(e,["batch","displayName"],s),h(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function NI(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=h(n,["dest"]);return e!==void 0&&a!=null&&g(e,["outputConfig"],yI(mI(a))),t}function k_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["src"]);a!=null&&g(t,["batch","inputConfig"],vI(n,nS(n,a)));const o=h(e,["config"]);return o!=null&&wI(o,t),t}function CI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],yt(n,s));const a=h(e,["src"]);a!=null&&g(t,["inputConfig"],bI(nS(n,a)));const o=h(e,["config"]);return o!=null&&NI(o,t),t}function II(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["batch","displayName"],s),t}function kI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["src"]);a!=null&&g(t,["batch","inputConfig"],VI(n,a));const o=h(e,["config"]);return o!=null&&II(o,t),t}function RI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],_l(n,s)),t}function MI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],_l(n,s)),t}function DI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function PI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);return o!=null&&g(e,["error"],o),e}function LI(n,e){const t={},s=h(e,["contents"]);if(s!=null){let o=w0(n,s);Array.isArray(o)&&(o=o.map(c=>c)),g(t,["requests[]","request","content"],o)}const a=h(e,["config"]);return a!=null&&(g(t,["_self"],UI(a,t)),MC(t,{"requests[].*":"requests[].request.*"})),t}function UI(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function VI(n,e){const t={},s=h(e,["fileName"]);s!=null&&g(t,["file_name"],s);const a=h(e,["inlinedRequests"]);return a!=null&&g(t,["requests"],LI(n,a)),t}function jI(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function OI(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GI(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function BI(n,e,t){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],rS(Un(a)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const C=h(e,["frequencyPenalty"]);C!=null&&g(s,["frequencyPenalty"],C);const D=h(e,["seed"]);D!=null&&g(s,["seed"],D);const N=h(e,["responseMimeType"]);N!=null&&g(s,["responseMimeType"],N);const L=h(e,["responseSchema"]);L!=null&&g(s,["responseSchema"],N0(L));const U=h(e,["responseJsonSchema"]);if(U!=null&&g(s,["responseJsonSchema"],U),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=h(e,["safetySettings"]);if(t!==void 0&&B!=null){let j=B;Array.isArray(j)&&(j=j.map(pe=>sk(pe))),g(t,["safetySettings"],j)}const $=h(e,["tools"]);if(t!==void 0&&$!=null){let j=bl($);Array.isArray(j)&&(j=j.map(pe=>rk(vl(pe)))),g(t,["tools"],j)}const ee=h(e,["toolConfig"]);if(t!==void 0&&ee!=null&&g(t,["toolConfig"],ik(ee)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=h(e,["cachedContent"]);t!==void 0&&se!=null&&g(t,["cachedContent"],or(n,se));const R=h(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=h(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const k=h(e,["speechConfig"]);if(k!=null&&g(s,["speechConfig"],C0(k)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const V=h(e,["imageConfig"]);V!=null&&g(s,["imageConfig"],$I(V));const G=h(e,["enableEnhancedCivicAnswers"]);return G!=null&&g(s,["enableEnhancedCivicAnswers"],G),s}function HI(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>SI(m))),g(e,["candidates"],p)}const a=h(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const c=h(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function zI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],_l(n,s)),t}function FI(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],_l(n,s)),t}function qI(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function KI(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function $I(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YI(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["request","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let f=Ds(a);Array.isArray(f)&&(f=f.map(p=>rS(p))),g(t,["request","contents"],f)}const o=h(e,["metadata"]);o!=null&&g(t,["metadata"],o);const c=h(e,["config"]);return c!=null&&g(t,["request","generationConfig"],BI(n,c,h(t,["request"],{}))),t}function JI(n){const e={},t=h(n,["response"]);t!=null&&g(e,["response"],HI(t));const s=h(n,["error"]);return s!=null&&g(e,["error"],s),e}function QI(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);if(e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),h(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function WI(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const o=h(n,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),t}function XI(n){const e={},t=h(n,["config"]);return t!=null&&QI(t,e),e}function ZI(n){const e={},t=h(n,["config"]);return t!=null&&WI(t,e),e}function ek(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["operations"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>Gd(c))),g(e,["batchJobs"],o)}return e}function tk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["batchPredictionJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>Up(c))),g(e,["batchJobs"],o)}return e}function nk(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],jI(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],OI(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],_I(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function sk(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function ik(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],GI(s)),e}function rk(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],qI(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],KI(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var er;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(er||(er={}));class so{constructor(e,t,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,a)}init(e,t,s){var a,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(o=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ak extends ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(er.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=k_(this.apiClient,e),s=t._url,a=Ce("{model}:batchGenerateContent",s),f=t.batch.inputConfig.requests,p=f.requests,m=[];for(const v of p){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}m.push(_)}return f.requests=m,delete t.config,delete t._url,delete t._query,{path:a,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const o=this.getGcsUri(e),c=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?s.dest=`${o.slice(0,-6)}/dest`:s.dest=`${o}_dest_${a}`;else if(c)s.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=CI(this.apiClient,e);return f=Ce("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Up(v))}else{const m=k_(this.apiClient,e);return f=Ce("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Gd(v))}}async createEmbeddingsInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kI(this.apiClient,e);return o=Ce("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Gd(p))}}async get(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=FI(this.apiClient,e);return f=Ce("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Up(v))}else{const m=zI(this.apiClient,e);return f=Ce("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Gd(v))}}async cancel(e){var t,s,a,o;let c="",f={};if(this.apiClient.isVertexAI()){const p=EI(this.apiClient,e);c=Ce("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const p=TI(this.apiClient,e);c=Ce("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=ZI(e);return f=Ce("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=tk(v),T=new w_;return Object.assign(T,_),T})}else{const m=XI(e);return f=Ce("batches",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=ek(v),T=new w_;return Object.assign(T,_),T})}}async delete(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=MI(this.apiClient,e);return f=Ce("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>PI(v))}else{const m=RI(this.apiClient,e);return f=Ce("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>DI(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ok(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function R_(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>kk(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function lk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const c=h(n,["contents"]);if(e!==void 0&&c!=null){let v=Ds(c);Array.isArray(v)&&(v=v.map(_=>R_(_))),g(e,["contents"],v)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],R_(Un(f)));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(_=>Mk(_))),g(e,["tools"],v)}const m=h(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],Rk(m)),h(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function ck(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);e!==void 0&&a!=null&&g(e,["expireTime"],a);const o=h(n,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const c=h(n,["contents"]);if(e!==void 0&&c!=null){let _=Ds(c);Array.isArray(_)&&(_=_.map(T=>T)),g(e,["contents"],_)}const f=h(n,["systemInstruction"]);e!==void 0&&f!=null&&g(e,["systemInstruction"],Un(f));const p=h(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>Dk(T))),g(e,["tools"],_)}const m=h(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=h(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function uk(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],$E(n,s));const a=h(e,["config"]);return a!=null&&lk(a,t),t}function dk(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["model"],$E(n,s));const a=h(e,["config"]);return a!=null&&ck(a,t),t}function fk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],or(n,s)),t}function hk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],or(n,s)),t}function mk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function pk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function gk(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function yk(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xk(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vk(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["parameters"]);a!=null&&g(e,["parameters"],a);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function bk(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],or(n,s)),t}function _k(n,e){const t={},s=h(e,["name"]);return s!=null&&g(t,["_url","name"],or(n,s)),t}function Tk(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Ek(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function Sk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function Ak(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function wk(n){const e={},t=h(n,["config"]);return t!=null&&Sk(t,e),e}function Nk(n){const e={},t=h(n,["config"]);return t!=null&&Ak(t,e),e}function Ck(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["cachedContents"],o)}return e}function Ik(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["cachedContents"],o)}return e}function kk(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],gk(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],yk(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],ok(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function Rk(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],xk(s)),e}function Mk(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],Tk(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],Ek(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function Dk(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=h(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>vk(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function Pk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function Lk(n,e){const t={},s=h(n,["ttl"]);e!==void 0&&s!=null&&g(e,["ttl"],s);const a=h(n,["expireTime"]);return e!==void 0&&a!=null&&g(e,["expireTime"],a),t}function Uk(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],or(n,s));const a=h(e,["config"]);return a!=null&&Pk(a,t),t}function Vk(n,e){const t={},s=h(e,["name"]);s!=null&&g(t,["_url","name"],or(n,s));const a=h(e,["config"]);return a!=null&&Lk(a,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jk extends ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(er.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=dk(this.apiClient,e);return f=Ce("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=uk(this.apiClient,e);return f=Ce("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=_k(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=bk(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=hk(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=pk(v),T=new S_;return Object.assign(T,_),T})}else{const m=fk(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=mk(v),T=new S_;return Object.assign(T,_),T})}}async update(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Vk(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Uk(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=Nk(e);return f=Ce("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Ik(v),T=new A_;return Object.assign(T,_),T})}else{const m=wk(e);return f=Ce("cachedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=Ck(v),T=new A_;return Object.assign(T,_),T})}}}function rf(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function M_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(n){return this instanceof Ke?(this.v=n,this):new Ke(n)}function Zs(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(A){return function(C){return Promise.resolve(C).then(A,_)}}function f(A,C){s[A]&&(a[A]=function(D){return new Promise(function(N,L){o.push([A,D,N,L])>1||p(A,D)})},C&&(a[A]=C(a[A])))}function p(A,C){try{m(s[A](C))}catch(D){T(o[0][3],D)}}function m(A){A.value instanceof Ke?Promise.resolve(A.value.v).then(v,_):T(o[0][2],A)}function v(A){p("next",A)}function _(A){p("throw",A)}function T(A,C){A(C),o.shift(),o.length&&p(o[0][0],o[0][1])}}function ei(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof M_=="function"?M_(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(o){t[o]=n[o]&&function(c){return new Promise(function(f,p){c=n[o](c),a(f,p,c.done,c.value)})}}function a(o,c,f,p){Promise.resolve(p).then(function(m){o({value:m,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ok(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:aS(t)}function aS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Gk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function D_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let o=!0;for(;s<t&&n[s].role==="model";)a.push(n[s]),o&&!aS(n[s])&&(o=!1),s++;o?e.push(...a):e.pop()}return e}class Bk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Hk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Hk{constructor(e,t,s,a={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),Gk(o)}async sendMessage(e){var t;await this.sendPromise;const s=Un(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,c,f;const p=await a,m=(c=(o=p.candidates)===null||o===void 0?void 0:o[0])===null||c===void 0?void 0:c.content,v=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(f=v.slice(_))!==null&&f!==void 0?f:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var t;await this.sendPromise;const s=Un(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,s)}getHistory(e=!1){const t=e?D_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Zs(this,arguments,function*(){var a,o,c,f,p,m;const v=[];try{for(var _=!0,T=ei(e),A;A=yield Ke(T.next()),a=A.done,!a;_=!0){f=A.value,_=!1;const C=f;if(Ok(C)){const D=(m=(p=C.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content;D!==void 0&&v.push(D)}yield yield Ke(C)}}catch(C){o={error:C}}finally{try{!_&&!a&&(c=T.return)&&(yield Ke(c.call(T)))}finally{if(o)throw o.error}}this.recordHistory(t,v)})}recordHistory(e,t,s){let a=[];t.length>0&&t.every(o=>o.role!==void 0)?a=t:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...D_(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Pf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zk(n){const e={},t=h(n,["file"]);return t!=null&&g(e,["file"],t),e}function Fk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function qk(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],ZE(t)),e}function Kk(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function $k(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","file"],ZE(t)),e}function Yk(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function Jk(n){const e={},t=h(n,["config"]);return t!=null&&Yk(t,e),e}function Qk(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wk extends ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(er.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Jk(e);return o=Ce("files",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=Qk(p),v=new tI;return Object.assign(v,m),v})}}async createInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=zk(e);return o=Ce("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=Fk(p),v=new nI;return Object.assign(v,m),v})}}async get(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$k(e);return o=Ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qk(e);return o=Ce("files/{file}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=Kk(p),v=new sI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bd(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function Xk(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>mR(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function Zk(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function eR(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tR(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["parameters"]);a!=null&&g(e,["parameters"],a);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function nR(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=h(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const c=h(n,["enableAffectiveDialog"]);c!=null&&g(e,["enableAffectiveDialog"],c);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const p=h(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=h(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const C=h(n,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const D=h(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const N=h(n,["routingConfig"]);N!=null&&g(e,["routingConfig"],N);const L=h(n,["seed"]);L!=null&&g(e,["seed"],L);const U=h(n,["speechConfig"]);U!=null&&g(e,["speechConfig"],U);const B=h(n,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const $=h(n,["temperature"]);$!=null&&g(e,["temperature"],$);const ee=h(n,["thinkingConfig"]);ee!=null&&g(e,["thinkingConfig"],ee);const se=h(n,["topK"]);se!=null&&g(e,["topK"],se);const R=h(n,["topP"]);if(R!=null&&g(e,["topP"],R),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sR(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function iR(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function rR(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=h(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],I0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=h(n,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],Xk(Un(C)));const D=h(n,["tools"]);if(e!==void 0&&D!=null){let se=bl(D);Array.isArray(se)&&(se=se.map(R=>gR(vl(R)))),g(e,["setup","tools"],se)}const N=h(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],pR(N));const L=h(n,["inputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","inputAudioTranscription"],L);const U=h(n,["outputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","outputAudioTranscription"],U);const B=h(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const ee=h(n,["proactivity"]);if(e!==void 0&&ee!=null&&g(e,["setup","proactivity"],ee),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function aR(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],nR(s));const a=h(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],I0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=h(n,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],Un(C));const D=h(n,["tools"]);if(e!==void 0&&D!=null){let R=bl(D);Array.isArray(R)&&(R=R.map(M=>yR(vl(M)))),g(e,["setup","tools"],R)}const N=h(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],N);const L=h(n,["inputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","inputAudioTranscription"],L);const U=h(n,["outputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","outputAudioTranscription"],U);const B=h(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const ee=h(n,["proactivity"]);e!==void 0&&ee!=null&&g(e,["setup","proactivity"],ee);const se=h(n,["explicitVadSignal"]);return e!==void 0&&se!=null&&g(e,["setup","explicitVadSignal"],se),t}function oR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],yt(n,s));const a=h(e,["config"]);return a!=null&&g(t,["config"],rR(a,t)),t}function lR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],yt(n,s));const a=h(e,["config"]);return a!=null&&g(t,["config"],aR(a,t)),t}function cR(n){const e={},t=h(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function uR(n){const e={},t=h(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["weightedPrompts"],s)}return e}function dR(n){const e={},t=h(n,["media"]);if(t!=null){let m=YE(t);Array.isArray(m)&&(m=m.map(v=>Bd(v))),g(e,["mediaChunks"],m)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],Bd(QE(s)));const a=h(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const o=h(n,["video"]);o!=null&&g(e,["video"],Bd(JE(o)));const c=h(n,["text"]);c!=null&&g(e,["text"],c);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=h(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function fR(n){const e={},t=h(n,["media"]);if(t!=null){let m=YE(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const s=h(n,["audio"]);s!=null&&g(e,["audio"],QE(s));const a=h(n,["audioStreamEnd"]);a!=null&&g(e,["audioStreamEnd"],a);const o=h(n,["video"]);o!=null&&g(e,["video"],JE(o));const c=h(n,["text"]);c!=null&&g(e,["text"],c);const f=h(n,["activityStart"]);f!=null&&g(e,["activityStart"],f);const p=h(n,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function hR(n){const e={},t=h(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const s=h(n,["serverContent"]);s!=null&&g(e,["serverContent"],s);const a=h(n,["toolCall"]);a!=null&&g(e,["toolCall"],a);const o=h(n,["toolCallCancellation"]);o!=null&&g(e,["toolCallCancellation"],o);const c=h(n,["usageMetadata"]);c!=null&&g(e,["usageMetadata"],xR(c));const f=h(n,["goAway"]);f!=null&&g(e,["goAway"],f);const p=h(n,["sessionResumptionUpdate"]);p!=null&&g(e,["sessionResumptionUpdate"],p);const m=h(n,["voiceActivityDetectionSignal"]);return m!=null&&g(e,["voiceActivityDetectionSignal"],m),e}function mR(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],Zk(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],eR(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],Bd(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function pR(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function gR(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],sR(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],iR(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function yR(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=h(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>tR(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function xR(n){const e={},t=h(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const s=h(n,["cachedContentTokenCount"]);s!=null&&g(e,["cachedContentTokenCount"],s);const a=h(n,["candidatesTokenCount"]);a!=null&&g(e,["responseTokenCount"],a);const o=h(n,["toolUsePromptTokenCount"]);o!=null&&g(e,["toolUsePromptTokenCount"],o);const c=h(n,["thoughtsTokenCount"]);c!=null&&g(e,["thoughtsTokenCount"],c);const f=h(n,["totalTokenCount"]);f!=null&&g(e,["totalTokenCount"],f);const p=h(n,["promptTokensDetails"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["promptTokensDetails"],A)}const m=h(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["cacheTokensDetails"],A)}const v=h(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["responseTokensDetails"],A)}const _=h(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),g(e,["toolUsePromptTokensDetails"],A)}const T=h(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vR(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function bR(n){const e={},t=h(n,["content"]);t!=null&&g(e,["content"],t);const s=h(n,["citationMetadata"]);s!=null&&g(e,["citationMetadata"],_R(s));const a=h(n,["tokenCount"]);a!=null&&g(e,["tokenCount"],a);const o=h(n,["finishReason"]);o!=null&&g(e,["finishReason"],o);const c=h(n,["avgLogprobs"]);c!=null&&g(e,["avgLogprobs"],c);const f=h(n,["groundingMetadata"]);f!=null&&g(e,["groundingMetadata"],f);const p=h(n,["index"]);p!=null&&g(e,["index"],p);const m=h(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=h(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),g(e,["safetyRatings"],T)}const _=h(n,["urlContextMetadata"]);return _!=null&&g(e,["urlContextMetadata"],_),e}function _R(n){const e={},t=h(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a)),g(e,["citations"],s)}return e}function TR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let o=Ds(a);Array.isArray(o)&&(o=o.map(c=>c)),g(t,["contents"],o)}return t}function ER(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),g(e,["tokensInfo"],a)}return e}function SR(n){const e={},t=h(n,["values"]);t!=null&&g(e,["values"],t);const s=h(n,["statistics"]);return s!=null&&g(e,["statistics"],AR(s)),e}function AR(n){const e={},t=h(n,["truncated"]);t!=null&&g(e,["truncated"],t);const s=h(n,["token_count"]);return s!=null&&g(e,["tokenCount"],s),e}function Lf(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>P2(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function wR(n){const e={},t=h(n,["controlType"]);t!=null&&g(e,["controlType"],t);const s=h(n,["enableControlImageComputation"]);return s!=null&&g(e,["computeControl"],s),e}function NR(n){const e={};if(h(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function CR(n,e){const t={},s=h(n,["systemInstruction"]);e!==void 0&&s!=null&&g(e,["systemInstruction"],Un(s));const a=h(n,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>uS(f))),g(e,["tools"],c)}const o=h(n,["generationConfig"]);return e!==void 0&&o!=null&&g(e,["generationConfig"],v2(o)),t}function IR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let c=Ds(a);Array.isArray(c)&&(c=c.map(f=>Lf(f))),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&NR(o),t}function kR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let c=Ds(a);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&CR(o,t),t}function RR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);s!=null&&g(e,["totalTokens"],s);const a=h(n,["cachedContentTokenCount"]);return a!=null&&g(e,["cachedContentTokenCount"],a),e}function MR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["totalTokens"]);return s!=null&&g(e,["totalTokens"],s),e}function DR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],yt(n,s)),t}function PR(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],yt(n,s)),t}function LR(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function UR(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function VR(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const c=h(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=h(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=h(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const C=h(n,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const D=h(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const N=h(n,["addWatermark"]);e!==void 0&&N!=null&&g(e,["parameters","addWatermark"],N);const L=h(n,["labels"]);e!==void 0&&L!=null&&g(e,["labels"],L);const U=h(n,["editMode"]);e!==void 0&&U!=null&&g(e,["parameters","editMode"],U);const B=h(n,["baseSteps"]);return e!==void 0&&B!=null&&g(e,["parameters","editConfig","baseSteps"],B),t}function jR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["referenceImages"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>G2(p))),g(t,["instances[0]","referenceImages"],f)}const c=h(e,["config"]);return c!=null&&VR(c,t),t}function OR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Uf(o))),g(e,["generatedImages"],a)}return e}function GR(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["requests[]","taskType"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&g(e,["requests[]","title"],a);const o=h(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),h(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function BR(n,e){const t={},s=h(n,["taskType"]);e!==void 0&&s!=null&&g(e,["instances[]","task_type"],s);const a=h(n,["title"]);e!==void 0&&a!=null&&g(e,["instances[]","title"],a);const o=h(n,["outputDimensionality"]);e!==void 0&&o!=null&&g(e,["parameters","outputDimensionality"],o);const c=h(n,["mimeType"]);e!==void 0&&c!=null&&g(e,["instances[]","mimeType"],c);const f=h(n,["autoTruncate"]);return e!==void 0&&f!=null&&g(e,["parameters","autoTruncate"],f),t}function HR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let f=w0(n,a);Array.isArray(f)&&(f=f.map(p=>p)),g(t,["requests[]","content"],f)}const o=h(e,["config"]);o!=null&&GR(o,t);const c=h(e,["model"]);return c!==void 0&&g(t,["requests[]","model"],yt(n,c)),t}function zR(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let c=w0(n,a);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["instances[]","content"],c)}const o=h(e,["config"]);return o!=null&&BR(o,t),t}function FR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["embeddings"],o)}const a=h(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function qR(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions[]","embeddings"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>SR(c))),g(e,["embeddings"],o)}const a=h(n,["metadata"]);return a!=null&&g(e,["metadata"],a),e}function KR(n){const e={},t=h(n,["endpoint"]);t!=null&&g(e,["name"],t);const s=h(n,["deployedModelId"]);return s!=null&&g(e,["deployedModelId"],s),e}function $R(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function YR(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JR(n){const e={},t=h(n,["allowedFunctionNames"]);t!=null&&g(e,["allowedFunctionNames"],t);const s=h(n,["mode"]);if(s!=null&&g(e,["mode"],s),h(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function QR(n){const e={},t=h(n,["description"]);t!=null&&g(e,["description"],t);const s=h(n,["name"]);s!=null&&g(e,["name"],s);const a=h(n,["parameters"]);a!=null&&g(e,["parameters"],a);const o=h(n,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const c=h(n,["response"]);c!=null&&g(e,["response"],c);const f=h(n,["responseJsonSchema"]);if(f!=null&&g(e,["responseJsonSchema"],f),h(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function WR(n,e,t){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Lf(Un(a)));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const C=h(e,["frequencyPenalty"]);C!=null&&g(s,["frequencyPenalty"],C);const D=h(e,["seed"]);D!=null&&g(s,["seed"],D);const N=h(e,["responseMimeType"]);N!=null&&g(s,["responseMimeType"],N);const L=h(e,["responseSchema"]);L!=null&&g(s,["responseSchema"],N0(L));const U=h(e,["responseJsonSchema"]);if(U!=null&&g(s,["responseJsonSchema"],U),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=h(e,["safetySettings"]);if(t!==void 0&&B!=null){let j=B;Array.isArray(j)&&(j=j.map(pe=>B2(pe))),g(t,["safetySettings"],j)}const $=h(e,["tools"]);if(t!==void 0&&$!=null){let j=bl($);Array.isArray(j)&&(j=j.map(pe=>Y2(vl(pe)))),g(t,["tools"],j)}const ee=h(e,["toolConfig"]);if(t!==void 0&&ee!=null&&g(t,["toolConfig"],$2(ee)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=h(e,["cachedContent"]);t!==void 0&&se!=null&&g(t,["cachedContent"],or(n,se));const R=h(e,["responseModalities"]);R!=null&&g(s,["responseModalities"],R);const M=h(e,["mediaResolution"]);M!=null&&g(s,["mediaResolution"],M);const k=h(e,["speechConfig"]);if(k!=null&&g(s,["speechConfig"],C0(k)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&g(s,["thinkingConfig"],O);const V=h(e,["imageConfig"]);V!=null&&g(s,["imageConfig"],S2(V));const G=h(e,["enableEnhancedCivicAnswers"]);return G!=null&&g(s,["enableEnhancedCivicAnswers"],G),s}function XR(n,e,t){const s={},a=h(e,["systemInstruction"]);t!==void 0&&a!=null&&g(t,["systemInstruction"],Un(a));const o=h(e,["temperature"]);o!=null&&g(s,["temperature"],o);const c=h(e,["topP"]);c!=null&&g(s,["topP"],c);const f=h(e,["topK"]);f!=null&&g(s,["topK"],f);const p=h(e,["candidateCount"]);p!=null&&g(s,["candidateCount"],p);const m=h(e,["maxOutputTokens"]);m!=null&&g(s,["maxOutputTokens"],m);const v=h(e,["stopSequences"]);v!=null&&g(s,["stopSequences"],v);const _=h(e,["responseLogprobs"]);_!=null&&g(s,["responseLogprobs"],_);const T=h(e,["logprobs"]);T!=null&&g(s,["logprobs"],T);const A=h(e,["presencePenalty"]);A!=null&&g(s,["presencePenalty"],A);const C=h(e,["frequencyPenalty"]);C!=null&&g(s,["frequencyPenalty"],C);const D=h(e,["seed"]);D!=null&&g(s,["seed"],D);const N=h(e,["responseMimeType"]);N!=null&&g(s,["responseMimeType"],N);const L=h(e,["responseSchema"]);L!=null&&g(s,["responseSchema"],N0(L));const U=h(e,["responseJsonSchema"]);U!=null&&g(s,["responseJsonSchema"],U);const B=h(e,["routingConfig"]);B!=null&&g(s,["routingConfig"],B);const $=h(e,["modelSelectionConfig"]);$!=null&&g(s,["modelConfig"],$);const ee=h(e,["safetySettings"]);if(t!==void 0&&ee!=null){let Y=ee;Array.isArray(Y)&&(Y=Y.map(ce=>ce)),g(t,["safetySettings"],Y)}const se=h(e,["tools"]);if(t!==void 0&&se!=null){let Y=bl(se);Array.isArray(Y)&&(Y=Y.map(ce=>uS(vl(ce)))),g(t,["tools"],Y)}const R=h(e,["toolConfig"]);t!==void 0&&R!=null&&g(t,["toolConfig"],R);const M=h(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const k=h(e,["cachedContent"]);t!==void 0&&k!=null&&g(t,["cachedContent"],or(n,k));const O=h(e,["responseModalities"]);O!=null&&g(s,["responseModalities"],O);const V=h(e,["mediaResolution"]);V!=null&&g(s,["mediaResolution"],V);const G=h(e,["speechConfig"]);G!=null&&g(s,["speechConfig"],C0(G));const j=h(e,["audioTimestamp"]);j!=null&&g(s,["audioTimestamp"],j);const pe=h(e,["thinkingConfig"]);pe!=null&&g(s,["thinkingConfig"],pe);const we=h(e,["imageConfig"]);if(we!=null&&g(s,["imageConfig"],A2(we)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function P_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let c=Ds(a);Array.isArray(c)&&(c=c.map(f=>Lf(f))),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],WR(n,o,t)),t}function L_(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["contents"]);if(a!=null){let c=Ds(a);Array.isArray(c)&&(c=c.map(f=>f)),g(t,["contents"],c)}const o=h(e,["config"]);return o!=null&&g(t,["generationConfig"],XR(n,o,t)),t}function U_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>bR(m))),g(e,["candidates"],p)}const a=h(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const o=h(n,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const c=h(n,["responseId"]);c!=null&&g(e,["responseId"],c);const f=h(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function V_(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const a=h(n,["createTime"]);a!=null&&g(e,["createTime"],a);const o=h(n,["modelVersion"]);o!=null&&g(e,["modelVersion"],o);const c=h(n,["promptFeedback"]);c!=null&&g(e,["promptFeedback"],c);const f=h(n,["responseId"]);f!=null&&g(e,["responseId"],f);const p=h(n,["usageMetadata"]);return p!=null&&g(e,["usageMetadata"],p),e}function ZR(n,e){const t={};if(h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=h(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const o=h(n,["guidanceScale"]);if(e!==void 0&&o!=null&&g(e,["parameters","guidanceScale"],o),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=h(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&g(e,["parameters","safetySetting"],c);const f=h(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const p=h(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&g(e,["parameters","includeSafetyAttributes"],p);const m=h(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=h(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const _=h(n,["outputMimeType"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","mimeType"],_);const T=h(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),h(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=h(n,["imageSize"]);if(e!==void 0&&A!=null&&g(e,["parameters","sampleImageSize"],A),h(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function e2(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=h(n,["negativePrompt"]);e!==void 0&&a!=null&&g(e,["parameters","negativePrompt"],a);const o=h(n,["numberOfImages"]);e!==void 0&&o!=null&&g(e,["parameters","sampleCount"],o);const c=h(n,["aspectRatio"]);e!==void 0&&c!=null&&g(e,["parameters","aspectRatio"],c);const f=h(n,["guidanceScale"]);e!==void 0&&f!=null&&g(e,["parameters","guidanceScale"],f);const p=h(n,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=h(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["includeSafetyAttributes"]);e!==void 0&&_!=null&&g(e,["parameters","includeSafetyAttributes"],_);const T=h(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const A=h(n,["language"]);e!==void 0&&A!=null&&g(e,["parameters","language"],A);const C=h(n,["outputMimeType"]);e!==void 0&&C!=null&&g(e,["parameters","outputOptions","mimeType"],C);const D=h(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const N=h(n,["addWatermark"]);e!==void 0&&N!=null&&g(e,["parameters","addWatermark"],N);const L=h(n,["labels"]);e!==void 0&&L!=null&&g(e,["labels"],L);const U=h(n,["imageSize"]);e!==void 0&&U!=null&&g(e,["parameters","sampleImageSize"],U);const B=h(n,["enhancePrompt"]);return e!==void 0&&B!=null&&g(e,["parameters","enhancePrompt"],B),t}function t2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["config"]);return o!=null&&ZR(o,t),t}function n2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["config"]);return o!=null&&e2(o,t),t}function s2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>p2(c))),g(e,["generatedImages"],o)}const a=h(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],lS(a)),e}function i2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>Uf(c))),g(e,["generatedImages"],o)}const a=h(n,["positivePromptSafetyAttributes"]);return a!=null&&g(e,["positivePromptSafetyAttributes"],cS(a)),e}function r2(n,e){const t={},s=h(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s),h(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=h(n,["durationSeconds"]);if(e!==void 0&&a!=null&&g(e,["parameters","durationSeconds"],a),h(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(n,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const c=h(n,["resolution"]);e!==void 0&&c!=null&&g(e,["parameters","resolution"],c);const f=h(n,["personGeneration"]);if(e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f),h(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=h(n,["negativePrompt"]);e!==void 0&&p!=null&&g(e,["parameters","negativePrompt"],p);const m=h(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),h(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=h(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],Vf(v));const _=h(n,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>oM(A))),g(e,["instances[0]","referenceImages"],T)}if(h(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function a2(n,e){const t={},s=h(n,["numberOfVideos"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=h(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const o=h(n,["fps"]);e!==void 0&&o!=null&&g(e,["parameters","fps"],o);const c=h(n,["durationSeconds"]);e!==void 0&&c!=null&&g(e,["parameters","durationSeconds"],c);const f=h(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const p=h(n,["aspectRatio"]);e!==void 0&&p!=null&&g(e,["parameters","aspectRatio"],p);const m=h(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=h(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const _=h(n,["pubsubTopic"]);e!==void 0&&_!=null&&g(e,["parameters","pubsubTopic"],_);const T=h(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const A=h(n,["enhancePrompt"]);e!==void 0&&A!=null&&g(e,["parameters","enhancePrompt"],A);const C=h(n,["generateAudio"]);e!==void 0&&C!=null&&g(e,["parameters","generateAudio"],C);const D=h(n,["lastFrame"]);e!==void 0&&D!=null&&g(e,["instances[0]","lastFrame"],ii(D));const N=h(n,["referenceImages"]);if(e!==void 0&&N!=null){let B=N;Array.isArray(B)&&(B=B.map($=>lM($))),g(e,["instances[0]","referenceImages"],B)}const L=h(n,["mask"]);e!==void 0&&L!=null&&g(e,["instances[0]","mask"],aM(L));const U=h(n,["compressionQuality"]);return e!==void 0&&U!=null&&g(e,["parameters","compressionQuality"],U),t}function o2(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response","generateVideoResponse"]);return c!=null&&g(e,["response"],d2(c)),e}function l2(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],f2(c)),e}function c2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],Vf(o));const c=h(e,["video"]);c!=null&&g(t,["instances[0]","video"],dS(c));const f=h(e,["source"]);f!=null&&h2(f,t);const p=h(e,["config"]);return p!=null&&r2(p,t),t}function u2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["prompt"]);a!=null&&g(t,["instances[0]","prompt"],a);const o=h(e,["image"]);o!=null&&g(t,["instances[0]","image"],ii(o));const c=h(e,["video"]);c!=null&&g(t,["instances[0]","video"],fS(c));const f=h(e,["source"]);f!=null&&m2(f,t);const p=h(e,["config"]);return p!=null&&a2(p,t),t}function d2(n){const e={},t=h(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>y2(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function f2(n){const e={},t=h(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(c=>x2(c))),g(e,["generatedVideos"],o)}const s=h(n,["raiMediaFilteredCount"]);s!=null&&g(e,["raiMediaFilteredCount"],s);const a=h(n,["raiMediaFilteredReasons"]);return a!=null&&g(e,["raiMediaFilteredReasons"],a),e}function h2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],Vf(a));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],dS(o)),t}function m2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],ii(a));const o=h(n,["video"]);return e!==void 0&&o!=null&&g(e,["instances[0]","video"],fS(o)),t}function p2(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],w2(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=h(n,["_self"]);return a!=null&&g(e,["safetyAttributes"],lS(a)),e}function Uf(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["image"],oS(t));const s=h(n,["raiFilteredReason"]);s!=null&&g(e,["raiFilteredReason"],s);const a=h(n,["_self"]);a!=null&&g(e,["safetyAttributes"],cS(a));const o=h(n,["prompt"]);return o!=null&&g(e,["enhancedPrompt"],o),e}function g2(n){const e={},t=h(n,["_self"]);t!=null&&g(e,["mask"],oS(t));const s=h(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),g(e,["labels"],a)}return e}function y2(n){const e={},t=h(n,["video"]);return t!=null&&g(e,["video"],iM(t)),e}function x2(n){const e={},t=h(n,["_self"]);return t!=null&&g(e,["video"],rM(t)),e}function v2(n){const e={},t=h(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const s=h(n,["responseJsonSchema"]);s!=null&&g(e,["responseJsonSchema"],s);const a=h(n,["audioTimestamp"]);a!=null&&g(e,["audioTimestamp"],a);const o=h(n,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const c=h(n,["enableAffectiveDialog"]);c!=null&&g(e,["enableAffectiveDialog"],c);const f=h(n,["frequencyPenalty"]);f!=null&&g(e,["frequencyPenalty"],f);const p=h(n,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=h(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=h(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const _=h(n,["presencePenalty"]);_!=null&&g(e,["presencePenalty"],_);const T=h(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const A=h(n,["responseMimeType"]);A!=null&&g(e,["responseMimeType"],A);const C=h(n,["responseModalities"]);C!=null&&g(e,["responseModalities"],C);const D=h(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const N=h(n,["routingConfig"]);N!=null&&g(e,["routingConfig"],N);const L=h(n,["seed"]);L!=null&&g(e,["seed"],L);const U=h(n,["speechConfig"]);U!=null&&g(e,["speechConfig"],U);const B=h(n,["stopSequences"]);B!=null&&g(e,["stopSequences"],B);const $=h(n,["temperature"]);$!=null&&g(e,["temperature"],$);const ee=h(n,["thinkingConfig"]);ee!=null&&g(e,["thinkingConfig"],ee);const se=h(n,["topK"]);se!=null&&g(e,["topK"],se);const R=h(n,["topP"]);if(R!=null&&g(e,["topP"],R),h(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function b2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],yt(n,s)),t}function _2(n,e){const t={},s=h(e,["model"]);return s!=null&&g(t,["_url","name"],yt(n,s)),t}function T2(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function E2(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function S2(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);if(s!=null&&g(e,["imageSize"],s),h(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function A2(n){const e={},t=h(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const s=h(n,["imageSize"]);s!=null&&g(e,["imageSize"],s);const a=h(n,["personGeneration"]);a!=null&&g(e,["personGeneration"],a);const o=h(n,["outputMimeType"]);o!=null&&g(e,["imageOutputOptions","mimeType"],o);const c=h(n,["outputCompressionQuality"]);return c!=null&&g(e,["imageOutputOptions","compressionQuality"],c),e}function w2(n){const e={},t=h(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],aa(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function oS(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["imageBytes"],aa(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function Vf(n){const e={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=h(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],aa(t));const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function ii(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["imageBytes"]);s!=null&&g(e,["bytesBase64Encoded"],aa(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function N2(n,e,t){const s={},a=h(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const c=h(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],eS(n,f)),s}function C2(n,e,t){const s={},a=h(e,["pageSize"]);t!==void 0&&a!=null&&g(t,["_query","pageSize"],a);const o=h(e,["pageToken"]);t!==void 0&&o!=null&&g(t,["_query","pageToken"],o);const c=h(e,["filter"]);t!==void 0&&c!=null&&g(t,["_query","filter"],c);const f=h(e,["queryBase"]);return t!==void 0&&f!=null&&g(t,["_url","models_url"],eS(n,f)),s}function I2(n,e){const t={},s=h(e,["config"]);return s!=null&&N2(n,s,t),t}function k2(n,e){const t={},s=h(e,["config"]);return s!=null&&C2(n,s,t),t}function R2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["_self"]);if(a!=null){let o=tS(a);Array.isArray(o)&&(o=o.map(c=>Vp(c))),g(e,["models"],o)}return e}function M2(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["_self"]);if(a!=null){let o=tS(a);Array.isArray(o)&&(o=o.map(c=>jp(c))),g(e,["models"],o)}return e}function D2(n){const e={},t=h(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const s=h(n,["segmentationClasses"]);s!=null&&g(e,["maskClasses"],s);const a=h(n,["maskDilation"]);return a!=null&&g(e,["dilation"],a),e}function Vp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);a!=null&&g(e,["description"],a);const o=h(n,["version"]);o!=null&&g(e,["version"],o);const c=h(n,["_self"]);c!=null&&g(e,["tunedModelInfo"],J2(c));const f=h(n,["inputTokenLimit"]);f!=null&&g(e,["inputTokenLimit"],f);const p=h(n,["outputTokenLimit"]);p!=null&&g(e,["outputTokenLimit"],p);const m=h(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=h(n,["temperature"]);v!=null&&g(e,["temperature"],v);const _=h(n,["maxTemperature"]);_!=null&&g(e,["maxTemperature"],_);const T=h(n,["topP"]);T!=null&&g(e,["topP"],T);const A=h(n,["topK"]);A!=null&&g(e,["topK"],A);const C=h(n,["thinking"]);return C!=null&&g(e,["thinking"],C),e}function jp(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["displayName"]);s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);a!=null&&g(e,["description"],a);const o=h(n,["versionId"]);o!=null&&g(e,["version"],o);const c=h(n,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>KR(T))),g(e,["endpoints"],_)}const f=h(n,["labels"]);f!=null&&g(e,["labels"],f);const p=h(n,["_self"]);p!=null&&g(e,["tunedModelInfo"],Q2(p));const m=h(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=h(n,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),g(e,["checkpoints"],_)}return e}function P2(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],$R(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],YR(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],vR(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function L2(n){const e={},t=h(n,["productImage"]);return t!=null&&g(e,["image"],ii(t)),e}function U2(n,e){const t={},s=h(n,["numberOfImages"]);e!==void 0&&s!=null&&g(e,["parameters","sampleCount"],s);const a=h(n,["baseSteps"]);e!==void 0&&a!=null&&g(e,["parameters","baseSteps"],a);const o=h(n,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const c=h(n,["seed"]);e!==void 0&&c!=null&&g(e,["parameters","seed"],c);const f=h(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const p=h(n,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=h(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=h(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const _=h(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&g(e,["parameters","outputOptions","compressionQuality"],_);const T=h(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const A=h(n,["labels"]);return e!==void 0&&A!=null&&g(e,["labels"],A),t}function V2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["source"]);a!=null&&O2(a,t);const o=h(e,["config"]);return o!=null&&U2(o,t),t}function j2(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>Uf(a))),g(e,["generatedImages"],s)}return e}function O2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["personImage"]);e!==void 0&&a!=null&&g(e,["instances[0]","personImage","image"],ii(a));const o=h(n,["productImages"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>L2(f))),g(e,["instances[0]","productImages"],c)}return t}function G2(n){const e={},t=h(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],ii(t));const s=h(n,["referenceId"]);s!=null&&g(e,["referenceId"],s);const a=h(n,["referenceType"]);a!=null&&g(e,["referenceType"],a);const o=h(n,["maskImageConfig"]);o!=null&&g(e,["maskImageConfig"],D2(o));const c=h(n,["controlImageConfig"]);c!=null&&g(e,["controlImageConfig"],wR(c));const f=h(n,["styleImageConfig"]);f!=null&&g(e,["styleImageConfig"],f);const p=h(n,["subjectImageConfig"]);return p!=null&&g(e,["subjectImageConfig"],p),e}function lS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=h(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function cS(n){const e={},t=h(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const s=h(n,["safetyAttributes","scores"]);s!=null&&g(e,["scores"],s);const a=h(n,["contentType"]);return a!=null&&g(e,["contentType"],a),e}function B2(n){const e={},t=h(n,["category"]);if(t!=null&&g(e,["category"],t),h(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=h(n,["threshold"]);return s!=null&&g(e,["threshold"],s),e}function H2(n){const e={},t=h(n,["image"]);return t!=null&&g(e,["image"],ii(t)),e}function z2(n,e){const t={},s=h(n,["mode"]);e!==void 0&&s!=null&&g(e,["parameters","mode"],s);const a=h(n,["maxPredictions"]);e!==void 0&&a!=null&&g(e,["parameters","maxPredictions"],a);const o=h(n,["confidenceThreshold"]);e!==void 0&&o!=null&&g(e,["parameters","confidenceThreshold"],o);const c=h(n,["maskDilation"]);e!==void 0&&c!=null&&g(e,["parameters","maskDilation"],c);const f=h(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&g(e,["parameters","binaryColorThreshold"],f);const p=h(n,["labels"]);return e!==void 0&&p!=null&&g(e,["labels"],p),t}function F2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["source"]);a!=null&&K2(a,t);const o=h(e,["config"]);return o!=null&&z2(o,t),t}function q2(n){const e={},t=h(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>g2(a))),g(e,["generatedMasks"],s)}return e}function K2(n,e){const t={},s=h(n,["prompt"]);e!==void 0&&s!=null&&g(e,["instances[0]","prompt"],s);const a=h(n,["image"]);e!==void 0&&a!=null&&g(e,["instances[0]","image"],ii(a));const o=h(n,["scribbleImage"]);return e!==void 0&&o!=null&&g(e,["instances[0]","scribble"],H2(o)),t}function $2(n){const e={},t=h(n,["retrievalConfig"]);t!=null&&g(e,["retrievalConfig"],t);const s=h(n,["functionCallingConfig"]);return s!=null&&g(e,["functionCallingConfig"],JR(s)),e}function Y2(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],T2(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],E2(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function uS(n){const e={},t=h(n,["retrieval"]);t!=null&&g(e,["retrieval"],t);const s=h(n,["computerUse"]);if(s!=null&&g(e,["computerUse"],s),h(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=h(n,["codeExecution"]);a!=null&&g(e,["codeExecution"],a);const o=h(n,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const c=h(n,["functionDeclarations"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(T=>QR(T))),g(e,["functionDeclarations"],_)}const f=h(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const p=h(n,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=h(n,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const v=h(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function J2(n){const e={},t=h(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=h(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function Q2(n){const e={},t=h(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const s=h(n,["createTime"]);s!=null&&g(e,["createTime"],s);const a=h(n,["updateTime"]);return a!=null&&g(e,["updateTime"],a),e}function W2(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function X2(n,e){const t={},s=h(n,["displayName"]);e!==void 0&&s!=null&&g(e,["displayName"],s);const a=h(n,["description"]);e!==void 0&&a!=null&&g(e,["description"],a);const o=h(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&g(e,["defaultCheckpointId"],o),t}function Z2(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","name"],yt(n,s));const a=h(e,["config"]);return a!=null&&W2(a,t),t}function eM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["config"]);return a!=null&&X2(a,t),t}function tM(n,e){const t={},s=h(n,["outputGcsUri"]);e!==void 0&&s!=null&&g(e,["parameters","storageUri"],s);const a=h(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&g(e,["parameters","safetySetting"],a);const o=h(n,["personGeneration"]);e!==void 0&&o!=null&&g(e,["parameters","personGeneration"],o);const c=h(n,["includeRaiReason"]);e!==void 0&&c!=null&&g(e,["parameters","includeRaiReason"],c);const f=h(n,["outputMimeType"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","mimeType"],f);const p=h(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","compressionQuality"],p);const m=h(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=h(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const A=h(n,["mode"]);return e!==void 0&&A!=null&&g(e,["parameters","mode"],A),t}function nM(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["_url","model"],yt(n,s));const a=h(e,["image"]);a!=null&&g(t,["instances[0]","image"],ii(a));const o=h(e,["upscaleFactor"]);o!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],o);const c=h(e,["config"]);return c!=null&&tM(c,t),t}function sM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>Uf(o))),g(e,["generatedImages"],a)}return e}function iM(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["encodedVideo"]);s!=null&&g(e,["videoBytes"],aa(s));const a=h(n,["encoding"]);return a!=null&&g(e,["mimeType"],a),e}function rM(n){const e={},t=h(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const s=h(n,["bytesBase64Encoded"]);s!=null&&g(e,["videoBytes"],aa(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}function aM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["_self"],ii(t));const s=h(n,["maskMode"]);return s!=null&&g(e,["maskMode"],s),e}function oM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],Vf(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function lM(n){const e={},t=h(n,["image"]);t!=null&&g(e,["image"],ii(t));const s=h(n,["referenceType"]);return s!=null&&g(e,["referenceType"],s),e}function dS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["uri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["encodedVideo"],aa(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["encoding"],a),e}function fS(n){const e={},t=h(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const s=h(n,["videoBytes"]);s!=null&&g(e,["bytesBase64Encoded"],aa(s));const a=h(n,["mimeType"]);return a!=null&&g(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(n,e){const t={},s=h(n,["displayName"]);return e!==void 0&&s!=null&&g(e,["displayName"],s),t}function uM(n){const e={},t=h(n,["config"]);return t!=null&&cM(t,e),e}function dM(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function fM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&dM(s,e),e}function hM(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function mM(n,e){const t={},s=h(n,["customMetadata"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["customMetadata"],o)}const a=h(n,["chunkingConfig"]);return e!==void 0&&a!=null&&g(e,["chunkingConfig"],a),t}function pM(n){const e={},t=h(n,["name"]);t!=null&&g(e,["name"],t);const s=h(n,["metadata"]);s!=null&&g(e,["metadata"],s);const a=h(n,["done"]);a!=null&&g(e,["done"],a);const o=h(n,["error"]);o!=null&&g(e,["error"],o);const c=h(n,["response"]);return c!=null&&g(e,["response"],yM(c)),e}function gM(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["fileName"]);s!=null&&g(e,["fileName"],s);const a=h(n,["config"]);return a!=null&&mM(a,e),e}function yM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["parent"]);s!=null&&g(e,["parent"],s);const a=h(n,["documentName"]);return a!=null&&g(e,["documentName"],a),e}function xM(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function vM(n){const e={},t=h(n,["config"]);return t!=null&&xM(t,e),e}function bM(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["fileSearchStores"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["fileSearchStores"],o)}return e}function hS(n,e){const t={},s=h(n,["mimeType"]);e!==void 0&&s!=null&&g(e,["mimeType"],s);const a=h(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const o=h(n,["customMetadata"]);if(e!==void 0&&o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),g(e,["customMetadata"],f)}const c=h(n,["chunkingConfig"]);return e!==void 0&&c!=null&&g(e,["chunkingConfig"],c),t}function _M(n){const e={},t=h(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const s=h(n,["config"]);return s!=null&&hS(s,e),e}function TM(n){const e={},t=h(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EM="Content-Type",SM="X-Server-Timeout",AM="User-Agent",Op="x-goog-api-client",wM="1.35.0",NM=`google-genai-sdk/${wM}`,CM="v1beta1",IM="v1beta";class kM{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:CM,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:IM,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const a=[this.getRequestUrlInternal(t)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))a.searchParams.append(c,String(f));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,a.toString(),e.abortSignal),this.unaryApiCall(a,o,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[a,o]of Object.entries(t))typeof o=="object"?s[a]=Object.assign(Object.assign({},s[a]),o):o!==void 0&&(s[a]=o);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,t,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,a.toString(),e.abortSignal),this.streamApiCall(a,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,a){if(t&&t.timeout||a){const o=new AbortController,c=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>o.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}a&&a.addEventListener("abort",()=>{o.abort()}),e.signal=c}return t&&t.extraBody!==null&&RM(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await j_(a),new Pp(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async a=>(await j_(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return Zs(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ke(a.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=o.decode(v,{stream:!0});try{const C=JSON.parse(_);if("error"in C){const D=JSON.parse(JSON.stringify(C.error)),N=D.status,L=D.code,U=`got status: ${N}. ${JSON.stringify(C)}`;if(L>=400&&L<600)throw new Pf({message:U,status:L})}}catch(C){if(C.name==="ApiError")throw C}c+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const N of p){const L=c.indexOf(N);L!==-1&&(T===-1||L<T)&&(T=L,A=N.length)}if(T===-1)break;const C=c.substring(0,T);c=c.substring(T+A);const D=C.trim();if(D.startsWith(f)){const N=D.substring(f.length).trim();try{const L=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ke(new Pp(L))}catch(L){throw new Error(`exception parsing stream chunk ${N}. ${L}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=NM+" "+this.clientOptions.userAgentExtra;return e[AM]=t,e[Op]=t,e[EM]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[a,o]of Object.entries(e.headers))s.append(a,o);e.timeout&&e.timeout>0&&s.append(SM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const a={};t!=null&&(a.mimeType=t.mimeType,a.name=t.name,a.displayName=t.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,c=await o.stat(e);a.sizeBytes=String(c.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=f;const p={file:a},m=this.getFileName(e),v=Ce("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,p,t==null?void 0:t.httpOptions);return o.upload(e,_,this)}async uploadFileToFileSearchStore(e,t,s){var a;const o=this.clientOptions.uploader,c=await o.stat(t),f=String(c.size),p=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),_={};s!=null&&hS(s,_);const T=await this.fetchUploadUrl(m,f,p,v,_,s==null?void 0:s.httpOptions);return o.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,a,o,c){var f;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=m==null?void 0:m.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function j_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw t>=400&&t<600?new Pf({message:a,status:t}):new Error(a)}}function RM(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(o,c){const f=Object.assign({},o);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const m=c[p],v=f[p];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?f[p]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),f[p]=m)}return f}const a=s(t,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MM="mcp_used/unknown";let DM=!1;function mS(n){for(const e of n)if(PM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DM}function pS(n){var e;const t=(e=n[Op])!==null&&e!==void 0?e:"";n[Op]=(t+` ${MM}`).trimStart()}function PM(n){return n!==null&&typeof n=="object"&&n instanceof k0}function LM(n){return Zs(this,arguments,function*(t,s=100){let a,o=0;for(;o<s;){const c=yield Ke(t.listTools({cursor:a}));for(const f of c.tools)yield yield Ke(f),o++;if(!c.nextCursor)break;a=c.nextCursor}})}class k0{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new k0(e,t)}async initialize(){var e,t,s,a;if(this.mcpTools.length>0)return;const o={},c=[];for(const v of this.mcpClients)try{for(var f=!0,p=(t=void 0,ei(LM(v))),m;m=await p.next(),e=m.done,!e;f=!0){a=m.value,f=!1;const _=a;c.push(_);const T=_.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=v}}catch(_){t={error:_}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),hI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const c=await a.callTool({name:s.name,arguments:s.args},void 0,o);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UM(n,e,t){const s=new rI;let a;t.data instanceof Blob?a=JSON.parse(await t.data.text()):a=JSON.parse(t.data),Object.assign(s,a),e(s)}class VM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),c=GM(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const v=new Promise(B=>{m=B}),_=e.callbacks,T=function(){m({})},A=this.apiClient,C={onopen:T,onmessage:B=>{UM(A,_.onmessage,B)},onerror:(t=_==null?void 0:_.onerror)!==null&&t!==void 0?t:function(B){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(B){}},D=this.webSocketFactory.create(p,OM(c),C);D.connect(),await v;const U={setup:{model:yt(this.apiClient,e.model)}};return D.send(JSON.stringify(U)),new jM(D,this.apiClient)}}class jM{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=uR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=cR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(nl.PLAY)}pause(){this.sendPlaybackControl(nl.PAUSE)}stop(){this.sendPlaybackControl(nl.STOP)}resetContext(){this.sendPlaybackControl(nl.RESET_CONTEXT)}close(){this.conn.close()}}function OM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function GM(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function HM(n,e,t){const s=new iI;let a;t.data instanceof Blob?a=await t.data.text():t.data instanceof ArrayBuffer?a=new TextDecoder().decode(t.data):a=t.data;const o=JSON.parse(a);if(n.isVertexAI()){const c=hR(o);Object.assign(s,c)}else Object.assign(s,o);e(s)}class zM{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new VM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,a,o,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&mS(e.config.tools)&&pS(_);const T=$M(_);if(this.apiClient.isVertexAI())v=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const k=this.apiClient.getApiKey();let O="BidiGenerateContent",V="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",V="access_token"),v=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${O}?${V}=${k}`}let A=()=>{};const C=new Promise(k=>{A=k}),D=e.callbacks,N=function(){var k;(k=D==null?void 0:D.onopen)===null||k===void 0||k.call(D),A({})},L=this.apiClient,U={onopen:N,onmessage:k=>{HM(L,D.onmessage,k)},onerror:(t=D==null?void 0:D.onerror)!==null&&t!==void 0?t:function(k){},onclose:(s=D==null?void 0:D.onclose)!==null&&s!==void 0?s:function(k){}},B=this.webSocketFactory.create(v,KM(T),U);B.connect(),await C;let $=yt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const k=this.apiClient.getProject(),O=this.apiClient.getLocation();$=`projects/${k}/locations/${O}/`+$}let ee={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[tf.AUDIO]}:e.config.responseModalities=[tf.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],R=[];for(const k of se)if(this.isCallableTool(k)){const O=k;R.push(await O.tool())}else R.push(k);R.length>0&&(e.config.tools=R);const M={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ee=lR(this.apiClient,M):ee=oR(this.apiClient,M),delete ee.config,B.send(JSON.stringify(ee)),new qM(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const FM={turnComplete:!0};class qM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Ds(t.turns),e.isVertexAI()||(s=s.map(a=>Lf(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const o of s){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(BM)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},FM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:fR(e)}:t={realtimeInput:dR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function KM(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function $M(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O_=10;function G_(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(rl(c)){a=!0;break}if(!a)return!0;const o=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function rl(n){return"callTool"in n&&typeof n.callTool=="function"}function YM(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(a=>rl(a)))!==null&&s!==void 0?s:!1}function B_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(rl(s))return;const o=s;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(a)}),t}function H_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JM extends ar{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,a,o,c,f;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!YM(t)||G_(t.config))return await this.generateContentInternal(p);const m=B_(t);if(m.length>0){const D=m.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let v,_;const T=Ds(p.contents),A=(o=(a=(s=p.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:O_;let C=0;for(;C<A&&(v=await this.generateContentInternal(p),!(!v.functionCalls||v.functionCalls.length===0));){const D=v.candidates[0].content,N=[];for(const L of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(rl(L)){const B=await L.callTool(v.functionCalls);N.push(...B)}C++,_={role:"user",parts:N},p.contents=Ds(p.contents),p.contents.push(D),p.contents.push(_),H_(p.config)&&(T.push(D),T.push(_))}return H_(p.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var s,a,o,c,f;if(this.maybeMoveToResponseJsonSchem(t),G_(t.config)){const _=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(_)}const p=B_(t);if(p.length>0){const _=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(o=(a=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var a;let o;const c=[];if(s!=null&&s.generatedImages)for(const p of s.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((a=p==null?void 0:p.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=p==null?void 0:p.safetyAttributes:c.push(p);let f;return o?f={generatedImages:c,positivePromptSafetyAttributes:o,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new so(er.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const a={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async t=>{var s,a,o,c,f,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((a=t.video)===null||a===void 0)&&a.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(o=t.source)===null||o===void 0?void 0:o.video)===null||c===void 0)&&c.uri&&(!((p=(f=t.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,a;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const c=await Promise.all(o.map(async p=>rl(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&mS(e.config.tools)){const p=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),pS(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var t,s,a;const o=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(rl(c)){const f=c,p=await f.tool();for(const m of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(o.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);o.set(m.name,f)}}return o}async processAfcStream(e){var t,s,a;const o=(a=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:O_;let c=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(m,v,_){return Zs(this,arguments,function*(){for(var T,A,C,D,N,L;f<o;){c&&(f++,c=!1);const ee=yield Ke(m.processParamsMaybeAddMcpUsage(_)),se=yield Ke(m.generateContentStreamInternal(ee)),R=[],M=[];try{for(var U=!0,B=(A=void 0,ei(se)),$;$=yield Ke(B.next()),T=$.done,!T;U=!0){D=$.value,U=!1;const k=D;if(yield yield Ke(k),k.candidates&&(!((N=k.candidates[0])===null||N===void 0)&&N.content)){M.push(k.candidates[0].content);for(const O of(L=k.candidates[0].content.parts)!==null&&L!==void 0?L:[])if(f<o&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(O.functionCall.name)){const V=yield Ke(v.get(O.functionCall.name).callTool([O.functionCall]));R.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(k){A={error:k}}finally{try{!U&&!T&&(C=B.return)&&(yield Ke(C.call(B)))}finally{if(A)throw A.error}}if(R.length>0){c=!0;const k=new wc;k.candidates=[{content:{role:"user",parts:R}}],yield yield Ke(k);const O=[];O.push(...M),O.push({role:"user",parts:R});const V=Ds(_.contents).concat(O);_.contents=V}else break}})})(this,p,e)}async generateContentInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=L_(this.apiClient,e);return f=Ce("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=V_(v),T=new wc;return Object.assign(T,_),T})}else{const m=P_(this.apiClient,e);return f=Ce("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=U_(v),T=new wc;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=L_(this.apiClient,e);return f=Ce("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return Zs(this,arguments,function*(){var T,A,C,D;try{for(var N=!0,L=ei(_),U;U=yield Ke(L.next()),T=U.done,!T;N=!0){D=U.value,N=!1;const B=D,$=V_(yield Ke(B.json()));$.sdkHttpResponse={headers:B.headers};const ee=new wc;Object.assign(ee,$),yield yield Ke(ee)}}catch(B){A={error:B}}finally{try{!N&&!T&&(C=L.return)&&(yield Ke(C.call(L)))}finally{if(A)throw A.error}}})})}else{const m=P_(this.apiClient,e);return f=Ce("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(_){return Zs(this,arguments,function*(){var T,A,C,D;try{for(var N=!0,L=ei(_),U;U=yield Ke(L.next()),T=U.done,!T;N=!0){D=U.value,N=!1;const B=D,$=U_(yield Ke(B.json()));$.sdkHttpResponse={headers:B.headers};const ee=new wc;Object.assign(ee,$),yield yield Ke(ee)}}catch(B){A={error:B}}finally{try{!N&&!T&&(C=L.return)&&(yield Ke(C.call(L)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=zR(this.apiClient,e);return f=Ce("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=qR(v),T=new y_;return Object.assign(T,_),T})}else{const m=HR(this.apiClient,e);return f=Ce("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=FR(v),T=new y_;return Object.assign(T,_),T})}}async generateImagesInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=n2(this.apiClient,e);return f=Ce("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=i2(v),T=new x_;return Object.assign(T,_),T})}else{const m=t2(this.apiClient,e);return f=Ce("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=s2(v),T=new x_;return Object.assign(T,_),T})}}async editImageInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=jR(this.apiClient,e);return o=Ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=OR(p),v=new $C;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=nM(this.apiClient,e);return o=Ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=sM(p),v=new YC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=V2(this.apiClient,e);return o=Ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=j2(p),v=new JC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=F2(this.apiClient,e);return o=Ce("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=q2(p),v=new QC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=_2(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>jp(v))}else{const m=b2(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Vp(v))}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=k2(this.apiClient,e);return f=Ce("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=M2(v),T=new v_;return Object.assign(T,_),T})}else{const m=I2(this.apiClient,e);return f=Ce("{models_url}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=R2(v),T=new v_;return Object.assign(T,_),T})}}async update(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=eM(this.apiClient,e);return f=Ce("{model}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>jp(v))}else{const m=Z2(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Vp(v))}}async delete(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=PR(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=UR(v),T=new b_;return Object.assign(T,_),T})}else{const m=DR(this.apiClient,e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=LR(v),T=new b_;return Object.assign(T,_),T})}}async countTokens(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=kR(this.apiClient,e);return f=Ce("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=MR(v),T=new __;return Object.assign(T,_),T})}else{const m=IR(this.apiClient,e);return f=Ce("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=RR(v),T=new __;return Object.assign(T,_),T})}}async computeTokens(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=TR(this.apiClient,e);return o=Ce("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>{const m=ER(p),v=new WC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=u2(this.apiClient,e);return f=Ce("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=l2(v),T=new nf;return Object.assign(T,_),T})}else{const m=c2(this.apiClient,e);return f=Ce("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const _=o2(v),T=new nf;return Object.assign(T,_),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QM extends ar{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=t.name.split("/operations/")[0];let o;s&&"httpOptions"in s&&(o=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:a,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=BC(e);return f=Ce("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=GC(e);return f=Ce("{operationName}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=DC(e);return o=Ce("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WM(n){const e={},t=h(n,["data"]);if(t!=null&&g(e,["data"],t),h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function XM(n){const e={},t=h(n,["parts"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>oD(o))),g(e,["parts"],a)}const s=h(n,["role"]);return s!=null&&g(e,["role"],s),e}function ZM(n,e,t){const s={},a=h(e,["expireTime"]);t!==void 0&&a!=null&&g(t,["expireTime"],a);const o=h(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&g(t,["newSessionExpireTime"],o);const c=h(e,["uses"]);t!==void 0&&c!=null&&g(t,["uses"],c);const f=h(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&g(t,["bidiGenerateContentSetup"],aD(n,f));const p=h(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&g(t,["fieldMask"],p),s}function eD(n,e){const t={},s=h(e,["config"]);return s!=null&&g(t,["config"],ZM(n,s,t)),t}function tD(n){const e={};if(h(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=h(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const s=h(n,["mimeType"]);return s!=null&&g(e,["mimeType"],s),e}function nD(n){const e={},t=h(n,["id"]);t!=null&&g(e,["id"],t);const s=h(n,["args"]);s!=null&&g(e,["args"],s);const a=h(n,["name"]);if(a!=null&&g(e,["name"],a),h(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sD(n){const e={};if(h(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=h(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function iD(n){const e={};if(h(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=h(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function rD(n,e){const t={},s=h(n,["generationConfig"]);e!==void 0&&s!=null&&g(e,["setup","generationConfig"],s);const a=h(n,["responseModalities"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","responseModalities"],a);const o=h(n,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const c=h(n,["topP"]);e!==void 0&&c!=null&&g(e,["setup","generationConfig","topP"],c);const f=h(n,["topK"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","topK"],f);const p=h(n,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=h(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=h(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const _=h(n,["speechConfig"]);e!==void 0&&_!=null&&g(e,["setup","generationConfig","speechConfig"],I0(_));const T=h(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const A=h(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=h(n,["systemInstruction"]);e!==void 0&&C!=null&&g(e,["setup","systemInstruction"],XM(Un(C)));const D=h(n,["tools"]);if(e!==void 0&&D!=null){let se=bl(D);Array.isArray(se)&&(se=se.map(R=>cD(vl(R)))),g(e,["setup","tools"],se)}const N=h(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],lD(N));const L=h(n,["inputAudioTranscription"]);e!==void 0&&L!=null&&g(e,["setup","inputAudioTranscription"],L);const U=h(n,["outputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","outputAudioTranscription"],U);const B=h(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&g(e,["setup","realtimeInputConfig"],B);const $=h(n,["contextWindowCompression"]);e!==void 0&&$!=null&&g(e,["setup","contextWindowCompression"],$);const ee=h(n,["proactivity"]);if(e!==void 0&&ee!=null&&g(e,["setup","proactivity"],ee),h(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function aD(n,e){const t={},s=h(e,["model"]);s!=null&&g(t,["setup","model"],yt(n,s));const a=h(e,["config"]);return a!=null&&g(t,["config"],rD(a,t)),t}function oD(n){const e={},t=h(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const s=h(n,["codeExecutionResult"]);s!=null&&g(e,["codeExecutionResult"],s);const a=h(n,["executableCode"]);a!=null&&g(e,["executableCode"],a);const o=h(n,["fileData"]);o!=null&&g(e,["fileData"],tD(o));const c=h(n,["functionCall"]);c!=null&&g(e,["functionCall"],nD(c));const f=h(n,["functionResponse"]);f!=null&&g(e,["functionResponse"],f);const p=h(n,["inlineData"]);p!=null&&g(e,["inlineData"],WM(p));const m=h(n,["text"]);m!=null&&g(e,["text"],m);const v=h(n,["thought"]);v!=null&&g(e,["thought"],v);const _=h(n,["thoughtSignature"]);_!=null&&g(e,["thoughtSignature"],_);const T=h(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function lD(n){const e={},t=h(n,["handle"]);if(t!=null&&g(e,["handle"],t),h(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cD(n){const e={};if(h(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=h(n,["computerUse"]);t!=null&&g(e,["computerUse"],t);const s=h(n,["fileSearch"]);s!=null&&g(e,["fileSearch"],s);const a=h(n,["codeExecution"]);if(a!=null&&g(e,["codeExecution"],a),h(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(n,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(_=>_)),g(e,["functionDeclarations"],v)}const c=h(n,["googleMaps"]);c!=null&&g(e,["googleMaps"],sD(c));const f=h(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],iD(f));const p=h(n,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=h(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uD(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(o=>`${t}.${o}`);e.push(...a)}else e.push(t)}return e.join(",")}function dD(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const o=s.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(t){const o=uD(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];a.length>0&&(f=a.map(m=>c.includes(m)?`generationConfig.${m}`:m));const p=[];o&&p.push(o),f.length>0&&p.push(...f),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class fD extends ar{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=eD(this.apiClient,e);o=Ce("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const p=dD(f,e.config);return a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hD(n,e){const t={},s=h(n,["force"]);return e!==void 0&&s!=null&&g(e,["_query","force"],s),t}function mD(n){const e={},t=h(n,["name"]);t!=null&&g(e,["_url","name"],t);const s=h(n,["config"]);return s!=null&&hD(s,e),e}function pD(n){const e={},t=h(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function gD(n,e){const t={},s=h(n,["pageSize"]);e!==void 0&&s!=null&&g(e,["_query","pageSize"],s);const a=h(n,["pageToken"]);return e!==void 0&&a!=null&&g(e,["_query","pageToken"],a),t}function yD(n){const e={},t=h(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const s=h(n,["config"]);return s!=null&&gD(s,e),e}function xD(n){const e={},t=h(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const s=h(n,["nextPageToken"]);s!=null&&g(e,["nextPageToken"],s);const a=h(n,["documents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),g(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vD extends ar{constructor(e){super(),this.apiClient=e,this.list=async t=>new so(er.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=pD(e);return o=Ce("{name}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mD(e);a=Ce("{name}",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yD(e);return o=Ce("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=xD(p),v=new XC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bD extends ar{constructor(e,t=new vD(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new so(er.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uM(e);return o=Ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hM(e);return o=Ce("{name}",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var t,s;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fM(e);a=Ce("{name}",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=vM(e);return o=Ce("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=bM(p),v=new ZC;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_M(e);return o=Ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=TM(p),v=new eI;return Object.assign(v,m),v})}}async importFile(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gM(e);return o=Ce("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const m=pM(p),v=new S0;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return gS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const _D=()=>gS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Bp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Us extends Error{}class zn extends Us{constructor(e,t,s,a){super(`${zn.makeMessage(e,t,s)}`),this.status=e,this.headers=a,this.error=t}static makeMessage(e,t,s){const a=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,t,s,a){if(!e||!a)return new jf({message:s,cause:Bp(t)});const o=t;return e===400?new xS(e,o,s,a):e===401?new vS(e,o,s,a):e===403?new bS(e,o,s,a):e===404?new _S(e,o,s,a):e===409?new TS(e,o,s,a):e===422?new ES(e,o,s,a):e===429?new SS(e,o,s,a):e>=500?new AS(e,o,s,a):new zn(e,o,s,a)}}class Hp extends zn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class jf extends zn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class yS extends jf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xS extends zn{}class vS extends zn{}class bS extends zn{}class _S extends zn{}class TS extends zn{}class ES extends zn{}class SS extends zn{}class AS extends zn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TD=/^[a-z][a-z0-9+.-]*:/i,ED=n=>TD.test(n);let zp=n=>(zp=Array.isArray,zp(n));const SD=zp;let AD=SD;const z_=AD;function wD(n){if(!n)return!0;for(const e in n)return!1;return!0}function ND(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const CD=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Us(`${n} must be an integer`);if(e<0)throw new Us(`${n} must be a positive integer`);return e},ID=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kD=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const MD=()=>{var n,e,t,s,a;const o=RD();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":q_(Deno.build.os),"X-Stainless-Arch":F_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":q_((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":F_((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=DD();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const a=s[1]||0,o=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${o}.${c}`}}}return null}const F_=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",q_=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Cd;const PD=()=>Cd??(Cd=MD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function wS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function UD(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return wS({start(){},async pull(t){const{done:s,value:a}=await e.next();s?t.close():t.enqueue(a)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function NS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function VD(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CS=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function mp(n,e,t){return CS(),new File(n,e??"unknown_file",t)}function OD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const GD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",BD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&IS(n),HD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function zD(n,e,t){if(CS(),n=await n,BD(n))return n instanceof File?n:mp([await n.arrayBuffer()],n.name);if(HD(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),mp(await Fp(a),e,t)}const s=await Fp(n);if(e||(e=OD(n)),!(t!=null&&t.type)){const a=s.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(t=Object.assign(Object.assign({},t),{type:a}))}return mp(s,e,t)}async function Fp(n){var e,t,s,a,o;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(IS(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(GD(n))try{for(var f=!0,p=ei(n),m;m=await p.next(),e=m.done,!e;f=!0){a=m.value,f=!1;const v=a;c.push(...await Fp(v))}}catch(v){t={error:v}}finally{try{!f&&!e&&(s=p.return)&&await s.call(p)}finally{if(t)throw t.error}}else{const v=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${FD(n)}`)}return c}function FD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kS{constructor(e){this._client=e}}kS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const K_=Object.freeze(Object.create(null)),qD=(n=RS)=>(function(t,...s){if(t.length===1)return t[0];let a=!1;const o=[],c=t.reduce((v,_,T)=>{var A,C,D;/[?#]/.test(_)&&(a=!0);const N=s[T];let L=(a?encodeURIComponent:n)(""+N);return T!==s.length&&(N==null||typeof N=="object"&&N.toString===((D=Object.getPrototypeOf((C=Object.getPrototypeOf((A=N.hasOwnProperty)!==null&&A!==void 0?A:K_))!==null&&C!==void 0?C:K_))===null||D===void 0?void 0:D.toString))&&(L=N+"",o.push({start:v.length+_.length,length:L.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":L)},""),f=c.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=p.exec(f))!==null;)o.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(o.sort((v,_)=>v.start-_.start),o.length>0){let v=0;const _=o.reduce((T,A)=>{const C=" ".repeat(A.start-v),D="^".repeat(A.length);return v=A.start+A.length,T+C+D},"");throw new Us(`Path parameters result in path with invalid segments:
${o.map(T=>T.error).join(`
`)}
${c}
${_}`)}return c}),Id=qD(RS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MS extends kS{create(e,t){var s;const{api_version:a=this._client.apiVersion}=e,o=rf(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Us("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Us("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Id`/${a}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.delete(Id`/${a}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:a=this._client.apiVersion}=t??{};return this._client.post(Id`/${a}/interactions/${e}/cancel`,s)}get(e,t={},s){var a;const o=t??{},{api_version:c=this._client.apiVersion}=o,f=rf(o,["api_version"]);return this._client.get(Id`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(a=t==null?void 0:t.stream)!==null&&a!==void 0?a:!1}))}}MS._key=Object.freeze(["interactions"]);class DS extends MS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KD(n){let e=0;for(const a of n)e+=a.length;const t=new Uint8Array(e);let s=0;for(const a of n)t.set(a,s),s+=a.length;return t}let kd;function R0(n){let e;return(kd??(e=new globalThis.TextEncoder,kd=e.encode.bind(e)))(n)}let Rd;function $_(n){let e;return(Rd??(e=new globalThis.TextDecoder,Rd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Of{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?R0(e):e;this.buffer=KD([this.buffer,t]);const s=[];let a;for(;(a=$D(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push($_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=$_(this.buffer.subarray(0,o));s.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Of.NEWLINE_CHARS=new Set([`
`,"\r"]);Of.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function $D(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function YD(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const af={off:0,error:200,warn:300,info:400,debug:500},Y_=(n,e,t)=>{if(n){if(ND(af,n))return n;Gn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(af))}`)}};function Cc(){}function Md(n,e,t){return!e||af[n]>af[t]?Cc:e[n].bind(e)}const JD={error:Cc,warn:Cc,info:Cc,debug:Cc};let J_=new WeakMap;function Gn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return JD;const a=J_.get(t);if(a&&a[0]===s)return a[1];const o={error:Md("error",t,s),warn:Md("warn",t,s),info:Md("info",t,s),debug:Md("debug",t,s)};return J_.set(t,[s,o]),o}const Ha=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sl{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let a=!1;const o=s?Gn(s):console;function c(){return Zs(this,arguments,function*(){var p,m,v,_;if(a)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,C=ei(QD(e,t)),D;D=yield Ke(C.next()),p=D.done,!p;A=!0){_=D.value,A=!1;const N=_;if(!T)if(N.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Ke(JSON.parse(N.data))}catch(L){throw o.error("Could not parse message into JSON:",N.data),o.error("From chunk:",N.raw),L}}}catch(N){m={error:N}}finally{try{!A&&!p&&(v=C.return)&&(yield Ke(v.call(C)))}finally{if(m)throw m.error}}T=!0}catch(N){if(Gp(N))return yield Ke(void 0);throw N}finally{T||t.abort()}})}return new sl(c,t,s)}static fromReadableStream(e,t,s){let a=!1;function o(){return Zs(this,arguments,function*(){var p,m,v,_;const T=new Of,A=NS(e);try{for(var C=!0,D=ei(A),N;N=yield Ke(D.next()),p=N.done,!p;C=!0){_=N.value,C=!1;const L=_;for(const U of T.decode(L))yield yield Ke(U)}}catch(L){m={error:L}}finally{try{!C&&!p&&(v=D.return)&&(yield Ke(v.call(D)))}finally{if(m)throw m.error}}for(const L of T.flush())yield yield Ke(L)})}function c(){return Zs(this,arguments,function*(){var p,m,v,_;if(a)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,C=ei(o()),D;D=yield Ke(C.next()),p=D.done,!p;A=!0){_=D.value,A=!1;const N=_;T||N&&(yield yield Ke(JSON.parse(N)))}}catch(N){m={error:N}}finally{try{!A&&!p&&(v=C.return)&&(yield Ke(v.call(C)))}finally{if(m)throw m.error}}T=!0}catch(N){if(Gp(N))return yield Ke(void 0);throw N}finally{T||t.abort()}})}return new sl(c,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),a=o=>({next:()=>{if(o.length===0){const c=s.next();e.push(c),t.push(c)}return o.shift()}});return[new sl(()=>a(e),this.controller,this.client),new sl(()=>a(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return wS({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await t.next();if(o)return s.close();const c=R0(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function QD(n,e){return Zs(this,arguments,function*(){var s,a,o,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Us("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Us("Attempted to iterate over a response with no body");const f=new XD,p=new Of,m=NS(n.body);try{for(var v=!0,_=ei(WD(m)),T;T=yield Ke(_.next()),s=T.done,!s;v=!0){c=T.value,v=!1;const A=c;for(const C of p.decode(A)){const D=f.decode(C);D&&(yield yield Ke(D))}}}catch(A){a={error:A}}finally{try{!v&&!s&&(o=_.return)&&(yield Ke(o.call(_)))}finally{if(a)throw a.error}}for(const A of p.flush()){const C=f.decode(A);C&&(yield yield Ke(C))}})}function WD(n){return Zs(this,arguments,function*(){var t,s,a,o;let c=new Uint8Array;try{for(var f=!0,p=ei(n),m;m=yield Ke(p.next()),t=m.done,!t;f=!0){o=m.value,f=!1;const v=o;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?R0(v):v;let T=new Uint8Array(c.length+_.length);T.set(c),T.set(_,c.length),c=T;let A;for(;(A=YD(c))!==-1;)yield yield Ke(c.slice(0,A)),c=c.slice(A)}}catch(v){s={error:v}}finally{try{!f&&!t&&(a=p.return)&&(yield Ke(a.call(p)))}finally{if(s)throw s.error}}c.length>0&&(yield yield Ke(c))})}class XD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,a]=ZD(e,":");return a.startsWith(" ")&&(a=a.substring(1)),t==="event"?this.event=a:t==="data"&&this.data.push(a),null}}function ZD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e4(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:a,startTime:o}=e,c=await(async()=>{var f;if(e.options.stream)return Gn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):sl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),m=(f=p==null?void 0:p.split(";")[0])===null||f===void 0?void 0:f.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return Gn(n).debug(`[${s}] response parsed`,Ha({retryOfRequestLogID:a,url:t.url,status:t.status,body:c,durationMs:Date.now()-o})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M0 extends Promise{constructor(e,t,s=e4){super(a=>{a(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new M0(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PS=Symbol("brand.privateNullableHeaders");function*t4(n){if(!n)return;if(PS in n){const{values:s,nulls:a}=n;yield*s.entries();for(const o of a)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():z_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=z_(s[1])?s[1]:[s[1]];let c=!1;for(const f of o)f!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,f])}}const Nc=n=>{const e=new Headers,t=new Set;for(const s of n){const a=new Set;for(const[o,c]of t4(s)){const f=o.toLowerCase();a.has(f)||(e.delete(o),a.add(f)),c===null?(e.delete(o),t.add(f)):(e.append(o,c),t.delete(f))}}return{[PS]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pp=n=>{var e,t,s,a,o,c;if(typeof globalThis.process<"u")return(s=(t=(e=NC)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(o=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||o===void 0?void 0:o.call(a,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var LS;class Gf{constructor(e){var t,s,a,o,c,f,p,{baseURL:m=pp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=pp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:_="v1beta"}=e,T=rf(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Gf.DEFAULT_TIMEOUT,this.logger=(a=A.logger)!==null&&a!==void 0?a:console;const C="warn";this.logLevel=C,this.logLevel=(c=(o=Y_(A.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:Y_(pp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:C,this.fetchOptions=A.fetchOptions,this.maxRetries=(f=A.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=A.fetch)!==null&&p!==void 0?p:LD(),this.encoder=jD,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Nc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Nc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Nc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new Us(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Wo}`}defaultIdempotencyKey(){return`stainless-node-retry-${_D()}`}makeStatusError(e,t,s,a){return zn.generate(e,t,s,a)}buildURL(e,t,s){const a=!this.baseURLOverridden()&&s||this.baseURL,o=ED(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return wD(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:t},a)))}request(e,t=null){return new M0(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var a,o,c;const f=await e,p=(a=f.maxRetries)!==null&&a!==void 0?a:this.maxRetries;t==null&&(t=p),await this.prepareOptions(f);const{req:m,url:v,timeout:_}=await this.buildRequest(f,{retryCount:p-t});await this.prepareRequest(m,{url:v,options:f});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,C=Date.now();if(Gn(this).debug(`[${T}] sending request`,Ha({retryOfRequestLogID:s,method:f.method,url:v,options:f,headers:m.headers})),!((o=f.signal)===null||o===void 0)&&o.aborted)throw new Hp;const D=new AbortController,N=await this.fetchWithTimeout(v,m,_,D).catch(Bp),L=Date.now();if(N instanceof globalThis.Error){const B=`retrying, ${t} attempts remaining`;if(!((c=f.signal)===null||c===void 0)&&c.aborted)throw new Hp;const $=Gp(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(t)return Gn(this).info(`[${T}] connection ${$?"timed out":"failed"} - ${B}`),Gn(this).debug(`[${T}] connection ${$?"timed out":"failed"} (${B})`,Ha({retryOfRequestLogID:s,url:v,durationMs:L-C,message:N.message})),this.retryRequest(f,t,s??T);throw Gn(this).info(`[${T}] connection ${$?"timed out":"failed"} - error; no more retries left`),Gn(this).debug(`[${T}] connection ${$?"timed out":"failed"} (error; no more retries left)`,Ha({retryOfRequestLogID:s,url:v,durationMs:L-C,message:N.message})),$?new yS:new jf({cause:N})}const U=`[${T}${A}] ${m.method} ${v} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${L-C}ms`;if(!N.ok){const B=await this.shouldRetry(N);if(t&&B){const k=`retrying, ${t} attempts remaining`;return await VD(N.body),Gn(this).info(`${U} - ${k}`),Gn(this).debug(`[${T}] response error (${k})`,Ha({retryOfRequestLogID:s,url:N.url,status:N.status,headers:N.headers,durationMs:L-C})),this.retryRequest(f,t,s??T,N.headers)}const $=B?"error; no more retries left":"error; not retryable";Gn(this).info(`${U} - ${$}`);const ee=await N.text().catch(k=>Bp(k).message),se=ID(ee),R=se?void 0:ee;throw Gn(this).debug(`[${T}] response error (${$})`,Ha({retryOfRequestLogID:s,url:N.url,status:N.status,headers:N.headers,message:R,durationMs:Date.now()-C})),this.makeStatusError(N.status,se,R,N.headers)}return Gn(this).info(U),Gn(this).debug(`[${T}] response start`,Ha({retryOfRequestLogID:s,url:N.url,status:N.status,headers:N.headers,durationMs:L-C})),{response:N,options:f,controller:D,requestLogID:T,retryOfRequestLogID:s,startTime:C}}async fetchWithTimeout(e,t,s,a){const o=t||{},{signal:c,method:f}=o,p=rf(o,["signal","method"]);c&&c.addEventListener("abort",()=>a.abort());const m=setTimeout(()=>a.abort(),s),v=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),p);f&&(_.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,a){var o;let c;const f=a==null?void 0:a.get("retry-after-ms");if(f){const m=parseFloat(f);Number.isNaN(m)||(c=m)}const p=a==null?void 0:a.get("retry-after");if(p&&!c){const m=parseFloat(p);Number.isNaN(m)?c=Date.parse(p)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await kD(c),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,c=Math.min(.5*Math.pow(2,o),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,a,o;const c=Object.assign({},e),{method:f,path:p,query:m,defaultBaseURL:v}=c,_=this.buildURL(p,m,v);"timeout"in c&&CD("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:c}),C=await this.buildHeaders({options:e,method:f,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:C},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(o=c.fetchOptions)!==null&&o!==void 0?o:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:a}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let f=Nc([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),PD()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Nc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:UD(e)}:this.encoder({body:e,headers:s})}}Gf.DEFAULT_TIMEOUT=6e4;class vn extends Gf{constructor(){super(...arguments),this.interactions=new DS(this)}}LS=vn;vn.GeminiNextGenAPIClient=LS;vn.GeminiNextGenAPIClientError=Us;vn.APIError=zn;vn.APIConnectionError=jf;vn.APIConnectionTimeoutError=yS;vn.APIUserAbortError=Hp;vn.NotFoundError=_S;vn.ConflictError=TS;vn.RateLimitError=SS;vn.BadRequestError=xS;vn.AuthenticationError=vS;vn.InternalServerError=AS;vn.PermissionDeniedError=bS;vn.UnprocessableEntityError=ES;vn.toFile=zD;vn.Interactions=DS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n4(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function s4(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function i4(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function r4(n,e){const t={},s=h(n,["sdkHttpResponse"]);return s!=null&&g(t,["sdkHttpResponse"],s),t}function a4(n,e,t){const s={};if(h(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=h(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&g(e,["displayName"],a),h(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=h(n,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const c=h(n,["learningRateMultiplier"]);if(c!=null&&g(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),h(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=h(n,["batchSize"]);e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","batchSize"],f);const p=h(n,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),h(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function o4(n,e,t){const s={};let a=h(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec"],Q_(A))}else if(a==="PREFERENCE_TUNING"){const A=h(n,["validationDataset"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec"],Q_(A))}const o=h(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const c=h(n,["description"]);e!==void 0&&c!=null&&g(e,["description"],c);let f=h(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(f==="PREFERENCE_TUNING"){const A=h(n,["epochCount"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let p=h(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(p==="PREFERENCE_TUNING"){const A=h(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let m=h(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(m==="PREFERENCE_TUNING"){const A=h(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=h(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=h(n,["adapterSize"]);e!==void 0&&A!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(h(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=h(n,["labels"]);e!==void 0&&_!=null&&g(e,["labels"],_);const T=h(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),s}function l4(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=h(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const o=h(n,["trainingDataset"]);o!=null&&v4(o);const c=h(n,["config"]);return c!=null&&a4(c,t),t}function c4(n,e){const t={},s=h(n,["baseModel"]);s!=null&&g(t,["baseModel"],s);const a=h(n,["preTunedModel"]);a!=null&&g(t,["preTunedModel"],a);const o=h(n,["trainingDataset"]);o!=null&&b4(o,t,e);const c=h(n,["config"]);return c!=null&&o4(c,t,e),t}function u4(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function d4(n,e){const t={},s=h(n,["name"]);return s!=null&&g(t,["_url","name"],s),t}function f4(n,e,t){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const c=h(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function h4(n,e,t){const s={},a=h(n,["pageSize"]);e!==void 0&&a!=null&&g(e,["_query","pageSize"],a);const o=h(n,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const c=h(n,["filter"]);return e!==void 0&&c!=null&&g(e,["_query","filter"],c),s}function m4(n,e){const t={},s=h(n,["config"]);return s!=null&&f4(s,t),t}function p4(n,e){const t={},s=h(n,["config"]);return s!=null&&h4(s,t),t}function g4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const o=h(n,["tunedModels"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>US(f))),g(t,["tuningJobs"],c)}return t}function y4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["nextPageToken"]);a!=null&&g(t,["nextPageToken"],a);const o=h(n,["tuningJobs"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>qp(f))),g(t,["tuningJobs"],c)}return t}function x4(n,e){const t={},s=h(n,["name"]);s!=null&&g(t,["model"],s);const a=h(n,["name"]);return a!=null&&g(t,["endpoint"],a),t}function v4(n,e){const t={};if(h(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=h(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),g(t,["examples","examples"],a)}return t}function b4(n,e,t){const s={};let a=h(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=h(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=h(n,["gcsUri"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let o=h(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=h(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=h(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(h(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function US(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&g(t,["name"],a);const o=h(n,["state"]);o!=null&&g(t,["state"],XE(o));const c=h(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=h(n,["tuningTask","startTime"]);f!=null&&g(t,["startTime"],f);const p=h(n,["tuningTask","completeTime"]);p!=null&&g(t,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=h(n,["description"]);v!=null&&g(t,["description"],v);const _=h(n,["baseModel"]);_!=null&&g(t,["baseModel"],_);const T=h(n,["_self"]);return T!=null&&g(t,["tunedModel"],x4(T)),t}function qp(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&g(t,["name"],a);const o=h(n,["state"]);o!=null&&g(t,["state"],XE(o));const c=h(n,["createTime"]);c!=null&&g(t,["createTime"],c);const f=h(n,["startTime"]);f!=null&&g(t,["startTime"],f);const p=h(n,["endTime"]);p!=null&&g(t,["endTime"],p);const m=h(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=h(n,["error"]);v!=null&&g(t,["error"],v);const _=h(n,["description"]);_!=null&&g(t,["description"],_);const T=h(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const A=h(n,["tunedModel"]);A!=null&&g(t,["tunedModel"],A);const C=h(n,["preTunedModel"]);C!=null&&g(t,["preTunedModel"],C);const D=h(n,["supervisedTuningSpec"]);D!=null&&g(t,["supervisedTuningSpec"],D);const N=h(n,["preferenceOptimizationSpec"]);N!=null&&g(t,["preferenceOptimizationSpec"],N);const L=h(n,["tuningDataStats"]);L!=null&&g(t,["tuningDataStats"],L);const U=h(n,["encryptionSpec"]);U!=null&&g(t,["encryptionSpec"],U);const B=h(n,["partnerModelTuningSpec"]);B!=null&&g(t,["partnerModelTuningSpec"],B);const $=h(n,["customBaseModel"]);$!=null&&g(t,["customBaseModel"],$);const ee=h(n,["experiment"]);ee!=null&&g(t,["experiment"],ee);const se=h(n,["labels"]);se!=null&&g(t,["labels"],se);const R=h(n,["outputUri"]);R!=null&&g(t,["outputUri"],R);const M=h(n,["pipelineJob"]);M!=null&&g(t,["pipelineJob"],M);const k=h(n,["serviceAccount"]);k!=null&&g(t,["serviceAccount"],k);const O=h(n,["tunedModelDisplayName"]);O!=null&&g(t,["tunedModelDisplayName"],O);const V=h(n,["veoTuningSpec"]);return V!=null&&g(t,["veoTuningSpec"],V),t}function _4(n,e){const t={},s=h(n,["sdkHttpResponse"]);s!=null&&g(t,["sdkHttpResponse"],s);const a=h(n,["name"]);a!=null&&g(t,["name"],a);const o=h(n,["metadata"]);o!=null&&g(t,["metadata"],o);const c=h(n,["done"]);c!=null&&g(t,["done"],c);const f=h(n,["error"]);return f!=null&&g(t,["error"],f),t}function Q_(n,e){const t={},s=h(n,["gcsUri"]);s!=null&&g(t,["validationDatasetUri"],s);const a=h(n,["vertexDatasetResource"]);return a!=null&&g(t,["validationDatasetUri"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T4 extends ar{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(er.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const a={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:a});return o.baseModel=void 0,await this.tuneInternal(o)}else{const a=Object.assign({},t);return await this.tuneInternal(a)}else{const a=Object.assign({},t),o=await this.tuneMldevInternal(a);let c="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?c=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(c=o.name.split("/operations/")[0]),{name:c,state:Dp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=d4(e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>qp(v))}else{const m=u4(e);return f=Ce("{name}",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>US(v))}}async listInternal(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=p4(e);return f=Ce("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=y4(v),T=new T_;return Object.assign(T,_),T})}else{const m=m4(e);return f=Ce("tunedModels",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=g4(v),T=new T_;return Object.assign(T,_),T})}}async cancel(e){var t,s,a,o;let c,f="",p={};if(this.apiClient.isVertexAI()){const m=s4(e);return f=Ce("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=r4(v),T=new E_;return Object.assign(T,_),T})}else{const m=n4(e);return f=Ce("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),c.then(v=>{const _=i4(v),T=new E_;return Object.assign(T,_),T})}}async tuneInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI()){const f=c4(e,e);return o=Ce("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>qp(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let a,o="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=l4(e);return o=Ce("tunedModels",f._url),c=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:p.headers},v})),a.then(p=>_4(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E4{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const S4=1024*1024*8,A4=3,w4=1e3,N4=2,of="x-goog-upload-status";async function C4(n,e,t){var s;const a=await VS(n,e,t),o=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[of])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function I4(n,e,t){var s;const a=await VS(n,e,t),o=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[of])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=KE(o),f=new A0;return Object.assign(f,c),f}async function VS(n,e,t){var s,a;let o=0,c=0,f=new Pp(new Response),p="upload";for(o=n.size;c<o;){const m=Math.min(S4,o-c),v=n.slice(c,c+m);c+m>=o&&(p+=", finalize");let _=0,T=w4;for(;_<A4&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[of]));)_++,await R4(T),T=T*N4;if(c+=m,((a=f==null?void 0:f.headers)===null||a===void 0?void 0:a[of])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function k4(n){return{size:n.size,type:n.type}}function R4(n){return new Promise(e=>setTimeout(e,n))}class M4{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await C4(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await I4(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D4{create(e,t,s){return new P4(e,t,s)}}class P4{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W_="x-goog-api-key";class L4{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(W_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(W_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U4="gl-node/";class V4{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new vn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=RC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new L4(this.apiKey);this.apiClient=new kM({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:U4+"web",uploader:new M4,downloader:new E4}),this.models=new JM(this.apiClient),this.live=new zM(this.apiClient,a,new D4),this.batches=new ak(this.apiClient),this.chats=new Bk(this.models,this.apiClient),this.caches=new jk(this.apiClient),this.files=new Wk(this.apiClient),this.operations=new QM(this.apiClient),this.authTokens=new fD(this.apiClient),this.tunings=new T4(this.apiClient),this.fileSearchStores=new bD(this.apiClient)}}const j4=new V4({apiKey:"PLACEHOLDER_API_KEY"});function X_(n){const e=[...n];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const jS={type:Ne.OBJECT,properties:{id:{type:Ne.STRING},type:{type:Ne.STRING,enum:["multiple_choice","short_answer","long_text"]},content:{type:Ne.STRING},options:{type:Ne.ARRAY,items:{type:Ne.STRING}},correctAnswer:{type:Ne.STRING},tkpPoints:{type:Ne.ARRAY,items:{type:Ne.OBJECT,properties:{option:{type:Ne.STRING},points:{type:Ne.INTEGER}}}},explanation:{type:Ne.STRING},shortcut:{type:Ne.STRING},metadata:{type:Ne.OBJECT,properties:{difficulty:{type:Ne.STRING,enum:["Easy","Medium","Hard","HOTS"]},idealTimeSeconds:{type:Ne.INTEGER},topic:{type:Ne.STRING},subtest:{type:Ne.STRING},trapPattern:{type:Ne.STRING}}}},required:["id","type","content","correctAnswer","explanation","metadata"]},O4={type:Ne.OBJECT,properties:{questions:{type:Ne.ARRAY,items:jS}},required:["questions"]};async function wi(n,e,t){const s="gemini-3-flash-preview",a={temperature:.85,topP:.95,topK:40};e&&(a.responseMimeType="application/json",a.responseSchema=e);const o=[];t&&o.push({inlineData:{mimeType:"application/pdf",data:t}}),o.push({text:n});try{const f=(await j4.models.generateContent({model:s,contents:{role:"user",parts:o},config:a})).text;if(!f)throw new Error("Empty response from AI");if(e)try{let p=f.trim();return p.startsWith("```json")?p=p.replace(/^```json\n?/,"").replace(/\n?```$/,""):p.startsWith("```")&&(p=p.replace(/^```\n?/,"").replace(/\n?```$/,"")),JSON.parse(p)}catch(p){console.error("JSON Parse Error",p);const m=f.match(/\{[\s\S]*\}|\[[\s\S]*\]/);return m?JSON.parse(m[0]):f}return f}catch(c){throw console.error("Gemini API Error:",c),c}}function G4(n){return n.id||(n.id=`q-${Math.random().toString(36).substr(2,9)}`),n.type==="multiple_choice"&&((!n.options||n.options.length===0)&&(n.options=["Option A","Option B","Option C","Option D","Option E"]),n.tkpPoints&&n.tkpPoints.length>0,n.options=X_(n.options)),n}const Bn=async(n,e,t,s=5,a=[],o,c,f)=>{let p="",m;const v="CRITICAL: DETECT the language of the input material/context. The generated questions/answers MUST BE in the SAME LANGUAGE as the input (Bahasa Indonesia mostly).";let _=O4;if(e==="GENERAL"&&c){const C=t,D=C.type==="topic"?`Topic: ${C.content}`:"Material Content";C.type==="pdf"&&(m=C.content);const N=C.difficultyPreference||"MEDIUM",L=`DIFFICULTY LEVEL: ${N}. ${N==="HARD"?"Use complex analysis/HOTS.":N==="EASY"?"Use straightforward recall.":""}`;c==="ACTIVE_RECALL"?p=`Create ${s} Active Recall questions (Short Answer format) based on this: ${D}. 
          ${v} ${L}
          Questions must be specific and require recall of key facts/concepts.`:c==="PBL"?p=`Create ${s} Problem-Based Learning scenarios (Case Study).
          ${v} ${L}
          Format: 'long_text' or 'multiple_choice'.
          Based on: ${D}. 
          Each question should be a realistic scenario requiring application of the concept.`:p=`Create ${s} practice questions based on: ${D}. ${v} ${L}`,C.type==="text"&&(p+=`

CONTENT: ${C.content}`)}else{let C="";if(f?(C=`CONTEXT: ${e} - ${o||""}. DIFFICULTY: ${f}.`,f==="HOTS"&&(C+=" QUESTIONS MUST BE ADVANCED AND DIFFICULT (High Order Thinking Skills). Distractors/options must be plausible and tricky. Avoid easy questions. Questions must require analysis, evaluation, or creation.")):e==="SKD"&&o?C=`CONTEXT: SKD ${o}. DIFFICULTY: STANDARD TO HOTS.`:e==="UTBK"?C="CONTEXT: UTBK SNBT 2025. DIFFICULTY: ADAPTIVE (HOTS).":e==="TPA"?C="CONTEXT: TPA (Tes Potensi Akademik) & TBI. High Logic Requirement.":e==="PSIKOTEST"?C=`
          CONTEXT: PROFESSIONAL PSYCHOMETRIC TEST (High IQ & Logical Reasoning).
          Generate ${s} questions distributed among these 4 subtest types:

          1. **Number Series (Deret Angka)**: 
             - Create complex sequences (e.g., Fibonacci, multi-level differences, alternating patterns).
             - Example: 2, 5, 10, 17, ... (n^2 + 1).

          2. **Verbal Analogy (Analogi Verbal)**:
             - Create 'Word A : Word B = Word C : ?' questions.
             - Relationships should be subtle (e.g., degree, cause-effect, antonyms).
             - Example: "Api : Panas = Es : Dingin" (Cause-Effect/Property).
          
          3. **Formal Logic (Silogisme)**:
             - Create syllogisms with 2 or 3 premises.
             - Use 'All', 'Some', 'None' quantifiers.
             - Ensure options have logical distractors.
             - Example: "Semua A adalah B. Sebagian B adalah C. Maka..."
          
          4. **Figural/Spatial (Tes Spasial)**:
             - Since this is text-based, describe the pattern in text format.
             - E.g., "Image A rotates 90 degrees clockwise. Image B is mirror of A. Image C is..."
          
          Instruction: "Options must be tricky. Explanation must be clear step-by-step logic."
          `:e==="INTERVIEW"?(C="CONTEXT: JOB/SCHOOL ADMISSION INTERVIEW.",_={type:Ne.OBJECT,properties:{questions:{type:Ne.ARRAY,items:{type:Ne.OBJECT,properties:{id:{type:Ne.STRING},type:{type:Ne.STRING,enum:["long_text"]},content:{type:Ne.STRING},explanation:{type:Ne.STRING},metadata:{type:Ne.OBJECT,properties:{topic:{type:Ne.STRING}}}},required:["content","type"]}}}}):C="Standard difficulty.",e==="INTERVIEW")p=`Roleplay Task: Act as a professional HR Interviewer.
        Context: ${t}.
        Generate ${s} distinct interview questions. 
        Style: Conversational, direct, and engaging.
        Questions should range from introduction to behavioral/situational.
        Metadata subtest: "Interview".`;else{const D=`
            Generate ${s} questions.
            ${C}
            MANDATORY: Provide a DETAILED 'explanation' for the answer.
            MANDATORY METADATA:
            - idealTimeSeconds: Realistic time (e.g. 60s for Logic, 30s for Verbal).
            - subtest: Use specific names like "Deret Angka", "Analogi Verbal", "Silogisme", "Tes Spasial".
        `,N=typeof t=="string"&&t.toUpperCase().includes("TKP")||e==="SKD"&&f==="TKP";let L="";N&&(L=`
           CRITICAL RULES FOR TKP (Tes Karakteristik Pribadi):
           1. **AMBIGUITY & CONFUSION**: The distinction between the 5-point and 4-point answers MUST be very subtle.
           2. **SCORING LOGIC**:
              - 5 Points: Best answer (professional, proactive, leadership).
              - 4 Points: Good answer (standard procedure).
              - 3 Points: Neutral.
              - 1-2 Points: Negative.
           5. **FORMAT**: Provide 'tkpPoints' list mapping EACH option to a score 1-5.
           `),n===qe.WEAKNESS?p=`WEAKNESS ATTACK MODE. User weak in: ${a.join(", ")}. ${C} ${L}`:n===qe.ACTIVE_RECALL?p=`ACTIVE RECALL. Type: "short_answer". ${C}`:p=`TRY OUT / PRACTICE.
            Context: ${e} - ${JSON.stringify(t)}.
            ${D}
            ${L}`}}return((await wi(p,_,m)).questions||[]).filter(C=>!!C).map(C=>{const D=G4(C);return e==="INTERVIEW"&&(D.type="long_text",D.options=[]),D})},B4=async(n,e,t)=>{const s={type:Ne.OBJECT,properties:{score:{type:Ne.INTEGER,description:"Score from 0 to 100"},isCorrect:{type:Ne.BOOLEAN,description:"True if score > 70"},feedback:{type:Ne.STRING,description:"Constructive feedback"}},required:["score","isCorrect","feedback"]},a=`Evaluate this answer. 
  Question: ${n}
  Correct Answer / Key Concept: ${e}
  User Answer: ${t}
  
  Provide a score (0-100), boolean correctness, and feedback.`;return wi(a,s)},H4=async n=>{const e=`The user is weak in these topics: ${n.join(", ")}. Provide a concise, actionable study plan (3 paragraphs max) to improve.`;return wi(e)},z4=async(n,e)=>{const t={type:Ne.OBJECT,properties:{score:{type:Ne.INTEGER},feedback:{type:Ne.STRING},improvedAnswer:{type:Ne.STRING},keyPointsCovered:{type:Ne.ARRAY,items:{type:Ne.STRING}},toneAnalysis:{type:Ne.STRING}},required:["score","feedback","improvedAnswer","toneAnalysis"]},s=`Evaluate this job interview answer given by a candidate.
  Question: ${n}
  Candidate Answer: ${e}
  
  Act as a senior HR manager. Critique the tone, content, and structure.
  `;return wi(s,t)},F4=async(n,e)=>{const t={type:Ne.OBJECT,properties:{understandingScore:{type:Ne.INTEGER},simplificationQuality:{type:Ne.STRING},missingConcepts:{type:Ne.ARRAY,items:{type:Ne.STRING}},correction:{type:Ne.STRING}},required:["understandingScore","simplificationQuality","correction"]},s=`Evaluate this Feynman Technique explanation. The user is trying to explain "${n}" to a 5-year old.
  Explanation: ${e}`;return wi(s,t)},q4=async n=>n.type==="pdf"&&n.content?await wi("Extract and summarize the main text content from this PDF for study purposes. Ignore headers/footers.",void 0,n.content):n.content,K4=async(n,e)=>{const t=`Context: University Thesis (Skripsi). Topic: ${n}. Task: ${e}. Provide detailed output.`;return wi(t)},$4=async n=>{const e={type:Ne.OBJECT,properties:{flashcards:{type:Ne.ARRAY,items:{type:Ne.OBJECT,properties:{id:{type:Ne.STRING},front:{type:Ne.STRING},back:{type:Ne.STRING}},required:["front","back"]}}}},t=`Create 10 flashcards based on this material: ${n.extractedText||n.content}`;return(await wi(t,e)).flashcards},Y4=async n=>{const e={type:Ne.OBJECT,properties:{label:{type:Ne.STRING},children:{type:Ne.ARRAY,items:{type:Ne.OBJECT,properties:{label:{type:Ne.STRING},children:{type:Ne.ARRAY,items:{type:Ne.OBJECT,properties:{label:{type:Ne.STRING}}}}}}}}},t=`Create a hierarchical mind map structure (JSON) for the topic: ${n.title||n.content.substring(0,50)}. Base it on the content.`;return wi(t,e)},J4=async(n,e,t)=>{const s={type:Ne.OBJECT,properties:{topic:{type:Ne.STRING},summary:{type:Ne.STRING},keyPoints:{type:Ne.ARRAY,items:{type:Ne.STRING}},question:jS},required:["topic","summary","keyPoints","question"]},a=`Create a Drill Card (Mini Lesson + 1 Question) for ${n} - ${e} ${t?"("+t+")":""}.`;return wi(a,s)},Z_=async n=>{const e=Bn(qe.SIMULATION,"SKD","Tes Wawasan Kebangsaan (TWK)",30,[],n,void 0,"HOTS"),t=Bn(qe.SIMULATION,"SKD","Tes Intelegensia Umum (TIU)",35,[],n,void 0,"HOTS"),s=Bn(qe.SIMULATION,"SKD","Tes Karakteristik Pribadi (TKP)",45,[],n,void 0,"TKP"),[a,o,c]=await Promise.all([e,t,s]);return a.forEach(f=>f.metadata.subtest="Tes Wawasan Kebangsaan (TWK)"),o.forEach(f=>f.metadata.subtest="Tes Intelegensia Umum (TIU)"),c.forEach(f=>f.metadata.subtest="Tes Karakteristik Pribadi (TKP)"),[...a,...o,...c]},eT=async()=>{const n=Bn(qe.SIMULATION,"UTBK","Penalaran Umum (Induktif, Deduktif, Kuantitatif)",30,[],void 0,void 0,"HOTS"),e=Bn(qe.SIMULATION,"UTBK","Pengetahuan dan Pemahaman Umum",20,[],void 0,void 0,"HOTS"),t=Bn(qe.SIMULATION,"UTBK","Pemahaman Bacaan dan Menulis",20,[],void 0,void 0,"HOTS"),s=Bn(qe.SIMULATION,"UTBK","Pengetahuan Kuantitatif",20,[],void 0,void 0,"HOTS"),a=Bn(qe.SIMULATION,"UTBK","Literasi Bahasa Indonesia",25,[],void 0,void 0,"HOTS"),o=Bn(qe.SIMULATION,"UTBK","Literasi Bahasa Inggris",25,[],void 0,void 0,"HOTS"),c=Bn(qe.SIMULATION,"UTBK","Penalaran Matematika",20,[],void 0,void 0,"HOTS"),[f,p,m,v,_,T,A]=await Promise.all([n,e,t,s,a,o,c]);return f.forEach(C=>C.metadata.subtest="Penalaran Umum"),p.forEach(C=>C.metadata.subtest="Pengetahuan dan Pemahaman Umum"),m.forEach(C=>C.metadata.subtest="Pemahaman Bacaan dan Menulis"),v.forEach(C=>C.metadata.subtest="Pengetahuan Kuantitatif"),_.forEach(C=>C.metadata.subtest="Literasi Bahasa Indonesia"),T.forEach(C=>C.metadata.subtest="Literasi Bahasa Inggris"),A.forEach(C=>C.metadata.subtest="Penalaran Matematika"),[...f,...p,...m,...v,..._,...T,...A]},Q4=async()=>Bn(qe.SIMULATION,"TPA","SIMULATION",65,[],void 0,void 0,"HOTS"),W4=async()=>Bn(qe.SIMULATION,"PSIKOTEST","SIMULATION",40,[],void 0,void 0,"HOTS"),X4=()=>{};var tT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Z4=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[s++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],c=n[t++],f=n[t++],p=((a&7)<<18|(o&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const o=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},GS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,f=c?n[a+1]:0,p=a+2<n.length,m=p?n[a+2]:0,v=o>>2,_=(o&3)<<4|f>>4;let T=(f&15)<<2|m>>6,A=m&63;p||(A=64,c||(T=64)),s.push(t[v],t[_],t[T],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(OS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Z4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||f==null||m==null||_==null)throw new eP;const T=o<<2|f>>4;if(s.push(T),m!==64){const A=f<<4&240|m>>2;if(s.push(A),_!==64){const C=m<<6&192|_;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tP=function(n){const e=OS(n);return GS.encodeByteArray(e,!0)},lf=function(n){return tP(n).replace(/\./g,"")},BS=function(n){try{return GS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=()=>nP().__FIREBASE_DEFAULTS__,iP=()=>{if(typeof process>"u"||typeof tT>"u")return;const n=tT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&BS(n[1]);return e&&JSON.parse(e)},Bf=()=>{try{return X4()||sP()||iP()||rP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HS=n=>{var e,t;return(t=(e=Bf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},aP=n=>{const e=HS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},zS=()=>{var n;return(n=Bf())==null?void 0:n.config},FS=n=>{var e;return(e=Bf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[lf(JSON.stringify(t)),lf(JSON.stringify(c)),""].join(".")}const Dc={};function cP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Dc))Dc[e]?n.emulator.push(e):n.prod.push(e);return n}function uP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let nT=!1;function KS(n,e){if(typeof window>"u"||typeof document>"u"||!Tl(window.location.host)||Dc[n]===e||Dc[n]||nT)return;Dc[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",o=cP().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{nT=!0,c()},T}function v(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=uP(s),A=t("text"),C=document.getElementById(A)||document.createElement("span"),D=t("learnmore"),N=document.getElementById(D)||document.createElement("a"),L=t("preprendIcon"),U=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;f(B),v(N,D);const $=m();p(U,L),B.append(U,C,N,$),document.body.appendChild(B)}o?(C.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function fP(){var e;const n=(e=Bf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gP(){const n=Vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function yP(){return!fP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xP(){try{return typeof indexedDB=="object"}catch{return!1}}function vP(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="FirebaseError";class lr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=bP,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jc.prototype.create)}}class Jc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?_P(o,s):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new lr(a,f,s)}}function _P(n,e){return n.replace(TP,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const TP=/\{\$([^}]+)}/g;function EP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qa(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const o=n[a],c=e[a];if(sT(o)&&sT(c)){if(!Qa(o,c))return!1}else if(o!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function sT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function SP(n,e){const t=new AP(n,e);return t.subscribe.bind(t)}class AP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");wP(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=gp),a.error===void 0&&(a.error=gp),a.complete===void 0&&(a.complete=gp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(n){return n&&n._delegate?n._delegate:n}class Wa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new oP;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IP(e))try{this.getOrInitializeService({instanceIdentifier:za})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});s.resolve(o)}catch{}}}}clearInstance(e=za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=za){return this.instances.has(e)}getOptions(e=za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);s===f&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:CP(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=za){return this.component?this.component.multipleInstances?e:za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CP(n){return n===za?void 0:n}function IP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new NP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(at||(at={}));const RP={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},MP=at.INFO,DP={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},PP=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=DP[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D0{constructor(e){this.name=e,this._logLevel=MP,this._logHandler=PP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const LP=(n,e)=>e.some(t=>n instanceof t);let iT,rT;function UP(){return iT||(iT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VP(){return rT||(rT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $S=new WeakMap,Kp=new WeakMap,YS=new WeakMap,yp=new WeakMap,P0=new WeakMap;function jP(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Yr(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&$S.set(t,n)}).catch(()=>{}),P0.set(e,n),e}function OP(n){if(Kp.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Kp.set(n,e)}let $p={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||YS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GP(n){$p=n($p)}function BP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(xp(this),e,...t);return YS.set(s,e.sort?e.sort():[e]),Yr(s)}:VP().includes(n)?function(...e){return n.apply(xp(this),e),Yr($S.get(this))}:function(...e){return Yr(n.apply(xp(this),e))}}function HP(n){return typeof n=="function"?BP(n):(n instanceof IDBTransaction&&OP(n),LP(n,UP())?new Proxy(n,$p):n)}function Yr(n){if(n instanceof IDBRequest)return jP(n);if(yp.has(n))return yp.get(n);const e=HP(n);return e!==n&&(yp.set(n,e),P0.set(e,n)),e}const xp=n=>P0.get(n);function zP(n,e,{blocked:t,upgrade:s,blocking:a,terminated:o}={}){const c=indexedDB.open(n,e),f=Yr(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Yr(c.result),p.oldVersion,p.newVersion,Yr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{o&&p.addEventListener("close",()=>o()),a&&p.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const FP=["get","getKey","getAll","getAllKeys","count"],qP=["put","add","delete","clear"],vp=new Map;function aT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=qP.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||FP.includes(t)))return;const o=async function(c,...f){const p=this.transaction(c,a?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),a&&p.done]))[0]};return vp.set(e,o),o}GP(n=>({...n,get:(e,t,s)=>aT(e,t)||n.get(e,t,s),has:(e,t)=>!!aT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($P(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function $P(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yp="@firebase/app",oT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new D0("@firebase/app"),YP="@firebase/app-compat",JP="@firebase/analytics-compat",QP="@firebase/analytics",WP="@firebase/app-check-compat",XP="@firebase/app-check",ZP="@firebase/auth",e6="@firebase/auth-compat",t6="@firebase/database",n6="@firebase/data-connect",s6="@firebase/database-compat",i6="@firebase/functions",r6="@firebase/functions-compat",a6="@firebase/installations",o6="@firebase/installations-compat",l6="@firebase/messaging",c6="@firebase/messaging-compat",u6="@firebase/performance",d6="@firebase/performance-compat",f6="@firebase/remote-config",h6="@firebase/remote-config-compat",m6="@firebase/storage",p6="@firebase/storage-compat",g6="@firebase/firestore",y6="@firebase/ai",x6="@firebase/firestore-compat",v6="firebase",b6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="[DEFAULT]",_6={[Yp]:"fire-core",[YP]:"fire-core-compat",[QP]:"fire-analytics",[JP]:"fire-analytics-compat",[XP]:"fire-app-check",[WP]:"fire-app-check-compat",[ZP]:"fire-auth",[e6]:"fire-auth-compat",[t6]:"fire-rtdb",[n6]:"fire-data-connect",[s6]:"fire-rtdb-compat",[i6]:"fire-fn",[r6]:"fire-fn-compat",[a6]:"fire-iid",[o6]:"fire-iid-compat",[l6]:"fire-fcm",[c6]:"fire-fcm-compat",[u6]:"fire-perf",[d6]:"fire-perf-compat",[f6]:"fire-rc",[h6]:"fire-rc-compat",[m6]:"fire-gcs",[p6]:"fire-gcs-compat",[g6]:"fire-fst",[x6]:"fire-fst-compat",[y6]:"fire-vertex","fire-js":"fire-js",[v6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,T6=new Map,Qp=new Map;function lT(n,e){try{n.container.addComponent(e)}catch(t){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function dl(n){const e=n.name;if(Qp.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,n);for(const t of cf.values())lT(t,n);for(const t of T6.values())lT(t,n);return!0}function L0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ws(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new Jc("app","Firebase",E6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=b6;function JS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Jp,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Jr.create("bad-app-name",{appName:String(a)});if(t||(t=zS()),!t)throw Jr.create("no-options");const o=cf.get(a);if(o){if(Qa(t,o.options)&&Qa(s,o.config))return o;throw Jr.create("duplicate-app",{appName:a})}const c=new kP(a);for(const p of Qp.values())c.addComponent(p);const f=new S6(t,s,c);return cf.set(a,f),f}function QS(n=Jp){const e=cf.get(n);if(!e&&n===Jp&&zS())return JS();if(!e)throw Jr.create("no-app",{appName:n});return e}function Qr(n,e,t){let s=_6[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(c.join(" "));return}dl(new Wa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="firebase-heartbeat-database",w6=1,Gc="firebase-heartbeat-store";let bp=null;function WS(){return bp||(bp=zP(A6,w6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jr.create("idb-open",{originalErrorMessage:n.message})})),bp}async function N6(n){try{const t=(await WS()).transaction(Gc),s=await t.objectStore(Gc).get(XS(n));return await t.done,s}catch(e){if(e instanceof lr)tr.warn(e.message);else{const t=Jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tr.warn(t.message)}}}async function cT(n,e){try{const s=(await WS()).transaction(Gc,"readwrite");await s.objectStore(Gc).put(e,XS(n)),await s.done}catch(t){if(t instanceof lr)tr.warn(t.message);else{const s=Jr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});tr.warn(s.message)}}}function XS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=1024,I6=30;class k6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new M6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=uT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>I6){const c=D6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){tr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=uT(),{heartbeatsToSend:s,unsentEntries:a}=R6(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return tr.warn(t),""}}}function uT(){return new Date().toISOString().substring(0,10)}function R6(n,e=C6){const t=[];let s=n.slice();for(const a of n){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),dT(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),dT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class M6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xP()?vP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await N6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dT(n){return lf(JSON.stringify({version:2,heartbeats:n})).length}function D6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(n){dl(new Wa("platform-logger",e=>new KP(e),"PRIVATE")),dl(new Wa("heartbeat",e=>new k6(e),"PRIVATE")),Qr(Yp,oT,n),Qr(Yp,oT,"esm2020"),Qr("fire-js","")}P6("");var L6="firebase",U6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(L6,U6,"app");var fT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,ZS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,M){function k(){}k.prototype=M.prototype,R.F=M.prototype,R.prototype=new k,R.prototype.constructor=R,R.D=function(O,V,G){for(var j=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)j[pe-2]=arguments[pe];return M.prototype[V].apply(O,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,M,k){k||(k=0);const O=Array(16);if(typeof M=="string")for(var V=0;V<16;++V)O[V]=M.charCodeAt(k++)|M.charCodeAt(k++)<<8|M.charCodeAt(k++)<<16|M.charCodeAt(k++)<<24;else for(V=0;V<16;++V)O[V]=M[k++]|M[k++]<<8|M[k++]<<16|M[k++]<<24;M=R.g[0],k=R.g[1],V=R.g[2];let G=R.g[3],j;j=M+(G^k&(V^G))+O[0]+3614090360&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(V^M&(k^V))+O[1]+3905402710&4294967295,G=M+(j<<12&4294967295|j>>>20),j=V+(k^G&(M^k))+O[2]+606105819&4294967295,V=G+(j<<17&4294967295|j>>>15),j=k+(M^V&(G^M))+O[3]+3250441966&4294967295,k=V+(j<<22&4294967295|j>>>10),j=M+(G^k&(V^G))+O[4]+4118548399&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(V^M&(k^V))+O[5]+1200080426&4294967295,G=M+(j<<12&4294967295|j>>>20),j=V+(k^G&(M^k))+O[6]+2821735955&4294967295,V=G+(j<<17&4294967295|j>>>15),j=k+(M^V&(G^M))+O[7]+4249261313&4294967295,k=V+(j<<22&4294967295|j>>>10),j=M+(G^k&(V^G))+O[8]+1770035416&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(V^M&(k^V))+O[9]+2336552879&4294967295,G=M+(j<<12&4294967295|j>>>20),j=V+(k^G&(M^k))+O[10]+4294925233&4294967295,V=G+(j<<17&4294967295|j>>>15),j=k+(M^V&(G^M))+O[11]+2304563134&4294967295,k=V+(j<<22&4294967295|j>>>10),j=M+(G^k&(V^G))+O[12]+1804603682&4294967295,M=k+(j<<7&4294967295|j>>>25),j=G+(V^M&(k^V))+O[13]+4254626195&4294967295,G=M+(j<<12&4294967295|j>>>20),j=V+(k^G&(M^k))+O[14]+2792965006&4294967295,V=G+(j<<17&4294967295|j>>>15),j=k+(M^V&(G^M))+O[15]+1236535329&4294967295,k=V+(j<<22&4294967295|j>>>10),j=M+(V^G&(k^V))+O[1]+4129170786&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^V&(M^k))+O[6]+3225465664&4294967295,G=M+(j<<9&4294967295|j>>>23),j=V+(M^k&(G^M))+O[11]+643717713&4294967295,V=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(V^G))+O[0]+3921069994&4294967295,k=V+(j<<20&4294967295|j>>>12),j=M+(V^G&(k^V))+O[5]+3593408605&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^V&(M^k))+O[10]+38016083&4294967295,G=M+(j<<9&4294967295|j>>>23),j=V+(M^k&(G^M))+O[15]+3634488961&4294967295,V=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(V^G))+O[4]+3889429448&4294967295,k=V+(j<<20&4294967295|j>>>12),j=M+(V^G&(k^V))+O[9]+568446438&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^V&(M^k))+O[14]+3275163606&4294967295,G=M+(j<<9&4294967295|j>>>23),j=V+(M^k&(G^M))+O[3]+4107603335&4294967295,V=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(V^G))+O[8]+1163531501&4294967295,k=V+(j<<20&4294967295|j>>>12),j=M+(V^G&(k^V))+O[13]+2850285829&4294967295,M=k+(j<<5&4294967295|j>>>27),j=G+(k^V&(M^k))+O[2]+4243563512&4294967295,G=M+(j<<9&4294967295|j>>>23),j=V+(M^k&(G^M))+O[7]+1735328473&4294967295,V=G+(j<<14&4294967295|j>>>18),j=k+(G^M&(V^G))+O[12]+2368359562&4294967295,k=V+(j<<20&4294967295|j>>>12),j=M+(k^V^G)+O[5]+4294588738&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^V)+O[8]+2272392833&4294967295,G=M+(j<<11&4294967295|j>>>21),j=V+(G^M^k)+O[11]+1839030562&4294967295,V=G+(j<<16&4294967295|j>>>16),j=k+(V^G^M)+O[14]+4259657740&4294967295,k=V+(j<<23&4294967295|j>>>9),j=M+(k^V^G)+O[1]+2763975236&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^V)+O[4]+1272893353&4294967295,G=M+(j<<11&4294967295|j>>>21),j=V+(G^M^k)+O[7]+4139469664&4294967295,V=G+(j<<16&4294967295|j>>>16),j=k+(V^G^M)+O[10]+3200236656&4294967295,k=V+(j<<23&4294967295|j>>>9),j=M+(k^V^G)+O[13]+681279174&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^V)+O[0]+3936430074&4294967295,G=M+(j<<11&4294967295|j>>>21),j=V+(G^M^k)+O[3]+3572445317&4294967295,V=G+(j<<16&4294967295|j>>>16),j=k+(V^G^M)+O[6]+76029189&4294967295,k=V+(j<<23&4294967295|j>>>9),j=M+(k^V^G)+O[9]+3654602809&4294967295,M=k+(j<<4&4294967295|j>>>28),j=G+(M^k^V)+O[12]+3873151461&4294967295,G=M+(j<<11&4294967295|j>>>21),j=V+(G^M^k)+O[15]+530742520&4294967295,V=G+(j<<16&4294967295|j>>>16),j=k+(V^G^M)+O[2]+3299628645&4294967295,k=V+(j<<23&4294967295|j>>>9),j=M+(V^(k|~G))+O[0]+4096336452&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~V))+O[7]+1126891415&4294967295,G=M+(j<<10&4294967295|j>>>22),j=V+(M^(G|~k))+O[14]+2878612391&4294967295,V=G+(j<<15&4294967295|j>>>17),j=k+(G^(V|~M))+O[5]+4237533241&4294967295,k=V+(j<<21&4294967295|j>>>11),j=M+(V^(k|~G))+O[12]+1700485571&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~V))+O[3]+2399980690&4294967295,G=M+(j<<10&4294967295|j>>>22),j=V+(M^(G|~k))+O[10]+4293915773&4294967295,V=G+(j<<15&4294967295|j>>>17),j=k+(G^(V|~M))+O[1]+2240044497&4294967295,k=V+(j<<21&4294967295|j>>>11),j=M+(V^(k|~G))+O[8]+1873313359&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~V))+O[15]+4264355552&4294967295,G=M+(j<<10&4294967295|j>>>22),j=V+(M^(G|~k))+O[6]+2734768916&4294967295,V=G+(j<<15&4294967295|j>>>17),j=k+(G^(V|~M))+O[13]+1309151649&4294967295,k=V+(j<<21&4294967295|j>>>11),j=M+(V^(k|~G))+O[4]+4149444226&4294967295,M=k+(j<<6&4294967295|j>>>26),j=G+(k^(M|~V))+O[11]+3174756917&4294967295,G=M+(j<<10&4294967295|j>>>22),j=V+(M^(G|~k))+O[2]+718787259&4294967295,V=G+(j<<15&4294967295|j>>>17),j=k+(G^(V|~M))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+M&4294967295,R.g[1]=R.g[1]+(V+(j<<21&4294967295|j>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+G&4294967295}s.prototype.v=function(R,M){M===void 0&&(M=R.length);const k=M-this.blockSize,O=this.C;let V=this.h,G=0;for(;G<M;){if(V==0)for(;G<=k;)a(this,R,G),G+=this.blockSize;if(typeof R=="string"){for(;G<M;)if(O[V++]=R.charCodeAt(G++),V==this.blockSize){a(this,O),V=0;break}}else for(;G<M;)if(O[V++]=R[G++],V==this.blockSize){a(this,O),V=0;break}}this.h=V,this.o+=M},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var M=1;M<R.length-8;++M)R[M]=0;M=this.o*8;for(var k=R.length-8;k<R.length;++k)R[k]=M&255,M/=256;for(this.v(R),R=Array(16),M=0,k=0;k<4;++k)for(let O=0;O<32;O+=8)R[M++]=this.g[k]>>>O&255;return R};function o(R,M){var k=f;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=M(R)}function c(R,M){this.h=M;const k=[];let O=!0;for(let V=R.length-1;V>=0;V--){const G=R[V]|0;O&&G==M||(k[V]=G,O=!1)}this.g=k}var f={};function p(R){return-128<=R&&R<128?o(R,function(M){return new c([M|0],M<0?-1:0)}):new c([R|0],R<0?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return _;if(R<0)return N(m(-R));const M=[];let k=1;for(let O=0;R>=k;O++)M[O]=R/k|0,k*=4294967296;return new c(M,0)}function v(R,M){if(R.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(R.charAt(0)=="-")return N(v(R.substring(1),M));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=m(Math.pow(M,8));let O=_;for(let G=0;G<R.length;G+=8){var V=Math.min(8,R.length-G);const j=parseInt(R.substring(G,G+V),M);V<8?(V=m(Math.pow(M,V)),O=O.j(V).add(m(j))):(O=O.j(k),O=O.add(m(j)))}return O}var _=p(0),T=p(1),A=p(16777216);n=c.prototype,n.m=function(){if(D(this))return-N(this).m();let R=0,M=1;for(let k=0;k<this.g.length;k++){const O=this.i(k);R+=(O>=0?O:4294967296+O)*M,M*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(D(this))return"-"+N(this).toString(R);const M=m(Math.pow(R,6));var k=this;let O="";for(;;){const V=$(k,M).g;k=L(k,V.j(M));let G=((k.g.length>0?k.g[0]:k.h)>>>0).toString(R);if(k=V,C(k))return G+O;for(;G.length<6;)G="0"+G;O=G+O}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(let M=0;M<R.g.length;M++)if(R.g[M]!=0)return!1;return!0}function D(R){return R.h==-1}n.l=function(R){return R=L(this,R),D(R)?-1:C(R)?0:1};function N(R){const M=R.g.length,k=[];for(let O=0;O<M;O++)k[O]=~R.g[O];return new c(k,~R.h).add(T)}n.abs=function(){return D(this)?N(this):this},n.add=function(R){const M=Math.max(this.g.length,R.g.length),k=[];let O=0;for(let V=0;V<=M;V++){let G=O+(this.i(V)&65535)+(R.i(V)&65535),j=(G>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);O=j>>>16,G&=65535,j&=65535,k[V]=j<<16|G}return new c(k,k[k.length-1]&-2147483648?-1:0)};function L(R,M){return R.add(N(M))}n.j=function(R){if(C(this)||C(R))return _;if(D(this))return D(R)?N(this).j(N(R)):N(N(this).j(R));if(D(R))return N(this.j(N(R)));if(this.l(A)<0&&R.l(A)<0)return m(this.m()*R.m());const M=this.g.length+R.g.length,k=[];for(var O=0;O<2*M;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<R.g.length;V++){const G=this.i(O)>>>16,j=this.i(O)&65535,pe=R.i(V)>>>16,we=R.i(V)&65535;k[2*O+2*V]+=j*we,U(k,2*O+2*V),k[2*O+2*V+1]+=G*we,U(k,2*O+2*V+1),k[2*O+2*V+1]+=j*pe,U(k,2*O+2*V+1),k[2*O+2*V+2]+=G*pe,U(k,2*O+2*V+2)}for(R=0;R<M;R++)k[R]=k[2*R+1]<<16|k[2*R];for(R=M;R<2*M;R++)k[R]=0;return new c(k,0)};function U(R,M){for(;(R[M]&65535)!=R[M];)R[M+1]+=R[M]>>>16,R[M]&=65535,M++}function B(R,M){this.g=R,this.h=M}function $(R,M){if(C(M))throw Error("division by zero");if(C(R))return new B(_,_);if(D(R))return M=$(N(R),M),new B(N(M.g),N(M.h));if(D(M))return M=$(R,N(M)),new B(N(M.g),M.h);if(R.g.length>30){if(D(R)||D(M))throw Error("slowDivide_ only works with positive integers.");for(var k=T,O=M;O.l(R)<=0;)k=ee(k),O=ee(O);var V=se(k,1),G=se(O,1);for(O=se(O,2),k=se(k,2);!C(O);){var j=G.add(O);j.l(R)<=0&&(V=V.add(k),G=j),O=se(O,1),k=se(k,1)}return M=L(R,V.j(M)),new B(V,M)}for(V=_;R.l(M)>=0;){for(k=Math.max(1,Math.floor(R.m()/M.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),G=m(k),j=G.j(M);D(j)||j.l(R)>0;)k-=O,G=m(k),j=G.j(M);C(G)&&(G=T),V=V.add(G),R=L(R,j)}return new B(V,R)}n.B=function(R){return $(this,R).h},n.and=function(R){const M=Math.max(this.g.length,R.g.length),k=[];for(let O=0;O<M;O++)k[O]=this.i(O)&R.i(O);return new c(k,this.h&R.h)},n.or=function(R){const M=Math.max(this.g.length,R.g.length),k=[];for(let O=0;O<M;O++)k[O]=this.i(O)|R.i(O);return new c(k,this.h|R.h)},n.xor=function(R){const M=Math.max(this.g.length,R.g.length),k=[];for(let O=0;O<M;O++)k[O]=this.i(O)^R.i(O);return new c(k,this.h^R.h)};function ee(R){const M=R.g.length+1,k=[];for(let O=0;O<M;O++)k[O]=R.i(O)<<1|R.i(O-1)>>>31;return new c(k,R.h)}function se(R,M){const k=M>>5;M%=32;const O=R.g.length-k,V=[];for(let G=0;G<O;G++)V[G]=M>0?R.i(G+k)>>>M|R.i(G+k+1)<<32-M:R.i(G+k);return new c(V,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,ZS=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Wr=c}).apply(typeof fT<"u"?fT:typeof self<"u"?self:typeof window<"u"?window:{});var Dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eA,Ic,tA,Hd,Wp,nA,sA,iA;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dd=="object"&&Dd];for(var E=0;E<y.length;++E){var w=y[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(y,E){if(E)e:{var w=s;y=y.split(".");for(var P=0;P<y.length-1;P++){var J=y[P];if(!(J in w))break e;w=w[J]}y=y[y.length-1],P=w[y],E=E(P),E!=P&&E!=null&&e(w,y,{configurable:!0,writable:!0,value:E})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(E){var w=[],P;for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&w.push([P,E[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function f(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function p(y,E,w){return y.call.apply(y.bind,arguments)}function m(y,E,w){return m=p,m.apply(null,arguments)}function v(y,E){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),y.apply(this,P)}}function _(y,E){function w(){}w.prototype=E.prototype,y.Z=E.prototype,y.prototype=new w,y.prototype.constructor=y,y.Ob=function(P,J,ie){for(var _e=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)_e[Qe-2]=arguments[Qe];return E.prototype[J].apply(P,_e)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function A(y){const E=y.length;if(E>0){const w=Array(E);for(let P=0;P<E;P++)w[P]=y[P];return w}return[]}function C(y,E){for(let P=1;P<arguments.length;P++){const J=arguments[P];var w=typeof J;if(w=w!="object"?w:J?Array.isArray(J)?"array":w:"null",w=="array"||w=="object"&&typeof J.length=="number"){w=y.length||0;const ie=J.length||0;y.length=w+ie;for(let _e=0;_e<ie;_e++)y[w+_e]=J[_e]}else y.push(J)}}class D{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function N(y){c.setTimeout(()=>{throw y},0)}function L(){var y=R;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class U{constructor(){this.h=this.g=null}add(E,w){const P=B.get();P.set(E,w),this.h?this.h.next=P:this.g=P,this.h=P}}var B=new D(()=>new $,y=>y.reset());class ${constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,se=!1,R=new U,M=()=>{const y=Promise.resolve(void 0);ee=()=>{y.then(k)}};function k(){for(var y;y=L();){try{y.h.call(y.g)}catch(w){N(w)}var E=B;E.j(y),E.h<100&&(E.h++,y.next=E.g,E.g=y)}se=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const w=()=>{};c.addEventListener("test",w,E),c.removeEventListener("test",w,E)}catch{}return y})();function j(y){return/^[\s\xa0]*$/.test(y)}function pe(y,E){V.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,E)}_(pe,V),pe.prototype.init=function(y,E){const w=this.type=y.type,P=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget,E||(w=="mouseover"?E=y.fromElement:w=="mouseout"&&(E=y.toElement)),this.relatedTarget=E,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ce(y,E,w,P,J){this.listener=y,this.proxy=null,this.src=E,this.type=w,this.capture=!!P,this.ha=J,this.key=++Y,this.da=this.fa=!1}function Se(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Ue(y,E,w){for(const P in y)E.call(w,y[P],P,y)}function be(y,E){for(const w in y)E.call(void 0,y[w],w,y)}function H(y){const E={};for(const w in y)E[w]=y[w];return E}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(y,E){let w,P;for(let J=1;J<arguments.length;J++){P=arguments[J];for(w in P)y[w]=P[w];for(let ie=0;ie<re.length;ie++)w=re[ie],Object.prototype.hasOwnProperty.call(P,w)&&(y[w]=P[w])}}function X(y){this.src=y,this.g={},this.h=0}X.prototype.add=function(y,E,w,P,J){const ie=y.toString();y=this.g[ie],y||(y=this.g[ie]=[],this.h++);const _e=ye(y,E,P,J);return _e>-1?(E=y[_e],w||(E.fa=!1)):(E=new ce(E,this.src,ie,!!P,J),E.fa=w,y.push(E)),E};function ne(y,E){const w=E.type;if(w in y.g){var P=y.g[w],J=Array.prototype.indexOf.call(P,E,void 0),ie;(ie=J>=0)&&Array.prototype.splice.call(P,J,1),ie&&(Se(E),y.g[w].length==0&&(delete y.g[w],y.h--))}}function ye(y,E,w,P){for(let J=0;J<y.length;++J){const ie=y[J];if(!ie.da&&ie.listener==E&&ie.capture==!!w&&ie.ha==P)return J}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),ge={};function xe(y,E,w,P,J){if(Array.isArray(E)){for(let ie=0;ie<E.length;ie++)xe(y,E[ie],w,P,J);return null}return w=Fn(w),y&&y[we]?y.J(E,w,f(P)?!!P.capture:!1,J):Te(y,E,w,!1,P,J)}function Te(y,E,w,P,J,ie){if(!E)throw Error("Invalid event type");const _e=f(J)?!!J.capture:!!J;let Qe=Mt(y);if(Qe||(y[Ie]=Qe=new X(y)),w=Qe.add(E,w,P,_e,ie),w.proxy)return w;if(P=Be(),w.proxy=P,P.src=y,P.listener=w,y.addEventListener)G||(J=_e),J===void 0&&(J=!1),y.addEventListener(E.toString(),P,J);else if(y.attachEvent)y.attachEvent(ht(E.toString()),P);else if(y.addListener&&y.removeListener)y.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Be(){function y(w){return E.call(y.src,y.listener,w)}const E=Ot;return y}function ft(y,E,w,P,J){if(Array.isArray(E))for(var ie=0;ie<E.length;ie++)ft(y,E[ie],w,P,J);else P=f(P)?!!P.capture:!!P,w=Fn(w),y&&y[we]?(y=y.i,ie=String(E).toString(),ie in y.g&&(E=y.g[ie],w=ye(E,w,P,J),w>-1&&(Se(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete y.g[ie],y.h--)))):y&&(y=Mt(y))&&(E=y.g[E.toString()],y=-1,E&&(y=ye(E,w,P,J)),(w=y>-1?E[y]:null)&&ze(w))}function ze(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[we])ne(E.i,y);else{var w=y.type,P=y.proxy;E.removeEventListener?E.removeEventListener(w,P,y.capture):E.detachEvent?E.detachEvent(ht(w),P):E.addListener&&E.removeListener&&E.removeListener(P),(w=Mt(E))?(ne(w,y),w.h==0&&(w.src=null,E[Ie]=null)):Se(y)}}}function ht(y){return y in ge?ge[y]:ge[y]="on"+y}function Ot(y,E){if(y.da)y=!0;else{E=new pe(E,this);const w=y.listener,P=y.ha||y.src;y.fa&&ze(y),y=w.call(P,E)}return y}function Mt(y){return y=y[Ie],y instanceof X?y:null}var nt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fn(y){return typeof y=="function"?y:(y[nt]||(y[nt]=function(E){return y.handleEvent(E)}),y[nt])}function Lt(){O.call(this),this.i=new X(this),this.M=this,this.G=null}_(Lt,O),Lt.prototype[we]=!0,Lt.prototype.removeEventListener=function(y,E,w,P){ft(this,y,E,w,P)};function qt(y,E){var w,P=y.G;if(P)for(w=[];P;P=P.G)w.push(P);if(y=y.M,P=E.type||E,typeof E=="string")E=new V(E,y);else if(E instanceof V)E.target=E.target||y;else{var J=E;E=new V(P,y),he(E,J)}J=!0;let ie,_e;if(w)for(_e=w.length-1;_e>=0;_e--)ie=E.g=w[_e],J=qn(ie,P,!0,E)&&J;if(ie=E.g=y,J=qn(ie,P,!0,E)&&J,J=qn(ie,P,!1,E)&&J,w)for(_e=0;_e<w.length;_e++)ie=E.g=w[_e],J=qn(ie,P,!1,E)&&J}Lt.prototype.N=function(){if(Lt.Z.N.call(this),this.i){var y=this.i;for(const E in y.g){const w=y.g[E];for(let P=0;P<w.length;P++)Se(w[P]);delete y.g[E],y.h--}}this.G=null},Lt.prototype.J=function(y,E,w,P){return this.i.add(String(y),E,!1,w,P)},Lt.prototype.K=function(y,E,w,P){return this.i.add(String(y),E,!0,w,P)};function qn(y,E,w,P){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();let J=!0;for(let ie=0;ie<E.length;++ie){const _e=E[ie];if(_e&&!_e.da&&_e.capture==w){const Qe=_e.listener,Xt=_e.ha||_e.src;_e.fa&&ne(y.i,_e),J=Qe.call(Xt,P)!==!1&&J}}return J&&!P.defaultPrevented}function kl(y,E){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(y,E||0)}function ua(y){y.g=kl(()=>{y.g=null,y.i&&(y.i=!1,ua(y))},y.l);const E=y.h;y.h=null,y.m.apply(null,E)}class Dt extends O{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ua(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bn(y){O.call(this),this.h=y,this.g={}}_(bn,O);var da=[];function fa(y){Ue(y.g,function(E,w){this.g.hasOwnProperty(w)&&ze(E)},y),y.g={}}bn.prototype.N=function(){bn.Z.N.call(this),fa(this)},bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gs=c.JSON.stringify,lo=c.JSON.parse,mt=class{stringify(y){return c.JSON.stringify(y,void 0)}parse(y){return c.JSON.parse(y,void 0)}};function ha(){}function ri(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fn(){V.call(this,"d")}_(fn,V);function $n(){V.call(this,"c")}_($n,V);var Ht={},co=null;function cr(){return co=co||new Lt}Ht.Ia="serverreachability";function uo(y){V.call(this,Ht.Ia,y)}_(uo,V);function is(y){const E=cr();qt(E,new uo(E))}Ht.STAT_EVENT="statevent";function Ni(y,E){V.call(this,Ht.STAT_EVENT,y),this.stat=E}_(Ni,V);function Kt(y){const E=cr();qt(E,new Ni(E,y))}Ht.Ja="timingevent";function ys(y,E){V.call(this,Ht.Ja,y),this.size=E}_(ys,V);function xs(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){y()},E)}function rs(){this.g=!0}rs.prototype.ua=function(){this.g=!1};function fo(y,E,w,P,J,ie){y.info(function(){if(y.g)if(ie){var _e="",Qe=ie.split("&");for(let xt=0;xt<Qe.length;xt++){var Xt=Qe[xt].split("=");if(Xt.length>1){const Gt=Xt[0];Xt=Xt[1];const Ts=Gt.split("_");_e=Ts.length>=2&&Ts[1]=="type"?_e+(Gt+"="+Xt+"&"):_e+(Gt+"=redacted&")}}}else _e=null;else _e=ie;return"XMLHTTP REQ ("+P+") [attempt "+J+"]: "+E+`
`+w+`
`+_e})}function Gs(y,E,w,P,J,ie,_e){y.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+J+"]: "+E+`
`+w+`
`+ie+" "+_e})}function as(y,E,w,P){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+Rl(y,w)+(P?" "+P:"")})}function ai(y,E){y.info(function(){return"TIMEOUT: "+E})}rs.prototype.info=function(){};function Rl(y,E){if(!y.g)return E;if(!E)return null;try{const ie=JSON.parse(E);if(ie){for(y=0;y<ie.length;y++)if(Array.isArray(ie[y])){var w=ie[y];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var J=P[0];if(J!="noop"&&J!="stop"&&J!="close")for(let _e=1;_e<P.length;_e++)P[_e]=""}}}}return gs(ie)}catch{return E}}var Ci={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ma={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pa;function Ii(){}_(Ii,ha),Ii.prototype.g=function(){return new XMLHttpRequest},pa=new Ii;function Bs(y){return encodeURIComponent(String(y))}function ga(y){var E=1;y=y.split(":");const w=[];for(;E>0&&y.length;)w.push(y.shift()),E--;return y.length&&w.push(y.join(":")),w}function Z(y,E,w,P){this.j=y,this.i=E,this.l=w,this.S=P||1,this.V=new bn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ve}function ve(){this.i=null,this.g="",this.h=!1}var Ee={},Me={};function Le(y,E,w){y.M=1,y.A=xa(sn(E)),y.u=w,y.R=!0,ut(y,null)}function ut(y,E){y.F=Date.now(),st(y),y.B=sn(y.A);var w=y.B,P=y.S;Array.isArray(P)||(P=[String(P)]),po(w.i,"t",P),y.C=0,w=y.j.L,y.h=new ve,y.g=_u(y.j,w?E:null,!y.u),y.P>0&&(y.O=new Dt(m(y.Y,y,y.g),y.P)),E=y.V,w=y.g,P=y.ba;var J="readystatechange";Array.isArray(J)||(J&&(da[0]=J.toString()),J=da);for(let ie=0;ie<J.length;ie++){const _e=xe(w,J[ie],P||E.handleEvent,!1,E.h||E);if(!_e)break;E.g[_e.key]=_e}E=y.J?H(y.J):{},y.u?(y.v||(y.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,E)):(y.v="GET",y.g.ea(y.B,y.v,null,E)),is(),fo(y.i,y.v,y.B,y.l,y.S,y.u)}Z.prototype.ba=function(y){y=y.target;const E=this.O;E&&qs(y)==3?E.j():this.Y(y)},Z.prototype.Y=function(y){try{if(y==this.g)e:{const Qe=qs(this.g),Xt=this.g.ya(),xt=this.g.ca();if(!(Qe<3)&&(Qe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Qe!=4||Xt==7||(Xt==8||xt<=0?is(3):is(2)),Wt(this);var E=this.g.ca();this.X=E;var w=Fe(this);if(this.o=E==200,Gs(this.i,this.v,this.B,this.l,this.S,Qe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var P,J=this.g;if((P=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(P)){var ie=P;break t}}ie=null}if(y=ie)as(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hn(this,y);else{this.o=!1,this.m=3,Kt(12),zt(this),$t(this);break e}}if(this.R){y=!0;let Gt;for(;!this.K&&this.C<w.length;)if(Gt=bt(this,w),Gt==Me){Qe==4&&(this.m=4,Kt(14),y=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Ee){this.m=4,Kt(15),as(this.i,this.l,w,"[Invalid Chunk]"),y=!1;break}else as(this.i,this.l,Gt,null),hn(this,Gt);if(Ze(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||w.length!=0||this.h.h||(this.m=1,Kt(16),y=!1),this.o=this.o&&y,!y)as(this.i,this.l,w,"[Invalid Chunked Response]"),zt(this),$t(this);else if(w.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Bl(_e),_e.P=!0,Kt(11))}}else as(this.i,this.l,w,null),hn(this,w);Qe==4&&zt(this),this.o&&!this.K&&(Qe==4?yu(this.j,this):(this.o=!1,st(this)))}else Ri(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),zt(this),$t(this)}}}catch{}finally{}};function Fe(y){if(!Ze(y))return y.g.la();const E=Tn(y.g);if(E==="")return"";let w="";const P=E.length,J=qs(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return zt(y),$t(y),"";y.h.i=new c.TextDecoder}for(let ie=0;ie<P;ie++)y.h.h=!0,w+=y.h.i.decode(E[ie],{stream:!(J&&ie==P-1)});return E.length=0,y.h.g+=w,y.C=0,y.h.g}function Ze(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function bt(y,E){var w=y.C,P=E.indexOf(`
`,w);return P==-1?Me:(w=Number(E.substring(w,P)),isNaN(w)?Ee:(P+=1,P+w>E.length?Me:(E=E.slice(P,P+w),y.C=P+w,E)))}Z.prototype.cancel=function(){this.K=!0,zt(this)};function st(y){y.T=Date.now()+y.H,Qt(y,y.H)}function Qt(y,E){if(y.D!=null)throw Error("WatchDog timer not null");y.D=xs(m(y.aa,y),E)}function Wt(y){y.D&&(c.clearTimeout(y.D),y.D=null)}Z.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(ai(this.i,this.B),this.M!=2&&(is(),Kt(17)),zt(this),this.m=2,$t(this)):Qt(this,this.T-y)};function $t(y){y.j.I==0||y.K||yu(y.j,y)}function zt(y){Wt(y);var E=y.O;E&&typeof E.dispose=="function"&&E.dispose(),y.O=null,fa(y.V),y.g&&(E=y.g,y.g=null,E.abort(),E.dispose())}function hn(y,E){try{var w=y.j;if(w.I!=0&&(w.g==y||Rn(w.h,y))){if(!y.L&&Rn(w.h,y)&&w.I==3){try{var P=w.Ba.g.parse(E)}catch{P=null}if(Array.isArray(P)&&P.length==3){var J=P;if(J[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<y.F)bo(w),xr(w);else break e;Aa(w),Kt(18)}}else w.xa=J[1],0<w.xa-w.K&&J[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=xs(m(w.Va,w),6e3));_n(w.h)<=1&&w.ta&&(w.ta=void 0)}else fi(w,11)}else if((y.L||w.g==y)&&bo(w),!j(E))for(J=w.Ba.g.parse(E),E=0;E<J.length;E++){let xt=J[E];const Gt=xt[0];if(!(Gt<=w.K))if(w.K=Gt,xt=xt[1],w.I==2)if(xt[0]=="c"){w.M=xt[1],w.ba=xt[2];const Ts=xt[3];Ts!=null&&(w.ka=Ts,w.j.info("VER="+w.ka));const hi=xt[4];hi!=null&&(w.za=hi,w.j.info("SVER="+w.za));const Ks=xt[5];Ks!=null&&typeof Ks=="number"&&Ks>0&&(P=1.5*Ks,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const $s=y.g;if($s){const wa=$s.g?$s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wa){var ie=P.h;ie.g||wa.indexOf("spdy")==-1&&wa.indexOf("quic")==-1&&wa.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Hs(ie,ie.h),ie.h=null))}if(P.G){const _o=$s.g?$s.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(P.wa=_o,Et(P.J,P.G,_o))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-y.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var _e=y;if(P.na=bu(P,P.L?P.ba:null,P.W),_e.L){ur(P.h,_e);var Qe=_e,Xt=P.O;Xt&&(Qe.H=Xt),Qe.D&&(Wt(Qe),st(Qe)),P.g=_e}else pu(P);w.i.length>0&&di(w)}else xt[0]!="stop"&&xt[0]!="close"||fi(w,7);else w.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?fi(w,7):Ol(w):xt[0]!="noop"&&w.l&&w.l.qa(xt),w.A=0)}}is(4)}catch{}}var Tt=class{constructor(y,E){this.g=y,this.map=E}};function Yn(y){this.l=y||10,c.PerformanceNavigationTiming?(y=c.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vs(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function _n(y){return y.h?1:y.g?y.g.size:0}function Rn(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function Hs(y,E){y.g?y.g.add(E):y.h=E}function ur(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}Yn.prototype.cancel=function(){if(this.i=ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function ya(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let E=y.i;for(const w of y.g.values())E=E.concat(w.G);return E}return A(y.i)}var cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ho(y,E){if(y){y=y.split("&");for(let w=0;w<y.length;w++){const P=y[w].indexOf("=");let J,ie=null;P>=0?(J=y[w].substring(0,P),ie=y[w].substring(P+1)):J=y[w],E(J,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function os(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;y instanceof os?(this.l=y.l,gn(this,y.j),this.o=y.o,this.g=y.g,dr(this,y.u),this.h=y.h,Ml(this,hu(y.i)),this.m=y.m):y&&(E=String(y).match(cu))?(this.l=!1,gn(this,E[1]||"",!0),this.o=oi(E[2]||""),this.g=oi(E[3]||"",!0),dr(this,E[4]),this.h=oi(E[5]||"",!0),Ml(this,E[6]||"",!0),this.m=oi(E[7]||"")):(this.l=!1,this.i=new hr(null,this.l))}os.prototype.toString=function(){const y=[];var E=this.j;E&&y.push(va(E,mo,!0),":");var w=this.g;return(w||E=="file")&&(y.push("//"),(E=this.o)&&y.push(va(E,mo,!0),"@"),y.push(Bs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&y.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&y.push("/"),y.push(va(w,w.charAt(0)=="/"?Dl:uu,!0))),(w=this.i.toString())&&y.push("?",w),(w=this.m)&&y.push("#",va(w,du)),y.join("")},os.prototype.resolve=function(y){const E=sn(this);let w=!!y.j;w?gn(E,y.j):w=!!y.o,w?E.o=y.o:w=!!y.g,w?E.g=y.g:w=y.u!=null;var P=y.h;if(w)dr(E,y.u);else if(w=!!y.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var J=E.h.lastIndexOf("/");J!=-1&&(P=E.h.slice(0,J+1)+P)}if(J=P,J==".."||J==".")P="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){P=J.lastIndexOf("/",0)==0,J=J.split("/");const ie=[];for(let _e=0;_e<J.length;){const Qe=J[_e++];Qe=="."?P&&_e==J.length&&ie.push(""):Qe==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),P&&_e==J.length&&ie.push("")):(ie.push(Qe),P=!0)}P=ie.join("/")}else P=J}return w?E.h=P:w=y.i.toString()!=="",w?Ml(E,hu(y.i)):w=!!y.m,w&&(E.m=y.m),E};function sn(y){return new os(y)}function gn(y,E,w){y.j=w?oi(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function dr(y,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);y.u=E}else y.u=null}function Ml(y,E,w){E instanceof hr?(y.i=E,go(y.i,y.l)):(w||(E=va(E,fr)),y.i=new hr(E,y.l))}function Et(y,E,w){y.i.set(E,w)}function xa(y){return Et(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function oi(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function va(y,E,w){return typeof y=="string"?(y=encodeURI(y).replace(E,Jn),w&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Jn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var mo=/[#\/\?@]/g,uu=/[#\?:]/g,Dl=/[#\?]/g,fr=/[#\?@]/g,du=/#/g;function hr(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function Qn(y){y.g||(y.g=new Map,y.h=0,y.i&&ho(y.i,function(E,w){y.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=hr.prototype,n.add=function(y,E){Qn(this),this.i=null,y=mr(this,y);let w=this.g.get(y);return w||this.g.set(y,w=[]),w.push(E),this.h+=1,this};function fu(y,E){Qn(y),E=mr(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function Pl(y,E){return Qn(y),E=mr(y,E),y.g.has(E)}n.forEach=function(y,E){Qn(this),this.g.forEach(function(w,P){w.forEach(function(J){y.call(E,J,P,this)},this)},this)};function Ll(y,E){Qn(y);let w=[];if(typeof E=="string")Pl(y,E)&&(w=w.concat(y.g.get(mr(y,E))));else for(y=Array.from(y.g.values()),E=0;E<y.length;E++)w=w.concat(y[E]);return w}n.set=function(y,E){return Qn(this),this.i=null,y=mr(this,y),Pl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},n.get=function(y,E){return y?(y=Ll(this,y),y.length>0?String(y[0]):E):E};function po(y,E,w){fu(y,E),w.length>0&&(y.i=null,y.g.set(mr(y,E),A(w)),y.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],E=Array.from(this.g.keys());for(let P=0;P<E.length;P++){var w=E[P];const J=Bs(w);w=Ll(this,w);for(let ie=0;ie<w.length;ie++){let _e=J;w[ie]!==""&&(_e+="="+Bs(w[ie])),y.push(_e)}}return this.i=y.join("&")};function hu(y){const E=new hr;return E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),E}function mr(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function go(y,E){E&&!y.j&&(Qn(y),y.i=null,y.g.forEach(function(w,P){const J=P.toLowerCase();P!=J&&(fu(this,P),po(this,J,w))},y)),y.j=E}function zs(y,E){const w=new rs;if(c.Image){const P=new Image;P.onload=v(bs,w,"TestLoadImage: loaded",!0,E,P),P.onerror=v(bs,w,"TestLoadImage: error",!1,E,P),P.onabort=v(bs,w,"TestLoadImage: abort",!1,E,P),P.ontimeout=v(bs,w,"TestLoadImage: timeout",!1,E,P),c.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=y}else E(!1)}function Ul(y,E){const w=new rs,P=new AbortController,J=setTimeout(()=>{P.abort(),bs(w,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:P.signal}).then(ie=>{clearTimeout(J),ie.ok?bs(w,"TestPingServer: ok",!0,E):bs(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),bs(w,"TestPingServer: error",!1,E)})}function bs(y,E,w,P,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),P(w)}catch{}}function pr(){this.g=new mt}function li(y){this.i=y.Sb||null,this.h=y.ab||!1}_(li,ha),li.prototype.g=function(){return new ba(this.i,this.h)};function ba(y,E){Lt.call(this),this.H=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(ba,Lt),n=ba.prototype,n.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=E,this.readyState=1,Fs(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(E.body=y),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Fs(this)),this.g&&(this.readyState=3,Fs(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yo(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function yo(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?gr(this):Fs(this),this.readyState==3&&yo(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,gr(this))},n.Na=function(y){this.g&&(this.response=y,gr(this))},n.ga=function(){this.g&&gr(this)};function gr(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Fs(y)}n.setRequestHeader=function(y,E){this.A.append(y,E)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,y.push(w[0]+": "+w[1]),w=E.next();return y.join(`\r
`)};function Fs(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function _s(y){let E="";return Ue(y,function(w,P){E+=P,E+=":",E+=w,E+=`\r
`}),E}function _a(y,E,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=_s(w),typeof y=="string"?w!=null&&Bs(w):Et(y,E,w))}function wt(y){Lt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(wt,Lt);var ci=/^https?$/i,Vl=["POST","PUT"];n=wt.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,E,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pa.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(ie){Ta(this,ie);return}if(y=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var J in P)w.set(J,P[J]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ie of P.keys())w.set(ie,P.get(ie));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=c.FormData&&y instanceof c.FormData,!(Array.prototype.indexOf.call(Vl,E,void 0)>=0)||P||J||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,_e]of w)this.g.setRequestHeader(ie,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(ie){Ta(this,ie)}};function Ta(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.o=5,jl(y),ki(y)}function jl(y){y.A||(y.A=!0,qt(y,"complete"),qt(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,qt(this,"complete"),qt(this,"abort"),ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),wt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ea(this):this.Xa())},n.Xa=function(){Ea(this)};function Ea(y){if(y.h&&typeof o<"u"){if(y.v&&qs(y)==4)setTimeout(y.Ca.bind(y),0);else if(qt(y,"readystatechange"),qs(y)==4){y.h=!1;try{const ie=y.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var P;if(P=ie===0){let _e=String(y.D).match(cu)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),P=!ci.test(_e?_e.toLowerCase():"")}w=P}if(w)qt(y,"complete"),qt(y,"success");else{y.o=6;try{var J=qs(y)>2?y.g.statusText:""}catch{J=""}y.l=J+" ["+y.ca()+"]",jl(y)}}finally{ki(y)}}}}function ki(y,E){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const w=y.g;y.g=null,E||qt(y,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qs(y){return y.g?y.g.readyState:0}n.ca=function(){try{return qs(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),lo(E)}};function Tn(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Ri(y){const E={};y=(y.g&&qs(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<y.length;P++){if(j(y[P]))continue;var w=ga(y[P]);const J=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ie=E[J]||[];E[J]=ie,ie.push(w)}be(E,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(y,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[y]||E}function yr(y){this.za=0,this.i=[],this.j=new rs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ui("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ui("baseRetryDelayMs",5e3,y),this.Za=ui("retryDelaySeedMs",1e4,y),this.Ta=ui("forwardChannelMaxRetries",2,y),this.va=ui("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Yn(y&&y.concurrentRequestLimit),this.Ba=new pr,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=yr.prototype,n.ka=8,n.I=1,n.connect=function(y,E,w,P){Kt(0),this.W=y,this.H=E||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=bu(this,null,this.W),di(this)};function Ol(y){if(xo(y),y.I==3){var E=y.V++,w=sn(y.J);if(Et(w,"SID",y.M),Et(w,"RID",E),Et(w,"TYPE","terminate"),Sa(y,w),E=new Z(y,y.j,E),E.M=2,E.A=xa(sn(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=E.A,w=!0),w||(E.g=_u(E.j,null),E.g.ea(E.A)),E.F=Date.now(),st(E)}vu(y)}function xr(y){y.g&&(Bl(y),y.g.cancel(),y.g=null)}function xo(y){xr(y),y.v&&(c.clearTimeout(y.v),y.v=null),bo(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&c.clearTimeout(y.m),y.m=null)}function di(y){if(!vs(y.h)&&!y.m){y.m=!0;var E=y.Ea;ee||M(),se||(ee(),se=!0),R.add(E,y),y.D=0}}function vo(y,E){return _n(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=E.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=xs(m(y.Ea,y,E),xu(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const J=new Z(this,this.j,y);let ie=this.o;if(this.U&&(ie?(ie=H(ie),he(ie,this.U)):ie=this.U),this.u!==null||this.R||(J.J=ie,ie=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(E+=P,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=mu(this,J,E),w=sn(this.J),Et(w,"RID",y),Et(w,"CVER",22),this.G&&Et(w,"X-HTTP-Session-Id",this.G),Sa(this,w),ie&&(this.R?E="headers="+Bs(_s(ie))+"&"+E:this.u&&_a(w,this.u,ie)),Hs(this.h,J),this.Ra&&Et(w,"TYPE","init"),this.S?(Et(w,"$req",E),Et(w,"SID","null"),J.U=!0,Le(J,w,null)):Le(J,w,E),this.I=2}}else this.I==3&&(y?Gl(this,y):this.i.length==0||vs(this.h)||Gl(this))};function Gl(y,E){var w;E?w=E.l:w=y.V++;const P=sn(y.J);Et(P,"SID",y.M),Et(P,"RID",w),Et(P,"AID",y.K),Sa(y,P),y.u&&y.o&&_a(P,y.u,y.o),w=new Z(y,y.j,w,y.D+1),y.u===null&&(w.J=y.o),E&&(y.i=E.G.concat(y.i)),E=mu(y,w,1e3),w.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Hs(y.h,w),Le(w,P,E)}function Sa(y,E){y.H&&Ue(y.H,function(w,P){Et(E,P,w)}),y.l&&Ue({},function(w,P){Et(E,P,w)})}function mu(y,E,w){w=Math.min(y.i.length,w);const P=y.l?m(y.l.Ka,y.l,y):null;e:{var J=y.i;let Qe=-1;for(;;){const Xt=["count="+w];Qe==-1?w>0?(Qe=J[0].g,Xt.push("ofs="+Qe)):Qe=0:Xt.push("ofs="+Qe);let xt=!0;for(let Gt=0;Gt<w;Gt++){var ie=J[Gt].g;const Ts=J[Gt].map;if(ie-=Qe,ie<0)Qe=Math.max(0,J[Gt].g-100),xt=!1;else try{ie="req"+ie+"_"||"";try{var _e=Ts instanceof Map?Ts:Object.entries(Ts);for(const[hi,Ks]of _e){let $s=Ks;f(Ks)&&($s=gs(Ks)),Xt.push(ie+hi+"="+encodeURIComponent($s))}}catch(hi){throw Xt.push(ie+"type="+encodeURIComponent("_badmap")),hi}}catch{P&&P(Ts)}}if(xt){_e=Xt.join("&");break e}}_e=void 0}return y=y.i.splice(0,w),E.G=y,_e}function pu(y){if(!y.g&&!y.v){y.Y=1;var E=y.Da;ee||M(),se||(ee(),se=!0),R.add(E,y),y.A=0}}function Aa(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=xs(m(y.Da,y),xu(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,gu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=xs(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),xr(this),gu(this))};function Bl(y){y.B!=null&&(c.clearTimeout(y.B),y.B=null)}function gu(y){y.g=new Z(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var E=sn(y.na);Et(E,"RID","rpc"),Et(E,"SID",y.M),Et(E,"AID",y.K),Et(E,"CI",y.F?"0":"1"),!y.F&&y.ia&&Et(E,"TO",y.ia),Et(E,"TYPE","xmlhttp"),Sa(y,E),y.u&&y.o&&_a(E,y.u,y.o),y.O&&(y.g.H=y.O);var w=y.g;y=y.ba,w.M=1,w.A=xa(sn(E)),w.u=null,w.R=!0,ut(w,y)}n.Va=function(){this.C!=null&&(this.C=null,xr(this),Aa(this),Kt(19))};function bo(y){y.C!=null&&(c.clearTimeout(y.C),y.C=null)}function yu(y,E){var w=null;if(y.g==E){bo(y),Bl(y),y.g=null;var P=2}else if(Rn(y.h,E))w=E.G,ur(y.h,E),P=1;else return;if(y.I!=0){if(E.o)if(P==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var J=y.D;P=cr(),qt(P,new ys(P,w)),di(y)}else pu(y);else if(J=E.m,J==3||J==0&&E.X>0||!(P==1&&vo(y,E)||P==2&&Aa(y)))switch(w&&w.length>0&&(E=y.h,E.i=E.i.concat(w)),J){case 1:fi(y,5);break;case 4:fi(y,10);break;case 3:fi(y,6);break;default:fi(y,2)}}}function xu(y,E){let w=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(w*=2),w*E}function fi(y,E){if(y.j.info("Error code "+E),E==2){var w=m(y.bb,y),P=y.Ua;const J=!P;P=new os(P||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gn(P,"https"),xa(P),J?zs(P.toString(),w):Ul(P.toString(),w)}else Kt(2);y.I=0,y.l&&y.l.pa(E),vu(y),xo(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function vu(y){if(y.I=0,y.ja=[],y.l){const E=ya(y.h);(E.length!=0||y.i.length!=0)&&(C(y.ja,E),C(y.ja,y.i),y.h.i.length=0,A(y.i),y.i.length=0),y.l.oa()}}function bu(y,E,w){var P=w instanceof os?sn(w):new os(w);if(P.g!="")E&&(P.g=E+"."+P.g),dr(P,P.u);else{var J=c.location;P=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;const ie=new os(null);P&&gn(ie,P),E&&(ie.g=E),J&&dr(ie,J),w&&(ie.h=w),P=ie}return w=y.G,E=y.wa,w&&E&&Et(P,w,E),Et(P,"VER",y.ka),Sa(y,P),P}function _u(y,E,w){if(E&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Aa&&!y.ma?new wt(new li({ab:w})):new wt(y.ma),E.Fa(y.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}n=Tu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function vr(){}vr.prototype.g=function(y,E){return new jn(y,E)};function jn(y,E){Lt.call(this),this.g=new yr(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(y?y["X-WebChannel-Client-Profile"]=E.sa:y={"X-WebChannel-Client-Profile":E.sa}),this.g.U=y,(y=E&&E.Qb)&&!j(y)&&(this.g.u=y),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!j(E)&&(this.g.G=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new Mi(this)}_(jn,Lt),jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Ol(this.g)},jn.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var w={};w.__data__=y,y=w}else this.v&&(w={},w.__data__=gs(y),y=w);E.i.push(new Tt(E.Ya++,y)),E.I==3&&di(E)},jn.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,jn.Z.N.call(this)};function Eu(y){fn.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(const w in E){y=w;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}_(Eu,fn);function Su(){$n.call(this),this.status=1}_(Su,$n);function Mi(y){this.g=y}_(Mi,Tu),Mi.prototype.ra=function(){qt(this.g,"a")},Mi.prototype.qa=function(y){qt(this.g,new Eu(y))},Mi.prototype.pa=function(y){qt(this.g,new Su)},Mi.prototype.oa=function(){qt(this.g,"b")},vr.prototype.createWebChannel=vr.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,iA=function(){return new vr},sA=function(){return cr()},nA=Ht,Wp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,Hd=Ci,ma.COMPLETE="complete",tA=ma,ri.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Lt.prototype.listen=Lt.prototype.J,Ic=ri,wt.prototype.listenOnce=wt.prototype.K,wt.prototype.getLastError=wt.prototype.Ha,wt.prototype.getLastErrorCode=wt.prototype.ya,wt.prototype.getStatus=wt.prototype.ca,wt.prototype.getResponseJson=wt.prototype.La,wt.prototype.getResponseText=wt.prototype.la,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Fa,eA=wt}).apply(typeof Dd<"u"?Dd:typeof self<"u"?self:typeof window<"u"?window:{});const hT="@firebase/firestore",mT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new D0("@firebase/firestore");function Xo(){return Xa.logLevel}function Re(n,...e){if(Xa.logLevel<=at.DEBUG){const t=e.map(U0);Xa.debug(`Firestore (${Sl}): ${n}`,...t)}}function nr(n,...e){if(Xa.logLevel<=at.ERROR){const t=e.map(U0);Xa.error(`Firestore (${Sl}): ${n}`,...t)}}function fl(n,...e){if(Xa.logLevel<=at.WARN){const t=e.map(U0);Xa.warn(`Firestore (${Sl}): ${n}`,...t)}}function U0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,rA(n,s,t)}function rA(n,e,t){let s=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw nr(s),new Error(s)}function _t(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||rA(e,a,s)}function Je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pn.UNAUTHENTICATED)))}shutdown(){}}class j6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class O6{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let o=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=o;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(_t(typeof s.accessToken=="string",31837,{l:s}),new aA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class G6{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B6{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new G6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ws(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const s=o=>{o.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const a=o=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=z6(40);for(let o=0;o<a.length;++o)s.length<20&&a[o]<t&&(s+=e.charAt(a[o]%62))}return s}}function ot(n,e){return n<e?-1:n>e?1:0}function Xp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),o=e.charAt(s);if(a!==o)return _p(a)===_p(o)?ot(a,o):_p(a)?1:-1}return ot(n.length,e.length)}const F6=55296,q6=57343;function _p(n){const e=n.charCodeAt(0);return e>=F6&&e<=q6}function hl(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="__name__";class xi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ge(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const o=xi.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return ot(e.length,t.length)}static compareSegments(e,t){const s=xi.isNumericId(e),a=xi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?xi.extractNumericId(e).compare(xi.extractNumericId(t)):Xp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Pt extends xi{construct(e,t,s){return new Pt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Pt(t)}static emptyPath(){return new Pt([])}}const K6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends xi{construct(e,t,s){return new Cn(e,t,s)}static isValidIdentifier(e){return K6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gT}static keyField(){return new Cn([gT])}static fromServerFormat(e){const t=[];let s="",a=0;const o=()=>{if(s.length===0)throw new ke(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new ke(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ke(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(s+=f,a++):(o(),a++)}if(o(),c)throw new ke(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(t)}static emptyPath(){return new Cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Pt.fromString(e))}static fromName(e){return new je(Pt.fromString(e).popFirst(5))}static empty(){return new je(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n,e,t){if(!t)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $6(n,e,t,s){if(e===!0&&s===!0)throw new ke(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yT(n){if(!je.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xT(n){if(je.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ge(12329,{type:typeof n})}function ni(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hf(n);throw new ke(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wc(n,e){if(!lA(n))throw new ke(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new ke(fe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=-62135596800,bT=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*bT);return new jt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vT)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bT}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:dn("string",jt._jsonSchemaVersion),seconds:dn("number"),nanoseconds:dn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new jt(0,0))}static max(){return new $e(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=-1;function Y6(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=$e.fromTimestamp(s===1e9?new jt(t+1,0):new jt(t,s));return new Zr(a,je.empty(),e)}function J6(n){return new Zr(n.readTime,n.key,Bc)}class Zr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Zr($e.min(),je.empty(),Bc)}static max(){return new Zr($e.max(),je.empty(),Bc)}}function Q6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:ot(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==W6)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me(((s,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):me.reject(t)}static resolve(e){return new me(((t,s)=>{t(e)}))}static reject(e){return new me(((t,s)=>{s(e)}))}static waitFor(e){return new me(((t,s)=>{let a=0,o=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++o,c&&o===a&&t()}),(p=>s(p)))})),c=!0,o===a&&t()}))}static or(e){let t=me.resolve(!1);for(const s of e)t=t.next((a=>a?me.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,o)=>{s.push(t.call(this,a,o))})),this.waitFor(s)}static mapArray(e,t){return new me(((s,a)=>{const o=e.length,c=new Array(o);let f=0;for(let p=0;p<o;p++){const m=p;t(e[m]).next((v=>{c[m]=v,++f,f===o&&s(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new me(((s,a)=>{const o=()=>{e()===!0?t().next((()=>{o()}),a):s()};o()}))}}function Z6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=-1;function Ff(n){return n==null}function uf(n){return n===0&&1/n==-1/0}function e5(n){return typeof n=="number"&&Number.isInteger(n)&&!uf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="";function t5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_T(e)),e=n5(n.get(t),e);return _T(e)}function n5(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case cA:t+="";break;default:t+=o}}return t}function _T(n){return n+cA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pd(this.root,e,this.comparator,!0)}}class Pd{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,s,a,o){this.key=e,this.value=t,this.color=s??Nn.RED,this.left=a??Nn.EMPTY,this.right=o??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,o){return new Nn(e??this.key,t??this.value,s??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const o=s(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,s),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Nn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,s,a,o){return this}insert(e,t,s){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ET(this.data.getIterator())}getIteratorFrom(e){return new ET(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class ET{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new ps([])}unionWith(e){let t=new pn(Cn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dA("Invalid base64 string: "+o):o}})(e);return new kn(t)}static fromUint8Array(e){const t=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const s5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(n){if(_t(!!n,39018),typeof n=="string"){let e=0;const t=s5.exec(n);if(_t(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tn(n.seconds),nanos:tn(n.nanos)}}function tn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ta(n){return typeof n=="string"?kn.fromBase64String(n):kn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="server_timestamp",hA="__type__",mA="__previous_value__",pA="__local_write_time__";function O0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[hA])==null?void 0:s.stringValue)===fA}function qf(n){const e=n.mapValue.fields[mA];return O0(e)?qf(e):e}function Hc(n){const e=ea(n.mapValue.fields[pA].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,t,s,a,o,c,f,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=v}}const df="(default)";class zc{constructor(e,t){this.projectId=e,this.database=t||df}static empty(){return new zc("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="__type__",r5="__max__",Ld={mapValue:{}},yA="__vector__",ff="value";function na(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?O0(n)?4:o5(n)?9007199254740991:a5(n)?10:11:Ge(28295,{value:n})}function Si(n,e){if(n===e)return!0;const t=na(n);if(t!==na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hc(n).isEqual(Hc(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=ea(a.timestampValue),f=ea(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,o){return ta(a.bytesValue).isEqual(ta(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,o){return tn(a.geoPointValue.latitude)===tn(o.geoPointValue.latitude)&&tn(a.geoPointValue.longitude)===tn(o.geoPointValue.longitude)})(n,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return tn(a.integerValue)===tn(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=tn(a.doubleValue),f=tn(o.doubleValue);return c===f?uf(c)===uf(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return hl(n.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},f=o.mapValue.fields||{};if(TT(c)!==TT(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Si(c[p],f[p])))return!1;return!0})(n,e);default:return Ge(52216,{left:n})}}function Fc(n,e){return(n.values||[]).find((t=>Si(t,e)))!==void 0}function ml(n,e){if(n===e)return 0;const t=na(n),s=na(e);if(t!==s)return ot(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ot(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const f=tn(o.integerValue||o.doubleValue),p=tn(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return ST(n.timestampValue,e.timestampValue);case 4:return ST(Hc(n),Hc(e));case 5:return Xp(n.stringValue,e.stringValue);case 6:return(function(o,c){const f=ta(o),p=ta(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const f=o.split("/"),p=c.split("/");for(let m=0;m<f.length&&m<p.length;m++){const v=ot(f[m],p[m]);if(v!==0)return v}return ot(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const f=ot(tn(o.latitude),tn(c.latitude));return f!==0?f:ot(tn(o.longitude),tn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return AT(n.arrayValue,e.arrayValue);case 10:return(function(o,c){var T,A,C,D;const f=o.fields||{},p=c.fields||{},m=(T=f[ff])==null?void 0:T.arrayValue,v=(A=p[ff])==null?void 0:A.arrayValue,_=ot(((C=m==null?void 0:m.values)==null?void 0:C.length)||0,((D=v==null?void 0:v.values)==null?void 0:D.length)||0);return _!==0?_:AT(m,v)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===Ld.mapValue&&c===Ld.mapValue)return 0;if(o===Ld.mapValue)return 1;if(c===Ld.mapValue)return-1;const f=o.fields||{},p=Object.keys(f),m=c.fields||{},v=Object.keys(m);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const T=Xp(p[_],v[_]);if(T!==0)return T;const A=ml(f[p[_]],m[v[_]]);if(A!==0)return A}return ot(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function ST(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ot(n,e);const t=ea(n),s=ea(e),a=ot(t.seconds,s.seconds);return a!==0?a:ot(t.nanos,s.nanos)}function AT(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const o=ml(t[a],s[a]);if(o)return o}return ot(t.length,s.length)}function pl(n){return Zp(n)}function Zp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ea(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ta(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return je.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const o of t.values||[])a?a=!1:s+=",",s+=Zp(o);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const c of s)o?o=!1:a+=",",a+=`${c}:${Zp(t.fields[c])}`;return a+"}"})(n.mapValue):Ge(61005,{value:n})}function zd(n){switch(na(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qf(n);return e?16+zd(e):16;case 5:return 2*n.stringValue.length;case 6:return ta(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,o)=>a+zd(o)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return oa(s.fields,((o,c)=>{a+=o.length+zd(c)})),a})(n.mapValue);default:throw Ge(13486,{value:n})}}function wT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function e0(n){return!!n&&"integerValue"in n}function G0(n){return!!n&&"arrayValue"in n}function NT(n){return!!n&&"nullValue"in n}function CT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Fd(n){return!!n&&"mapValue"in n}function a5(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[gA])==null?void 0:s.stringValue)===yA}function Pc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return oa(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Pc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pc(n.arrayValue.values[t]);return e}return{...n}}function o5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===r5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.value=e}static empty(){return new ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Fd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(t)}setAll(e){let t=Cn.emptyPath(),s={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=f.popLast()}c?s[f.lastSegment()]=Pc(c):a.push(f.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,a)}delete(e){const t=this.field(e.popLast());Fd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Fd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){oa(t,((a,o)=>e[a]=o));for(const a of s)delete e[a]}clone(){return new ss(Pc(this.value))}}function xA(n){const e=[];return oa(n.fields,((t,s)=>{const a=new Cn([t]);if(Fd(s)){const o=xA(s.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new ps(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t,s,a,o,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=o,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Ln(e,0,$e.min(),$e.min(),$e.min(),ss.empty(),0)}static newFoundDocument(e,t,s,a){return new Ln(e,1,t,$e.min(),s,a,0)}static newNoDocument(e,t){return new Ln(e,2,t,$e.min(),$e.min(),ss.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,$e.min(),$e.min(),ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.position=e,this.inclusive=t}}function IT(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const o=e[a],c=n.position[a];if(o.field.isKeyField()?s=je.comparator(je.fromName(c.referenceValue),t.key):s=ml(c,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function kT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Si(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t="asc"){this.field=e,this.dir=t}}function l5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class un extends vA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new u5(e,t,s):t==="array-contains"?new h5(e,s):t==="in"?new m5(e,s):t==="not-in"?new p5(e,s):t==="array-contains-any"?new g5(e,s):new un(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new d5(e,s):new f5(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ml(t,this.value)):t!==null&&na(this.value)===na(t)&&this.matchesComparison(ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends vA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new si(e,t)}matches(e){return bA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bA(n){return n.op==="and"}function _A(n){return c5(n)&&bA(n)}function c5(n){for(const e of n.filters)if(e instanceof si)return!1;return!0}function t0(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+pl(n.value);if(_A(n))return n.filters.map((e=>t0(e))).join(",");{const e=n.filters.map((t=>t0(t))).join(",");return`${n.op}(${e})`}}function TA(n,e){return n instanceof un?(function(s,a){return a instanceof un&&s.op===a.op&&s.field.isEqual(a.field)&&Si(s.value,a.value)})(n,e):n instanceof si?(function(s,a){return a instanceof si&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((o,c,f)=>o&&TA(c,a.filters[f])),!0):!1})(n,e):void Ge(19439)}function EA(n){return n instanceof un?(function(t){return`${t.field.canonicalString()} ${t.op} ${pl(t.value)}`})(n):n instanceof si?(function(t){return t.op.toString()+" {"+t.getFilters().map(EA).join(" ,")+"}"})(n):"Filter"}class u5 extends un{constructor(e,t,s){super(e,t,s),this.key=je.fromName(s.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class d5 extends un{constructor(e,t){super(e,"in",t),this.keys=SA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class f5 extends un{constructor(e,t){super(e,"not-in",t),this.keys=SA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function SA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>je.fromName(s.referenceValue)))}class h5 extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return G0(t)&&Fc(t.arrayValue,this.value)}}class m5 extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fc(this.value.arrayValue,t)}}class p5 extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fc(this.value.arrayValue,t)}}class g5 extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!G0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Fc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,t=null,s=[],a=[],o=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=o,this.startAt=c,this.endAt=f,this.Te=null}}function RT(n,e=null,t=[],s=[],a=null,o=null,c=null){return new y5(n,e,t,s,a,o,c)}function B0(n){const e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>t0(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),Ff(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>pl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>pl(s))).join(",")),e.Te=t}return e.Te}function H0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!l5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kT(n.startAt,e.startAt)&&kT(n.endAt,e.endAt)}function n0(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t=null,s=[],a=[],o=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=o,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function x5(n,e,t,s,a,o,c,f){return new Xc(n,e,t,s,a,o,c,f)}function z0(n){return new Xc(n)}function MT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function AA(n){return n.collectionGroup!==null}function Lc(n){const e=Je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new pn(Cn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new mf(o,s))})),t.has(Cn.keyField().canonicalString())||e.Ie.push(new mf(Cn.keyField(),s))}return e.Ie}function vi(n){const e=Je(n);return e.Ee||(e.Ee=v5(e,Lc(n))),e.Ee}function v5(n,e){if(n.limitType==="F")return RT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new mf(a.field,o)}));const t=n.endAt?new hf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new hf(n.startAt.position,n.startAt.inclusive):null;return RT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function s0(n,e){const t=n.filters.concat([e]);return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function i0(n,e,t){return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kf(n,e){return H0(vi(n),vi(e))&&n.limitType===e.limitType}function wA(n){return`${B0(vi(n))}|lt:${n.limitType}`}function Zo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>EA(a))).join(", ")}]`),Ff(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>pl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>pl(a))).join(",")),`Target(${s})`})(vi(n))}; limitType=${n.limitType})`}function $f(n,e){return e.isFoundDocument()&&(function(s,a){const o=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):je.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(n,e)&&(function(s,a){for(const o of Lc(s))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const o of s.filters)if(!o.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(c,f,p){const m=IT(c,f,p);return c.inclusive?m<=0:m<0})(s.startAt,Lc(s),a)||s.endAt&&!(function(c,f,p){const m=IT(c,f,p);return c.inclusive?m>=0:m>0})(s.endAt,Lc(s),a))})(n,e)}function b5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NA(n){return(e,t)=>{let s=!1;for(const a of Lc(n)){const o=_5(a,e,t);if(o!==0)return o;s=s||a.field.isKeyField()}return 0}}function _5(n,e,t){const s=n.field.isKeyField()?je.comparator(e.key,t.key):(function(o,c,f){const p=c.data.field(o),m=f.data.field(o);return p!==null&&m!==null?ml(p,m):Ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ge(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,o]of s)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,((t,s)=>{for(const[a,o]of s)e(a,o)}))}isEmpty(){return uA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new Ft(je.comparator);function sr(){return T5}const CA=new Ft(je.comparator);function kc(...n){let e=CA;for(const t of n)e=e.insert(t.key,t);return e}function IA(n){let e=CA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function qa(){return Uc()}function kA(){return Uc()}function Uc(){return new io((n=>n.toString()),((n,e)=>n.isEqual(e)))}const E5=new Ft(je.comparator),S5=new pn(je.comparator);function lt(...n){let e=S5;for(const t of n)e=e.add(t);return e}const A5=new pn(ot);function w5(){return A5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(e)?"-0":e}}function RA(n){return{integerValue:""+n}}function N5(n,e){return e5(e)?RA(e):F0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this._=void 0}}function C5(n,e,t){return n instanceof pf?(function(a,o){const c={fields:{[hA]:{stringValue:fA},[pA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&O0(o)&&(o=qf(o)),o&&(c.fields[mA]=o),{mapValue:c}})(t,e):n instanceof qc?DA(n,e):n instanceof Kc?PA(n,e):(function(a,o){const c=MA(a,o),f=DT(c)+DT(a.Ae);return e0(c)&&e0(a.Ae)?RA(f):F0(a.serializer,f)})(n,e)}function I5(n,e,t){return n instanceof qc?DA(n,e):n instanceof Kc?PA(n,e):t}function MA(n,e){return n instanceof gf?(function(s){return e0(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class pf extends Yf{}class qc extends Yf{constructor(e){super(),this.elements=e}}function DA(n,e){const t=LA(e);for(const s of n.elements)t.some((a=>Si(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Kc extends Yf{constructor(e){super(),this.elements=e}}function PA(n,e){let t=LA(e);for(const s of n.elements)t=t.filter((a=>!Si(a,s)));return{arrayValue:{values:t}}}class gf extends Yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function DT(n){return tn(n.integerValue||n.doubleValue)}function LA(n){return G0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function k5(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof qc&&a instanceof qc||s instanceof Kc&&a instanceof Kc?hl(s.elements,a.elements,Si):s instanceof gf&&a instanceof gf?Si(s.Ae,a.Ae):s instanceof pf&&a instanceof pf})(n.transform,e.transform)}class R5{constructor(e,t){this.version=e,this.transformResults=t}}class Ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ps}static exists(e){return new Ps(void 0,e)}static updateTime(e){return new Ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Jf{}function UA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new q0(n.key,Ps.none()):new Zc(n.key,n.data,Ps.none());{const t=n.data,s=ss.empty();let a=new pn(Cn.comparator);for(let o of e.fields)if(!a.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?s.delete(o):s.set(o,c),a=a.add(o)}return new la(n.key,s,new ps(a.toArray()),Ps.none())}}function M5(n,e,t){n instanceof Zc?(function(a,o,c){const f=a.value.clone(),p=LT(a.fieldTransforms,o,c.transformResults);f.setAll(p),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof la?(function(a,o,c){if(!qd(a.precondition,o))return void o.convertToUnknownDocument(c.version);const f=LT(a.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(VA(a)),p.setAll(f),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Vc(n,e,t,s){return n instanceof Zc?(function(o,c,f,p){if(!qd(o.precondition,c))return f;const m=o.value.clone(),v=UT(o.fieldTransforms,p,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof la?(function(o,c,f,p){if(!qd(o.precondition,c))return f;const m=UT(o.fieldTransforms,p,c),v=c.data;return v.setAll(VA(o)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(o,c,f){return qd(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function D5(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),o=MA(s.transform,a||null);o!=null&&(t===null&&(t=ss.empty()),t.set(s.field,o))}return t||null}function PT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&hl(s,a,((o,c)=>k5(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Zc extends Jf{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class la extends Jf{constructor(e,t,s,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function VA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function LT(n,e,t){const s=new Map;_t(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const o=n[a],c=o.transform,f=e.data.field(o.field);s.set(o.field,I5(c,f,t[a]))}return s}function UT(n,e,t){const s=new Map;for(const a of n){const o=a.transform,c=t.data.field(a.field);s.set(a.field,C5(o,c,e))}return s}class q0 extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P5 extends Jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&M5(o,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Vc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Vc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=kA();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let f=this.applyToLocalView(c,o.mutatedFields);f=t.has(a.key)?null:f;const p=UA(c,f);p!==null&&s.set(a.key,p),c.isValidDocument()||c.convertToNoDocument($e.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),lt())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,((t,s)=>PT(t,s)))&&hl(this.baseMutations,e.baseMutations,((t,s)=>PT(t,s)))}}class K0{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){_t(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return E5})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,s[c].version);return new K0(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,dt;function j5(n){switch(n){case fe.OK:return Ge(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ge(15467,{code:n})}}function jA(n){if(n===void 0)return nr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case cn.OK:return fe.OK;case cn.CANCELLED:return fe.CANCELLED;case cn.UNKNOWN:return fe.UNKNOWN;case cn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case cn.INTERNAL:return fe.INTERNAL;case cn.UNAVAILABLE:return fe.UNAVAILABLE;case cn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case cn.NOT_FOUND:return fe.NOT_FOUND;case cn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case cn.ABORTED:return fe.ABORTED;case cn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case cn.DATA_LOSS:return fe.DATA_LOSS;default:return Ge(39323,{code:n})}}(dt=cn||(cn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=new Wr([4294967295,4294967295],0);function VT(n){const e=O5().encode(n),t=new ZS;return t.update(e),new Uint8Array(t.digest())}function jT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Wr([t,s],0),new Wr([a,o],0)]}class $0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Rc(`Invalid padding: ${t}`);if(s<0)throw new Rc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Rc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Rc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Wr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Wr.fromNumber(s)));return a.compare(G5)===1&&(a=new Wr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=VT(e),[s,a]=jT(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,a,o);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new $0(o,a,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=VT(e),[s,a]=jT(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,a,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,s,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qf($e.min(),a,new Ft(ot),sr(),lt())}}class eu{constructor(e,t,s,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new eu(s,t,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class OA{constructor(e,t){this.targetId=e,this.Ce=t}}class GA{constructor(e,t,s=kn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class OT{constructor(){this.ve=0,this.Fe=GT(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),t=lt(),s=lt();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ge(38017,{changeType:o})}})),new eu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=GT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class B5{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=Ud(),this.He=Ud(),this.Ye=new Ft(ot)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const o=a.target;if(n0(o))if(s===0){const c=new je(o.path);this.et(t,c,Ln.newNoDocument(c,$e.min()))}else _t(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:o=0}=t;let c,f;try{c=ta(s).toUint8Array()}catch(p){if(p instanceof dA)return fl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new $0(c,a,o)}catch(p){return fl(p instanceof Rc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((o=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.et(t,o,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const f=this.ot(c);if(f){if(o.current&&n0(f.target)){const p=new je(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Ln.newNoDocument(p,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let s=lt();this.He.forEach(((o,c)=>{let f=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new Qf(e,t,this.Ye,this.je,s);return this.je=sr(),this.Je=Ud(),this.He=Ud(),this.Ye=new Ft(ot),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new OT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new pn(ot),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new pn(ot),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new OT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ud(){return new Ft(je.comparator)}function GT(){return new Ft(je.comparator)}const H5={asc:"ASCENDING",desc:"DESCENDING"},z5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F5={and:"AND",or:"OR"};class q5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function r0(n,e){return n.useProto3Json||Ff(e)?e:{value:e}}function yf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function K5(n,e){return yf(n,e.toTimestamp())}function bi(n){return _t(!!n,49232),$e.fromTimestamp((function(t){const s=ea(t);return new jt(s.seconds,s.nanos)})(n))}function Y0(n,e){return a0(n,e).canonicalString()}function a0(n,e){const t=(function(a){return new Pt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function HA(n){const e=Pt.fromString(n);return _t($A(e),10190,{key:e.toString()}),e}function o0(n,e){return Y0(n.databaseId,e.path)}function Tp(n,e){const t=HA(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(FA(t))}function zA(n,e){return Y0(n.databaseId,e)}function $5(n){const e=HA(n);return e.length===4?Pt.emptyPath():FA(e)}function l0(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FA(n){return _t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function BT(n,e,t){return{name:o0(n,e),fields:t.value.mapValue.fields}}function Y5(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ge(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(m,v){return m.useProto3Json?(_t(v===void 0||typeof v=="string",58123),kn.fromBase64String(v||"")):(_t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),kn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const v=m.code===void 0?fe.UNKNOWN:jA(m.code);return new ke(v,m.message||"")})(c);t=new GA(s,a,o,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Tp(n,s.document.name),o=bi(s.document.updateTime),c=s.document.createTime?bi(s.document.createTime):$e.min(),f=new ss({mapValue:{fields:s.document.fields}}),p=Ln.newFoundDocument(a,o,c,f),m=s.targetIds||[],v=s.removedTargetIds||[];t=new Kd(m,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Tp(n,s.document),o=s.readTime?bi(s.readTime):$e.min(),c=Ln.newNoDocument(a,o),f=s.removedTargetIds||[];t=new Kd([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Tp(n,s.document),o=s.removedTargetIds||[];t=new Kd([],o,a,null)}else{if(!("filter"in e))return Ge(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:o}=s,c=new V5(a,o),f=s.targetId;t=new OA(f,c)}}return t}function J5(n,e){let t;if(e instanceof Zc)t={update:BT(n,e.key,e.value)};else if(e instanceof q0)t={delete:o0(n,e.key)};else if(e instanceof la)t={update:BT(n,e.key,e.data),updateMask:iL(e.fieldMask)};else{if(!(e instanceof P5))return Ge(16599,{Vt:e.type});t={verify:o0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,c){const f=c.transform;if(f instanceof pf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof qc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Kc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof gf)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ge(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:K5(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ge(27497)})(n,e.precondition)),t}function Q5(n,e){return n&&n.length>0?(_t(e!==void 0,14353),n.map((t=>(function(a,o){let c=a.updateTime?bi(a.updateTime):bi(o);return c.isEqual($e.min())&&(c=bi(o)),new R5(c,a.transformResults||[])})(t,e)))):[]}function W5(n,e){return{documents:[zA(n,e.path)]}}function X5(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=zA(n,a);const o=(function(m){if(m.length!==0)return KA(si.create(m,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(m){if(m.length!==0)return m.map((v=>(function(T){return{field:el(T.field),direction:tL(T.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=r0(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:a}}function Z5(n){let e=$5(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){_t(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=(function(_){const T=qA(_);return T instanceof si&&_A(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((T=>(function(C){return new mf(tl(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let T;return T=typeof _=="object"?_.value:_,Ff(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(_){const T=!!_.before,A=_.values||[];return new hf(A,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const T=!_.before,A=_.values||[];return new hf(A,T)})(t.endAt)),x5(e,a,c,o,f,"F",p,m)}function eL(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=tl(t.unaryFilter.field);return un.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=tl(t.unaryFilter.field);return un.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=tl(t.unaryFilter.field);return un.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=tl(t.unaryFilter.field);return un.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return un.create(tl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return si.create(t.compositeFilter.filters.map((s=>qA(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(n):Ge(30097,{filter:n})}function tL(n){return H5[n]}function nL(n){return z5[n]}function sL(n){return F5[n]}function el(n){return{fieldPath:n.canonicalString()}}function tl(n){return Cn.fromServerFormat(n.fieldPath)}function KA(n){return n instanceof un?(function(t){if(t.op==="=="){if(CT(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NAN"}};if(NT(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(CT(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NOT_NAN"}};if(NT(t.value))return{unaryFilter:{field:el(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:el(t.field),op:nL(t.op),value:t.value}}})(n):n instanceof si?(function(t){const s=t.getFilters().map((a=>KA(a)));return s.length===1?s[0]:{compositeFilter:{op:sL(t.op),filters:s}}})(n):Ge(54877,{filter:n})}function iL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $A(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t,s,a,o=$e.min(),c=$e.min(),f=kn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new $r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.yt=e}}function aL(n){const e=Z5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?i0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.Cn=new lL}addToCollectionParentIndex(e,t){return this.Cn.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Zr.min())}updateCollectionGroup(e,t,s){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class lL{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new pn(Pt.comparator),o=!a.has(s);return this.index[t]=a.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new pn(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YA=41943040;class ns{static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(YA,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gl(0)}static cr(){return new gl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="LruGarbageCollector",cL=1048576;function FT([n,e],[t,s]){const a=ot(n,t);return a===0?ot(e,s):a}class uL{constructor(e){this.Ir=e,this.buffer=new pn(FT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();FT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dL{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(zT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wl(t)?Re(zT,"Ignoring IndexedDB error during garbage collection: ",t):await Al(t)}await this.Vr(3e5)}))}}class fL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return me.resolve(zf.ce);const s=new uL(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(HT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,o,c,f,p,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,f=Date.now(),this.removeTargets(e,s,t)))).next((_=>(o=_,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(m=Date.now(),Xo()<=at.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${o} targets in `+(p-f)+`ms
	Removed ${_} documents in `+(m-p)+`ms
Total Duration: ${m-v}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:_}))))}}function hL(n,e){return new fL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.changes=new io((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?me.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Vc(s.mutation,a,ps.empty(),jt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,lt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=lt()){const a=qa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((o=>{let c=kc();return o.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=qa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,lt())))}populateOverlays(e,t,s){const a=[];return s.forEach((o=>{t.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,a){let o=sr();const c=Uc(),f=(function(){return Uc()})();return t.forEach(((p,m)=>{const v=s.get(m.key);a.has(m.key)&&(v===void 0||v.mutation instanceof la)?o=o.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Vc(v.mutation,m,v.mutation.getFieldMask(),jt.now())):c.set(m.key,ps.empty())})),this.recalculateAndSaveOverlays(e,o).next((p=>(p.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>f.set(m,new pL(v,c.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Uc();let a=new Ft(((c,f)=>c-f)),o=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let v=s.get(p)||ps.empty();v=f.applyToLocalView(m,v),s.set(p,v);const _=(a.get(f.batchId)||lt()).add(p);a=a.insert(f.batchId,_)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),m=p.key,v=p.value,_=kA();v.forEach((T=>{if(!o.has(T)){const A=UA(t.get(T),s.get(T));A!==null&&_.set(T,A),o=o.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,_))}return me.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return je.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):AA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-o.size):me.resolve(qa());let f=Bc,p=o;return c.next((m=>me.forEach(m,((v,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),o.get(v)?me.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{p=p.insert(v,T)}))))).next((()=>this.populateOverlays(e,m,o))).next((()=>this.computeViews(e,p,m,lt()))).next((v=>({batchId:f,changes:IA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next((s=>{let a=kc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const o=t.collectionGroup;let c=kc();return this.indexManager.getCollectionParents(e,o).next((f=>me.forEach(f,(p=>{const m=(function(_,T){return new Xc(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,s,a).next((v=>{v.forEach(((_,T)=>{c=c.insert(_,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,a)))).next((c=>{o.forEach(((p,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Ln.newInvalidDocument(v)))}));let f=kc();return c.forEach(((p,m)=>{const v=o.get(p);v!==void 0&&Vc(v.mutation,m,ps.empty(),jt.now()),$f(t,m)&&(f=f.insert(p,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return me.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:bi(a.createTime)}})(t)),me.resolve()}getNamedQuery(e,t){return me.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:aL(a.bundledQuery),readTime:bi(a.readTime)}})(t)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.overlays=new Ft(je.comparator),this.qr=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const s=qa();return me.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&s.set(a,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,o)=>{this.St(e,t,o)})),me.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),me.resolve()}getOverlaysForCollection(e,t,s){const a=qa(),o=t.length+1,c=new je(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&p.largestBatchId>s&&a.set(p.getKey(),p)}return me.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let o=new Ft(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let v=o.get(m.largestBatchId);v===null&&(v=qa(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const f=qa(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,v)=>f.set(m,v))),!(f.size()>=a)););return me.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new U5(t,s));let o=this.qr.get(t);o===void 0&&(o=lt(),this.qr.set(t,o)),this.qr.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.Qr=new pn(xn.$r),this.Ur=new pn(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new xn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new je(new Pt([])),s=new xn(t,e),a=new xn(t,e+1),o=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new je(new Pt([])),s=new xn(t,e),a=new xn(t,e+1);let o=lt();return this.Ur.forEachInRange([s,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new xn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return je.comparator(e.key,t.key)||ot(e.Yr,t.Yr)}static Kr(e,t){return ot(e.Yr,t.Yr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new pn(xn.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new L5(o,t,s,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new xn(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),o=a<0?0:a;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?j0:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new xn(t,0),a=new xn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,a],(c=>{const f=this.Xr(c.Yr);o.push(f)})),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new pn(ot);return t.forEach((a=>{const o=new xn(a,0),c=new xn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(f=>{s=s.add(f.Yr)}))})),me.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let o=s;je.isDocumentKey(o)||(o=o.child(""));const c=new xn(new je(o),0);let f=new pn(ot);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===a&&(f=f.add(p.Yr)),!0)}),c),me.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_t(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return me.forEach(t.mutations,(a=>{const o=new xn(a.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new xn(t,0),a=this.Zr.firstAfterOrEqual(s);return me.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.ri=e,this.docs=(function(){return new Ft(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),o=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return me.resolve(s?s.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let s=sr();return t.forEach((a=>{const o=this.docs.get(a);s=s.insert(a,o?o.document.mutableCopy():Ln.newInvalidDocument(a))})),me.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let o=sr();const c=t.path,f=new je(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:m,value:{document:v}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||Q6(J6(v),s)<=0||(a.has(v.key)||$f(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,t,s,a){Ge(9500)}ii(e,t){return me.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new TL(this)}getSize(e){return me.resolve(this.size)}}class TL extends mL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),me.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.persistence=e,this.si=new io((t=>B0(t)),H0),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.oi=0,this._i=new J0,this.targetCount=0,this.ai=gl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),me.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new gl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Pr(t),me.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,s){let a=0;const o=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),me.waitFor(o).next((()=>a))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return me.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),me.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),me.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return me.resolve(s)}containsKey(e,t){return me.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.ui={},this.overlays={},this.ci=new zf(0),this.li=!1,this.li=!0,this.hi=new vL,this.referenceDelegate=e(this),this.Pi=new EL(this),this.indexManager=new oL,this.remoteDocumentCache=(function(a){return new _L(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new rL(t),this.Ii=new yL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new bL(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Re("MemoryPersistence","Starting transaction:",e);const a=new SL(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,t){return me.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class SL extends X6{constructor(e){super(),this.currentSequenceNumber=e}}class Q0{constructor(e){this.persistence=e,this.Ri=new J0,this.Vi=null}static mi(e){return new Q0(e)}get fi(){if(this.Vi)return this.Vi;throw Ge(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),me.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(s=>{const a=je.fromPath(s);return this.gi(e,a).next((o=>{o||t.removeEntry(a,$e.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return me.or([()=>me.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xf{constructor(e,t){this.persistence=e,this.pi=new io((s=>t5(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=hL(this,t)}static mi(e,t){return new xf(e,t)}Ei(){}di(e){return me.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return me.forEach(this.pi,((s,a)=>this.br(e,s,a).next((o=>o?me.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,o.removeEntry(c,$e.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),me.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zd(e.data.value)),t}br(e,t,s){return me.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return me.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=lt(),a=lt();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new W0(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yP()?8:Z6(Vn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,a,s).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new AL;return this.Ss(e,t,c).next((f=>{if(o.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>o.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(Xo()<=at.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(Xo()<=at.DEBUG&&Re("QueryEngine","Query:",Zo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Xo()<=at.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(t))):me.resolve())}ys(e,t){if(MT(t))return me.resolve(null);let s=vi(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=i0(t,null,"F"),s=vi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const c=lt(...o);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.Ds(t,f);return this.Cs(t,m,c,p.readTime)?this.ys(e,i0(t,null,"F")):this.vs(e,m,t,p)}))))})))))}ws(e,t,s,a){return MT(t)||a.isEqual($e.min())?me.resolve(null):this.ps.getDocuments(e,s).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,s,a)?me.resolve(null):(Xo()<=at.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Zo(t)),this.vs(e,c,t,Y6(a,Bc)).next((f=>f)))}))}Ds(e,t){let s=new pn(NA(e));return t.forEach(((a,o)=>{$f(e,o)&&(s=s.add(o))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,t,s){return Xo()<=at.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Zo(t)),this.ps.getDocumentsMatchingQuery(e,t,Zr.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="LocalStore",NL=3e8;class CL{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Ft(ot),this.xs=new io((o=>B0(o)),H0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function IL(n,e,t,s){return new CL(n,e,t,s)}async function QA(n,e){const t=Je(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((o=>(a=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const c=[],f=[];let p=lt();for(const m of a){c.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}for(const m of o){f.push(m.batchId);for(const v of m.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function kL(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,m,v){const _=m.batch,T=_.keys();let A=me.resolve();return T.forEach((C=>{A=A.next((()=>v.getEntry(p,C))).next((D=>{const N=m.docVersions.get(C);_t(N!==null,48541),D.version.compareTo(N)<0&&(_.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),v.addEntry(D)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(p,_)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=lt();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(p=p.add(f.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function WA(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function RL(n,e){const t=Je(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((v,_)=>{const T=a.get(_);if(!T)return;f.push(t.Pi.removeMatchingKeys(o,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,v.addedDocuments,_))));let A=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(kn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,s)),a=a.insert(_,A),(function(D,N,L){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=NL?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(T,A,v)&&f.push(t.Pi.updateTargetData(o,A))}));let p=sr(),m=lt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))})),f.push(ML(o,c,e.documentUpdates).next((v=>{p=v.ks,m=v.qs}))),!s.isEqual($e.min())){const v=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));f.push(v)}return me.waitFor(f).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,p,m))).next((()=>p))})).then((o=>(t.Ms=a,o)))}function ML(n,e,t){let s=lt(),a=lt();return t.forEach((o=>s=s.add(o))),e.getEntries(n,s).next((o=>{let c=sr();return t.forEach(((f,p)=>{const m=o.get(f);p.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual($e.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):Re(X0,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function DL(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=j0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function PL(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((o=>o?(a=o,me.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new $r(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function c0(n,e,t){const s=Je(n),a=s.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!wl(c))throw c;Re(X0,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function qT(n,e,t){const s=Je(n);let a=$e.min(),o=lt();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,v){const _=Je(p),T=_.xs.get(v);return T!==void 0?me.resolve(_.Ms.get(T)):_.Pi.getTargetData(m,v)})(s,c,vi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((p=>{o=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:$e.min(),t?o:lt()))).next((f=>(LL(s,b5(e),f),{documents:f,Qs:o})))))}function LL(n,e,t){let s=n.Os.get(e)||$e.min();t.forEach(((a,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),n.Os.set(e,s)}class KT{constructor(){this.activeTargetIds=w5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UL{constructor(){this.Mo=new KT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new KT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="ConnectivityMonitor";class YT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re($T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re($T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd=null;function u0(){return Vd===null?Vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vd++,"0x"+Vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="RestConnection",jL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===df?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,o){const c=u0(),f=this.zo(e,t.toUriEncodedString());Re(Ep,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,o);const{host:m}=new URL(f),v=Tl(m);return this.Jo(e,f,p,s,v).then((_=>(Re(Ep,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw fl(Ep,`RPC '${e}' ${c} failed with error: `,_,"url: ",f,"request:",s),_}))}Ho(e,t,s,a,o,c){return this.Go(e,t,s,a,o)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,o)=>e[o]=a)),s&&s.headers.forEach(((a,o)=>e[o]=a))}zo(e,t){const s=jL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class BL extends OL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,o){const c=u0();return new Promise(((f,p)=>{const m=new eA;m.setWithCredentials(!0),m.listenOnce(tA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Hd.NO_ERROR:const _=m.getResponseJson();Re(Dn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case Hd.TIMEOUT:Re(Dn,`RPC '${e}' ${c} timed out`),p(new ke(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const T=m.getStatus();if(Re(Dn,`RPC '${e}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A==null?void 0:A.error;if(C&&C.status&&C.message){const D=(function(L){const U=L.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(U)>=0?U:fe.UNKNOWN})(C.status);p(new ke(D,C.message))}else p(new ke(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new ke(fe.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Re(Dn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);Re(Dn,`RPC '${e}' ${c} sending request:`,a),m.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=u0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=iA(),f=sA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=o.join("");Re(Dn,`Creating RPC '${e}' stream ${a}: ${v}`,p);const _=c.createWebChannel(v,p);this.I_(_);let T=!1,A=!1;const C=new GL({Yo:N=>{A?Re(Dn,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(T||(Re(Dn,`Opening RPC '${e}' stream ${a} transport.`),_.open(),T=!0),Re(Dn,`RPC '${e}' stream ${a} sending:`,N),_.send(N))},Zo:()=>_.close()}),D=(N,L,U)=>{N.listen(L,(B=>{try{U(B)}catch($){setTimeout((()=>{throw $}),0)}}))};return D(_,Ic.EventType.OPEN,(()=>{A||(Re(Dn,`RPC '${e}' stream ${a} transport opened.`),C.o_())})),D(_,Ic.EventType.CLOSE,(()=>{A||(A=!0,Re(Dn,`RPC '${e}' stream ${a} transport closed`),C.a_(),this.E_(_))})),D(_,Ic.EventType.ERROR,(N=>{A||(A=!0,fl(Dn,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),C.a_(new ke(fe.UNAVAILABLE,"The operation could not be completed")))})),D(_,Ic.EventType.MESSAGE,(N=>{var L;if(!A){const U=N.data[0];_t(!!U,16349);const B=U,$=(B==null?void 0:B.error)||((L=B[0])==null?void 0:L.error);if($){Re(Dn,`RPC '${e}' stream ${a} received error:`,$);const ee=$.status;let se=(function(k){const O=cn[k];if(O!==void 0)return jA(O)})(ee),R=$.message;se===void 0&&(se=fe.INTERNAL,R="Unknown error status: "+ee+" with message "+$.message),A=!0,C.a_(new ke(se,R)),_.close()}else Re(Dn,`RPC '${e}' stream ${a} received:`,U),C.u_(U)}})),D(f,nA.STAT_EVENT,(N=>{N.stat===Wp.PROXY?Re(Dn,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===Wp.NOPROXY&&Re(Dn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){return new q5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t,s=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="PersistentStream";class ZA{constructor(e,t,s,a,o,c,f,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new ke(fe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(JT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Re(JT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HL extends ZA{constructor(e,t,s,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Y5(this.serializer,e),s=(function(o){if(!("targetChange"in o))return $e.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?$e.min():c.readTime?bi(c.readTime):$e.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=l0(this.serializer),t.addTarget=(function(o,c){let f;const p=c.target;if(f=n0(p)?{documents:W5(o,p)}:{query:X5(o,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=BA(o,c.resumeToken);const m=r0(o,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo($e.min())>0){f.readTime=yf(o,c.snapshotVersion.toTimestamp());const m=r0(o,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const s=eL(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=l0(this.serializer),t.removeTarget=e,this.q_(t)}}class zL extends ZA{constructor(e,t,s,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Q5(e.writeResults,e.commitTime),s=bi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=l0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>J5(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{}class qL extends FL{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,a0(t,s),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(fe.UNKNOWN,o.toString())}))}Ho(e,t,s,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,a0(t,s),a,c,f,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ke(fe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class KL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="RemoteStore";class $L{constructor(e,t,s,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{ro(this)&&(Re(Za,"Restarting streams for network reachability change."),await(async function(p){const m=Je(p);m.Ea.add(4),await tu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Xf(m)})(this))}))})),this.Ra=new KL(s,a)}}async function Xf(n){if(ro(n))for(const e of n.da)await e(!0)}async function tu(n){for(const e of n.da)await e(!1)}function ew(n,e){const t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ng(t)?tg(t):Nl(t).O_()&&eg(t,e))}function Z0(n,e){const t=Je(n),s=Nl(t);t.Ia.delete(e),s.O_()&&tw(t,e),t.Ia.size===0&&(s.O_()?s.L_():ro(t)&&t.Ra.set("Unknown"))}function eg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nl(n).Y_(e)}function tw(n,e){n.Va.Ue(e),Nl(n).Z_(e)}function tg(n){n.Va=new B5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Nl(n).start(),n.Ra.ua()}function ng(n){return ro(n)&&!Nl(n).x_()&&n.Ia.size>0}function ro(n){return Je(n).Ea.size===0}function nw(n){n.Va=void 0}async function YL(n){n.Ra.set("Online")}async function JL(n){n.Ia.forEach(((e,t)=>{eg(n,e)}))}async function QL(n,e){nw(n),ng(n)?(n.Ra.ha(e),tg(n)):n.Ra.set("Unknown")}async function WL(n,e,t){if(n.Ra.set("Online"),e instanceof GA&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const f of o.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(n,e)}catch(s){Re(Za,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await vf(n,s)}else if(e instanceof Kd?n.Va.Ze(e):e instanceof OA?n.Va.st(e):n.Va.tt(e),!t.isEqual($e.min()))try{const s=await WA(n.localStore);t.compareTo(s)>=0&&await(function(o,c){const f=o.Va.Tt(c);return f.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const v=o.Ia.get(m);v&&o.Ia.set(m,v.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,m)=>{const v=o.Ia.get(p);if(!v)return;o.Ia.set(p,v.withResumeToken(kn.EMPTY_BYTE_STRING,v.snapshotVersion)),tw(o,p);const _=new $r(v.target,p,m,v.sequenceNumber);eg(o,_)})),o.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){Re(Za,"Failed to raise snapshot:",s),await vf(n,s)}}async function vf(n,e,t){if(!wl(e))throw e;n.Ea.add(1),await tu(n),n.Ra.set("Offline"),t||(t=()=>WA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Re(Za,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Xf(n)}))}function sw(n,e){return e().catch((t=>vf(n,t,e)))}async function Zf(n){const e=Je(n),t=sa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j0;for(;XL(e);)try{const a=await DL(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,ZL(e,a)}catch(a){await vf(e,a)}iw(e)&&rw(e)}function XL(n){return ro(n)&&n.Ta.length<10}function ZL(n,e){n.Ta.push(e);const t=sa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function iw(n){return ro(n)&&!sa(n).x_()&&n.Ta.length>0}function rw(n){sa(n).start()}async function e3(n){sa(n).ra()}async function t3(n){const e=sa(n);for(const t of n.Ta)e.ea(t.mutations)}async function n3(n,e,t){const s=n.Ta.shift(),a=K0.from(s,e,t);await sw(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Zf(n)}async function s3(n,e){e&&sa(n).X_&&await(async function(s,a){if((function(c){return j5(c)&&c!==fe.ABORTED})(a.code)){const o=s.Ta.shift();sa(s).B_(),await sw(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,a))),await Zf(s)}})(n,e),iw(n)&&rw(n)}async function QT(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Re(Za,"RemoteStore received new credentials");const s=ro(t);t.Ea.add(3),await tu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xf(t)}async function i3(n,e){const t=Je(n);e?(t.Ea.delete(2),await Xf(t)):e||(t.Ea.add(2),await tu(t),t.Ra.set("Unknown"))}function Nl(n){return n.ma||(n.ma=(function(t,s,a){const o=Je(t);return o.sa(),new HL(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:YL.bind(null,n),t_:JL.bind(null,n),r_:QL.bind(null,n),H_:WL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),ng(n)?tg(n):n.Ra.set("Unknown")):(await n.ma.stop(),nw(n))}))),n.ma}function sa(n){return n.fa||(n.fa=(function(t,s,a){const o=Je(t);return o.sa(),new zL(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:e3.bind(null,n),r_:s3.bind(null,n),ta:t3.bind(null,n),na:n3.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Zf(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(Za,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,s,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=o,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,o){const c=Date.now()+s,f=new sg(e,t,c,a,o);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(n,e){if(nr("AsyncQueue",`${e}: ${n}`),wl(n))return new ke(fe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{static emptySet(e){return new al(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||je.comparator(t.key,s.key):(t,s)=>je.comparator(t.key,s.key),this.keyedMap=kc(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new al;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.ga=new Ft(je.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class yl{constructor(e,t,s,a,o,c,f,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,a,o){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new yl(e,t,al.emptySet(t),c,s,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class a3{constructor(){this.queries=XT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Je(t),o=a.queries;a.queries=XT(),o.forEach(((c,f)=>{for(const p of f.Sa)p.onError(s)}))})(this,new ke(fe.ABORTED,"Firestore shutting down"))}}function XT(){return new io((n=>wA(n)),Kf)}async function aw(n,e){const t=Je(n);let s=3;const a=e.query;let o=t.queries.get(a);o?!o.ba()&&e.Da()&&(s=2):(o=new r3,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(a,!0);break;case 1:o.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=ig(c,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&rg(t)}async function ow(n,e){const t=Je(n),s=e.query;let a=3;const o=t.queries.get(s);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function o3(n,e){const t=Je(n);let s=!1;for(const a of e){const o=a.query,c=t.queries.get(o);if(c){for(const f of c.Sa)f.Fa(a)&&(s=!0);c.wa=a}}s&&rg(t)}function l3(n,e,t){const s=Je(n),a=s.queries.get(e);if(a)for(const o of a.Sa)o.onError(t);s.queries.delete(e)}function rg(n){n.Ca.forEach((e=>{e.next()}))}var d0,ZT;(ZT=d0||(d0={})).Ma="default",ZT.Cache="cache";class lw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new yl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==d0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.key=e}}class uw{constructor(e){this.key=e}}class c3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=NA(e),this.tu=new al(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new WT,a=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const T=a.get(v),A=$f(this.query,_)?_:null,C=!!T&&this.mutatedKeys.has(T.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let N=!1;T&&A?T.data.isEqual(A.data)?C!==D&&(s.track({type:3,doc:A}),N=!0):this.su(T,A)||(s.track({type:2,doc:A}),N=!0,(p&&this.eu(A,p)>0||m&&this.eu(A,m)<0)&&(f=!0)):!T&&A?(s.track({type:0,doc:A}),N=!0):T&&!A&&(s.track({type:1,doc:T}),N=!0,(p||m)&&(f=!0)),N&&(A?(c=c.add(A),o=D?o.add(v):o.delete(v)):(c=c.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),o=o.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:f,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,_)=>(function(A,C){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Rt:N})}};return D(A)-D(C)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,m=p!==this.Za;return this.Za=p,c.length!==0||m?{snapshot:new yl(this.query,e.tu,o,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new WT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new uw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new cw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=lt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ag="SyncEngine";class u3{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class d3{constructor(e){this.key=e,this.hu=!1}}class f3{constructor(e,t,s,a,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new io((f=>wA(f)),Kf),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(je.comparator),this.Au=new Map,this.Ru=new J0,this.Vu={},this.mu=new Map,this.fu=gl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h3(n,e,t=!0){const s=gw(n);let a;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await dw(s,e,t,!0),a}async function m3(n,e){const t=gw(n);await dw(t,e,!0,!1)}async function dw(n,e,t,s){const a=await PL(n.localStore,vi(e)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let f;return s&&(f=await p3(n,e,o,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&ew(n.remoteStore,a),f}async function p3(n,e,t,s,a){n.pu=(_,T,A)=>(async function(D,N,L,U){let B=N.view.ru(L);B.Cs&&(B=await qT(D.localStore,N.query,!1).then((({documents:R})=>N.view.ru(R,B))));const $=U&&U.targetChanges.get(N.targetId),ee=U&&U.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges(B,D.isPrimaryClient,$,ee);return tE(D,N.targetId,se.au),se.snapshot})(n,_,T,A);const o=await qT(n.localStore,e,!0),c=new c3(e,o.Qs),f=c.ru(o.documents),p=eu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),m=c.applyChanges(f,n.isPrimaryClient,p);tE(n,t,m.au);const v=new u3(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function g3(n,e,t){const s=Je(n),a=s.Tu.get(e),o=s.Iu.get(a.targetId);if(o.length>1)return s.Iu.set(a.targetId,o.filter((c=>!Kf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await c0(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Z0(s.remoteStore,a.targetId),f0(s,a.targetId)})).catch(Al)):(f0(s,a.targetId),await c0(s.localStore,a.targetId,!0))}async function y3(n,e){const t=Je(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Z0(t.remoteStore,s.targetId))}async function x3(n,e,t){const s=A3(n);try{const a=await(function(c,f){const p=Je(c),m=jt.now(),v=f.reduce(((A,C)=>A.add(C.key)),lt());let _,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let C=sr(),D=lt();return p.Ns.getEntries(A,v).next((N=>{C=N,C.forEach(((L,U)=>{U.isValidDocument()||(D=D.add(L))}))})).next((()=>p.localDocuments.getOverlayedDocuments(A,C))).next((N=>{_=N;const L=[];for(const U of f){const B=D5(U,_.get(U.key).overlayedDocument);B!=null&&L.push(new la(U.key,B,xA(B.value.mapValue),Ps.exists(!0)))}return p.mutationQueue.addMutationBatch(A,m,L,f)})).next((N=>{T=N;const L=N.applyToLocalDocumentSet(_,D);return p.documentOverlayCache.saveOverlays(A,N.batchId,L)}))})).then((()=>({batchId:T.batchId,changes:IA(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,f,p){let m=c.Vu[c.currentUser.toKey()];m||(m=new Ft(ot)),m=m.insert(f,p),c.Vu[c.currentUser.toKey()]=m})(s,a.batchId,t),await nu(s,a.changes),await Zf(s.remoteStore)}catch(a){const o=ig(a,"Failed to persist write");t.reject(o)}}async function fw(n,e){const t=Je(n);try{const s=await RL(t.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=t.Au.get(o);c&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_t(c.hu,14607):a.removedDocuments.size>0&&(_t(c.hu,42227),c.hu=!1))})),await nu(t,s,e)}catch(s){await Al(s)}}function eE(n,e,t){const s=Je(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((o,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const p=Je(c);p.onlineState=f;let m=!1;p.queries.forEach(((v,_)=>{for(const T of _.Sa)T.va(f)&&(m=!0)})),m&&rg(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function v3(n,e,t){const s=Je(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),o=a&&a.key;if(o){let c=new Ft(je.comparator);c=c.insert(o,Ln.newNoDocument(o,$e.min()));const f=lt().add(o),p=new Qf($e.min(),new Map,new Ft(ot),c,f);await fw(s,p),s.du=s.du.remove(o),s.Au.delete(e),og(s)}else await c0(s.localStore,e,!1).then((()=>f0(s,e,t))).catch(Al)}async function b3(n,e){const t=Je(n),s=e.batch.batchId;try{const a=await kL(t.localStore,e);mw(t,s,null),hw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await nu(t,a)}catch(a){await Al(a)}}async function _3(n,e,t){const s=Je(n);try{const a=await(function(c,f){const p=Je(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return p.mutationQueue.lookupMutationBatch(m,f).next((_=>(_t(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(m,_)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>p.localDocuments.getDocuments(m,v)))}))})(s.localStore,e);mw(s,e,t),hw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await nu(s,a)}catch(a){await Al(a)}}function hw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function mw(n,e,t){const s=Je(n);let a=s.Vu[s.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function f0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||pw(n,s)}))}function pw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Z0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),og(n))}function tE(n,e,t){for(const s of t)s instanceof cw?(n.Ru.addReference(s.key,e),T3(n,s)):s instanceof uw?(Re(ag,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||pw(n,s.key)):Ge(19791,{wu:s})}function T3(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Re(ag,"New document in limbo: "+t),n.Eu.add(s),og(n))}function og(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new je(Pt.fromString(e)),s=n.fu.next();n.Au.set(s,new d3(t)),n.du=n.du.insert(t,s),ew(n.remoteStore,new $r(vi(z0(t.path)),s,"TargetPurposeLimboResolution",zf.ce))}}async function nu(n,e,t){const s=Je(n),a=[],o=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{c.push(s.pu(p,e,t).then((m=>{var v;if((m||t)&&s.isPrimaryClient){const _=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(m){a.push(m);const _=W0.As(p.targetId,m);o.push(_)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(p,m){const v=Je(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>me.forEach(m,(T=>me.forEach(T.Es,(A=>v.persistence.referenceDelegate.addReference(_,T.targetId,A))).next((()=>me.forEach(T.ds,(A=>v.persistence.referenceDelegate.removeReference(_,T.targetId,A)))))))))}catch(_){if(!wl(_))throw _;Re(X0,"Failed to update sequence numbers: "+_)}for(const _ of m){const T=_.targetId;if(!_.fromCache){const A=v.Ms.get(T),C=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(C);v.Ms=v.Ms.insert(T,D)}}})(s.localStore,o))}async function E3(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Re(ag,"User change. New user:",e.toKey());const s=await QA(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((f=>{f.forEach((p=>{p.reject(new ke(fe.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await nu(t,s.Ls)}}function S3(n,e){const t=Je(n),s=t.Au.get(e);if(s&&s.hu)return lt().add(s.key);{let a=lt();const o=t.Iu.get(e);if(!o)return a;for(const c of o){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function gw(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v3.bind(null,e),e.Pu.H_=o3.bind(null,e.eventManager),e.Pu.yu=l3.bind(null,e.eventManager),e}function A3(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_3.bind(null,e),e}class bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return IL(this.persistence,new wL,e.initialUser,this.serializer)}Cu(e){return new JA(Q0.mi,this.serializer)}Du(e){return new UL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bf.provider={build:()=>new bf};class w3 extends bf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_t(this.persistence.referenceDelegate instanceof xf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new dL(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new JA((s=>xf.mi(s,t)),this.serializer)}}class h0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>eE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=E3.bind(null,this.syncEngine),await i3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new a3})()}createDatastore(e){const t=Wf(e.databaseInfo.databaseId),s=(function(o){return new BL(o)})(e.databaseInfo);return(function(o,c,f,p){return new qL(o,c,f,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,o,c,f){return new $L(s,a,o,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>eE(this.syncEngine,t,0)),(function(){return YT.v()?new YT:new VL})())}createSyncEngine(e,t){return(function(a,o,c,f,p,m,v){const _=new f3(a,o,c,f,p,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const o=Je(a);Re(Za,"RemoteStore shutting down."),o.Ea.add(5),await tu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}h0.provider={build:()=>new h0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class N3{constructor(e,t,s,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Pn.UNAUTHENTICATED,this.clientId=V0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async c=>{Re(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(Re(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ig(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ap(n,e){n.asyncQueue.verifyOperationInProgress(),Re(ia,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await QA(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function nE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await C3(n);Re(ia,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>QT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>QT(e.remoteStore,a))),n._onlineComponents=e}async function C3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(ia,"Using user provided OfflineComponentProvider");try{await Ap(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===fe.FAILED_PRECONDITION||a.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;fl("Error using user provided cache. Falling back to memory cache: "+t),await Ap(n,new bf)}}else Re(ia,"Using default OfflineComponentProvider"),await Ap(n,new w3(void 0));return n._offlineComponents}async function xw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(ia,"Using user provided OnlineComponentProvider"),await nE(n,n._uninitializedComponentsProvider._online)):(Re(ia,"Using default OnlineComponentProvider"),await nE(n,new h0))),n._onlineComponents}function I3(n){return xw(n).then((e=>e.syncEngine))}async function vw(n){const e=await xw(n),t=e.eventManager;return t.onListen=h3.bind(null,e.syncEngine),t.onUnlisten=g3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=m3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=y3.bind(null,e.syncEngine),t}function k3(n,e,t={}){const s=new Xi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,p,m){const v=new yw({next:T=>{v.Nu(),c.enqueueAndForget((()=>ow(o,_)));const A=T.docs.has(f);!A&&T.fromCache?m.reject(new ke(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&p&&p.source==="server"?m.reject(new ke(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),_=new lw(z0(f.path),v,{includeMetadataChanges:!0,qa:!0});return aw(o,_)})(await vw(n),n.asyncQueue,e,t,s))),s.promise}function R3(n,e,t={}){const s=new Xi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,f,p,m){const v=new yw({next:T=>{v.Nu(),c.enqueueAndForget((()=>ow(o,_))),T.fromCache&&p.source==="server"?m.reject(new ke(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),_=new lw(f,v,{includeMetadataChanges:!0,qa:!0});return aw(o,_)})(await vw(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firestore.googleapis.com",iE=!0;class rE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_w,this.ssl=iE}else this.host=e.host,this.ssl=e.ssl??iE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cL)throw new ke(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ke(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ke(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ke(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new V6;switch(s.type){case"firstParty":return new B6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ke(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=sE.get(t);s&&(Re("ComponentProvider","Removing Datastore"),sE.delete(t),s.terminate())})(this),Promise.resolve()}}function M3(n,e,t,s={}){var m;n=ni(n,eh);const a=Tl(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(qS(`https://${f}`),KS("Firestore",!0)),o.host!==_w&&o.host!==f&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...o,host:f,ssl:a,emulatorOptions:s};if(!Qa(p,c)&&(n._setSettings(p),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=Pn.MOCK_USER;else{v=lP(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new ke(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Pn(T)}n._authCredentials=new j6(new aA(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Cl(this.firestore,e,this._query)}}class nn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Wc(t,nn._jsonSchema))return new nn(e,s||null,new je(Pt.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:dn("string",nn._jsonSchemaVersion),referencePath:dn("string")};class Xr extends Cl{constructor(e,t,s){super(e,t,z0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new je(e))}withConverter(e){return new Xr(this.firestore,e,this._path)}}function su(n,e,...t){if(n=In(n),oA("collection","path",e),n instanceof eh){const s=Pt.fromString(e,...t);return xT(s),new Xr(n,null,s)}{if(!(n instanceof nn||n instanceof Xr))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Pt.fromString(e,...t));return xT(s),new Xr(n.firestore,null,s)}}function ca(n,e,...t){if(n=In(n),arguments.length===1&&(e=V0.newId()),oA("doc","path",e),n instanceof eh){const s=Pt.fromString(e,...t);return yT(s),new nn(n,null,new je(s))}{if(!(n instanceof nn||n instanceof Xr))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Pt.fromString(e,...t));return yT(s),new nn(n.firestore,n instanceof Xr?n.converter:null,new je(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="AsyncQueue";class oE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XA(this,"async_queue_retry"),this._c=()=>{const s=Sp();s&&Re(aE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wl(e))throw e;Re(aE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",lE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=sg.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&Ge(47125,{Pc:lE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function lE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ao extends eh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new oE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oE(e),this._firestoreClient=void 0,await e}}}function D3(n,e){const t=typeof n=="object"?n:QS(),s=typeof n=="string"?n:df,a=L0(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const o=aP("firestore");o&&M3(a,...o)}return a}function lg(n){if(n._terminated)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||P3(n),n._firestoreClient}function P3(n){var s,a,o;const e=n._freezeSettings(),t=(function(f,p,m,v){return new i5(f,p,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,bw(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new N3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(kn.fromBase64String(e))}catch(t){throw new ke(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ms(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,Ms._jsonSchema))return Ms.fromBase64String(e.bytes)}}Ms._jsonSchemaVersion="firestore/bytes/1.0",Ms._jsonSchema={type:dn("string",Ms._jsonSchemaVersion),bytes:dn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,_i._jsonSchema))return new _i(e.latitude,e.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:dn("string",_i._jsonSchemaVersion),latitude:dn("number"),longitude:dn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ti(e.vectorValues);throw new ke(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:dn("string",Ti._jsonSchemaVersion),vectorValues:dn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/^__.*__$/;class U3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new la(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class Tw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new la(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ew(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{Ac:n})}}class ug{constructor(e,t,s,a,o,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ug({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _f(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ew(this.Ac)&&L3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class V3{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Wf(e)}Cc(e,t,s,a=!1){return new ug({Ac:e,methodName:t,Dc:s,path:Cn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(n){const e=n._freezeSettings(),t=Wf(n._databaseId);return new V3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Sw(n,e,t,s,a,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,a);dg("Data must be an object, but it was:",c,s);const f=Aw(s,c);let p,m;if(o.merge)p=new ps(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const v=[];for(const _ of o.mergeFields){const T=m0(e,_,t);if(!c.contains(T))throw new ke(fe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Nw(v,T)||v.push(T)}p=new ps(v),m=c.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,m=c.fieldTransforms;return new U3(new ss(f),p,m)}class sh extends cg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function j3(n,e,t,s){const a=n.Cc(1,e,t);dg("Data must be an object, but it was:",a,s);const o=[],c=ss.empty();oa(s,((p,m)=>{const v=fg(e,p,t);m=In(m);const _=a.yc(v);if(m instanceof sh)o.push(v);else{const T=iu(m,_);T!=null&&(o.push(v),c.set(v,T))}}));const f=new ps(o);return new Tw(c,f,a.fieldTransforms)}function O3(n,e,t,s,a,o){const c=n.Cc(1,e,t),f=[m0(e,s,t)],p=[a];if(o.length%2!=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)f.push(m0(e,o[T])),p.push(o[T+1]);const m=[],v=ss.empty();for(let T=f.length-1;T>=0;--T)if(!Nw(m,f[T])){const A=f[T];let C=p[T];C=In(C);const D=c.yc(A);if(C instanceof sh)m.push(A);else{const N=iu(C,D);N!=null&&(m.push(A),v.set(A,N))}}const _=new ps(m);return new Tw(v,_,c.fieldTransforms)}function G3(n,e,t,s=!1){return iu(t,n.Cc(s?4:3,e))}function iu(n,e){if(ww(n=In(n)))return dg("Unsupported field value:",e,n),Aw(n,e);if(n instanceof cg)return(function(s,a){if(!Ew(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const o=[];let c=0;for(const f of s){let p=iu(f,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}})(n,e)}return(function(s,a){if((s=In(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return N5(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=jt.fromDate(s);return{timestampValue:yf(a.serializer,o)}}if(s instanceof jt){const o=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:yf(a.serializer,o)}}if(s instanceof _i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ms)return{bytesValue:BA(a.serializer,s._byteString)};if(s instanceof nn){const o=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Y0(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Ti)return(function(c,f){return{mapValue:{fields:{[gA]:{stringValue:yA},[ff]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw f.Sc("VectorValues must only contain numeric values.");return F0(f.serializer,m)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Hf(s)}`)})(n,e)}function Aw(n,e){const t={};return uA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(n,((s,a)=>{const o=iu(a,e.mc(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function ww(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jt||n instanceof _i||n instanceof Ms||n instanceof nn||n instanceof cg||n instanceof Ti)}function dg(n,e,t){if(!ww(t)||!lA(t)){const s=Hf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function m0(n,e,t){if((e=In(e))instanceof th)return e._internalPath;if(typeof e=="string")return fg(n,e);throw _f("Field path arguments must be of type string or ",n,!1,void 0,t)}const B3=new RegExp("[~\\*/\\[\\]]");function fg(n,e,t){if(e.search(B3)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new th(...e.split("."))._internalPath}catch{throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _f(n,e,t,s,a){const o=s&&!s.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${s}`),c&&(p+=` in document ${a}`),p+=")"),new ke(fe.INVALID_ARGUMENT,f+n+p)}function Nw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,s,a,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class H3 extends Cw{data(){return super.data()}}function hg(n,e){return typeof e=="string"?fg(n,e):e instanceof th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mg{}class F3 extends mg{}function pg(n,e,...t){let s=[];e instanceof mg&&s.push(e),s=s.concat(t),(function(o){const c=o.filter((p=>p instanceof gg)).length,f=o.filter((p=>p instanceof ih)).length;if(c>1||c>0&&f>0)throw new ke(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class ih extends F3{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ih(e,t,s)}_apply(e){const t=this._parse(e);return kw(e._query,t),new Cl(e.firestore,e.converter,s0(e._query,t))}_parse(e){const t=nh(e.firestore);return(function(o,c,f,p,m,v,_){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){uE(_,v);const C=[];for(const D of _)C.push(cE(p,o,D));T={arrayValue:{values:C}}}else T=cE(p,o,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||uE(_,v),T=G3(f,c,_,v==="in"||v==="not-in");return un.create(m,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Iw(n,e,t){const s=e,a=hg("where",n);return ih._create(a,s,t)}class gg extends mg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,o){let c=a;const f=o.getFlattenedFilters();for(const p of f)kw(c,p),c=s0(c,p)})(e._query,t),new Cl(e.firestore,e.converter,s0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cE(n,e,t){if(typeof(t=In(t))=="string"){if(t==="")throw new ke(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AA(e)&&t.indexOf("/")!==-1)throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Pt.fromString(t));if(!je.isDocumentKey(s))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wT(n,new je(s))}if(t instanceof nn)return wT(n,t._key);throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(t)}.`)}function uE(n,e){if(!Array.isArray(n)||n.length===0)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kw(n,e){const t=(function(a,o){for(const c of a)for(const f of c.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ke(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class q3{convertValue(e,t="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return oa(e,((a,o)=>{s[a]=this.convertValue(o,t)})),s}convertVectorValue(e){var s,a,o;const t=(o=(a=(s=e.fields)==null?void 0:s[ff].arrayValue)==null?void 0:a.values)==null?void 0:o.map((c=>tn(c.doubleValue)));return new Ti(t)}convertGeoPoint(e){return new _i(tn(e.latitude),tn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=qf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const t=ea(e);return new jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Pt.fromString(e);_t($A(s),9688,{name:e});const a=new zc(s.get(1),s.get(3)),o=new je(s.popFirst(5));return a.isEqual(t)||nr(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Mc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ya extends Cw{constructor(e,t,s,a,o,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(hg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ya._jsonSchema={type:dn("string",Ya._jsonSchemaVersion),bundleSource:dn("string","DocumentSnapshot"),bundleName:dn("string"),bundle:dn("string")};class $d extends Ya{data(e={}){return super.data(e)}}class ol{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Mc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new $d(this._firestore,this._userDataWriter,s.key,s,new Mc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const p=new $d(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Mc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>o||f.type!==3)).map((f=>{const p=new $d(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Mc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,v=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:K3(f.type),doc:p,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ol._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=V0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function K3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n){n=ni(n,nn);const e=ni(n.firestore,ao);return k3(lg(e),n._key).then((t=>Q3(e,n,t)))}ol._jsonSchemaVersion="firestore/querySnapshot/1.0",ol._jsonSchema={type:dn("string",ol._jsonSchemaVersion),bundleSource:dn("string","QuerySnapshot"),bundleName:dn("string"),bundle:dn("string")};class Mw extends q3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function rh(n){n=ni(n,Cl);const e=ni(n.firestore,ao),t=lg(e),s=new Mw(e);return z3(n._query),R3(t,n._query).then((a=>new ol(e,s,n,a)))}function yg(n,e,t){n=ni(n,nn);const s=ni(n.firestore,ao),a=Rw(n.converter,e,t);return ah(s,[Sw(nh(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ps.none())])}function Y3(n,e,t,...s){n=ni(n,nn);const a=ni(n.firestore,ao),o=nh(a);let c;return c=typeof(e=In(e))=="string"||e instanceof th?O3(o,"updateDoc",n._key,e,t,s):j3(o,"updateDoc",n._key,e),ah(a,[c.toMutation(n._key,Ps.exists(!0))])}function Dw(n){return ah(ni(n.firestore,ao),[new q0(n._key,Ps.none())])}function J3(n,e){const t=ni(n.firestore,ao),s=ca(n),a=Rw(n.converter,e);return ah(t,[Sw(nh(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Ps.exists(!1))]).then((()=>s))}function ah(n,e){return(function(s,a){const o=new Xi;return s.asyncQueue.enqueueAndForget((async()=>x3(await I3(s),a,o))),o.promise})(lg(n),e)}function Q3(n,e,t){const s=t.docs.get(e._key),a=new Mw(n);return new Ya(n,a,e._key,s,new Mc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Sl=a})(El),dl(new Wa("firestore",((s,{instanceIdentifier:a,options:o})=>{const c=s.getProvider("app").getImmediate(),f=new ao(new O6(s.getProvider("auth-internal")),new H6(c,s.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ke(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zc(m.options.projectId,v)})(c,a),c);return o={useFetchStreams:t,...o},f._setSettings(o),f}),"PUBLIC").setMultipleInstances(!0)),Qr(hT,mT,e),Qr(hT,mT,"esm2020")})();function Pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W3=Pw,Lw=new Jc("auth","Firebase",Pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=new D0("@firebase/auth");function X3(n,...e){Tf.logLevel<=at.WARN&&Tf.warn(`Auth (${El}): ${n}`,...e)}function Yd(n,...e){Tf.logLevel<=at.ERROR&&Tf.error(`Auth (${El}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(n,...e){throw vg(n,...e)}function ti(n,...e){return vg(n,...e)}function xg(n,e,t){const s={...W3(),[e]:t};return new Jc("auth","Firebase",s).create(e,{appName:n.name})}function Ja(n){return xg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z3(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ai(n,"argument-error"),xg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return Lw.create(n,...e)}function He(n,e,...t){if(!n)throw vg(e,...t)}function Ji(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yd(e),new Error(e)}function ir(n,e){n||Ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function eU(){return dE()==="http:"||dE()==="https:"}function dE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eU()||mP()||"connection"in navigator)?navigator.onLine:!0}function nU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile=dP()||pP()}get(){return tU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n,e){ir(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rU=new ru(3e4,6e4);function _g(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Il(n,e,t,s,a={}){return Vw(n,a,async()=>{let o={},c={};s&&(e==="GET"?c=s:o={body:JSON.stringify(s)});const f=Qc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...o};return hP()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Tl(n.emulatorConfig.host)&&(m.credentials="include"),Uw.fetch()(await jw(n,n.config.apiHost,t,f),m)})}async function Vw(n,e,t){n._canInitEmulator=!1;const s={...sU,...e};try{const a=new oU(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw jd(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const f=o.ok?c.errorMessage:c.error.message,[p,m]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw jd(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw jd(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw jd(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw xg(n,v,m);Ai(n,v)}}catch(a){if(a instanceof lr)throw a;Ai(n,"network-request-failed",{message:String(a)})}}async function aU(n,e,t,s,a={}){const o=await Il(n,e,t,s,a);return"mfaPendingCredential"in o&&Ai(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function jw(n,e,t,s){const a=`${e}${t}?${s}`,o=n,c=o.config.emulator?bg(n.config,a):`${n.config.apiScheme}://${a}`;return iU.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class oU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ti(this.auth,"network-request-failed")),rU.get())})}}function jd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=ti(n,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(n,e){return Il(n,"POST","/v1/accounts:delete",e)}async function Ef(n,e){return Il(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cU(n,e=!1){const t=In(n),s=await t.getIdToken(e),a=Tg(s);He(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:a,token:s,authTime:jc(wp(a.auth_time)),issuedAtTime:jc(wp(a.iat)),expirationTime:jc(wp(a.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function wp(n){return Number(n)*1e3}function Tg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{const a=BS(t);return a?JSON.parse(a):(Yd("Failed to decode base64 JWT payload"),null)}catch(a){return Yd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function fE(n){const e=Tg(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof lr&&uU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function uU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jc(this.lastLoginAt),this.creationTime=jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(n){var _;const e=n.auth,t=await n.getIdToken(),s=await $c(n,Ef(e,{idToken:t}));He(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const o=(_=a.providerUserInfo)!=null&&_.length?Ow(a.providerUserInfo):[],c=hU(n.providerData,o),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),m=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new g0(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function fU(n){const e=In(n);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hU(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Ow(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mU(n,e){const t=await Vw(n,{},async()=>{const s=Qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await jw(n,a,"/v1/token",`key=${o}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&Tl(n.emulatorConfig.host)&&(p.credentials="include"),Uw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pU(n,e){return Il(n,"POST","/v2/accounts:revokeToken",_g(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(e.length!==0,"internal-error");const t=fE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:o}=await mU(e,t);this.updateTokensAndExpiration(s,a,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:o}=t,c=new ll;return s&&(He(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(He(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(He(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new dU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new g0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await $c(this,this.stsTokenManager.getToken(this.auth,e));return He(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cU(this,e)}reload(){return fU(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Sf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ws(this.auth.app))return Promise.reject(Ja(this.auth));const e=await this.getIdToken();return await $c(this,lU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:A,providerData:C,stsTokenManager:D}=t;He(_&&D,e,"internal-error");const N=ll.fromJSON(this.name,D);He(typeof _=="string",e,"internal-error"),zr(s,e.name),zr(a,e.name),He(typeof T=="boolean",e,"internal-error"),He(typeof A=="boolean",e,"internal-error"),zr(o,e.name),zr(c,e.name),zr(f,e.name),zr(p,e.name),zr(m,e.name),zr(v,e.name);const L=new Xs({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:A,photoURL:c,phoneNumber:o,tenantId:f,stsTokenManager:N,createdAt:m,lastLoginAt:v});return C&&Array.isArray(C)&&(L.providerData=C.map(U=>({...U}))),p&&(L._redirectEventId=p),L}static async _fromIdTokenResponse(e,t,s=!1){const a=new ll;a.updateFromServerResponse(t);const o=new Xs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Sf(o),o}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];He(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?Ow(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),f=new ll;f.updateFromIdToken(s);const p=new Xs({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new g0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;function Qi(n){ir(n instanceof Function,"Expected a class definition");let e=hE.get(n);return e?(ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gw.type="NONE";const mE=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n,e,t){return`firebase:${n}:${e}:${t}`}class cl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:o}=this.auth;this.fullUserKey=Jd(this.userKey,a.apiKey,o),this.fullPersistenceKey=Jd("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ef(this.auth,{idToken:e}).catch(()=>{});return t?Xs._fromGetAccountInfoResponse(this.auth,t,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new cl(Qi(mE),e,s);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||Qi(mE);const c=Jd(s,e.config.apiKey,e.name);let f=null;for(const m of t)try{const v=await m._get(c);if(v){let _;if(typeof v=="string"){const T=await Ef(e,{idToken:v}).catch(()=>{});if(!T)break;_=await Xs._fromGetAccountInfoResponse(e,T,v)}else _=Xs._fromJSON(e,v);m!==o&&(f=_),o=m;break}}catch{}const p=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new cl(o,e,s):(o=p[0],f&&await o._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new cl(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kw(e))return"Blackberry";if($w(e))return"Webos";if(Hw(e))return"Safari";if((e.includes("chrome/")||zw(e))&&!e.includes("edge/"))return"Chrome";if(qw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Bw(n=Vn()){return/firefox\//i.test(n)}function Hw(n=Vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zw(n=Vn()){return/crios\//i.test(n)}function Fw(n=Vn()){return/iemobile/i.test(n)}function qw(n=Vn()){return/android/i.test(n)}function Kw(n=Vn()){return/blackberry/i.test(n)}function $w(n=Vn()){return/webos/i.test(n)}function Eg(n=Vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gU(n=Vn()){var e;return Eg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function yU(){return gP()&&document.documentMode===10}function Yw(n=Vn()){return Eg(n)||qw(n)||$w(n)||Kw(n)||/windows phone/i.test(n)||Fw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(n,e=[]){let t;switch(n){case"Browser":t=pE(Vn());break;case"Worker":t=`${pE(Vn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${El}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((c,f)=>{try{const p=e(o);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n,e={}){return Il(n,"GET","/v2/passwordPolicy",_g(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=6;class _U{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gE(this),this.idTokenSubscription=new gE(this),this.beforeStateQueue=new xU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qi(t)),this._initializationPromise=this.queue(async()=>{var s,a,o;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ef(this,{idToken:e}),s=await Xs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ws(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(s=p.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ws(this.app))return Promise.reject(Ja(this));const t=e?In(e):null;return t&&He(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ws(this.app)?Promise.reject(Ja(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ws(this.app)?Promise.reject(Ja(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vU(this),t=new _U(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await pU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qi(e)||this._popupRedirectResolver;He(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(f,this,"internal-error"),f.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ws(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&X3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function oh(n){return In(n)}class gE{constructor(e){this.auth=e,this.observer=null,this.addObserver=SP(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EU(n){Sg=n}function SU(n){return Sg.loadJS(n)}function AU(){return Sg.gapiScript}function wU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(n,e){const t=L0(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(Qa(o,e??{}))return a;Ai(a,"already-initialized")}return t.initialize({options:e})}function CU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Qi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function IU(n,e,t){const s=oh(n);He(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,o=Qw(e),{host:c,port:f}=kU(e),p=f===null?"":`:${f}`,m={url:`${o}//${c}${p}/`},v=Object.freeze({host:c,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){He(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),He(Qa(m,s.config.emulator)&&Qa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Tl(c)?(qS(`${o}//${c}${p}`),KS("Auth",!0)):RU()}function Qw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kU(n){const e=Qw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const o=a[1];return{host:o,port:yE(s.substr(o.length+1))}}else{const[o,c]=s.split(":");return{host:o,port:yE(c)}}}function yE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function RU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,t){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e){return aU(n,"POST","/v1/accounts:signInWithIdp",_g(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="http://localhost";class eo extends Ww{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...o}=t;if(!s||!a)return null;const c=new eo(s,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ul(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:MU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends au{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eo._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Yi.credential(t,s)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends au{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends au{constructor(){super("twitter.com")}static credential(e,t){return eo._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Kr.credential(t,s)}catch{return null}}}Kr.TWITTER_SIGN_IN_METHOD="twitter.com";Kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const o=await Xs._fromIdTokenResponse(e,s,a),c=xE(s);return new xl({user:o,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=xE(s);return new xl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function xE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends lr{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Af(e,t,s,a)}}function Xw(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(n,o,e,s):o})}async function DU(n,e,t=!1){const s=await $c(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return xl._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e,t=!1){const{auth:s}=n;if(Ws(s.app))return Promise.reject(Ja(s));const a="reauthenticate";try{const o=await $c(n,Xw(s,a,e,n),t);He(o.idToken,s,"internal-error");const c=Tg(o.idToken);He(c,s,"internal-error");const{sub:f}=c;return He(n.uid===f,s,"user-mismatch"),xl._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ai(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(n,e,t=!1){if(Ws(n.app))return Promise.reject(Ja(n));const s="signIn",a=await Xw(n,s,e),o=await xl._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(o.user),o}function UU(n,e,t,s){return In(n).onIdTokenChanged(e,t,s)}function VU(n,e,t){return In(n).beforeAuthStateChanged(e,t)}function jU(n,e,t,s){return In(n).onAuthStateChanged(e,t,s)}function OU(n){return In(n).signOut()}const wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=1e3,BU=10;class e1 extends Zw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},o=this.storage.getItem(s);yU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,BU):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},GU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}e1.type="LOCAL";const HU=e1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1 extends Zw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}t1.type="SESSION";const n1=t1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new lh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(c).map(async m=>m(t.origin,o)),p=await zU(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((f,p)=>{const m=wg("",20);a.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(T.data.response);break;default:clearTimeout(v),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}function qU(n){Ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function KU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $U(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function YU(){return s1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="firebaseLocalStorageDb",JU=1,Nf="firebaseLocalStorage",r1="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ch(n,e){return n.transaction([Nf],e?"readwrite":"readonly").objectStore(Nf)}function QU(){const n=indexedDB.deleteDatabase(i1);return new ou(n).toPromise()}function y0(){const n=indexedDB.open(i1,JU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Nf,{keyPath:r1})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Nf)?e(s):(s.close(),await QU(),e(await y0()))})})}async function vE(n,e,t){const s=ch(n,!0).put({[r1]:e,value:t});return new ou(s).toPromise()}async function WU(n,e){const t=ch(n,!1).get(e),s=await new ou(t).toPromise();return s===void 0?null:s.value}function bE(n,e){const t=ch(n,!0).delete(e);return new ou(t).toPromise()}const XU=800,ZU=3;class a1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>ZU)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(YU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await KU(),!this.activeServiceWorker)return;this.sender=new FU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$U()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await y0();return await vE(e,wf,"1"),await bE(e,wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>vE(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>WU(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=ch(a,!1).getAll();return new ou(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a1.type="LOCAL";const eV=a1;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(n,e){return e?Qi(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends Ww{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tV(n){return LU(n.auth,new Ng(n),n.bypassAuthState)}function nV(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),PU(t,new Ng(n),n.bypassAuthState)}async function sV(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),DU(t,new Ng(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,s,a,o=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:o,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tV;case"linkViaPopup":case"linkViaRedirect":return sV;case"reauthViaPopup":case"reauthViaRedirect":return nV;default:Ai(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new ru(2e3,1e4);async function rV(n,e,t){if(Ws(n.app))return Promise.reject(ti(n,"operation-not-supported-in-this-environment"));const s=oh(n);Z3(n,e,Ag);const a=o1(s,t);return new Ka(s,"signInViaPopup",e,a).executeNotNull()}class Ka extends l1{constructor(e,t,s,a,o){super(e,t,a,o),this.provider=s,this.authWindow=null,this.pollId=null,Ka.currentPopupAction&&Ka.currentPopupAction.cancel(),Ka.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ka.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iV.get())};e()}}Ka.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="pendingRedirect",Qd=new Map;class oV extends l1{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Qd.get(this.auth._key());if(!e){try{const s=await lV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Qd.set(this.auth._key(),e)}return this.bypassAuthState||Qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lV(n,e){const t=dV(e),s=uV(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function cV(n,e){Qd.set(n._key(),e)}function uV(n){return Qi(n._redirectPersistence)}function dV(n){return Jd(aV,n.config.apiKey,n.name)}async function fV(n,e,t=!1){if(Ws(n.app))return Promise.reject(Ja(n));const s=oh(n),a=o1(s,e),c=await new oV(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=600*1e3;class mV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!c1(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(ti(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hV&&this.cachedEventUids.clear(),this.cachedEventUids.has(_E(e))}saveEventToCache(e){this.cachedEventUids.add(_E(e)),this.lastProcessedEventTime=Date.now()}}function _E(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function c1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(n,e={}){return Il(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xV=/^https?/;async function vV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await gV(n);for(const t of e)try{if(bV(t))return}catch{}Ai(n,"unauthorized-domain")}function bV(n){const e=p0(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!xV.test(t))return!1;if(yV.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new ru(3e4,6e4);function TE(){const n=Ei().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TV(n){return new Promise((e,t)=>{var a,o,c;function s(){TE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TE(),t(ti(n,"network-request-failed"))},timeout:_V.get()})}if((o=(a=Ei().gapi)==null?void 0:a.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Ei().gapi)!=null&&c.load)s();else{const f=wU("iframefcb");return Ei()[f]=()=>{gapi.load?s():t(ti(n,"network-request-failed"))},SU(`${AU()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Wd=null,e})}let Wd=null;function EV(n){return Wd=Wd||TV(n),Wd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=new ru(5e3,15e3),AV="__/auth/iframe",wV="emulator/auth/iframe",NV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IV(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bg(e,wV):`https://${n.config.authDomain}/${AV}`,s={apiKey:e.apiKey,appName:n.name,v:El},a=CV.get(n.config.apiHost);a&&(s.eid=a);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${Qc(s).slice(1)}`}async function kV(n){const e=await EV(n),t=Ei().gapi;return He(t,n,"internal-error"),e.open({where:document.body,url:IV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NV,dontclear:!0},s=>new Promise(async(a,o)=>{await s.restyle({setHideOnLeave:!1});const c=ti(n,"network-request-failed"),f=Ei().setTimeout(()=>{o(c)},SV.get());function p(){Ei().clearTimeout(f),a(s)}s.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MV=500,DV=600,PV="_blank",LV="http://localhost";class EE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UV(n,e,t,s=MV,a=DV){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...RV,width:s.toString(),height:a.toString(),top:o,left:c},m=Vn().toLowerCase();t&&(f=zw(m)?PV:t),Bw(m)&&(e=e||LV,p.scrollbars="yes");const v=Object.entries(p).reduce((T,[A,C])=>`${T}${A}=${C},`,"");if(gU(m)&&f!=="_self")return VV(e||"",f),new EE(null);const _=window.open(e||"",f,v);He(_,n,"popup-blocked");try{_.focus()}catch{}return new EE(_)}function VV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="__/auth/handler",OV="emulator/auth/handler",GV=encodeURIComponent("fac");async function SE(n,e,t,s,a,o){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:El,eventId:a};if(e instanceof Ag){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",EP(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))c[v]=_}if(e instanceof au){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),m=p?`#${GV}=${encodeURIComponent(p)}`:"";return`${BV(n)}?${Qc(f).slice(1)}${m}`}function BV({config:n}){return n.emulator?bg(n,OV):`https://${n.authDomain}/${jV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="webStorageSupport";class HV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n1,this._completeRedirectFn=fV,this._overrideRedirectResult=cV}async _openPopup(e,t,s,a){var c;ir((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await SE(e,t,s,p0(),a);return UV(e,o,wg())}async _openRedirect(e,t,s,a){await this._originValidation(e);const o=await SE(e,t,s,p0(),a);return qU(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(ir(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await kV(e),s=new mV(e);return t.register("authEvent",a=>(He(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Np,{type:Np},a=>{var c;const o=(c=a==null?void 0:a[0])==null?void 0:c[Np];o!==void 0&&t(!!o),Ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Yw()||Hw()||Eg()}}const zV=HV;var AE="@firebase/auth",wE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KV(n){dl(new Wa("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;He(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jw(n)},m=new TU(s,a,o,p);return CU(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),dl(new Wa("auth-internal",e=>{const t=oh(e.getProvider("auth").getImmediate());return(s=>new FV(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(AE,wE,qV(n)),Qr(AE,wE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=300,YV=FS("authIdTokenMaxAge")||$V;let NE=null;const JV=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>YV)return;const a=t==null?void 0:t.token;NE!==a&&(NE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function QV(n=QS()){const e=L0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=NU(n,{popupRedirectResolver:zV,persistence:[eV,HU,n1]}),s=FS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const c=JV(o.toString());VU(t,c,()=>c(t.currentUser)),UU(t,f=>c(f))}}const a=HS("auth");return a&&IU(t,`http://${a}`),t}function WV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}EU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const o=ti("internal-error");o.customData=a,t(o)},s.type="text/javascript",s.charset="UTF-8",WV().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KV("Browser");const XV={apiKey:"AIzaSyBsULKLrF5rPubDQ10RPWdL4gbjvo8obPI",authDomain:"fajmuls-learning.firebaseapp.com",projectId:"fajmuls-learning",storageBucket:"fajmuls-learning.firebasestorage.app",messagingSenderId:"1078635450652",appId:"1:1078635450652:web:41de35e0038d3bd40caad9"},u1=JS(XV),Os=D3(u1),Cg=QV(u1),d1=new Yi;d1.setCustomParameters({prompt:"select_account"});console.log("Firebase Service Initialized for: fajmuls-learning");const f1="benchmark_scores",Ig="test_packages",oo="users",ZV=n=>jU(Cg,n),ej=async()=>{try{return(await rV(Cg,d1)).user}catch(n){throw console.error("Error signing in with Google",n),n.message&&n.message.includes("Cross-Origin-Opener-Policy")&&console.warn("TIP: Pastikan Anda membuka aplikasi via 'http://localhost:...' bukan '127.0.0.1' dan domain localhost sudah ada di Firebase Authorized Domains."),n}},tj=async()=>{try{await OU(Cg)}catch(n){console.error("Error signing out",n)}},nj=async n=>{const e=pg(su(Os,oo),Iw("username_lowercase","==",n.toLowerCase()));return(await rh(e)).empty},CE=async n=>{const e=ca(Os,oo,n),t=await $3(e);return t.exists()?t.data():null},sj=async(n,e)=>{await yg(ca(Os,oo,n),{...e,username_lowercase:e.username.toLowerCase(),lastLogin:new Date().toISOString()},{merge:!0})},ij=async(n,e)=>{const t={};e.username&&(t.username=e.username,t.username_lowercase=e.username.toLowerCase()),e.photoURL!==void 0&&(t.photoURL=e.photoURL),await Y3(ca(Os,oo,n),t)},IE=async(n,e)=>{try{await yg(ca(Os,oo,n,"history",e.id),e),console.log("History saved to cloud")}catch(t){console.error("Error saving history to cloud",t)}},rj=async n=>{try{const e=pg(su(Os,oo,n,"history")),t=await rh(e),s=[];return t.forEach(a=>{s.push(a.data())}),s.sort((a,o)=>new Date(o.date).getTime()-new Date(a.date).getTime())}catch(e){return console.error("Error fetching history from cloud",e),[]}},aj=async(n,e)=>{try{await Dw(ca(Os,oo,n,"history",e))}catch(t){console.error("Error deleting history from cloud",t)}},oj=async(n,e,t,s)=>{try{await J3(su(Os,f1),{game:n,score:e,username:t,unit:s,timestamp:Date.now()}),console.log(`Score saved to Cloud Leaderboard: ${n} - ${e}`)}catch(a){console.error("Error saving score to Firebase:",a)}},lj=async(n,e=5)=>{try{const t=n==="REACTION"||n==="AIM",s=pg(su(Os,f1),Iw("game","==",n)),a=await rh(s),o=[];a.forEach(p=>{o.push({id:p.id,...p.data()})}),o.sort((p,m)=>t?p.score-m.score:m.score-p.score);const c=[],f=new Set;for(const p of o){const m=p.username.toLowerCase().trim();if(f.has(m)||(c.push(p),f.add(m)),c.length>=e)break}return c}catch(t){return console.error("Error fetching leaderboard from Firebase:",t),[]}},kE=async n=>{try{const e=JSON.parse(JSON.stringify(n));await yg(ca(Os,Ig,n.id),e)}catch(e){throw console.error("Error saving package to Firebase:",e),e}},cj=async()=>{try{const n=await rh(su(Os,Ig)),e=[];return n.forEach(t=>{e.push(t.data())}),e.sort((t,s)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()),e}catch(n){return console.error("Error fetching packages from Firebase:",n),[]}},uj=async n=>{try{await Dw(ca(Os,Ig,n))}catch(e){throw console.error("Error deleting package from Firebase:",e),e}};class dj{constructor(){if(this.audioCache={},this.soundEnabled=!0,typeof Audio<"u")try{this.preload("click"),this.preload("back"),this.preload("tap")}catch(e){console.error("Audio init error",e)}}preload(e){const t=new Audio(ub[e]);t.preload="auto",t.volume=.5,this.audioCache[e]=t}syncSettings(e){this.soundEnabled=e.soundEnabled;const t=e.volume!==void 0?e.volume:.5;Object.values(this.audioCache).forEach(s=>{s&&(s.volume=t)})}startMusic(){}stopMusic(){}play(e){if(this.soundEnabled)try{if(this.audioCache[e]){const a=this.audioCache[e];a.currentTime=0;const o=a.play();o!==void 0&&o.catch(()=>{});return}const t=ub[e];if(!t)return;const s=new Audio(t);s.volume=this.audioCache.click?this.audioCache.click.volume:.5,s.play().catch(()=>{})}catch{}}}const oe=new dj;/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),RE=n=>{const e=hj(n);return e.charAt(0).toUpperCase()+e.slice(1)},h1=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),mj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=F.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:c,...f},p)=>F.createElement("svg",{ref:p,...pj,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:h1("lucide",a),...!o&&!mj(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,v])=>F.createElement(m,v)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(n,e)=>{const t=F.forwardRef(({className:s,...a},o)=>F.createElement(gj,{ref:o,iconNode:e,className:h1(`lucide-${fj(RE(n))}`,`lucide-${n}`,s),...a}));return t.displayName=RE(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ls=Ae("activity",yj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kt=Ae("arrow-left",xj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],bj=Ae("arrow-up",vj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],m1=Ae("award",_j);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Ej=Ae("bell-off",Tj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Aj=Ae("bell",Sj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ME=Ae("book-open",wj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],uh=Ae("book",Nj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Rs=Ae("brain",Cj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],p1=Ae("briefcase",Ij);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Rj=Ae("building-2",kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Dj=Ae("calculator",Mj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Lj=Ae("calendar",Pj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Vj=Ae("camera",Uj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Oc=Ae("chart-no-axes-column",jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$a=Ae("chevron-right",Oj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vs=Ae("circle-check-big",Gj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lu=Ae("circle-x",Bj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],to=Ae("clock",Hj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Cf=Ae("copy",zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],g1=Ae("download",Fj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y1=Ae("eye",qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],$j=Ae("file-search",Kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Zi=Ae("file-text",Yj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Qj=Ae("funnel",Jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],Xj=Ae("git-merge",Wj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],eO=Ae("globe",Zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],kg=Ae("graduation-cap",tO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rr=Ae("grid-3x3",nO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],If=Ae("hash",sO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],dh=Ae("heart",iO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Rg=Ae("history",rO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oO=Ae("info",aO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],cO=Ae("landmark",lO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dO=Ae("layout-grid",uO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],x1=Ae("lightbulb",fO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],js=Ae("loader-circle",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pO=Ae("lock",mO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yO=Ae("log-out",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],kf=Ae("map",xO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],bO=Ae("message-circle",vO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],fh=Ae("message-square",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],v1=Ae("moon",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],SO=Ae("music",EO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wO=Ae("package",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],b1=Ae("palette",NO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Yc=Ae("pause",CO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],DE=Ae("pen-tool",IO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],RO=Ae("pen",kO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],hh=Ae("play",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],PO=Ae("plus",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],UO=Ae("refresh-cw",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],jO=Ae("repeat",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],GO=Ae("rocket",OO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],x0=Ae("rotate-ccw",BO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mh=Ae("save",HO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xd=Ae("search",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_1=Ae("settings",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],KO=Ae("shapes",qO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],YO=Ae("share-2",$O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],QO=Ae("shield-check",JO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],T1=Ae("sun",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],no=Ae("target",XO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],v0=Ae("timer",ZO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rf=Ae("trash-2",e9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],n9=Ae("trending-up",t9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],b0=Ae("triangle-alert",s9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],E1=Ae("trophy",i9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Mf=Ae("type",r9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Mg=Ae("upload",a9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],S1=Ae("user",o9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],c9=Ae("users",l9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],d9=Ae("volume-2",u9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],h9=Ae("volume-x",f9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],A1=Ae("x",m9);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ra=Ae("zap",p9),g9=()=>{const[n,e]=F.useState(!1),[t,s]=F.useState(1500),[a,o]=F.useState(!1),[c,f]=F.useState("focus");F.useEffect(()=>{"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},[]),F.useEffect(()=>{let A=null;return a&&t>0?A=setInterval(()=>{s(t-1)},1e3):t===0&&(o(!1),p()),()=>clearInterval(A)},[a,t]);const p=()=>{new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(C=>console.log("Audio play failed",C)),"Notification"in window&&Notification.permission==="granted"&&new Notification(c==="focus"?"Fokus Selesai!":"Istirahat Selesai!",{body:c==="focus"?"Waktunya istirahat sejenak.":"Kembali fokus belajar!",icon:"/favicon.ico"})},m=()=>o(!a),v=()=>{o(!1),s(c==="focus"?1500:300)},_=()=>{const A=c==="focus"?"break":"focus";f(A),s(A==="focus"?1500:300),o(!1)},T=A=>{const C=Math.floor(A/60),D=A%60;return`${C.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`};return n?u.jsxs("div",{className:"fixed bottom-6 right-6 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 z-50 overflow-hidden animate-fade-in-up",children:[u.jsxs("div",{className:`p-4 ${c==="focus"?"bg-indigo-600":"bg-emerald-500"} text-white flex justify-between items-center`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(v0,{size:20}),u.jsx("span",{className:"font-bold",children:c==="focus"?"Fokus":"Istirahat"})]}),u.jsx("button",{onClick:()=>e(!1),className:"hover:bg-white/20 p-1 rounded",children:u.jsx(A1,{size:18})})]}),u.jsxs("div",{className:"p-6 flex flex-col items-center",children:[u.jsx("div",{className:"text-5xl font-mono font-bold text-slate-800 dark:text-slate-100 mb-6 tracking-wider",children:T(t)}),u.jsxs("div",{className:"flex gap-4 mb-6",children:[u.jsx("button",{onClick:m,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:a?u.jsx(Yc,{size:24}):u.jsx(hh,{size:24})}),u.jsx("button",{onClick:v,className:"p-3 rounded-full bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition",children:u.jsx(x0,{size:24})})]}),u.jsxs("button",{onClick:_,className:"text-sm text-slate-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 underline",children:["Ganti ke Mode ",c==="focus"?"Istirahat":"Fokus"]})]})]}):u.jsxs("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-xl z-50 flex items-center gap-2 transition-all",children:[u.jsx(v0,{size:24}),u.jsx("span",{className:"font-semibold hidden sm:inline",children:"Pomodoro"})]})},y9=({data:n,onNext:e})=>{const[t,s]=F.useState(!1);return u.jsxs("div",{className:"w-full max-w-xl mx-auto perspective-1000",children:[u.jsxs("div",{className:`relative w-full h-80 transition-transform duration-700 transform-style-3d cursor-pointer ${t?"rotate-y-180":""}`,onClick:()=>s(!t),children:[u.jsx("div",{className:"absolute w-full h-full bg-white rounded-2xl shadow-xl border-2 border-indigo-100 flex items-center justify-center p-8 backface-hidden",children:u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-4",children:"QUESTION"}),u.jsx("p",{className:"text-2xl font-medium text-slate-800 leading-relaxed",children:n.front}),u.jsx("p",{className:"mt-8 text-slate-400 text-sm animate-pulse",children:"Tap to flip"})]})}),u.jsx("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl shadow-xl flex items-center justify-center p-8 backface-hidden rotate-y-180",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("span",{className:"inline-block px-3 py-1 bg-white/20 text-white rounded-full text-xs font-bold mb-4",children:"ANSWER"}),u.jsx("p",{className:"text-xl leading-relaxed",children:n.back})]})})]}),t&&u.jsxs("div",{className:"mt-8 flex justify-center gap-3",children:[u.jsx("button",{onClick:()=>{s(!1),e("hard")},className:"px-6 py-2 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 font-medium transition",children:"Sulit (1m)"}),u.jsx("button",{onClick:()=>{s(!1),e("medium")},className:"px-6 py-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 font-medium transition",children:"Sedang (10m)"}),u.jsx("button",{onClick:()=>{s(!1),e("easy")},className:"px-6 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-medium transition",children:"Mudah (4d)"})]})]})},w1=({node:n,depth:e=0})=>u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:`
        border-2 px-4 py-2 rounded-xl text-center font-medium shadow-sm transition-all hover:scale-105
        ${e===0?"bg-indigo-600 text-white border-indigo-600 mb-4 text-lg":""}
        ${e===1?"bg-white text-indigo-700 border-indigo-200 mb-4 text-base":""}
        ${e>1?"bg-slate-50 text-slate-600 border-slate-200 text-sm":""}
      `,children:n.label}),n.children&&n.children.length>0&&u.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-8 relative pt-4",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-px h-4 bg-slate-300"}),u.jsx("div",{className:"absolute top-0 left-4 right-4 h-px bg-slate-300"}),n.children.map((t,s)=>u.jsxs("div",{className:"flex flex-col items-center relative",children:[u.jsx("div",{className:"w-px h-4 bg-slate-300 mb-1"}),u.jsx(w1,{node:t,depth:e+1})]},s))]})]}),x9=({data:n})=>{const e=n.root||n;return u.jsx("div",{className:"p-8 bg-slate-50 rounded-3xl overflow-x-auto border border-slate-200 min-h-[400px] flex justify-center",children:u.jsx(w1,{node:e})})},Fa=({className:n="",height:e="h-4",width:t="w-full"})=>u.jsx("div",{className:`animate-pulse bg-slate-200 dark:bg-slate-700 rounded-md ${e} ${t} ${n}`}),v9=()=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx(Fa,{height:"h-12",width:"w-12",className:"rounded-full"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx(Fa,{height:"h-4",width:"w-1/3"}),u.jsx(Fa,{height:"h-3",width:"w-1/2"})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx(Fa,{height:"h-4"}),u.jsx(Fa,{height:"h-4"}),u.jsx(Fa,{height:"h-4",width:"w-2/3"})]})]}),b9=({onComplete:n})=>{const e=()=>{oe.play("click"),n()};return u.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in cursor-pointer",onClick:e,children:[u.jsxs("div",{className:"relative mb-8 group",children:[u.jsx("div",{className:"absolute -inset-4 bg-indigo-500 rounded-full opacity-20 group-hover:opacity-40 blur-xl transition-opacity duration-1000 animate-pulse"}),u.jsx("img",{src:ef,alt:"Fajmuls Learning",className:"w-48 h-48 md:w-64 md:h-64 object-contain relative z-10 drop-shadow-2xl animate-bounce-slow"})]}),u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-2 tracking-tight",children:["Fajmuls ",u.jsx("span",{className:"text-indigo-400",children:"Learning"})]}),u.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-md",children:"Platform Belajar Cerdas Terintegrasi AI"}),u.jsxs("button",{onClick:t=>{t.stopPropagation(),e()},className:"px-10 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all flex items-center gap-2",children:[u.jsx(GO,{size:24,className:"text-indigo-600"})," Mulai Belajar"]})]})},_9=({isOpen:n,onClose:e,settings:t,onUpdate:s,userProfile:a,onUpdateProfile:o})=>{var $,ee;const[c,f]=F.useState(!1),[p,m]=F.useState(""),[v,_]=F.useState(null),[T,A]=F.useState(!1),C=F.useRef(null);if(!n)return null;const D=se=>{oe.play("tap"),s({...t,[se]:!t[se]})},N=se=>{s({...t,volume:parseFloat(se.target.value)})},L=se=>{var M;const R=(M=se.target.files)==null?void 0:M[0];if(R){if(R.size>2*1024*1024){alert("Ukuran file maksimal 2MB");return}const k=new FileReader;k.onload=O=>{var G;const V=new Image;V.onload=()=>{const j=document.createElement("canvas"),pe=j.getContext("2d");if(!pe)return;const we=200;let Y=V.width,ce=V.height;Y>ce?Y>we&&(ce*=we/Y,Y=we):ce>we&&(Y*=we/ce,ce=we),j.width=Y,j.height=ce,pe.drawImage(V,0,0,Y,ce);const Se=j.toDataURL("image/jpeg",.8);_(Se),f(!0),a&&!p&&m(a.username)},V.src=(G=O.target)==null?void 0:G.result},k.readAsDataURL(R)}},U=async()=>{A(!0);try{const se={};p&&p!==(a==null?void 0:a.username)&&(se.username=p),v&&(se.photoURL=v),Object.keys(se).length>0&&await o(se),f(!1),_(null)}catch(se){console.error(se),alert("Gagal menyimpan profil.")}finally{A(!1)}},B=()=>{m((a==null?void 0:a.username)||""),f(!0)};return u.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700 max-h-[85vh] overflow-y-auto scrollbar-hide",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-slate-800 z-10 py-2 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(_1,{size:24,className:"text-slate-400"})," Pengaturan"]}),u.jsx("button",{onClick:()=>{oe.play("back"),e()},children:u.jsx(lu,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),u.jsxs("div",{className:"space-y-4",children:[a&&u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl mb-4 border border-indigo-100 dark:border-indigo-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Akun"}),a.isGuest?u.jsx("span",{className:"text-xs bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded text-slate-600 dark:text-slate-300 font-bold",children:"TAMU"}):u.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900 px-2 py-1 rounded text-emerald-600 dark:text-emerald-300 font-bold",children:"ONLINE"})]}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var se;return(se=C.current)==null?void 0:se.click()},children:[v||a.photoURL?u.jsx("img",{src:v||a.photoURL||"",alt:"Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-md",onError:se=>{var R;se.currentTarget.style.display="none",(R=se.currentTarget.nextElementSibling)==null||R.classList.remove("hidden")}}):null,u.jsx("div",{className:`w-16 h-16 rounded-full bg-indigo-200 dark:bg-indigo-800 flex items-center justify-center text-indigo-700 dark:text-indigo-200 font-bold text-2xl border-2 border-white dark:border-slate-600 shadow-md ${v||a.photoURL?"hidden":""}`,children:(ee=($=a.username)==null?void 0:$[0])==null?void 0:ee.toUpperCase()}),u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(Vj,{size:20,className:"text-white"})})]}),u.jsx("input",{type:"file",ref:C,className:"hidden",accept:"image/*",onChange:L}),u.jsx("div",{className:"flex-1 min-w-0",children:c?u.jsx("input",{type:"text",value:p,onChange:se=>m(se.target.value.toLowerCase().replace(/\s/g,"")),className:"w-full p-2 border border-indigo-300 rounded-lg text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",placeholder:"Username"}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"font-bold text-lg text-slate-800 dark:text-white truncate",children:a.username}),u.jsx("div",{className:"text-xs text-slate-500 truncate",children:a.email||"Mode Offline"})]})}),!c&&u.jsx("button",{onClick:B,className:"p-2 bg-white dark:bg-slate-700 rounded-lg text-indigo-600 dark:text-indigo-400 hover:shadow-md transition",children:u.jsx(RO,{size:16})})]}),c&&u.jsxs("div",{className:"flex gap-2 animate-fade-in",children:[u.jsxs("button",{onClick:U,disabled:T||!p,className:"flex-1 bg-indigo-600 text-white py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-1 disabled:opacity-50 hover:bg-indigo-700 transition",children:[T?u.jsx(js,{size:14,className:"animate-spin"}):u.jsx(mh,{size:14})," Simpan Perubahan"]}),u.jsx("button",{onClick:()=>{f(!1),_(null)},className:"flex-1 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 py-2 rounded-lg text-xs font-bold hover:bg-slate-300 dark:hover:bg-slate-600 transition",children:"Batal"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.darkMode?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,children:t.darkMode?u.jsx(v1,{size:20}):u.jsx(T1,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Tema Gelap"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Tampilan malam hari."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.darkMode,onChange:()=>D("darkMode")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.soundEnabled?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:t.soundEnabled?u.jsx(d9,{size:20}):u.jsx(h9,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Efek Suara"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Bunyi klik & interaksi."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.soundEnabled,onChange:()=>D("soundEnabled")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.musicEnabled?"bg-pink-100 text-pink-600":"bg-slate-200 text-slate-500"}`,children:u.jsx(SO,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Musik Latar"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Musik santai saat belajar."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.musicEnabled,onChange:()=>D("musicEnabled")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex justify-between mb-2",children:[u.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Volume Utama"}),u.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Math.round(t.volume*100),"%"]})]}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:N,className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-600 accent-indigo-600"})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.funnyNotifications?"bg-amber-100 text-amber-600":"bg-slate-200 text-slate-500"}`,children:t.funnyNotifications?u.jsx(Aj,{size:20}):u.jsx(Ej,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Notifikasi Lucu"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Pesan penyemangat unik."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.funnyNotifications,onChange:()=>D("funnyNotifications")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${t.confirmActions?"bg-emerald-100 text-emerald-600":"bg-slate-200 text-slate-500"}`,children:u.jsx(Vs,{size:20})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"Konfirmasi Aksi"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Cegah salah pencet."})]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.confirmActions,onChange:()=>D("confirmActions")}),u.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-900 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})})},T9="Fajmuls22",E9=({category:n,skdStream:e,availablePackages:t,history:s,onSelectPackage:a,onGenerateNew:o,onImportPackage:c,onDeletePackage:f,onBack:p,showToast:m,confirmEnabled:v,onRefresh:_,isLoading:T})=>{F.useEffect(()=>{_()},[]);const[A,C]=F.useState(""),[D,N]=F.useState(!1),[L,U]=F.useState(null),[B,$]=F.useState(!1),ee=F.useRef(null),se=pe=>{const we=s.filter(ce=>ce.packageId===pe);if(we.length===0)return{attempts:0,highScore:0,avgScore:0};const Y=we.map(ce=>ce.score);return{attempts:we.length,highScore:Math.max(...Y),avgScore:Math.round(Y.reduce((ce,Se)=>ce+Se,0)/Y.length),lastAttemptDate:we[0].date}},R=(pe,we)=>{oe.play("click"),U({type:pe,payload:we}),C(""),N(!0)},M=()=>{var pe;if(!A){m("Masukkan token akses!","error");return}A===T9?(N(!1),oe.play("success"),(L==null?void 0:L.type)==="GENERATE"?k():(L==null?void 0:L.type)==="IMPORT"?(pe=ee.current)==null||pe.click():(L==null?void 0:L.type)==="DELETE"&&O(L.payload)):(oe.play("error"),m("Token salah! Akses ditolak.","error"))},k=async()=>{$(!0);try{await o("verified_client")}catch(pe){console.error(pe)}finally{$(!1)}},O=pe=>{f(pe)},V=(pe,we)=>{pe.stopPropagation();const Y=JSON.stringify(we,null,2),ce=new Blob([Y],{type:"application/json"}),Se=URL.createObjectURL(ce),Ue=document.createElement("a");Ue.href=Se,Ue.download=`${we.title.replace(/\s+/g,"_")}.json`,document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue),URL.revokeObjectURL(Se),m("Paket Soal berhasil didownload","success")},G=()=>{oe.play("click"),_()},j=t.filter(pe=>pe.category===n&&(!e||pe.skdStream===e)).sort((pe,we)=>pe.title.localeCompare(we.title,void 0,{numeric:!0,sensitivity:"base"}));return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center relative",children:[D&&u.jsx("div",{className:"fixed inset-0 z-[70] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col items-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center mb-4",children:u.jsx(QO,{size:32})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Verifikasi Admin"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center mt-1",children:"Fitur ini dilindungi. Masukkan token untuk melanjutkan."})]}),u.jsx("input",{type:"password",placeholder:"Token Akses...",value:A,onChange:pe=>C(pe.target.value),className:"w-full p-4 border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:border-indigo-600 focus:ring-0 outline-none text-center font-bold tracking-widest",autoFocus:!0,onKeyDown:pe=>pe.key==="Enter"&&M()}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Batal"}),u.jsx("button",{onClick:M,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Verifikasi"})]})]})}),u.jsxs("div",{className:"max-w-4xl w-full",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-slate-500 hover:text-indigo-600",children:[u.jsx(kt,{size:20})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white hidden sm:block",children:["Pilih Paket Soal ",n]}),u.jsx("button",{onClick:G,disabled:T,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 hover:shadow-sm transition disabled:opacity-50",title:"Refresh Paket Soal",children:u.jsx(UO,{size:20,className:T?"animate-spin":""})})]})]}),u.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 sm:hidden",children:["Pilih Paket Soal ",n]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[u.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(pO,{size:18,className:"text-slate-400"})," Admin Zone"]}),u.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[u.jsxs("button",{onClick:()=>R("GENERATE"),disabled:B,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-indigo-600 text-white px-5 py-2.5 rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition shadow-sm",children:[B?u.jsx(js,{className:"animate-spin",size:18}):u.jsx(PO,{size:18}),u.jsx("span",{children:"Buat Paket AI"})]}),u.jsxs("button",{onClick:()=>R("IMPORT"),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 bg-white dark:bg-slate-700 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 px-5 py-2.5 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition shadow-sm",children:[u.jsx(Mg,{size:18}),u.jsx("span",{children:"Import"})]})]})]}),u.jsx("input",{type:"file",ref:ee,className:"hidden",accept:".json",multiple:!0,onChange:pe=>{pe.target.files&&pe.target.files.length>0&&c(pe.target.files),ee.current&&(ee.current.value="")}})]}),T&&j.length===0?u.jsxs("div",{className:"py-20 text-center text-slate-500",children:[u.jsx(js,{className:"animate-spin mx-auto mb-2"}),u.jsx("p",{children:"Memuat paket soal terbaru..."})]}):u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:j.map(pe=>{const we=se(pe.id);return u.jsxs("button",{onClick:()=>a(pe),className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 transition text-left group relative overflow-hidden w-full shadow-sm hover:shadow-md",children:[pe.isAiGenerated&&u.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"AI Generated"}),u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors pr-8 line-clamp-2",children:pe.title}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{onClick:Y=>V(Y,pe),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Download JSON Soal",children:u.jsx(g1,{size:18})}),u.jsx("div",{onClick:Y=>{Y.stopPropagation(),R("DELETE",pe.id)},className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-slate-700 rounded-lg transition",title:"Hapus Paket (Butuh Token)",children:u.jsx(Rf,{size:18})})]})]}),u.jsxs("div",{className:"flex gap-4 text-xs text-slate-500 dark:text-slate-400 mb-4 items-center",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(to,{size:12})," ",pe.durationMinutes," Menit"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Zi,{size:12})," ",pe.questions.length," Soal"]}),pe.version==="v2"&&u.jsx("span",{className:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 font-bold px-2 py-0.5 rounded-full text-[10px] border border-purple-200 dark:border-purple-800",children:"v2"})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-xl p-3 grid grid-cols-3 gap-2 text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Percobaan"}),u.jsxs("div",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[we.attempts,"x"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Tertinggi"}),u.jsx("div",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:we.highScore})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Rata-rata"}),u.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:we.avgScore})]})]})]},pe.id)})})]})]})},S9=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-sm font-sans"})},A9=({answers:n,questions:e,onHome:t,onRetry:s,category:a,details:o})=>{const c=n.filter(D=>D.isCorrect).length;let f=(o==null?void 0:o.total)||(o==null?void 0:o.average)||(o==null?void 0:o.iqScore)||Math.round(c/e.length*100);if(a==="GENERAL"&&!o){const D=n.reduce((N,L)=>N+(L.scoreEarned||0),0);f=Math.round(D/(e.length||1))}const[p,m]=F.useState(""),[v,_]=F.useState(!1),T=n.filter(D=>!D.isCorrect),A=Array.from(new Set(T.map(D=>{var L,U;const N=e.find(B=>B.id===D.questionId);return((L=N==null?void 0:N.metadata)==null?void 0:L.subtest)||((U=N==null?void 0:N.metadata)==null?void 0:U.topic)||"General"}))),C=async()=>{_(!0);try{const D=await H4(A);m(D)}catch{alert("Gagal memuat saran AI.")}finally{_(!1)}};return u.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-900 p-6 md:p-12 flex flex-col items-center transition-colors",children:u.jsxs("div",{className:"max-w-2xl w-full text-center",children:[u.jsx("div",{className:"inline-block p-4 rounded-full bg-slate-50 dark:bg-slate-800 mb-6",children:f>=(a==="UTBK"?600:70)?u.jsx(m1,{size:48,className:"text-emerald-500"}):u.jsx(Ls,{size:48,className:"text-amber-500"})}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Sesi Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut adalah analisis hasil belajar Anda."}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:"Skor Akhir"}),u.jsx("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:f})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[u.jsx("div",{className:"text-slate-400 font-bold text-xs uppercase mb-1",children:a==="GENERAL"?"Poin":"Akurasi"}),u.jsx("div",{className:"text-4xl font-black text-indigo-600 dark:text-indigo-400",children:a==="GENERAL"?f:`${Math.round(c/e.length*100)}%`})]})]}),a==="UTBK"&&o&&u.jsxs("div",{className:"mb-8 w-full bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-4",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 text-left border-b border-slate-200 dark:border-slate-700 pb-2",children:"Rincian Subtes (IRT)"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Umum:"})," ",u.jsx("b",{children:o.pu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PPU:"})," ",u.jsx("b",{children:o.ppu})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"PBM:"})," ",u.jsx("b",{children:o.pbm})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Kuantitatif:"})," ",u.jsx("b",{children:o.pk})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Indo:"})," ",u.jsx("b",{children:o.lbi})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Lit. B.Inggris:"})," ",u.jsx("b",{children:o.lbe})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Penalaran Math:"})," ",u.jsx("b",{children:o.pm})]})]})]}),A.length>0&&u.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900 p-6 rounded-2xl mb-8 text-left w-full",children:[u.jsxs("h3",{className:"font-bold text-rose-800 dark:text-rose-400 flex items-center gap-2",children:[u.jsx(no,{size:20})," Topik Perlu Perbaikan"]}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:A.slice(0,5).map(D=>u.jsx("span",{className:"bg-white dark:bg-rose-900/40 text-rose-600 dark:text-rose-200 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 dark:border-rose-800",children:D},D))}),p?u.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 dark:border-rose-800",children:[u.jsx("h4",{className:"font-bold text-sm text-rose-800 dark:text-rose-400 mb-2",children:"Saran AI:"}),u.jsx("div",{className:"prose prose-sm prose-rose max-w-none text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 p-4 rounded-xl border border-rose-100 dark:border-rose-800",children:u.jsx(S9,{text:p})})]}):u.jsxs("button",{onClick:C,disabled:v,className:"text-sm font-bold text-rose-700 dark:text-rose-400 underline flex items-center gap-1 hover:text-rose-900 dark:hover:text-rose-300",children:[v?u.jsx(js,{className:"animate-spin",size:14}):u.jsx(x1,{size:14}),"Minta Saran Perbaikan AI"]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden text-left mb-8 w-full",children:[u.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-b border-slate-100 dark:border-slate-600 font-bold text-slate-700 dark:text-slate-200",children:"Detail Jawaban"}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.map((D,N)=>{const L=n.find(B=>B.questionId===D.id),U=L==null?void 0:L.isCorrect;return u.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-750 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsxs("span",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:["Soal ",N+1]}),U?u.jsx(Vs,{size:16,className:"text-emerald-500"}):u.jsx(lu,{size:16,className:"text-rose-500"})]}),u.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:D.content})]},N)})})]}),u.jsxs("div",{className:"flex gap-4 w-full",children:[u.jsx("button",{onClick:t,className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ke Menu Utama"}),u.jsx("button",{onClick:s,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Coba Lagi"})]})]})})},PE=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},Df=n=>n.category==="PSIKOTEST"&&n.details&&"speedPerMinute"in n.details,N1=n=>n.category==="KECERMATAN"&&n.details&&"averageSpeed"in n.details,Zd=n=>n.category==="PSIKOTEST"&&n.details&&"iqScore"in n.details,w9=n=>{switch(n){case"UTBK":return{icon:kg,color:"text-rose-600",bg:"bg-rose-100 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-800"};case"SKD":return{icon:p1,color:"text-amber-600",bg:"bg-amber-100 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-800"};case"PSIKOTEST":return{icon:Rs,color:"text-purple-600",bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-200 dark:border-purple-800"};case"TPA":return{icon:ra,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-800"};case"KECERMATAN":return{icon:y1,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30",border:"border-emerald-200 dark:border-emerald-800"};case"INTERVIEW":return{icon:fh,color:"text-cyan-600",bg:"bg-cyan-100 dark:bg-cyan-900/30",border:"border-cyan-200 dark:border-cyan-800"};case"BUTAWRNA":return{icon:b1,color:"text-pink-600",bg:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-200 dark:border-pink-800"};case"SKRIPSI":return{icon:uh,color:"text-indigo-600",bg:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-200 dark:border-indigo-800"};default:return{icon:Zi,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700"}}},Wi=(n,e="PERCENT")=>{let t="",s="";return e==="IQ"?n>=130?(t="Sempurna (Genius)",s="text-cyan-500 dark:text-cyan-400"):n>=120?(t="Istimewa (Superior)",s="text-teal-500 dark:text-teal-400"):n>=110?(t="Sangat Baik (High Avg)",s="text-emerald-500 dark:text-emerald-400"):n>=90?(t="Baik (Average)",s="text-indigo-500 dark:text-indigo-400"):n>=80?(t="Cukup (Low Avg)",s="text-amber-500 dark:text-amber-400"):n>=70?(t="Buruk (Borderline)",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"):n===100?(t="Sempurna",s="text-cyan-500 dark:text-cyan-400"):n>=95?(t="Istimewa",s="text-teal-500 dark:text-teal-400"):n>=85?(t="Sangat Baik",s="text-emerald-500 dark:text-emerald-400"):n>=70?(t="Baik",s="text-lime-600 dark:text-lime-500"):n>=55?(t="Cukup",s="text-amber-500 dark:text-amber-400"):n>=40?(t="Buruk",s="text-orange-500 dark:text-orange-400"):(t="Sangat Buruk",s="text-rose-600 dark:text-rose-500"),{text:t,color:s}},LE=(n,e)=>{const t=e>0?n/e*100:0;return Wi(t,"PERCENT").color},UE=n=>{if(n<60)return`${Math.round(n)}s`;const e=Math.floor(n/60),t=Math.round(n%60);return`${e}m ${t}s`},C1=n=>n==="SIMBOL"||n==="SAMA_BEDA"?"SAMA BEDA SIMBOL":n==="SIMBOL_HILANG"?"SIMBOL HILANG":n==="ANGKA"?"ANGKA HILANG":n==="HURUF"?"HURUF HILANG":n,N9=({history:n,onBack:e,onReview:t,username:s,onExport:a,onImport:o,onDelete:c})=>{const[f,p]=F.useState("ALL"),[m,v]=F.useState(null),_=F.useRef(null),T=n.filter(U=>f==="ALL"||U.category===f),A=T.length,C=A>0?Math.round(T.reduce((U,B)=>U+B.score,0)/A):0,D=A>0?Math.max(...T.map(U=>U.score)):0,N=(U,B)=>{U.stopPropagation(),oe.play("click"),v(B)},L=()=>{m&&(c(m),v(null))};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 md:p-6 transition-colors",children:[m&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-xl max-w-sm w-full border border-slate-200 dark:border-slate-700",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mb-4 text-rose-600 dark:text-rose-400",children:u.jsx(Rf,{size:24})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Hapus Riwayat?"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Data hasil tes ini akan dihapus secara permanen dan tidak dapat dikembalikan."}),u.jsxs("div",{className:"flex gap-3 w-full",children:[u.jsx("button",{onClick:()=>v(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Batal"}),u.jsx("button",{onClick:L,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 transition",children:"Hapus"})]})]})})}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition text-slate-700 dark:text-slate-300",children:u.jsx(kt,{size:20})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Riwayat Belajar"}),u.jsxs("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(S1,{size:12})," ",s]})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-xs hover:bg-slate-50 dark:hover:bg-slate-700 transition shadow-sm",children:[u.jsx(g1,{size:14})," Backup"]}),u.jsxs("button",{onClick:()=>{var U;return(U=_.current)==null?void 0:U.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border border-indigo-100 dark:border-indigo-800 rounded-xl font-bold text-xs hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition shadow-sm",children:[u.jsx(Mg,{size:14})," Restore"]}),u.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:U=>{var B;(B=U.target.files)!=null&&B[0]&&o(U.target.files[0]),_.current&&(_.current.value="")}})]})]}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4 scrollbar-hide",children:[u.jsx("button",{onClick:()=>p("ALL"),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f==="ALL"?"bg-slate-900 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Semua"}),Rp.map(U=>u.jsx("button",{onClick:()=>p(U.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${f===U.id?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:U.name},U.id))]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(Qj,{size:14})," Total Tes"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:A})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(n9,{size:14})," Avg Skor"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:C})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 mb-2 font-bold text-xs uppercase tracking-wider",children:[u.jsx(m1,{size:14})," Tertinggi"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-500",children:D})]})]}),u.jsx("div",{className:"space-y-4",children:T.length===0?u.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 text-slate-400",children:[u.jsx(Rg,{size:48,className:"mx-auto mb-4 opacity-20"}),u.jsx("p",{children:"Tidak ada riwayat untuk kategori ini."})]}):T.map(U=>{const B=w9(U.category),$=B.icon,ee=U.questions?U.questions.length:0,se=U.answers?U.answers.length:0,R=U.answers?U.answers.filter(ne=>ne.isCorrect).length:0,M=se-R,k=U.answers?U.answers.reduce((ne,ye)=>ne+(ye.timeTakenSeconds||0),0):0,O=UE(k),V=Df(U),G=N1(U),j=Zd(U);let pe=U.category;U.category==="TPA"?pe="TPA & Bahasa Inggris":U.category==="PSIKOTEST"&&Df(U)?pe="Tes Koran / Pauli":U.category==="PSIKOTEST"&&Zd(U)?pe="Psikotes (IQ & Logika)":U.category==="KECERMATAN"&&(pe="Tes Kecermatan"),U.packageTitle&&(pe=U.packageTitle);let we=U.score.toString(),Y="SKOR",ce={text:"-",color:"text-slate-500"};if(G){const ne=U.details;we=ne.accuracy+"%",Y="AKURASI",ce=Wi(ne.accuracy,"PERCENT")}else if(V){const ne=U.details;we=ne.accuracy+"%",Y="AKURASI",ce=Wi(ne.accuracy,"PERCENT")}else if(j){const ne=U.details.iqScore||U.score;we=ne.toString(),Y="IQ SCORE",ce=Wi(ne,"IQ")}else{const ne=U.maxScore>0?U.score/U.maxScore*100:0;ce=Wi(ne,"PERCENT")}const Se=ce.color;let Ue=R,be=M,H=0,re=0,he={val:0,index:0},X=[];if(G){const ne=U.details;Ue=ne.totalCorrect,be=ne.totalWrong,H=ne.averageSpeed,re=ne.stability,X=ne.sectionData.map(ye=>ye.correct)}else if(V){const ne=U.details;Ue=ne.totalCorrect,be=ne.totalWrong,H=ne.speedPerMinute,re=ne.consistencyScore,X=ne.intervalData}if(X&&X.length>0){const ne=Math.max(...X),ye=X.indexOf(ne);he={val:ne,index:ye+1}}return u.jsxs("div",{onClick:()=>t(U),className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-500 transition group relative overflow-hidden cursor-pointer",children:[u.jsxs("div",{className:"absolute top-0 right-0 z-10 flex",children:[U.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-[10px] px-2 py-1 font-bold rounded-bl-lg",children:"TIDAK SELESAI"}),U.details&&U.details.passed!==void 0&&u.jsx("span",{className:`text-[10px] px-2 py-1 font-bold rounded-bl-lg text-white ${U.details.passed?"bg-emerald-500":"bg-rose-500"}`,children:U.details.passed?"LULUS":"TIDAK LULUS"})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${B.bg} ${B.color} border ${B.border}`,children:u.jsx($,{size:24})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2 pr-12",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white truncate text-base pr-2",children:pe}),U.packageTitle&&U.packageTitle!==pe&&u.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-400 font-medium truncate flex items-center gap-1 mb-1",children:[u.jsx(wO,{size:10})," ",U.packageTitle]}),u.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs mt-1 flex-wrap",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Lj,{size:12})," ",new Date(U.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),U.skdStream&&u.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase",children:U.skdStream}),G&&U.details.mode&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-emerald-100 dark:bg-emerald-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-emerald-700 dark:text-emerald-400 uppercase",children:C1(U.details.mode)}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(to,{size:10})," ",O]})]}),V&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-purple-700 dark:text-purple-400 uppercase",children:"PAULI"}),u.jsxs("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[u.jsx(to,{size:10})," ",O]})]}),Zd(U)&&u.jsx("span",{className:"bg-indigo-100 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded text-[10px] font-bold text-indigo-700 dark:text-indigo-400 uppercase",children:"IQ LOGIKA"})]})]}),u.jsxs("div",{className:"text-right shrink-0",children:[u.jsx("div",{className:`text-2xl font-black ${Se}`,children:we}),u.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:Y})]})]}),u.jsxs("div",{className:"mt-3",children:[G||V?u.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600 last:border-0 sm:last:border-0",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Total Dijawab"}),u.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400",children:Ue+be})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Benar/Salah"}),u.jsxs("span",{className:"font-bold",children:[u.jsx("span",{className:"text-emerald-500",children:Ue})," / ",u.jsx("span",{className:"text-rose-500",children:be})]})]}),u.jsxs("div",{className:"flex flex-col text-center border-r-0 sm:border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Speed Avg"}),u.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200",children:H})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Stabil"}),u.jsx("span",{className:"font-black text-amber-500",children:re})]}),u.jsxs("div",{className:"flex flex-col text-center border-r border-slate-200 dark:border-slate-600",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Peak"}),u.jsxs("span",{className:"font-black text-emerald-500",title:`Highest: ${he.val} at Interval ${he.index}`,children:[he.val,u.jsxs("span",{className:"text-[8px] text-slate-400 font-normal ml-0.5",children:["@",he.index]})]})]}),u.jsxs("div",{className:"flex flex-col text-center",children:[u.jsx("span",{className:"text-[9px] text-slate-400 uppercase",children:"Kesimpulan"}),u.jsx("span",{className:`font-black text-[10px] leading-tight ${ce.color}`,children:ce.text})]})]}):u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs bg-slate-50 dark:bg-slate-700/30 p-2 rounded-xl border border-slate-100 dark:border-slate-700",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Dijawab"}),u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[se," ",u.jsxs("span",{className:"text-slate-400",children:["/ ",ee]})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Benar / Salah"}),u.jsxs("span",{className:"font-bold text-emerald-600",children:[R," ",u.jsx("span",{className:"text-slate-400",children:"/"})," ",u.jsx("span",{className:"text-rose-500",children:M})]})]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Waktu"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:UE(k)})]}),U.category==="SKD"&&U.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rincian"}),u.jsxs("div",{className:"flex gap-1 text-[8px] font-mono",children:[u.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400 px-1 rounded",children:["TWK:",U.details.twk]}),u.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-400 px-1 rounded",children:["TIU:",U.details.tiu]}),u.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-400 px-1 rounded",children:["TKP:",U.details.tkp]})]})]}),U.category==="UTBK"&&U.details&&u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-slate-400 font-medium text-[9px]",children:"Rata-rata Subtes"}),u.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:U.details.average})]})]}),(V||G)&&X.length>0&&u.jsx("div",{className:"mt-2 h-8 flex items-end gap-0.5 opacity-50 hover:opacity-100 transition-opacity",children:X.map((ne,ye)=>{const Ie=Math.max(...X,1),ge=ne/Ie*100;return u.jsx("div",{className:`flex-1 rounded-t-sm ${ye+1===he.index?"bg-emerald-500":"bg-slate-300 dark:bg-slate-600"}`,style:{height:`${ge}%`}},ye)})})]})]})]}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:ne=>N(ne,U.id),className:"p-2 bg-rose-50 dark:bg-rose-900/30 text-rose-600 rounded-full hover:bg-rose-100 dark:hover:bg-rose-900/50 transition z-20",title:"Hapus",children:u.jsx(Rf,{size:14})}),u.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 rounded-full",children:u.jsx($a,{size:14})})]})]},U.id)})})]})]})},C9=({item:n,onBack:e})=>{if(Df(n)||N1(n)){const t=Df(n),s=n.details;let a=[],o=0,c=0,f=0,p=0,m=0,v="",_={text:"-",color:"text-slate-500"};if(t){const C=s;a=C.intervalData||[],o=C.totalCorrect,c=C.totalWrong,f=C.speedPerMinute,p=C.accuracy,m=C.consistencyScore,v="PAULI / KORAN",_=Wi(C.accuracy,"PERCENT")}else{const C=s;a=C.sectionData.map(D=>D.correct),o=C.totalCorrect,c=C.totalWrong,f=C.averageSpeed,p=C.accuracy,m=C.stability,v=C1(C.mode),_=Wi(C.accuracy,"PERCENT")}let T=0,A=0;return a.length>0&&(T=Math.max(...a),A=a.indexOf(T)+1),u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(kt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 p-8",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[u.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl text-indigo-600 dark:text-indigo-400",children:u.jsx(Ls,{size:32})}),u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Analisis ",v]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Kesimpulan: ",u.jsx("span",{className:`font-bold ${_.color}`,children:_.text})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Volume Total"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:o}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Error / Salah"}),u.jsx("div",{className:"text-3xl font-black text-rose-500",children:c}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban salah"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Kecepatan (Avg)"}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:f}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"per menit/bagian"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Akurasi"}),u.jsxs("div",{className:`text-3xl font-black ${Wi(p,"PERCENT").color}`,children:[p,"%"]}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"ketelitian kerja"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Stabilitas"}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:m}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]}),u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-2xl bg-slate-50 dark:bg-slate-700/30",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Peak Performance"}),u.jsx("div",{className:"text-3xl font-black text-emerald-500",children:T}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["tertinggi pada menit ke-",A]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Grafik Ritme Kerja (Per Menit/Bagian)"}),u.jsx("div",{className:"h-64 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative overflow-x-auto",children:a.map((C,D)=>{const N=Math.max(...a,10),L=C/N*100,U=C===T;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full min-w-[20px]",children:[u.jsx("div",{className:`w-full rounded-t-sm transition-all hover:opacity-80 ${U?"bg-emerald-500":"bg-indigo-600"}`,style:{height:`${L}%`}}),u.jsx("div",{className:"mt-2 text-[10px] font-bold text-slate-400",children:D+1}),u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-black text-white text-xs p-2 rounded z-10 whitespace-nowrap shadow-xl",children:["Menit ",D+1,": ",C]})]},D)})}),u.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:["Grafik menunjukkan jumlah jawaban benar per interval. Grafik yang stabil atau naik menandakan ketahanan kerja yang baik.",u.jsx("br",{}),"Peak Performance ditandai dengan warna hijau."]})]})]})]})})}return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("button",{onClick:e,className:"text-slate-500 dark:text-slate-400 flex items-center hover:text-indigo-600 transition",children:[u.jsx(kt,{size:16,className:"mr-1"})," Kembali ke Riwayat"]}),n.isAborted&&u.jsx("span",{className:"bg-amber-500 text-white text-xs px-2 py-1 rounded font-bold",children:"TIDAK FULL TEST"})]}),n.category==="SKD"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TWK"}),u.jsx("div",{className:`text-2xl font-black ${n.details.twk>=65?"text-emerald-600":"text-rose-500"}`,children:n.details.twk}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 65"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TIU"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tiu>=80?"text-emerald-600":"text-rose-500"}`,children:n.details.tiu}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 80"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TKP"}),u.jsx("div",{className:`text-2xl font-black ${n.details.tkp>=166?"text-emerald-600":"text-rose-500"}`,children:n.details.tkp}),u.jsx("div",{className:"text-[10px] text-slate-400",children:"Target: 166"})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full bg-slate-50 dark:bg-slate-700/50 p-2 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1",children:"Total"}),u.jsx("div",{className:`text-3xl font-black ${LE(n.score,550)}`,children:n.score})]})]}),n.category==="TPA"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tpaScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TPA BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tpaCorrect})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI SCORE"}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:n.details.tbiScore})]}),u.jsx("div",{className:"w-px h-10 bg-slate-200 dark:bg-slate-700 hidden md:block"}),u.jsxs("div",{className:"text-center w-full",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"TBI BENAR"}),u.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.details.tbiCorrect})]})]}),n.category==="UTBK"&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 dark:border-slate-700 pb-2",children:[u.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm uppercase",children:"Rincian Skor Subtes"}),u.jsxs("div",{className:`text-xl font-black ${LE(n.details.average,1e3)}`,children:["Avg: ",n.details.average]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:Object.entries(n.details).filter(([t])=>t!=="average").map(([t,s])=>u.jsxs("div",{className:"p-2 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase mb-1",children:t.toUpperCase()}),u.jsx("div",{className:"text-xl font-bold text-slate-800 dark:text-white",children:s})]},t))})]}),Zd(n)&&n.details&&u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-sm border-2 border-purple-100 dark:border-purple-900 mb-6 text-center relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-purple-50 dark:bg-purple-900/20 rounded-bl-full -mr-4 -mt-4"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-sm font-bold text-purple-400 uppercase tracking-widest mb-2",children:"ESTIMASI IQ ANDA"}),u.jsx("div",{className:`text-6xl font-black mb-4 tracking-tighter ${Wi(n.details.iqScore,"IQ").color}`,children:n.details.iqScore}),u.jsx("div",{className:"inline-block px-6 py-2 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 rounded-full font-bold text-lg border border-purple-200 dark:border-purple-700",children:n.details.classification}),u.jsx("p",{className:"text-slate-400 text-xs mt-4 max-w-md mx-auto",children:"*Hasil ini adalah estimasi berdasarkan simulasi tes dan mungkin berbeda dengan tes psikologi profesional."})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-xl font-bold mb-6 text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(ra,{size:20,className:"text-amber-500"})," Pembahasan Soal"]}),u.jsx("div",{className:"space-y-6",children:n.questions.map((t,s)=>{var p;const a=n.answers.find(m=>m.questionId===t.id),o=a==null?void 0:a.isCorrect,c=(a==null?void 0:a.scoreEarned)||0;let f="bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300";return c>0?t.tkpPoints?c===5?f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":f="bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":f="bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",u.jsxs("div",{className:"p-5 border border-slate-100 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/30 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["No. ",s+1]}),u.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide hidden sm:inline",children:(p=t.metadata)==null?void 0:p.subtest})]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${f}`,children:[c>0?u.jsx(Vs,{size:12}):u.jsx(lu,{size:12}),c," Poin"]})]}),u.jsx("div",{className:"mb-4 text-slate-800 dark:text-slate-200 font-medium text-base leading-relaxed",children:u.jsx(PE,{text:t.content})}),u.jsxs("div",{className:"grid gap-2 text-sm mb-4",children:[u.jsxs("div",{className:`p-3 rounded-lg border ${o?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/10 dark:border-emerald-800 text-emerald-800 dark:text-emerald-300":"bg-rose-50 border-rose-200 dark:bg-rose-900/10 dark:border-rose-800 text-rose-800 dark:text-rose-300"}`,children:[u.jsx("span",{className:"font-bold block mb-1",children:"Jawaban Anda:"}),(a==null?void 0:a.selectedAnswer)||"Tidak dijawab"]}),!o&&!t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-indigo-50 border-indigo-200 dark:bg-indigo-900/10 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Kunci Jawaban:"}),t.correctAnswer]}),t.tkpPoints&&u.jsxs("div",{className:"p-3 rounded-lg border bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-600 dark:text-slate-400",children:[u.jsx("span",{className:"font-bold block mb-1",children:"Poin Opsi TKP:"}),u.jsx("ul",{className:"list-disc pl-4 space-y-1",children:t.tkpPoints.sort((m,v)=>v.points-m.points).map((m,v)=>u.jsxs("li",{className:m.option===(a==null?void 0:a.selectedAnswer)?"font-bold text-indigo-600 dark:text-indigo-400":"",children:[m.points," Poin: ",m.option]},v))})]})]}),u.jsxs("div",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700 italic",children:[u.jsx("span",{className:"font-bold not-italic text-slate-700 dark:text-slate-300 block mb-1",children:"Pembahasan:"}),u.jsx(PE,{text:t.explanation})]})]},s)})})]})]})})},Cp=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-800 dark:text-slate-200 leading-relaxed"})},I9=({timeLeft:n,onFinish:e})=>(F.useEffect(()=>{n<=0&&e()},[n,e]),u.jsxs("div",{className:"fixed inset-0 z-[60] bg-indigo-600 flex flex-col items-center justify-center text-white px-6",children:[u.jsx("div",{className:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-pulse",children:u.jsx(v0,{size:48,className:"text-white"})}),u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Istirahat Antar Subtes"}),u.jsxs("div",{className:"text-6xl font-mono font-bold mb-8",children:[n,"s"]}),u.jsx("p",{className:"text-xl text-center max-w-md italic opacity-90",children:'"Tarik nafas, persiapkan fokus untuk subtes berikutnya."'}),u.jsx("button",{onClick:e,className:"mt-8 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-bold",children:"Lewati Istirahat"})]})),k9=({mode:n,questions:e,drillContent:t,onComplete:s,isSkdSimulation:a,isUtbkSimulation:o,category:c,showToast:f,initialState:p,userId:m,skdStream:v,packageTitle:_})=>{var ne,ye,Ie;const[T,A]=F.useState((p==null?void 0:p.utbkSubtestIndex)||0),[C,D]=F.useState(!1),[N,L]=F.useState(0),[U,B]=F.useState((p==null?void 0:p.currentIndex)||0),[$,ee]=F.useState((p==null?void 0:p.answerMap)||{}),[se,R]=F.useState(!1),[M,k]=F.useState(!1),O=F.useRef(Date.now()),V=()=>p!=null&&p.timeLeft?p.timeLeft:o&&Hr[0]?Hr[0].duration*60:a?6e3:n===qe.SIMULATION?c==="PSIKOTEST"?2400:c==="TPA"?6e3:3600:0,[G,j]=F.useState(V);F.useEffect(()=>{if(!m)return;const ge={uid:m,mode:n,category:c,questions:e,answerMap:$,timeLeft:G,currentIndex:U,utbkSubtestIndex:T,drillContent:t,skdStream:v,packageTitle:_,timestamp:Date.now()};try{localStorage.setItem("fajmuls_active_session",JSON.stringify(ge))}catch(xe){console.warn("Failed to save session state (quota?)",xe)}},[G,$,U,T,m]);const pe=()=>{localStorage.removeItem("fajmuls_active_session")},we=F.useMemo(()=>{if(o){const ge=Hr[T].name;return e.filter(xe=>{var Te,Be;return(Be=(Te=xe.metadata)==null?void 0:Te.subtest)==null?void 0:Be.includes(ge)})}return e},[e,o,T]);F.useEffect(()=>{let ge=null;return C&&N>0?ge=setInterval(()=>L(xe=>xe-1),1e3):C&&N===0?D(!1):G>0&&!se&&n===qe.SIMULATION?ge=setInterval(()=>{j(xe=>(xe<=11&&xe>1&&oe.play("tick"),xe-1))},1e3):G===0&&n===qe.SIMULATION&&(o?Y():ce()),()=>clearInterval(ge)},[G,se,C,N,n]);const Y=()=>{if(o)if(T<Hr.length-1){oe.play("success");const ge=T+1;A(ge);const xe=Hr[ge].duration;j(xe*60),B(0),L(30),D(!0)}else ce();else ce()},ce=()=>{pe(),oe.play("finish"),s(Object.values($))},Se=()=>{pe();const ge=Object.values($);s(ge,void 0,!0)},Ue=async ge=>{var Mt;const xe=we[U];if(!xe)return;oe.play("click");let Te=0,Be=!1;if(c==="SKD")if(xe.tkpPoints&&xe.tkpPoints.length>0){const nt=xe.tkpPoints.find(Fn=>Fn.option===ge);Te=nt?nt.points:0,Be=Te===5}else Be=ge===xe.correctAnswer,Te=Be?5:0;else if(c==="UTBK"){Be=ge===xe.correctAnswer;const nt=((Mt=xe.metadata)==null?void 0:Mt.difficulty)||"Medium";Te=Be?nt==="HOTS"||nt==="Hard"?3:nt==="Medium"?2:1:0}else Be=ge===xe.correctAnswer,Te=Be?10:0;let ft="";if(xe.type!=="multiple_choice"&&c==="GENERAL")try{const nt=await B4(xe.content,xe.correctAnswer,ge);Te=nt.score,Be=nt.isCorrect,ft=nt.feedback}catch{console.error("Grading failed")}const ze=$[xe.id],ht=(Date.now()-O.current)/1e3,Ot={questionId:xe.id,selectedAnswer:ge,isCorrect:Be,scoreEarned:Te,timeTakenSeconds:((ze==null?void 0:ze.timeTakenSeconds)||0)+ht,isOverthinking:!1,isGuessing:ht<5,aiEvaluation:ft,isDoubtful:(ze==null?void 0:ze.isDoubtful)||!1};ee(nt=>({...nt,[xe.id]:Ot})),O.current=Date.now()},be=()=>{const ge=we[U];ee(xe=>{const Te=xe[ge.id];return Te?{...xe,[ge.id]:{...Te,isDoubtful:!Te.isDoubtful}}:{...xe,[ge.id]:{questionId:ge.id,selectedAnswer:"",isCorrect:!1,scoreEarned:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,isDoubtful:!0}}})},H=ge=>{const xe=Math.floor(ge/3600),Te=Math.floor(ge%3600/60),Be=Math.floor(ge%60);return`${xe>0?xe+":":""}${Te.toString().padStart(2,"0")}:${Be.toString().padStart(2,"0")}`},re=(ge,xe)=>ge.length===0?null:u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 border-b border-slate-100 dark:border-slate-700 pb-1",children:xe}),u.jsx("div",{className:"grid grid-cols-5 gap-2",children:ge.map((Te,Be)=>{const ft=we.findIndex(Ot=>Ot.id===Te.id),ze=$[Te.id];let ht="bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300";return ze!=null&&ze.selectedAnswer&&(ht="bg-emerald-500 border-emerald-500 text-white"),ze!=null&&ze.isDoubtful&&(ht="bg-amber-400 border-amber-400 text-white"),ft===U&&(ht+=" ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-800"),u.jsx("button",{onClick:()=>{B(ft),k(!1)},className:`aspect-square rounded-lg border flex items-center justify-center font-bold text-sm transition-all ${ht}`,children:ft+1},Te.id)})})]});if(C)return u.jsx(I9,{timeLeft:N,onFinish:()=>{D(!1)}});if(we.length===0)return u.jsxs("div",{className:"p-10 text-center",children:[u.jsx(js,{className:"animate-spin mx-auto"})," Menyiapkan soal subtes..."]});const he=we[U],X=$[he.id];return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col md:flex-row h-screen overflow-hidden transition-colors relative",children:[se&&u.jsx("div",{className:"absolute inset-0 z-50 bg-white/80 dark:bg-slate-900/90 backdrop-blur-md flex flex-col items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl text-center border border-slate-200 dark:border-slate-700 max-w-sm w-full",children:[u.jsx(Yc,{size:48,className:"mx-auto mb-4 text-indigo-600"}),u.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"Ujian Dijeda"}),u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsxs("button",{onClick:()=>R(!1),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center gap-2",children:[u.jsx(hh,{size:20})," Lanjutkan"]}),u.jsx("button",{onClick:Se,className:"px-6 py-3 border-2 border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-700",children:"Keluar (Simpan)"})]})]})}),u.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative order-1",children:[u.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20",children:[u.jsxs("div",{className:"font-bold text-slate-700 dark:text-white text-sm",children:["No. ",U+1]}),u.jsxs("div",{className:"flex items-center gap-2",children:[n===qe.SIMULATION&&u.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded text-xs font-mono font-bold dark:text-white",children:H(G)}),u.jsx("button",{onClick:()=>k(!M),className:"p-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded",children:u.jsx(rr,{size:20})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto pb-24",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 md:p-8 mb-6",children:[n===qe.DRILL&&t&&u.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 mb-2 flex items-center gap-2",children:[u.jsx(ra,{size:16})," ",t.topic]}),u.jsx("p",{children:t.summary})]}),u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("span",{className:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:o?Hr[T].name:((ne=he.metadata)==null?void 0:ne.subtest)||"General"}),((ye=he.metadata)==null?void 0:ye.difficulty)==="HOTS"&&u.jsxs("span",{className:"flex items-center gap-1 text-rose-600 dark:text-rose-400 font-bold text-xs bg-rose-50 dark:bg-rose-900/20 px-2 py-1 rounded-full",children:[u.jsx(ra,{size:12})," HOTS"]})]}),u.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-8 text-slate-800 dark:text-slate-100",children:u.jsx(Cp,{text:he.content})}),he.type==="multiple_choice"?u.jsx("div",{className:"space-y-3",children:(Ie=he.options)==null?void 0:Ie.map((ge,xe)=>{var ht;const Te=String.fromCharCode(65+xe),Be=(X==null?void 0:X.selectedAnswer)===ge;let ft="border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-750",ze="bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-600";return Be&&(ft="border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-500",ze="bg-indigo-600 text-white"),n!==qe.SIMULATION&&X&&((he.tkpPoints?((ht=he.tkpPoints.find(Mt=>Mt.option===ge))==null?void 0:ht.points)===5:ge===he.correctAnswer)?(ft="border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20",ze="bg-emerald-500 text-white"):Be&&(ft="border-rose-500 bg-rose-50 dark:bg-rose-900/20",ze="bg-rose-500 text-white")),u.jsxs("button",{onClick:()=>Ue(ge),className:`w-full flex items-start p-4 rounded-xl border-2 transition-all group text-left ${ft}`,children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-sm mr-4 transition-colors ${ze}`,children:Te}),u.jsx("div",{className:"flex-1 pt-1 text-slate-700 dark:text-slate-200 text-base",children:u.jsx(Cp,{text:ge})})]},xe)})}):u.jsxs("div",{children:[" ",u.jsx("textarea",{className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 dark:bg-slate-900 dark:text-white",placeholder:"Ketik jawaban Anda...",rows:4,value:(X==null?void 0:X.selectedAnswer)||"",onChange:ge=>Ue(ge.target.value)})," "]})]}),n!==qe.SIMULATION&&X&&u.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800 rounded-2xl p-6 animate-fade-in-up",children:[u.jsxs("h4",{className:"font-bold text-emerald-800 dark:text-emerald-300 mb-3 flex items-center gap-2",children:[u.jsx(x1,{size:20})," Pembahasan"]}),u.jsx("div",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:u.jsx(Cp,{text:he.explanation})})]})]})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 z-10",children:u.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[u.jsxs("button",{onClick:()=>{B(ge=>Math.max(0,ge-1))},disabled:U===0,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",children:[u.jsx(kt,{size:20})," ",u.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),u.jsxs("div",{className:"flex gap-2 items-center",children:[p&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400 font-bold bg-emerald-50 dark:bg-emerald-900/30 px-2 py-1 rounded",children:[u.jsx(mh,{size:12})," Disimpan Otomatis"]}),u.jsxs("button",{onClick:be,className:`flex items-center gap-2 px-6 py-2 rounded-lg font-bold border transition ${X!=null&&X.isDoubtful?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-400 border-amber-300 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-600"}`,children:[u.jsx("input",{type:"checkbox",checked:(X==null?void 0:X.isDoubtful)||!1,readOnly:!0,className:"w-4 h-4 accent-amber-500 cursor-pointer"}),u.jsx("span",{children:"Ragu-ragu"})]})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),U<we.length-1?B(ge=>ge+1):o?Y():ce()},className:"flex items-center gap-2 px-6 py-2 rounded-lg font-bold bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg",children:[u.jsx("span",{className:"hidden sm:inline",children:U===we.length-1?o&&T<Hr.length-1?"Lanjut Subtes":"Selesai":"Berikutnya"}),u.jsx($a,{size:20})]})]})})]}),u.jsxs("div",{className:`fixed inset-y-0 right-0 w-80 bg-white dark:bg-slate-800 border-l border-slate-200 dark:border-slate-700 transform transition-transform duration-300 z-40 flex flex-col order-2 ${M?"translate-x-0":"translate-x-full"} md:translate-x-0 md:relative md:w-80`,children:[u.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[u.jsxs("button",{onClick:Se,className:"flex items-center gap-2 text-rose-500 font-bold hover:text-rose-600",children:[u.jsx(kt,{size:18})," Keluar (Simpan)"]}),u.jsx("button",{onClick:()=>k(!1),className:"md:hidden text-slate-500",children:u.jsx(lu,{size:24})})]}),n===qe.SIMULATION&&G>0&&u.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 hidden md:block",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("span",{className:"text-xs font-bold text-indigo-500 uppercase tracking-wider",children:"Sisa Waktu"}),u.jsxs("button",{onClick:()=>R(!0),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded font-bold hover:bg-amber-200 flex items-center gap-1",children:[u.jsx(Yc,{size:12})," Jeda"]})]}),u.jsx("div",{className:"text-3xl font-mono font-bold text-slate-800 dark:text-white text-center",children:H(G)})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:a?u.jsxs(u.Fragment,{children:[re(we.filter(ge=>{var xe,Te;return(Te=(xe=ge.metadata)==null?void 0:xe.subtest)==null?void 0:Te.includes("TWK")}),"Tes Wawasan Kebangsaan (TWK)"),re(we.filter(ge=>{var xe,Te;return(Te=(xe=ge.metadata)==null?void 0:xe.subtest)==null?void 0:Te.includes("TIU")}),"Tes Intelegensia Umum (TIU)"),re(we.filter(ge=>{var xe,Te;return(Te=(xe=ge.metadata)==null?void 0:xe.subtest)==null?void 0:Te.includes("TKP")}),"Tes Karakteristik Pribadi (TKP)")]}):re(we,o?Hr[T].name:c)}),u.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 md:hidden",children:u.jsx("button",{onClick:ce,className:"w-full py-3 bg-rose-600 text-white rounded-xl font-bold",children:"Hentikan Ujian"})})]}),M&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>k(!1)})]})},Od=10,Ip=60,R9=500,VE=50,M9=(n,e)=>Array.from({length:n},()=>Array.from({length:e},()=>Math.floor(Math.random()*10))),D9=(n,e,t,s,a)=>{let o=0;return n>=400?o+=40:n>=300?o+=30:n>=200?o+=20:o+=10,t>=99?o+=20:t>=97?o+=15:t>=95?o+=10:o+=5,s<3?o+=20:s<6?o+=15:s<9?o+=10:o+=5,a==="NAIK"?o+=20:a==="STABIL"?o+=15:o+=5,o>=90?"Sangat Disarankan (Konsisten & Tinggi)":o>=75?"Disarankan (Baik)":o>=60?"Cukup (Perlu Latihan)":a==="TURUN"&&s>8?"Indikasi Kelelahan / Emosi Tidak Stabil":"Kurang Disarankan"},P9=n=>{if(n.length<2)return"STABIL";const e=Math.floor(n.length/2),t=n.slice(0,e),s=n.slice(e),a=t.reduce((f,p)=>f+p,0)/(t.length||1),c=(s.reduce((f,p)=>f+p,0)/(s.length||1)-a)/a*100;return c>5?"NAIK":c<-10?"TURUN":"STABIL"},L9=({onBack:n,onComplete:e})=>{const[t,s]=F.useState("SETUP"),[a,o]=F.useState([]),[c,f]=F.useState(0),[p,m]=F.useState(0),[v,_]=F.useState(0),[T,A]=F.useState(0),[C,D]=F.useState([]),[N,L]=F.useState(0),[U,B]=F.useState(!1),[$,ee]=F.useState(Od*60),[se,R]=F.useState(Ip),M=()=>{const be=M9(R9,VE);o(be),f(0),m(0),_(0),A(0),D([]),L(0),ee(Od*60),R(Ip),s("PLAYING"),oe.play("click")},k=F.useCallback(be=>{if(t!=="PLAYING")return;const H=a[c][p],re=a[c][p+1];if(re===void 0){f(ye=>ye+1),m(0);return}const X=(H+re)%10;be===X?(_(ye=>ye+1),L(ye=>ye+1)):(A(ye=>ye+1),oe.play("error")),p<VE-2?m(ye=>ye+1):(f(ye=>ye+1),m(0))},[a,c,p,t]);F.useEffect(()=>{const be=H=>{t==="PLAYING"&&H.key>="0"&&H.key<="9"&&k(parseInt(H.key))};return window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)},[t,k]),F.useEffect(()=>{if(t!=="PLAYING")return;const be=setInterval(()=>{ee(H=>H<=1?(G(),0):H-1),R(H=>(H<=6&&H>1&&oe.play("tick"),H<=1?(oe.play("success"),V(),Ip):H-1))},1e3);return()=>clearInterval(be)},[t,N]);const O=F.useRef(0);F.useEffect(()=>{O.current=N},[N]);const V=()=>{const be=O.current;D(H=>[...H,be]),L(0),B(!0),setTimeout(()=>B(!1),2e3)},G=(be=!1)=>{const H=O.current;H>0&&D(re=>[...re,H]),s("FINISHED"),be||oe.play("finish")},j=()=>{const be=v+T,H=(Od*60-$)/60,re=H<.1?.1:H,he=re>0?Math.round(v/re):0,X=be>0?v/be*100:0;let ne=0;if(C.length>0){const ge=C.reduce((Te,Be)=>Te+Be,0)/C.length,xe=C.reduce((Te,Be)=>Te+Math.pow(Be-ge,2),0)/C.length;ne=Math.sqrt(xe)}const ye=P9(C),Ie=D9(v,he,X,ne,ye);return{totalCorrect:v,totalWrong:T,totalAttempts:be,totalColumns:c,speedPerMinute:he,consistencyScore:parseFloat(ne.toFixed(2)),accuracy:Math.round(X),intervalData:C,interpretation:{verdict:Ie,speedDesc:he>50?"Sangat Cepat":he>35?"Cepat":"Sedang",accDesc:X>98?"Sangat Teliti":X>92?"Teliti":"Kurang Teliti",stabDesc:ye==="TURUN"?"Menurun (Lelah)":ne<4?"Stabil":"Fluktuatif",trend:ye}}},pe=be=>{const H=Math.floor(be/60),re=be%60;return`${H}:${re.toString().padStart(2,"0")}`},we=()=>{const be=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:be.totalCorrect,maxScore:0,details:be,questions:[],answers:[],isAborted:!0};e(H)};if(t==="SETUP")return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700 animate-fade-in-up",children:[u.jsxs("div",{className:"p-8 bg-indigo-600 text-white text-center relative overflow-hidden",children:[u.jsx(Ls,{size:64,className:"mx-auto mb-4 relative z-10"}),u.jsx("h1",{className:"text-3xl font-black relative z-10",children:"Tes Pauli Digital"}),u.jsx("p",{className:"opacity-90 relative z-10 text-sm mt-2",children:"Uji Ketahanan & Stabilitas Kerja"})]}),u.jsxs("div",{className:"p-8 space-y-6",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl text-sm text-slate-600 dark:text-slate-300 space-y-3",children:[u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(to,{size:18,className:"text-indigo-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Durasi:"})," ",Od," Menit"]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(Ls,{size:18,className:"text-emerald-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Instruksi:"})," Jumlahkan dua angka yang berdekatan. Masukkan digit satuan saja (misal: 12  2)."]})]}),u.jsxs("p",{className:"flex items-center gap-3",children:[u.jsx(Oc,{size:18,className:"text-amber-500 shrink-0"})," ",u.jsxs("span",{children:[u.jsx("strong",{children:"Garis:"})," Setiap 1 menit, muncul tanda 'Garis'. Tetap lanjutkan menghitung."]})]})]}),u.jsxs("button",{onClick:M,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2 hover:scale-105 transform duration-200",children:[u.jsx(hh,{size:24,fill:"currentColor"})," Mulai Tes"]}),u.jsx("button",{onClick:n,className:"w-full py-3 text-slate-500 hover:text-indigo-600 font-bold text-sm transition",children:"Kembali"})]})]})});if(t==="FINISHED"){const be=j(),H={id:`pauli-${Date.now()}`,date:new Date().toISOString(),category:"PSIKOTEST",score:be.totalCorrect,maxScore:0,details:be,questions:[],answers:[]};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-4xl w-full bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Analisis Profil Kerja"}),u.jsx("div",{className:"mt-4 inline-block px-6 py-2 bg-indigo-600 text-white text-xl font-bold rounded-full shadow-lg",children:be.interpretation.verdict})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Ls,{size:14})," Prestasi (Total)"]}),u.jsx("div",{className:"text-3xl font-black text-indigo-600 dark:text-indigo-400",children:be.totalCorrect}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"jawaban benar"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(to,{size:14})," Tempo"]}),u.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:be.speedPerMinute}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"rata-rata/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Vs,{size:14})," Ketelitian"]}),u.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:be.totalWrong}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["kesalahan (",be.interpretation.accDesc,")"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-2xl text-center border border-slate-100 dark:border-slate-600",children:[u.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2 flex justify-center items-center gap-1",children:[u.jsx(Oc,{size:14})," Stabilitas"]}),u.jsx("div",{className:"text-3xl font-black text-amber-500",children:be.consistencyScore}),u.jsxs("div",{className:"text-[10px] text-slate-500",children:["deviasi (",be.interpretation.trend,")"]})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-4 flex items-center gap-2",children:[u.jsx(Oc,{size:18})," Grafik Ritme Kerja (Per 1 Menit)"]}),u.jsx("div",{className:"h-48 flex items-end gap-1 p-2 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-x-auto",children:be.intervalData.map((re,he)=>{const X=Math.max(...be.intervalData,1),ne=re/X*100;return u.jsxs("div",{className:"flex-1 min-w-[20px] bg-indigo-500/80 hover:bg-indigo-500 transition-all rounded-t relative group",style:{height:`${ne}%`},children:[u.jsx("div",{className:"absolute bottom-0 w-full text-center text-[8px] text-white/50",children:he+1}),u.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg",children:re})]},he)})}),u.jsx("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"Grafik yang menurun drastis menunjukkan indikasi kelelahan."})]}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>{s("SETUP")},className:"flex-1 py-4 border-2 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",children:"Ulangi Tes"}),u.jsxs("button",{onClick:()=>e(H),className:"flex-1 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsx(mh,{size:20})," Simpan & Keluar"]})]})]})})}const Y=a[c]||[],ce=Y[p],Se=Y[p+1],Ue=[1,2,3,4,5,6,7,8,9,0];return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm z-20 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Waktu"}),u.jsx("div",{className:"text-xl font-mono font-bold text-slate-800 dark:text-white",children:pe($)})]}),u.jsxs("div",{className:"text-center pl-4 border-l border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:"Prestasi"}),u.jsx("div",{className:"text-xl font-bold text-emerald-600",children:v})]})]}),u.jsx("button",{onClick:()=>s("PAUSED"),className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx(Yc,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),U&&u.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-amber-500 text-white px-6 py-2 rounded-full font-bold shadow-lg animate-pulse border-2 border-white",children:"GARIS!  LANJUT HITUNG"}),u.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative p-4",children:u.jsxs("div",{className:"flex flex-col items-center gap-2 transform scale-110",children:[u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:p>0?Y[p-1]:"-"}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl border-4 border-indigo-100 dark:border-slate-700 flex flex-col items-center gap-2 w-64 animate-fade-in-up",children:[u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:ce}),u.jsx("div",{className:"w-16 h-1 bg-slate-200 dark:bg-slate-600 rounded-full my-1"}),u.jsx("div",{className:"text-6xl font-mono font-black text-slate-800 dark:text-white",children:Se!==void 0?Se:"-"})]}),u.jsx("div",{className:"text-4xl font-mono font-bold text-slate-300 dark:text-slate-700 opacity-30 blur-[1px]",children:Y[p+2]!==void 0?Y[p+2]:"-"})]})}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 pb-8 border-t border-slate-200 dark:border-slate-700 shrink-0 z-30",children:[u.jsx("div",{className:"max-w-md mx-auto grid grid-cols-5 gap-3",children:Ue.map(be=>u.jsx("button",{onClick:()=>k(be),className:"h-16 rounded-2xl bg-slate-100 dark:bg-slate-700 text-2xl font-bold text-slate-700 dark:text-white shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 transition-all hover:bg-indigo-50 dark:hover:bg-slate-600 active:bg-indigo-100 dark:active:bg-slate-500",children:be},be))}),u.jsx("div",{className:"text-center mt-4 text-xs text-slate-400",children:"Gunakan tombol di atas atau keyboard angka"})]}),t==="PAUSED"&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, lalu lanjutkan."}),u.jsx("button",{onClick:()=>s("PLAYING"),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:we,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},kp=10,jE=60,OE=["A","B","C","D","E"],Hn=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],GE=(n,e,t)=>{let s=0;return n===100?s+=50:n>=95?s+=45:n>=90?s+=40:n>=80?s+=30:n>=70?s+=20:s+=10,e>=50?s+=30:e>=40?s+=25:e>=30?s+=20:e>=20?s+=10:s+=5,t<2?s+=20:t<4?s+=15:t<6?s+=10:t<8&&(s+=5),s>=95?"Sempurna":s>=85?"Sangat Baik":s>=70?"Baik":s>=55?"Cukup":s>=40?"Kurang":"Buruk"},BE=n=>{let e=[];n==="ANGKA"?e=[...["0","1","2","3","4","5","6","7","8","9"]].sort(()=>.5-Math.random()).slice(0,5):n==="HURUF"?e=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")].sort(()=>.5-Math.random()).slice(0,5):n==="SIMBOL_HILANG"&&(e=[...Hn].sort(()=>.5-Math.random()).slice(0,5));const t=Math.floor(Math.random()*5),s=e.filter((a,o)=>o!==t).sort(()=>.5-Math.random());return{reference:e,question:s,answer:t}},HE=()=>{const n=3+Math.floor(Math.random()*2),e=Array.from({length:n},()=>Hn[Math.floor(Math.random()*Hn.length)]),t=Math.random()>.5;let s=[...e];if(!t)if(Math.random()>.5){const a=Math.floor(Math.random()*n);let o=Hn[Math.floor(Math.random()*Hn.length)];for(;o===e[a];)o=Hn[Math.floor(Math.random()*Hn.length)];s[a]=o}else n>=2&&([s[0],s[1]]=[s[1],s[0]],s[0]===s[1]&&(s[0]=Hn.find(c=>c!==s[0])||"X"));return{left:e,right:s,isSame:t}},zE=()=>{const e=[...Hn].sort(()=>.5-Math.random()).slice(0,5),t=Math.floor(Math.random()*5),s=e[t];return{map:e,target:s,answer:t}},FE=()=>{const n=Hn[Math.floor(Math.random()*Hn.length)],e=Array.from({length:20},()=>{if(Math.random()<.3)return n;let s=Hn[Math.floor(Math.random()*Hn.length)];for(;s===n;)s=Hn[Math.floor(Math.random()*Hn.length)];return s}),t=e.filter(s=>s===n).length;return{target:n,grid:e,totalCorrect:t}},U9=({initialMode:n,onBack:e,onComplete:t})=>{var he;const[s,a]=F.useState(n||"ANGKA"),[o,c]=F.useState(1),[f,p]=F.useState(jE),[m,v]=F.useState(!1),[_,T]=F.useState("PLAYING"),[A,C]=F.useState(null),[D,N]=F.useState(null),[L,U]=F.useState(null),[B,$]=F.useState(null),[ee,se]=F.useState([]),[R,M]=F.useState([]),[k,O]=F.useState(0),[V,G]=F.useState(0),[j,pe]=F.useState(null),we=F.useCallback(()=>{if(s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG")if(A){const X=Math.floor(Math.random()*5),ne=A.reference.filter((ye,Ie)=>Ie!==X).sort(()=>.5-Math.random());C({...A,question:ne,answer:X})}else{const X=BE(s);C(X)}else if(s==="SAMA_BEDA")N(HE());else if(s==="MATCHING")if(!L)U(zE());else{const X=Math.floor(Math.random()*5);U({...L,target:L.map[X],answer:X})}else s==="GROUPING"&&($(FE()),se([]))},[s,A,L]),Y=F.useCallback(()=>{C(null),U(null),N(null),$(null),s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?C(BE(s)):s==="SAMA_BEDA"?N(HE()):s==="MATCHING"?U(zE()):s==="GROUPING"&&($(FE()),se([])),p(jE),O(0),G(0)},[s]);F.useEffect(()=>{_==="PLAYING"&&Y()},[o,s,_]);const ce=X=>{if(m)return;let ne=!1;s==="ANGKA"||s==="HURUF"||s==="SIMBOL_HILANG"?ne=X===(A==null?void 0:A.answer):s==="SAMA_BEDA"?ne=X===(D==null?void 0:D.isSame):s==="MATCHING"&&(ne=X===(L==null?void 0:L.answer)),ne?(O(ye=>ye+1),pe("CORRECT")):(G(ye=>ye+1),pe("WRONG"),oe.play("error")),setTimeout(()=>pe(null),150),we()},Se=()=>{if(!B)return;let X=0,ne=0;ee.forEach(Ie=>{B.grid[Ie]===B.target?X++:ne++});const ye=B.totalCorrect-X;O(Ie=>Ie+X),G(Ie=>Ie+ne+ye),ne===0&&ye===0?(pe("CORRECT"),oe.play("success")):(pe("WRONG"),oe.play("error")),setTimeout(()=>pe(null),200),we()},Ue=X=>{oe.play("click"),se(ne=>ne.includes(X)?ne.filter(ye=>ye!==X):[...ne,X])};F.useEffect(()=>{if(m||_==="FINISHED")return;const X=setInterval(()=>{p(ne=>(ne<=6&&ne>1&&oe.play("tick"),ne<=1?(be(),0):ne-1))},1e3);return()=>clearInterval(X)},[m,o,_,k,V]);const be=()=>{M(X=>{if(X.find(Ie=>Ie.section===o))return X;const ne={section:o,correct:k,wrong:V},ye=[...X,ne];return o>=kp?setTimeout(()=>T("FINISHED"),0):setTimeout(()=>{c(Ie=>Ie+1),oe.play("success")},0),ye})},H=()=>{const X=R.length,ne=R.reduce((Mt,nt)=>Mt+nt.correct,0),ye=R.reduce((Mt,nt)=>Mt+nt.wrong,0),Ie=X>0?ne/X:0,ge=ne+ye,xe=ge>0?ne/ge*100:0,Te=Ie,Be=R.reduce((Mt,nt)=>Mt+Math.pow(nt.correct-Te,2),0)/(X||1),ft=Math.sqrt(Be),ze=GE(xe,Ie,ft),ht={mode:s,totalCorrect:ne,totalWrong:ye,averageSpeed:parseFloat(Ie.toFixed(1)),accuracy:parseFloat(xe.toFixed(1)),sectionData:R,stability:parseFloat(ft.toFixed(2)),verdict:ze},Ot={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(xe),maxScore:100,details:ht,questions:[],answers:[]};oe.play("finish"),t(Ot)},re=()=>{const X={section:o,correct:k,wrong:V},ne=[...R];ne.find(Ot=>Ot.section===o)||ne.push(X);const ye=ne.reduce((Ot,Mt)=>Ot+Mt.correct,0),Ie=ne.reduce((Ot,Mt)=>Ot+Mt.wrong,0),ge=ye/(ne.length||1),xe=ye+Ie,Te=xe>0?ye/xe*100:0,ze={mode:s,totalCorrect:ye,totalWrong:Ie,averageSpeed:parseFloat(ge.toFixed(1)),accuracy:parseFloat(Te.toFixed(1)),sectionData:ne,stability:parseFloat(0 .toFixed(2)),verdict:"Belum Selesai"},ht={id:`kecer-${Date.now()}`,date:new Date().toISOString(),category:"KECERMATAN",score:Math.round(Te),maxScore:100,details:ze,questions:[],answers:[],isAborted:!0};t(ht)};if(_==="FINISHED"){const X=R.reduce((ft,ze)=>ft+ze.correct,0),ne=R.reduce((ft,ze)=>ft+ze.wrong,0),ye=X/R.length,Ie=X/(X+ne)*100,ge=ye,xe=R.reduce((ft,ze)=>ft+Math.pow(ze.correct-ge,2),0)/R.length,Te=Math.sqrt(xe),Be=GE(Ie,ye,Te);return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center animate-fade-in",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:"Tes Selesai!"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Berikut hasil performa kecermatan Anda."}),u.jsx("div",{className:"flex justify-center mb-8",children:u.jsx("div",{className:"px-6 py-2 bg-indigo-600 text-white rounded-full font-bold text-xl shadow-lg shadow-indigo-200 dark:shadow-none animate-bounce-slow",children:Be})}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Kecepatan"}),u.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-white",children:ye.toFixed(1)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"poin/menit"})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Akurasi"}),u.jsxs("div",{className:"text-2xl font-black text-emerald-500",children:[Ie.toFixed(1),"%"]})]}),u.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[u.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Stabilitas"}),u.jsx("div",{className:"text-2xl font-black text-amber-500",children:Te.toFixed(2)}),u.jsx("div",{className:"text-[10px] text-slate-500",children:"deviasi"})]})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase mb-3 text-left",children:"Grafik Performa Per Menit"}),u.jsx("div",{className:"h-40 flex items-end gap-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl border border-slate-200 dark:border-slate-700 relative",children:Array.from({length:kp}).map((ft,ze)=>{const ht=R.find(Fn=>Fn.section===ze+1),Ot=ht?ht.correct:0,Mt=Math.max(...R.map(Fn=>Fn.correct),10),nt=Ot/Mt*100;return u.jsxs("div",{className:"flex-1 flex flex-col justify-end items-center group relative h-full",children:[u.jsx("div",{className:"w-full bg-indigo-500/80 hover:bg-indigo-600 transition-all rounded-t-sm relative",style:{height:`${nt}%`},children:u.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-black text-white text-[10px] px-2 py-1 rounded z-10 shadow-lg whitespace-nowrap",children:["Menit ",ze+1,": ",Ot]})}),u.jsx("div",{className:"mt-1 text-[9px] font-bold text-slate-400",children:ze+1})]},ze)})})]}),u.jsxs("button",{onClick:H,className:"w-full py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition flex items-center justify-center gap-2",children:[u.jsx(mh,{size:20})," Simpan Hasil"]})]})})}return u.jsxs("div",{className:"fixed inset-0 bg-slate-100 dark:bg-slate-900 flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center shadow-sm shrink-0 z-20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Bagian"}),u.jsxs("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:[o,"/",kp]})]}),u.jsx("div",{className:"w-px h-8 bg-slate-200 dark:bg-slate-700"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu"}),u.jsxs("span",{className:`text-lg font-mono font-black ${f<=5?"text-rose-500 animate-pulse":"text-slate-800 dark:text-white"}`,children:[f,"s"]})]}),u.jsxs("div",{className:"hidden sm:flex flex-col border-l pl-4 border-slate-200 dark:border-slate-700",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Benar"}),u.jsx("span",{className:"text-lg font-black text-emerald-600",children:k})]})]}),u.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:u.jsx(Yc,{size:20,className:"text-slate-600 dark:text-slate-300"})})]}),u.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[j&&u.jsx("div",{className:`absolute inset-0 z-10 flex items-center justify-center pointer-events-none transition-opacity duration-150 ${j==="CORRECT"?"bg-emerald-500/10":"bg-rose-500/10"}`,children:u.jsx("div",{className:`p-4 rounded-full ${j==="CORRECT"?"bg-emerald-500 text-white":"bg-rose-500 text-white"} shadow-xl transform scale-125`,children:j==="CORRECT"?u.jsx(Vs,{size:64}):u.jsx(x0,{size:64})})}),u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-2 w-full max-w-4xl mx-auto h-full min-h-0",children:[(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsxs("div",{className:"w-full h-full flex flex-col justify-center gap-4 sm:gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-2 shrink-0",children:[u.jsx("div",{className:"grid grid-cols-5 gap-1",children:(he=s==="MATCHING"?L==null?void 0:L.map:A==null?void 0:A.reference)==null?void 0:he.map((X,ne)=>u.jsx("div",{className:`aspect-square flex flex-col items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg ${s==="MATCHING"?"py-1":""}`,children:u.jsx("span",{className:`${s==="MATCHING"||s==="SIMBOL_HILANG"?"text-3xl sm:text-5xl":"text-2xl sm:text-4xl"} font-black text-slate-800 dark:text-white`,children:X})},ne))}),u.jsx("div",{className:"grid grid-cols-5 gap-1 text-center border-t border-slate-100 dark:border-slate-600 pt-1 mt-1",children:OE.map((X,ne)=>u.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:X},ne))})]}),u.jsxs("div",{className:"text-center py-2 flex-1 flex flex-col justify-center",children:[u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:s==="MATCHING"?"Cari Pasangan:":"Mana yang hilang?"}),s==="MATCHING"?u.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 mx-auto flex items-center justify-center bg-indigo-600 rounded-3xl shadow-xl transform transition-all duration-300",children:u.jsx("span",{className:"text-6xl sm:text-7xl font-black text-white",children:L==null?void 0:L.target})}):u.jsx("div",{className:"flex justify-center gap-2 sm:gap-4 flex-wrap",children:A==null?void 0:A.question.map((X,ne)=>u.jsx("div",{className:"w-12 h-12 sm:w-20 sm:h-20 flex items-center justify-center bg-white dark:bg-slate-800 rounded-xl border-2 border-slate-200 dark:border-slate-600 shadow-sm text-slate-800 dark:text-white font-bold text-xl sm:text-3xl",children:X},ne))})]})]}),s==="SAMA_BEDA"&&D&&u.jsxs("div",{className:"w-full max-w-md h-full flex flex-col justify-center gap-4 text-center min-h-0",children:[u.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 flex-1 justify-center min-h-0",children:[u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:D.left.map((X,ne)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:X},ne))})}),u.jsx("div",{className:"bg-white dark:bg-slate-800 p-2 sm:p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-600 shadow-md flex-1 flex items-center justify-center",children:u.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 flex-wrap",children:D.right.map((X,ne)=>u.jsx("span",{className:"text-2xl sm:text-4xl text-slate-800 dark:text-white",children:X},ne))})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 shrink-0",children:[u.jsxs("button",{onClick:()=>ce(!0),className:"h-16 sm:h-24 bg-emerald-500 hover:bg-emerald-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(Vs,{size:24,className:"mb-1 hidden sm:block"})," SAMA"]}),u.jsxs("button",{onClick:()=>ce(!1),className:"h-16 sm:h-24 bg-rose-500 hover:bg-rose-600 text-white rounded-3xl font-black text-lg sm:text-xl shadow-lg active:scale-95 transition-transform flex flex-col items-center justify-center",children:[u.jsx(x0,{size:24,className:"mb-1 hidden sm:block"})," BEDA"]})]}),u.jsx("p",{className:"text-xs text-slate-400 pb-1",children:"Bandingkan kedua kotak. Sama atau Beda?"})]}),s==="GROUPING"&&B&&u.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden min-h-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 shrink-0",children:[u.jsxs("div",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 flex items-center gap-2",children:["Pilih: ",u.jsx("span",{className:"text-2xl bg-white dark:bg-slate-800 px-3 py-1 rounded-lg border inline-block shadow-sm text-indigo-600",children:B.target})]}),u.jsx("button",{onClick:Se,className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 shadow-md active:scale-95 transition",children:"Lanjut"})]}),u.jsx("div",{className:"flex-1 grid grid-cols-5 grid-rows-4 gap-1 sm:gap-2 p-1 content-center justify-items-center h-full min-h-0",children:B.grid.map((X,ne)=>{const ye=ee.includes(ne);return u.jsx("button",{onClick:()=>Ue(ne),className:`w-full h-full rounded-xl flex items-center justify-center text-xl sm:text-3xl transition-all duration-75 ${ye?"bg-indigo-600 text-white shadow-inner scale-95 border-2 border-indigo-700":"bg-white dark:bg-slate-800 text-slate-800 dark:text-white border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:X},ne)})})]})]})]}),(s==="ANGKA"||s==="HURUF"||s==="MATCHING"||s==="SIMBOL_HILANG")&&u.jsx("div",{className:"bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-2 sm:p-4 pb-6 shrink-0 z-30",children:u.jsx("div",{className:"max-w-3xl mx-auto",children:u.jsx("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:OE.map((X,ne)=>u.jsx("button",{onClick:()=>ce(ne),className:"h-14 sm:h-20 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-indigo-600 dark:hover:bg-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm border-b-4 border-slate-200 dark:border-slate-900 active:border-b-0 active:translate-y-1 flex flex-col items-center justify-center gap-1 group text-slate-700 dark:text-slate-200",children:u.jsx("span",{className:"text-xl sm:text-2xl font-black",children:X})},ne))})})}),m&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-slate-900/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tes Dijeda"}),u.jsx("p",{className:"text-white/60 mb-6 text-sm",children:"Ambil napas sejenak, fokus kembali."}),u.jsx("button",{onClick:()=>v(!1),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-bold text-lg mb-4 hover:scale-105 transition w-full max-w-xs shadow-lg",children:"Lanjutkan"}),u.jsx("button",{onClick:re,className:"px-8 py-4 bg-transparent border-2 border-white/20 text-white rounded-2xl font-bold text-lg hover:bg-white/10 transition w-full max-w-xs",children:"Keluar (Simpan)"})]})]})},V9=({targetNumber:n,refreshTrigger:e})=>{const t=F.useRef(null);return F.useEffect(()=>{const s=t.current;if(!s)return;const a=s.getContext("2d");if(!a)return;a.clearRect(0,0,s.width,s.height);const o=document.createElement("canvas");o.width=s.width,o.height=s.height;const c=o.getContext("2d");if(!c)return;c.fillStyle="#000000",c.fillRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.font='bold 160px "Arial Rounded MT Bold", "Helvetica Rounded", Arial, sans-serif',c.textAlign="center",c.textBaseline="middle";const f=(Math.random()-.5)*.2;c.save(),c.translate(s.width/2,s.height/2),c.rotate(f),c.fillText(n.toString(),0,0),c.restore();const m=c.getImageData(0,0,s.width,s.height).data,v=["#E74C3C","#E67E22","#D35400","#C0392B","#F1948A","#E59866","#CD6155"],_=["#27AE60","#2ECC71","#1ABC9C","#16A085","#7DCEA0","#73C6B6","#A9DFBF","#52BE80"],T=s.width/2,A=s.height/2,C=s.width/2-5,D=3500;for(let N=0;N<D;N++){let L=Math.random()*s.width,U=Math.random()*s.height;if(Math.sqrt(Math.pow(L-T,2)+Math.pow(U-A,2))>C)continue;const $=Math.random()*4+1.5,ee=(Math.floor(U)*s.width+Math.floor(L))*4,R=m[ee]>128?v:_;let M=R[Math.floor(Math.random()*R.length)];Math.random()<.05&&(M="#95A5A6"),a.beginPath(),a.arc(L,U,$,0,Math.PI*2),a.fillStyle=M,a.fill()}},[n,e]),u.jsxs("div",{className:"relative",children:[u.jsx("canvas",{ref:t,width:320,height:320,className:"rounded-full shadow-lg bg-slate-50 dark:bg-slate-800 mx-auto border-4 border-slate-200 dark:border-slate-700"}),u.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner pointer-events-none opacity-20 bg-gradient-to-br from-white to-black"})]})},j9=({onBack:n,onComplete:e})=>{const[t,s]=F.useState([]),[a,o]=F.useState(0),[c,f]=F.useState([]),[p,m]=F.useState(""),[v,_]=F.useState(!1);F.useEffect(()=>{const C=Array.from({length:10},()=>({number:Math.floor(Math.random()*90)+10}));s(C)},[]);const T=()=>{oe.play("click");const C=[...c,p];f(C),m(""),a<t.length-1?o(a+1):(oe.play("finish"),_(!0))};if(t.length===0)return u.jsx("div",{className:"p-10 text-center dark:text-white flex items-center justify-center min-h-[50vh]",children:"Menyiapkan Tes..."});if(v){const C=t.filter((B,$)=>{var ee;return B.number.toString().trim()===((ee=c[$])==null?void 0:ee.trim())}).length,D=C>=8,N=t.map((B,$)=>({id:`cb-q-${$}`,type:"short_answer",content:`Ishihara Plate #${$+1}`,correctAnswer:B.number.toString(),explanation:`Plate displayed number ${B.number}`,metadata:{difficulty:"Medium",idealTimeSeconds:10,topic:"Buta Warna",subtest:"Ishihara"}})),L=c.map((B,$)=>({questionId:`cb-q-${$}`,selectedAnswer:B,isCorrect:B.trim()===t[$].number.toString().trim(),scoreEarned:B.trim()===t[$].number.toString().trim()?10:0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1})),U={id:`cb-${Date.now()}`,date:new Date().toISOString(),category:"BUTAWRNA",score:C*10,maxScore:100,details:{type:"Ishihara Simulation",passed:D},questions:N,answers:L};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex items-center justify-center transition-colors",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl max-w-lg w-full text-center max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${D?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:D?u.jsx(Vs,{size:40}):u.jsx(b0,{size:40})}),u.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:D?"Mata Normal":"Indikasi Buta Warna"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Skor Anda: ",C," dari ",t.length]}),u.jsx("div",{className:"mb-6 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden text-left",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-300 font-bold",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-3",children:"Plate"}),u.jsx("th",{className:"p-3 text-center",children:"Angka"}),u.jsx("th",{className:"p-3 text-center",children:"Jawab"}),u.jsx("th",{className:"p-3 text-center",children:"Status"})]})}),u.jsx("tbody",{children:t.map((B,$)=>{const ee=c[$],se=B.number.toString().trim()===ee.trim();return u.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 text-slate-700 dark:text-slate-300",children:[u.jsxs("td",{className:"p-3 font-medium",children:["#",$+1]}),u.jsx("td",{className:"p-3 font-mono text-center",children:B.number}),u.jsx("td",{className:"p-3 font-mono text-center text-slate-600 dark:text-slate-400",children:ee||"-"}),u.jsx("td",{className:"p-3 text-center",children:se?u.jsx(Vs,{size:16,className:"text-emerald-500 inline"}):u.jsx(b0,{size:16,className:"text-rose-500 inline"})})]},$)})})]})}),u.jsx("button",{onClick:()=>e(U),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:"Simpan & Keluar"}),u.jsx("p",{className:"mt-4 text-[10px] text-slate-400",children:"Hasil ini adalah simulasi. Untuk diagnosis medis, hubungi dokter mata."})]})})}const A=t[a];return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center transition-colors",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:n,className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600",children:[u.jsx(kt,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("span",{className:"text-sm font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-3 py-1 rounded-full",children:[a+1," / ",t.length]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-lg border border-slate-100 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"mb-8 flex justify-center py-4",children:u.jsx(V9,{targetNumber:A.number,refreshTrigger:a})}),u.jsx("p",{className:"mb-4 text-slate-600 dark:text-slate-300 font-medium",children:"Angka berapa yang Anda lihat?"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"number",className:"flex-1 p-4 text-center text-2xl font-bold border-2 border-slate-200 dark:border-slate-600 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none",placeholder:"?",value:p,onChange:C=>m(C.target.value),autoFocus:!0,onKeyDown:C=>C.key==="Enter"&&p&&T()}),u.jsx("button",{onClick:T,disabled:!p,className:"px-6 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none disabled:opacity-50 hover:bg-indigo-700 transition",children:"OK"})]}),u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsx("button",{onClick:()=>m("0"),className:"text-xs text-slate-400 hover:text-indigo-500 underline",children:"Saya tidak melihat angka"})})]})]})})},Dg=(n,e)=>{if(e===null)return 0;if(n==="REACTION")return e<=150?99:e>=450?1:Math.max(1,Math.min(99,Math.round(100-(e-150)/300*100)));if(n==="AIM")return e<=250?99:e>=800?1:Math.max(1,Math.min(99,Math.round(100-(e-250)/550*100)));if(n==="TYPING")return e>=120?99.9:e<=10?1:Math.max(1,Math.min(99,Math.round((e-10)/110*100)));{let t=50;return n==="SEQUENCE"&&(t=30),n==="CHIMP"&&(t=40),n==="VISUAL"&&(t=30),n==="NUMBER"&&(t=20),n==="VERBAL"&&(t=100),n==="BRIDGE"&&(t=30),n==="MATCH"&&(t=30),Math.max(1,Math.min(99,Math.round(e/t*100)))}},O9=n=>n>=90?"Top Class (Sangat Luar Biasa)":n>=75?"Superior (Di Atas Rata-rata)":n>=50?"Average (Rata-rata)":n>=25?"Below Average (Perlu Latihan)":"Novice (Pemula)",_0=n=>{switch(n){case"REACTION":return"text-amber-500 bg-amber-50 dark:bg-amber-900/20";case"SEQUENCE":return"text-indigo-500 bg-indigo-50 dark:bg-indigo-900/20";case"AIM":return"text-orange-500 bg-orange-50 dark:bg-orange-900/20";case"CHIMP":return"text-teal-500 bg-teal-50 dark:bg-teal-900/20";case"VISUAL":return"text-sky-500 bg-sky-50 dark:bg-sky-900/20";case"NUMBER":return"text-blue-600 bg-blue-50 dark:bg-blue-900/20";case"VERBAL":return"text-purple-500 bg-purple-50 dark:bg-purple-900/20";case"TYPING":return"text-slate-500 bg-slate-50 dark:bg-slate-700/50";case"BRIDGE":return"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20";case"MATCH":return"text-pink-500 bg-pink-50 dark:bg-pink-900/20";default:return"text-slate-500 bg-slate-100"}},I1=n=>{switch(n){case"REACTION":return u.jsx(ra,{size:20});case"SEQUENCE":return u.jsx(rr,{size:20});case"AIM":return u.jsx(no,{size:20});case"CHIMP":return u.jsx(Rs,{size:20});case"VISUAL":return u.jsx(rr,{size:20});case"NUMBER":return u.jsx(If,{size:20});case"VERBAL":return u.jsx(Mf,{size:20});case"TYPING":return u.jsx(Zi,{size:20});case"BRIDGE":return u.jsx(kf,{size:20});case"MATCH":return u.jsx(Cf,{size:20});default:return u.jsx(Ls,{size:20})}},k1=n=>{switch(n){case"REACTION":return"Reaction Time";case"SEQUENCE":return"Sequence Memory";case"AIM":return"Aim Trainer";case"CHIMP":return"Chimp Test";case"VISUAL":return"Visual Memory";case"NUMBER":return"Number Memory";case"VERBAL":return"Verbal Memory";case"TYPING":return"Typing Test";case"BRIDGE":return"Bridge Memory";case"MATCH":return"Match Memory";default:return n}},G9=()=>u.jsx("div",{className:"text-amber-500 mb-4 mx-auto w-fit",children:u.jsx(Ls,{size:64})}),B9=({percentile:n,score:e,unit:t,game:s})=>{const c=n/100*300;return u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsxs("div",{className:"relative w-full max-w-[300px] h-[120px]",children:[u.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 300 100",className:"overflow-visible",children:[u.jsx("path",{d:"M0,100 C60,100 100,10 150,10 S240,100 300,100 Z",fill:"url(#grad1)",stroke:"none",className:"opacity-80"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[u.jsx("stop",{offset:"0%",style:{stopColor:"#3b82f6",stopOpacity:.2}}),u.jsx("stop",{offset:"50%",style:{stopColor:"#3b82f6",stopOpacity:.8}}),u.jsx("stop",{offset:"100%",style:{stopColor:"#3b82f6",stopOpacity:.2}})]})}),u.jsx("line",{x1:c,y1:"10",x2:c,y2:"100",stroke:"#ef4444",strokeWidth:"2",strokeDasharray:"4"}),u.jsx("circle",{cx:c,cy:"10",r:"4",fill:"#ef4444"})]}),u.jsxs("div",{className:"absolute top-0 transform -translate-x-1/2 -translate-y-6 bg-slate-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",style:{left:`${n}%`},children:["You: ",e," ",t]})]}),u.jsxs("div",{className:"w-full flex justify-between text-[10px] text-slate-400 mt-1 max-w-[300px]",children:[u.jsx("span",{children:"Bottom 1%"}),u.jsx("span",{children:"Average"}),u.jsx("span",{children:"Top 1%"})]})]})},H9=({isOpen:n,onClose:e,game:t,bestScore:s})=>{if(!n)return null;const a=Dg(t,s),o=O9(a);let c="pts";return(t==="REACTION"||t==="AIM")&&(c="ms"),t==="TYPING"&&(c="wpm"),(t==="SEQUENCE"||t==="NUMBER"||t==="CHIMP"||t==="VISUAL"||t==="BRIDGE"||t==="MATCH")&&(c="lvl"),u.jsx("div",{className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:e,children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-sm rounded-3xl p-6 shadow-2xl border border-slate-200 dark:border-slate-700",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(Oc,{className:"text-indigo-500"})," Statistik Anda"]}),u.jsx("button",{onClick:()=>{oe.play("back"),e()},children:u.jsx(A1,{size:24,className:"text-slate-400 hover:text-rose-500"})})]}),s!==null?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-sm text-slate-500 uppercase font-bold mb-1",children:"Skor Terbaik"}),u.jsxs("div",{className:"text-4xl font-black text-slate-900 dark:text-white",children:[s," ",u.jsx("span",{className:"text-lg font-medium text-slate-400",children:c})]}),u.jsxs("div",{className:"inline-block mt-2 px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-bold",children:["Lebih baik dari ",a,"% orang"]})]}),u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-600",children:[u.jsx(B9,{percentile:a,score:s,unit:c,game:t}),u.jsx("p",{className:"text-center text-xs text-slate-500 mt-4 font-medium",children:o})]})]}):u.jsx("div",{className:"text-center py-8 text-slate-500",children:"Belum ada data. Mainkan game ini untuk melihat statistik Anda."})]})})},z9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("WAITING"),[a,o]=F.useState(0),[c,f]=F.useState([]),[p,m]=F.useState(0),v=F.useRef(null);F.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const _=()=>{s("READY");const N=Math.floor(Math.random()*3e3)+2e3;v.current=window.setTimeout(()=>{o(Date.now()),s("GO")},N)},T=()=>{if(t==="WAITING")_();else if(t==="READY")v.current&&clearTimeout(v.current),s("TOO_SOON");else if(t==="GO"){const N=Date.now()-a;m(N);const L=[...c,N];f(L),L.length>=5?(s("FINAL_SCORE"),oe.play("finish")):(s("RESULT"),oe.play("success"))}else(t==="RESULT"||t==="TOO_SOON")&&s("WAITING")},A=c.length>0?Math.round(c.reduce((N,L)=>N+L,0)/c.length):0;let C,D="bg-slate-900";return t==="WAITING"?(C=u.jsxs(u.Fragment,{children:[u.jsx(ra,{size:80,className:"mx-auto mb-6 text-amber-400"}),u.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Reaction Time"}),u.jsxs("h3",{className:"text-xl text-white/60 mb-8",children:["Percobaan ",c.length+1," dari 5"]}),u.jsx("p",{className:"text-white/80",children:"Klik untuk mulai."})]}),D="bg-slate-800"):t==="READY"?(C=u.jsx("h2",{className:"text-5xl font-bold text-white tracking-widest",children:"..."}),D="bg-rose-600"):t==="GO"?(C=u.jsx("h2",{className:"text-6xl font-black text-white",children:"KLIK!"}),D="bg-emerald-500"):t==="RESULT"?(C=u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-2xl text-white/80 mb-2",children:[p," ms"]}),u.jsx("p",{className:"text-white/60",children:"Klik untuk lanjut."})]}),D="bg-indigo-600"):t==="FINAL_SCORE"?(C=u.jsxs(u.Fragment,{children:[u.jsx(Ls,{size:64,className:"mx-auto mb-4 text-emerald-400"}),u.jsx("div",{className:"text-xl text-white/80 mb-2",children:"Rata-rata"}),u.jsxs("h2",{className:"text-7xl font-black text-white mb-8",children:[A," ms"]}),u.jsxs("div",{className:"flex flex-col gap-3 w-64 mx-auto",children:[u.jsx("button",{className:"px-6 py-3 bg-white text-slate-900 rounded-xl font-bold",onClick:()=>n(A),children:"Simpan Skor"}),u.jsx("button",{className:"px-6 py-3 border-2 border-white/30 text-white rounded-xl font-bold",onClick:()=>{f([]),s("WAITING")},children:"Coba Lagi"})]})]}),D="bg-slate-800"):t==="TOO_SOON"&&(C=u.jsxs(u.Fragment,{children:[u.jsx(G9,{}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Terlalu Cepat!"}),u.jsx("p",{className:"text-white/80",children:"Klik untuk ulang."})]}),D="bg-slate-800"),u.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center cursor-pointer select-none ${D}`,onMouseDown:t!=="FINAL_SCORE"?T:void 0,children:[u.jsx("button",{onClick:N=>{N.stopPropagation(),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),C]})},F9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState([]),[a,o]=F.useState([]),[c,f]=F.useState(1),[p,m]=F.useState("START"),[v,_]=F.useState(null),T=async(C,D)=>{m("WATCHING"),o([]);const N=Math.floor(Math.random()*9),L=[...D,N];s(L),await new Promise(U=>setTimeout(U,800));for(let U=0;U<L.length;U++)_(L[U]),oe.play("click"),await new Promise(B=>setTimeout(B,600)),_(null),await new Promise(B=>setTimeout(B,200));m("PLAYING")},A=async C=>{if(p!=="PLAYING")return;_(C),oe.play("tap"),setTimeout(()=>_(null),200);const D=[...a,C];if(o(D),D[D.length-1]!==t[D.length-1]){m("GAMEOVER"),oe.play("error");return}D.length===t.length&&(m("WATCHING"),oe.play("success"),await new Promise(N=>setTimeout(N,800)),f(N=>N+1),T(c+1,t))};return p==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(rr,{size:80,className:"mx-auto mb-6 text-indigo-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Sequence Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat urutan kotak yang menyala. Pola akan bertambah satu langkah setiap level."}),u.jsx("button",{onClick:()=>T(1,[]),className:"px-8 py-3 bg-indigo-500 text-white rounded-xl font-bold text-lg hover:bg-indigo-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(rr,{size:64,className:"mx-auto mb-6 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:c})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{f(1),T(1,[])},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(1,c-1)),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["Level ",c]}),u.jsx("p",{className:"text-slate-400 text-sm animate-pulse h-6",children:p==="WATCHING"?"Lihat polanya...":"Giliranmu!"})]}),u.jsx("div",{className:"grid grid-cols-3 gap-3 p-4",children:Array.from({length:9}).map((C,D)=>u.jsx("div",{onClick:()=>A(D),className:`w-20 h-20 sm:w-28 sm:h-28 rounded-xl transition-all duration-100 cursor-pointer border-4 border-slate-800 ${v===D?"bg-white shadow-[0_0_30px_rgba(255,255,255,0.8)] scale-95 border-white":"bg-slate-700 hover:bg-slate-600"}`},D))})]})},q9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState("IDLE"),[a,o]=F.useState(30),[c,f]=F.useState({top:"50%",left:"50%"}),[p,m]=F.useState([]),v=F.useRef(null),[_,T]=F.useState(0),[A,C]=F.useState(0),[D,N]=F.useState(0),[L,U]=F.useState(null),B=()=>{if(!v.current)return;const k=v.current.getBoundingClientRect(),O=96,V=50,G=k.width-O-V,j=k.height-O-V,pe=Math.max(V,Math.random()*G),we=Math.max(V,Math.random()*j);f({top:`${we}px`,left:`${pe}px`})},$=()=>{s("PLAYING"),o(30),m([]),T(0),C(0),B()};F.useEffect(()=>{if(t==="PLAYING"&&A>0){const k=setInterval(()=>{T(Date.now()-A)},50);return U(k),()=>clearInterval(k)}},[t,A]);const ee=k=>{if(k.stopPropagation(),t!=="PLAYING")return;const O=Date.now();if(A===0){C(O),N(O),o(G=>G-1),B(),oe.play("click");return}const V=O-D;m(G=>[...G,V]),N(O),oe.play("click"),a<=1?(clearInterval(L),s("FINISHED"),oe.play("finish")):(o(G=>G-1),B())},se=()=>{t==="PLAYING"&&A>0&&oe.play("error")},R=p.length>0?Math.round(p.reduce((k,O)=>k+O,0)/p.length):0,M=p.length>0?Math.round(p.reduce((k,O)=>k+O,0)/p.length):0;return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",onMouseDown:se,children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),t==="IDLE"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:k=>k.stopPropagation(),children:[u.jsx(no,{size:80,className:"mx-auto mb-6 text-orange-500"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Aim Trainer"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik 30 target secepat mungkin. Waktu dimulai saat target pertama diklik."}),u.jsx("button",{onClick:$,className:"px-8 py-3 bg-orange-500 text-white rounded-xl font-bold text-lg hover:bg-orange-600 transition",children:"Mulai"})]}),t==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute top-8 flex gap-8 items-center pointer-events-none z-10 select-none",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Remaining"}),u.jsx("div",{className:"text-white font-mono text-3xl font-bold",children:a})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Time"}),u.jsxs("div",{className:"text-white font-mono text-3xl font-bold",children:[(_/1e3).toFixed(1),"s"]})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-white/50 text-xs font-bold uppercase",children:"Avg"}),u.jsxs("div",{className:"text-orange-400 font-mono text-3xl font-bold",children:[M," ms"]})]})]}),u.jsx("div",{ref:v,className:"w-full h-full relative max-w-5xl max-h-[80vh] cursor-crosshair",children:u.jsxs("div",{onMouseDown:ee,className:"absolute w-24 h-24 rounded-full bg-orange-500 border-4 border-white shadow-[0_0_15px_rgba(249,115,22,0.6)] cursor-pointer flex items-center justify-center hover:scale-95 transition-transform duration-75",style:{top:c.top,left:c.left},children:[u.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),u.jsx("div",{className:"absolute w-12 h-12 border-2 border-white/50 rounded-full"}),u.jsx("div",{className:"absolute w-20 h-20 border border-white/20 rounded-full"})]})})]}),t==="FINISHED"&&u.jsxs("div",{className:"text-center text-white cursor-default",onClick:k=>k.stopPropagation(),children:[u.jsx(no,{size:64,className:"mx-auto mb-4 text-orange-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selesai!"}),u.jsx("p",{className:"text-white/60 mb-6",children:"Rata-rata waktu per target"}),u.jsxs("h1",{className:"text-7xl font-black mb-8",children:[R," ms"]}),u.jsxs("div",{className:"text-white/40 mb-8 font-mono",children:["Total Waktu: ",(_/1e3).toFixed(2),"s"]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>n(R),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold",children:"Simpan Skor"}),u.jsx("button",{onClick:$,className:"w-full py-3 border border-white/20 rounded-xl font-bold",children:"Coba Lagi"})]})]})]})},K9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(4),[a,o]=F.useState([]),[c,f]=F.useState("IDLE"),[p,m]=F.useState(1),[v,_]=F.useState(!1),T=C=>{const N=Array.from({length:40},(U,B)=>B).sort(()=>.5-Math.random()),L=Array.from({length:C},(U,B)=>({id:B+1,pos:N[B],visible:!0}));o(L),m(1),_(!1),f("PLAYING")},A=C=>{c==="PLAYING"&&(C===p?(oe.play("click"),C===1&&_(!0),o(D=>D.map(N=>N.id===C?{...N,visible:!1}:N)),C===a.length?(oe.play("success"),setTimeout(()=>{s(D=>D+1),T(t+1)},500)):m(D=>D+1)):(oe.play("error"),f("GAMEOVER")))};return u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),c==="IDLE"&&u.jsxs("div",{className:"text-center text-white max-w-md p-6",children:[u.jsx(Rs,{size:80,className:"mx-auto mb-6 text-teal-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Chimp Test"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Klik angka secara berurutan. Setelah klik angka 1, sisanya akan tertutup. Uji ingatan visualmu!"}),u.jsx("button",{onClick:()=>T(4),className:"px-8 py-3 bg-teal-500 text-white rounded-xl font-bold text-lg hover:bg-teal-600 transition",children:"Mulai Tes"})]}),c==="PLAYING"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-white mb-4 font-bold text-lg",children:["Level ",t-3]}),u.jsx("div",{className:"grid grid-cols-8 gap-2 md:gap-4 p-4 max-w-3xl",children:Array.from({length:40}).map((C,D)=>{const N=a.find(L=>L.pos===D);return!N||!N.visible?u.jsx("div",{className:"w-10 h-10 md:w-16 md:h-16"},D):u.jsx("button",{onMouseDown:()=>A(N.id),className:`w-10 h-10 md:w-16 md:h-16 rounded-lg border-2 font-bold flex items-center justify-center transition-transform active:scale-95 text-xl md:text-3xl ${v&&N.id>1?"bg-indigo-100 border-indigo-200 text-transparent hover:bg-indigo-200":"bg-indigo-500 border-indigo-400 text-white hover:bg-indigo-400 shadow-lg"}`,children:v&&N.id>1?"":N.id},D)})})]}),c==="GAMEOVER"&&u.jsxs("div",{className:"text-center text-white",children:[u.jsx(Rs,{size:64,className:"mx-auto mb-4 text-rose-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-white/60 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t-1})]}),u.jsxs("div",{className:"space-y-3 w-64 mx-auto",children:[u.jsx("button",{onClick:()=>{T(4),s(4)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold hover:bg-indigo-700",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(Math.max(0,t-1)),className:"w-full py-3 border border-white/20 rounded-xl font-bold hover:bg-white/10",children:"Simpan Skor"})]})]})]})},$9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(3),[c,f]=F.useState(3),[p,m]=F.useState([]),[v,_]=F.useState([]),[T,A]=F.useState([]),[C,D]=F.useState("START"),N=U=>{let B=3;U>2&&(B=4),U>5&&(B=5),U>10&&(B=6),U>20&&(B=7),f(B);const $=Math.min(Math.floor(B*B/2),U+2),ee=[];for(;ee.length<$;){const se=Math.floor(Math.random()*(B*B));ee.includes(se)||ee.push(se)}m(ee),_([]),A([]),D("SHOWING"),setTimeout(()=>D("PLAYING"),1e3+U*100)},L=U=>{if(C==="PLAYING"&&!(v.includes(U)||T.includes(U)))if(p.includes(U)){oe.play("tap");const B=[...v,U];_(B),B.length===p.length&&(oe.play("success"),setTimeout(()=>{s($=>$+1),N(t+1)},500))}else{oe.play("error");const B=a-1;o(B),A($=>[...$,U]),B<=0&&setTimeout(()=>D("GAMEOVER"),500)}};return C==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(rr,{size:80,className:"mx-auto mb-6 text-sky-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Visual Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!"}),u.jsx("button",{onClick:()=>{s(1),o(3),N(1)},className:"px-8 py-3 bg-sky-500 text-white rounded-xl font-bold text-lg hover:bg-sky-600 transition",children:"Mulai"})]})]}):C==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full border border-slate-700",children:[u.jsx(rr,{size:64,className:"mx-auto mb-6 text-sky-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{s(1),o(3),N(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center mb-8 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((U,B)=>u.jsx(dh,{size:24,className:B<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},B))})]}),u.jsx("div",{className:"grid gap-2 bg-slate-800 p-4 rounded-xl shadow-2xl transition-all duration-300",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,width:"min(90vw, 400px)",aspectRatio:"1/1"},children:Array.from({length:c*c}).map((U,B)=>{const $=p.includes(B),ee=v.includes(B),se=T.includes(B);let R="bg-slate-700 hover:bg-slate-600";return C==="SHOWING"&&$&&(R="bg-white shadow-[0_0_15px_white] scale-95"),C==="PLAYING"&&ee&&(R="bg-white"),C==="PLAYING"&&se&&(R="bg-slate-900 border-2 border-rose-900"),u.jsx("div",{onMouseDown:()=>L(B),className:`rounded-lg transition-all duration-200 cursor-pointer ${R}`},B)})})]})},Y9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(""),[c,f]=F.useState(""),[p,m]=F.useState("START"),[v,_]=F.useState(0),[T,A]=F.useState(100),C=U=>{let B="";for(let $=0;$<U;$++)B+=Math.floor(Math.random()*10);return B},D=()=>{s(1),N(1)},N=U=>{const B=C(U);o(B),m("SHOWING"),A(100);const $=1e3+U*500;_($),setTimeout(()=>{A(0)},50),setTimeout(()=>{m("INPUT")},$)},L=U=>{U==null||U.preventDefault(),c===a?(oe.play("success"),m("RESULT"),setTimeout(()=>{s(B=>B+1),f(""),N(t+1)},1e3)):(oe.play("error"),m("GAMEOVER"))};return p==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(If,{size:80,className:"mx-auto mb-6 text-blue-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Number Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Ingat angka yang muncul, lalu ketik ulang. Angka akan bertambah panjang setiap level."}),u.jsx("button",{onClick:D,className:"px-8 py-3 bg-blue-500 text-white rounded-xl font-bold text-lg hover:bg-blue-600 transition",children:"Mulai"})]})]}):p==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(If,{size:64,className:"mx-auto mb-6 text-blue-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Salah!"}),u.jsxs("div",{className:"text-left bg-slate-900 p-4 rounded-xl mb-6 font-mono text-sm break-all",children:[u.jsx("div",{className:"text-slate-400 mb-1",children:"Angka:"}),u.jsx("div",{className:"text-white font-bold mb-2 tracking-widest",children:a}),u.jsx("div",{className:"text-slate-400 mb-1",children:"Jawab:"}),u.jsx("div",{className:"text-rose-500 line-through tracking-widest",children:c})]}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),p==="SHOWING"&&u.jsxs("div",{className:"text-center animate-fade-in-up w-full px-8",children:[u.jsx("h2",{className:"text-6xl md:text-8xl font-black text-white font-mono tracking-widest",children:a}),u.jsx("div",{className:"w-full max-w-md h-2 bg-slate-800 rounded-full mt-8 mx-auto overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${T}%`,transitionDuration:`${v}ms`,opacity:T>0?1:.2}})})]}),p==="INPUT"&&u.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[u.jsx("h3",{className:"text-xl text-white mb-4",children:"Apa angkanya?"}),u.jsxs("form",{onSubmit:L,children:[u.jsx("input",{type:"number",autoFocus:!0,value:c,onChange:U=>f(U.target.value),className:"w-full bg-slate-800 text-white text-3xl font-mono text-center py-4 rounded-xl border-2 border-slate-700 focus:border-blue-500 focus:outline-none mb-4"}),u.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition",children:"Submit"})]})]}),p==="RESULT"&&u.jsxs("div",{className:"text-center",children:[u.jsx(Vs,{size:80,className:"text-emerald-500 mx-auto mb-4 animate-bounce-slow"}),u.jsx("h2",{className:"text-2xl text-white font-bold",children:"Benar!"})]})]})},J9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(0),[a,o]=F.useState(3),[c,f]=F.useState(""),[p,m]=F.useState(new Set),[v,_]=F.useState("START"),T=["RUMAH","POHON","MEJA","BUKU","JALAN","AIR","API","LANGIT","BUMI","LAUT","GUNUNG","KOTA","DESA","MOBIL","SEPEDA","KAPAL","IKAN","BURUNG","KUCING","ANJING","MERAH","BIRU","HIJAU","KUNING","PUTIH","HITAM","BESAR","KECIL","PANJANG","PENDEK","KERJA","MAIN","TIDUR","MAKAN","MINUM","LARI","DUDUK","BERDIRI","CINTA","BENCI","SENANG","SEDIH","MARAH","TAKUT","BERANI","KUAT","LEMAH","PINTAR","BODOH","CEPAT","AWAN","BINTANG","BULAN","CAHAYA","GELAP","TERANG","PAGI","SIANG","SORE","MALAM","WAKTU","JAM","MENIT","DETIK","TAHUN","BULAN","MINGGU","HARI"],A=()=>{const N=p.size>0&&Math.random()<.4;let L="";if(N){const U=Array.from(p);L=U[Math.floor(Math.random()*U.length)]}else{let U=0;do L=T[Math.floor(Math.random()*T.length)],U++;while(p.has(L)&&U<100)}f(L)},C=N=>{const L=p.has(c);if(N==="SEEN"&&L||N==="NEW"&&!L)s(B=>B+1),N==="NEW"&&m(B=>new Set(B).add(c)),oe.play("click"),A();else{const B=a-1;o(B),oe.play("error"),N==="NEW"&&m($=>new Set($).add(c)),B<=0?_("GAMEOVER"):A()}},D=()=>{s(0),o(3),m(new Set),_("PLAYING"),A()};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Mf,{size:80,className:"mx-auto mb-6 text-purple-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Verbal Memory"}),u.jsxs("p",{className:"text-white/60 mb-8",children:["Anda akan melihat kata-kata satu per satu. Jika kata tersebut belum pernah muncul, klik ",u.jsx("strong",{children:"BARU"}),". Jika sudah, klik ",u.jsx("strong",{children:"SUDAH"}),"."]}),u.jsx("button",{onClick:D,className:"px-8 py-3 bg-purple-500 text-white rounded-xl font-bold text-lg hover:bg-purple-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Mf,{size:64,className:"mx-auto mb-6 text-purple-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Verbal Memory"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Skor: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})," kata"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(t),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center select-none",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"flex gap-8 mb-12 text-lg font-bold text-white items-center",children:[u.jsxs("div",{children:["Skor: ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((N,L)=>u.jsx(dh,{size:24,className:L<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},L))})]}),u.jsx("div",{className:"text-5xl md:text-7xl font-black text-white mb-12 animate-fade-in-up transition-all",children:c}),u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{onClick:()=>C("SEEN"),className:"px-8 py-4 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold text-xl transition w-40",children:"SUDAH"}),u.jsx("button",{onClick:()=>C("NEW"),className:"px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white rounded-xl font-bold text-xl transition w-40",children:"BARU"})]})]})},Q9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(""),[a,o]=F.useState(""),[c,f]=F.useState(null),[p,m]=F.useState(0),[v,_]=F.useState(0),[T,A]=F.useState("START");F.useEffect(()=>{const N=db,L=N.length>0?N[Math.floor(Math.random()*N.length)]:"";s(L)},[]),F.useEffect(()=>{let N;return T==="PLAYING"&&c&&(N=setInterval(()=>{const U=(Date.now()-c)/1e3;_(Math.floor(U));const B=a.length,$=U/60;$>0&&m(Math.round(B/5/$))},1e3)),()=>clearInterval(N)},[T,c,a]);const C=N=>{const L=N.target.value;if(T==="START"&&(f(Date.now()),A("PLAYING")),o(L),L===t){const U=(Date.now()-(c||Date.now()))/6e4,B=Math.round(t.length/5/U);m(B),A("FINISHED"),oe.play("finish")}else L.length%5===0&&oe.play("tap")},D=()=>{const N=db,L=N.length>0?N[Math.floor(Math.random()*N.length)]:"";s(L),o(""),f(null),m(0),_(0),A("START")};return T==="FINISHED"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Zi,{size:64,className:"mx-auto mb-6 text-slate-400"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Typing Speed"}),u.jsxs("h1",{className:"text-6xl font-black text-emerald-400 mb-6",children:[p," ",u.jsx("span",{className:"text-xl text-white/50",children:"WPM"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:D,className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>n(p),className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center p-6",children:[u.jsx("button",{onClick:e,className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"flex gap-12 mb-8 text-white font-mono text-xl",children:[u.jsxs("div",{children:["WPM: ",u.jsx("span",{className:"font-bold text-emerald-400",children:p})]}),u.jsxs("div",{children:["Time: ",u.jsxs("span",{className:"font-bold text-emerald-400",children:[v,"s"]})]})]}),u.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-6 rounded-2xl shadow-xl",children:[u.jsx("div",{className:"mb-6 text-lg text-slate-400 leading-relaxed select-none",children:t.split("").map((N,L)=>{let U="text-slate-500";return L<a.length&&(U=a[L]===N?"text-white":"text-rose-500 bg-rose-500/20"),u.jsx("span",{className:U,children:N},L)})}),u.jsx("textarea",{value:a,onChange:C,className:"w-full bg-slate-900 text-white p-4 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none h-32 resize-none font-mono",placeholder:"Mulai ketik di sini...",autoFocus:!0})]})]})},W9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(3),[c,f]=F.useState(5),[p,m]=F.useState(4),[v,_]=F.useState([]),[T,A]=F.useState("START"),[C,D]=F.useState(0),[N,L]=F.useState(100),[U,B]=F.useState(1500),$=R=>{const k=4+Math.floor(R/2);f(5),m(k);const O=[];let V=k-1,G=Math.floor(5/2);for(O.push({row:V,col:G});V>0;){V--;const j=[G];G>0&&j.push(G-1),G<4&&j.push(G+1),G=j[Math.floor(Math.random()*j.length)],O.push({row:V,col:G})}_(O)},ee=R=>{$(R),A("SHOWING"),L(100);const M=1500;B(M),setTimeout(()=>L(0),50),setTimeout(()=>{A("PLAYING"),D(0)},M)},se=(R,M)=>{if(T!=="PLAYING")return;const k=v[C];if(R===k.row&&M===k.col){oe.play("click");const O=C+1;D(O),O===v.length&&(oe.play("success"),setTimeout(()=>{s(V=>V+1),ee(t+1)},500))}else oe.play("error"),o(O=>O-1),a<=1?A("GAMEOVER"):(A("SHOWING"),L(100),setTimeout(()=>L(0),50),setTimeout(()=>{A("PLAYING"),D(0)},U))};return T==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(kf,{size:80,className:"mx-auto mb-6 text-emerald-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Bridge Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang."}),u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),ee(1)},className:"px-8 py-3 bg-emerald-500 text-white rounded-xl font-bold text-lg hover:bg-emerald-600 transition",children:"Mulai"})]})]}):T==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(kf,{size:64,className:"mx-auto mb-6 text-emerald-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(3),ee(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center overflow-hidden",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center mb-4 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((R,M)=>u.jsx(dh,{size:24,className:M<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},M))})]}),u.jsx("div",{className:`w-full max-w-xs h-2 bg-slate-800 rounded-full mb-6 overflow-hidden transition-opacity duration-300 ${T==="SHOWING"?"opacity-100":"opacity-0"}`,children:u.jsx("div",{className:"h-full bg-white transition-all ease-linear",style:{width:`${N}%`,transitionDuration:`${U}ms`}})}),u.jsx("div",{className:"flex-1 w-full max-w-md flex items-center justify-center p-4",children:u.jsx("div",{className:"grid gap-1.5 w-full h-full max-h-[70vh]",style:{gridTemplateColumns:`repeat(${c}, 1fr)`,gridTemplateRows:`repeat(${p}, 1fr)`},children:Array.from({length:p}).map((R,M)=>Array.from({length:c}).map((k,O)=>{const V=v.findIndex(we=>we.row===M&&we.col===O),G=V!==-1,j=G&&V<C;let pe="bg-slate-700";return T==="SHOWING"&&G?pe="bg-emerald-400":T==="PLAYING"&&(j?pe="bg-emerald-600":G&&V===C&&(pe="bg-slate-700 active:bg-emerald-400")),u.jsx("div",{onMouseDown:()=>se(M,O),className:`w-full h-full rounded-md transition-colors duration-200 cursor-pointer ${pe} hover:opacity-90`},`${M}-${O}`)}))})}),u.jsxs("div",{className:"mt-2 text-emerald-400 animate-bounce flex flex-col items-center",children:[u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-500 mb-1",children:"Start Here"}),u.jsx(bj,{size:32})]})]})},X9=({onFinish:n,onExit:e})=>{const[t,s]=F.useState(1),[a,o]=F.useState(5),[c,f]=F.useState([]),[p,m]=F.useState([]),[v,_]=F.useState("START"),[T,A]=F.useState(!1),[C,D]=F.useState(3),N=["","","","","","","","","","","","","","","",""],L=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-rose-500","bg-emerald-500","bg-fuchsia-500","bg-violet-500","bg-sky-500"],U=ee=>{const se=ee+2,R=se*2,M=Math.ceil(Math.sqrt(R));D(M);const k=[...N].sort(()=>Math.random()-.5).slice(0,se);let O=[];for(let V=0;V<se;V++){const G=k[V],j=L[V%L.length];O.push({id:V*2,icon:G,flipped:!0,matched:!1,color:j}),O.push({id:V*2+1,icon:G,flipped:!0,matched:!1,color:j})}O=O.sort(()=>Math.random()-.5).map((V,G)=>({...V,id:G})),f(O),_("PREVIEW")},B=()=>{oe.play("click"),f(ee=>ee.map(se=>({...se,flipped:!1}))),_("PLAYING")},$=ee=>{if(v!=="PLAYING"||T)return;const se=c.find(k=>k.id===ee);if(!se||se.flipped||se.matched)return;oe.play("click");const R=c.map(k=>k.id===ee?{...k,flipped:!0}:k);f(R);const M=[...p,ee];if(m(M),M.length===2){A(!0);const k=R.find(V=>V.id===M[0]),O=R.find(V=>V.id===M[1]);k&&O&&k.icon===O.icon?(oe.play("success"),setTimeout(()=>{f(V=>V.map(G=>M.includes(G.id)?{...G,matched:!0}:G)),m([]),A(!1),R.filter(V=>!V.matched&&!M.includes(V.id)).length===0&&setTimeout(()=>{s(V=>V+1),U(t+1)},500)},500)):setTimeout(()=>{oe.play("error"),f(V=>V.map(G=>M.includes(G.id)?{...G,flipped:!1}:G)),m([]),A(!1),o(V=>{const G=V-1;return G<=0&&_("GAMEOVER"),G})},1e3)}};return v==="START"?u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white z-[60]",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center max-w-md p-6",children:[u.jsx(Cf,{size:80,className:"mx-auto mb-6 text-pink-400"}),u.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Match Memory"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Hafalkan posisi pasangan simbol sebelum kartu ditutup. Cocokkan semua pasangan!"}),u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),U(1)},className:"px-8 py-3 bg-pink-500 text-white rounded-xl font-bold text-lg hover:bg-pink-600 transition",children:"Mulai"})]})]}):v==="GAMEOVER"?u.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"bg-slate-800 p-8 rounded-3xl text-center shadow-2xl max-w-sm w-full",children:[u.jsx(Cf,{size:64,className:"mx-auto mb-6 text-pink-500"}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Over"}),u.jsxs("p",{className:"text-slate-400 mb-6",children:["Level: ",u.jsx("span",{className:"text-white font-bold text-xl",children:t})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>{oe.play("click"),s(1),o(5),U(1)},className:"w-full py-3 bg-indigo-600 rounded-xl font-bold",children:"Coba Lagi"}),u.jsx("button",{onClick:()=>{oe.play("click"),n(t)},className:"w-full py-3 border border-slate-600 rounded-xl font-bold",children:"Simpan Skor"})]})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-slate-900 flex flex-col items-center justify-center",children:[u.jsx("button",{onClick:()=>{oe.play("back"),e()},className:"absolute top-6 left-6 bg-white/10 p-3 rounded-full text-white",children:u.jsx(kt,{size:24})}),u.jsxs("div",{className:"text-center mb-6 flex flex-col items-center gap-2",children:[u.jsxs("div",{className:"text-2xl font-bold text-white",children:["Level ",t]}),u.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((ee,se)=>u.jsx(dh,{size:24,className:se<a?"fill-rose-500 text-rose-500":"fill-slate-700 text-slate-700"},se))}),v==="PREVIEW"&&u.jsx("button",{onClick:B,className:"mt-4 px-8 py-2 bg-emerald-500 text-white font-bold rounded-full hover:bg-emerald-600 transition shadow-lg animate-pulse",children:"SAYA SIAP!"})]}),u.jsx("div",{className:"grid gap-3 justify-center max-w-2xl p-4",style:{gridTemplateColumns:`repeat(${C}, minmax(0, 1fr))`},children:c.map(ee=>u.jsx("div",{onClick:()=>$(ee.id),className:`w-16 h-16 sm:w-20 sm:h-20 rounded-xl flex items-center justify-center text-3xl font-bold cursor-pointer transition-all duration-300 transform ${ee.flipped||ee.matched?`${ee.color} text-white rotate-y-180`:"bg-slate-700 hover:bg-slate-600"}`,children:ee.flipped||ee.matched?ee.icon:""},ee.id))})]})},Z9=({username:n,history:e})=>{const[t,s]=F.useState({}),[a,o]=F.useState(!0),[c,f]=F.useState(!0),p=["REACTION","SEQUENCE","AIM","CHIMP","VISUAL","NUMBER","VERBAL","TYPING","BRIDGE","MATCH"];F.useEffect(()=>{(async()=>{if(!c)return;o(!0);const _={};await Promise.all(p.map(async T=>{try{const A=await lj(T);_[T]=A}catch{console.error("Failed to load leaderboard for",T),_[T]=[]}})),s(_),o(!1)})()},[c]);const m=v=>{const _=e.filter(T=>T.category!=="BENCHMARK"||!T.details?!1:T.details.game===v);return v==="REACTION"||v==="AIM"?_.sort((T,A)=>T.score-A.score):_.sort((T,A)=>A.score-T.score),_.slice(0,5).map(T=>{const A=T.details;return{name:n,score:T.score,unit:(A==null?void 0:A.unit)||""}})};return u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[u.jsx(E1,{className:"text-amber-500"})," Leaderboard"]}),u.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:[u.jsxs("button",{onClick:()=>f(!0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:[u.jsx(eO,{size:14,className:"inline mr-1"})," Global"]}),u.jsxs("button",{onClick:()=>f(!1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${c?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,children:[u.jsx(c9,{size:14,className:"inline mr-1"})," Personal"]})]})]}),a&&c?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[u.jsx(js,{size:40,className:"animate-spin mb-4 text-indigo-500"}),u.jsx("p",{children:"Memuat Data Global Rank..."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(v=>{let _=[];c?_=t[v]||[]:_=m(v);const T=_0(v);return u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[u.jsxs("div",{className:`p-4 ${T} bg-opacity-20 border-b border-slate-100 dark:border-slate-700 flex items-center gap-3`,children:[u.jsx("div",{className:"p-2 rounded-lg bg-white/50 text-slate-800",children:I1(v)}),u.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:k1(v)})]}),u.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:_.length>0?_.map((A,C)=>u.jsxs("div",{className:`p-3 flex justify-between items-center text-sm ${C===0?"bg-indigo-50 dark:bg-indigo-900/20":""}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:`font-bold w-4 text-center ${C===0?"text-amber-500":C===1?"text-slate-400":C===2?"text-orange-700":"text-slate-500"}`,children:C+1}),u.jsxs("span",{className:`font-medium truncate max-w-[120px] ${A.username===n||A.name===n?"text-indigo-600 dark:text-indigo-400 font-bold":"text-slate-700 dark:text-slate-300"}`,children:[A.name||A.username," ",A.username===n||A.name===n?"(You)":""]})]}),u.jsxs("span",{className:"font-mono font-bold text-slate-800 dark:text-white",children:[A.score,u.jsx("span",{className:"text-xs text-slate-400 ml-1",children:A.unit})]})]},C)):u.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"Belum ada data"})})]},v)})})]})},e8=({history:n})=>{const e=n.filter(t=>t.category==="BENCHMARK").sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()).slice(0,20);return e.length===0?u.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 rounded-3xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[u.jsx("div",{className:"inline-block p-4 bg-slate-100 dark:bg-slate-700 rounded-full mb-4",children:u.jsx(Rg,{size:32,className:"text-slate-400"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Belum ada aktivitas"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mainkan tes untuk melihat riwayat Anda di sini."})]}):u.jsxs("div",{className:"mt-8 animate-fade-in-up",children:[u.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[u.jsx(Ls,{className:"text-indigo-500"})," Recent Activity"]}),u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-white dark:bg-slate-800 border-b border-slate-100 dark:border-slate-700",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Test"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Date"}),u.jsx("th",{className:"p-5 text-sm font-bold text-slate-400 uppercase tracking-wider text-right",children:"Score"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:e.map(t=>{const s=t.details;if(!s)return null;const a=s.game,o=t.score,c=s.unit||"",f=Dg(a,o);return u.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group",children:[u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-2 rounded-xl ${_0(a)}`,children:I1(a)}),u.jsx("span",{className:`font-bold text-base ${_0(a).split(" ")[0]}`,children:k1(a)})]})}),u.jsx("td",{className:"p-5",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:new Date(t.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),u.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})}),u.jsx("td",{className:"p-5 text-right",children:u.jsxs("div",{className:"flex flex-col items-end",children:[u.jsxs("span",{className:"text-xl font-black text-slate-800 dark:text-white font-mono",children:[o,c]}),u.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${f>=50?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:["Top ",f,"%"]})]})})]},t.id)})})]})})})]})},t8=({onBack:n,username:e,history:t,onComplete:s,isGuest:a,initialMode:o})=>{const[c,f]=F.useState("MENU"),[p,m]=F.useState("DASHBOARD");F.useEffect(()=>{o&&f(o)},[o]);const[v,_]=F.useState(!1),[T,A]=F.useState("REACTION"),C=async(L,U)=>{let B="pts";(U==="REACTION"||U==="AIM")&&(B="ms"),(U==="SEQUENCE"||U==="NUMBER"||U==="CHIMP"||U==="VISUAL"||U==="BRIDGE"||U==="MATCH")&&(B="lvl"),U==="TYPING"&&(B="wpm"),a||oj(U,L,e,B).catch(ee=>console.error("Cloud save failed",ee));const $={id:`bench-${Date.now()}`,date:new Date().toISOString(),category:"BENCHMARK",score:L,maxScore:0,details:{game:U,unit:B},questions:[],answers:[]};s($),f("MENU")},D=L=>{const U=t.filter(ee=>ee.category!=="BENCHMARK"||!ee.details?!1:ee.details.game===L).map(ee=>{const se=ee.details;return{id:ee.id,game:se.game,score:ee.score,unit:se.unit,date:ee.date}});if(U.length===0)return{best:null,percentile:0};let B;L==="REACTION"||L==="AIM"?B=Math.min(...U.map(ee=>ee.score)):B=Math.max(...U.map(ee=>ee.score));const $=Dg(L,B);return{best:B,percentile:$}};if(c!=="MENU")switch(c){case"REACTION":return u.jsx(z9,{onFinish:L=>C(L,"REACTION"),onExit:()=>f("MENU")});case"SEQUENCE":return u.jsx(F9,{onFinish:L=>C(L,"SEQUENCE"),onExit:()=>f("MENU")});case"AIM":return u.jsx(q9,{onFinish:L=>C(L,"AIM"),onExit:()=>f("MENU")});case"CHIMP":return u.jsx(K9,{onFinish:L=>C(L,"CHIMP"),onExit:()=>f("MENU")});case"VISUAL":return u.jsx($9,{onFinish:L=>C(L,"VISUAL"),onExit:()=>f("MENU")});case"NUMBER":return u.jsx(Y9,{onFinish:L=>C(L,"NUMBER"),onExit:()=>f("MENU")});case"VERBAL":return u.jsx(J9,{onFinish:L=>C(L,"VERBAL"),onExit:()=>f("MENU")});case"TYPING":return u.jsx(Q9,{onFinish:L=>C(L,"TYPING"),onExit:()=>f("MENU")});case"BRIDGE":return u.jsx(W9,{onFinish:L=>C(L,"BRIDGE"),onExit:()=>f("MENU")});case"MATCH":return u.jsx(X9,{onFinish:L=>C(L,"MATCH"),onExit:()=>f("MENU")});default:return f("MENU"),null}const N=({game:L,title:U,desc:B,icon:$,colorClass:ee,btnColorClass:se})=>{const{best:R,percentile:M}=D(L);let k="pts";return(L==="REACTION"||L==="AIM")&&(k="ms"),L==="TYPING"&&(k="wpm"),(L==="SEQUENCE"||L==="NUMBER"||L==="CHIMP"||L==="VISUAL"||L==="BRIDGE"||L==="MATCH")&&(k="lvl"),u.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all group h-full",children:[u.jsx("div",{className:`absolute top-0 bottom-0 left-0 w-1.5 ${ee}`}),u.jsxs("div",{className:"p-5 flex flex-col sm:flex-row items-center gap-5 h-full",children:[u.jsx("div",{className:`p-4 rounded-2xl ${ee} bg-opacity-10 text-opacity-100 shrink-0`,children:u.jsx("div",{className:`${ee.replace("bg-","text-")}`,children:$})}),u.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0 w-full",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1 truncate",children:U}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 line-clamp-2 min-h-[2.5em]",children:B}),u.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mb-2 overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full ${ee}`,style:{width:`${M}%`}})}),u.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[u.jsxs("span",{children:["Best: ",R!==null?`${R} ${k}`:"-"]}),u.jsx("span",{children:M>0?`Top ${M}%`:"-"})]})]}),u.jsxs("div",{className:"flex flex-row sm:flex-col gap-2 w-full sm:w-auto shrink-0",children:[u.jsxs("button",{onClick:O=>{O.stopPropagation(),oe.play("click"),f(L)},className:`flex-1 sm:flex-none px-6 py-2.5 ${se} text-white rounded-xl font-bold text-sm shadow-md hover:shadow-lg hover:scale-105 transition flex items-center justify-center gap-2`,children:[u.jsx(hh,{size:16,fill:"currentColor"})," MAIN"]}),u.jsxs("button",{onClick:O=>{O.stopPropagation(),oe.play("click"),A(L),_(!0)},className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-500 dark:text-slate-300 rounded-xl font-bold text-xs transition flex items-center justify-center gap-1",children:[u.jsx(Oc,{size:14})," Stats"]})]})]})]})};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col font-sans transition-colors",children:u.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[u.jsx(H9,{isOpen:v,onClose:()=>_(!1),game:T,bestScore:D(T).best}),u.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:u.jsxs("button",{onClick:()=>{oe.play("back"),n()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium transition self-start",children:[u.jsx(kt,{size:20,className:"mr-2"})," Menu Utama"]})}),u.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[u.jsxs("h1",{className:"text-4xl font-black text-slate-900 dark:text-white mb-2 flex items-center justify-center sm:justify-start gap-3",children:[u.jsx(Ls,{className:"text-rose-500",size:40})," Human Benchmark"]}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:["Halo ",u.jsx("span",{className:"font-bold text-indigo-500",children:e}),"! Uji batas kemampuan kognitifmu."]}),a&&u.jsx("div",{className:"mt-2 text-xs bg-amber-100 text-amber-700 inline-block px-3 py-1 rounded-full font-bold",children:"Mode Tamu: Skor tidak disimpan ke Global Leaderboard"})]}),u.jsxs("div",{className:"flex justify-center sm:justify-start gap-4 mb-8 border-b border-slate-200 dark:border-slate-700",children:[u.jsx("button",{onClick:()=>m("DASHBOARD"),className:`pb-3 px-4 font-bold transition-all ${p==="DASHBOARD"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Game Dashboard"}),u.jsx("button",{onClick:()=>m("RANKING"),className:`pb-3 px-4 font-bold transition-all ${p==="RANKING"?"text-indigo-600 border-b-4 border-indigo-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Leaderboard"})]}),p==="DASHBOARD"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-10",children:[u.jsx(N,{game:"REACTION",title:"Reaction Time",desc:"Uji seberapa cepat refleks visual Anda merespons perubahan warna.",icon:u.jsx(ra,{size:32}),colorClass:"bg-amber-500",btnColorClass:"bg-amber-500 hover:bg-amber-600"}),u.jsx(N,{game:"SEQUENCE",title:"Sequence Memory",desc:"Ingat pola urutan kotak yang menyala semakin panjang.",icon:u.jsx(rr,{size:32}),colorClass:"bg-indigo-500",btnColorClass:"bg-indigo-600 hover:bg-indigo-700"}),u.jsx(N,{game:"AIM",title:"Aim Trainer",desc:"Seberapa cepat Anda bisa mengenai semua target yang muncul?",icon:u.jsx(no,{size:32}),colorClass:"bg-orange-500",btnColorClass:"bg-orange-500 hover:bg-orange-600"}),u.jsx(N,{game:"CHIMP",title:"Chimp Test",desc:"Apakah Anda lebih pintar dari simpanse? Uji memori kerja spasial.",icon:u.jsx(Rs,{size:32}),colorClass:"bg-teal-500",btnColorClass:"bg-teal-500 hover:bg-teal-600"}),u.jsx(N,{game:"VISUAL",title:"Visual Memory",desc:"Ingat posisi kotak putih yang muncul. Hati-hati, setiap kesalahan mengurangi nyawa!",icon:u.jsx(rr,{size:32}),colorClass:"bg-sky-500",btnColorClass:"bg-sky-500 hover:bg-sky-600"}),u.jsx(N,{game:"NUMBER",title:"Number Memory",desc:"Ingat angka terpanjang yang bisa Anda hafal.",icon:u.jsx(If,{size:32}),colorClass:"bg-blue-600",btnColorClass:"bg-blue-600 hover:bg-blue-700"}),u.jsx(N,{game:"VERBAL",title:"Verbal Memory",desc:"Ingat kata mana yang baru muncul dan mana yang sudah pernah.",icon:u.jsx(Mf,{size:32}),colorClass:"bg-purple-500",btnColorClass:"bg-purple-500 hover:bg-purple-600"}),u.jsx(N,{game:"TYPING",title:"Typing Test",desc:"Berapa banyak kata yang bisa Anda ketik per menit?",icon:u.jsx(Zi,{size:32}),colorClass:"bg-slate-500",btnColorClass:"bg-slate-600 hover:bg-slate-700"}),u.jsx(N,{game:"BRIDGE",title:"Bridge Memory",desc:"Hafalkan jalan yang aman dari bawah ke atas sebelum hilang.",icon:u.jsx(kf,{size:32}),colorClass:"bg-emerald-500",btnColorClass:"bg-emerald-600 hover:bg-emerald-700"}),u.jsx(N,{game:"MATCH",title:"Match Memory",desc:"Cari pasangan simbol yang sama di balik kartu.",icon:u.jsx(Cf,{size:32}),colorClass:"bg-pink-500",btnColorClass:"bg-pink-600 hover:bg-pink-700"})]}),u.jsx(e8,{history:t})]}):u.jsx(Z9,{username:e,history:t})]})})},n8=({user:n})=>{var s,a;const[e,t]=F.useState(!1);return F.useEffect(()=>{t(!1)},[n==null?void 0:n.photoURL]),n!=null&&n.photoURL&&!e?u.jsx("img",{src:n.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border border-slate-200 dark:border-slate-700 object-cover",onError:()=>t(!0)}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 font-bold text-sm",children:((a=(s=n==null?void 0:n.username)==null?void 0:s[0])==null?void 0:a.toUpperCase())||"T"})},R1=({text:n})=>{if(!n)return null;const e=n.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/\n- (.*?)/g,"<br/> $1").replace(/\n/g,"<br/>");return u.jsx("div",{dangerouslySetInnerHTML:{__html:e},className:"text-slate-700 dark:text-slate-300 leading-relaxed text-sm font-sans"})},s8=({message:n,type:e,onClose:t})=>{const s=e==="success"?"bg-emerald-500":e==="error"?"bg-rose-500":"bg-indigo-600",a=e==="success"?u.jsx(Vs,{size:20}):e==="error"?u.jsx(b0,{size:20}):u.jsx(oO,{size:20});return F.useEffect(()=>{const o=setTimeout(t,3e3);return()=>clearTimeout(o)},[t]),u.jsxs("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl text-white ${s} animate-fade-in-down transition-all`,children:[a,u.jsx("span",{className:"font-bold text-sm",children:n}),u.jsx("button",{onClick:t,className:"ml-4 hover:bg-white/20 p-1 rounded-full",children:u.jsx(lu,{size:18})})]})},i8=()=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[u.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),u.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),u.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),u.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),r8=({onGoogleLogin:n,onGuestLogin:e,isLoading:t})=>u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700 text-center relative overflow-hidden",children:[t&&u.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-900/80 z-20 flex flex-col items-center justify-center",children:[u.jsx(js,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),u.jsx("p",{className:"font-bold text-slate-600 dark:text-slate-300",children:"Menghubungkan..."})]}),u.jsx("div",{className:"mb-8 flex justify-center",children:u.jsx("img",{src:ef,alt:"Logo",className:"w-24 h-24 object-contain animate-bounce-slow"})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Fajmuls Learning"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Platform Belajar Cerdas Terintegrasi AI"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:n,className:"w-full py-3 bg-white hover:bg-slate-50 text-slate-700 font-medium rounded-full border border-slate-300 shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-3 relative",children:[u.jsx("div",{className:"absolute left-4",children:u.jsx(i8,{})}),u.jsx("span",{className:"text-base font-roboto font-bold",children:"Masuk dengan Google"})]}),u.jsxs("div",{className:"relative flex py-2 items-center",children:[u.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"}),u.jsx("span",{className:"flex-shrink-0 mx-4 text-slate-400 text-xs",children:"ATAU"}),u.jsx("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})]}),u.jsxs("button",{onClick:e,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:["Masuk sebagai Tamu ",u.jsx($a,{size:20})]}),u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"*Mode Tamu: Riwayat hanya tersimpan di perangkat ini & tidak masuk Leaderboard."})]})]})}),a8=({onSubmit:n,isLoading:e})=>{const[t,s]=F.useState(""),[a,o]=F.useState(""),c=f=>{if(f.preventDefault(),t.length<3){o("Username minimal 3 karakter.");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){o("Hanya huruf, angka, dan underscore (_).");return}n(t)};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl w-full max-w-md border border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Buat Username"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:"Pilih nama unik untuk identitas belajarmu."}),u.jsxs("form",{onSubmit:c,children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Username"}),u.jsx("input",{type:"text",className:"w-full p-4 border-2 border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl focus:border-indigo-600 focus:ring-0 outline-none font-bold",placeholder:"username_unik",value:t,onChange:f=>{s(f.target.value.toLowerCase().replace(/\s/g,"")),o("")},autoFocus:!0}),a&&u.jsx("p",{className:"text-rose-500 text-xs mt-2 font-bold",children:a})]}),u.jsxs("button",{type:"submit",disabled:e||!t,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 transition flex items-center justify-center gap-2",children:[e?u.jsx(js,{className:"animate-spin"}):u.jsx(Vs,{size:20})," Simpan & Lanjut"]})]})]})})},o8=({result:n,feature:e,onBack:t})=>u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center",children:u.jsxs("div",{className:"max-w-3xl w-full",children:[u.jsxs("button",{onClick:t,className:"mb-4 text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[u.jsx(kt,{size:18})," Kembali"]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[u.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(uh,{size:28,className:"text-indigo-600"})," Hasil ",e]}),u.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:u.jsx(R1,{text:n})})]})]})}),l8=({questions:n,onComplete:e})=>{const[t,s]=F.useState(0),[a,o]=F.useState(""),[c,f]=F.useState(null),[p,m]=F.useState(!1),[v,_]=F.useState([]),T=n[t],A=async()=>{if(a.trim()){m(!0),oe.play("click");try{const D=await z4(T.content,a);f(D)}catch{alert("Gagal evaluasi.")}finally{m(!1)}}},C=()=>{oe.play("click");const D={questionId:T.id,selectedAnswer:a,isCorrect:!0,scoreEarned:(c==null?void 0:c.score)||0,timeTakenSeconds:0,isOverthinking:!1,isGuessing:!1,interviewFeedback:c||void 0},N=[...v,D];_(N),o(""),f(null),t<n.length-1?s(t+1):e(N)};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("div",{className:"mb-4 text-sm font-bold text-slate-400",children:["Pertanyaan ",t+1," dari ",n.length]}),u.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6",children:T.content}),c?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:["Skor: ",c.score,"/100"]}),u.jsx("span",{className:"text-sm bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded",children:c.toneAnalysis})]}),u.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[u.jsx("b",{children:"Feedback:"})," ",c.feedback]}),u.jsxs("div",{className:"text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-800 dark:text-emerald-300 p-3 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[u.jsx("b",{children:"Saran Jawaban:"})," ",c.improvedAnswer]})]}),u.jsx("button",{onClick:C,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90",children:"Lanjut"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-40 focus:ring-2 focus:ring-indigo-500",placeholder:"Jawab seolah sedang interview...",value:a,onChange:D=>o(D.target.value)}),u.jsxs("button",{onClick:A,disabled:p||!a,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[p?u.jsx(js,{className:"animate-spin"}):u.jsx(fh,{size:18})," Submit Jawaban"]})]})]})})},c8=({flashcards:n,onFinish:e})=>{const[t,s]=F.useState(0),a=o=>{t<n.length-1?s(t+1):e()};return n.length===0?u.jsx("div",{children:"No Flashcards"}):u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:[u.jsxs("div",{className:"w-full max-w-xl mb-6 flex justify-between items-center",children:[u.jsx("button",{onClick:e,className:"text-slate-500 hover:text-indigo-600",children:u.jsx(kt,{size:20})}),u.jsxs("span",{className:"font-bold text-slate-400",children:[t+1," / ",n.length]})]}),u.jsx(y9,{data:n[t],onNext:a})]})},u8=({topic:n,onFinish:e})=>{const[t,s]=F.useState(""),[a,o]=F.useState(null),[c,f]=F.useState(!1),p=async()=>{f(!0),oe.play("click");try{const m=await F4(n,t);o(m)}catch{alert("Error")}finally{f(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Feynman Technique"}),u.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Jelaskan topik ",u.jsxs("b",{children:['"',n,'"']})," seolah-olah Anda sedang mengajari anak kecil (5 tahun). Gunakan bahasa sederhana."]}),a?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsxs("div",{className:`text-2xl font-bold ${a.understandingScore>70?"text-emerald-500":"text-amber-500"}`,children:[a.understandingScore,"/100"]}),u.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 uppercase font-bold",children:"Skor Pemahaman"})]}),u.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[u.jsxs("p",{children:[u.jsx("b",{children:"Kualitas Penyederhanaan:"})," ",a.simplificationQuality]}),u.jsxs("p",{children:[u.jsx("b",{children:"Konsep yang Terlewat:"})," ",a.missingConcepts.join(", ")||"Tidak ada"]}),u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-100 dark:border-indigo-800 text-indigo-800 dark:text-indigo-300",children:[u.jsx("b",{children:"Koreksi / Saran:"})," ",a.correction]})]})]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold",children:"Selesai Belajar"})]}):u.jsxs(u.Fragment,{children:[u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-4 h-48 focus:ring-2 focus:ring-indigo-500",placeholder:"Mulai jelaskan di sini...",value:t,onChange:m=>s(m.target.value)}),u.jsx("button",{onClick:p,disabled:c||!t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 disabled:opacity-50",children:c?"Menganalisis...":"Cek Pemahaman Saya"})]})]})})},d8=({topic:n,onFinish:e})=>{const t=["Survey","Question","Read","Recite","Review"],[s,a]=F.useState(0),o=["Lakukan scanning cepat pada materi. Baca judul, subjudul, dan kesimpulan. Dapatkan gambaran besar.","Buat pertanyaan dari judul/subjudul. Apa yang ingin Anda ketahui? Ubah judul menjadi pertanyaan.","Baca materi dengan seksama untuk mencari jawaban atas pertanyaan Anda tadi.","Tutup materi. Ucapkan kembali apa yang baru saja dibaca dengan kata-kata sendiri.","Review ulang seluruh materi dan catatan Anda. Pastikan semuanya tersimpan di memori."];return u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center",children:u.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 text-center",children:[u.jsx("div",{className:"flex justify-center mb-8",children:t.map((c,f)=>u.jsxs("div",{className:`flex items-center ${f<t.length-1?"w-full":""}`,children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${f<=s?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:c[0]}),f<t.length-1&&u.jsx("div",{className:`h-1 flex-1 ${f<s?"bg-indigo-600":"bg-slate-100 dark:bg-slate-700"}`})]},c))}),u.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-4",children:t[s]}),u.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:o[s]}),u.jsx("button",{onClick:()=>{oe.play("click"),s<4?a(s+1):e()},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:s<4?"Lanjut Tahap Berikutnya":"Selesai SQ3R"})]})})},f8=n=>{const{category:e,onBack:t,onStartSession:s,onOpenTOSelection:a,onStartTesKoran:o,onStartTesKecermatan:c,onGeneralInputSubmit:f,generalInput:p,setGeneralInput:m,isReadingMaterial:v,onResetMaterial:_,onSubtestSelect:T,selectedSubtest:A,weakTopicsCount:C,loading:D,skdStream:N,onSkdStreamSelect:L,onHistory:U,onStartGeneralSession:B,onStartSkripsiSession:$,username:ee,isDarkMode:se,onToggleDarkMode:R}=n,[M,k]=F.useState(""),[O,V]=F.useState(null),[G,j]=F.useState("MEDIUM"),[pe,we]=F.useState("MEDIUM"),[Y,ce]=F.useState(!1),Se=F.useRef(null),[Ue,be]=F.useState(""),[H,re]=F.useState(5),[he,X]=F.useState("Medium"),ne=ge=>{var Te;const xe=(Te=ge.target.files)==null?void 0:Te[0];if(xe){if(xe.type!=="application/pdf"){alert("Hanya file PDF yang diperbolehkan.");return}V(xe.name),k(""),ce(!0);const Be=new FileReader;Be.onload=ft=>{var ht;const ze=((ht=ft.target)==null?void 0:ht.result).split(",")[1];setTimeout(()=>{m&&m({type:"pdf",content:ze,title:xe.name,lengthPreference:G,difficultyPreference:pe}),ce(!1)},800)},Be.readAsDataURL(xe)}},ye=()=>{(p==null?void 0:p.type)==="pdf"?f({...p,lengthPreference:G,difficultyPreference:pe}):M?f({type:"text",content:M,title:"Input Manual",lengthPreference:G,difficultyPreference:pe}):alert("Mohon masukkan teks atau upload PDF.")},Ie=ge=>{const xe=ge.filter(Te=>Te.toLowerCase().includes(Ue.toLowerCase()));return u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6 animate-fade-in-up",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-3",children:"Pilih Topik / Subtes:"}),u.jsxs("div",{className:"mb-4 relative",children:[u.jsx(Xd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),u.jsx("input",{type:"text",placeholder:"Cari topik...",value:Ue,onChange:Te=>be(Te.target.value),className:"w-full pl-10 p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:xe.length>0?xe.map(Te=>u.jsx("button",{onClick:()=>{oe.play("tap"),T(Te)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${A===Te?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Te},Te)):u.jsx("div",{className:"text-sm text-slate-500 italic p-2",children:"Tidak ada topik yang cocok."})}),A&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-6 animate-fade-in-up",children:u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Jumlah Soal"}),u.jsxs("select",{value:H,onChange:Te=>re(Number(Te.target.value)),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"5",children:"5 Soal"}),u.jsx("option",{value:"10",children:"10 Soal"}),u.jsx("option",{value:"15",children:"15 Soal"}),u.jsx("option",{value:"20",children:"20 Soal"})]})]}),u.jsxs("div",{className:"flex-1 w-full",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-1 block uppercase",children:"Tingkat Kesulitan"}),u.jsxs("select",{value:he,onChange:Te=>X(Te.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-xl font-medium dark:text-white",children:[u.jsx("option",{value:"Easy",children:"Mudah"}),u.jsx("option",{value:"Medium",children:"Sedang"}),u.jsx("option",{value:"Hard",children:"Sulit"}),u.jsx("option",{value:"HOTS",children:"HOTS (Analisis Tinggi)"})]})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s(qe.PRACTICE,he,H)},className:"w-full sm:w-auto px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(DE,{size:18})," Mulai Latihan"]})]})}),e==="INTERVIEW"&&A&&u.jsx("div",{className:"mt-6 border-t border-slate-100 dark:border-slate-700 pt-4 animate-fade-in-up",children:u.jsxs("button",{onClick:()=>{oe.play("click"),s(qe.DRILL)},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition flex items-center justify-center gap-2",children:[u.jsx(fh,{size:20})," Mulai Sesi Wawancara"]})})]})};return u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 transition-colors duration-300",children:[u.jsx(g9,{}),u.jsxs("div",{className:"max-w-5xl mx-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("button",{onClick:()=>{oe.play("back"),t()},className:"flex items-center text-slate-500 dark:text-slate-400 hover:text-indigo-600 font-medium",children:[u.jsx(kt,{size:18,className:"mr-2"})," Kembali"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[R&&u.jsx("button",{onClick:()=>{R()},className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:text-indigo-600 transition",children:se?u.jsx(T1,{size:16}):u.jsx(v1,{size:16})}),u.jsxs("span",{className:"text-xs font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full flex items-center gap-1",children:[u.jsx(S1,{size:12})," ",ee]})]})]}),u.jsx("div",{className:"flex justify-between items-end mb-8",children:u.jsxs("div",{children:[u.jsxs("span",{className:"text-sm font-bold tracking-wider text-indigo-600 uppercase mb-1 block",children:[e," Dashboard"]}),u.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Pusat Kendali Belajar"})]})}),D?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[u.jsx(js,{className:"animate-spin text-indigo-600 w-10 h-10 mb-4"}),u.jsx("p",{className:"text-slate-500 font-medium",children:"AI sedang memproses materi..."}),u.jsx("div",{className:"max-w-md w-full mt-8 space-y-4",children:u.jsx(v9,{})})]}):u.jsxs(u.Fragment,{children:[e==="KECERMATAN"&&u.jsx("div",{className:"animate-fade-in-up",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),c("ANGKA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg text-indigo-600 dark:text-indigo-400",children:u.jsx(Ls,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Angka Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Standar tes kedinasan/Polri. Temukan angka yang hilang dari kolom."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("HURUF")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg text-emerald-600 dark:text-emerald-400",children:u.jsx(Zi,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Huruf Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Variasi huruf. Melatih ketelitian visual terhadap karakter mirip."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("SIMBOL_HILANG")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-purple-50 dark:hover:bg-purple-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg text-purple-600 dark:text-purple-400",children:u.jsx(KO,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Simbol Hilang"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Temukan simbol yang hilang. Melatih ketelitian visual bentuk abstrak."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("SAMA_BEDA")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-amber-50 dark:hover:bg-amber-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-amber-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg text-amber-600 dark:text-amber-400",children:u.jsx(Xj,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Sama Beda Simbol"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bandingkan dua baris simbol. Tentukan SAMA atau BEDA secepat mungkin."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("MATCHING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-rose-50 dark:hover:bg-rose-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-rose-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-lg text-rose-600 dark:text-rose-400",children:u.jsx(no,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Matching (Pencocokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cocokkan simbol dengan kode kuncinya. Melatih memori kerja jangka pendek."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),c("GROUPING")},className:"p-6 bg-white dark:bg-slate-800 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 border-2 border-slate-200 dark:border-slate-700 hover:border-cyan-500 rounded-2xl text-left transition group shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg text-cyan-600 dark:text-cyan-400",children:u.jsx(dO,{size:24})}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Grouping (Pengelompokan)"})]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pilih semua simbol yang diminta dari grid acak. Melatih fokus selektif."})]})]})}),e==="SKRIPSI"&&u.jsx("div",{className:"animate-fade-in-up max-w-2xl mx-auto",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(uh,{size:24,className:"text-indigo-600"})," Skripsi Assistant"]}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Masukkan topik atau judul skripsi Anda untuk mendapatkan bantuan AI."}),u.jsx("textarea",{className:"w-full p-4 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl mb-6 focus:ring-2 focus:ring-indigo-500 h-32",placeholder:"Contoh: Pengaruh Kecerdasan Buatan terhadap Minat Belajar Mahasiswa Teknik Informatika...",value:M,onChange:ge=>k(ge.target.value)}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("TITLE_IDEAS",M)},className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-xl font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/40 flex flex-col items-center gap-2 border border-indigo-100 dark:border-indigo-800",children:[u.jsx(Rs,{size:24})," Ide Judul"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("OUTLINE",M)},className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/40 flex flex-col items-center gap-2 border border-emerald-100 dark:border-emerald-800",children:[u.jsx(Zi,{size:24})," Buat Outline"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("METHODOLOGY",M)},className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-xl font-bold hover:bg-amber-100 dark:hover:bg-amber-900/40 flex flex-col items-center gap-2 border border-amber-100 dark:border-amber-800",children:[u.jsx(Xd,{size:24})," Cek Metodologi"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),$&&$("PARAPHRASE",M)},className:"p-4 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300 rounded-xl font-bold hover:bg-rose-100 dark:hover:bg-rose-900/40 flex flex-col items-center gap-2 border border-rose-100 dark:border-rose-800",children:[u.jsx($j,{size:24})," Parafrase Teks"]})]})]})}),e==="GENERAL"&&u.jsx("div",{className:"space-y-8 animate-fade-in-up",children:v?u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[u.jsx(ME,{size:20})," Materi Belajar"]}),u.jsx("button",{onClick:_,className:"text-sm text-rose-500 hover:underline",children:"Ganti Materi"})]}),(p==null?void 0:p.type)==="pdf"&&p.content&&u.jsx("div",{className:"mb-6",children:u.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[500px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})}),u.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 dark:text-slate-300 leading-relaxed max-h-[400px] overflow-y-auto p-2 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-700",children:u.jsx(R1,{text:(p==null?void 0:p.extractedText)||(p==null?void 0:p.content)||""})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Sudah selesai membaca? Pilih Metode Belajar:"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:_C.map(ge=>{const Te={Brain:Rs,Repeat:jO,MessageCircle:bO,Share2:YO,Search:Xd,GraduationCap:kg,BookOpen:ME,PenTool:DE}[ge.icon]||Rs;return u.jsxs("button",{onClick:()=>{oe.play("click"),B(ge.id)},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:shadow-md transition text-left flex flex-col h-full",children:[u.jsx("div",{className:"mb-3 text-indigo-600 dark:text-indigo-400",children:u.jsx(Te,{size:24})}),u.jsx("h4",{className:"font-bold text-sm mb-1 text-slate-900 dark:text-white",children:ge.name}),u.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:ge.desc})]},ge.id)})})]})]}):u.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[u.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[u.jsx(Mg,{size:20})," Input Materi"]}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Masukkan topik, teks materi, atau upload PDF yang ingin dipelajari."}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[u.jsx("input",{type:"text",className:"flex-1 p-3 border border-slate-200 dark:border-slate-700 dark:bg-slate-900 dark:text-white rounded-xl",placeholder:O?`PDF Terpilih: ${O}`:"Contoh: Perang Dunia II, Hukum Newton, atau paste teks...",value:M,disabled:!!O,onChange:ge=>{k(ge.target.value)}}),u.jsx("input",{type:"file",ref:Se,accept:"application/pdf",className:"hidden",onChange:ne}),u.jsxs("button",{className:`p-3 rounded-xl transition flex items-center gap-2 ${O?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200"}`,title:"Upload PDF",onClick:()=>{var ge;return(ge=Se.current)==null?void 0:ge.click()},children:[u.jsx(Zi,{size:20}),u.jsx("span",{className:"hidden sm:inline font-bold text-sm",children:"Upload PDF"})]})]}),O&&u.jsxs("div",{className:"mb-4 text-sm bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 px-4 py-2 rounded-lg flex items-center justify-between animate-fade-in-up border border-emerald-100 dark:border-emerald-800",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vs,{size:16}),u.jsxs("span",{children:["File siap: ",u.jsx("b",{children:O})]})]}),u.jsx("button",{onClick:()=>{V(null),m&&m(null),Se.current&&(Se.current.value="")},className:"text-slate-400 hover:text-rose-500",title:"Hapus PDF",children:u.jsx(Rf,{size:16})})]}),Y?u.jsxs("div",{className:"mb-6 space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-2",children:[u.jsx(js,{size:14,className:"animate-spin"})," Memuat Preview PDF..."]}),u.jsx(Fa,{height:"h-[300px]",className:"rounded-xl"})]}):(p==null?void 0:p.type)==="pdf"&&p.content&&u.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-2 block",children:"Preview PDF:"}),u.jsx("embed",{src:`data:application/pdf;base64,${p.content}`,className:"w-full h-[300px] rounded-xl border border-slate-200 dark:border-slate-700",type:"application/pdf"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Panjang Materi (Ringkasan)"}),u.jsxs("select",{value:G,onChange:ge=>j(ge.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"SHORT",children:"Ringkas / Poin Penting"}),u.jsx("option",{value:"MEDIUM",children:"Standar (Rekomedasi)"}),u.jsx("option",{value:"LONG",children:"Mendalam / Detail"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"Tingkat Kesulitan Soal"}),u.jsxs("select",{value:pe,onChange:ge=>we(ge.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium",children:[u.jsx("option",{value:"EASY",children:"Mudah (Recall)"}),u.jsx("option",{value:"MEDIUM",children:"Sedang (Konseptual)"}),u.jsx("option",{value:"HARD",children:"Sulit / HOTS"})]})]})]}),u.jsx("button",{onClick:()=>{oe.play("click"),ye()},className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none hover:bg-indigo-700 transition",children:"Proses & Baca Materi"})]})}),e==="UTBK"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{oe.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(to,{size:24,className:"text-rose-400"})," Simulasi UTBK SNBT Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"160 Soal. Durasi 195 Menit. Format Resmi 2025."})]}),u.jsx($a,{className:"group-hover:translate-x-2 transition-transform"})]}),Ie(TC)]}),e==="TPA"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{oe.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center group",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(Rs,{size:24,className:"text-indigo-400"})," Simulasi TPA Full"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"65 Soal (TPA & TBI). Durasi 60-100 Menit."})]}),u.jsx($a,{className:"group-hover:translate-x-2 transition-transform"})]}),Ie(SC)]}),e==="PSIKOTEST"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),o()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(Dj,{size:48,className:"mx-auto mb-4 text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Tes Koran (Pauli/Kraepelin)"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Uji kecepatan, ketelitian, dan stabilitas emosi dengan menjumlahkan angka."})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),a()},className:"bg-white dark:bg-slate-800 p-6 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group shadow-sm",children:[u.jsx(Rs,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Psikotes Logika & IQ"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Analogi, Deret Angka, dan Penalaran Logis (HOTS)."})]})]}),u.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Latihan Per Subtes"}),Ie(AC)]})]}),e==="INTERVIEW"&&Ie(wC),e==="SKD"&&(N?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-slate-600 dark:text-slate-300",children:[u.jsx("button",{onClick:()=>L(null),className:"underline",children:"Ubah Jalur"})," ",u.jsx($a,{size:14})," ",u.jsx("b",{children:N})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),a()},className:"w-full bg-slate-900 dark:bg-indigo-900 text-white p-6 rounded-2xl mb-8 flex justify-between items-center shadow-lg shadow-indigo-200 dark:shadow-none",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(to,{size:24,className:"text-rose-400"})," Simulasi SKD CAT (110 Soal)"]}),u.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"TWK, TIU, TKP. Durasi 100 Menit. Scoring Resmi."})]}),u.jsx($a,{className:"group-hover:translate-x-2 transition-transform"})]}),Ie(EC)]}):u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),L("KEDINASAN")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(cO,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Sekolah Kedinasan"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"STAN, STIS, IPDN, dll"})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),L("CPNS")},className:"bg-white dark:bg-slate-800 p-8 rounded-2xl border-2 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 transition text-center group",children:[u.jsx(Rj,{size:48,className:"mx-auto mb-4 text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition"}),u.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"CPNS Umum"}),u.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"Kementerian & Lembaga"})]})]})),e!=="GENERAL"&&e!=="INTERVIEW"&&e!=="SKRIPSI"&&e!=="PSIKOTEST"&&e!=="KECERMATAN"&&e!=="BENCHMARK"&&u.jsxs("div",{className:"mt-8 animate-fade-in-up delay-100",children:[u.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Mode Belajar Lainnya"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),s(qe.DRILL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(ra,{className:"text-amber-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Learn & Drill"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Materi + 1 Soal"})]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s(qe.ACTIVE_RECALL)},className:"p-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-indigo-500 hover:shadow-md transition text-left",children:[u.jsx(Rs,{className:"text-emerald-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Active Recall"}),u.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Isian Singkat"})]}),C>0&&u.jsxs("button",{onClick:()=>{oe.play("click"),s(qe.WEAKNESS)},className:"p-4 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-900 rounded-xl hover:border-rose-500 hover:shadow-md transition text-left",children:[u.jsx(no,{className:"text-rose-500 mb-2"}),u.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-white",children:"Weakness Attack"}),u.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[C," Topik Lemah"]})]})]})]})]})]})]})};function h8(){var ga;const[n,e]=F.useState("SPLASH"),[t,s]=F.useState(null),[a,o]=F.useState(!1),[c,f]=F.useState(!0),[p,m]=F.useState(""),[v,_]=F.useState([]),[T,A]=F.useState(!1),[C,D]=F.useState({soundEnabled:!0,musicEnabled:!0,volume:.5,funnyNotifications:!0,confirmActions:!0,darkMode:!1}),[N,L]=F.useState(null),[U,B]=F.useState(!1),[$,ee]=F.useState(null),[se,R]=F.useState(!1),[M,k]=F.useState(""),[O,V]=F.useState(null),[G,j]=F.useState(null),[pe,we]=F.useState(new Set),[Y,ce]=F.useState("ANGKA"),[Se,Ue]=F.useState(null),[be,H]=F.useState(null),[re,he]=F.useState([]),[X,ne]=F.useState(null),[ye,Ie]=F.useState(null),[ge,xe]=F.useState(""),[Te,Be]=F.useState([]),[ft,ze]=F.useState(null),[ht,Ot]=F.useState([]),[Mt,nt]=F.useState(!1),[Fn,Lt]=F.useState(void 0),[qt,qn]=F.useState(void 0),[kl,ua]=F.useState(!1),[Dt,bn]=F.useState([]),[da,fa]=F.useState(null),[gs,lo]=F.useState(null),mt=(Z,ve)=>lo({msg:Z,type:ve}),[ha,ri]=F.useState([...fb,...hb,...mb,...yb,...vb,...pb,...gb,...xb]),Kn=Z=>{try{const ve=localStorage.getItem("fajmuls_active_session");if(ve){const Ee=JSON.parse(ve),Me=Date.now()-Ee.timestamp<1440*60*1e3;if(Ee.uid===Z&&Me){if(window.confirm("Ditemukan sesi tes yang belum selesai. Lanjutkan?"))return s(Ee.category),V(Ee.mode),Be(Ee.questions),ze(Ee.drillContent),Ee.skdStream&&j(Ee.skdStream),Ee.packageTitle&&qn(Ee.packageTitle),Lt(Ee),e("SESSION"),!0;localStorage.removeItem("fajmuls_active_session")}}}catch(ve){console.error("Failed to restore session",ve),localStorage.removeItem("fajmuls_active_session")}return!1};F.useEffect(()=>{const Z=localStorage.getItem("fajmuls_settings");Z?D(JSON.parse(Z)):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&D(Ee=>({...Ee,darkMode:!0}));const ve=ZV(async Ee=>{if(f(!0),Ee)try{const Me=await CE(Ee.uid);if(Me){L({uid:Ee.uid,username:Me.username,email:Ee.email,photoURL:Me.photoURL||Ee.photoURL});const Le=await rj(Ee.uid);bn(Le),!Kn(Ee.uid)&&(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else L({uid:Ee.uid,username:"",email:Ee.email,photoURL:Ee.photoURL}),e("USERNAME_SETUP")}catch(Me){console.error("Profile fetch error",Me)}else if(localStorage.getItem("fajmuls_guest_mode")==="true"){const Le=localStorage.getItem("fajmuls_guest_username"),ut="guest-"+(Le||"user");L({uid:ut,username:Le||"Tamu",email:null,isGuest:!0});const Fe=localStorage.getItem("fajmuls_guest_history");if(Fe)try{bn(JSON.parse(Fe))}catch{}!Kn(ut)&&(n==="SPLASH"||n==="LOGIN")&&e("HOME")}else n!=="SPLASH"&&e("LOGIN");f(!1),B(!1)});return()=>ve()},[]),F.useEffect(()=>{if(p.trim().length===0){_([]),A(!1);return}const Z=p.toLowerCase(),ve=[];Rp.forEach(Me=>{(Me.name.toLowerCase().includes(Z)||Me.desc.toLowerCase().includes(Z))&&ve.push({id:Me.id,label:Me.name,type:"CATEGORY"})}),[{id:"TES_KORAN",label:"Tes Koran / Pauli"},{id:"REACTION",label:"Reaction Time (Benchmark)"},{id:"AIM",label:"Aim Trainer (Benchmark)"},{id:"SEQUENCE",label:"Sequence Memory (Benchmark)"},{id:"CHIMP",label:"Chimp Test (Benchmark)"},{id:"VISUAL",label:"Visual Memory (Benchmark)"},{id:"NUMBER",label:"Number Memory (Benchmark)"},{id:"VERBAL",label:"Verbal Memory (Benchmark)"},{id:"TYPING",label:"Typing Test (Benchmark)"},{id:"BRIDGE",label:"Bridge Memory (Benchmark)"},{id:"MATCH",label:"Match Memory (Benchmark)"},{id:"KECERMATAN_ANGKA",label:"Kecermatan Angka"},{id:"KECERMATAN_HURUF",label:"Kecermatan Huruf"},{id:"KECERMATAN_SIMBOL",label:"Kecermatan Simbol"}].forEach(Me=>{Me.label.toLowerCase().includes(Z)&&ve.push({id:Me.id,label:Me.label,type:"FEATURE"})}),_(ve),A(ve.length>0)},[p]);const fn=Z=>{if(oe.play("click"),m(""),A(!1),Z.type==="CATEGORY")as(Z.id);else if(Z.id==="TES_KORAN")s("PSIKOTEST"),e("TES_KORAN");else if(Z.id.startsWith("KECERMATAN_")){s("KECERMATAN");const ve=Z.id.replace("KECERMATAN_","");ai(ve)}else s("BENCHMARK"),Ue(Z.id),e("BENCHMARK")},$n=async()=>{ua(!0);const Z=[...fb,...hb,...mb,...yb,...vb,...pb,...gb,...xb];try{const ve=await cj(),Ee=new Set(Z.map(Le=>Le.id)),Me=ve.filter(Le=>!Ee.has(Le.id));ri([...Z,...Me])}catch(ve){console.error("Failed to load cloud packages",ve),ri(Z),mt("Gagal memuat paket online. Menggunakan data offline.","error")}finally{ua(!1)}};F.useEffect(()=>{localStorage.setItem("fajmuls_settings",JSON.stringify(C)),C.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),oe.syncSettings(C)},[C]);const Ht=async()=>{B(!0);try{const Z=await ej();await CE(Z.uid)||(L({uid:Z.uid,username:"",email:Z.email,photoURL:Z.photoURL}),e("USERNAME_SETUP"))}catch{mt("Gagal login dengan Google.","error"),B(!1)}},co=()=>{oe.play("click"),localStorage.setItem("fajmuls_guest_mode","true"),localStorage.setItem("fajmuls_guest_username","Tamu"),L({uid:"guest-"+Date.now(),username:"Tamu",email:null,isGuest:!0});const Z=localStorage.getItem("fajmuls_guest_history");if(Z)try{bn(JSON.parse(Z))}catch{}else bn([]);e("HOME")},cr=async Z=>{if(N!=null&&N.uid){B(!0);try{if(!await nj(Z)){mt("Username sudah dipakai. Pilih yang lain.","error"),B(!1);return}await sj(N.uid,{username:Z,email:N.email||"",photoURL:N.photoURL||""}),L(Ee=>Ee?{...Ee,username:Z}:null),bn([]),oe.play("success"),e("HOME")}catch{mt("Gagal membuat profil.","error")}finally{B(!1)}}},uo=async()=>{oe.play("click"),localStorage.removeItem("fajmuls_guest_mode"),localStorage.removeItem("fajmuls_guest_username"),localStorage.removeItem("fajmuls_active_session"),N!=null&&N.isGuest||await tj(),L(null),bn([]),e("LOGIN")},is=async Z=>{const ve=[Z,...Dt];bn(ve),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ve)):N!=null&&N.uid&&await IE(N.uid,Z)},Ni=async Z=>{const ve=Dt.filter(Ee=>Ee.id!==Z);bn(ve),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(ve)):N!=null&&N.uid&&await aj(N.uid,Z),mt("Riwayat berhasil dihapus.","success"),oe.play("click")},Kt=async Z=>{if(N!=null&&N.isGuest){Z.username&&(L(ve=>ve?{...ve,username:Z.username}:null),localStorage.setItem("fajmuls_guest_username",Z.username),mt("Nama Tamu diubah.","success"));return}if(N!=null&&N.uid)try{await ij(N.uid,Z),L(ve=>ve?{...ve,...Z}:null),mt("Profil berhasil diperbarui!","success")}catch(ve){mt(ve.message||"Gagal memperbarui profil.","error")}},ys=async Z=>{nt(!0);try{const ve=await q4(Z);ee({...Z,extractedText:ve}),R(!0)}catch{mt("Gagal memproses materi. Coba lagi.","error")}finally{nt(!1)}},xs=async(Z,ve)=>{if(!ve.trim()){mt("Mohon isi judul atau topik.","error");return}nt(!0),Ie(Z);try{const Ee=await K4(ve,Z);xe(Ee),e("SESSION")}catch{mt("Gagal generate konten skripsi.","error")}finally{nt(!1)}},rs=async Z=>{if(!$){mt("Materi hilang. Silakan input ulang.","error");return}nt(!0),H(Z),V(qe.DRILL);try{if(Z==="ACTIVE_RECALL"||Z==="PBL"||Z==="PRACTICE"||Z==="TEACHING"){const ve=await Bn(qe.DRILL,"GENERAL",$,5,[],void 0,Z);Be(ve)}else if(Z==="SPACED_REPETITION"){const ve=await $4($);he(ve)}else if(Z==="MIND_MAP"){const ve=await Y4($);ne(ve)}e("SESSION")}catch{mt("Gagal memuat materi AI.","error")}finally{nt(!1)}},fo=async(Z,ve,Ee)=>{if(t){if(qn(void 0),Lt(void 0),["UTBK","SKD","TPA","PSIKOTEST","INTERVIEW"].includes(t)&&!M&&Z!==qe.SIMULATION&&Z!==qe.WEAKNESS){mt(`Harap pilih topik/subtes untuk ${t}.`,"error");return}if(t==="SKD"&&!G){mt("Harap pilih jalur (CPNS / Kedinasan).","error");return}nt(!0),V(Z),Ot([]),Be([]),ze(null);try{const Me=M;if(Z===qe.DRILL){const Le=await J4(t,Me,G||void 0);ze(Le),Le&&Le.question&&Be([Le.question])}else if(Z===qe.SIMULATION&&t==="SKD"&&G){const Le=await Z_(G);Be(Le||[])}else if(Z===qe.SIMULATION&&t==="UTBK"){const Le=await eT();Be(Le||[])}else if(Z===qe.SIMULATION&&t==="TPA"){const Le=await Q4();Be(Le||[])}else if(Z===qe.SIMULATION&&t==="PSIKOTEST"){const Le=await W4();Be(Le||[])}else{let Le=Ee||5;t==="PSIKOTEST"&&Z===qe.SIMULATION&&(Le=40),t==="INTERVIEW"&&(Le=3);const ut=await Bn(Z,t,Me,Le,Array.from(pe),G||void 0,void 0,ve);Be(ut||[])}e("SESSION")}catch(Me){console.error(Me),mt("Gagal memuat soal. Kemungkinan traffic AI sedang tinggi. Coba lagi.","error")}finally{nt(!1)}}},Gs=(Z,ve,Ee=!1)=>{if(ve){const Fe={...ve,isAborted:Ee};is(Fe),(ve.category!=="BENCHMARK"||Ee)&&e("HOME");return}Ot(Z);let Me=0,Le=0,ut;if(t==="SKD"&&O===qe.SIMULATION){let Fe=0,Ze=0,bt=0;Z.forEach(st=>{var Wt,$t,zt,hn,Tt,Yn;const Qt=Te.find(vs=>vs.id===st.questionId);Qt&&(($t=(Wt=Qt.metadata)==null?void 0:Wt.subtest)!=null&&$t.includes("TWK")&&(Fe+=st.scoreEarned),(hn=(zt=Qt.metadata)==null?void 0:zt.subtest)!=null&&hn.includes("TIU")&&(Ze+=st.scoreEarned),(Yn=(Tt=Qt.metadata)==null?void 0:Tt.subtest)!=null&&Yn.includes("TKP")&&(bt+=st.scoreEarned))}),Me=Fe+Ze+bt,Le=550,ut={twk:Fe,tiu:Ze,tkp:bt,total:Me,passed:Fe>=65&&Ze>=80&&bt>=166}}else if(t==="UTBK"&&O===qe.SIMULATION){const Fe=Tt=>{const Yn=Te.filter(_n=>{var Rn,Hs;return(Hs=(Rn=_n.metadata)==null?void 0:Rn.subtest)==null?void 0:Hs.includes(Tt)});if(!Yn.length)return 0;const vs=Z.filter(_n=>{var Rn,Hs,ur;return _n.isCorrect&&((ur=(Hs=(Rn=Te.find(ya=>ya.id===_n.questionId))==null?void 0:Rn.metadata)==null?void 0:Hs.subtest)==null?void 0:ur.includes(Tt))}).length;return Math.round(200+vs/Yn.length*600)},Ze=Fe("Penalaran Umum"),bt=Fe("PPU"),st=Fe("PBM"),Qt=Fe("Kuantitatif"),Wt=Fe("Literasi B.Indo"),$t=Fe("Literasi B.Inggris"),zt=Fe("Penalaran Matematika"),hn=Math.round((Ze+bt+st+Qt+Wt+$t+zt)/7);Me=hn,Le=1e3,ut={pu:Ze,ppu:bt,pbm:st,pk:Qt,lbi:Wt,lbe:$t,pm:zt,average:hn}}else if(t==="TPA"&&O===qe.SIMULATION){let Fe=0,Ze=0,bt=0,st=0;Z.forEach($t=>{var hn,Tt,Yn,vs;const zt=Te.find(_n=>_n.id===$t.questionId);zt&&((Tt=(hn=zt.metadata)==null?void 0:hn.subtest)!=null&&Tt.includes("TBI")||(vs=(Yn=zt.metadata)==null?void 0:Yn.subtest)!=null&&vs.includes("Inggris")?(st++,$t.isCorrect&&Ze++):(bt++,$t.isCorrect&&Fe++))});const Qt=Math.round(200+Fe/(bt||1)*600),Wt=Math.round(Ze/(st||1)*100);Me=Qt+Wt,Le=900,ut={tpaScore:Qt,tbiScore:Wt,tpaCorrect:Fe,tbiCorrect:Ze}}else if(t==="INTERVIEW"){const Fe=Z.map(Ze=>{var bt;return((bt=Ze.interviewFeedback)==null?void 0:bt.score)||0});Me=Math.round(Fe.reduce((Ze,bt)=>Ze+bt,0)/(Fe.length||1)),Le=100}else if(t==="PSIKOTEST"&&O===qe.SIMULATION){const Fe=Z.filter(Wt=>Wt.isCorrect).length,Ze=Te.length,bt=Fe/Ze,st=Math.round(70+bt*75);let Qt=st>=130?"Very Superior":st>=120?"Superior":st>=110?"High Average":st>=90?"Average":"Low Average";Me=st,Le=160,ut={iqScore:st,classification:Qt}}else if(t==="GENERAL"){const Fe=Z.reduce((Ze,bt)=>Ze+(bt.scoreEarned||0),0);Me=Math.round(Fe/(Z.length||1)),Le=100}else{const Fe=Z.filter(Ze=>Ze.isCorrect).length;Me=Math.round(Fe/Te.length*100),Le=100}is({id:`h-${Date.now()}`,date:new Date().toISOString(),category:t,skdStream:G||void 0,score:Me,maxScore:Le,details:ut,questions:Te,answers:Z,isAborted:Ee,packageTitle:qt}),qn(void 0),e("RESULTS")},as=Z=>{oe.play("click"),s(Z),qn(void 0),Lt(void 0),Z==="BUTAWRNA"?e("COLORBLIND"):Z==="BENCHMARK"?(Ue(null),e("BENCHMARK")):(e("DASHBOARD"),ee(null),R(!1),k(""),j(null),H(null),Ie(null),xe(""))},ai=Z=>{ce(Z),e("TES_KECERMATAN")},Rl=()=>{if(Dt.length===0){mt("Belum ada riwayat untuk disimpan.","info");return}const Z=JSON.stringify(Dt,null,2),ve=new Blob([Z],{type:"application/json"}),Ee=URL.createObjectURL(ve),Me=document.createElement("a");Me.href=Ee,Me.download=`Fajmuls_History_${(N==null?void 0:N.username)||"user"}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(Ee),mt("Export berhasil!","success")},Ci=Z=>{const ve=new FileReader;ve.onload=Ee=>{var Me;try{const Le=(Me=Ee.target)==null?void 0:Me.result,ut=JSON.parse(Le);if(!Array.isArray(ut))throw new Error("Format salah");const Fe=new Set(Dt.map(st=>st.id)),Ze=ut.filter(st=>!Fe.has(st.id)),bt=[...Dt,...Ze].sort((st,Qt)=>new Date(Qt.date).getTime()-new Date(st.date).getTime());bn(bt),N!=null&&N.isGuest?localStorage.setItem("fajmuls_guest_history",JSON.stringify(bt)):N!=null&&N.uid&&Ze.forEach(st=>{IE(N.uid,st)}),mt(`Berhasil memuat ${Ze.length} riwayat baru.`,"success")}catch{mt("Gagal membaca file JSON.","error")}},ve.readAsText(Z)},ma=Z=>{Be(Z.questions),V(qe.SIMULATION),qn(Z.title),Lt(void 0),e("SESSION")},pa=async Z=>{if(t)try{let ve=[],Ee=60;t==="SKD"?(ve=await Z_(G||"CPNS"),Ee=100):t==="UTBK"?(ve=await eT(),Ee=195):ve=await Bn(qe.SIMULATION,t,"SIMULATION",20,[],G||void 0,void 0,"HOTS");const Le=ha.filter(Ze=>Ze.category===t&&(t==="SKD"?Ze.skdStream===G:!0)).length+1;let ut="";t==="SKD"?G==="CPNS"?ut=`TO SKD CPNS ${Le}`:G==="KEDINASAN"?ut=`TO SKD Kedinasan ${Le}`:ut=`TO SKD ${Le}`:t==="UTBK"?ut=`TO UTBK ${Le}`:t==="TPA"?ut=`TO TPA TBI ${Le}`:t==="PSIKOTEST"?ut=`TO Psikotest ${Le}`:ut=`TO ${t} ${Le}`;const Fe={id:`gen-${Date.now()}`,title:ut,category:t,skdStream:G||void 0,questions:ve,durationMinutes:Ee,isAiGenerated:!0,version:"v2",createdAt:new Date().toISOString()};await kE(Fe),ri(Ze=>[Fe,...Ze]),mt(`Paket baru "${ut}" berhasil dibuat dan disimpan ke database!`,"success")}catch(ve){console.error(ve),mt("Gagal membuat paket soal. Coba lagi.","error")}},Ii=async Z=>{if(ri(ve=>ve.filter(Ee=>Ee.id!==Z)),Z.startsWith("gen-")||Z.startsWith("pkg-"))try{await uj(Z),mt("Paket dihapus dari database.","success")}catch(ve){console.error(ve)}else mt("Paket dihapus dari tampilan lokal.","success")},Bs=Z=>{Array.from(Z).forEach(ve=>{const Ee=new FileReader;Ee.onload=async Me=>{var Le;try{const ut=(Le=Me.target)==null?void 0:Le.result,Fe=JSON.parse(ut);Fe.id&&Fe.questions&&(await kE(Fe),ri(Ze=>Ze.find(bt=>bt.id===Fe.id)?Ze:[Fe,...Ze]),mt(`Paket "${Fe.title}" diimpor dan disimpan.`,"success"))}catch{mt("File tidak valid.","error")}},Ee.readAsText(ve)})};return n==="SPLASH"?u.jsx(b9,{onComplete:()=>e(N?"HOME":"LOGIN")}):c?u.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:u.jsx(js,{className:"animate-spin text-indigo-600 w-10 h-10"})}):n==="LOGIN"?u.jsx(r8,{onGoogleLogin:Ht,onGuestLogin:co,isLoading:U}):n==="USERNAME_SETUP"?u.jsx(a8,{onSubmit:cr,isLoading:U}):u.jsxs(u.Fragment,{children:[gs&&u.jsx(s8,{message:gs.msg,type:gs.type,onClose:()=>lo(null)}),u.jsx(_9,{isOpen:a,onClose:()=>o(!1),settings:C,onUpdate:D,userProfile:N,onUpdateProfile:Kt}),n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"&&u.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md z-40 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 py-3 flex justify-between items-center animate-fade-in-down",children:[u.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{oe.play("click"),e("HOME")},children:[u.jsx("img",{src:ef,alt:"Logo",className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white hidden md:block",children:"Fajmuls Learning"})]}),u.jsxs("div",{className:"flex-1 max-w-md mx-4 relative",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Xd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),u.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-full text-sm text-slate-800 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none transition-all placeholder:text-slate-400",placeholder:"Cari fitur (UTBK, Pauli, dll)...",value:p,onChange:Z=>m(Z.target.value)})]}),T&&v.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden z-50 animate-fade-in-up max-h-80 overflow-y-auto scrollbar-hide",children:v.map(Z=>u.jsxs("button",{onClick:()=>fn(Z),className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center justify-between group transition-colors",children:[u.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:Z.label}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold uppercase ${Z.type==="CATEGORY"?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:Z.type})]},Z.id))})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"hidden sm:flex flex-col items-end",children:[u.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(N==null?void 0:N.username)||"Tamu"}),u.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:N!=null&&N.isGuest?"Mode Tamu":"Online"})]}),u.jsx(n8,{user:N}),u.jsx("button",{onClick:()=>{oe.play("click"),o(!0)},className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:u.jsx(_1,{size:20,className:"text-slate-600 dark:text-slate-300"})})]})]}),u.jsxs("div",{className:`${n!=="SESSION"&&n!=="TES_KORAN"&&n!=="TES_KECERMATAN"&&n!=="BENCHMARK"?"pt-20":""}`,children:[n==="HOME"&&u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col items-center justify-center relative transition-colors duration-300",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("img",{src:ef,alt:"Logo",className:"w-32 h-32 object-contain mx-auto mb-6 animate-float"}),u.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"Pilih Jalur Belajarmu"}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sistem belajar adaptif untuk persiapan ujian."})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 w-full max-w-6xl",children:Rp.map(Z=>u.jsxs("button",{onClick:()=>as(Z.id),className:`p-8 rounded-2xl border-2 transition-all group text-left flex flex-col items-start relative overflow-hidden hover:-translate-y-1 hover:shadow-xl ${Z.id==="BENCHMARK"?"bg-white dark:bg-slate-800 border-red-200 dark:border-red-900 hover:border-red-500":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500"}`,children:[Z.id==="BENCHMARK"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),u.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/40 rounded-lg flex items-center justify-center mb-6 group-hover:bg-red-600 transition-colors relative z-10 text-red-600 dark:text-red-400 group-hover:text-white",children:u.jsx(Ls,{size:24})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-50 dark:bg-indigo-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),u.jsx("div",{className:"w-12 h-12 bg-indigo-50 dark:bg-slate-700 rounded-lg flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors relative z-10",children:Z.id==="GENERAL"?u.jsx(Zi,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Z.id==="SKD"?u.jsx(p1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Z.id==="INTERVIEW"?u.jsx(fh,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Z.id==="BUTAWRNA"?u.jsx(b1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Z.id==="PSIKOTEST"?u.jsx(Rs,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Z.id==="SKRIPSI"?u.jsx(uh,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):Z.id==="KECERMATAN"?u.jsx(y1,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"}):u.jsx(kg,{className:"text-indigo-600 dark:text-indigo-400 group-hover:text-white"})})]}),u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2 relative z-10",children:Z.name}),u.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm leading-relaxed relative z-10",children:Z.desc})]},Z.id))}),u.jsxs("div",{className:"mt-12 flex gap-4 flex-wrap justify-center",children:[u.jsxs("button",{onClick:()=>{oe.play("click"),e("HISTORY")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[u.jsx(Rg,{size:18})," Riwayat Belajar"]}),u.jsxs("button",{onClick:()=>{oe.play("click"),s("BENCHMARK"),Ue(null),e("BENCHMARK")},className:"flex items-center gap-2 px-6 py-3 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[u.jsx(E1,{size:18,className:"text-amber-500"})," Global Ranking"]}),u.jsxs("button",{onClick:uo,className:"flex items-center gap-2 px-6 py-3 bg-rose-50 dark:bg-rose-900/20 rounded-xl shadow-sm border border-rose-100 dark:border-rose-900 font-bold text-rose-700 dark:text-rose-400 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition",children:[u.jsx(yO,{size:18})," Keluar"]})]})]}),n==="DASHBOARD"&&u.jsx(f8,{category:t,onBack:()=>{oe.play("back"),e("HOME")},onStartSession:fo,onOpenTOSelection:()=>{oe.play("click"),e("TO_SELECTION")},onStartTesKoran:()=>{oe.play("click"),e("TES_KORAN")},onStartTesKecermatan:ai,onGeneralInputSubmit:ys,generalInput:$,setGeneralInput:ee,isReadingMaterial:se,onResetMaterial:()=>{R(!1),ee(null)},onSubtestSelect:k,selectedSubtest:M,weakTopicsCount:pe.size,loading:Mt,skdStream:G,onSkdStreamSelect:j,onHistory:()=>{oe.play("click"),e("HISTORY")},onStartGeneralSession:rs,onStartSkripsiSession:xs,username:(N==null?void 0:N.username)||"Guest",isDarkMode:C.darkMode,onToggleDarkMode:()=>{D(Z=>({...Z,darkMode:!Z.darkMode}))}}),n==="TO_SELECTION"&&u.jsx(E9,{category:t,skdStream:G||void 0,availablePackages:ha,history:Dt,onSelectPackage:ma,onGenerateNew:pa,onDeletePackage:Ii,onImportPackage:Bs,onBack:()=>{oe.play("back"),e("DASHBOARD")},showToast:mt,confirmEnabled:C.confirmActions,onRefresh:$n,isLoading:kl}),n==="SESSION"&&(t==="SKRIPSI"?u.jsx(o8,{result:ge,feature:ye,onBack:()=>{oe.play("back"),e("DASHBOARD")}}):t==="INTERVIEW"?u.jsx(l8,{questions:Te,onComplete:Z=>Gs(Z)}):t==="GENERAL"&&be==="SPACED_REPETITION"?u.jsx(c8,{flashcards:re,onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&be==="MIND_MAP"?u.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6 flex flex-col transition-colors duration-300",children:[" ",u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[" ",u.jsxs("button",{onClick:()=>{oe.play("back"),e("DASHBOARD")},className:"flex items-center text-slate-500 dark:text-slate-400",children:[u.jsx(kt,{size:18})," Kembali"]})," ",u.jsx("h2",{className:"font-bold text-slate-800 dark:text-white",children:"Mind Mapping"})," "]})," ",u.jsx(x9,{data:X})," "]}):t==="GENERAL"&&be==="FEYNMAN"?u.jsx(u8,{topic:($==null?void 0:$.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):t==="GENERAL"&&be==="SQ3R"?u.jsx(d8,{topic:($==null?void 0:$.content)||"",onFinish:()=>{oe.play("back"),e("DASHBOARD")}}):u.jsx(k9,{mode:O,questions:Te,drillContent:ft,onComplete:(Z,ve,Ee)=>Gs(Z,ve,Ee),isSkdSimulation:O===qe.SIMULATION&&t==="SKD",isUtbkSimulation:O===qe.SIMULATION&&t==="UTBK",category:t,showToast:mt,initialState:Fn,userId:N==null?void 0:N.uid,skdStream:G,packageTitle:qt})),n==="TES_KORAN"&&u.jsx(L9,{onBack:()=>e("DASHBOARD"),onComplete:Z=>Gs([],Z)}),n==="TES_KECERMATAN"&&u.jsx(U9,{initialMode:Y,onBack:()=>e("DASHBOARD"),onComplete:Z=>Gs([],Z)}),n==="BENCHMARK"&&u.jsx(t8,{onBack:()=>e("HOME"),onComplete:Z=>Gs([],Z),username:(N==null?void 0:N.username)||"Guest",history:Dt,isGuest:N==null?void 0:N.isGuest,initialMode:Se||void 0}),n==="RESULTS"&&u.jsx(A9,{answers:ht,questions:Te,onHome:()=>{oe.play("back"),e("HOME")},onRetry:()=>{oe.play("click"),fo(O)},category:t,details:(ga=Dt[0])==null?void 0:ga.details}),n==="HISTORY"&&u.jsx(N9,{history:Dt,onBack:()=>{oe.play("back"),e("HOME")},onReview:Z=>{oe.play("click"),fa(Z),e("REVIEW")},username:(N==null?void 0:N.username)||"Guest",onExport:Rl,onImport:Ci,isDarkMode:C.darkMode,onDelete:Ni}),n==="REVIEW"&&u.jsx(C9,{item:da,onBack:()=>{oe.play("back"),e("HISTORY")}}),n==="COLORBLIND"&&u.jsx(j9,{onBack:()=>{oe.play("back"),e("HOME")},onComplete:Z=>Gs([],Z)})]})]})}const M1=document.getElementById("root");if(!M1)throw new Error("Could not find root element to mount to");const m8=bC.createRoot(M1);m8.render(u.jsx(fC.StrictMode,{children:u.jsx(h8,{})}));
